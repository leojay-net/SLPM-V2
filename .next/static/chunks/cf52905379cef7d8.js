(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,135339,e=>{"use strict";e.s(["CrossChainQuote",()=>o]);var t=e.i(843476),s=e.i(271645),r=e.i(754863),a=e.i(779529),n=e.i(163858),l=e.i(263150),i=e.i(860463);function o(e){var o;let{direction:c,amount:d,onQuoteReady:x,className:m=""}=e,[u,g]=(0,s.useState)(null),[h,p]=(0,s.useState)(!1),[f,b]=(0,s.useState)(null),[y,j]=(0,s.useState)(0),N=(0,s.useCallback)(async()=>{if(d<=0){g(null),b(null),null==x||x(null);return}p(!0),b(null);try{let e,t,s,r,a,n,l,i="zec-to-strk"===c;i?(e=d,r="ZEC",a="STRK",s=(t=Math.floor(.00583*d*1e8))/1e8*7760,n=1.5,l=1):(e=d,r="STRK",a="ZEC",s=(t=Math.floor(125e-6*d*99e6))/1e8/.00583*.985,n=1,l=1.5);let o={inputAmount:e,inputCurrency:r,lightningAmount:t,outputAmount:s,outputCurrency:a,totalFeePercent:n+l,legs:{first:{rate:i?.00583:125e-6,fee:n},second:{rate:i?8e3:171.52658662092625,fee:l}},expiresAt:Date.now()+6e4};g(o),j(60),null==x||x(o)}catch(e){b(e instanceof Error?e.message:"Failed to fetch quote"),g(null),null==x||x(null)}finally{p(!1)}},[d,c,x]);(0,s.useEffect)(()=>{let e=setTimeout(N,500);return()=>clearTimeout(e)},[N]),(0,s.useEffect)(()=>{if(y<=0)return;let e=setInterval(()=>{j(e=>e<=1?(N(),0):e-1)},1e3);return()=>clearInterval(e)},[y,N]);let v=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4;return e.toLocaleString(void 0,{minimumFractionDigits:2,maximumFractionDigits:t})};return!d||d<=0?(0,t.jsx)("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6 ".concat(m),children:(0,t.jsxs)("div",{className:"flex items-center justify-center text-gray-500 py-8",children:[(0,t.jsx)(i.InformationCircleIcon,{className:"w-5 h-5 mr-2"}),(0,t.jsx)("span",{children:"Enter an amount to see quote"})]})}):h?(0,t.jsx)("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6 ".concat(m),children:(0,t.jsxs)("div",{className:"flex items-center justify-center py-8",children:[(0,t.jsx)(a.ArrowPathIcon,{className:"w-6 h-6 text-blue-400 animate-spin mr-3"}),(0,t.jsx)("span",{className:"text-gray-300",children:"Fetching best rate..."})]})}):f?(0,t.jsxs)("div",{className:"bg-red-900/20 border border-red-800 rounded-xl p-6 ".concat(m),children:[(0,t.jsxs)("div",{className:"flex items-center text-red-400",children:[(0,t.jsx)(l.ExclamationTriangleIcon,{className:"w-5 h-5 mr-2"}),(0,t.jsx)("span",{children:f})]}),(0,t.jsx)("button",{onClick:N,className:"mt-4 text-sm text-blue-400 hover:text-blue-300 underline",children:"Try again"})]}):u?(0,t.jsxs)("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl overflow-hidden ".concat(m),children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-700 flex items-center justify-between",children:[(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsx)(r.ArrowsRightLeftIcon,{className:"w-5 h-5 text-blue-400"}),(0,t.jsx)("span",{className:"font-medium text-white",children:"Quote"})]}),(0,t.jsxs)("div",{className:"flex items-center space-x-2 text-sm text-gray-400",children:[(0,t.jsxs)("span",{children:["Refreshing in ",y,"s"]}),(0,t.jsx)("button",{onClick:N,className:"p-1 hover:bg-gray-700 rounded transition-colors",title:"Refresh quote",children:(0,t.jsx)(a.ArrowPathIcon,{className:"w-4 h-4"})})]})]}),(0,t.jsxs)("div",{className:"p-6 space-y-4",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between py-4 px-5 bg-gray-900/50 rounded-lg",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-white",children:v(u.inputAmount,6)}),(0,t.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:u.inputCurrency})]}),(0,t.jsxs)("div",{className:"flex flex-col items-center px-4",children:[(0,t.jsx)(r.ArrowsRightLeftIcon,{className:"w-6 h-6 text-gray-500"}),(0,t.jsxs)("span",{className:"text-xs text-gray-500 mt-1",children:[(o=u.lightningAmount)>=1e6?"".concat((o/1e6).toFixed(2),"M"):o>=1e3?"".concat((o/1e3).toFixed(1),"k"):o.toString()," sats"]})]}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"text-2xl font-bold text-green-400",children:v(u.outputAmount,6)}),(0,t.jsx)("div",{className:"text-sm text-gray-400 mt-1",children:u.outputCurrency})]})]}),(0,t.jsxs)("div",{className:"grid grid-cols-2 gap-4 text-sm",children:[(0,t.jsxs)("div",{className:"p-3 bg-gray-900/30 rounded-lg",children:[(0,t.jsx)("div",{className:"text-gray-400 mb-1",children:"zec-to-strk"===c?"ZEC â†’ Lightning":"STRK â†’ Lightning"}),(0,t.jsxs)("div",{className:"text-white font-medium",children:["Rate: ",u.legs.first.rate.toFixed(6)]}),(0,t.jsxs)("div",{className:"text-gray-500 text-xs",children:["Fee: ~",u.legs.first.fee.toFixed(2),"%"]})]}),(0,t.jsxs)("div",{className:"p-3 bg-gray-900/30 rounded-lg",children:[(0,t.jsx)("div",{className:"text-gray-400 mb-1",children:"zec-to-strk"===c?"Lightning â†’ STRK":"Lightning â†’ ZEC"}),(0,t.jsxs)("div",{className:"text-white font-medium",children:["Rate: ",u.legs.second.rate.toFixed(6)]}),(0,t.jsxs)("div",{className:"text-gray-500 text-xs",children:["Fee: ~",u.legs.second.fee.toFixed(2),"%"]})]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between pt-2 border-t border-gray-700",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Total Estimated Fee"}),(0,t.jsxs)("span",{className:"text-orange-400 font-medium",children:["~",u.totalFeePercent.toFixed(2),"%"]})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"text-gray-400",children:"Effective Rate"}),(0,t.jsxs)("span",{className:"text-white font-medium",children:["1 ",u.inputCurrency," = ",v(u.outputAmount/u.inputAmount,4)," ",u.outputCurrency]})]})]}),(0,t.jsx)("div",{className:"px-6 py-3 bg-gray-900/30 border-t border-gray-700",children:(0,t.jsxs)("div",{className:"flex items-start space-x-2 text-xs text-gray-500",children:[(0,t.jsx)(n.CheckCircleIcon,{className:"w-4 h-4 text-green-500 flex-shrink-0 mt-0.5"}),(0,t.jsx)("span",{children:"Quote includes all network fees. Final amount may vary slightly due to market conditions."})]})})]}):null}},853734,e=>{"use strict";e.s(["TransferStatusTracker",()=>p],853734);var t=e.i(843476),s=e.i(271645),r=e.i(163858),a=e.i(370221);let n=s.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",strokeWidth:1.5,stroke:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{strokeLinecap:"round",strokeLinejoin:"round",d:"M12 9v3.75m9-.75a9 9 0 1 1-18 0 9 9 0 0 1 18 0Zm-9 3.75h.008v.008H12v-.008Z"}))});var l=e.i(779529),i=e.i(922881),o=e.i(586177),c=e.i(914685),d=e.i(685249),x=e.i(963972);let m=s.forwardRef(function(e,t){let{title:r,titleId:a,...n}=e;return s.createElement("svg",Object.assign({xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24",fill:"currentColor","aria-hidden":"true","data-slot":"icon",ref:t,"aria-labelledby":a},n),r?s.createElement("title",{id:a},r):null,s.createElement("path",{fillRule:"evenodd",d:"M2.25 12c0-5.385 4.365-9.75 9.75-9.75s9.75 4.365 9.75 9.75-4.365 9.75-9.75 9.75S2.25 17.385 2.25 12Zm13.36-1.814a.75.75 0 1 0-1.22-.872l-3.236 4.53L9.53 12.22a.75.75 0 0 0-1.06 1.06l2.25 2.25a.75.75 0 0 0 1.14-.094l3.75-5.25Z",clipRule:"evenodd"}))}),u={"atomiq-swap-create":o.BoltIcon,"fixedfloat-order":l.ArrowPathIcon,"zec-deposit":i.BanknotesIcon,"lightning-payment":o.BoltIcon,"strk-claim":c.WalletIcon,"strk-to-lightning":o.BoltIcon,"zec-delivery":i.BanknotesIcon,"privacy-mixer":d.ShieldCheckIcon,"cashu-flow":d.ShieldCheckIcon},g={pending:"text-gray-500 border-gray-600 bg-gray-800","in-progress":"text-blue-400 border-blue-500 bg-blue-500/10",complete:"text-green-400 border-green-500 bg-green-500/10",failed:"text-red-400 border-red-500 bg-red-500/10",skipped:"text-gray-500 border-gray-600 bg-gray-800/50"},h={pending:"text-gray-500","in-progress":"text-blue-400",complete:"text-green-400",failed:"text-red-400",skipped:"text-gray-500"};function p(e){let{steps:i,currentStepIndex:o,direction:c,depositAddress:d,depositAmount:p,className:f=""}=e,[b,y]=s.default.useState(!1),j=async e=>{try{await navigator.clipboard.writeText(e),y(!0),setTimeout(()=>y(!1),2e3)}catch(e){console.error("Failed to copy:",e)}},N=i.filter(e=>"complete"===e.status).length,v=N/i.length*100;return(0,t.jsxs)("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl overflow-hidden ".concat(f),children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-700",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between mb-3",children:[(0,t.jsx)("h3",{className:"font-medium text-white",children:"Transfer Progress"}),(0,t.jsxs)("span",{className:"text-sm text-gray-400",children:[N," of ",i.length," steps"]})]}),(0,t.jsx)("div",{className:"h-1.5 bg-gray-700 rounded-full overflow-hidden",children:(0,t.jsx)("div",{className:"h-full bg-gradient-to-r from-blue-500 to-green-500 rounded-full transition-all duration-500",style:{width:"".concat(v,"%")}})})]}),d&&"zec-to-strk"===c&&o<=2&&(0,t.jsxs)("div",{className:"mx-6 mt-6 p-4 bg-orange-500/10 border border-orange-500/30 rounded-lg",children:[(0,t.jsxs)("div",{className:"flex items-start justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsxs)("div",{className:"text-sm text-orange-400 font-medium mb-1",children:["Send ",p," ZEC to:"]}),(0,t.jsx)("code",{className:"text-xs text-white font-mono break-all",children:d})]}),(0,t.jsx)("button",{onClick:()=>j(d),className:"p-2 hover:bg-orange-500/20 rounded-lg transition-colors flex-shrink-0",title:"Copy address",children:b?(0,t.jsx)(r.CheckCircleIcon,{className:"w-5 h-5 text-green-400"}):(0,t.jsx)(x.DocumentDuplicateIcon,{className:"w-5 h-5 text-orange-400"})})]}),(0,t.jsx)("div",{className:"mt-2 text-xs text-gray-400",children:"Transfer will continue automatically once deposit is confirmed"})]}),(0,t.jsx)("div",{className:"p-6 space-y-1",children:i.map((e,s)=>{let r=u[e.name]||l.ArrowPathIcon,c=s===o,d=((e,t)=>{if(!e)return null;let s=Math.floor(((t||Date.now())-e)/1e3);if(s<60)return"".concat(s,"s");let r=Math.floor(s/60);return"".concat(r,"m ").concat(s%60,"s")})(e.startedAt,e.completedAt);return(0,t.jsxs)("div",{className:"relative flex items-start p-4 rounded-lg transition-colors ".concat(c?"bg-gray-900/50":""),children:[s<i.length-1&&(0,t.jsx)("div",{className:"absolute left-7 top-14 w-0.5 h-6 ".concat("complete"===e.status?"bg-green-500/50":"bg-gray-700")}),(0,t.jsx)("div",{className:"flex-shrink-0 w-10 h-10 rounded-full border-2 flex items-center justify-center mr-4 ".concat(g[e.status]),children:(0,t.jsx)(r,{className:"w-5 h-5 ".concat(h[e.status])})}),(0,t.jsxs)("div",{className:"flex-1 min-w-0",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsx)("span",{className:"font-medium ".concat("complete"===e.status?"text-green-400":"in-progress"===e.status?"text-blue-400":"failed"===e.status?"text-red-400":"text-gray-400"),children:e.description}),((e,s)=>{switch(e.status){case"complete":return(0,t.jsx)(m,{className:"w-5 h-5 text-green-400"});case"in-progress":return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(l.ArrowPathIcon,{className:"w-5 h-5 text-blue-400 animate-spin"}),s===o&&(0,t.jsx)("span",{className:"absolute -top-1 -right-1 w-2 h-2 bg-blue-400 rounded-full animate-pulse"})]});case"failed":return(0,t.jsx)(n,{className:"w-5 h-5 text-red-400"});case"skipped":return(0,t.jsx)("div",{className:"w-5 h-5 rounded-full border-2 border-dashed border-gray-600"});default:return(0,t.jsx)(a.ClockIcon,{className:"w-5 h-5 text-gray-500"})}})(e,s)]}),d&&(0,t.jsxs)("div",{className:"text-xs text-gray-500 mt-1",children:["complete"===e.status?"Completed in":"Running for"," ",d]}),e.txId&&(0,t.jsxs)("div",{className:"mt-2 flex items-center space-x-2",children:[(0,t.jsx)("span",{className:"text-xs text-gray-500",children:"TX:"}),(0,t.jsx)("code",{className:"text-xs text-blue-400 font-mono truncate max-w-[200px]",children:e.txId}),(0,t.jsx)("button",{onClick:()=>j(e.txId),className:"p-1 hover:bg-gray-700 rounded",children:(0,t.jsx)(x.DocumentDuplicateIcon,{className:"w-3 h-3 text-gray-500"})})]}),e.error&&(0,t.jsx)("div",{className:"mt-2 text-xs text-red-400 bg-red-900/20 px-2 py-1 rounded",children:e.error}),e.data&&Object.keys(e.data).length>0&&(0,t.jsx)("div",{className:"mt-2 text-xs text-gray-500",children:Object.entries(e.data).map(e=>{let[s,r]=e;return(0,t.jsxs)("div",{className:"flex items-center space-x-2",children:[(0,t.jsxs)("span",{className:"capitalize",children:[s.replace(/([A-Z])/g," $1").trim(),":"]}),(0,t.jsx)("span",{className:"text-gray-400 truncate max-w-[150px]",children:String(r)})]},s)})})]})]},e.id)})})]})}},592711,e=>{"use strict";e.s(["ZecDepositForm",()=>d]);var t=e.i(843476),s=e.i(271645),r=e.i(754863),a=e.i(844735),n=e.i(685249),l=e.i(586177),i=e.i(860463),o=e.i(263150);let c={ZEC:{name:"Zcash",symbol:"ZEC",icon:"Z",color:"text-orange-500",bgColor:"bg-orange-500/10",min:.003,max:27},STRK:{name:"Starknet",symbol:"STRK",icon:"S",color:"text-orange-400",bgColor:"bg-orange-400/10",min:10,max:1e4}};function d(e){let{onSubmit:d,onChange:x,isLoading:m=!1,disabled:u=!1,className:g=""}=e,[h,p]=(0,s.useState)("zec-to-strk"),[f,b]=(0,s.useState)(""),[y,j]=(0,s.useState)(""),[N,v]=(0,s.useState)(!1),[w,C]=(0,s.useState)(!1),[S,k]=(0,s.useState)(!1),T="zec-to-strk"===h?c.ZEC:c.STRK,E="zec-to-strk"===h?c.STRK:c.ZEC,A=parseFloat(f)||0,I=A>=T.min&&A<=T.max,F=y.length>10,R=I&&F&&!m&&!u;return(0,t.jsxs)("form",{onSubmit:e=>{e.preventDefault(),f&&y&&d({direction:h,amount:parseFloat(f),destinationAddress:y,usePrivacyMixer:N,useCashuFlow:w})},className:"bg-gray-900 border border-gray-700 rounded-xl ".concat(g),children:[(0,t.jsxs)("div",{className:"px-6 py-4 border-b border-gray-700",children:[(0,t.jsxs)("h2",{className:"text-lg font-semibold text-white flex items-center space-x-2",children:[(0,t.jsx)(r.ArrowsRightLeftIcon,{className:"w-5 h-5 text-blue-400"}),(0,t.jsx)("span",{children:"Cross-Chain Swap"})]}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Private transfers between Zcash and Starknet"})]}),(0,t.jsxs)("div",{className:"p-6 space-y-6",children:[(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm text-gray-400",children:"You Send"}),(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)("div",{className:"absolute left-4 top-1/2 -translate-y-1/2 w-8 h-8 rounded-full ".concat(T.bgColor," flex items-center justify-center"),children:(0,t.jsx)("span",{className:"text-sm font-bold ".concat(T.color),children:T.icon})}),(0,t.jsx)("input",{type:"number",value:f,onChange:e=>(e=>{b(e);let t=parseFloat(e)||0;null==x||x({direction:h,amount:t})})(e.target.value),placeholder:"0.00",step:"any",min:T.min,max:T.max,className:"w-full bg-gray-800 border border-gray-600 rounded-lg pl-14 pr-20 py-4 text-xl text-white placeholder-gray-500 focus:border-blue-500 focus:outline-none transition-colors",disabled:m||u}),(0,t.jsx)("div",{className:"absolute right-4 top-1/2 -translate-y-1/2",children:(0,t.jsx)("span",{className:"text-lg font-medium ".concat(T.color),children:T.symbol})})]}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[(0,t.jsxs)("span",{children:["Min: ",T.min," ",T.symbol]}),(0,t.jsxs)("span",{children:["Max: ",T.max," ",T.symbol]})]})]}),(0,t.jsx)("div",{className:"flex justify-center -my-2",children:(0,t.jsx)("button",{type:"button",onClick:()=>{let e="zec-to-strk"===h?"strk-to-zec":"zec-to-strk";p(e),b(""),j(""),null==x||x({direction:e,amount:0})},className:"p-3 bg-gray-800 border border-gray-600 rounded-full hover:bg-gray-700 hover:border-gray-500 transition-all duration-200 group",disabled:m||u,children:(0,t.jsx)(r.ArrowsRightLeftIcon,{className:"w-5 h-5 text-gray-400 group-hover:text-blue-400 transition-colors rotate-90"})})}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm text-gray-400",children:"You Receive"}),(0,t.jsxs)("div",{className:"relative flex items-center px-4 py-4 bg-gray-800/50 border border-gray-700 rounded-lg",children:[(0,t.jsx)("div",{className:"w-8 h-8 rounded-full ".concat(E.bgColor," flex items-center justify-center mr-3"),children:(0,t.jsx)("span",{className:"text-sm font-bold ".concat(E.color),children:E.icon})}),(0,t.jsxs)("span",{className:"text-lg text-gray-400",children:[A>0?"~":""," Estimated after quote"]}),(0,t.jsx)("span",{className:"ml-auto text-lg font-medium ".concat(E.color),children:E.symbol})]})]}),(0,t.jsxs)("div",{className:"space-y-2",children:[(0,t.jsx)("label",{className:"block text-sm text-gray-400",children:"zec-to-strk"===h?"Starknet Destination Address":"Zcash Destination Address"}),(0,t.jsx)("input",{type:"text",value:y,onChange:e=>j(e.target.value),placeholder:"zec-to-strk"===h?"0x...":"z...",className:"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-500 focus:border-blue-500 focus:outline-none transition-colors font-mono text-sm",disabled:m||u}),"strk-to-zec"===h&&(0,t.jsxs)("div",{className:"flex items-start space-x-2 text-xs text-orange-400/80",children:[(0,t.jsx)(o.ExclamationTriangleIcon,{className:"w-4 h-4 flex-shrink-0 mt-0.5"}),(0,t.jsx)("span",{children:"Use a shielded z-address for maximum privacy"})]})]}),(0,t.jsxs)("button",{type:"button",onClick:()=>k(!S),className:"flex items-center justify-between w-full py-2 text-sm text-gray-400 hover:text-gray-300 transition-colors",children:[(0,t.jsxs)("span",{className:"flex items-center space-x-2",children:[(0,t.jsx)(n.ShieldCheckIcon,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"Privacy Options"})]}),(0,t.jsx)(a.ChevronDownIcon,{className:"w-4 h-4 transition-transform ".concat(S?"rotate-180":"")})]}),S&&(0,t.jsxs)("div",{className:"space-y-4 pt-2 border-t border-gray-700",children:[(0,t.jsxs)("label",{className:"flex items-start space-x-3 cursor-pointer group",children:[(0,t.jsx)("input",{type:"checkbox",checked:N,onChange:e=>v(e.target.checked),className:"mt-1 w-4 h-4 rounded border-gray-600 bg-gray-800 text-blue-500 focus:ring-blue-500 focus:ring-offset-0",disabled:m||u}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-white group-hover:text-blue-400 transition-colors",children:"Use Privacy Mixer"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:"Route through ZK privacy mixer for enhanced anonymity"})]})]}),(0,t.jsxs)("label",{className:"flex items-start space-x-3 cursor-pointer group",children:[(0,t.jsx)("input",{type:"checkbox",checked:w,onChange:e=>C(e.target.checked),className:"mt-1 w-4 h-4 rounded border-gray-600 bg-gray-800 text-blue-500 focus:ring-blue-500 focus:ring-offset-0",disabled:m||u}),(0,t.jsxs)("div",{children:[(0,t.jsx)("span",{className:"text-white group-hover:text-blue-400 transition-colors",children:"Use Cashu Ecash Flow"}),(0,t.jsx)("p",{className:"text-xs text-gray-500 mt-0.5",children:"Additional privacy layer through ecash tokens"})]})]})]}),(0,t.jsxs)("div",{className:"flex items-start space-x-3 p-4 bg-blue-500/10 border border-blue-500/20 rounded-lg",children:[(0,t.jsx)(i.InformationCircleIcon,{className:"w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5"}),(0,t.jsxs)("div",{className:"text-sm text-gray-300",children:[(0,t.jsx)("p",{className:"font-medium text-blue-400 mb-1",children:"How it works"}),(0,t.jsx)("p",{className:"text-gray-400",children:"zec-to-strk"===h?"Send ZEC to a generated address. It will be converted through Lightning Network to STRK on Starknet.":"Your STRK will be converted through Lightning Network to ZEC at your specified address."})]})]}),(0,t.jsx)("button",{type:"submit",disabled:!R,className:"w-full py-4 rounded-lg font-medium text-lg transition-all duration-200 flex items-center justify-center space-x-2 ".concat(R?"bg-orange-500 hover:bg-orange-600 text-white shadow-lg shadow-orange-500/25":"bg-gray-700 text-gray-400 cursor-not-allowed"),children:m?(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.BoltIcon,{className:"w-5 h-5 animate-pulse"}),(0,t.jsx)("span",{children:"Preparing Transfer..."})]}):(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)(l.BoltIcon,{className:"w-5 h-5"}),(0,t.jsx)("span",{children:"zec-to-strk"===h?"Start ZEC to STRK Transfer":"Start STRK to ZEC Transfer"})]})}),(0,t.jsx)("p",{className:"text-xs text-gray-500 text-center",children:"By proceeding, you acknowledge that cross-chain transfers are irreversible and subject to network fees."})]})]})}},263528,e=>{"use strict";e.s(["CrossChainSwap",()=>g],263528);var t=e.i(843476),s=e.i(271645),r=e.i(754863),a=e.i(685249),n=e.i(586177),l=e.i(370221),i=e.i(163858),o=e.i(427217),c=e.i(135339),d=e.i(592711),x=e.i(853734),m=e.i(516687),u=e.i(68043);function g(){let{isInitialized:e,isLoading:g,error:h,transfer:p,initiateZecToStrk:f,cancelTransfer:b,setError:y}=function(){let[e,t]=(0,s.useState)(!1),[r,a]=(0,s.useState)(!1),[n,l]=(0,s.useState)(null),[i,o]=(0,s.useState)(null),[c,d]=(0,s.useState)(null),x=(0,s.useRef)(null),g=(0,s.useRef)(null);(0,s.useEffect)(()=>{g.current=(async()=>{try{console.log("ðŸ”§ Initializing cross-chain swap client...");let e="MAINNET"===u.ENV.NETWORK?"MAINNET":"TESTNET";x.current=new m.RealAtomiqSwapClient(e),await new Promise(e=>setTimeout(e,2e3)),t(!0),console.log("âœ… Cross-chain swap client initialized")}catch(e){console.error("âŒ Failed to initialize:",e),l(e instanceof Error?e.message:"Failed to initialize")}})()},[]);let h=(0,s.useCallback)(async(e,t)=>{let s=await fetch("/api/fixedfloat",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({endpoint:e,data:t})}),r=await s.json();if(!r.success&&r.error)throw Error(r.error);return r},[]),p=(0,s.useCallback)(async e=>{a(!0),l(null);try{let t=await h("/price",{fromCcy:"ZEC",toCcy:"BTCLN",amount:e.toString(),direction:"from",type:"float"});if(0!==t.code)throw Error(t.msg||"Failed to get ZEC quote");let s=parseFloat(t.data.to.amount),r=Math.floor(1e8*s),a=0,n=.5;if(x.current)try{let e=await x.current.getQuote("BTC_LN","STRK",BigInt(r),!0);a=Number(e.amountOut)/1e18,n=Number(e.fee)/r*100}catch(t){console.warn("Using fallback STRK estimate:",t);let e=u.ENV.STRK_SATS_RATE||125;a=r/e}else{let e=u.ENV.STRK_SATS_RATE||125;a=r/e}let l=(e-s)/e*100,i={inputAmount:e,inputCurrency:"ZEC",outputAmount:a,outputCurrency:"STRK",lightningAmount:r,totalFeePercent:l+n,legs:{first:{from:"ZEC",to:"Lightning",rate:parseFloat(t.data.from.rate),fee:l},second:{from:"Lightning",to:"STRK",rate:a/r,fee:n}},expiry:Date.now()+6e4};return d(i),i}catch(e){return l(e instanceof Error?e.message:"Failed to get quote"),null}finally{a(!1)}},[h]),f=(0,s.useCallback)(async e=>{a(!0),l(null);try{let t=0,s=.5,r=BigInt(Math.floor(1e18*e));if(x.current)try{let e=await x.current.getQuote("STRK","BTC_LN",r,!0);t=Number(e.amountOut),s=Number(e.fee)/Number(r)*100}catch(r){console.warn("Using fallback Lightning estimate:",r);let s=u.ENV.STRK_SATS_RATE||125;t=Math.floor(e*s)}else{let s=u.ENV.STRK_SATS_RATE||125;t=Math.floor(e*s)}let a=t/1e8,n=await h("/price",{fromCcy:"BTCLN",toCcy:"ZEC",amount:a.toString(),direction:"from",type:"float"});if(0!==n.code)throw Error(n.msg||"Failed to get ZEC quote");let l=parseFloat(n.data.to.amount),i=(a-l*parseFloat(n.data.from.rate))/a*100,o={inputAmount:e,inputCurrency:"STRK",outputAmount:l,outputCurrency:"ZEC",lightningAmount:t,totalFeePercent:s+Math.abs(i),legs:{first:{from:"STRK",to:"Lightning",rate:t/e,fee:s},second:{from:"Lightning",to:"ZEC",rate:parseFloat(n.data.from.rate),fee:Math.abs(i)}},expiry:Date.now()+6e4};return d(o),o}catch(e){return l(e instanceof Error?e.message:"Failed to get quote"),null}finally{a(!1)}},[h]),b=(0,s.useCallback)(async function(e,t){arguments.length>2&&void 0!==arguments[2]&&arguments[2],a(!0),l(null);let s={id:"transfer_".concat(Date.now()),direction:"zec-to-strk",amount:e,destinationAddress:t,status:"in-progress",steps:[{id:1,name:"atomiq-swap",description:"Creating Atomiq Lightning swap",status:"pending"},{id:2,name:"fixedfloat-order",description:"Creating ZEC deposit order",status:"pending"},{id:3,name:"awaiting-deposit",description:"Awaiting ZEC deposit",status:"pending"},{id:4,name:"lightning-payment",description:"Processing Lightning payment",status:"pending"},{id:5,name:"strk-claim",description:"Claiming STRK on Starknet",status:"pending"}],currentStepIndex:0,createdAt:Date.now()};o(s);try{y(s,0,"in-progress","Getting swap quote...");let r=await h("/price",{fromCcy:"ZEC",toCcy:"BTCLN",amount:e.toString(),direction:"from",type:"float"});if(0!==r.code)throw Error(r.msg||"Failed to get ZEC quote");let a=parseFloat(r.data.to.amount),n=Math.floor(1e8*a);if(!x.current)throw Error("Atomiq client not initialized. Please wait and try again.");console.log("Creating Atomiq swap: ".concat(n," sats â†’ ").concat(t));let l=await x.current.beginLightningToStrkSwap(n,t);s.atomiqSwapId=l.id,y(s,0,"complete","Atomiq swap created"),y(s,1,"in-progress","Creating FixedFloat order..."),console.log("Creating FixedFloat order with Atomiq invoice");let i=await h("/create",{fromCcy:"ZEC",toCcy:"BTCLN",amount:e.toString(),direction:"from",type:"float",toAddress:l.invoice});if(0!==i.code)throw Error(i.msg||"Failed to create FixedFloat order");let c=i.data.from.address,d=i.data.from.amount;return s.fixedFloatOrderId=i.data.id,s.depositAddress=c,s.depositAmount=d,y(s,1,"complete","FixedFloat order created",{orderId:i.data.id,depositAddress:c,expectedAmount:d}),y(s,2,"in-progress","Awaiting ZEC deposit"),console.log("\nðŸ”” DEPOSIT ZEC TO: ".concat(c)),console.log("   Amount: ".concat(d," ZEC")),o({...s}),s}catch(t){let e=t instanceof Error?t.message:"Transfer failed";return l(e),s.status="failed",s.error=e,o({...s}),null}finally{a(!1)}},[h]),y=(e,t,s,r,a)=>{e.steps[t]&&(e.steps[t].status=s,r&&(e.steps[t].description=r),a&&(e.steps[t].data=a),e.currentStepIndex=t),o({...e})};return{isInitialized:e,isLoading:r,error:n,transfer:i,quote:c,getZecToStrkQuote:p,getStrkToZecQuote:f,initiateZecToStrk:b,cancelTransfer:(0,s.useCallback)(()=>{o(null),l(null),d(null)},[]),setError:l}}(),[j,N]=(0,s.useState)(null),[v,w]=(0,s.useState)(!1),[C,S]=(0,s.useState)(null),[k,T]=(0,s.useState)(null);(0,s.useEffect)(()=>{p&&N({id:p.id,direction:p.direction,amount:p.amount,destinationAddress:p.destinationAddress,status:p.status,steps:p.steps.map((e,t)=>({id:t+1,name:e.name,description:e.description,status:e.status})),currentStepIndex:p.currentStepIndex,depositAddress:p.depositAddress,depositAmount:p.depositAmount,createdAt:p.createdAt})},[p]),(0,s.useEffect)(()=>{h&&S(h)},[h]);let E=(0,s.useCallback)(async e=>{w(!0),S(null),y(null);try{if(console.log("Initiating cross-chain swap (client-side):",e),"zec-to-strk"===e.direction){let t=await f(e.amount,e.destinationAddress,{usePrivacyMixer:e.usePrivacyMixer,useCashuFlow:e.useCashuFlow});if(!t)throw Error("Failed to initiate transfer");console.log("Transfer initiated:",t)}else throw Error("STRK to ZEC not yet implemented")}catch(e){console.error("Failed to create transfer:",e),S(e instanceof Error?e.message:"Failed to initiate transfer")}finally{w(!1)}},[f,y]),A=C||h;return(0,t.jsxs)("div",{className:"flex-1 bg-gray-950 text-white",children:[(0,t.jsx)("div",{className:"fixed inset-0 bg-gray-950 -z-10",children:(0,t.jsx)("div",{className:"absolute inset-0 opacity-70 pointer-events-none",style:{backgroundImage:"url('/patterns/grid.svg')",backgroundSize:"32px 32px",backgroundRepeat:"repeat"}})}),(0,t.jsxs)("div",{className:"relative z-10",children:[(0,t.jsx)("div",{className:"border-b border-gray-800",children:(0,t.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-12",children:(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsxs)("div",{className:"flex items-center justify-center space-x-4 mb-4",children:[(0,t.jsx)("div",{className:"p-3 bg-orange-500/10 rounded-xl",children:(0,t.jsx)("span",{className:"text-2xl font-bold text-orange-500",children:"Z"})}),(0,t.jsx)(r.ArrowsRightLeftIcon,{className:"w-8 h-8 text-gray-500"}),(0,t.jsx)("div",{className:"p-3 bg-orange-400/10 rounded-xl",children:(0,t.jsx)("span",{className:"text-2xl font-bold text-orange-400",children:"S"})})]}),(0,t.jsx)("h1",{className:"text-3xl md:text-4xl font-bold text-white mb-3",children:"Cross-Chain Privacy Transfer"}),(0,t.jsx)("p",{className:"text-gray-400 max-w-2xl mx-auto",children:"Seamlessly transfer between Zcash and Starknet with enhanced privacy through Lightning Network, ZK proofs, and Cashu ecash."}),(0,t.jsxs)("div",{className:"flex flex-wrap items-center justify-center gap-3 mt-6",children:[(0,t.jsxs)("span",{className:"inline-flex items-center px-3 py-1.5 bg-gray-800 border border-gray-700 rounded-full text-sm text-gray-300",children:[(0,t.jsx)(a.ShieldCheckIcon,{className:"w-4 h-4 mr-1.5 text-green-400"}),"ZK Privacy"]}),(0,t.jsxs)("span",{className:"inline-flex items-center px-3 py-1.5 bg-gray-800 border border-gray-700 rounded-full text-sm text-gray-300",children:[(0,t.jsx)(n.BoltIcon,{className:"w-4 h-4 mr-1.5 text-orange-400"}),"Lightning Fast"]}),(0,t.jsxs)("span",{className:"inline-flex items-center px-3 py-1.5 bg-gray-800 border border-gray-700 rounded-full text-sm text-gray-300",children:[(0,t.jsx)(l.ClockIcon,{className:"w-4 h-4 mr-1.5 text-blue-400"}),"~5 min transfers"]})]})]})})}),(0,t.jsx)("div",{className:"max-w-6xl mx-auto px-4 py-8",children:j?(0,t.jsxs)("div",{className:"max-w-2xl mx-auto space-y-6",children:[(0,t.jsxs)("div",{className:"flex items-center justify-between",children:[(0,t.jsxs)("div",{children:[(0,t.jsx)("h2",{className:"text-xl font-semibold text-white",children:"complete"===j.status?"Transfer Complete":"Transfer in Progress"}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"zec-to-strk"===j.direction?"".concat(j.amount," ZEC to STRK"):"".concat(j.amount," STRK to ZEC")})]}),"complete"===j.status?(0,t.jsxs)("button",{onClick:()=>{b(),N(null),T(null),S(null)},className:"px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors flex items-center space-x-2",children:[(0,t.jsx)(r.ArrowsRightLeftIcon,{className:"w-4 h-4"}),(0,t.jsx)("span",{children:"New Transfer"})]}):(0,t.jsx)("button",{onClick:()=>{b(),N(null),T(null),S(null)},className:"p-2 hover:bg-gray-800 rounded-lg text-gray-400 hover:text-white transition-colors",title:"Cancel",children:(0,t.jsx)(o.XMarkIcon,{className:"w-5 h-5"})})]}),"complete"===j.status&&(0,t.jsxs)("div",{className:"p-4 bg-green-500/10 border border-green-500/30 rounded-xl flex items-start space-x-3",children:[(0,t.jsx)(i.CheckCircleIcon,{className:"w-6 h-6 text-green-400 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-green-400",children:"Transfer Successful"}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Your funds have been successfully transferred to the destination address."})]})]}),(0,t.jsx)(x.TransferStatusTracker,{steps:j.steps,currentStepIndex:j.currentStepIndex,direction:j.direction,depositAddress:j.depositAddress,depositAmount:j.depositAmount})]}):(0,t.jsxs)("div",{className:"grid lg:grid-cols-2 gap-8 items-start",children:[(0,t.jsxs)("div",{children:[!e&&(0,t.jsxs)("div",{className:"mb-4 p-4 bg-blue-500/10 border border-blue-500/30 rounded-xl flex items-start space-x-3",children:[(0,t.jsx)(l.ClockIcon,{className:"w-6 h-6 text-blue-400 flex-shrink-0 animate-spin"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-blue-400",children:"Initializing..."}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:"Connecting to swap providers..."})]})]}),A&&(0,t.jsxs)("div",{className:"mb-4 p-4 bg-red-500/10 border border-red-500/30 rounded-xl flex items-start space-x-3",children:[(0,t.jsx)(o.XMarkIcon,{className:"w-6 h-6 text-red-400 flex-shrink-0"}),(0,t.jsxs)("div",{children:[(0,t.jsx)("p",{className:"font-medium text-red-400",children:"Transfer Failed"}),(0,t.jsx)("p",{className:"text-sm text-gray-400 mt-1",children:A})]})]}),(0,t.jsx)(d.ZecDepositForm,{onSubmit:E,isLoading:v||g,onChange:e=>{T(e)}})]}),(0,t.jsxs)("div",{className:"space-y-6",children:[(0,t.jsx)(c.CrossChainQuote,{direction:(null==k?void 0:k.direction)||"zec-to-strk",amount:(null==k?void 0:k.amount)||0}),(0,t.jsxs)("div",{className:"bg-gray-800/50 border border-gray-700 rounded-xl p-6",children:[(0,t.jsx)("h3",{className:"font-medium text-white mb-4",children:"Transfer Route"}),(0,t.jsxs)("div",{className:"flex items-center justify-between text-sm",children:[(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-orange-500/10 rounded-full flex items-center justify-center mx-auto mb-2",children:(0,t.jsx)("span",{className:"text-lg font-bold text-orange-500",children:"Z"})}),(0,t.jsx)("span",{className:"text-gray-400",children:"Zcash"})]}),(0,t.jsx)("div",{className:"flex-1 px-2",children:(0,t.jsx)("div",{className:"h-0.5 bg-gradient-to-r from-orange-500/50 via-orange-400/50 to-orange-400/50 rounded"})}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-orange-400/10 rounded-full flex items-center justify-center mx-auto mb-2",children:(0,t.jsx)(n.BoltIcon,{className:"w-6 h-6 text-orange-400"})}),(0,t.jsx)("span",{className:"text-gray-400",children:"Lightning"})]}),(0,t.jsx)("div",{className:"flex-1 px-2",children:(0,t.jsx)("div",{className:"h-0.5 bg-gradient-to-r from-orange-400/50 via-orange-400/50 to-orange-400/50 rounded"})}),(0,t.jsxs)("div",{className:"text-center",children:[(0,t.jsx)("div",{className:"w-12 h-12 bg-orange-400/10 rounded-full flex items-center justify-center mx-auto mb-2",children:(0,t.jsx)("span",{className:"text-lg font-bold text-orange-400",children:"S"})}),(0,t.jsx)("span",{className:"text-gray-400",children:"Starknet"})]})]}),(0,t.jsx)("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Funds are routed through Lightning Network for speed and privacy"})]})]})]})})]})]})}}]);