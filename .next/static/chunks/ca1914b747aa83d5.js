(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,451837,e=>{"use strict";e.s(["Mixin",()=>v,"decorate",()=>E,"hasMixin",()=>u,"mix",()=>T,"settings",()=>l]);let t=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=Object.getOwnPropertyDescriptors(t);for(let e of n)delete r[e];Object.defineProperties(e,r)},n=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[e],r=Object.getPrototypeOf(e);return null===r?t:n(r,[...t,r])},r=function(){let e;for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];if(0===r.length)return;let i=r.map(e=>n(e));for(;i.every(e=>e.length>0);){let t=i.map(e=>e.pop()),n=t[0];if(t.every(e=>e===n))e=n;else break}return e},a=function(e,a){var i;let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=null!=(i=r(...e))?i:Object.prototype,l=Object.create(o),c=n(o);for(let r of e){let e=n(r);for(let n=e.length-1;n>=0;n--){let r=e[n];-1===c.indexOf(r)&&(t(l,r,["constructor",...s]),c.push(r))}}return l.constructor=a,l},i=e=>e.filter((t,n)=>e.indexOf(t)==n),s=(e,t)=>{let r=t.map(e=>n(e)),a=0,i=!0;for(;i;){i=!1;for(let n=t.length-1;n>=0;n--){let t=r[n][a];if(null!=t&&(i=!0,void 0!=Object.getOwnPropertyDescriptor(t,e)))return r[n][0]}a++}},o=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Object.prototype;return new Proxy({},{getPrototypeOf:()=>t,setPrototypeOf(){throw Error("Cannot set prototype of Proxies created by ts-mixer")},getOwnPropertyDescriptor:(t,n)=>Object.getOwnPropertyDescriptor(s(n,e)||{},n),defineProperty(){throw Error("Cannot define new properties on Proxies created by ts-mixer")},has:(n,r)=>void 0!==s(r,e)||void 0!==t[r],get:(n,r)=>(s(r,e)||t)[r],set(t,n,r){let a=s(n,e);if(void 0===a)throw Error("Cannot set new properties on Proxies created by ts-mixer");return a[n]=r,!0},deleteProperty(){throw Error("Cannot delete properties on Proxies created by ts-mixer")},ownKeys:()=>e.map(Object.getOwnPropertyNames).reduce((e,t)=>t.concat(e.filter(e=>0>t.indexOf(e))))})},l={initFunction:null,staticsStrategy:"copy",prototypeStrategy:"copy",decoratorInheritance:"deep"},c=new WeakMap,d=e=>c.get(e),u=(e,t)=>{if(e instanceof t)return!0;let r=e.constructor,a=new Set,i=new Set;for(i.add(r);i.size>0;){if(i.has(t))return!0;i.forEach(e=>a.add(e));let e=new Set;i.forEach(t=>{var r;let s=null!=(r=c.get(t))?r:n(t.prototype).map(e=>e.constructor).filter(e=>null!==e);s&&s.forEach(t=>{a.has(t)||i.has(t)||e.add(t)})}),i=e}return!1},h=(e,t)=>{var n,r;let a=i([...Object.getOwnPropertyNames(e),...Object.getOwnPropertyNames(t)]),s={};for(let o of a)s[o]=i([...null!=(n=null==e?void 0:e[o])?n:[],...null!=(r=null==t?void 0:t[o])?r:[]]);return s},f=(e,t)=>{var n,r,a,i;return{property:h(null!=(n=null==e?void 0:e.property)?n:{},null!=(r=null==t?void 0:t.property)?r:{}),method:h(null!=(a=null==e?void 0:e.method)?a:{},null!=(i=null==t?void 0:t.method)?i:{})}},p=(e,t)=>{var n,r,a,s,o,l;return{class:i([...null!=(n=null==e?void 0:e.class)?n:[],...null!=(r=null==t?void 0:t.class)?r:[]]),static:f(null!=(a=null==e?void 0:e.static)?a:{},null!=(s=null==t?void 0:t.static)?s:{}),instance:f(null!=(o=null==e?void 0:e.instance)?o:{},null!=(l=null==t?void 0:t.instance)?l:{})}},g=new Map,_=function(){for(var e,t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];let i=new Set,s=new Set([...r]);for(;s.size>0;)for(let t of s){for(let r of[...n(t.prototype).map(e=>e.constructor),...null!=(e=d(t))?e:[]].filter(e=>!i.has(e)))s.add(r);i.add(t),s.delete(t)}return[...i]},m=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=_(...t).map(e=>g.get(e)).filter(e=>!!e);return 0==r.length?{}:1==r.length?r[0]:r.reduce((e,t)=>p(e,t))},y=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=t.map(e=>b(e));return 0===r.length?{}:1===r.length?r[0]:r.reduce((e,t)=>p(e,t))},b=e=>{let t=g.get(e);return t||(t={},g.set(e,t)),t},E=e=>function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];if(1===n.length)return(t=>{let n=b(t),r=n.class;return r||(n.class=r=[]),r.push(e),e(t)})(n[0]);return function(t,n){for(var r,a,i,s=arguments.length,o=Array(s>2?s-2:0),l=2;l<s;l++)o[l-2]=arguments[l];let c="function"==typeof t?"static":"instance",d="function"==typeof t[n]?"method":"property",u=b("static"===c?t:t.constructor),h=null!=(r=null==u?void 0:u[c])?r:{};u[c]=h;let f=null!=(a=null==h?void 0:h[d])?a:{};h[d]=f;let p=null!=(i=null==f?void 0:f[n])?i:[];return f[n]=p,p.push(e),e(t,n,...o)}(...n)};function v(){let e;for(var n,r,i,s=arguments.length,d=Array(s),u=0;u<s;u++)d[u]=arguments[u];let h=d.map(e=>e.prototype),f=l.initFunction;if(null!==f){let e=h.map(e=>e[f]).filter(e=>"function"==typeof e);h.push({[f]:function(){for(var t=arguments.length,n=Array(t),r=0;r<t;r++)n[r]=arguments[r];for(let t of e)t.apply(this,n)}})}function p(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];for(let e of d)t(this,new e(...n));null!==f&&"function"==typeof this[f]&&this[f].apply(this,n)}p.prototype="copy"===l.prototypeStrategy?a(h,p):o([...h,{constructor:p}]),Object.setPrototypeOf(p,"copy"===l.staticsStrategy?a(d,null,["prototype"]):o(d,Function.prototype));let g=p;if("none"!==l.decoratorInheritance){let e="deep"===l.decoratorInheritance?m(...d):y(...d);for(let t of null!=(n=null==e?void 0:e.class)?n:[]){let e=t(g);e&&(g=e)}w(null!=(r=null==e?void 0:e.static)?r:{},g),w(null!=(i=null==e?void 0:e.instance)?i:{},g.prototype)}return e=g,c.set(e,d),g}let w=(e,t)=>{let n=e.property,r=e.method;if(n)for(let e in n)for(let r of n[e])r(t,e);if(r)for(let e in r)for(let n of r[e])n(t,e,Object.getOwnPropertyDescriptor(t,e))},T=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return e=>{let n=v(...t.concat([e]));return Object.defineProperty(n,"name",{value:e.name,writable:!1}),n}}},301986,412776,e=>{"use strict";let t,n,r,a,i;e.s(["Account",()=>hc,"CallData",()=>cF,"Contract",()=>hk,"RpcProvider",()=>uj,"cairo",()=>lM,"ec",()=>cL,"hash",()=>cP,"num",()=>o6,"uint256",()=>uG],301986),e.i(467034);var s,o,l,c,d,u,h=e.i(299749);e.s(["API",()=>O,"EBlockTag",()=>w,"EDAMode",()=>A,"EDataAvailabilityMode",()=>T,"ESimulationFlag",()=>y,"ETransactionExecutionStatus",()=>v,"ETransactionFinalityStatus",()=>E,"ETransactionStatus",()=>b,"ETransactionType",()=>m,"ETransactionVersion",()=>S,"ETransactionVersion2",()=>k,"ETransactionVersion3",()=>x,"Errors",()=>g,"Permission",()=>N,"SPEC",()=>_,"TypedDataRevision",()=>C,"WALLET_API",()=>V],397724),e.s([],257996),e.s(["EBlockTag",()=>w,"EDAMode",()=>A,"EDataAvailabilityMode",()=>T,"ESimulationFlag",()=>y,"ETransactionExecutionStatus",()=>v,"ETransactionFinalityStatus",()=>E,"ETransactionStatus",()=>b,"ETransactionType",()=>m,"ETransactionVersion",()=>S,"ETransactionVersion2",()=>k,"ETransactionVersion3",()=>x,"Errors",()=>g,"SPEC",()=>_],214862),e.s([],609779),e.s([],168455);var f=e.i(168455);e.s([],33446);var p=e.i(33446);e.i(609779),e.s([],38892),e.i(38892);var g=f,_=p;e.s(["EBlockTag",()=>w,"EDAMode",()=>A,"EDataAvailabilityMode",()=>T,"ESimulationFlag",()=>y,"ETransactionExecutionStatus",()=>v,"ETransactionFinalityStatus",()=>E,"ETransactionStatus",()=>b,"ETransactionType",()=>m,"ETransactionVersion",()=>S,"ETransactionVersion2",()=>k,"ETransactionVersion3",()=>x],294802);let m={DECLARE:"DECLARE",DEPLOY:"DEPLOY",DEPLOY_ACCOUNT:"DEPLOY_ACCOUNT",INVOKE:"INVOKE",L1_HANDLER:"L1_HANDLER"},y={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},b={RECEIVED:"RECEIVED",REJECTED:"REJECTED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},E={ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},v={SUCCEEDED:"SUCCEEDED",REVERTED:"REVERTED"},w={LATEST:"latest",PENDING:"pending"},T={L1:"L1",L2:"L2"},A={L1:0,L2:1},S={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},k={V0:"0x0",V1:"0x1",V2:"0x2",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002"},x={V3:"0x3",F3:"0x100000000000000000000000000000003"};e.i(294802);var I=e.i(214862);e.s(["Permission",()=>N,"TypedDataRevision",()=>C],889269),e.s([],491446),e.i(491446),e.s(["Permission",()=>N],400871);let N={ACCOUNTS:"accounts"};e.i(400871),e.s(["TypedDataRevision",()=>C],681741);let C={ACTIVE:"1",LEGACY:"0"};e.i(681741),e.s([],242904),e.i(242904),e.s([],606922),e.i(606922),e.s([],551657),e.i(551657),e.s([],602145),e.i(602145),e.s([],733579),e.i(733579);var R=e.i(889269);e.i(257996);var O=I,V=R,B=e.i(397724);e.s(["ABI_TYPE_CONSTRUCTOR",()=>X,"ABI_TYPE_ENUM",()=>ee,"ABI_TYPE_FUNCTION",()=>J,"ABI_TYPE_L1_HANDLER",()=>$,"API",()=>eT,"CALL_TYPE",()=>es,"CONTRACT",()=>U,"EBlockTag",()=>eh,"EDAMode",()=>ep,"EDataAvailabilityMode",()=>ef,"ESimulationFlag",()=>el,"ETransactionExecutionStatus",()=>eu,"ETransactionFinalityStatus",()=>ed,"ETransactionStatus",()=>ec,"ETransactionType",()=>eo,"ETransactionVersion",()=>eg,"ETransactionVersion2",()=>e_,"ETransactionVersion3",()=>em,"EVENT_ABI_TYPE",()=>Q,"L1_DA_MODE",()=>ei,"PAYMASTER_API",()=>eS,"PRICE_UNIT_FRI",()=>ea,"PRICE_UNIT_WEI",()=>er,"Permission",()=>eb,"STATE_MUTABILITY_EXTERNAL",()=>en,"STATE_MUTABILITY_VIEW",()=>et,"STATUS_ACCEPTED_ON_L1",()=>P,"STATUS_ACCEPTED_ON_L2",()=>F,"STATUS_PENDING",()=>H,"STATUS_RECEIVED",()=>Z,"STATUS_REJECTED",()=>z,"STATUS_REVERTED",()=>M,"STATUS_SUCCEEDED",()=>L,"STRUCT_ABI_TYPE",()=>q,"TXN_TYPE_DECLARE",()=>W,"TXN_TYPE_DEPLOY",()=>j,"TXN_TYPE_DEPLOY_ACCOUNT",()=>Y,"TXN_TYPE_INVOKE",()=>K,"TXN_TYPE_L1_HANDLER",()=>G,"TypedDataRevision",()=>eE,"WALLET_API",()=>eA],531200),e.s([],694751),e.s(["ABI_TYPE_CONSTRUCTOR",()=>X,"ABI_TYPE_ENUM",()=>ee,"ABI_TYPE_FUNCTION",()=>J,"ABI_TYPE_L1_HANDLER",()=>$,"CALL_TYPE",()=>es,"CONTRACT",()=>U,"EBlockTag",()=>eh,"EDAMode",()=>ep,"EDataAvailabilityMode",()=>ef,"ESimulationFlag",()=>el,"ETransactionExecutionStatus",()=>eu,"ETransactionFinalityStatus",()=>ed,"ETransactionStatus",()=>ec,"ETransactionType",()=>eo,"ETransactionVersion",()=>eg,"ETransactionVersion2",()=>e_,"ETransactionVersion3",()=>em,"EVENT_ABI_TYPE",()=>Q,"L1_DA_MODE",()=>ei,"PRICE_UNIT_FRI",()=>ea,"PRICE_UNIT_WEI",()=>er,"STATE_MUTABILITY_EXTERNAL",()=>en,"STATE_MUTABILITY_VIEW",()=>et,"STATUS_ACCEPTED_ON_L1",()=>P,"STATUS_ACCEPTED_ON_L2",()=>F,"STATUS_PENDING",()=>H,"STATUS_RECEIVED",()=>Z,"STATUS_REJECTED",()=>z,"STATUS_REVERTED",()=>M,"STATUS_SUCCEEDED",()=>L,"STRUCT_ABI_TYPE",()=>q,"TXN_TYPE_DECLARE",()=>W,"TXN_TYPE_DEPLOY",()=>j,"TXN_TYPE_DEPLOY_ACCOUNT",()=>Y,"TXN_TYPE_INVOKE",()=>K,"TXN_TYPE_L1_HANDLER",()=>G],35365),e.s([],368569),e.s([],819520);var D=e.i(819520);e.i(368569),e.s([],620349),e.i(620349);var U=D;e.s([],270679),e.i(270679),e.s([],212430),e.i(212430),e.s([],478744),e.i(478744),e.s(["ABI_TYPE_CONSTRUCTOR",()=>X,"ABI_TYPE_ENUM",()=>ee,"ABI_TYPE_FUNCTION",()=>J,"ABI_TYPE_L1_HANDLER",()=>$,"CALL_TYPE",()=>es,"EBlockTag",()=>eh,"EDAMode",()=>ep,"EDataAvailabilityMode",()=>ef,"ESimulationFlag",()=>el,"ETransactionExecutionStatus",()=>eu,"ETransactionFinalityStatus",()=>ed,"ETransactionStatus",()=>ec,"ETransactionType",()=>eo,"ETransactionVersion",()=>eg,"ETransactionVersion2",()=>e_,"ETransactionVersion3",()=>em,"EVENT_ABI_TYPE",()=>Q,"L1_DA_MODE",()=>ei,"PRICE_UNIT_FRI",()=>ea,"PRICE_UNIT_WEI",()=>er,"STATE_MUTABILITY_EXTERNAL",()=>en,"STATE_MUTABILITY_VIEW",()=>et,"STATUS_ACCEPTED_ON_L1",()=>P,"STATUS_ACCEPTED_ON_L2",()=>F,"STATUS_PENDING",()=>H,"STATUS_RECEIVED",()=>Z,"STATUS_REJECTED",()=>z,"STATUS_REVERTED",()=>M,"STATUS_SUCCEEDED",()=>L,"STRUCT_ABI_TYPE",()=>q,"TXN_TYPE_DECLARE",()=>W,"TXN_TYPE_DEPLOY",()=>j,"TXN_TYPE_DEPLOY_ACCOUNT",()=>Y,"TXN_TYPE_INVOKE",()=>K,"TXN_TYPE_L1_HANDLER",()=>G],272026);let F="ACCEPTED_ON_L2",P="ACCEPTED_ON_L1",L="SUCCEEDED",M="REVERTED",H="PENDING",z="REJECTED",Z="RECEIVED",W="DECLARE",j="DEPLOY",Y="DEPLOY_ACCOUNT",K="INVOKE",G="L1_HANDLER",q="struct",Q="event",J="function",X="constructor",$="l1_handler",ee="enum",et="view",en="external",er="WEI",ea="FRI",ei={BLOB:"BLOB",CALLDATA:"CALLDATA"},es={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},eo={DECLARE:W,DEPLOY:j,DEPLOY_ACCOUNT:Y,INVOKE:K,L1_HANDLER:G},el={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},ec={RECEIVED:Z,REJECTED:z,ACCEPTED_ON_L2:F,ACCEPTED_ON_L1:P},ed={ACCEPTED_ON_L2:F,ACCEPTED_ON_L1:P},eu={SUCCEEDED:L,REVERTED:M},eh={LATEST:"latest",PENDING:"pending"},ef={L1:"L1",L2:"L2"},ep={L1:0,L2:1},eg={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},e_={V0:eg.V0,V1:eg.V1,V2:eg.V2,F0:eg.F0,F1:eg.F1,F2:eg.F2},em={V3:eg.V3,F3:eg.F3};e.i(272026),e.s([],400736),e.i(400736),e.s([],176616),e.i(176616);var ey=e.i(35365);e.s(["Permission",()=>eb,"TypedDataRevision",()=>eE],472574),e.s([],680928),e.i(680928),e.s(["Permission",()=>eb],958072);let eb={ACCOUNTS:"accounts"};e.i(958072),e.s(["TypedDataRevision",()=>eE],812452);let eE={ACTIVE:"1",LEGACY:"0"};e.i(812452),e.s([],317344),e.i(317344),e.s([],741203),e.i(741203),e.s([],813863),e.i(813863),e.s([],83041),e.i(83041),e.s([],887795),e.i(887795);var ev=e.i(472574);e.s([],423018),e.s([],27607),e.i(27607),e.s([],599400),e.i(599400),e.s([],94902),e.i(94902),e.s([],204959),e.i(204959),e.s([],172744),e.i(172744);var ew=e.i(423018);e.i(694751);var eT=ey,eA=ev,eS=ew,ek=e.i(531200);function ex(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function eI(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function eN(e,t){if("string"!=typeof t)throw Error("".concat(e,": string expected"));return!0}function eC(e){if(!Number.isSafeInteger(e))throw Error("invalid integer: ".concat(e))}function eR(e){if(!Array.isArray(e))throw Error("array expected")}function eO(e,t){if(!eI(!0,t))throw Error("".concat(e,": array of strings expected"))}function eV(e,t){if(!eI(!1,t))throw Error("".concat(e,": array of numbers expected"))}function eB(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=e=>e,a=(e,t)=>n=>e(t(n));return{encode:t.map(e=>e.encode).reduceRight(a,r),decode:t.map(e=>e.decode).reduce(a,r)}}function eD(e){let t="string"==typeof e?e.split(""):e,n=t.length;eO("alphabet",t);let r=new Map(t.map((e,t)=>[e,t]));return{encode:r=>(eR(r),r.map(r=>{if(!Number.isSafeInteger(r)||r<0||r>=n)throw Error('alphabet.encode: digit index outside alphabet "'.concat(r,'". Allowed: ').concat(e));return t[r]})),decode:t=>(eR(t),t.map(t=>{eN("alphabet.decode",t);let n=r.get(t);if(void 0===n)throw Error('Unknown letter: "'.concat(t,'". Allowed: ').concat(e));return n}))}}function eU(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return eN("join",e),{encode:t=>(eO("join.decode",t),t.join(e)),decode:t=>(eN("join.decode",t),t.split(e))}}function eF(e,t,n){if(t<2)throw Error("convertRadix: invalid from=".concat(t,", base cannot be less than 2"));if(n<2)throw Error("convertRadix: invalid to=".concat(n,", base cannot be less than 2"));if(eR(e),!e.length)return[];let r=0,a=[],i=Array.from(e,e=>{if(eC(e),e<0||e>=t)throw Error("invalid integer: ".concat(e));return e}),s=i.length;for(;;){let e=0,o=!0;for(let a=r;a<s;a++){let s=i[a],l=t*e,c=l+s;if(!Number.isSafeInteger(c)||l/t!==e||c-s!==l)throw Error("convertRadix: carry overflow");let d=c/n;e=c%n;let u=Math.floor(d);if(i[a]=u,!Number.isSafeInteger(u)||u*n+e!==c)throw Error("convertRadix: carry overflow");o&&(u?o=!1:r=a)}if(a.push(e),o)break}for(let t=0;t<e.length-1&&0===e[t];t++)a.push(0);return a.reverse()}let eP=(e,t)=>0===t?e:eP(t,e%t),eL=(e,t)=>e+(t-eP(e,t)),eM=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function eH(e,t,n,r){if(eR(e),t<=0||t>32)throw Error("convertRadix2: wrong from=".concat(t));if(n<=0||n>32)throw Error("convertRadix2: wrong to=".concat(n));if(eL(t,n)>32)throw Error("convertRadix2: carry overflow from=".concat(t," to=").concat(n," carryBits=").concat(eL(t,n)));let a=0,i=0,s=eM[t],o=eM[n]-1,l=[];for(let r of e){if(eC(r),r>=s)throw Error("convertRadix2: invalid data word=".concat(r," from=").concat(t));if(a=a<<t|r,i+t>32)throw Error("convertRadix2: carry overflow pos=".concat(i," from=").concat(t));for(i+=t;i>=n;i-=n)l.push((a>>i-n&o)>>>0);let e=eM[i];if(void 0===e)throw Error("invalid carry");a&=e-1}if(a=a<<n-i&o,!r&&i>=t)throw Error("Excess padding");if(!r&&a>0)throw Error("Non-zero padding: ".concat(a));return r&&i>0&&l.push(a>>>0),l}let ez=eB(function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(eC(e),e<=0||e>32)throw Error("radix2: bits should be in (0..32]");if(eL(8,e)>32||eL(e,8)>32)throw Error("radix2: carry overflow");return{encode:n=>{if(!ex(n))throw Error("radix2.encode input should be Uint8Array");return eH(Array.from(n),8,e,!t)},decode:n=>(eV("radix2.decode",n),Uint8Array.from(eH(n,e,8,t)))}}(6),eD("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=";return eC(e),eN("padding",t),{encode(n){for(eO("padding.encode",n);n.length*e%8;)n.push(t);return n},decode(n){eO("padding.decode",n);let r=n.length;if(r*e%8)throw Error("padding: invalid, string should have whole number of bytes");for(;r>0&&n[r-1]===t;r--)if((r-1)*e%8==0)throw Error("padding: invalid, string has too much padding");return n.slice(0,r)}}}(6),eU("")),eZ=((s=58,eC(58)),eB(eD("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),eU("")));function eW(e){throw Error("config is deprecated, support for circularRefs is removed from the library. If you encounter circular references in your data structures, please rethink your datastructures: better prevent circular references in the first place.")}function ej(e){return eY.test(e)}e=>{if("string"!=typeof e||e.length%2!=0)throw TypeError("hex.decode: expected string, got ".concat(typeof e," with length ").concat(e.length));return e.toLowerCase()},e.s([],37778);let eY=/^-?[0-9]+$/;function eK(e){return eG.test(e)}let eG=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function eq(e,t){if(ej(e))return Number.isSafeInteger(Number.parseInt(e,10));let n=String(Number.parseFloat(e));if(e===n)return!0;let r=e1(e),a=e1(n);return!!(r===a||(null==t?void 0:t.approx)===!0&&!ej(e)&&a.length>=14&&r.startsWith(a.substring(0,14)))||!1}let eQ=function(e){return e.underflow="underflow",e.overflow="overflow",e.truncate_integer="truncate_integer",e.truncate_float="truncate_float",e}({});function eJ(e){if(eq(e,{approx:!1}))return;if(ej(e))return eQ.truncate_integer;let t=Number.parseFloat(e);return Number.isFinite(t)?0===t?eQ.underflow:eQ.truncate_float:eQ.overflow}function eX(e,t){let n=Number.parseFloat(e),r=eJ(e);if((null==t?void 0:t.approx)===!0?r&&r!==eQ.truncate_float:r){let t=null==r?void 0:r.replace(/_\w+$/,"");throw Error("Cannot safely convert to number: the value '".concat(e,"' would ").concat(t," and become ").concat(n))}return n}function e$(e){let t=e.match(/^(-?)(\d+\.?\d*)([eE]([+-]?\d+))?$/);if(!t)throw SyntaxError("Invalid number: ".concat(e));let n=t[1],r=t[2],a=void 0!==t[4]?Number.parseInt(t[4],10):0,i=r.indexOf(".");a+=-1!==i?i-1:r.length-1;let s=r.replace(".","").replace(/^0*/,e=>(a-=e.length,"")).replace(/0*$/,"");return s.length>0?{sign:n,digits:s,exponent:a}:{sign:n,digits:"0",exponent:a+1}}function e0(e,t){if(e===t)return 0;let n=e$(e),r=e$(t),a="-"===n.sign?-1:1;return n.sign!==r.sign?"0"===n.digits&&"0"===r.digits?0:a:n.exponent!==r.exponent?n.exponent>r.exponent?a:n.exponent<r.exponent?-a:0:n.digits>r.digits?a:n.digits<r.digits?-a:0}function e1(e){let{start:t,end:n}=e2(e),r=e.substring(t,n),a=r.indexOf(".");return -1===a?r:r.substring(0,a)+r.substring(a+1)}function e2(e){let t=0;for("-"===e[0]&&t++;"0"===e[t]||"."===e[t];)t++;let n=e.lastIndexOf("e");for(-1===n&&(n=e.lastIndexOf("E")),-1===n&&(n=e.length);("0"===e[n-1]||"."===e[n-1])&&n>t;)n--;return{start:t,end:n}}class e3{valueOf(){let e=eJ(this.value);if(void 0===e||e===eQ.truncate_float)return Number.parseFloat(this.value);if(ej(this.value))return BigInt(this.value);throw Error("Cannot safely convert to number: the value '".concat(this.value,"' would ").concat(e," and become ").concat(Number.parseFloat(this.value)))}toString(){return this.value}constructor(e){if((0,h._)(this,"isLosslessNumber",!0),!eK(e))throw Error('Invalid number (value: "'.concat(e,'")'));this.value=e}}function e6(e){return e&&"object"==typeof e&&e.isLosslessNumber||!1}function e5(e){if(function(e){let{start:t,end:n}=e2(e),r=e.indexOf(".");return -1===r||r<t||r>n?n-t:n-t-1}(String(e))>15)throw Error("Invalid number: contains more than 15 digits and is most likely truncated and unsafe by itself (value: ".concat(e,")"));if(Number.isNaN(e))throw Error("Invalid number: NaN");if(!Number.isFinite(e))throw Error("Invalid number: ".concat(e));return new e3(String(e))}function e8(e,t){return e0(e.value,t.value)}function e4(e){return new e3(e)}function e9(e){return ej(e)?BigInt(e):Number.parseFloat(e)}function e7(e,t,n){var r,a;let i="function"==typeof n?{parseNumber:n}:n,s=null!=(r=null==i?void 0:i.parseNumber)?r:e4,o=null!=(a=null==i?void 0:i.onDuplicateKey)?a:function(e){let{key:t,position:n}=e;throw SyntaxError("Duplicate key '".concat(t,"' encountered at position ").concat(n))},l=0,c=function t(){var n,r,a,i,c,m;u();let y=null!=(m=null!=(c=null!=(i=null!=(a=null!=(r=null!=(n=h())?n:function(){let t=l;if(e.charCodeAt(l)===tg&&(l++,p(t)),e.charCodeAt(l)===t_)l++;else{var n;if((n=e.charCodeAt(l))>=tm&&n<=ty)for(l++;tt(e.charCodeAt(l));)l++}if(e.charCodeAt(l)===tE)for(l++,p(t);tt(e.charCodeAt(l));)l++;if(e.charCodeAt(l)===tS||e.charCodeAt(l)===tA)for(l++,(e.charCodeAt(l)===tg||e.charCodeAt(l)===tp)&&l++,p(t);tt(e.charCodeAt(l));)l++;if(l>t)return s(e.slice(t,l))}())?r:function(){if(e.charCodeAt(l)===ti){l++,u();let n={},r=!0;for(;l<e.length&&e.charCodeAt(l)!==ts;){r?r=!1:(f(),u());let a=l,i=h();if(void 0===i)return void function(){throw SyntaxError("Quoted object key expected ".concat(_()))}();u(),function(){if(e.charCodeAt(l)!==tv)throw SyntaxError("Colon ':' expected after property name ".concat(_()));l++}();let s=t();if(void 0===s)return void function(){throw SyntaxError("Object value expected after ':' ".concat(g()))}();if(Object.prototype.hasOwnProperty.call(n,i)&&!function e(t,n){return t===n||(Array.isArray(t)&&Array.isArray(n)?t.length===n.length&&t.every((t,r)=>e(t,n[r])):!!(tn(t)&&tn(n))&&[...new Set([...Object.keys(t),...Object.keys(n)])].every(r=>e(t[r],n[r])))}(s,n[i])){let e=o({key:i,position:a+1,oldValue:n[i],newValue:s});void 0!==e&&(n[i]=e)}else n[i]=s}return e.charCodeAt(l)!==ts&&function(){throw SyntaxError("Quoted object key or end of object '}' expected ".concat(_()))}(),l++,n}}())?a:function(){if(e.charCodeAt(l)===to){l++,u();let n=[],r=!0;for(;l<e.length&&e.charCodeAt(l)!==tl;){r?r=!1:f();let e=t();(function(e){if(void 0===e)throw SyntaxError("Array item expected ".concat(_()))})(e),n.push(e)}return e.charCodeAt(l)!==tl&&function(){throw SyntaxError("Array item or end of array ']' expected ".concat(_()))}(),l++,n}}())?i:d("true",!0))?c:d("false",!1))?m:d("null",null);return u(),y}();return function(e){if(void 0===e)throw SyntaxError("JSON value expected ".concat(_()))}(c),function(){if(l<e.length)throw SyntaxError("Expected end of input ".concat(_()))}(),t?function e(t,n,r,a){return Array.isArray(r)?a.call(t,n,function(t,n){for(let r=0;r<t.length;r++)t[r]=e(t,String(r),t[r],n);return t}(r,a)):r&&"object"==typeof r&&!e6(r)?a.call(t,n,function(t,n){for(let r of Object.keys(t)){let a=e(t,r,t[r],n);void 0!==a?t[r]=a:delete t[r]}return t}(r,a)):a.call(t,n,r)}({"":c},"",c,t):c;function d(t,n){if(e.slice(l,l+t.length)===t)return l+=t.length,n}function u(){for(var t;(t=e.charCodeAt(l))===tc||t===td||t===tu||t===th;)l++}function h(){if(e.charCodeAt(l)===tf){l++;let n="";for(;l<e.length&&e.charCodeAt(l)!==tf;){if(e.charCodeAt(l)===ta){let t=e[l+1],r=tr[t];void 0!==r?(n+=r,l++):"u"===t?te(e.charCodeAt(l+2))&&te(e.charCodeAt(l+3))&&te(e.charCodeAt(l+4))&&te(e.charCodeAt(l+5))?(n+=String.fromCharCode(Number.parseInt(e.slice(l+2,l+6),16)),l+=5):function(t){let n=e.slice(t,t+6);throw SyntaxError("Invalid unicode character '".concat(n,"' ").concat(g()))}(l):function(t){let n=e.slice(t,t+2);throw SyntaxError("Invalid escape character '".concat(n,"' ").concat(g()))}(l)}else{var t;(t=e.charCodeAt(l))>=32&&t<=1114111?n+=e[l]:function(e){throw SyntaxError("Invalid character '".concat(e,"' ").concat(g()))}(e[l])}l++}return function(){if(e.charCodeAt(l)!==tf)throw SyntaxError("End of string '\"' expected ".concat(_()))}(),l++,n}}function f(){if(e.charCodeAt(l)!==tb)throw SyntaxError("Comma ',' expected after value ".concat(_()));l++}function p(t){if(!tt(e.charCodeAt(l))){let n=e.slice(t,l);throw SyntaxError("Invalid number '".concat(n,"', expecting a digit ").concat(_()))}}function g(){return"at position ".concat(l)}function _(){return"".concat(l<e.length?"but got '".concat(e[l],"'"):"but reached end of input"," ").concat(g())}}function te(e){return e>=t_&&e<=ty||e>=tw&&e<=tk||e>=tT&&e<=tx}function tt(e){return e>=t_&&e<=ty}function tn(e){return"object"==typeof e&&null!==e}let tr={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},ta=92,ti=123,ts=125,to=91,tl=93,tc=32,td=10,tu=9,th=13,tf=34,tp=43,tg=45,t_=48,tm=49,ty=57,tb=44,tE=46,tv=58,tw=65,tT=97,tA=69,tS=101,tk=70,tx=102;function tI(e,t){return"string"==typeof t&&tN.test(t)?new Date(t):t}let tN=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/;function tC(e,t,n,r){var a;let i="number"==typeof(a=n)?" ".repeat(a):"string"==typeof a&&""!==a?a:void 0;return function e(a,s){if(Array.isArray(r)){let e=r.find(e=>e.test(a));if(e){let t=e.stringify(a);if("string"!=typeof t||!eK(t))throw Error("Invalid JSON number: output of a number stringifier must be a string containing a JSON number (output: ".concat(t,")"));return t}}return"boolean"==typeof a||"number"==typeof a||"string"==typeof a||null===a||a instanceof Date||a instanceof Boolean||a instanceof Number||a instanceof String?JSON.stringify(a):(null==a?void 0:a.isLosslessNumber)||"bigint"==typeof a?a.toString():Array.isArray(a)?function(n,r){if(0===n.length)return"[]";let a=i?r+i:void 0,s=i?"[\n":"[";for(let r=0;r<n.length;r++){let o="function"==typeof t?t.call(n,String(r),n[r]):n[r];i&&(s+=a),void 0!==o&&"function"!=typeof o?s+=e(o,a):s+="null",r<n.length-1&&(s+=i?",\n":",")}return s+(i?"\n".concat(r,"]"):"]")}(a,s):a&&"object"==typeof a?function(r,a){if("function"==typeof r.toJSON)return tC(r.toJSON(),t,n,void 0);let s=Array.isArray(t)?t.map(String):Object.keys(r);if(0===s.length)return"{}";let o=i?a+i:void 0,l=!0,c=i?"{\n":"{";for(let n of s){var d;let a="function"==typeof t?t.call(r,n,r[n]):r[n];if(void 0!==(d=a)&&"function"!=typeof d&&"symbol"!=typeof d){l?l=!1:c+=i?",\n":",";let t=JSON.stringify(n);c+=i?"".concat(o+t,": "):"".concat(t,":"),c+=e(a,o)}}return c+(i?"\n".concat(a,"}"):"}")}(a,s):void 0}("function"==typeof t?t.call({"":e},"",e):e,"")}e.s([],753856),e.s(["LosslessNumber",()=>e3,"UnsafeNumberReason",()=>eQ,"compareLosslessNumber",()=>e8,"compareNumber",()=>e0,"config",()=>eW,"getUnsafeNumberReason",()=>eJ,"isInteger",()=>ej,"isLosslessNumber",()=>e6,"isNumber",()=>eK,"isSafeNumber",()=>eq,"parse",()=>e7,"parseLosslessNumber",()=>e4,"parseNumberAndBigInt",()=>e9,"reviveDate",()=>tI,"splitNumber",()=>e$,"stringify",()=>tC,"toLosslessNumber",()=>e5,"toSafeNumberOrThrow",()=>eX],404458),e.i(37778),e.i(753856),e.i(404458),e.s(["aInRange",()=>t1,"abool",()=>tU,"abytes",()=>tD,"bitGet",()=>t3,"bitLen",()=>t2,"bitMask",()=>t5,"bitSet",()=>t6,"bytesToHex",()=>tP,"bytesToNumberBE",()=>tW,"bytesToNumberLE",()=>tj,"concatBytes",()=>tQ,"createHmacDrbg",()=>t9,"ensureBytes",()=>tq,"equalBytes",()=>tJ,"hexToBytes",()=>tZ,"hexToNumber",()=>tM,"inRange",()=>t0,"isBytes",()=>tB,"memoized",()=>nn,"notImplemented",()=>nt,"numberToBytesBE",()=>tY,"numberToBytesLE",()=>tK,"numberToHexUnpadded",()=>tL,"numberToVarBytesBE",()=>tG,"utf8ToBytes",()=>tX,"validateObject",()=>ne],739382);let tR=BigInt(0),tO=BigInt(1),tV=BigInt(2);function tB(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function tD(e){if(!tB(e))throw Error("Uint8Array expected")}function tU(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}let tF=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function tP(e){tD(e);let t="";for(let n=0;n<e.length;n++)t+=tF[e[n]];return t}function tL(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function tM(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?tR:BigInt("0x"+e)}let tH={_0:48,_9:57,A:65,F:70,a:97,f:102};function tz(e){return e>=tH._0&&e<=tH._9?e-tH._0:e>=tH.A&&e<=tH.F?e-(tH.A-10):e>=tH.a&&e<=tH.f?e-(tH.a-10):void 0}function tZ(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,n=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let r=new Uint8Array(n);for(let t=0,a=0;t<n;t++,a+=2){let n=tz(e.charCodeAt(a)),i=tz(e.charCodeAt(a+1));if(void 0===n||void 0===i)throw Error('hex string expected, got non-hex character "'+(e[a]+e[a+1])+'" at index '+a);r[t]=16*n+i}return r}function tW(e){return tM(tP(e))}function tj(e){return tD(e),tM(tP(Uint8Array.from(e).reverse()))}function tY(e,t){return tZ(e.toString(16).padStart(2*t,"0"))}function tK(e,t){return tY(e,t).reverse()}function tG(e){return tZ(tL(e))}function tq(e,t,n){let r;if("string"==typeof t)try{r=tZ(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(tB(t))r=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let a=r.length;if("number"==typeof n&&a!==n)throw Error(e+" of length "+n+" expected, got "+a);return r}function tQ(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=0;for(let e=0;e<t.length;e++){let n=t[e];tD(n),r+=n.length}let a=new Uint8Array(r);for(let e=0,n=0;e<t.length;e++){let r=t[e];a.set(r,n),n+=r.length}return a}function tJ(e,t){if(e.length!==t.length)return!1;let n=0;for(let r=0;r<e.length;r++)n|=e[r]^t[r];return 0===n}function tX(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}let t$=e=>"bigint"==typeof e&&tR<=e;function t0(e,t,n){return t$(e)&&t$(t)&&t$(n)&&t<=e&&e<n}function t1(e,t,n,r){if(!t0(t,n,r))throw Error("expected valid "+e+": "+n+" <= n < "+r+", got "+t)}function t2(e){let t;for(t=0;e>tR;e>>=tO,t+=1);return t}function t3(e,t){return e>>BigInt(t)&tO}function t6(e,t,n){return e|(n?tO:tR)<<BigInt(t)}let t5=e=>(tV<<BigInt(e-1))-tO,t8=e=>new Uint8Array(e),t4=e=>Uint8Array.from(e);function t9(e,t,n){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof n)throw Error("hmacFn must be a function");let r=t8(e),a=t8(e),i=0,s=()=>{r.fill(1),a.fill(0),i=0},o=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return n(a,r,...t)},l=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:t8();a=o(t4([0]),e),r=o(),0!==e.length&&(a=o(t4([1]),e),r=o())},c=()=>{if(i++>=1e3)throw Error("drbg: tried 1000 values");let e=0,n=[];for(;e<t;){let t=(r=o()).slice();n.push(t),e+=r.length}return tQ(...n)};return(e,t)=>{let n;for(s(),l(e);!(n=t(c()));)l();return s(),n}}let t7={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||tB(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function ne(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=(t,n,r)=>{let a=t7[n];if("function"!=typeof a)throw Error("invalid validator function");let i=e[t];if((!r||void 0!==i)&&!a(i,e))throw Error("param "+String(t)+" is invalid. Expected "+n+", got "+i)};for(let[e,n]of Object.entries(t))r(e,n,!1);for(let[e,t]of Object.entries(n))r(e,t,!0);return e}let nt=()=>{throw Error("not implemented")};function nn(e){let t=new WeakMap;return function(n){for(var r=arguments.length,a=Array(r>1?r-1:0),i=1;i<r;i++)a[i-1]=arguments[i];let s=t.get(n);if(void 0!==s)return s;let o=e(n,...a);return t.set(n,o),o}}function nr(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function na(e){for(var t=arguments.length,n=Array(t>1?t-1:0),r=1;r<t;r++)n[r-1]=arguments[r];if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(n.length>0&&!n.includes(e.length))throw Error("Uint8Array expected of length "+n+", got length="+e.length)}function ni(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function ns(e,t){na(e);let n=t.outputLen;if(e.length<n)throw Error("digestInto() expects output buffer of length at least "+n)}let no="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0,nl=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),nc=(e,t)=>e<<32-t|e>>>t,nd=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],nu=e=>e<<24&0xff000000|e<<8&0xff0000|e>>>8&65280|e>>>24&255;function nh(e){for(let t=0;t<e.length;t++)e[t]=nu(e[t])}function nf(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function np(e){return"string"==typeof e&&(e=nf(e)),na(e),e}class ng{clone(){return this._cloneInto()}}function n_(e){let t=t=>e().update(np(t)).digest(),n=e();return t.outputLen=n.outputLen,t.blockLen=n.blockLen,t.create=()=>e(),t}function nm(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(no&&"function"==typeof no.getRandomValues)return no.getRandomValues(new Uint8Array(e));if(no&&"function"==typeof no.randomBytes)return no.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}let ny=(e,t,n)=>e&t^~e&n,nb=(e,t,n)=>e&t^e&n^t&n;class nE extends ng{update(e){ni(this);let{view:t,buffer:n,blockLen:r}=this,a=(e=np(e)).length;for(let i=0;i<a;){let s=Math.min(r-this.pos,a-i);if(s===r){let t=nl(e);for(;r<=a-i;i+=r)this.process(t,i);continue}n.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===r&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){ni(this),ns(e,this),this.finished=!0;let{buffer:t,view:n,blockLen:r,isLE:a}=this,{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>r-i&&(this.process(n,0),i=0);for(let e=i;e<r;e++)t[e]=0;!function(e,t,n,r){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,n,r);let a=BigInt(32),i=BigInt(0xffffffff),s=Number(n>>a&i),o=Number(n&i),l=4*!!r,c=4*!r;e.setUint32(t+l,s,r),e.setUint32(t+c,o,r)}(n,r-8,BigInt(8*this.length),a),this.process(n,0);let s=nl(e),o=this.outputLen;if(o%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=o/4,c=this.get();if(l>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)s.setUint32(4*e,c[e],a)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let n=e.slice(0,t);return this.destroy(),n}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:n,length:r,finished:a,destroyed:i,pos:s}=this;return e.length=r,e.pos=s,e.finished=a,e.destroyed=i,r%t&&e.buffer.set(n),e}constructor(e,t,n,r){super(),this.blockLen=e,this.outputLen=t,this.padOffset=n,this.isLE=r,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=nl(this.buffer)}}let nv=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),nw=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),nT=new Uint32Array(64);class nA extends nE{get(){let{A:e,B:t,C:n,D:r,E:a,F:i,G:s,H:o}=this;return[e,t,n,r,a,i,s,o]}set(e,t,n,r,a,i,s,o){this.A=0|e,this.B=0|t,this.C=0|n,this.D=0|r,this.E=0|a,this.F=0|i,this.G=0|s,this.H=0|o}process(e,t){for(let n=0;n<16;n++,t+=4)nT[n]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=nT[e-15],n=nT[e-2],r=nc(t,7)^nc(t,18)^t>>>3,a=nc(n,17)^nc(n,19)^n>>>10;nT[e]=a+nT[e-7]+r+nT[e-16]|0}let{A:n,B:r,C:a,D:i,E:s,F:o,G:l,H:c}=this;for(let e=0;e<64;e++){let t=c+(nc(s,6)^nc(s,11)^nc(s,25))+ny(s,o,l)+nv[e]+nT[e]|0,d=(nc(n,2)^nc(n,13)^nc(n,22))+nb(n,r,a)|0;c=l,l=o,o=s,s=i+t|0,i=a,a=r,r=n,n=t+d|0}n=n+this.A|0,r=r+this.B|0,a=a+this.C|0,i=i+this.D|0,s=s+this.E|0,o=o+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(n,r,a,i,s,o,l,c)}roundClean(){nT.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}constructor(){super(64,32,8,!1),this.A=0|nw[0],this.B=0|nw[1],this.C=0|nw[2],this.D=0|nw[3],this.E=0|nw[4],this.F=0|nw[5],this.G=0|nw[6],this.H=0|nw[7]}}let nS=n_(()=>new nA);e.s(["CURVE",()=>rL,"Fp251",()=>r4,"MAX_VALUE",()=>rk,"ProjectivePoint",()=>rM,"Signature",()=>rH,"_poseidonMDS",()=>r7,"_starkCurve",()=>rC,"computeHashOnElements",()=>r3,"ethSigToPrivate",()=>rK,"getAccountPath",()=>rQ,"getPublicKey",()=>rV,"getSharedSecret",()=>rB,"getStarkKey",()=>rY,"grindKey",()=>rj,"keccak",()=>r5,"normalizePrivateKey",()=>rO,"pedersen",()=>r2,"poseidonBasic",()=>ae,"poseidonCreate",()=>at,"poseidonHash",()=>ar,"poseidonHashFunc",()=>aa,"poseidonHashMany",()=>as,"poseidonHashSingle",()=>ai,"poseidonSmall",()=>an,"sign",()=>rF,"utils",()=>rz,"verify",()=>rP],490801);let nk=BigInt(0x100000000-1),nx=BigInt(32),nI=[],nN=[],nC=[],nR=BigInt(0),nO=BigInt(1),nV=BigInt(2),nB=BigInt(7),nD=BigInt(256),nU=BigInt(113);for(let e=0,t=nO,n=1,r=0;e<24;e++){[n,r]=[r,(2*n+3*r)%5],nI.push(2*(5*r+n)),nN.push((e+1)*(e+2)/2%64);let a=nR;for(let e=0;e<7;e++)(t=(t<<nO^(t>>nB)*nU)%nD)&nV&&(a^=nO<<(nO<<BigInt(e))-nO);nC.push(a)}let[nF,nP]=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=new Uint32Array(e.length),r=new Uint32Array(e.length);for(let a=0;a<e.length;a++){let{h:i,l:s}=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?{h:Number(e&nk),l:Number(e>>nx&nk)}:{h:0|Number(e>>nx&nk),l:0|Number(e&nk)}}(e[a],t);[n[a],r[a]]=[i,s]}return[n,r]}(nC,!0),nL=(e,t,n)=>n>32?((e,t,n)=>t<<n-32|e>>>64-n)(e,t,n):((e,t,n)=>e<<n|t>>>32-n)(e,t,n),nM=(e,t,n)=>n>32?((e,t,n)=>e<<n-32|t>>>64-n)(e,t,n):((e,t,n)=>t<<n|e>>>32-n)(e,t,n);class nH extends ng{keccak(){nd||nh(this.state32),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,n=new Uint32Array(10);for(let r=24-t;r<24;r++){for(let t=0;t<10;t++)n[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let r=(t+8)%10,a=(t+2)%10,i=n[a],s=n[a+1],o=nL(i,s,1)^n[r],l=nM(i,s,1)^n[r+1];for(let n=0;n<50;n+=10)e[t+n]^=o,e[t+n+1]^=l}let t=e[2],a=e[3];for(let n=0;n<24;n++){let r=nN[n],i=nL(t,a,r),s=nM(t,a,r),o=nI[n];t=e[o],a=e[o+1],e[o]=i,e[o+1]=s}for(let t=0;t<50;t+=10){for(let r=0;r<10;r++)n[r]=e[t+r];for(let r=0;r<10;r++)e[t+r]^=~n[(r+2)%10]&n[(r+4)%10]}e[0]^=nF[r],e[1]^=nP[r]}n.fill(0)}(this.state32,this.rounds),nd||nh(this.state32),this.posOut=0,this.pos=0}update(e){ni(this);let{blockLen:t,state:n}=this,r=(e=np(e)).length;for(let a=0;a<r;){let i=Math.min(t-this.pos,r-a);for(let t=0;t<i;t++)n[this.pos++]^=e[a++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:n,blockLen:r}=this;e[n]^=t,(128&t)!=0&&n===r-1&&this.keccak(),e[r-1]^=128,this.keccak()}writeInto(e){ni(this,!1),na(e),this.finish();let t=this.state,{blockLen:n}=this;for(let r=0,a=e.length;r<a;){this.posOut>=n&&this.keccak();let i=Math.min(n-this.posOut,a-r);e.set(t.subarray(this.posOut,this.posOut+i),r),this.posOut+=i,r+=i}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return nr(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(ns(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:n,outputLen:r,rounds:a,enableXOF:i}=this;return e||(e=new nH(t,n,r,i,a)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=a,e.suffix=n,e.outputLen=r,e.enableXOF=i,e.destroyed=this.destroyed,e}constructor(e,t,n,r=!1,a=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=n,this.enableXOF=r,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,nr(n),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)))(this.state)}}let nz=n_(()=>new nH(136,1,32)),nZ=BigInt(0),nW=BigInt(1),nj=BigInt(2),nY=BigInt(3),nK=BigInt(4),nG=BigInt(5),nq=BigInt(8);function nQ(e,t){let n=e%t;return n>=nZ?n:t+n}function nJ(e,t,n){let r=e;for(;t-- >nZ;)r*=r,r%=n;return r}function nX(e,t){if(e===nZ)throw Error("invert: expected non-zero number");if(t<=nZ)throw Error("invert: expected positive modulus, got "+t);let n=nQ(e,t),r=t,a=nZ,i=nW,s=nW,o=nZ;for(;n!==nZ;){let e=r/n,t=r%n,l=a-s*e,c=i-o*e;r=n,n=t,a=s,i=o,s=l,o=c}if(r!==nW)throw Error("invert: does not exist");return nQ(a,t)}let n$=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function n0(e){return ne(e,n$.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}function n1(e,t,n){if(n<nZ)throw Error("invalid exponent, negatives unsupported");if(n===nZ)return e.ONE;if(n===nW)return t;let r=e.ONE,a=t;for(;n>nZ;)n&nW&&(r=e.mul(r,a)),a=e.sqr(a),n>>=nW;return r}function n2(e,t){let n=void 0!==t?t:e.toString(2).length,r=Math.ceil(n/8);return{nBitLength:n,nByteLength:r}}function n3(e,t){let n,r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=nZ)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:i,nByteLength:s}=n2(e,t);if(s>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let o=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:t5(i),ZERO:nZ,ONE:nW,create:t=>nQ(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return nZ<=t&&t<e},is0:e=>e===nZ,isOdd:e=>(e&nW)===nW,neg:t=>nQ(-t,e),eql:(e,t)=>e===t,sqr:t=>nQ(t*t,e),add:(t,n)=>nQ(t+n,e),sub:(t,n)=>nQ(t-n,e),mul:(t,n)=>nQ(t*n,e),pow:(e,t)=>n1(o,e,t),div:(t,n)=>nQ(t*nX(n,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>nX(t,e),sqrt:a.sqrt||(t=>(n||(n=function(e){if(e%nK===nY){let t=(e+nW)/nK;return function(e,n){let r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw Error("Cannot find square root");return r}}if(e%nq===nG){let t=(e-nG)/nq;return function(e,n){let r=e.mul(n,nj),a=e.pow(r,t),i=e.mul(n,a),s=e.mul(e.mul(i,nj),a),o=e.mul(i,e.sub(s,e.ONE));if(!e.eql(e.sqr(o),n))throw Error("Cannot find square root");return o}}return function(e){let t,n,r,a=(e-nW)/nj;for(t=e-nW,n=0;t%nj===nZ;t/=nj,n++);for(r=nj;r<e&&function(e,t,n){if(t<nZ)throw Error("invalid exponent, negatives unsupported");if(n<=nZ)throw Error("invalid modulus");if(n===nW)return nZ;let r=nW;for(;t>nZ;)t&nW&&(r=r*e%n),e=e*e%n,t>>=nW;return r}(r,a,e)!==e-nW;r++)if(r>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===n){let t=(e+nW)/nK;return function(e,n){let r=e.pow(n,t);if(!e.eql(e.sqr(r),n))throw Error("Cannot find square root");return r}}let i=(t+nW)/nj;return function(e,s){if(e.pow(s,a)===e.neg(e.ONE))throw Error("Cannot find square root");let o=n,l=e.pow(e.mul(e.ONE,r),t),c=e.pow(s,i),d=e.pow(s,t);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let n=e.sqr(d);t<o&&!e.eql(n,e.ONE);t++)n=e.sqr(n);let n=e.pow(l,nW<<BigInt(o-t-1));l=e.sqr(n),c=e.mul(c,n),d=e.mul(d,l),o=t}return c}}(e)}(e)),n(o,t))),invertBatch:e=>(function(e,t){let n=Array(t.length),r=t.reduce((t,r,a)=>e.is0(r)?t:(n[a]=t,e.mul(t,r)),e.ONE),a=e.inv(r);return t.reduceRight((t,r,a)=>e.is0(r)?t:(n[a]=e.mul(t,n[a]),e.mul(t,r)),a),n})(o,e),cmov:(e,t,n)=>n?t:e,toBytes:e=>r?tK(e,s):tY(e,s),fromBytes:e=>{if(e.length!==s)throw Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return r?tj(e):tW(e)}});return Object.freeze(o)}function n6(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function n5(e){let t=n6(e);return t+Math.ceil(t/2)}function n8(e){let{Fp:t,mds:n,reversePartialPowIdx:r,roundConstants:a}=e,{roundsFull:i,roundsPartial:s,sboxPower:o,t:l}=e;for(let n of(n0(t),["t","roundsFull","roundsPartial"]))if("number"!=typeof e[n]||!Number.isSafeInteger(e[n]))throw Error("invalid number "+n);if(!Array.isArray(n)||n.length!==l)throw Error("Poseidon: invalid MDS matrix");let c=n.map(e=>{if(!Array.isArray(e)||e.length!==l)throw Error("invalid MDS matrix row: "+e);return e.map(e=>{if("bigint"!=typeof e)throw Error("invalid MDS matrix bigint: "+e);return t.create(e)})});if(void 0!==r&&"boolean"!=typeof r)throw Error("invalid param reversePartialPowIdx="+r);if(1&i)throw Error("roundsFull is not even"+i);let d=i+s;if(!Array.isArray(a)||a.length!==d)throw Error("Poseidon: invalid round constants");let u=a.map(e=>{if(!Array.isArray(e)||e.length!==l)throw Error("invalid round constants");return e.map(e=>{if("bigint"!=typeof e||!t.isValid(e))throw Error("invalid round constant");return t.create(e)})});if(!o||![3,5,7].includes(o))throw Error("invalid sboxPower");let h=BigInt(o),f=e=>n1(t,e,h);return 3===o?f=e=>t.mul(t.sqrN(e),e):5===o&&(f=e=>t.mul(t.sqrN(t.sqrN(e)),e)),Object.freeze({...e,rounds:d,sboxFn:f,roundConstants:u,mds:c})}function n4(e,t){if("number"!=typeof t)throw Error("poseidonSplitConstants: invalid t");if(!Array.isArray(e)||e.length%t)throw Error("poseidonSplitConstants: invalid rc");let n=[],r=[];for(let a=0;a<e.length;a++)r.push(e[a]),r.length===t&&(n.push(r),r=[]);return n}function n9(e){let t=n8(e),{Fp:n,mds:r,roundConstants:a,rounds:i,roundsPartial:s,sboxFn:o,t:l}=t,c=t.roundsFull/2,d=t.reversePartialPowIdx?l-1:0,u=(e,t,i)=>(e=e.map((e,t)=>n.add(e,a[i][t])),t?e=e.map(e=>o(e)):e[d]=o(e[d]),e=r.map(t=>t.reduce((t,r,a)=>n.add(t,n.mulN(r,e[a])),n.ZERO))),h=function(e){if(!Array.isArray(e)||e.length!==l)throw Error("invalid values, expected array of bigints with length "+l);e=e.map(e=>{if("bigint"!=typeof e)throw Error("invalid bigint="+e);return n.create(e)});let t=0;for(let n=0;n<c;n++)e=u(e,!0,t++);for(let n=0;n<s;n++)e=u(e,!1,t++);for(let n=0;n<c;n++)e=u(e,!0,t++);if(t!==i)throw Error("invalid number of rounds");return e};return h.roundConstants=a,h}e.s(["poseidon",()=>n9,"splitConstants",()=>n4,"validateOpts",()=>n8],592902),e.s(["DER",()=>rh,"SWUFpSqrtRatio",()=>rE,"mapToCurveSimpleSWU",()=>rv,"weierstrass",()=>rb,"weierstrassPoints",()=>ry],992677);let n7=BigInt(0),re=BigInt(1);function rt(e,t){let n=t.negate();return e?n:t}function rn(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function rr(e,t){return rn(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}let ra=new WeakMap,ri=new WeakMap;function rs(e){return ri.get(e)||1}function ro(e){return n0(e.Fp),ne(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...n2(e.n,e.nBitLength),...e,...{p:e.Fp.ORDER}})}var rl=e.i(739382);function rc(e){void 0!==e.lowS&&tU("lowS",e.lowS),void 0!==e.prehash&&tU("prehash",e.prehash)}let{bytesToNumberBE:rd,hexToBytes:ru}=rl,rh={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,t)=>{let{Err:n}=rh;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");let r=t.length/2,a=rl.numberToHexUnpadded(r);if(a.length/2&128)throw new n("tlv.encode: long form length too big");let i=r>127?rl.numberToHexUnpadded(a.length/2|128):"";return rl.numberToHexUnpadded(e)+i+a+t},decode(e,t){let{Err:n}=rh,r=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[r++]!==e)throw new n("tlv.decode: wrong tlv");let a=t[r++],i=0;if(128&a){let e=127&a;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");let s=t.subarray(r,r+e);if(s.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===s[0])throw new n("tlv.decode(long): zero leftmost byte");for(let e of s)i=i<<8|e;if(r+=e,i<128)throw new n("tlv.decode(long): not minimal encoding")}else i=a;let s=t.subarray(r,r+i);if(s.length!==i)throw new n("tlv.decode: wrong value length");return{v:s,l:t.subarray(r+i)}}},_int:{encode(e){let{Err:t}=rh;if(e<rf)throw new t("integer: negative integers are not allowed");let n=rl.numberToHexUnpadded(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){let{Err:t}=rh;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return rd(e)}},toSig(e){let{Err:t,_int:n,_tlv:r}=rh,a="string"==typeof e?ru(e):e;rl.abytes(a);let{v:i,l:s}=r.decode(48,a);if(s.length)throw new t("invalid signature: left bytes after parsing");let{v:o,l:l}=r.decode(2,i),{v:c,l:d}=r.decode(2,l);if(d.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(o),s:n.decode(c)}},hexFromSig(e){let{_tlv:t,_int:n}=rh,r=t.encode(2,n.encode(e.r)),a=t.encode(2,n.encode(e.s));return t.encode(48,r+a)}},rf=BigInt(0),rp=BigInt(1),rg=BigInt(2),r_=BigInt(3),rm=BigInt(4);function ry(e){var t;let n=function(e){let t=ro(e);rl.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:n,Fp:r,a}=t;if(n){if(!r.eql(a,r.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof n||"bigint"!=typeof n.beta||"function"!=typeof n.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=n,a=n3(n.n,n.nBitLength),i=n.toBytes||((e,t,n)=>{let a=t.toAffine();return rl.concatBytes(Uint8Array.from([4]),r.toBytes(a.x),r.toBytes(a.y))}),s=n.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function o(e){let{a:t,b:a}=n,i=r.sqr(e),s=r.mul(i,e);return r.add(r.add(s,r.mul(e,t)),a)}if(!r.eql(r.sqr(n.Gy),o(n.Gx)))throw Error("bad generator point: equation left != right");function l(e){let t,{allowedPrivateKeyLengths:r,nByteLength:a,wrapPrivateKey:i,n:s}=n;if(r&&"bigint"!=typeof e){if(rl.isBytes(e)&&(e=rl.bytesToHex(e)),"string"!=typeof e||!r.includes(e.length))throw Error("invalid private key");e=e.padStart(2*a,"0")}try{t="bigint"==typeof e?e:rl.bytesToNumberBE(tq("private key",e,a))}catch(t){throw Error("invalid private key, expected hex or "+a+" bytes, got "+typeof e)}return i&&(t=nQ(t,s)),rl.aInRange("private key",t,rp,s),t}function c(e){if(!(e instanceof h))throw Error("ProjectivePoint expected")}let d=nn((e,t)=>{let{px:n,py:a,pz:i}=e;if(r.eql(i,r.ONE))return{x:n,y:a};let s=e.is0();null==t&&(t=s?r.ONE:r.inv(i));let o=r.mul(n,t),l=r.mul(a,t),c=r.mul(i,t);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(c,r.ONE))throw Error("invZ was invalid");return{x:o,y:l}}),u=nn(e=>{if(e.is0()){if(n.allowInfinityPoint&&!r.is0(e.py))return;throw Error("bad point: ZERO")}let{x:t,y:a}=e.toAffine();if(!r.isValid(t)||!r.isValid(a))throw Error("bad point: x or y not FE");let i=r.sqr(a),s=o(t);if(!r.eql(i,s))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class h{static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof h)throw Error("projective point not allowed");let a=e=>r.eql(e,r.ZERO);return a(t)&&a(n)?h.ZERO:new h(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,n)=>e.toAffine(t[n])).map(h.fromAffine)}static fromHex(e){let t=h.fromAffine(s(tq("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return h.BASE.multiply(l(e))}static msm(e,t){return function(e,t,n,r){if(!Array.isArray(n))throw Error("array expected");n.forEach((t,n)=>{if(!(t instanceof e))throw Error("invalid point at index "+n)});if(!Array.isArray(r))throw Error("array of scalars expected");if(r.forEach((e,n)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+n)}),n.length!==r.length)throw Error("arrays of points and scalars must have equal length");let a=e.ZERO,i=t2(BigInt(n.length)),s=i>12?i-3:i>4?i-2:i?2:1,o=(1<<s)-1,l=Array(o+1).fill(a),c=Math.floor((t.BITS-1)/s)*s,d=a;for(let e=c;e>=0;e-=s){l.fill(a);for(let t=0;t<r.length;t++){let a=Number(r[t]>>BigInt(e)&BigInt(o));l[a]=l[a].add(n[t])}let t=a;for(let e=l.length-1,n=a;e>0;e--)n=n.add(l[e]),t=t.add(n);if(d=d.add(t),0!==e)for(let e=0;e<s;e++)d=d.double()}return d}(h,a,e,t)}_setWindowSize(e){p.setWindowSize(this,e)}assertValidity(){u(this)}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){c(e);let{px:t,py:n,pz:a}=this,{px:i,py:s,pz:o}=e,l=r.eql(r.mul(t,o),r.mul(i,a)),d=r.eql(r.mul(n,o),r.mul(s,a));return l&&d}negate(){return new h(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:t}=n,a=r.mul(t,r_),{px:i,py:s,pz:o}=this,l=r.ZERO,c=r.ZERO,d=r.ZERO,u=r.mul(i,i),f=r.mul(s,s),p=r.mul(o,o),g=r.mul(i,s);return g=r.add(g,g),d=r.mul(i,o),d=r.add(d,d),l=r.mul(e,d),c=r.mul(a,p),c=r.add(l,c),l=r.sub(f,c),c=r.add(f,c),c=r.mul(l,c),l=r.mul(g,l),d=r.mul(a,d),p=r.mul(e,p),g=r.sub(u,p),g=r.mul(e,g),g=r.add(g,d),d=r.add(u,u),u=r.add(d,u),u=r.add(u,p),u=r.mul(u,g),c=r.add(c,u),p=r.mul(s,o),p=r.add(p,p),u=r.mul(p,g),l=r.sub(l,u),d=r.mul(p,f),d=r.add(d,d),new h(l,c,d=r.add(d,d))}add(e){c(e);let{px:t,py:a,pz:i}=this,{px:s,py:o,pz:l}=e,d=r.ZERO,u=r.ZERO,f=r.ZERO,p=n.a,g=r.mul(n.b,r_),_=r.mul(t,s),m=r.mul(a,o),y=r.mul(i,l),b=r.add(t,a),E=r.add(s,o);b=r.mul(b,E),E=r.add(_,m),b=r.sub(b,E),E=r.add(t,i);let v=r.add(s,l);return E=r.mul(E,v),v=r.add(_,y),E=r.sub(E,v),v=r.add(a,i),d=r.add(o,l),v=r.mul(v,d),d=r.add(m,y),v=r.sub(v,d),f=r.mul(p,E),d=r.mul(g,y),f=r.add(d,f),d=r.sub(m,f),f=r.add(m,f),u=r.mul(d,f),m=r.add(_,_),m=r.add(m,_),y=r.mul(p,y),E=r.mul(g,E),m=r.add(m,y),y=r.sub(_,y),y=r.mul(p,y),E=r.add(E,y),_=r.mul(m,E),u=r.add(u,_),_=r.mul(v,E),d=r.mul(b,d),d=r.sub(d,_),_=r.mul(b,m),f=r.mul(v,f),new h(d,u,f=r.add(f,_))}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return p.wNAFCached(this,e,h.normalizeZ)}multiplyUnsafe(e){let{endo:t,n:a}=n;rl.aInRange("scalar",e,rf,a);let i=h.ZERO;if(e===rf)return i;if(this.is0()||e===rp)return this;if(!t||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,e,h.normalizeZ);let{k1neg:s,k1:o,k2neg:l,k2:c}=t.splitScalar(e),d=i,u=i,f=this;for(;o>rf||c>rf;)o&rp&&(d=d.add(f)),c&rp&&(u=u.add(f)),f=f.double(),o>>=rp,c>>=rp;return s&&(d=d.negate()),l&&(u=u.negate()),u=new h(r.mul(u.px,t.beta),u.py,u.pz),d.add(u)}multiply(e){let t,a,{endo:i,n:s}=n;if(rl.aInRange("scalar",e,rp,s),i){let{k1neg:n,k1:s,k2neg:o,k2:l}=i.splitScalar(e),{p:c,f:d}=this.wNAF(s),{p:u,f:f}=this.wNAF(l);c=p.constTimeNegate(n,c),u=p.constTimeNegate(o,u),u=new h(r.mul(u.px,i.beta),u.py,u.pz),t=c.add(u),a=d.add(f)}else{let{p:n,f:r}=this.wNAF(e);t=n,a=r}return h.normalizeZ([t,a])[0]}multiplyAndAddUnsafe(e,t,n){let r=h.BASE,a=(e,t)=>t!==rf&&t!==rp&&e.equals(r)?e.multiply(t):e.multiplyUnsafe(t),i=a(this,t).add(a(e,n));return i.is0()?void 0:i}toAffine(e){return d(this,e)}isTorsionFree(){let{h:e,isTorsionFree:t}=n;if(e===rp)return!0;if(t)return t(h,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:t}=n;return e===rp?this:t?t(h,this):this.multiplyUnsafe(n.h)}toRawBytes(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return tU("isCompressed",e),this.assertValidity(),i(h,this,e)}toHex(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return tU("isCompressed",e),rl.bytesToHex(this.toRawBytes(e))}constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required");Object.freeze(this)}}h.BASE=new h(n.Gx,n.Gy,r.ONE),h.ZERO=new h(r.ZERO,r.ONE,r.ZERO);let f=n.nBitLength,p=(t=n.endo?Math.ceil(f/2):f,{constTimeNegate:rt,hasPrecomputes:e=>1!==rs(e),unsafeLadder(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h.ZERO,r=e;for(;t>n7;)t&re&&(n=n.add(r)),r=r.double(),t>>=re;return n},precomputeWindow(e,n){let{windows:r,windowSize:a}=rr(n,t),i=[],s=e,o=s;for(let e=0;e<r;e++){o=s,i.push(o);for(let e=1;e<a;e++)o=o.add(s),i.push(o);s=o.double()}return i},wNAF(e,n,r){let{windows:a,windowSize:i}=rr(e,t),s=h.ZERO,o=h.BASE,l=BigInt(2**e-1),c=2**e,d=BigInt(e);for(let e=0;e<a;e++){let t=e*i,a=Number(r&l);r>>=d,a>i&&(a-=c,r+=re);let u=t+Math.abs(a)-1,h=e%2!=0,f=a<0;0===a?o=o.add(rt(h,n[t])):s=s.add(rt(f,n[u]))}return{p:s,f:o}},wNAFUnsafe(e,n,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:h.ZERO,{windows:i,windowSize:s}=rr(e,t),o=BigInt(2**e-1),l=2**e,c=BigInt(e);for(let e=0;e<i;e++){let t=e*s;if(r===n7)break;let i=Number(r&o);if(r>>=c,i>s&&(i-=l,r+=re),0===i)continue;let d=n[t+Math.abs(i)-1];i<0&&(d=d.negate()),a=a.add(d)}return a},getPrecomputes(e,t,n){let r=ra.get(t);return r||(r=this.precomputeWindow(t,e),1!==e&&ra.set(t,n(r))),r},wNAFCached(e,t,n){let r=rs(e);return this.wNAF(r,this.getPrecomputes(r,e,n),t)},wNAFCachedUnsafe(e,t,n,r){let a=rs(e);return 1===a?this.unsafeLadder(e,t,r):this.wNAFUnsafe(a,this.getPrecomputes(a,e,n),t,r)},setWindowSize(e,n){rn(n,t),ri.set(e,n),ra.delete(e)}});return{CURVE:n,ProjectivePoint:h,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:function(e){return rl.inRange(e,rp,n.n)}}}function rb(e){let t=function(e){let t=ro(e);return rl.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:n,n:r}=t,a=n.BYTES+1,i=2*n.BYTES+1;function s(e){return nQ(e,r)}let{ProjectivePoint:o,normPrivateKeyToScalar:l,weierstrassEquation:c,isWithinCurveOrder:d}=ry({...t,toBytes(e,t,r){let a=t.toAffine(),i=n.toBytes(a.x),s=rl.concatBytes;return(tU("isCompressed",r),r)?s(Uint8Array.from([t.hasEvenY()?2:3]),i):s(Uint8Array.from([4]),i,n.toBytes(a.y))},fromBytes(e){let t=e.length,r=e[0],s=e.subarray(1);if(t===a&&(2===r||3===r)){let e,t=rl.bytesToNumberBE(s);if(!rl.inRange(t,rp,n.ORDER))throw Error("Point is not on curve");let a=c(t);try{e=n.sqrt(a)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&r)==1!=((e&rp)===rp)&&(e=n.neg(e)),{x:t,y:e}}if(t===i&&4===r)return{x:n.fromBytes(s.subarray(0,n.BYTES)),y:n.fromBytes(s.subarray(n.BYTES,2*n.BYTES))};throw Error("invalid Point, expected length of "+a+", or uncompressed "+i+", got "+t)}}),u=e=>rl.bytesToHex(rl.numberToBytesBE(e,t.nByteLength)),h=(e,t,n)=>rl.bytesToNumberBE(e.slice(t,n));class f{static fromCompact(e){let n=t.nByteLength;return new f(h(e=tq("compactSignature",e,2*n),0,n),h(e,n,2*n))}static fromDER(e){let{r:t,s:n}=rh.toSig(tq("DER",e));return new f(t,n)}assertValidity(){rl.aInRange("r",this.r,rp,r),rl.aInRange("s",this.s,rp,r)}addRecoveryBit(e){return new f(this.r,this.s,e)}recoverPublicKey(e){let{r:a,s:i,recovery:l}=this,c=_(tq("msgHash",e));if(null==l||![0,1,2,3].includes(l))throw Error("recovery id invalid");let d=2===l||3===l?a+t.n:a;if(d>=n.ORDER)throw Error("recovery id 2 or 3 invalid");let h=(1&l)==0?"02":"03",f=o.fromHex(h+u(d)),p=nX(d,r),g=s(-c*p),m=s(i*p),y=o.BASE.multiplyAndAddUnsafe(f,g,m);if(!y)throw Error("point at infinify");return y.assertValidity(),y}hasHighS(){return this.s>r>>rp}normalizeS(){return this.hasHighS()?new f(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return rl.hexToBytes(this.toDERHex())}toDERHex(){return rh.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return rl.hexToBytes(this.toCompactHex())}toCompactHex(){return u(this.r)+u(this.s)}constructor(e,t,n){this.r=e,this.s=t,this.recovery=n,this.assertValidity()}}function p(e){let t=rl.isBytes(e),n="string"==typeof e,r=(t||n)&&e.length;return t?r===a||r===i:n?r===2*a||r===2*i:e instanceof o}let g=t.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let n=rl.bytesToNumberBE(e),r=8*e.length-t.nBitLength;return r>0?n>>BigInt(r):n},_=t.bits2int_modN||function(e){return s(g(e))},m=rl.bitMask(t.nBitLength);function y(e){return rl.aInRange("num < 2^"+t.nBitLength,e,rf,m),rl.numberToBytesBE(e,t.nByteLength)}let b={lowS:t.lowS,prehash:!1},E={lowS:t.lowS,prehash:!1};return o.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return o.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(p(e))throw Error("first arg must be private key");if(!p(t))throw Error("second arg must be public key");return o.fromHex(t).multiply(l(e)).toRawBytes(n)},sign:function(e,a){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b,{seed:c,k2sig:u}=function(e,a){let i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:b;if(["recovered","canonical"].some(e=>e in i))throw Error("sign() legacy options not supported");let{hash:c,randomBytes:u}=t,{lowS:h,prehash:p,extraEntropy:m}=i;null==h&&(h=!0),e=tq("msgHash",e),rc(i),p&&(e=tq("prehashed msgHash",c(e)));let E=_(e),v=l(a),w=[y(v),y(E)];if(null!=m&&!1!==m){let e=!0===m?u(n.BYTES):m;w.push(tq("extraEntropy",e))}return{seed:rl.concatBytes(...w),k2sig:function(e){var t;let n=g(e);if(!d(n))return;let a=nX(n,r),i=o.BASE.multiply(n).toAffine(),l=s(i.x);if(l===rf)return;let c=s(a*s(E+l*v));if(c===rf)return;let u=2*(i.x!==l)|Number(i.y&rp),p=c;return h&&c>r>>rp&&(p=(t=c)>r>>rp?s(-t):t,u^=1),new f(l,p,u)}}}(e,a,i);return rl.createHmacDrbg(t.hash.outputLen,t.nByteLength,t.hmac)(c,u)},verify:function(e,n,a){var i;let l,c,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:E;n=tq("msgHash",n),a=tq("publicKey",a);let{lowS:u,prehash:h,format:p}=d;if(rc(d),"strict"in d)throw Error("options.strict was renamed to lowS");if(void 0!==p&&"compact"!==p&&"der"!==p)throw Error("format must be compact or der");let g="string"==typeof e||rl.isBytes(e),m=!g&&!p&&"object"==typeof e&&null!==e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!g&&!m)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(m&&(l=new f(e.r,e.s)),g){try{"compact"!==p&&(l=f.fromDER(e))}catch(e){if(!(e instanceof rh.Err))throw e}l||"der"===p||(l=f.fromCompact(e))}c=o.fromHex(a)}catch(e){return!1}if(!l||u&&l.hasHighS())return!1;h&&(n=t.hash(n));let{r:y,s:b}=l,v=_(n),w=nX(b,r),T=s(v*w),A=s(y*w),S=null==(i=o.BASE.multiplyAndAddUnsafe(c,T,A))?void 0:i.toAffine();return!!S&&s(S.x)===y},ProjectivePoint:o,Signature:f,utils:{isValidPrivateKey(e){try{return l(e),!0}catch(e){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let e=n5(t.n);return function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],r=e.length,a=n6(t),i=n5(t);if(r<16||r<i||r>1024)throw Error("expected "+i+"-1024 bytes of input, got "+r);let s=nQ(n?tW(e):tj(e),t-nW)+nW;return n?tK(s,a):tY(s,a)}(t.randomBytes(e),t.n)},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:o.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}}}}function rE(e,t){let n=e.ORDER,r=rf;for(let e=n-rp;e%rg===rf;e/=rg)r+=rp;let a=r,i=rg<<a-rp-rp,s=i*rg,o=(n-rp)/s,l=(o-rp)/rg,c=s-rp,d=e.pow(t,o),u=e.pow(t,(o+rp)/rg),h=(t,n)=>{let r=d,s=e.pow(n,c),o=e.sqr(s);o=e.mul(o,n);let h=e.mul(t,o);h=e.pow(h,l),h=e.mul(h,s),s=e.mul(h,n),o=e.mul(h,t);let f=e.mul(o,s);h=e.pow(f,i);let p=e.eql(h,e.ONE);s=e.mul(o,u),h=e.mul(f,r),o=e.cmov(s,o,p),f=e.cmov(h,f,p);for(let t=a;t>rp;t--){let n=t-rg;n=rg<<n-rp;let a=e.pow(f,n),i=e.eql(a,e.ONE);s=e.mul(o,r),r=e.mul(r,r),a=e.mul(f,r),o=e.cmov(s,o,i),f=e.cmov(a,f,i)}return{isValid:p,value:o}};if(e.ORDER%rm===r_){let n=(e.ORDER-r_)/rm,r=e.sqrt(e.neg(t));h=(t,a)=>{let i=e.sqr(a),s=e.mul(t,a);i=e.mul(i,s);let o=e.pow(i,n);o=e.mul(o,s);let l=e.mul(o,r),c=e.mul(e.sqr(o),a),d=e.eql(c,t),u=e.cmov(l,o,d);return{isValid:d,value:u}}}return h}function rv(e,t){if(n0(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let n=rE(e,t.Z);if(!e.isOdd)throw Error("Fp.isOdd is not implemented!");return r=>{let a,i,s,o,l,c,d,u;a=e.sqr(r),a=e.mul(a,t.Z),i=e.sqr(a),i=e.add(i,a),s=e.add(i,e.ONE),s=e.mul(s,t.B),o=e.cmov(t.Z,e.neg(i),!e.eql(i,e.ZERO)),o=e.mul(o,t.A),i=e.sqr(s),c=e.sqr(o),l=e.mul(c,t.A),i=e.add(i,l),i=e.mul(i,s),c=e.mul(c,o),l=e.mul(c,t.B),i=e.add(i,l),d=e.mul(a,s);let{isValid:h,value:f}=n(i,c);u=e.mul(a,r),u=e.mul(u,f),d=e.cmov(d,s,h),u=e.cmov(u,f,h);let p=e.isOdd(r)===e.isOdd(u);return u=e.cmov(e.neg(u),u,p),{x:d=e.div(d,o),y:u}}}class rw extends ng{update(e){return ni(this),this.iHash.update(e),this}digestInto(e){ni(this),na(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:n,finished:r,destroyed:a,blockLen:i,outputLen:s}=this;return e.finished=r,e.destroyed=a,e.blockLen=i,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=n._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");nr(e.outputLen),nr(e.blockLen)}(e);let n=np(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let r=this.blockLen,a=new Uint8Array(r);a.set(n.length>r?e.create().update(n).digest():n);for(let e=0;e<a.length;e++)a[e]^=54;this.iHash.update(a),this.oHash=e.create();for(let e=0;e<a.length;e++)a[e]^=106;this.oHash.update(a),a.fill(0)}}let rT=(e,t,n)=>new rw(e,t).update(n).digest();function rA(e){return{hash:e,hmac:function(t){for(var n=arguments.length,r=Array(n>1?n-1:0),a=1;a<n;a++)r[a-1]=arguments[a];return rT(e,t,function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];let r=0;for(let e=0;e<t.length;e++){let n=t[e];na(n),r+=n.length}let a=new Uint8Array(r);for(let e=0,n=0;e<t.length;e++){let r=t[e];a.set(r,n),n+=r.length}return a}(...r))},randomBytes:nm}}rT.create=(e,t)=>new rw(e,t);let rS=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583"),rk=BigInt("0x800000000000000000000000000000000000000000000000000000000000000");function rx(e){for(;0===e[0];)e=e.subarray(1);let t=8*e.length-252,n=tW(e);return t>0?n>>BigInt(t):n}function rI(e){return"string"==typeof e&&1&(e=rW(e)).length&&(e="0"+e),tZ(e)}let rN=rb({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:n3(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:rS,nBitLength:252,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,...rA(nS),bits2int:rx,bits2int_modN:e=>{let t=tW(e).toString(16);return 63===t.length&&(e=rI(t+"0")),nQ(rx(e),rS)}}),rC=rN;function rR(e){return tq("","string"==typeof e?rI(e):e)}function rO(e){return tP(rR(e)).padStart(64,"0")}function rV(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return rN.getPublicKey(rO(e),t)}function rB(e,t){return rN.getSharedSecret(rO(e),t)}function rD(e){let{r:t,s:n}=e;if(t<0n||t>=rk)throw Error("Signature.r should be [1, ".concat(rk,")"));let r=nX(n,rS);if(r<0n||r>=rk)throw Error("inv(Signature.s) should be [1, ".concat(rk,")"))}function rU(e){let t=rR(e);if(tW(t)>=rk)throw Error("msgHash should be [0, ".concat(rk,")"));return t}function rF(e,t,n){let r=rN.sign(rU(e),rO(t),n);return rD(r),r}function rP(e,t,n){if(!(e instanceof rH)){let t=rR(e);try{e=rH.fromDER(t)}catch(n){if(!(n instanceof rh.Err))throw n;e=rH.fromCompact(t)}}return rD(e),rN.verify(e,rU(t),rR(n))}let{CURVE:rL,ProjectivePoint:rM,Signature:rH,utils:rz}=rN;function rZ(e){let t=tP(e.subarray(1)).replace(/^0+/gm,"");return"0x".concat(t)}function rW(e){return e.replace(/^0x/i,"")}function rj(e){let t=rR(e),n=2n**256n,r=n-nQ(n,rS);for(let e=0;;e++){let n=r8(tQ(t,tG(BigInt(e))));if(n<r)return nQ(n,rS).toString(16);if(1e5===e)throw Error("grindKey is broken: tried 100k vals")}}function rY(e){return rZ(rV(e,!0))}function rK(e){if(130!==(e=rW(e)).length)throw Error("Wrong ethereum signature");return rj(e.substring(0,64))}let rG=2n**31n-1n,rq=e=>Number(e&rG);function rQ(e,t,n,r){let a=rq(r8(e)),i=rq(r8(t)),s=tM(rW(n));return"m/2645'/".concat(a,"'/").concat(i,"'/").concat(rq(s),"'/").concat(rq(s>>31n),"'/").concat(r)}let rJ=[new rM(0x49ee3eba8c1600700ee1b87eb599f16716b0b1022947733551fde4050ca6804n,0x3ca0cfe4b3bc6ddf346d49d06ea0ed34e621062c0e056c1d0405d266e10268an,1n),new rM(0x234287dcbaffe7f969c748655fca9e58fa8120b6d56eb0c1080d17957ebe47bn,0x3b056f100f96fb21e889527d41f4e39940135dd7a6c94cc6ed0268ee89e5615n,1n),new rM(0x4fa56f376c83db33f9dab2656558f3399099ec1de5e3018b7a6932dba8aa378n,0x3fa0984c931c9e38113e0c0e47e4401562761f92a7a23b45168f4e80ff5b54dn,1n),new rM(0x4ba4cc166be8dec764910f75b45f74b40c690c74709e90f3aa372f0bd2d6997n,0x40301cf5c1751f4b971e46c4ede85fcac5c59a5ce5ae7c48151f27b24b219cn,1n),new rM(0x54302dcb0e6cc1c6e44cca8f61a63bb2ca65048d53fb325d36ff12c49a58202n,0x1b77b3e37d13504b348046268d8ae25ce98ad783c25561a879dcc77e99c2426n,1n)];function rX(e,t){let n=[],r=e;for(let e=0;e<248;e++)n.push(r),r=r.double();r=t;for(let e=0;e<4;e++)n.push(r),r=r.double();return n}let r$=rX(rJ[1],rJ[2]),r0=rX(rJ[3],rJ[4]);function r1(e,t,n){let r=function(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e){if(!Number.isSafeInteger(e))throw Error("Invalid pedersenArg: ".concat(e));t=BigInt(e)}else t=tW(rR(e));if(!(0n<=t&&t<rN.CURVE.Fp.ORDER))throw Error("PedersenArg should be 0 <= value < CURVE.P: ".concat(t));return t}(t);for(let t=0;t<252;t++){let a=n[t];if(!a)throw Error("invalid constant index");if(a.equals(e))throw Error("Same point");(1n&r)!==0n&&(e=e.add(a)),r>>=1n}return e}function r2(e,t){let n=rJ[0];return n=r1(n,e,r$),rZ((n=r1(n,t,r0)).toRawBytes(!0))}let r3=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r2;return[0,...e,e.length].reduce((e,n)=>t(e,n))},r6=t5(250),r5=e=>tW(nz(e))&r6,r8=e=>tW(nS(e)),r4=n3(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));function r9(e,t,n){let r=e.fromBytes(nS(nf("".concat(t).concat(n))));return e.create(r)}function r7(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=[],i=[];for(let s=0;s<n;s++)a.push(r9(e,"".concat(t,"x"),r*n+s)),i.push(r9(e,"".concat(t,"y"),r*n+s));if(new Set([...a,...i]).size!==2*n)throw Error("X and Y values are not distinct");return a.map(t=>i.map(n=>e.inv(e.sub(t,n))))}function ae(e,t){if(n0(e.Fp),!Number.isSafeInteger(e.rate)||!Number.isSafeInteger(e.capacity))throw Error("Wrong poseidon opts: ".concat(e));let n=e.rate+e.capacity,r=e.roundsFull+e.roundsPartial,a=[];for(let t=0;t<r;t++){let r=[];for(let a=0;a<n;a++)r.push(r9(e.Fp,"Hades",n*t+a));a.push(r)}let i=n9({...e,t:n,sboxPower:3,reversePartialPowIdx:!0,mds:t,roundConstants:a});return i.m=n,i.rate=e.rate,i.capacity=e.capacity,i}function at(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=e.rate+e.capacity;if(!Number.isSafeInteger(t))throw Error("Wrong mdsAttempt=".concat(t));return ae(e,r7(e.Fp,"HadesMDS",n,t))}let an=ae({Fp:r4,rate:2,capacity:1,roundsFull:8,roundsPartial:83},[[3,1,1],[1,-1,1],[1,1,-2]].map(e=>e.map(BigInt)));function ar(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:an;return n([e,t,2n])[0]}function aa(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:an;return tG(ar(tW(e),tW(t),n))}function ai(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:an;return t([e,0n,1n])[0]}function as(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:an,{m:n,rate:r}=t;if(!Array.isArray(e))throw Error("bigint array expected in values");let a=Array.from(e);for(a.push(1n);a.length%r!=0;)a.push(0n);let i=Array(n).fill(0n);for(let e=0;e<a.length;e+=r){for(let t=0;t<r;t++){let n=a[e+t];if(void 0===n)throw Error("invalid index");if(void 0===i[t])throw Error("state[j] is undefined");i[t]=i[t]+n}i=t(i)}return i[0]}var ao=e.i(592902),al=e.i(490801),ac=e.i(992677);function ad(e){let t=e.length;for(;--t>=0;)e[t]=0}let au=573,ah=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),af=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ap=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),ag=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),a_=Array(576);ad(a_);let am=Array(60);ad(am);let ay=Array(512);ad(ay);let ab=Array(256);ad(ab);let aE=Array(29);ad(aE);let av=Array(30);function aw(e,t,n,r,a){this.static_tree=e,this.extra_bits=t,this.extra_base=n,this.elems=r,this.max_length=a,this.has_stree=e&&e.length}function aT(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}ad(av);let aA=e=>e<256?ay[e]:ay[256+(e>>>7)],aS=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},ak=(e,t,n)=>{e.bi_valid>16-n?(e.bi_buf|=t<<e.bi_valid&65535,aS(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=n-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=n)},ax=(e,t,n)=>{ak(e,n[2*t],n[2*t+1])},aI=(e,t)=>{let n=0;do n|=1&e,e>>>=1,n<<=1;while(--t>0)return n>>>1},aN=(e,t,n)=>{let r,a,i=Array(16),s=0;for(r=1;r<=15;r++)s=s+n[r-1]<<1,i[r]=s;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=aI(i[t]++,t))}},aC=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},aR=e=>{e.bi_valid>8?aS(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},aO=(e,t,n,r)=>{let a=2*t,i=2*n;return e[a]<e[i]||e[a]===e[i]&&r[t]<=r[n]},aV=(e,t,n)=>{let r=e.heap[n],a=n<<1;for(;a<=e.heap_len&&(a<e.heap_len&&aO(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!aO(t,r,e.heap[a],e.depth));)e.heap[n]=e.heap[a],n=a,a<<=1;e.heap[n]=r},aB=(e,t,n)=>{let r,a,i,s,o=0;if(0!==e.sym_next)do r=(255&e.pending_buf[e.sym_buf+o++])+((255&e.pending_buf[e.sym_buf+o++])<<8),a=e.pending_buf[e.sym_buf+o++],0===r?ax(e,a,t):(ax(e,(i=ab[a])+256+1,t),0!==(s=ah[i])&&ak(e,a-=aE[i],s),ax(e,i=aA(--r),n),0!==(s=af[i])&&ak(e,r-=av[i],s));while(o<e.sym_next)ax(e,256,t)},aD=(e,t)=>{let n,r,a,i=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(n=0,e.heap_len=0,e.heap_max=au;n<l;n++)0!==i[2*n]?(e.heap[++e.heap_len]=c=n,e.depth[n]=0):i[2*n+1]=0;for(;e.heap_len<2;)i[2*(a=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[a]=0,e.opt_len--,o&&(e.static_len-=s[2*a+1]);for(t.max_code=c,n=e.heap_len>>1;n>=1;n--)aV(e,i,n);a=l;do n=e.heap[1],e.heap[1]=e.heap[e.heap_len--],aV(e,i,1),r=e.heap[1],e.heap[--e.heap_max]=n,e.heap[--e.heap_max]=r,i[2*a]=i[2*n]+i[2*r],e.depth[a]=(e.depth[n]>=e.depth[r]?e.depth[n]:e.depth[r])+1,i[2*n+1]=i[2*r+1]=a,e.heap[1]=a++,aV(e,i,1);while(e.heap_len>=2)e.heap[--e.heap_max]=e.heap[1],((e,t)=>{let n,r,a,i,s,o,l=t.dyn_tree,c=t.max_code,d=t.stat_desc.static_tree,u=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,g=0;for(i=0;i<=15;i++)e.bl_count[i]=0;for(l[2*e.heap[e.heap_max]+1]=0,n=e.heap_max+1;n<au;n++)(i=l[2*l[2*(r=e.heap[n])+1]+1]+1)>p&&(i=p,g++),l[2*r+1]=i,!(r>c)&&(e.bl_count[i]++,s=0,r>=f&&(s=h[r-f]),o=l[2*r],e.opt_len+=o*(i+s),u&&(e.static_len+=o*(d[2*r+1]+s)));if(0!==g){do{for(i=p-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[p]--,g-=2}while(g>0)for(i=p;0!==i;i--)for(r=e.bl_count[i];0!==r;)!((a=e.heap[--n])>c)&&(l[2*a+1]!==i&&(e.opt_len+=(i-l[2*a+1])*l[2*a],l[2*a+1]=i),r--)}})(e,t),aN(i,c,e.bl_count)},aU=(e,t,n)=>{let r,a,i=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),t[(n+1)*2+1]=65535,r=0;r<=n;r++)a=s,s=t[(r+1)*2+1],++o<l&&a===s||(o<c?e.bl_tree[2*a]+=o:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,i=a,0===s?(l=138,c=3):a===s?(l=6,c=3):(l=7,c=4))},aF=(e,t,n)=>{let r,a,i=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),r=0;r<=n;r++)if(a=s,s=t[(r+1)*2+1],!(++o<l)||a!==s){if(o<c)do ax(e,a,e.bl_tree);while(0!=--o)else 0!==a?(a!==i&&(ax(e,a,e.bl_tree),o--),ax(e,16,e.bl_tree),ak(e,o-3,2)):o<=10?(ax(e,17,e.bl_tree),ak(e,o-3,3)):(ax(e,18,e.bl_tree),ak(e,o-11,7));o=0,i=a,0===s?(l=138,c=3):a===s?(l=6,c=3):(l=7,c=4)}},aP=!1,aL=(e,t,n,r)=>{ak(e,0+ +!!r,3),aR(e),aS(e,n),aS(e,~n),n&&e.pending_buf.set(e.window.subarray(t,t+n),e.pending),e.pending+=n};var aM={_tr_init:e=>{aP||((()=>{let e,a,i,s,o,l=Array(16);for(s=0,i=0;s<28;s++)for(e=0,aE[s]=i;e<1<<ah[s];e++)ab[i++]=s;for(ab[i-1]=s,o=0,s=0;s<16;s++)for(e=0,av[s]=o;e<1<<af[s];e++)ay[o++]=s;for(o>>=7;s<30;s++)for(e=0,av[s]=o<<7;e<1<<af[s]-7;e++)ay[256+o++]=s;for(a=0;a<=15;a++)l[a]=0;for(e=0;e<=143;)a_[2*e+1]=8,e++,l[8]++;for(;e<=255;)a_[2*e+1]=9,e++,l[9]++;for(;e<=279;)a_[2*e+1]=7,e++,l[7]++;for(;e<=287;)a_[2*e+1]=8,e++,l[8]++;for(aN(a_,287,l),e=0;e<30;e++)am[2*e+1]=5,am[2*e]=aI(e,5);t=new aw(a_,ah,257,286,15),n=new aw(am,af,0,30,15),r=new aw([],ap,0,19,7)})(),aP=!0),e.l_desc=new aT(e.dyn_ltree,t),e.d_desc=new aT(e.dyn_dtree,n),e.bl_desc=new aT(e.bl_tree,r),e.bi_buf=0,e.bi_valid=0,aC(e)},_tr_stored_block:aL,_tr_flush_block:(e,t,n,r)=>{let a,i,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,n=0xf3ffc07f;for(t=0;t<=31;t++,n>>>=1)if(1&n&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),aD(e,e.l_desc),aD(e,e.d_desc),s=(e=>{let t;for(aU(e,e.dyn_ltree,e.l_desc.max_code),aU(e,e.dyn_dtree,e.d_desc.max_code),aD(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*ag[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),a=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=a&&(a=i)):a=i=n+5,n+4<=a&&-1!==t?aL(e,t,n,r):4===e.strategy||i===a?(ak(e,2+ +!!r,3),aB(e,a_,am)):(ak(e,4+ +!!r,3),((e,t,n,r)=>{let a;for(ak(e,t-257,5),ak(e,n-1,5),ak(e,r-4,4),a=0;a<r;a++)ak(e,e.bl_tree[2*ag[a]+1],3);aF(e,e.dyn_ltree,t-1),aF(e,e.dyn_dtree,n-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),aB(e,e.dyn_ltree,e.dyn_dtree)),aC(e),r&&aR(e)},_tr_tally:(e,t,n)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=n,0===t?e.dyn_ltree[2*n]++:(e.matches++,t--,e.dyn_ltree[(ab[n]+256+1)*2]++,e.dyn_dtree[2*aA(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{ak(e,2,3),ax(e,256,a_),(e=>{16===e.bi_valid?(aS(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},aH=(e,t,n,r)=>{let a=65535&e,i=e>>>16&65535,s=0;for(;0!==n;){s=n>2e3?2e3:n,n-=s;do i=i+(a=a+t[r++]|0)|0;while(--s)a%=65521,i%=65521}return a|i<<16};let az=new Uint32Array((()=>{let e,t=[];for(var n=0;n<256;n++){e=n;for(var r=0;r<8;r++)e=1&e?0xedb88320^e>>>1:e>>>1;t[n]=e}return t})());var aZ=(e,t,n,r)=>{let a=r+n;e^=-1;for(let n=r;n<a;n++)e=e>>>8^az[(e^t[n])&255];return -1^e},aW={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},aj={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:aY,_tr_stored_block:aK,_tr_flush_block:aG,_tr_tally:aq,_tr_align:aQ}=aM,{Z_NO_FLUSH:aJ,Z_PARTIAL_FLUSH:aX,Z_FULL_FLUSH:a$,Z_FINISH:a0,Z_BLOCK:a1,Z_OK:a2,Z_STREAM_END:a3,Z_STREAM_ERROR:a6,Z_DATA_ERROR:a5,Z_BUF_ERROR:a8,Z_DEFAULT_COMPRESSION:a4,Z_FILTERED:a9,Z_HUFFMAN_ONLY:a7,Z_RLE:ie,Z_FIXED:it,Z_DEFAULT_STRATEGY:ir,Z_UNKNOWN:ia,Z_DEFLATED:ii}=aj,is=573,io=(e,t)=>(e.msg=aW[t],t),il=e=>2*e-9*(e>4),ic=e=>{let t=e.length;for(;--t>=0;)e[t]=0},id=e=>{let t,n,r,a=e.w_size;r=t=e.hash_size;do n=e.head[--r],e.head[r]=n>=a?n-a:0;while(--t)r=t=a;do n=e.prev[--r],e.prev[r]=n>=a?n-a:0;while(--t)},iu=(e,t,n)=>(t<<e.hash_shift^n)&e.hash_mask,ih=e=>{let t=e.state,n=t.pending;n>e.avail_out&&(n=e.avail_out),0!==n&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+n),e.next_out),e.next_out+=n,t.pending_out+=n,e.total_out+=n,e.avail_out-=n,t.pending-=n,0===t.pending&&(t.pending_out=0))},ip=(e,t)=>{aG(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,ih(e.strm)},ig=(e,t)=>{e.pending_buf[e.pending++]=t},i_=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},im=(e,t,n,r)=>{let a=e.avail_in;return(a>r&&(a=r),0===a)?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),n),1===e.state.wrap?e.adler=aH(e.adler,t,a,n):2===e.state.wrap&&(e.adler=aZ(e.adler,t,a,n)),e.next_in+=a,e.total_in+=a,a)},iy=(e,t)=>{let n,r,a=e.max_chain_length,i=e.strstart,s=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,c=e.window,d=e.w_mask,u=e.prev,h=e.strstart+258,f=c[i+s-1],p=c[i+s];e.prev_length>=e.good_match&&(a>>=2),o>e.lookahead&&(o=e.lookahead);do{if(c[(n=t)+s]!==p||c[n+s-1]!==f||c[n]!==c[i]||c[++n]!==c[i+1])continue;i+=2,n++;do;while(c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&c[++i]===c[++n]&&i<h)if(r=258-(h-i),i=h-258,r>s){if(e.match_start=t,s=r,r>=o)break;f=c[i+s-1],p=c[i+s]}}while((t=u[t&d])>l&&0!=--a)return s<=e.lookahead?s:e.lookahead},ib=e=>{let t,n,r,a=e.w_size;do{if(n=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-262)&&(e.window.set(e.window.subarray(a,a+a-n),0),e.match_start-=a,e.strstart-=a,e.block_start-=a,e.insert>e.strstart&&(e.insert=e.strstart),id(e),n+=a),0===e.strm.avail_in)break;if(t=im(e.strm,e.window,e.strstart+e.lookahead,n),e.lookahead+=t,e.lookahead+e.insert>=3)for(r=e.strstart-e.insert,e.ins_h=e.window[r],e.ins_h=iu(e,e.ins_h,e.window[r+1]);e.insert&&(e.ins_h=iu(e,e.ins_h,e.window[r+3-1]),e.prev[r&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=r,r++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},iE=(e,t)=>{let n=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,r,a,i,s=0,o=e.strm.avail_in;do{if(r=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,r>(a=e.strstart-e.block_start)+e.strm.avail_in&&(r=a+e.strm.avail_in),r>i&&(r=i),r<n&&(0===r&&t!==a0||t===aJ||r!==a+e.strm.avail_in)))break;s=+(t===a0&&r===a+e.strm.avail_in),aK(e,0,0,s),e.pending_buf[e.pending-4]=r,e.pending_buf[e.pending-3]=r>>8,e.pending_buf[e.pending-2]=~r,e.pending_buf[e.pending-1]=~r>>8,ih(e.strm),a&&(a>r&&(a=r),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,r-=a),r&&(im(e.strm,e.strm.output,e.strm.next_out,r),e.strm.next_out+=r,e.strm.avail_out-=r,e.strm.total_out+=r)}while(0===s)return((o-=e.strm.avail_in)&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s)?4:t!==aJ&&t!==a0&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(im(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,n=(i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i)>e.w_size?e.w_size:i,((a=e.strstart-e.block_start)>=n||(a||t===a0)&&t!==aJ&&0===e.strm.avail_in&&a<=i)&&(r=a>i?i:a,s=+(t===a0&&0===e.strm.avail_in&&r===a),aK(e,e.block_start,r,s),e.block_start+=r,ih(e.strm)),s?3:1)},iv=(e,t)=>{let n,r;for(;;){if(e.lookahead<262){if(ib(e),e.lookahead<262&&t===aJ)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=iu(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==n&&e.strstart-n<=e.w_size-262&&(e.match_length=iy(e,n)),e.match_length>=3)if(r=aq(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=iu(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length)e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=iu(e,e.ins_h,e.window[e.strstart+1]);else r=aq(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(r&&(ip(e,!1),0===e.strm.avail_out))return 1}return(e.insert=e.strstart<2?e.strstart:2,t===a0)?(ip(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(ip(e,!1),0===e.strm.avail_out)?1:2},iw=(e,t)=>{let n,r,a;for(;;){if(e.lookahead<262){if(ib(e),e.lookahead<262&&t===aJ)return 1;if(0===e.lookahead)break}if(n=0,e.lookahead>=3&&(e.ins_h=iu(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==n&&e.prev_length<e.max_lazy_match&&e.strstart-n<=e.w_size-262&&(e.match_length=iy(e,n),e.match_length<=5&&(e.strategy===a9||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,r=aq(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=iu(e,e.ins_h,e.window[e.strstart+3-1]),n=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length)if(e.match_available=0,e.match_length=2,e.strstart++,r&&(ip(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((r=aq(e,0,e.window[e.strstart-1]))&&ip(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return(e.match_available&&(r=aq(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===a0)?(ip(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(ip(e,!1),0===e.strm.avail_out)?1:2};function iT(e,t,n,r,a){this.good_length=e,this.max_lazy=t,this.nice_length=n,this.max_chain=r,this.func=a}let iA=[new iT(0,0,0,0,iE),new iT(4,4,8,4,iv),new iT(4,5,16,8,iv),new iT(4,6,32,32,iv),new iT(4,4,16,16,iw),new iT(8,16,32,32,iw),new iT(8,16,128,128,iw),new iT(8,32,128,256,iw),new iT(32,128,258,1024,iw),new iT(32,258,258,4096,iw)];function iS(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=ii,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*is),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ic(this.dyn_ltree),ic(this.dyn_dtree),ic(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ic(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ic(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let ik=e=>{if(!e)return 1;let t=e.state;return t&&t.strm===e&&(42===t.status||57===t.status||69===t.status||73===t.status||91===t.status||103===t.status||113===t.status||666===t.status)?0:1};var ix={deflateInit2:(e,t,n,r,a,i)=>{if(!e)return a6;let s=1;if(t===a4&&(t=6),r<0?(s=0,r=-r):r>15&&(s=2,r-=16),a<1||a>9||n!==ii||r<8||r>15||t<0||t>9||i<0||i>it||8===r&&1!==s)return io(e,a6);8===r&&(r=9);let o=new iS;return e.state=o,o.strm=e,o.status=42,o.wrap=s,o.gzhead=null,o.w_bits=r,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=t,o.strategy=i,o.method=n,(e=>{let t=(e=>{if(ik(e))return io(e,a6);e.total_in=e.total_out=0,e.data_type=ia;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=+(2!==t.wrap),t.last_flush=-2,aY(t),a2})(e);return t===a2&&(e=>{e.window_size=2*e.w_size,ic(e.head),e.max_lazy_match=iA[e.level].max_lazy,e.good_match=iA[e.level].good_length,e.nice_match=iA[e.level].nice_length,e.max_chain_length=iA[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t})(e)},deflateSetHeader:(e,t)=>ik(e)||2!==e.state.wrap?a6:(e.state.gzhead=t,a2),deflate:(e,t)=>{if(ik(e)||t>a1||t<0)return e?io(e,a6):a6;let n=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===n.status&&t!==a0)return io(e,0===e.avail_out?a8:a6);let r=n.last_flush;if(n.last_flush=t,0!==n.pending){if(ih(e),0===e.avail_out)return n.last_flush=-1,a2}else if(0===e.avail_in&&il(t)<=il(r)&&t!==a0)return io(e,a8);if(666===n.status&&0!==e.avail_in)return io(e,a8);if(42===n.status&&0===n.wrap&&(n.status=113),42===n.status){let t=ii+(n.w_bits-8<<4)<<8;if(t|=(n.strategy>=a7||n.level<2?0:n.level<6?1:6===n.level?2:3)<<6,0!==n.strstart&&(t|=32),i_(n,t+=31-t%31),0!==n.strstart&&(i_(n,e.adler>>>16),i_(n,65535&e.adler)),e.adler=1,n.status=113,ih(e),0!==n.pending)return n.last_flush=-1,a2}if(57===n.status){if(e.adler=0,ig(n,31),ig(n,139),ig(n,8),n.gzhead)ig(n,+!!n.gzhead.text+2*!!n.gzhead.hcrc+4*!!n.gzhead.extra+8*!!n.gzhead.name+16*!!n.gzhead.comment),ig(n,255&n.gzhead.time),ig(n,n.gzhead.time>>8&255),ig(n,n.gzhead.time>>16&255),ig(n,n.gzhead.time>>24&255),ig(n,9===n.level?2:4*(n.strategy>=a7||n.level<2)),ig(n,255&n.gzhead.os),n.gzhead.extra&&n.gzhead.extra.length&&(ig(n,255&n.gzhead.extra.length),ig(n,n.gzhead.extra.length>>8&255)),n.gzhead.hcrc&&(e.adler=aZ(e.adler,n.pending_buf,n.pending,0)),n.gzindex=0,n.status=69;else if(ig(n,0),ig(n,0),ig(n,0),ig(n,0),ig(n,0),ig(n,9===n.level?2:4*(n.strategy>=a7||n.level<2)),ig(n,3),n.status=113,ih(e),0!==n.pending)return n.last_flush=-1,a2}if(69===n.status){if(n.gzhead.extra){let t=n.pending,r=(65535&n.gzhead.extra.length)-n.gzindex;for(;n.pending+r>n.pending_buf_size;){let a=n.pending_buf_size-n.pending;if(n.pending_buf.set(n.gzhead.extra.subarray(n.gzindex,n.gzindex+a),n.pending),n.pending=n.pending_buf_size,n.gzhead.hcrc&&n.pending>t&&(e.adler=aZ(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex+=a,ih(e),0!==n.pending)return n.last_flush=-1,a2;t=0,r-=a}let a=new Uint8Array(n.gzhead.extra);n.pending_buf.set(a.subarray(n.gzindex,n.gzindex+r),n.pending),n.pending+=r,n.gzhead.hcrc&&n.pending>t&&(e.adler=aZ(e.adler,n.pending_buf,n.pending-t,t)),n.gzindex=0}n.status=73}if(73===n.status){if(n.gzhead.name){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=aZ(e.adler,n.pending_buf,n.pending-r,r)),ih(e),0!==n.pending)return n.last_flush=-1,a2;r=0}t=n.gzindex<n.gzhead.name.length?255&n.gzhead.name.charCodeAt(n.gzindex++):0,ig(n,t)}while(0!==t)n.gzhead.hcrc&&n.pending>r&&(e.adler=aZ(e.adler,n.pending_buf,n.pending-r,r)),n.gzindex=0}n.status=91}if(91===n.status){if(n.gzhead.comment){let t,r=n.pending;do{if(n.pending===n.pending_buf_size){if(n.gzhead.hcrc&&n.pending>r&&(e.adler=aZ(e.adler,n.pending_buf,n.pending-r,r)),ih(e),0!==n.pending)return n.last_flush=-1,a2;r=0}t=n.gzindex<n.gzhead.comment.length?255&n.gzhead.comment.charCodeAt(n.gzindex++):0,ig(n,t)}while(0!==t)n.gzhead.hcrc&&n.pending>r&&(e.adler=aZ(e.adler,n.pending_buf,n.pending-r,r))}n.status=103}if(103===n.status){if(n.gzhead.hcrc){if(n.pending+2>n.pending_buf_size&&(ih(e),0!==n.pending))return n.last_flush=-1,a2;ig(n,255&e.adler),ig(n,e.adler>>8&255),e.adler=0}if(n.status=113,ih(e),0!==n.pending)return n.last_flush=-1,a2}if(0!==e.avail_in||0!==n.lookahead||t!==aJ&&666!==n.status){let r=0===n.level?iE(n,t):n.strategy===a7?((e,t)=>{let n;for(;;){if(0===e.lookahead&&(ib(e),0===e.lookahead)){if(t===aJ)return 1;break}if(e.match_length=0,n=aq(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,n&&(ip(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===a0)?(ip(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(ip(e,!1),0===e.strm.avail_out)?1:2})(n,t):n.strategy===ie?((e,t)=>{let n,r,a,i,s=e.window;for(;;){if(e.lookahead<=258){if(ib(e),e.lookahead<=258&&t===aJ)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(r=s[a=e.strstart-1])===s[++a]&&r===s[++a]&&r===s[++a]){i=e.strstart+258;do;while(r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&r===s[++a]&&a<i)e.match_length=258-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(n=aq(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(n=aq(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),n&&(ip(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===a0)?(ip(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(ip(e,!1),0===e.strm.avail_out)?1:2})(n,t):iA[n.level].func(n,t);if((3===r||4===r)&&(n.status=666),1===r||3===r)return 0===e.avail_out&&(n.last_flush=-1),a2;if(2===r&&(t===aX?aQ(n):t!==a1&&(aK(n,0,0,!1),t===a$&&(ic(n.head),0===n.lookahead&&(n.strstart=0,n.block_start=0,n.insert=0))),ih(e),0===e.avail_out))return n.last_flush=-1,a2}return t!==a0?a2:n.wrap<=0?a3:(2===n.wrap?(ig(n,255&e.adler),ig(n,e.adler>>8&255),ig(n,e.adler>>16&255),ig(n,e.adler>>24&255),ig(n,255&e.total_in),ig(n,e.total_in>>8&255),ig(n,e.total_in>>16&255),ig(n,e.total_in>>24&255)):(i_(n,e.adler>>>16),i_(n,65535&e.adler)),ih(e),n.wrap>0&&(n.wrap=-n.wrap),0!==n.pending?a2:a3)},deflateEnd:e=>{if(ik(e))return a6;let t=e.state.status;return e.state=null,113===t?io(e,a5):a2},deflateSetDictionary:(e,t)=>{let n=t.length;if(ik(e))return a6;let r=e.state,a=r.wrap;if(2===a||1===a&&42!==r.status||r.lookahead)return a6;if(1===a&&(e.adler=aH(e.adler,t,n,0)),r.wrap=0,n>=r.w_size){0===a&&(ic(r.head),r.strstart=0,r.block_start=0,r.insert=0);let e=new Uint8Array(r.w_size);e.set(t.subarray(n-r.w_size,n),0),t=e,n=r.w_size}let i=e.avail_in,s=e.next_in,o=e.input;for(e.avail_in=n,e.next_in=0,e.input=t,ib(r);r.lookahead>=3;){let e=r.strstart,t=r.lookahead-2;do r.ins_h=iu(r,r.ins_h,r.window[e+3-1]),r.prev[e&r.w_mask]=r.head[r.ins_h],r.head[r.ins_h]=e,e++;while(--t)r.strstart=e,r.lookahead=2,ib(r)}return r.strstart+=r.lookahead,r.block_start=r.strstart,r.insert=r.lookahead,r.lookahead=0,r.match_length=r.prev_length=2,r.match_available=0,e.next_in=s,e.input=o,e.avail_in=i,r.wrap=a,a2}};let iI=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var iN={assign:function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let n=t.shift();if(n){if("object"!=typeof n)throw TypeError(n+"must be non-object");for(let t in n)iI(n,t)&&(e[t]=n[t])}}return e},flattenChunks:e=>{let t=0;for(let n=0,r=e.length;n<r;n++)t+=e[n].length;let n=new Uint8Array(t);for(let t=0,r=0,a=e.length;t<a;t++){let a=e[t];n.set(a,r),r+=a.length}return n}};let iC=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){iC=!1}let iR=new Uint8Array(256);for(let e=0;e<256;e++)iR[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;iR[254]=iR[254]=1;var iO={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,n,r,a,i,s=e.length,o=0;for(a=0;a<s;a++)(64512&(n=e.charCodeAt(a)))==55296&&a+1<s&&(64512&(r=e.charCodeAt(a+1)))==56320&&(n=65536+(n-55296<<10)+(r-56320),a++),o+=n<128?1:n<2048?2:n<65536?3:4;for(i=0,t=new Uint8Array(o),a=0;i<o;a++)(64512&(n=e.charCodeAt(a)))==55296&&a+1<s&&(64512&(r=e.charCodeAt(a+1)))==56320&&(n=65536+(n-55296<<10)+(r-56320),a++),n<128?t[i++]=n:(n<2048?t[i++]=192|n>>>6:(n<65536?t[i++]=224|n>>>12:(t[i++]=240|n>>>18,t[i++]=128|n>>>12&63),t[i++]=128|n>>>6&63),t[i++]=128|63&n);return t},buf2string:(e,t)=>{let n,r,a=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let i=Array(2*a);for(r=0,n=0;n<a;){let t=e[n++];if(t<128){i[r++]=t;continue}let s=iR[t];if(s>4){i[r++]=65533,n+=s-1;continue}for(t&=2===s?31:3===s?15:7;s>1&&n<a;)t=t<<6|63&e[n++],s--;if(s>1){i[r++]=65533;continue}t<65536?i[r++]=t:(t-=65536,i[r++]=55296|t>>10&1023,i[r++]=56320|1023&t)}return((e,t)=>{if(t<65534&&e.subarray&&iC)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let n="";for(let r=0;r<t;r++)n+=String.fromCharCode(e[r]);return n})(i,r)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let n=t-1;for(;n>=0&&(192&e[n])==128;)n--;return n<0||0===n?t:n+iR[e[n]]>t?n:t}},iV=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};let iB=Object.prototype.toString,{Z_NO_FLUSH:iD,Z_SYNC_FLUSH:iU,Z_FULL_FLUSH:iF,Z_FINISH:iP,Z_OK:iL,Z_STREAM_END:iM,Z_DEFAULT_COMPRESSION:iH,Z_DEFAULT_STRATEGY:iz,Z_DEFLATED:iZ}=aj;function iW(e){this.options=iN.assign({level:iH,method:iZ,chunkSize:16384,windowBits:15,memLevel:8,strategy:iz},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new iV,this.strm.avail_out=0;let n=ix.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(n!==iL)throw Error(aW[n]);if(t.header&&ix.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?iO.string2buf(t.dictionary):"[object ArrayBuffer]"===iB.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(n=ix.deflateSetDictionary(this.strm,e))!==iL)throw Error(aW[n]);this._dict_set=!0}}function ij(e,t){let n=new iW(t);if(n.push(e,!0),n.err)throw n.msg||aW[n.err];return n.result}iW.prototype.push=function(e,t){let n,r,a=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(r=t===~~t?t:!0===t?iP:iD,"string"==typeof e?a.input=iO.string2buf(e):"[object ArrayBuffer]"===iB.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;){if(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),(r===iU||r===iF)&&a.avail_out<=6){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if((n=ix.deflate(a,r))===iM)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),n=ix.deflateEnd(this.strm),this.onEnd(n),this.ended=!0,n===iL;if(0===a.avail_out){this.onData(a.output);continue}if(r>0&&a.next_out>0){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if(0===a.avail_in)break}return!0},iW.prototype.onData=function(e){this.chunks.push(e)},iW.prototype.onEnd=function(e){e===iL&&(this.result=iN.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var iY=function(e,t){let n,r,a,i,s,o,l,c,d,u,h,f,p,g,_,m,y,b,E,v,w,T,A,S,k=e.state;n=e.next_in,A=e.input,r=n+(e.avail_in-5),a=e.next_out,S=e.output,i=a-(t-e.avail_out),s=a+(e.avail_out-257),o=k.dmax,l=k.wsize,c=k.whave,d=k.wnext,u=k.window,h=k.hold,f=k.bits,p=k.lencode,g=k.distcode,_=(1<<k.lenbits)-1,m=(1<<k.distbits)-1;e:do for(f<15&&(h+=A[n++]<<f,f+=8,h+=A[n++]<<f,f+=8),y=p[h&_];;){if(h>>>=b=y>>>24,f-=b,0==(b=y>>>16&255))S[a++]=65535&y;else if(16&b)for(E=65535&y,(b&=15)&&(f<b&&(h+=A[n++]<<f,f+=8),E+=h&(1<<b)-1,h>>>=b,f-=b),f<15&&(h+=A[n++]<<f,f+=8,h+=A[n++]<<f,f+=8),y=g[h&m];;){if(h>>>=b=y>>>24,f-=b,16&(b=y>>>16&255)){if(v=65535&y,f<(b&=15)&&(h+=A[n++]<<f,(f+=8)<b&&(h+=A[n++]<<f,f+=8)),(v+=h&(1<<b)-1)>o){e.msg="invalid distance too far back",k.mode=16209;break e}if(h>>>=b,f-=b,v>(b=a-i)){if((b=v-b)>c&&k.sane){e.msg="invalid distance too far back",k.mode=16209;break e}if(w=0,T=u,0===d){if(w+=l-b,b<E){E-=b;do S[a++]=u[w++];while(--b)w=a-v,T=S}}else if(d<b){if(w+=l+d-b,(b-=d)<E){E-=b;do S[a++]=u[w++];while(--b)if(w=0,d<E){E-=b=d;do S[a++]=u[w++];while(--b)w=a-v,T=S}}}else if(w+=d-b,b<E){E-=b;do S[a++]=u[w++];while(--b)w=a-v,T=S}for(;E>2;)S[a++]=T[w++],S[a++]=T[w++],S[a++]=T[w++],E-=3;E&&(S[a++]=T[w++],E>1&&(S[a++]=T[w++]))}else{w=a-v;do S[a++]=S[w++],S[a++]=S[w++],S[a++]=S[w++],E-=3;while(E>2)E&&(S[a++]=S[w++],E>1&&(S[a++]=S[w++]))}}else if((64&b)==0){y=g[(65535&y)+(h&(1<<b)-1)];continue}else{e.msg="invalid distance code",k.mode=16209;break e}break}else if((64&b)==0){y=p[(65535&y)+(h&(1<<b)-1)];continue}else if(32&b){k.mode=16191;break e}else{e.msg="invalid literal/length code",k.mode=16209;break e}break}while(n<r&&a<s)n-=E=f>>3,f-=E<<3,h&=(1<<f)-1,e.next_in=n,e.next_out=a,e.avail_in=n<r?5+(r-n):5-(n-r),e.avail_out=a<s?257+(s-a):257-(a-s),k.hold=h,k.bits=f};let iK=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),iG=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),iq=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),iQ=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var iJ=(e,t,n,r,a,i,s,o)=>{let l,c,d,u,h,f,p,g,_,m=o.bits,y=0,b=0,E=0,v=0,w=0,T=0,A=0,S=0,k=0,x=0,I=null,N=new Uint16Array(16),C=new Uint16Array(16),R=null;for(y=0;y<=15;y++)N[y]=0;for(b=0;b<r;b++)N[t[n+b]]++;for(v=15,w=m;v>=1&&0===N[v];v--);if(w>v&&(w=v),0===v)return a[i++]=0x1400000,a[i++]=0x1400000,o.bits=1,0;for(E=1;E<v&&0===N[E];E++);for(w<E&&(w=E),S=1,y=1;y<=15;y++)if(S<<=1,(S-=N[y])<0)return -1;if(S>0&&(0===e||1!==v))return -1;for(y=1,C[1]=0;y<15;y++)C[y+1]=C[y]+N[y];for(b=0;b<r;b++)0!==t[n+b]&&(s[C[t[n+b]]++]=b);if(0===e?(I=R=s,f=20):1===e?(I=iK,R=iG,f=257):(I=iq,R=iQ,f=0),x=0,b=0,y=E,h=i,T=w,A=0,d=-1,u=(k=1<<w)-1,1===e&&k>852||2===e&&k>592)return 1;for(;;){p=y-A,s[b]+1<f?(g=0,_=s[b]):s[b]>=f?(g=R[s[b]-f],_=I[s[b]-f]):(g=96,_=0),l=1<<y-A,E=c=1<<T;do a[h+(x>>A)+(c-=l)]=p<<24|g<<16|_;while(0!==c)for(l=1<<y-1;x&l;)l>>=1;if(0!==l?(x&=l-1,x+=l):x=0,b++,0==--N[y]){if(y===v)break;y=t[n+s[b]]}if(y>w&&(x&u)!==d){for(0===A&&(A=w),h+=E,S=1<<(T=y-A);T+A<v&&!((S-=N[T+A])<=0);)T++,S<<=1;if(k+=1<<T,1===e&&k>852||2===e&&k>592)return 1;a[d=x&u]=w<<24|T<<16|h-i}}return 0!==x&&(a[h+x]=y-A<<24|4194304),o.bits=w,0};let{Z_FINISH:iX,Z_BLOCK:i$,Z_TREES:i0,Z_OK:i1,Z_STREAM_END:i2,Z_NEED_DICT:i3,Z_STREAM_ERROR:i6,Z_DATA_ERROR:i5,Z_MEM_ERROR:i8,Z_BUF_ERROR:i4,Z_DEFLATED:i9}=aj,i7=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function se(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}let st=e=>{if(!e)return 1;let t=e.state;return+(!t||t.strm!==e||t.mode<16180||t.mode>16211)},sn=e=>{if(st(e))return i6;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,(e=>{if(st(e))return i6;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,i1})(e)},sr=!0,sa=e=>{if(sr){a=new Int32Array(512),i=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(iJ(1,e.lens,0,288,a,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;iJ(2,e.lens,0,32,i,0,e.work,{bits:5}),sr=!1}e.lencode=a,e.lenbits=9,e.distcode=i,e.distbits=5},si=(e,t,n,r)=>{let a,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),r>=i.wsize?(i.window.set(t.subarray(n-i.wsize,n),0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>r&&(a=r),i.window.set(t.subarray(n-r,n-r+a),i.wnext),(r-=a)?(i.window.set(t.subarray(n-r,n),0),i.wnext=r,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0};var ss={inflateReset:sn,inflateInit2:(e,t)=>{if(!e)return i6;let n=new se;e.state=n,n.strm=e,n.window=null,n.mode=16180;let r=((e,t)=>{let n;if(st(e))return i6;let r=e.state;return(t<0?(n=0,t=-t):(n=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15))?i6:(null!==r.window&&r.wbits!==t&&(r.window=null),r.wrap=n,r.wbits=t,sn(e))})(e,t);return r!==i1&&(e.state=null),r},inflate:(e,t)=>{let n,r,a,i,s,o,l,c,d,u,h,f,p,g,_,m,y,b,E,v,w,T,A,S,k=0,x=new Uint8Array(4),I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(st(e)||!e.output||!e.input&&0!==e.avail_in)return i6;16191===(n=e.state).mode&&(n.mode=16192),s=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,r=e.input,o=e.avail_in,c=n.hold,d=n.bits,u=o,h=l,T=i1;t:for(;;)switch(n.mode){case 16180:if(0===n.wrap){n.mode=16192;break}for(;d<16;){if(0===o)break t;o--,c+=r[i++]<<d,d+=8}if(2&n.wrap&&35615===c){0===n.wbits&&(n.wbits=15),n.check=0,x[0]=255&c,x[1]=c>>>8&255,n.check=aZ(n.check,x,2,0),c=0,d=0,n.mode=16181;break}if(n.head&&(n.head.done=!1),!(1&n.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",n.mode=16209;break}if((15&c)!==i9){e.msg="unknown compression method",n.mode=16209;break}if(c>>>=4,d-=4,w=(15&c)+8,0===n.wbits&&(n.wbits=w),w>15||w>n.wbits){e.msg="invalid window size",n.mode=16209;break}n.dmax=1<<n.wbits,n.flags=0,e.adler=n.check=1,n.mode=512&c?16189:16191,c=0,d=0;break;case 16181:for(;d<16;){if(0===o)break t;o--,c+=r[i++]<<d,d+=8}if(n.flags=c,(255&n.flags)!==i9){e.msg="unknown compression method",n.mode=16209;break}if(57344&n.flags){e.msg="unknown header flags set",n.mode=16209;break}n.head&&(n.head.text=c>>8&1),512&n.flags&&4&n.wrap&&(x[0]=255&c,x[1]=c>>>8&255,n.check=aZ(n.check,x,2,0)),c=0,d=0,n.mode=16182;case 16182:for(;d<32;){if(0===o)break t;o--,c+=r[i++]<<d,d+=8}n.head&&(n.head.time=c),512&n.flags&&4&n.wrap&&(x[0]=255&c,x[1]=c>>>8&255,x[2]=c>>>16&255,x[3]=c>>>24&255,n.check=aZ(n.check,x,4,0)),c=0,d=0,n.mode=16183;case 16183:for(;d<16;){if(0===o)break t;o--,c+=r[i++]<<d,d+=8}n.head&&(n.head.xflags=255&c,n.head.os=c>>8),512&n.flags&&4&n.wrap&&(x[0]=255&c,x[1]=c>>>8&255,n.check=aZ(n.check,x,2,0)),c=0,d=0,n.mode=16184;case 16184:if(1024&n.flags){for(;d<16;){if(0===o)break t;o--,c+=r[i++]<<d,d+=8}n.length=c,n.head&&(n.head.extra_len=c),512&n.flags&&4&n.wrap&&(x[0]=255&c,x[1]=c>>>8&255,n.check=aZ(n.check,x,2,0)),c=0,d=0}else n.head&&(n.head.extra=null);n.mode=16185;case 16185:if(1024&n.flags&&((f=n.length)>o&&(f=o),f&&(n.head&&(w=n.head.extra_len-n.length,n.head.extra||(n.head.extra=new Uint8Array(n.head.extra_len)),n.head.extra.set(r.subarray(i,i+f),w)),512&n.flags&&4&n.wrap&&(n.check=aZ(n.check,r,f,i)),o-=f,i+=f,n.length-=f),n.length))break t;n.length=0,n.mode=16186;case 16186:if(2048&n.flags){if(0===o)break t;f=0;do w=r[i+f++],n.head&&w&&n.length<65536&&(n.head.name+=String.fromCharCode(w));while(w&&f<o)if(512&n.flags&&4&n.wrap&&(n.check=aZ(n.check,r,f,i)),o-=f,i+=f,w)break t}else n.head&&(n.head.name=null);n.length=0,n.mode=16187;case 16187:if(4096&n.flags){if(0===o)break t;f=0;do w=r[i+f++],n.head&&w&&n.length<65536&&(n.head.comment+=String.fromCharCode(w));while(w&&f<o)if(512&n.flags&&4&n.wrap&&(n.check=aZ(n.check,r,f,i)),o-=f,i+=f,w)break t}else n.head&&(n.head.comment=null);n.mode=16188;case 16188:if(512&n.flags){for(;d<16;){if(0===o)break t;o--,c+=r[i++]<<d,d+=8}if(4&n.wrap&&c!==(65535&n.check)){e.msg="header crc mismatch",n.mode=16209;break}c=0,d=0}n.head&&(n.head.hcrc=n.flags>>9&1,n.head.done=!0),e.adler=n.check=0,n.mode=16191;break;case 16189:for(;d<32;){if(0===o)break t;o--,c+=r[i++]<<d,d+=8}e.adler=n.check=i7(c),c=0,d=0,n.mode=16190;case 16190:if(0===n.havedict)return e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,n.hold=c,n.bits=d,i3;e.adler=n.check=1,n.mode=16191;case 16191:if(t===i$||t===i0)break t;case 16192:if(n.last){c>>>=7&d,d-=7&d,n.mode=16206;break}for(;d<3;){if(0===o)break t;o--,c+=r[i++]<<d,d+=8}switch(n.last=1&c,d-=1,3&(c>>>=1)){case 0:n.mode=16193;break;case 1:if(sa(n),n.mode=16199,t===i0){c>>>=2,d-=2;break t}break;case 2:n.mode=16196;break;case 3:e.msg="invalid block type",n.mode=16209}c>>>=2,d-=2;break;case 16193:for(c>>>=7&d,d-=7&d;d<32;){if(0===o)break t;o--,c+=r[i++]<<d,d+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",n.mode=16209;break}if(n.length=65535&c,c=0,d=0,n.mode=16194,t===i0)break t;case 16194:n.mode=16195;case 16195:if(f=n.length){if(f>o&&(f=o),f>l&&(f=l),0===f)break t;a.set(r.subarray(i,i+f),s),o-=f,i+=f,l-=f,s+=f,n.length-=f;break}n.mode=16191;break;case 16196:for(;d<14;){if(0===o)break t;o--,c+=r[i++]<<d,d+=8}if(n.nlen=(31&c)+257,d-=5,n.ndist=(31&(c>>>=5))+1,d-=5,n.ncode=(15&(c>>>=5))+4,c>>>=4,d-=4,n.nlen>286||n.ndist>30){e.msg="too many length or distance symbols",n.mode=16209;break}n.have=0,n.mode=16197;case 16197:for(;n.have<n.ncode;){for(;d<3;){if(0===o)break t;o--,c+=r[i++]<<d,d+=8}n.lens[I[n.have++]]=7&c,c>>>=3,d-=3}for(;n.have<19;)n.lens[I[n.have++]]=0;if(n.lencode=n.lendyn,n.lenbits=7,A={bits:n.lenbits},T=iJ(0,n.lens,0,19,n.lencode,0,n.work,A),n.lenbits=A.bits,T){e.msg="invalid code lengths set",n.mode=16209;break}n.have=0,n.mode=16198;case 16198:for(;n.have<n.nlen+n.ndist;){for(;_=(k=n.lencode[c&(1<<n.lenbits)-1])>>>24,m=k>>>16&255,y=65535&k,!(_<=d);){if(0===o)break t;o--,c+=r[i++]<<d,d+=8}if(y<16)c>>>=_,d-=_,n.lens[n.have++]=y;else{if(16===y){for(S=_+2;d<S;){if(0===o)break t;o--,c+=r[i++]<<d,d+=8}if(c>>>=_,d-=_,0===n.have){e.msg="invalid bit length repeat",n.mode=16209;break}w=n.lens[n.have-1],f=3+(3&c),c>>>=2,d-=2}else if(17===y){for(S=_+3;d<S;){if(0===o)break t;o--,c+=r[i++]<<d,d+=8}c>>>=_,d-=_,w=0,f=3+(7&c),c>>>=3,d-=3}else{for(S=_+7;d<S;){if(0===o)break t;o--,c+=r[i++]<<d,d+=8}c>>>=_,d-=_,w=0,f=11+(127&c),c>>>=7,d-=7}if(n.have+f>n.nlen+n.ndist){e.msg="invalid bit length repeat",n.mode=16209;break}for(;f--;)n.lens[n.have++]=w}}if(16209===n.mode)break;if(0===n.lens[256]){e.msg="invalid code -- missing end-of-block",n.mode=16209;break}if(n.lenbits=9,A={bits:n.lenbits},T=iJ(1,n.lens,0,n.nlen,n.lencode,0,n.work,A),n.lenbits=A.bits,T){e.msg="invalid literal/lengths set",n.mode=16209;break}if(n.distbits=6,n.distcode=n.distdyn,A={bits:n.distbits},T=iJ(2,n.lens,n.nlen,n.ndist,n.distcode,0,n.work,A),n.distbits=A.bits,T){e.msg="invalid distances set",n.mode=16209;break}if(n.mode=16199,t===i0)break t;case 16199:n.mode=16200;case 16200:if(o>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,n.hold=c,n.bits=d,iY(e,h),s=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,r=e.input,o=e.avail_in,c=n.hold,d=n.bits,16191===n.mode&&(n.back=-1);break}for(n.back=0;_=(k=n.lencode[c&(1<<n.lenbits)-1])>>>24,m=k>>>16&255,y=65535&k,!(_<=d);){if(0===o)break t;o--,c+=r[i++]<<d,d+=8}if(m&&(240&m)==0){for(b=_,E=m,v=y;_=(k=n.lencode[v+((c&(1<<b+E)-1)>>b)])>>>24,m=k>>>16&255,y=65535&k,!(b+_<=d);){if(0===o)break t;o--,c+=r[i++]<<d,d+=8}c>>>=b,d-=b,n.back+=b}if(c>>>=_,d-=_,n.back+=_,n.length=y,0===m){n.mode=16205;break}if(32&m){n.back=-1,n.mode=16191;break}if(64&m){e.msg="invalid literal/length code",n.mode=16209;break}n.extra=15&m,n.mode=16201;case 16201:if(n.extra){for(S=n.extra;d<S;){if(0===o)break t;o--,c+=r[i++]<<d,d+=8}n.length+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}n.was=n.length,n.mode=16202;case 16202:for(;_=(k=n.distcode[c&(1<<n.distbits)-1])>>>24,m=k>>>16&255,y=65535&k,!(_<=d);){if(0===o)break t;o--,c+=r[i++]<<d,d+=8}if((240&m)==0){for(b=_,E=m,v=y;_=(k=n.distcode[v+((c&(1<<b+E)-1)>>b)])>>>24,m=k>>>16&255,y=65535&k,!(b+_<=d);){if(0===o)break t;o--,c+=r[i++]<<d,d+=8}c>>>=b,d-=b,n.back+=b}if(c>>>=_,d-=_,n.back+=_,64&m){e.msg="invalid distance code",n.mode=16209;break}n.offset=y,n.extra=15&m,n.mode=16203;case 16203:if(n.extra){for(S=n.extra;d<S;){if(0===o)break t;o--,c+=r[i++]<<d,d+=8}n.offset+=c&(1<<n.extra)-1,c>>>=n.extra,d-=n.extra,n.back+=n.extra}if(n.offset>n.dmax){e.msg="invalid distance too far back",n.mode=16209;break}n.mode=16204;case 16204:if(0===l)break t;if(f=h-l,n.offset>f){if((f=n.offset-f)>n.whave&&n.sane){e.msg="invalid distance too far back",n.mode=16209;break}f>n.wnext?(f-=n.wnext,p=n.wsize-f):p=n.wnext-f,f>n.length&&(f=n.length),g=n.window}else g=a,p=s-n.offset,f=n.length;f>l&&(f=l),l-=f,n.length-=f;do a[s++]=g[p++];while(--f)0===n.length&&(n.mode=16200);break;case 16205:if(0===l)break t;a[s++]=n.length,l--,n.mode=16200;break;case 16206:if(n.wrap){for(;d<32;){if(0===o)break t;o--,c|=r[i++]<<d,d+=8}if(h-=l,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?aZ(n.check,a,h,s-h):aH(n.check,a,h,s-h)),h=l,4&n.wrap&&(n.flags?c:i7(c))!==n.check){e.msg="incorrect data check",n.mode=16209;break}c=0,d=0}n.mode=16207;case 16207:if(n.wrap&&n.flags){for(;d<32;){if(0===o)break t;o--,c+=r[i++]<<d,d+=8}if(4&n.wrap&&c!==(0|n.total)){e.msg="incorrect length check",n.mode=16209;break}c=0,d=0}n.mode=16208;case 16208:T=i2;break t;case 16209:T=i5;break t;case 16210:return i8;default:return i6}return e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,n.hold=c,n.bits=d,(n.wsize||h!==e.avail_out&&n.mode<16209&&(n.mode<16206||t!==iX))&&si(e,e.output,e.next_out,h-e.avail_out),u-=e.avail_in,h-=e.avail_out,e.total_in+=u,e.total_out+=h,n.total+=h,4&n.wrap&&h&&(e.adler=n.check=n.flags?aZ(n.check,a,h,e.next_out-h):aH(n.check,a,h,e.next_out-h)),e.data_type=n.bits+64*!!n.last+128*(16191===n.mode)+256*(16199===n.mode||16194===n.mode),(0===u&&0===h||t===iX)&&T===i1&&(T=i4),T},inflateEnd:e=>{if(st(e))return i6;let t=e.state;return t.window&&(t.window=null),e.state=null,i1},inflateGetHeader:(e,t)=>{if(st(e))return i6;let n=e.state;return(2&n.wrap)==0?i6:(n.head=t,t.done=!1,i1)},inflateSetDictionary:(e,t)=>{let n,r=t.length;return st(e)||0!==(n=e.state).wrap&&16190!==n.mode?i6:16190===n.mode&&aH(1,t,r,0)!==n.check?i5:si(e,t,r,r)?(n.mode=16210,i8):(n.havedict=1,i1)}},so=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};let sl=Object.prototype.toString,{Z_NO_FLUSH:sc,Z_FINISH:sd,Z_OK:su,Z_STREAM_END:sh,Z_NEED_DICT:sf,Z_STREAM_ERROR:sp,Z_DATA_ERROR:sg,Z_MEM_ERROR:s_}=aj;function sm(e){this.options=iN.assign({chunkSize:65536,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits)==0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new iV,this.strm.avail_out=0;let n=ss.inflateInit2(this.strm,t.windowBits);if(n!==su||(this.header=new so,ss.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=iO.string2buf(t.dictionary):"[object ArrayBuffer]"===sl.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw)&&(n=ss.inflateSetDictionary(this.strm,t.dictionary))!==su))throw Error(aW[n])}function sy(e,t){let n=new sm(t);if(n.push(e),n.err)throw n.msg||aW[n.err];return n.result}sm.prototype.push=function(e,t){let n,r,a,i=this.strm,s=this.options.chunkSize,o=this.options.dictionary;if(this.ended)return!1;for(r=t===~~t?t:!0===t?sd:sc,"[object ArrayBuffer]"===sl.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(s),i.next_out=0,i.avail_out=s),(n=ss.inflate(i,r))===sf&&o&&((n=ss.inflateSetDictionary(i,o))===su?n=ss.inflate(i,r):n===sg&&(n=sf));i.avail_in>0&&n===sh&&i.state.wrap>0&&0!==e[i.next_in];)ss.inflateReset(i),n=ss.inflate(i,r);switch(n){case sp:case sg:case sf:case s_:return this.onEnd(n),this.ended=!0,!1}if(a=i.avail_out,i.next_out&&(0===i.avail_out||n===sh))if("string"===this.options.to){let e=iO.utf8border(i.output,i.next_out),t=i.next_out-e,n=iO.buf2string(i.output,e);i.next_out=t,i.avail_out=s-t,t&&i.output.set(i.output.subarray(e,e+t),0),this.onData(n)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(n!==su||0!==a){if(n===sh)return n=ss.inflateEnd(this.strm),this.onEnd(n),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},sm.prototype.onData=function(e){this.chunks.push(e)},sm.prototype.onEnd=function(e){e===su&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=iN.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};let{Deflate:sb,deflate:sE,deflateRaw:sv,gzip:sw}={Deflate:iW,deflate:ij,deflateRaw:function(e,t){return(t=t||{}).raw=!0,ij(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,ij(e,t)},constants:aj},{Inflate:sT,inflate:sA,inflateRaw:sS,ungzip:sk}={Inflate:sm,inflate:sy,inflateRaw:function(e,t){return(t=t||{}).raw=!0,sy(e,t)},ungzip:sy,constants:aj},sx=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),sI=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),sN=BigInt(1),sC=BigInt(2),sR=(e,t)=>(e+t/sC)/t,sO=n3(sx,void 0,void 0,{sqrt:function(e){let t=BigInt(3),n=BigInt(6),r=BigInt(11),a=BigInt(22),i=BigInt(23),s=BigInt(44),o=BigInt(88),l=e*e*e%sx,c=l*l*e%sx,d=nJ(c,t,sx)*c%sx,u=nJ(d,t,sx)*c%sx,h=nJ(u,sC,sx)*l%sx,f=nJ(h,r,sx)*h%sx,p=nJ(f,a,sx)*f%sx,g=nJ(p,s,sx)*p%sx,_=nJ(g,o,sx)*g%sx,m=nJ(_,s,sx)*p%sx,y=nJ(m,t,sx)*c%sx,b=nJ(y,i,sx)*f%sx,E=nJ(b,n,sx)*l%sx,v=nJ(E,sC,sx);if(!sO.eql(sO.sqr(v),e))throw Error("Cannot find square root");return v}}),sV=function(e,t){let n=t=>rb({...e,...rA(t)});return Object.freeze({...n(t),create:n})}({a:BigInt(0),b:BigInt(7),Fp:sO,n:sI,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),n=-sN*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),r=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=BigInt("0x100000000000000000000000000000000"),i=sR(t*e,sI),s=sR(-n*e,sI),o=nQ(e-i*t-s*r,sI),l=nQ(-i*n-s*t,sI),c=o>a,d=l>a;if(c&&(o=sI-o),d&&(l=sI-l),o>a||l>a)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:o,k2neg:d,k2:l}}}},nS),sB=(BigInt(0),{});sV.ProjectivePoint;let sD=function(e,t){let n=t.map(e=>Array.from(e).reverse());return(t,r)=>{let[a,i,s,o]=n.map(n=>n.reduce((n,r)=>e.add(e.mul(n,t),r)));return t=e.div(a,i),r=e.mul(r,e.div(s,o)),{x:t,y:r}}}(sO,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e)))),sU=rv(sO,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:sO.create(BigInt("-11"))});!function(e,t,n){if("function"!=typeof t)throw Error("mapToCurve() must be defined")}(sV.ProjectivePoint,e=>{let{x:t,y:n}=sU(sO.create(e[0]));return sD(t,n)},sO.ORDER);var sF=e.i(451837),sP=Object.defineProperty,sL=Object.getOwnPropertyDescriptor,sM=Object.getOwnPropertyNames,sH=Object.prototype.hasOwnProperty,sz=(e,t)=>{for(var n in t)sP(e,n,{get:t[n],enumerable:!0})},sZ=(e,t,n,r)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of sM(t))sH.call(e,a)||a===n||sP(e,a,{get:()=>t[a],enumerable:!(r=sL(t,a))||r.enumerable});return e};sz({},{ADDR_BOUND:()=>oa,API_VERSION:()=>ot,BaseUrl:()=>og,DEFAULT_GLOBAL_CONFIG:()=>oE,HARDENING_4BYTES:()=>op,HARDENING_BYTE:()=>of,IS_BROWSER:()=>sY,MASK_250:()=>s7,MASK_31:()=>oe,MAX_STORAGE_ITEM_SIZE:()=>or,NetworkName:()=>o_,OutsideExecutionCallerAny:()=>od,PAYMASTER_RPC_NODES:()=>ow,PRIME:()=>on,RANGE_FELT:()=>os,RANGE_I128:()=>oo,RANGE_U128:()=>ol,RPC_DEFAULT_NODES:()=>ov,SNIP9_V1_INTERFACE_ID:()=>ou,SNIP9_V2_INTERFACE_ID:()=>oh,SYSTEM_MESSAGES:()=>oT,StarknetChainId:()=>om,SupportedRpcVersion:()=>ob,TEXT_TO_FELT_MAX_LEN:()=>s8,TRANSACTION_VERSION:()=>s4,TransactionHashPrefix:()=>oy,UDC:()=>oc,ZERO:()=>s9});var sW={};sz(sW,{JRPC:()=>sj,PAYMASTER_API:()=>ew,RPCSPEC07:()=>B,RPCSPEC08:()=>ek});var sj={};((e,t,n)=>(sZ(e,t,"default"),n&&sZ(n,t,"default")))(sW,ek),sz({},{IS_BROWSER:()=>sY,addHexPrefix:()=>s$,arrayBufferToString:()=>sK,atobUniversal:()=>sq,btoaUniversal:()=>sQ,buf2hex:()=>sJ,calcByteLength:()=>s1,concatenateArrayBuffer:()=>s5,padLeft:()=>s0,pascalToSnake:()=>s6,removeHexPrefix:()=>sX,sanitizeBytes:()=>s2,sanitizeHex:()=>s3,utf8ToArray:()=>sG});var sY="undefined"!=typeof window;function sK(e){return new Uint8Array(e).reduce((e,t)=>e+String.fromCharCode(t),"")}function sG(e){return new TextEncoder().encode(e)}function sq(e){return ez.decode(e)}function sQ(e){return ez.encode(new Uint8Array(e))}function sJ(e){return e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}function sX(e){return e.replace(/^0x/i,"")}function s$(e){return"0x".concat(sX(e))}function s0(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return function(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0",a=t-e.length,i=e;if(a>0){let t=r.repeat(a);i=n?t+e:e+t}return i}(e,t,!0,n)}function s1(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,{length:n}=e,r=n%t;return r?(n-r)/t*t+t:n}function s2(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return s0(e,s1(e,t),n)}function s3(e){let t=s2(sX(e),2);return t?s$(t):t}var s6=e=>/[a-z]/.test(e)?e.split(/(?=[A-Z])/).join("_").toUpperCase():e;function s5(e){let t=new Uint8Array(e.reduce((e,t)=>e+t.byteLength,0)),n=0;return e.forEach(e=>{t.set(e,n),n+=e.byteLength}),t}var s8=31,{ETransactionVersion:s4}=ek,s9=0n,s7=2n**250n-1n,oe=2n**31n-1n,ot=s9,on=2n**251n+17n*2n**192n+1n,or=256n,oa=2n**251n-or,oi=(e,t)=>({min:e,max:t}),os=oi(s9,on-1n),oo=oi(-(2n**127n),2n**127n-1n),ol=oi(s9,2n**128n-1n),oc={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},od="0x414e595f43414c4c4552",ou="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",oh="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",of=128,op=2147483648n,og={SN_MAIN:"https://alpha-mainnet.starknet.io",SN_SEPOLIA:"https://alpha-sepolia.starknet.io"},o_={SN_MAIN:"SN_MAIN",SN_SEPOLIA:"SN_SEPOLIA"},om={SN_MAIN:"0x534e5f4d41494e",SN_SEPOLIA:"0x534e5f5345504f4c4941"},oy={DECLARE:"0x6465636c617265",DEPLOY:"0x6465706c6f79",DEPLOY_ACCOUNT:"0x6465706c6f795f6163636f756e74",INVOKE:"0x696e766f6b65",L1_HANDLER:"0x6c315f68616e646c6572"},ob={"0.7.1":"0.7.1","0.8.1":"0.8.1",v0_7_1:"0.7.1",v0_8_1:"0.8.1"},oE={legacyMode:!1,rpcVersion:"0.8.1",transactionVersion:sW.ETransactionVersion.V3,logLevel:"INFO",feeMarginPercentage:{bounds:{l1_gas:{max_amount:50,max_price_per_unit:50},l1_data_gas:{max_amount:50,max_price_per_unit:50},l2_gas:{max_amount:50,max_price_per_unit:50}},maxFee:50},fetch:void 0,websocket:void 0},ov={SN_MAIN:["https://starknet-mainnet.public.blastapi.io/rpc/"],SN_SEPOLIA:["https://starknet-sepolia.public.blastapi.io/rpc/"]},ow={SN_MAIN:["https://starknet.paymaster.avnu.fi"],SN_SEPOLIA:["https://sepolia.paymaster.avnu.fi"]},oT={legacyTxWarningMessage:"You are using a deprecated transaction version (V0,V1,V2)!\nUpdate to the latest V3 transactions!",legacyTxRPC08Message:"RPC 0.8 do not support legacy transactions",SWOldV3:"RPC 0.7 V3 tx (improper resource bounds) not supported in RPC 0.8",channelVersionMismatch:"Channel specification version is not compatible with the connected node Specification Version",unsupportedSpecVersion:"The connected node specification version is not supported by this library",maxFeeInV3:"maxFee is not supported in V3 transactions, use resourceBounds instead"},oA=(o=class e{initialize(){this.config={...oE}}static getInstance(){return e.instance||(e.instance=new e),e.instance}get(e,t){var n;return null!=(n=this.config[e])?n:t}set(e,t){this.config[e]=t}update(e){this.config={...this.config,...e}}getAll(){return{...this.config}}reset(){this.initialize()}delete(e){delete this.config[e]}hasKey(e){return e in this.config}constructor(){(0,h._)(this,"config",void 0),this.initialize()}},(0,h._)(o,"instance",void 0),o).getInstance(),oS={DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,OFF:0},ok=(l=class e{static getInstance(){return e.instance||(e.instance=new e),e.instance}getTimestamp(){return new Date().toISOString()}shouldLog(e){return e<=oS[this.config.get("logLevel","INFO")]}formatMessage(e){let{level:t,message:n,timestamp:r,data:a}=e,i="[".concat(r,"] ").concat(t,": ").concat(n);if(a)try{i+="\n".concat(JSON.stringify(a,null,2))}catch(e){i+="\n[JSON.stringify Error/Circular]: ".concat(e)}return i}log(e,t,n){if(!this.shouldLog(oS[e]))return;let r={level:e,message:t,timestamp:this.getTimestamp(),data:n},a=this.formatMessage(r);switch(e){case"DEBUG":console.debug(a);break;case"INFO":console.info(a);break;case"WARN":console.warn(a);break;case"ERROR":case"FATAL":console.error(a);break;case"OFF":break;default:console.log(a)}}debug(e,t){this.log("DEBUG",e,t)}info(e,t){this.log("INFO",e,t)}warn(e,t){this.log("WARN",e,t)}error(e,t){this.log("ERROR",e,t)}fatal(e,t){this.log("FATAL",e,t)}setLogLevel(e){this.config.set("logLevel",e)}getLogLevel(){return this.config.get("logLevel","INFO")}getEnabledLogLevels(){return Object.keys(oS).filter(e=>this.shouldLog(oS[e])&&"OFF"!==e)}constructor(){(0,h._)(this,"config",void 0),this.config=oA}},(0,h._)(l,"instance",void 0),l).getInstance(),ox={};sz(ox,{RpcChannel:()=>d5}),sz({},{BlockStatus:()=>oO,BlockTag:()=>oV,EDAMode:()=>oP,EDataAvailabilityMode:()=>oF,ETH_ADDRESS:()=>oY,ETransactionExecutionStatus:()=>oz,ETransactionStatus:()=>oH,ETransactionVersion:()=>oB,ETransactionVersion2:()=>oD,ETransactionVersion3:()=>oU,EntryPointType:()=>oI,Literal:()=>oj,NON_ZERO_PREFIX:()=>oK,OutsideExecutionTypesV1:()=>oG,OutsideExecutionTypesV2:()=>oq,OutsideExecutionVersion:()=>oQ,RPC:()=>sW,TransactionExecutionStatus:()=>oR,TransactionFinalityStatus:()=>oC,TransactionType:()=>oN,TypedDataRevision:()=>C,Uint:()=>oW,ValidateType:()=>oZ,isRPC08_FeeEstimate:()=>oL,isRPC08_ResourceBounds:()=>oM});var oI={EXTERNAL:"EXTERNAL",L1_HANDLER:"L1_HANDLER",CONSTRUCTOR:"CONSTRUCTOR"},oN={DECLARE:"DECLARE",DEPLOY:"DEPLOY",DEPLOY_ACCOUNT:"DEPLOY_ACCOUNT",INVOKE:"INVOKE_FUNCTION"},oC={NOT_RECEIVED:"NOT_RECEIVED",RECEIVED:"RECEIVED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},oR={REJECTED:"REJECTED",REVERTED:"REVERTED",SUCCEEDED:"SUCCEEDED"},oO={PENDING:"PENDING",ACCEPTED_ON_L1:"ACCEPTED_ON_L1",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",REJECTED:"REJECTED"},oV={PENDING:"pending",LATEST:"latest"},{ETransactionVersion:oB}=ek,{ETransactionVersion2:oD}=ek,{ETransactionVersion3:oU}=ek,{EDataAvailabilityMode:oF}=ek,{EDAMode:oP}=ek;function oL(e){return"l1_data_gas_consumed"in e}function oM(e){return"l1_data_gas"in e}var{ETransactionStatus:oH}=ek,{ETransactionExecutionStatus:oz}=ek,oZ={DEPLOY:"DEPLOY",CALL:"CALL",INVOKE:"INVOKE"},oW={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},oj={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},oY="core::starknet::eth_address::EthAddress",oK="core::zeroable::NonZero::",oG={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},oq={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]},oQ={UNSUPPORTED:"0",V1:"1",V2:"2"};sz({},{parse:()=>oX,parseAlwaysAsBig:()=>o$,stringify:()=>o0});var oJ=e=>{if(!ej(e))return parseFloat(e);let t=parseInt(e,10);return Number.isSafeInteger(t)?t:BigInt(e)},oX=e=>e7(String(e),void 0,oJ),o$=e=>e7(String(e),void 0,e9),o0=(e,t,n,r)=>tC(e,t,n,r),o1=class{async wait(){return this.delayPromise&&this.delayPromiseResolve||(this.delayPromise=new Promise(e=>{this.delayPromiseResolve=e})),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout(()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)},this.interval),this.delayPromise}addPendingRequest(e,t,n){let r={id:null!=n?n:"batched_".concat(this.requestId+=1),jsonrpc:"2.0",method:e,params:null!=t?t:void 0};return this.pendingRequests[r.id]=r,r.id}async sendBatch(e){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:o0(e),headers:this.headers})).json()}async fetch(e,t,n){let r=this.addPendingRequest(e,t,n);await this.wait();let a=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[r]){let e=this.sendBatch(Object.values(a));Object.keys(a).forEach(t=>{this.batchPromises[t]=e})}let i=await this.batchPromises[r];delete this.batchPromises[r];let s=i.find(e=>e.id===r);if(!s)throw Error("Couldn't find the result for the request. Method: ".concat(e));return s}constructor(e){(0,h._)(this,"nodeUrl",void 0),(0,h._)(this,"headers",void 0),(0,h._)(this,"interval",void 0),(0,h._)(this,"requestId",0),(0,h._)(this,"pendingRequests",{}),(0,h._)(this,"batchPromises",{}),(0,h._)(this,"delayTimer",void 0),(0,h._)(this,"delayPromise",void 0),(0,h._)(this,"delayPromiseResolve",void 0),(0,h._)(this,"baseFetch",void 0),this.nodeUrl=e.nodeUrl,this.headers=e.headers,this.interval=e.interval,this.baseFetch=e.baseFetch}};function o2(e,t){if(!e)throw Error(t||"Assertion failure")}function o3(e,t){if(!e)if(0===t.length)t();else throw Error("AssertionX failure: message function should not require arguments")}var o6={};sz(o6,{addPercent:()=>lb,assertInRange:()=>ld,bigNumberishArrayToDecimalStringArray:()=>lu,bigNumberishArrayToHexadecimalStringArray:()=>lh,cleanHex:()=>lc,getDecimalString:()=>lp,getHexString:()=>lg,getHexStringArray:()=>l_,hexToBytes:()=>ly,hexToDecimalString:()=>ll,isBigNumberish:()=>lv,isHex:()=>lt,isStringWholeNumber:()=>lf,stringToSha256ToArrayBuff4:()=>lE,toBigInt:()=>ln,toCairoBool:()=>lm,toHex:()=>la,toHex64:()=>lo,toHexString:()=>li,toStorageKey:()=>ls,tryToBigInt:()=>lr});var o5=e=>void 0===e||void 0===e;function o8(e){return"number"==typeof e}function o4(e){return"boolean"==typeof e}function o9(e){return"bigint"==typeof e}function o7(e){return"string"==typeof e}function le(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function lt(e){return/^0x[0-9a-f]*$/i.test(e)}function ln(e){return BigInt(e)}function lr(e){return e?BigInt(e):void 0}function la(e){return s$(ln(e).toString(16))}var li=la;function ls(e){return s$(ln(e).toString(16).padStart(64,"0"))}function lo(e){let t=s$(ln(e).toString(16).padStart(64,"0"));if(66!==t.length)throw TypeError("number is too big for hex 0x(64) representation");return t}function ll(e){return BigInt(s$(e)).toString(10)}function lc(e){return e.toLowerCase().replace(/^(0x)0+/,"$1")}function ld(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=BigInt(e),i=BigInt(t),s=BigInt(n);o2(a>=i&&a<=s,"Message not signable, ".concat(""===r?"invalid length":"invalid ".concat(r," length"),"."))}function lu(e){return e.map(e=>ln(e).toString(10))}function lh(e){return e.map(e=>la(e))}function lf(e){return/^\d+$/.test(e)}function lp(e){if(lt(e))return ll(e);if(lf(e))return e;throw Error("".concat(e," needs to be a hex-string or whole-number-string"))}function lg(e){if(lt(e))return e;if(lf(e))return li(e);throw Error("".concat(e," needs to be a hex-string or whole-number-string"))}function l_(e){return e.map(lg)}function lm(e){return(+e).toString()}function ly(e){if(!lt(e))throw Error("".concat(e," needs to be a hex-string"));let t=sX(e);return t.length%2!=0&&(t="0".concat(t)),tZ(t)}function lb(e,t){let n=BigInt(e);return n+n*BigInt(t)/100n}function lE(e){return ly(la(Number(BigInt(s$(sJ(nS(e))))&oe)))}function lv(e){return o8(e)||o9(e)||o7(e)&&(lt(e)||lf(e))}function lw(e){let t=sX(la(BigInt(e)));return s$(r5(ly(s$(t.length%2==0?t:"0".concat(t)))).toString(16))}function lT(e){return BigInt(s$(r5(sG(e)).toString(16)))&s7}function lA(e){return la(lT(e))}function lS(e){return o8(e)||o9(e)?la(e):lt(e)?e:lf(e)?la(e):lA(e)}function lk(e){let t=s$(e.reduce((e,t)=>e+sX(la(t)).padStart(64,"0"),""));return s$(tP(nz(ly(t))))}function lx(e,t,n,r,a){return lk([e,t,a,n,r.length,...r])}function lI(e,t,n){return lk([e,t,n.length,...n])}function lN(e){return/^[\x00-\x7F]*$/.test(e)}function lC(e){return e.length<=s8}function lR(e){return/^[0-9]*$/i.test(e)}function lO(e){return o7(e)&&!lt(e)&&!lf(e)}sz({},{getL1MessageHash:()=>lI,getL2MessageHash:()=>lx,getSelector:()=>lS,getSelectorFromName:()=>lA,keccakBn:()=>lw,solidityUint256PackedKeccak256:()=>lk,starknetKeccak:()=>lT}),sz({},{decodeShortString:()=>lF,encodeShortString:()=>lU,isASCII:()=>lN,isDecimalString:()=>lR,isLongText:()=>lB,isShortString:()=>lC,isShortText:()=>lV,isText:()=>lO,splitLongString:()=>lD});var lV=e=>lO(e)&&lC(e),lB=e=>lO(e)&&!lC(e);function lD(e){let t=RegExp("[^]{1,".concat(s8,"}"),"g");return e.match(t)||[]}function lU(e){if(!lN(e))throw Error("".concat(e," is not an ASCII string"));if(!lC(e))throw Error("".concat(e," is too long"));return s$(e.replace(/./g,e=>e.charCodeAt(0).toString(16)))}function lF(e){if(!lN(e))throw Error("".concat(e," is not an ASCII string"));if(lt(e))return sX(e).replace(/.{2}/g,e=>String.fromCharCode(parseInt(e,16)));if(lR(e))return lF("0X".concat(BigInt(e).toString(16)));throw Error("".concat(e," is not Hex or decimal"))}function lP(e){let t=0n===BigInt(e.pending_word)?"":lF(la(e.pending_word));return e.data.reduce((e,t)=>e+(0n===BigInt(t)?"":lF(la(t))),"")+t}function lL(e){let t=lD(e),n=t[t.length-1],r=t.map(lU),[a,i]=void 0===n||31===n.length?["0x00",0]:[r.pop(),n.length];return{data:0===r.length?[]:r,pending_word:a,pending_word_len:i}}sz({},{byteArrayFromString:()=>lL,stringFromByteArray:()=>lP});var lM={};function lH(e){if(o9(e)||Number.isInteger(e))return e.toString();if(o7(e)){if(lt(e))return BigInt(e).toString();if(lO(e)){if(!lC(e))throw Error("".concat(e," is a long string > 31 chars. Please split it into an array of short strings."));return BigInt(lU(e)).toString()}if(lf(e))return e}if(o4(e))return"".concat(+e);throw Error("".concat(e," can't be computed by felt()"))}sz(lM,{felt:()=>cd,getAbiContractVersion:()=>cs,getArrayType:()=>cr,isCairo1Abi:()=>ca,isCairo1Type:()=>cn,isLen:()=>lK,isTypeArray:()=>lq,isTypeBool:()=>l5,isTypeByteArray:()=>l7,isTypeBytes31:()=>l9,isTypeContractAddress:()=>l8,isTypeEnum:()=>l$,isTypeEthAddress:()=>l4,isTypeFelt:()=>lG,isTypeLiteral:()=>l6,isTypeNamedTuple:()=>lJ,isTypeNonZero:()=>ci,isTypeOption:()=>l0,isTypeResult:()=>l1,isTypeSecp256k1Point:()=>ct,isTypeStruct:()=>lX,isTypeTuple:()=>lQ,isTypeU96:()=>ce,isTypeUint:()=>l2,isTypeUint256:()=>l3,tuple:()=>cc,uint256:()=>co,uint512:()=>cl});var lz=(1n<<128n)-1n,lZ=(1n<<256n)-1n,lW=(c=class e{static validate(e){let t=BigInt(e);if(t<0n)throw Error("bigNumberish is smaller than UINT_256_MIN");if(t>lZ)throw Error("bigNumberish is bigger than UINT_256_MAX");return t}static validateProps(e,t){let n=BigInt(e),r=BigInt(t);if(n<0n||n>0xffffffffffffffffffffffffffffffffn)throw Error("low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX");if(r<0n||r>0xffffffffffffffffffffffffffffffffn)throw Error("high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX");return{low:n,high:r}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:s$(this.low.toString(16)),high:s$(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[lH(this.low),lH(this.high)]}constructor(...t){if((0,h._)(this,"low",void 0),(0,h._)(this,"high",void 0),"object"==typeof t[0]&&1===t.length&&"low"in t[0]&&"high"in t[0]){let n=e.validateProps(t[0].low,t[0].high);this.low=n.low,this.high=n.high}else if(1===t.length){let n=e.validate(t[0]);this.low=n&lz,this.high=n>>128n}else if(2===t.length){let n=e.validateProps(t[0],t[1]);this.low=n.low,this.high=n.high}else throw Error("Incorrect constructor parameters")}},(0,h._)(c,"abiSelector","core::integer::u256"),c),lj=(1n<<512n)-1n,lY=(d=class e{static validate(e){let t=BigInt(e);if(t<0n)throw Error("bigNumberish is smaller than UINT_512_MIN.");if(t>lj)throw Error("bigNumberish is bigger than UINT_512_MAX.");return t}static validateProps(e,t,n,r){let a=BigInt(e),i=BigInt(t),s=BigInt(n),o=BigInt(r);return[a,i,s,o].forEach((e,t)=>{if(e<0n||e>lz)throw Error("limb".concat(t," is not in the range of a u128 number"))}),{limb0:a,limb1:i,limb2:s,limb3:o}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:s$(this.limb0.toString(16)),limb1:s$(this.limb1.toString(16)),limb2:s$(this.limb2.toString(16)),limb3:s$(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[lH(this.limb0),lH(this.limb1),lH(this.limb2),lH(this.limb3)]}constructor(...t){if((0,h._)(this,"limb0",void 0),(0,h._)(this,"limb1",void 0),(0,h._)(this,"limb2",void 0),(0,h._)(this,"limb3",void 0),"object"==typeof t[0]&&1===t.length&&"limb0"in t[0]&&"limb1"in t[0]&&"limb2"in t[0]&&"limb3"in t[0]){let n=e.validateProps(t[0].limb0,t[0].limb1,t[0].limb2,t[0].limb3);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else if(1===t.length){let n=e.validate(t[0]);this.limb0=n&lz,this.limb1=(n&lz<<128n)>>128n,this.limb2=(n&lz<<256n)>>256n,this.limb3=n>>384n}else if(4===t.length){let n=e.validateProps(t[0],t[1],t[2],t[3]);this.limb0=n.limb0,this.limb1=n.limb1,this.limb2=n.limb2,this.limb3=n.limb3}else throw Error("Incorrect Uint512 constructor parameters")}},(0,h._)(d,"abiSelector","core::integer::u512"),d),lK=e=>/_len$/.test(e),lG=e=>"felt"===e||"core::felt252"===e,lq=e=>/\*/.test(e)||e.startsWith("core::array::Array::")||e.startsWith("core::array::Span::"),lQ=e=>/^\(.*\)$/i.test(e),lJ=e=>/\(.*\)/i.test(e)&&e.includes(":"),lX=(e,t)=>e in t,l$=(e,t)=>e in t,l0=e=>e.startsWith("core::option::Option::"),l1=e=>e.startsWith("core::result::Result::"),l2=e=>Object.values(oW).includes(e),l3=e=>lW.isAbiType(e),l6=e=>Object.values(oj).includes(e),l5=e=>"core::bool"===e,l8=e=>e===oj.ContractAddress,l4=e=>e===oY,l9=e=>"core::bytes_31::bytes31"===e,l7=e=>"core::byte_array::ByteArray"===e,ce=e=>"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"===e,ct=e=>e===oj.Secp256k1Point,cn=e=>e.includes("::"),cr=e=>cn(e)?e.substring(e.indexOf("<")+1,e.lastIndexOf(">")):e.replace("*","");function ca(e){let{cairo:t}=cs(e);if(void 0===t)throw Error("Unable to determine Cairo version");return"1"===t}function ci(e){return e.startsWith(oK)}function cs(e){if(e.find(e=>"interface"===e.type))return{cairo:"1",compiler:"2"};let t=e.find(e=>("function"===e.type||"constructor"===e.type)&&(e.inputs.length||e.outputs.length));return t?cn((t.inputs.length?t.inputs:t.outputs)[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}:{cairo:void 0,compiler:void 0}}var co=e=>new lW(e).toUint256DecimalString(),cl=e=>new lY(e).toUint512DecimalString(),cc=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return{...t}};function cd(e){return lH(e)}var cu=class{unwrap(){return Object.values(this.variant).find(e=>!o5(e))}activeVariant(){let e=Object.entries(this.variant).find(e=>!o5(e[1]));return o5(e)?"":e[0]}constructor(e){(0,h._)(this,"variant",void 0);let t=Object.values(e);if(0===t.length)throw Error("This Enum must have at least 1 variant");if(1!==t.filter(e=>!o5(e)).length)throw Error("This Enum must have exactly one active variant");this.variant=e}},ch={Some:0,None:1},cf=class{unwrap(){return this.None?void 0:this.Some}isSome(){return!o5(this.Some)}isNone(){return!0===this.None}constructor(e,t){if((0,h._)(this,"Some",void 0),(0,h._)(this,"None",void 0),!(e in Object.values(ch)))throw Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(e===ch.Some){if(o5(t))throw Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=t,this.None=void 0}else this.Some=void 0,this.None=!0}},cp={Ok:0,Err:1},cg=class{unwrap(){if(!o5(this.Ok))return this.Ok;if(!o5(this.Err))return this.Err;throw Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!o5(this.Ok)}isErr(){return!o5(this.Err)}constructor(e,t){if((0,h._)(this,"Ok",void 0),(0,h._)(this,"Err",void 0),!(e in Object.values(cp)))throw Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");e===cp.Ok?(this.Ok=t,this.Err=void 0):(this.Ok=void 0,this.Err=t)}},c_={isBN:(e,t,n)=>{if(!o9(e[n]))throw Error("Data and formatter mismatch on ".concat(n,":").concat(t[n],", expected response data ").concat(n,":").concat(e[n]," to be BN instead it is ").concat(typeof e[n]))},unknown:(e,t,n)=>{throw Error("Unhandled formatter type on ".concat(n,":").concat(t[n]," for data ").concat(n,":").concat(e[n]))}},cm=class{methodInputsLength(e){return e.inputs.reduce((e,t)=>lK(t.name)?e:e+1,0)}getMethod(e){return this.abi.find(t=>t.name===e)}getLegacyFormat(){return this.abi}constructor(e){(0,h._)(this,"abi",void 0),this.abi=e}},cy=class{methodInputsLength(e){return e.inputs.length}getMethod(e){var t;let n=this.abi.find(e=>"interface"===e.type);return null==n||null==(t=n.items)?void 0:t.find(t=>t.name===e)}getLegacyFormat(){return this.abi.flatMap(e=>"interface"===e.type?e.items:e)}constructor(e){(0,h._)(this,"abi",void 0),this.abi=e}};function cb(e){var t;let n=(t=e).find(e=>"interface"===e.type)?2:+!!ca(t);if(0===n||1===n)return new cm(e);if(2===n)return new cy(e);throw Error("Unsupported ABI version ".concat(n))}function cE(e,t,n){return"constructor"===e&&!n&&!t.length}function cv(e,t,n){for(let r=0,a=0;r<e.length;r++)if(e[r]===t)a++;else if(e[r]===n&&0==--a)return r;return 1/0}function cw(e){return cn(e)?function(e){let t,n=e.slice(1,-1),r=[],a=0;for(;a<n.length;){switch(!0){case"("===n[a]:t=a+cv(n.slice(a),"(",")")+1;break;case n.startsWith("core::result::Result::<",a)||n.startsWith("core::array::Array::<",a)||n.startsWith("core::option::Option::<",a):t=a+cv(n.slice(a),"<",">")+1;break;default:{let e=n.indexOf(",",a);t=-1!==e?e:1/0}}r.push(n.slice(a,t)),a=t+2}return r}(e):function(e){let{subTuple:t,result:n}=function(e){if(!e.includes("("))return{subTuple:[],result:e};let t=[],n="",r=0;for(;r<e.length;){if("("===e[r]){let a=1,i=r;for(r++;a;)")"===e[r]&&a--,"("===e[r]&&a++,r++;t.push(e.substring(i,r)),n+=" ",r--}else n+=e[r];r++}return{subTuple:t,result:n}}(e.replace(/\s/g,"").slice(1,-1)),r=n.split(",").map(e=>t.length?e.replace(" ",t.shift()):e);return lJ(e)&&(r=r.reduce((e,t)=>e.concat(function(e){let t=e.substring(0,e.indexOf(":")),n=e.substring(t.length+1);return{name:t,type:n}}(t)),[])),r}(e)}var cT=(u=class e{static getFixedArraySize(e){let t=e.match(RegExp("(?<=; )\\d+(?=\\])"));if(null===t)throw Error("ABI type ".concat(e," do not includes a valid number after ';' character."));return Number(t[0])}getFixedArraySize(){return e.getFixedArraySize(this.arrayType)}getFixedArrayType(){return e.getFixedArrayType(this.arrayType)}static compile(e){return e.reduce((e,t,n)=>(e[n]=t,e),{})}compile(){return e.compile(this.content)}static isTypeFixedArray(e){return/^\[.*;\s.*\]$/.test(e)&&RegExp("(?<=\\[).+(?=;)").test(e)&&RegExp("(?<=; )\\d+(?=\\])").test(e)}constructor(t,n){(0,h._)(this,"content",void 0),(0,h._)(this,"arrayType",void 0),o2(e.isTypeFixedArray(n),"The type ".concat(n," is not a Cairo fixed array. Needs [type; length]."));try{e.getFixedArrayType(n)}catch(e){throw Error("The type ".concat(n," do not includes any content type. Needs [type; length]."))}try{e.getFixedArraySize(n)}catch(e){throw Error("The type ".concat(n," type do not includes any length. Needs [type; length]."))}o2(e.getFixedArraySize(n)===t.length,"The ABI type ".concat(n," is expecting ").concat(e.getFixedArraySize(n)," items. ").concat(t.length," items provided.")),this.content=t,this.arrayType=n}},(0,h._)(u,"getFixedArrayType",e=>{let t=e.match(RegExp("(?<=\\[).+(?=;)"));if(null===t)throw Error("ABI type ".concat(e," do not includes a valid type of data."));return t[0]}),u);function cA(e,t){switch(!0){case lW.isAbiType(e):return new lW(t).toApiRequest();case lY.isAbiType(e):return new lY(t).toApiRequest();case l9(e):return lU(t.toString());case ct(e):{let e=sX(la(t)).padStart(128,"0"),n=co(s$(e.slice(-64))),r=co(s$(e.slice(0,-64)));return[lH(r.low),lH(r.high),lH(n.low),lH(n.high)]}default:return lH(t)}}function cS(e,t,n,r){if(void 0===e)throw Error("Missing parameter for type ".concat(t));if(cT.isTypeFixedArray(t)){let a=cT.getFixedArrayType(t),i=[];if(Array.isArray(e))i=new cT(e,t).content;else if("object"==typeof e)o2((i=Object.values(e)).length===cT.getFixedArraySize(t),"ABI type ".concat(t,": object provided do not includes  ").concat(cT.getFixedArraySize(t)," items. ").concat(i.length," items provided."));else throw Error("ABI type ".concat(t,": not an Array representing a cairo.fixedArray() provided."));return i.reduce((e,t)=>e.concat(cS(t,a,n,r)),[])}if(Array.isArray(e)){let a=[];a.push(lH(e.length));let i=cr(t);return e.reduce((e,t)=>e.concat(cS(t,i,n,r)),a)}if(n[t]&&n[t].members.length){if(lW.isAbiType(t))return new lW(e).toApiRequest();if(lY.isAbiType(t))return new lY(e).toApiRequest();if(l4(t))return cA(t,e);if(l7(t)){let t=lL(e);return[t.data.length.toString(),...t.data.map(e=>e.toString()),t.pending_word.toString(),t.pending_word_len.toString()]}let{members:a}=n[t];return a.reduce((t,a)=>t.concat(cS(e[a.name],a.type,n,r)),[])}if(lQ(t))return(function(e,t){let n=cw(t),r=Object.values(e);if(r.length!==n.length)throw Error("ParseTuple: provided and expected abi tuple size do not match.\n      provided: ".concat(r,"\n      expected: ").concat(n));return n.map((e,t)=>{var n;return{element:r[t],type:null!=(n=e.type)?n:e}})})(e,t).reduce((e,t)=>{let a=cS(t.element,t.type,n,r);return e.concat(a)},[]);if(lW.isAbiType(t))return new lW(e).toApiRequest();if(lY.isAbiType(t))return new lY(e).toApiRequest();if(l$(t,r)){let{variants:a}=r[t];if(l0(t)){if(e.isSome()){let t=a.find(e=>"Some"===e.name);if(o5(t))throw Error("Error in abi : Option has no 'Some' variant.");let i=t.type;if("()"===i)return ch.Some.toString();let s=cS(e.unwrap(),i,n,r);return Array.isArray(s)?[ch.Some.toString(),...s]:[ch.Some.toString(),s]}return ch.None.toString()}if(l1(t)){if(e.isOk()){let t=a.find(e=>"Ok"===e.name);if(o5(t))throw Error("Error in abi : Result has no 'Ok' variant.");let i=t.type;if("()"===i)return cp.Ok.toString();let s=cS(e.unwrap(),i,n,r);return Array.isArray(s)?[cp.Ok.toString(),...s]:[cp.Ok.toString(),s]}let t=a.find(e=>"Err"===e.name);if(o5(t))throw Error("Error in abi : Result has no 'Err' variant.");let i=t.type;if("()"===i)return cp.Err.toString();let s=cS(e.unwrap(),i,n,r);return Array.isArray(s)?[cp.Err.toString(),...s]:[cp.Err.toString(),s]}let i=e.activeVariant(),s=a.find(e=>e.name===i);if(o5(s))throw Error("Not find in abi : Enum has no '".concat(i,"' variant."));let o=s.type,l=a.findIndex(e=>e.name===i);if("()"===o)return l.toString();let c=cS(e.unwrap(),o,n,r);return Array.isArray(c)?[l.toString(),...c]:[l.toString(),c]}if(ci(t))return cA(cr(t),e);if("object"==typeof e)throw Error("Parameter ".concat(e," do not align with abi parameter ").concat(t));return cA(t,e)}function ck(e,t){switch(!0){case l5(e):return!!BigInt(t.next().value);case lW.isAbiType(e):return new lW(t.next().value,t.next().value).toBigInt();case lY.isAbiType(e):let n=t.next().value,r=t.next().value;return new lY(n,r,t.next().value,t.next().value).toBigInt();case l4(e):return BigInt(t.next().value);case l9(e):return lF(t.next().value);case ct(e):let a=sX(t.next().value).padStart(32,"0"),i=sX(t.next().value).padStart(32,"0"),s=sX(t.next().value).padStart(32,"0");return BigInt(s$(i+a+sX(t.next().value).padStart(32,"0")+s));default:return BigInt(t.next().value)}}function cx(e,t,n,r){if("()"===t.type)return{};if(lW.isAbiType(t.type))return new lW(e.next().value,e.next().value).toBigInt();if(lY.isAbiType(t.type)){let t=e.next().value,n=e.next().value;return new lY(t,n,e.next().value,e.next().value).toBigInt()}if(l7(t.type)){let t=[],n=BigInt(e.next().value);for(;t.length<n;)t.push(la(e.next().value));let r=la(e.next().value);return lP({data:t,pending_word:r,pending_word_len:BigInt(e.next().value)})}if(cT.isTypeFixedArray(t.type)){let a=[],i={name:"",type:cT.getFixedArrayType(t.type)},s=cT.getFixedArraySize(t.type);for(;a.length<s;)a.push(cx(e,i,n,r));return a}if(lq(t.type)){let a=[],i={name:"",type:cr(t.type)},s=BigInt(e.next().value);for(;a.length<s;)a.push(cx(e,i,n,r));return a}if(ci(t.type))return cx(e,{name:"",type:cr(t.type)},n,r);if(n&&t.type in n&&n[t.type])return l4(t.type)?ck(t.type,e):n[t.type].members.reduce((t,a)=>(t[a.name]=cx(e,a,n,r),t),{});if(r&&t.type in r&&r[t.type]){let a=Number(e.next().value),i=r[t.type].variants.reduce((t,i,s)=>(s===a?t[i.name]=cx(e,{name:"",type:i.type},n,r):t[i.name]=void 0,t),{});if(t.type.startsWith("core::option::Option")){let e=a===ch.Some?i.Some:void 0;return new cf(a,e)}if(t.type.startsWith("core::result::Result")){let e;return e=a===cp.Ok?i.Ok:i.Err,new cg(a,e)}return new cu(i)}if(lQ(t.type))return cw(t.type).reduce((t,a,i)=>{let s=(null==a?void 0:a.name)?a.name:i,o=(null==a?void 0:a.type)?a.type:a;return t[s]=cx(e,{name:s,type:o},n,r),t},{});if(lq(t.type)){let a=[],i={name:"",type:cr(t.type)},s=BigInt(e.next().value);for(;a.length<s;)a.push(cx(e,i,n,r));return a}return ck(t.type,e)}function cI(e,t,n,r,a){let{name:i,type:s}=t;switch(!0){case lK(i):return BigInt(e.next().value);case n&&s in n||lQ(s):case r&&l$(s,r):case cT.isTypeFixedArray(s):return cx(e,t,n,r);case lq(s):if(cn(s))return cx(e,t,n,r);let o=[];if(a&&a["".concat(i,"_len")]){let s=a["".concat(i,"_len")];for(;o.length<s;)o.push(cx(e,{name:i,type:t.type.replace("*","")},n,r))}return o;case ci(s):return cx(e,t,n,r);default:return ck(s,e)}}var cN=(e,t)=>{if(o2(o7(e)||o8(e)||o9(e),"Validate: arg ".concat(t.name," should be a felt typed as (String, Number or BigInt)")),o7(e)&&!lt(e))return;let n=BigInt(e.toString(10));o2(n>=0n&&n<=2n**252n-1n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0, 2^252-1]"))},cC=(e,t)=>{let n;switch(o8(e)&&o2(e<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),o2(o7(e)||o8(e)||o9(e)||le(e)&&"low"in e&&"high"in e||le(e)&&["limb0","limb1","limb2","limb3"].every(t=>t in e),"Validate: arg ".concat(t.name," of cairo type ").concat(t.type," should be type (String, Number or BigInt), but is ").concat(typeof e," ").concat(e,".")),t.type){case oW.u256:n=new lW(e).toBigInt();break;case oW.u512:n=new lY(e).toBigInt();break;default:n=ln(e)}switch(t.type){case oW.u8:o2(n>=0n&&n<=255n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0 - 255]"));break;case oW.u16:o2(n>=0n&&n<=65535n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0, 65535]"));break;case oW.u32:o2(n>=0n&&n<=4294967295n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0, 4294967295]"));break;case oW.u64:o2(n>=0n&&n<=2n**64n-1n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0, 2^64-1]"));break;case oW.u128:o2(n>=0n&&n<=2n**128n-1n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0, 2^128-1]"));break;case oW.u256:o2(n>=0n&&n<=2n**256n-1n,"Validate: arg ".concat(t.name," is ").concat(t.type," should be in range 0 - 2^256-1"));break;case oW.u512:o2(lY.is(n),"Validate: arg ".concat(t.name," is ").concat(t.type," should be in range 0 - 2^512-1"));break;case oj.ClassHash:case oj.ContractAddress:o2(n>=0n&&n<=2n**252n-1n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0, 2^252-1]"));break;case oj.Secp256k1Point:o2(n>=0n&&n<=2n**512n-1n,"Validate: arg ".concat(t.name," must be ").concat(t.type," : a 512 bits number."));break;case oj.U96:o2(n>=0n&&n<=2n**96n-1n,"Validate: arg ".concat(t.name," must be ").concat(t.type," : a 96 bits number."))}},cR=(e,t)=>{o2(o4(e),"Validate: arg ".concat(t.name," of cairo type ").concat(t.type," should be type (Boolean)"))},cO=(e,t,n)=>{if(t.type===oW.u256||t.type===oW.u512)return void cC(e,t);if(l4(t.type)){o2(!le(e),'EthAddress type is waiting a BigNumberish. Got "'.concat(e,'"'));let n=BigInt(e.toString(10));o2(n>=0n&&n<=2n**160n-1n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0, 2^160-1]"));return}o2(le(e),"Validate: arg ".concat(t.name," is cairo type struct (").concat(t.type,"), and should be defined as a js object (not array)")),n[t.type].members.forEach(n=>{let{name:r}=n;o2(Object.keys(e).includes(r),"Validate: arg ".concat(t.name," should have a property ").concat(r))})},cV=(e,t)=>{o2(le(e),"Validate: arg ".concat(t.name," is cairo type Enum (").concat(t.type,"), and should be defined as a js object (not array)"));let n=Object.getOwnPropertyNames(Object.getPrototypeOf(e)),r=[...Object.getOwnPropertyNames(e),...n];if(!(l0(t.type)&&r.includes("isSome")&&r.includes("isNone")||l1(t.type)&&r.includes("isOk")&&r.includes("isErr"))&&!(r.includes("variant")&&r.includes("activeVariant")))throw Error("Validate Enum: argument ".concat(t.name,", type ").concat(t.type,', value received "').concat(e,'", is not an Enum.'))},cB=(e,t)=>{o2(le(e),"Validate: arg ".concat(t.name," should be a tuple (defined as object)"))},cD=(e,t,n,r)=>{let a=lq(t.type),i=a?cr(t.type):cT.getFixedArrayType(t.type);if(a&&lG(i)&&lB(e))return;let s=[];if(a)o2(Array.isArray(e),"Validate: arg ".concat(t.name," should be an Array")),s=e;else switch(!0){case Array.isArray(e):s=e;break;case"object"==typeof e:s=Object.values(e);break;default:throw Error("Validate: arg ".concat(t.name," should be an Array or an object."))}switch(!0){case lG(i):s.forEach(e=>cN(e,t));break;case lQ(i):s.forEach(e=>cB(e,{name:t.name,type:i}));break;case lq(i):s.forEach(e=>cD(e,{name:"",type:i},n,r));break;case lX(i,n):s.forEach(e=>cO(e,{name:t.name,type:i},n));break;case l$(i,r):s.forEach(e=>cV(e,{name:t.name,type:i}));break;case l2(i)||l6(i):s.forEach(e=>cC(e,{name:"",type:i}));break;case l5(i):s.forEach(e=>cR(e,t));break;default:throw Error("Validate Unhandled: argument ".concat(t.name,", type ").concat(t.type,", value ").concat(s))}};function cU(e,t,n,r){e.inputs.reduce((e,a)=>{let i=t[e];switch(!0){case lK(a.name):return e;case lG(a.type):cN(i,a);break;case l9(a.type):o2(o7(i),"Validate: arg ".concat(a.name," should be a string.")),o2(i.length<32,"Validate: arg ".concat(a.name," cairo typed ").concat(a.type," should be a string of less than 32 characters."));break;case l2(a.type)||l6(a.type):cC(i,a);break;case l5(a.type):cR(i,a);break;case l7(a.type):o2(o7(i),"Validate: arg ".concat(a.name," should be a string."));break;case lq(a.type)||cT.isTypeFixedArray(a.type):cD(i,a,n,r);break;case lX(a.type,n):cO(i,a,n);break;case l$(a.type,r):cV(i,a);break;case lQ(a.type):cB(i,a);break;case ci(a.type):let s=cr(a.type);switch(o2(l2(s)&&s!==lY.abiSelector||lG(s),"Validate: ".concat(a.name," type is not authorized for NonZero type.")),!0){case lG(s):cN(i,a),o2(BigInt(i.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case l2(s):cC(i,{name:"",type:s}),s===oW.u256?o2(new lW(i).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):o2(ln(i)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw Error("Validate Unhandled: argument ".concat(a.name,", type ").concat(a.type,', value "').concat(i,'"'))}break;default:throw Error("Validate Unhandled: argument ".concat(a.name,", type ").concat(a.type,", value ").concat(i))}return e+1},0)}var cF=class e{validate(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e!==oZ.DEPLOY&&o2(this.abi.filter(t=>{if("function"!==t.type)return!1;let n="view"===t.stateMutability||"view"===t.state_mutability;return e===oZ.INVOKE?!n:n}).map(e=>e.name).includes(t),"".concat(e===oZ.INVOKE?"invocable":"viewable"," method not found in abi"));let r=this.abi.find(n=>e===oZ.DEPLOY?n.name===t&&"constructor"===n.type:n.name===t&&"function"===n.type);if(cE(t,n,r))return;let a=this.parser.methodInputsLength(r);if(n.length!==a)throw Error("Invalid number of arguments, expected ".concat(a," arguments, but got ").concat(n.length));cU(r,n,this.structs,this.enums)}compile(e,t){let n,r=this.abi.find(t=>t.name===e);if(cE(e,t,r))return[];Array.isArray(t)?n=t:(n=Object.values(function(e,t,n,r){let a=(e,t)=>{if(cT.isTypeFixedArray(t)){var o,l=e,c=t;let n=cT.getFixedArrayType(c),r=cT.getFixedArraySize(c);if(Array.isArray(l)){if(r!==l.length)throw Error("ABI type ".concat(c,": array provided do not includes  ").concat(r," items. ").concat(l.length," items provided."));return l.map(e=>a(e,n))}if(r!==Object.keys(l).length)throw Error("ABI type ".concat(c,": object provided do not includes  ").concat(r," properties. ").concat(Object.keys(l).length," items provided."));return a(l,n)}if(lq(t)){var d=e,u=t;let n=cr(u);return o7(d)?d:d.map(e=>a(e,n))}if(l$(t,r))return s(e,r[t]);if(lQ(t)){return o=e,cw(t).reduce((e,t,n)=>{let r,i=Object.keys(o),s=(null==t?void 0:t.type)?t.type:t;return r=a(o[i[n]],s),Object.defineProperty(e,n.toString(),{enumerable:!0,value:null!=r?r:o[i[n]]}),e},{})}if(l4(t)||ci(t)||l7(t)||ce(t)||ct(t))return e;if(lW.isAbiType(t)){if("object"!=typeof e)return e;if(!("low"in e&&"high"in e))throw Error("Your object includes the property : ".concat(t,", containing an Uint256 object without the 'low' and 'high' keys."));return{low:e.low,high:e.high}}if(lY.isAbiType(t)){if("object"!=typeof e)return e;if(!["limb0","limb1","limb2","limb3"].every(t=>t in e))throw Error("Your object includes the property : ".concat(t,", containing an Uint512 object without the 'limb0' to 'limb3' keys."));return{limb0:e.limb0,limb1:e.limb1,limb2:e.limb2,limb3:e.limb3}}return lX(t,n)?i(e,n[t].members):e},i=(e,t)=>t.reduce((t,n)=>{let r;if("undefined"===e[n.name]&&(cn(n.type)||!lK(n.name)))throw Error("Your object needs a property with key : ".concat(n.name," ."));return r=a(e[n.name],n.type),Object.defineProperty(t,n.name,{enumerable:!0,value:null!=r?r:e[n.name]}),t},{}),s=(e,t)=>{if(l1(t.name)){let n=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(",")),r=t.name.substring(t.name.indexOf(",")+1,t.name.lastIndexOf(">"));return e.isOk()?new cg(cp.Ok,a(e.unwrap(),n)):new cg(cp.Err,a(e.unwrap(),r))}if(l0(t.name)){let n=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(">"));return e.isSome()?new cf(ch.Some,a(e.unwrap(),n)):new cf(ch.None,{})}return new cu(Object.fromEntries(Object.entries(e.variant).map(n=>{if(o5(n[1]))return n;let r=t.type.substring(t.type.lastIndexOf("<")+1,t.type.lastIndexOf(">"));return"()"===r?n:[n[0],a(e.unwrap(),r)]})))};return t.reduce((t,n)=>{let r;return lK(n.name)&&!cn(n.type)?t:(r=a(e[n.name],n.type),Object.defineProperty(t,n.name,{enumerable:!0,value:r}),t)},{})}(t,r.inputs,this.structs,this.enums)),cU(r,n,this.structs,this.enums));let a=n[Symbol.iterator](),i=r.inputs.reduce((e,t)=>lK(t.name)&&!cn(t.type)?e:e.concat(function(e,t,n,r){let{name:a,type:i}=t,{value:s}=e.next();switch(!0){case cT.isTypeFixedArray(i):if(!Array.isArray(s)&&"object"!=typeof s)throw Error("ABI expected parameter ".concat(a," to be an array or an object, got ").concat(s));return cS(s,t.type,n,r);case lq(i):if(!Array.isArray(s)&&!lO(s))throw Error("ABI expected parameter ".concat(a," to be array or long string, got ").concat(s));return o7(s)&&(s=lD(s)),cS(s,t.type,n,r);case ci(i):return cA(cr(i),s);case l4(i):return cA(i,s);case lX(i,n)||lQ(i)||lW.isAbiType(i):case l$(i,r):return cS(s,i,n,r);default:return cA(i,s)}}(a,t,this.structs,this.enums)),[]);return Object.defineProperty(i,"__compiled__",{enumerable:!1,writable:!1,value:!0}),i}static compile(e){let t,n=e=>{let t=function(e){let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".",r=Array.isArray(e)?[e.length.toString(),...e]:e;return Object.entries(r).flatMap(e=>{let[a,i]=e,s=i;"entrypoint"===a?s=lA(s):lB(s)&&(s=lL(s));let o=Array.isArray(r)&&"0"===a?"$$len":a;if(o9(s))return[["".concat(n).concat(o),lH(s)]];if(Object(s)===s){let e=Object.getOwnPropertyNames(Object.getPrototypeOf(s)),r=[...Object.getOwnPropertyNames(s),...e];if(r.includes("isSome")&&r.includes("isNone")){let e=s,r=e.isSome()?ch.Some:ch.None;return e.isSome()?t({0:r,1:e.unwrap()},"".concat(n).concat(o,".")):[["".concat(n).concat(o),lH(r)]]}if(r.includes("isOk")&&r.includes("isErr")){let e=s;return t({0:e.isOk()?cp.Ok:cp.Err,1:e.unwrap()},"".concat(n).concat(o,"."))}if(r.includes("variant")&&r.includes("activeVariant")){let e=s,r=e.activeVariant(),a=Object.keys(e.variant).findIndex(e=>e===r);return"object"==typeof e.unwrap()&&0===Object.keys(e.unwrap()).length?[["".concat(n).concat(o),lH(a)]]:t({0:a,1:e.unwrap()},"".concat(n).concat(o,"."))}return t(s,"".concat(n).concat(o,"."))}return[["".concat(n).concat(o),lH(s)]]})};return Object.fromEntries(t(e))};return Object.defineProperty(t=Array.isArray(e)?Object.values(n({...e})):Object.values(n(e)),"__compiled__",{enumerable:!1,writable:!1,value:!0}),t}parse(e,t){let{outputs:n}=this.abi.find(t=>t.name===e),r=t.flat()[Symbol.iterator](),a=n.flat().reduce((e,t,n)=>{var a;let i=null!=(a=t.name)?a:n;return e[i]=cI(r,t,this.structs,this.enums,e),e[i]&&e["".concat(i,"_len")]&&delete e["".concat(i,"_len")],e},{});return 1===Object.keys(a).length&&0 in a?a[0]:a}format(e,t,n){return function e(t,n,r){return Object.entries(t).reduce((a,i)=>{let[s,o]=i,l=null!=r?r:n[s];if(!(s in n)&&!r)return a[s]=o,a;if("string"===l){if(Array.isArray(t[s])){let n=e(t[s],t[s].map(e=>l));return a[s]=Object.values(n).join(""),a}return c_.isBN(t,n,s),a[s]=lF(o),a}if("number"===l)return c_.isBN(t,n,s),a[s]=Number(o),a;if("function"==typeof l)return a[s]=l(o),a;if(Array.isArray(l)){let n=e(t[s],l,l[0]);return a[s]=Object.values(n),a}return le(l)?a[s]=e(t[s],l):c_.unknown(t,n,s),a},{})}(this.parse(e,t),n)}static getAbiStruct(e){return e.filter(e=>"struct"===e.type).reduce((e,t)=>({...e,[t.name]:t}),{})}static getAbiEnum(e){let t=e.filter(e=>"enum"===e.type).reduce((e,t)=>({...e,[t.name]:t}),{});return delete t["core::bool"],t}static toCalldata(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.compile(t)}static toHex(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.compile(t).map(e=>la(e))}decodeParameters(e,t){let n=Array.isArray(e)?e:[e],r=t.flat()[Symbol.iterator](),a=n.map(e=>cI(r,{name:"",type:e},this.structs,this.enums));return 1===a.length?a[0]:a}constructor(t){(0,h._)(this,"abi",void 0),(0,h._)(this,"parser",void 0),(0,h._)(this,"structs",void 0),(0,h._)(this,"enums",void 0),this.structs=e.getAbiStruct(t),this.enums=e.getAbiEnum(t),this.parser=cb(t),this.abi=this.parser.getLegacyFormat()}},cP={};sz(cP,{calculateContractAddressFromHash:()=>di,calculateDeclareTransactionHash:()=>c9,calculateDeployAccountTransactionHash:()=>c7,calculateInvokeTransactionHash:()=>c4,calculateL2MessageTxHash:()=>cj,computeCompiledClassHash:()=>df,computeContractClassHash:()=>d_,computeHashOnElements:()=>dn,computeHintedClassHash:()=>dc,computeLegacyContractClassHash:()=>dd,computePedersenHash:()=>de,computePedersenHashOnElements:()=>dr,computePoseidonHash:()=>dt,computePoseidonHashOnElements:()=>da,computeSierraContractClassHash:()=>dg,formatSpaces:()=>dl,getL1MessageHash:()=>lI,getL2MessageHash:()=>lx,getSelector:()=>lS,getSelectorFromName:()=>lA,hashByteCodeSegments:()=>dh,keccakBn:()=>lw,poseidon:()=>ao,solidityUint256PackedKeccak256:()=>lk,starknetKeccak:()=>lT}),sz({},{calculateDeclareTransactionHash:()=>cz,calculateDeployAccountTransactionHash:()=>cZ,calculateL2MessageTxHash:()=>cj,calculateTransactionHash:()=>cW,calculateTransactionHashCommon:()=>cH,computeHashOnElements:()=>cM});var cL={};function cM(e){return[...e,e.length].reduce((e,t)=>al.pedersen(ln(e),ln(t)),0).toString()}function cH(e,t,n,r,a,i,s){let o=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],l=[e,t,n,r,cM(a),i,s,...o];return cM(l)}function cz(e,t,n,r,a,i,s){return cH(oy.DECLARE,n,t,0,[e],r,a,[i,...s?[s]:[]])}function cZ(e,t,n,r,a,i,s,o){let l=[t,r,...n];return cH(oy.DEPLOY_ACCOUNT,a,e,0,l,i,s,[o])}function cW(e,t,n,r,a,i){return cH(oy.INVOKE,t,e,0,n,r,a,[i])}function cj(e,t,n,r,a,i){let s=[e,...r];return cH(oy.L1_HANDLER,0,t,lS(n),s,0,a,[i])}sz(cL,{starkCurve:()=>al,weierstrass:()=>ac}),sz({},{calculateDeclareTransactionHash:()=>c5,calculateDeployAccountTransactionHash:()=>c6,calculateInvokeTransactionHash:()=>c8,calculateTransactionHashCommon:()=>c3,encodeDataResourceBoundsL1:()=>c0,encodeResourceBoundsL1:()=>cX,encodeResourceBoundsL2:()=>c$,hashDAMode:()=>cJ,hashFeeField:()=>c1,hashFeeFieldV3B3:()=>c2});var cY=e=>e.map(e=>BigInt(e)),cK=64n+128n,cG=BigInt(lU("L1_GAS")),cq=BigInt(lU("L2_GAS")),cQ=BigInt(lU("L1_DATA"));function cJ(e,t){return(BigInt(e)<<32n)+BigInt(t)}function cX(e){return(cG<<cK)+(BigInt(e.l1_gas.max_amount)<<128n)+BigInt(e.l1_gas.max_price_per_unit)}function c$(e){return(cq<<cK)+(BigInt(e.l2_gas.max_amount)<<128n)+BigInt(e.l2_gas.max_price_per_unit)}function c0(e){return(cQ<<cK)+(BigInt(e.l1_data_gas.max_amount)<<128n)+BigInt(e.l1_data_gas.max_price_per_unit)}function c1(e,t){let n=cX(t),r=c$(t);return as([BigInt(e),n,r])}function c2(e,t){let n=cX(t),r=c$(t),a=c0(t);return as([BigInt(e),n,r,a])}function c3(e,t,n,r,a,i,s,o,l,c){let d=arguments.length>10&&void 0!==arguments[10]?arguments[10]:[],u=oM(c)?c2(i,c):c1(i,c),h=cJ(o,l),f=cY([e,t,n,u,as(cY(s)),r,a,h,...cY(d)]);return la(as(f))}function c6(e,t,n,r,a,i,s,o,l,c,d,u){return c3(oy.DEPLOY_ACCOUNT,a,e,i,s,d,u,o,l,c,[as(cY(n)),t,r])}function c5(e,t,n,r,a,i,s,o,l,c,d,u){return c3(oy.DECLARE,r,n,a,i,d,cY(u),o,l,c,[as(cY(s)),e,t])}function c8(e,t,n,r,a,i,s,o,l,c,d){return c3(oy.INVOKE,t,e,r,a,c,d,s,o,l,[as(cY(i)),as(cY(n))])}function c4(e){return[sW.ETransactionVersion.V3,sW.ETransactionVersion.F3].includes(e.version)?c8(e.senderAddress,e.version,e.compiledCalldata,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):cW(e.senderAddress,e.version,e.compiledCalldata,e.maxFee,e.chainId,e.nonce)}function c9(e){return[sW.ETransactionVersion.V3,sW.ETransactionVersion.F3].includes(e.version)?c5(e.classHash,e.compiledClassHash,e.senderAddress,e.version,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):cz(e.classHash,e.senderAddress,e.version,e.maxFee,e.chainId,e.nonce,e.compiledClassHash)}function c7(e){return[sW.ETransactionVersion.V3,sW.ETransactionVersion.F3].includes(e.version)?c6(e.contractAddress,e.classHash,e.compiledConstructorCalldata,e.salt,e.version,e.chainId,e.nonce,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):cZ(e.contractAddress,e.classHash,e.constructorCalldata,e.salt,e.version,e.maxFee,e.chainId,e.nonce)}function de(e,t){return al.pedersen(BigInt(e),BigInt(t))}function dt(e,t){return la(al.poseidonHash(BigInt(e),BigInt(t)))}function dn(e){return[...e,e.length].reduce((e,t)=>al.pedersen(BigInt(e),BigInt(t)),0).toString()}var dr=dn;function da(e){return la(as(e.map(e=>BigInt(e))))}function di(e,t,n,r){let a=dn(cF.compile(n));return la(BigInt(dn([lH("0x535441524b4e45545f434f4e54524143545f41444452455353"),r,e,t,a]))%oa)}function ds(e,t){return"attributes"===e||"accessible_scopes"===e?Array.isArray(t)&&0===t.length?void 0:t:"debug_info"===e?null:null===t?void 0:t}function dl(e){let t=!1,n=[];for(let r of e)'"'===r&&!1==(n.length>0&&"\\"===n.slice(-1)[0])&&(t=!t),t?n.push(r):n.push(":"===r?": ":","===r?", ":r);return n.join("")}function dc(e){let{abi:t,program:n}=e,r=dl(o0({abi:t,program:n},ds));return s$(al.keccak(sG(r)).toString(16))}function dd(e){let t=o7(e)?oX(e):e,n=la(ot),r=dn(t.entry_points_by_type.EXTERNAL.flatMap(e=>[e.selector,e.offset])),a=dn(t.entry_points_by_type.L1_HANDLER.flatMap(e=>[e.selector,e.offset])),i=dn(t.entry_points_by_type.CONSTRUCTOR.flatMap(e=>[e.selector,e.offset])),s=dn(t.program.builtins.map(e=>lU(e))),o=dc(t),l=dn(t.program.data);return dn([n,r,a,i,s,o,l])}function du(e){let t=e.flatMap(e=>[BigInt(e.selector),BigInt(e.offset),as(e.builtins.flatMap(e=>BigInt(lU(e))))]);return as(t)}function dh(e){var t;let n=e.bytecode.map(e=>BigInt(e)),r=null!=(t=e.bytecode_segment_lengths)?t:[],a=0,i=r.flatMap(e=>{let t=n.slice(a,a+=e);return[BigInt(e),as(t)]});return 1n+as(i)}function df(e){let t=BigInt(lU("COMPILED_CLASS_V1")),n=du(e.entry_points_by_type.EXTERNAL),r=du(e.entry_points_by_type.L1_HANDLER),a=du(e.entry_points_by_type.CONSTRUCTOR),i=e.bytecode_segment_lengths?dh(e):as(e.bytecode.map(e=>BigInt(e)));return la(as([t,n,r,a,i]))}function dp(e){return as(e.flatMap(e=>[BigInt(e.selector),BigInt(e.function_idx)]))}function dg(e){let t=BigInt(lU("CONTRACT_CLASS_V0.1.0")),n=dp(e.entry_points_by_type.EXTERNAL),r=dp(e.entry_points_by_type.L1_HANDLER),a=dp(e.entry_points_by_type.CONSTRUCTOR),i=function(e){let t=dl(o0(e.abi,null));return BigInt(s$(al.keccak(sG(t)).toString(16)))}(e),s=as(e.sierra_program.map(e=>BigInt(e)));return la(as([t,n,r,a,i,s]))}function d_(e){let t=o7(e)?oX(e):e;return"sierra_program"in t?dg(t):dd(t)}function dm(e){let t=e.version?la(e.version):oB.V3;return t===oB.V3||t===oB.F3}function dy(e,t){let n=e.split("."),r=t.split(".");return n.every((e,t)=>"*"===e||e===r[t])}function db(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{allowAnyPatchVersion:!1};return Object.values(ob).some(n=>dy(t.allowAnyPatchVersion?function(e){let t=e.split(".");return t.length<3?e:"".concat(t[0],".").concat(t[1],".*")}(n):n,e))}function dE(e){return sQ(sw(o7(e)?e:o0(e)))}function dv(e){return Array.isArray(e)?e:oX(sK(sk(sq(e))))}function dw(){return rY(rz.randomPrivateKey())}function dT(e){if(!e)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(e))return e.map(e=>la(e));try{let{r:t,s:n}=e;return[la(t),la(n)]}catch(e){throw Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function dA(e){return lu(dT(e))}function dS(e){return lh(dT(e))}function dk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oA.get("feeMarginPercentage").maxFee;return lb(e,t)}function dx(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:oA.get("feeMarginPercentage").bounds,n=arguments.length>2?arguments[2]:void 0;if(o9(e))return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},...n&&dy("0.8",n)&&{l1_data_gas:{max_amount:"0x0",max_price_per_unit:"0x0"}}};if(oL(e))return{l2_gas:{max_amount:la(lb(e.l2_gas_consumed,t.l2_gas.max_amount)),max_price_per_unit:la(lb(e.l2_gas_price,t.l2_gas.max_price_per_unit))},l1_gas:{max_amount:la(lb(e.l1_gas_consumed,t.l1_gas.max_amount)),max_price_per_unit:la(lb(e.l1_gas_price,t.l1_gas.max_price_per_unit))},l1_data_gas:{max_amount:la(lb(e.l1_data_gas_consumed,t.l1_data_gas.max_amount)),max_price_per_unit:la(lb(e.l1_data_gas_price,t.l1_data_gas.max_price_per_unit))}};return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:void 0!==e.data_gas_consumed&&void 0!==e.data_gas_price?la(lb(BigInt(e.overall_fee)/BigInt(e.gas_price),t.l1_gas.max_amount)):la(lb(e.gas_consumed,t.l1_gas.max_amount)),max_price_per_unit:la(lb(e.gas_price,t.l1_gas.max_price_per_unit))}}}function dI(e){return{l1_gas_consumed:0n,l1_gas_price:0n,l1_data_gas_consumed:0n,l1_data_gas_price:0n,l2_gas_consumed:0n,l2_gas_price:0n,overall_fee:s9,unit:"FRI",suggestedMaxFee:s9,resourceBounds:dx(s9,void 0,e)}}function dN(e){if(e===oF.L1)return oP.L1;if(e===oF.L2)return oP.L2;throw Error("EDAM conversion")}function dC(e,t){let n=t?la(t):void 0,r=la(e);if(t&&!Object.values(oB).includes(n))throw Error("providedVersion ".concat(t," is not ETransactionVersion"));if(!Object.values(oB).includes(r))throw Error("defaultVersion ".concat(e," is not ETransactionVersion"));return t?n:r}function dR(e){if(!e)return;let t=la(e);if(t===oB.V0)return oB.F0;if(t===oB.V1)return oB.F1;if(t===oB.V2)return oB.F2;if(t===oB.V3)return oB.F3;throw Error("toFeeVersion: ".concat(t," is not supported"))}function dO(e,t){var n;return{tip:e.tip||0,paymasterData:e.paymasterData||[],accountDeploymentData:e.accountDeploymentData||[],nonceDataAvailabilityMode:e.nonceDataAvailabilityMode||oF.L1,feeDataAvailabilityMode:e.feeDataAvailabilityMode||oF.L1,resourceBounds:null!=(n=e.resourceBounds)?n:dx(s9,void 0,t)}}function dV(e){return e===oB.F2?oB.F1:e===oB.V2?oB.V1:e}function dB(e){return s$(sJ(rV(la(e),!1)))}function dD(e){return"sierra_program"in(o7(e)?oX(e):e)}function dU(e){var t;let n={...e};if(dD(e.contract)&&(!e.compiledClassHash&&e.casm&&(n.compiledClassHash=df(e.casm)),!n.compiledClassHash))throw Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(n.classHash=null!=(t=e.classHash)?t:d_(e.contract),!n.classHash)throw Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return n}sz({},{ZEROFee:()=>dI,compressProgram:()=>dE,decompressProgram:()=>dv,estimateFeeToBounds:()=>dx,estimatedFeeToMaxFee:()=>dk,formatSignature:()=>dT,getFullPublicKey:()=>dB,intDAM:()=>dN,randomAddress:()=>dw,reduceV2:()=>dV,signatureToDecimalArray:()=>dA,signatureToHexArray:()=>dS,toFeeVersion:()=>dR,toTransactionVersion:()=>dC,v3Details:()=>dO});var dF={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,ENTRYPOINT_NOT_FOUND:21,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,STORAGE_PROOF_NOT_SUPPORTED:42,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_RESOURCES_FOR_VALIDATE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63,INVALID_SUBSCRIPTION_ID:66,TOO_MANY_ADDRESSES_IN_FILTER:67,TOO_MANY_BLOCKS_BACK:68,COMPILATION_ERROR:100,INVALID_ADDRESS:150,TOKEN_NOT_SUPPORTED:151,INVALID_SIGNATURE:153,MAX_AMOUNT_TOO_LOW:154,CLASS_HASH_NOT_SUPPORTED:155,PAYMASTER_TRANSACTION_EXECUTION_ERROR:156,INVALID_TIME_BOUNDS:157,INVALID_DEPLOYMENT_DATA:158,INVALID_CLASS_HASH:159,INVALID_ID:160,UNKNOWN_ERROR:163},dP=class extends Error{constructor(e){super(e),(0,h._)(this,"name",void 0),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(e,t){let{setPrototypeOf:n}=Object;n?n(e,t):e.__proto__=t}(this,new.target.prototype),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.constructor,{captureStackTrace:n}=Error;n&&n(e,t)}(this)}},dL=class extends dP{},dM=class extends dL{get code(){return this.baseError.code}isType(e){return dF[e]===this.code}constructor(e,t,n){super("RPC: ".concat(t," with params ").concat(o0(n,null,2),"\n\n      ").concat(e.code,": ").concat(e.message,": ").concat(o0(e.data))),(0,h._)(this,"request",void 0),this.baseError=e,this.request={method:t,params:n}}};function dH(){return s3(sJ(sV.utils.randomPrivateKey()))}function dz(e){ld(e,s9,2n**160n-1n,"Ethereum Address ");let t=s$(sX(la(e)).padStart(40,"0"));return o2(!!t.match(/^(0x)?[0-9a-f]{40}$/),"Invalid Ethereum Address Format"),t}sz({},{ethRandomPrivateKey:()=>dH,validateAndParseEthAddress:()=>dz});var dZ="undefined"!=typeof globalThis&&globalThis.fetch.bind(globalThis)||"undefined"!=typeof window&&window.fetch.bind(window)||e.g.fetch.bind(e.g)||(()=>{throw new dL("'fetch()' not detected, use the 'baseFetch' constructor parameter to set it")});function dW(e){return new Promise(t=>{setTimeout(t,e)})}function dj(e){let t={...e};return delete t.sierra_program_debug_info,t.abi=dl(o0(e.abi)),t.sierra_program=dl(o0(e.sierra_program)),t.sierra_program=dE(t.sierra_program),t}function dY(e){let t=o7(e)?oX(e):e;return dD(e)?dj(t):{...t,..."program"in t&&{program:dE(t.program)}}}sz({},{Block:()=>dJ,createSierraContractClass:()=>dj,getDefaultNodeUrl:()=>dK,getDefaultNodes:()=>dG,getSupportedRpcVersions:()=>dq,parseContract:()=>dY,validBlockTags:()=>dQ,wait:()=>dW});var dK=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2?arguments[2]:void 0;t||ok.info("Using default public node url, please provide nodeUrl in provider options!");let r=dG(null!=n?n:oA.get("rpcVersion"))[null!=e?e:o_.SN_SEPOLIA],a=Math.floor(Math.random()*r.length);return r[a]};function dG(e){let t={...ov};return Object.keys(t).forEach(function(n,r){t[n]=t[n].map(t=>"".concat(t).concat(function(e){let[t,n]=e.replace(/^v/,"").split(".");return"v".concat(t,"_").concat(n)}(e)))}),t}function dq(){return[...new Set(Object.values(ob))]}var dQ=Object.values(oV),dJ=class{setIdentifier(e){if(o7(e))if(lR(e))this.number=parseInt(e,10);else if(lt(e))this.hash=e;else if(dQ.includes(e))this.tag=e;else throw TypeError("Block identifier unmanaged: ".concat(e));else o9(e)?this.hash=la(e):o8(e)?this.number=e:this.tag=oV.PENDING;if(o8(this.number)&&this.number<0)throw TypeError("Block number (".concat(this.number,") can't be negative"))}get queryIdentifier(){return null!==this.number?"blockNumber=".concat(this.number):null!==this.hash?"blockHash=".concat(this.hash):"blockNumber=".concat(this.tag)}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(e){this.setIdentifier(e)}constructor(e){(0,h._)(this,"hash",null),(0,h._)(this,"number",null),(0,h._)(this,"tag",null),(0,h._)(this,"valueOf",()=>this.number),(0,h._)(this,"toString",()=>this.hash),this.setIdentifier(e)}};sz({},{buildUDCCall:()=>d2,fromCallsToExecuteCalldata:()=>d$,fromCallsToExecuteCalldata_cairo1:()=>d0,getExecuteCalldata:()=>d1,getVersionsByType:()=>d3,transformCallsToMulticallArrays:()=>dX});var dX=e=>{let t=[],n=[];return e.forEach(e=>{let r=cF.compile(e.calldata||[]);t.push({to:ln(e.contractAddress).toString(10),selector:ln(lA(e.entrypoint)).toString(10),data_offset:n.length.toString(),data_len:r.length.toString()}),n.push(...r)}),{callArray:t,calldata:cF.compile({calldata:n})}},d$=e=>{let{callArray:t,calldata:n}=dX(e);return[...cF.compile({callArray:t}),...n]},d0=e=>{let t=e.map(e=>({contractAddress:e.contractAddress,entrypoint:e.entrypoint,calldata:Array.isArray(e.calldata)&&"__compiled__"in e.calldata?e.calldata:cF.compile(e.calldata)}));return cF.compile({orderCalls:t})},d1=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";return"1"===t?d0(e):d$(e)};function d2(e,t){let n=[].concat(e).map(e=>{let{classHash:n,salt:r,unique:a=!0,constructorCalldata:i=[]}=e,s=cF.compile(i),o=null!=r?r:dw();return{call:{contractAddress:oc.ADDRESS,entrypoint:oc.ENTRYPOINT,calldata:[n,o,lm(a),s.length,...s]},address:di(a?al.pedersen(t,o):o,n,s,a?oc.ADDRESS:0)}});return{calls:n.map(e=>e.call),addresses:n.map(e=>e.address)}}function d3(e){return"fee"===e?{v1:oB.F1,v2:oB.F2,v3:oB.F3}:{v1:oB.V1,v2:oB.V2,v3:oB.V3}}var d6={headers:{"Content-Type":"application/json"},blockIdentifier:oV.PENDING,retries:200},d5=class{readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){var e;return null!=(e=this.transactionRetryIntervalFallback)?e:5e3}setChainId(e){this.chainId=e}fetch(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:o0(r),headers:this.headers})}errorHandler(e,t,n,r){if(n)throw new dM(n,e,t);if(r instanceof dL)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){try{if(this.batchClient){let{error:n,result:r}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,n),r}let n=await this.fetch(e,t,this.requestId+=1),{error:r,result:a}=await n.json();return this.errorHandler(e,t,r),a}catch(r){var n;throw this.errorHandler(e,t,null==r||null==(n=r.response)?void 0:n.data,r),r}}async getChainId(){return null!=this.chainId||(this.chainId=await this.fetchEndpoint("starknet_chainId")),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){let e=await this.fetchEndpoint("starknet_specVersion");if(dy(this.channelSpecVersion,e)||ok.error(oT.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!db(e))throw new dL("".concat(oT.unsupportedSpecVersion,", channelId: ").concat(this.id));this.specVersion=e}return this.specVersion}getNonceForAddress(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,n=la(e),r=new dJ(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new dJ(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new dJ(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new dJ(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new dJ(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new dJ(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new dJ(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){let t=la(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){let n=new dJ(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}getTransactionReceipt(e){let t=la(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){let t=la(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){let t=la(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:a=!0}=t,i=new dJ(n).identifier,s=[];return r&&s.push(B.ESimulationFlag.SKIP_VALIDATE),a&&s.push(B.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map(e=>this.buildTransaction(e)),simulation_flags:s})}async waitForTransaction(e,t){var n,r,a;let i,s=la(e),{retries:o}=this,l=!1,c=!1,d=null!=(n=null==t?void 0:t.retryInterval)?n:this.transactionRetryIntervalDefault,u=null!=(r=null==t?void 0:t.errorStates)?r:[B.ETransactionStatus.REJECTED],h=null!=(a=null==t?void 0:t.successStates)?a:[B.ETransactionExecutionStatus.SUCCEEDED,B.ETransactionStatus.ACCEPTED_ON_L2,B.ETransactionStatus.ACCEPTED_ON_L1];for(;!l;){await dW(d);try{let e=(i=await this.getTransactionStatus(s)).execution_status,t=i.finality_status;if(!t)throw Error("waiting for transaction status");if(u.includes(e)||u.includes(t)){let n="".concat(e,": ").concat(t),r=Error(n);throw r.response=i,c=!0,r}(h.includes(e)||h.includes(t))&&(l=!0)}catch(e){if(e instanceof Error&&c)throw e;if(o<=0)throw Error("waitForTransaction timed-out with retries ".concat(this.retries))}o-=1}let f=null;for(;null===f;){try{f=await this.getTransactionReceipt(s)}catch(e){if(o<=0)throw Error("waitForTransaction timed-out with retries ".concat(this.retries))}o-=1,await dW(d)}return f}getStorageAt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.blockIdentifier,r=la(e),a=ls(t),i=new dJ(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:a,block_id:i})}getClassHashAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,n=la(e),r=new dJ(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,n=la(e),r=new dJ(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,n=la(e),r=new dJ(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(e,t){let{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0}=t,a=new dJ(n).identifier,i={simulation_flags:r?[B.ESimulationFlag.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:e.map(e=>this.buildTransaction(e,"fee")),block_id:a,...i})}async invoke(e,t){let n;return dm(t)?(n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:B.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:cF.toHex(e.calldata),version:B.ETransactionVersion.V3,signature:dS(e.signature),nonce:la(t.nonce),resource_bounds:t.resourceBounds,tip:la(t.tip),paymaster_data:t.paymasterData.map(e=>la(e)),account_deployment_data:t.accountDeploymentData.map(e=>la(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}),o3(!t.maxFee,()=>{ok.warn(oT.maxFeeInV3,{type:B.ETransactionType.INVOKE})})):(n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:cF.toHex(e.calldata),type:B.ETransactionType.INVOKE,max_fee:la(t.maxFee||0),version:B.ETransactionVersion.V1,signature:dS(e.signature),nonce:la(t.nonce)}}),ok.warn(oT.legacyTxWarningMessage,{version:B.ETransactionVersion.V1,type:B.ETransactionType.INVOKE})),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare(e,t){let n,{contract:r,signature:a,senderAddress:i,compiledClassHash:s}=e;if(dD(r)||dm(t))if(dD(r)&&!dm(t))n=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:B.ETransactionType.DECLARE,contract_class:{sierra_program:dv(r.sierra_program),contract_class_version:r.contract_class_version,entry_points_by_type:r.entry_points_by_type,abi:r.abi},compiled_class_hash:s||"",version:B.ETransactionVersion.V2,max_fee:la(t.maxFee||0),signature:dS(a),sender_address:i,nonce:la(t.nonce)}}),ok.warn(oT.legacyTxWarningMessage,{version:B.ETransactionVersion.V2,type:B.ETransactionType.DECLARE});else if(dD(r)&&dm(t))n=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:B.ETransactionType.DECLARE,sender_address:i,compiled_class_hash:s||"",version:B.ETransactionVersion.V3,signature:dS(a),nonce:la(t.nonce),contract_class:{sierra_program:dv(r.sierra_program),contract_class_version:r.contract_class_version,entry_points_by_type:r.entry_points_by_type,abi:r.abi},resource_bounds:t.resourceBounds,tip:la(t.tip),paymaster_data:t.paymasterData.map(e=>la(e)),account_deployment_data:t.accountDeploymentData.map(e=>la(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}),o3(!t.maxFee,()=>{ok.warn(oT.maxFeeInV3,{type:B.ETransactionType.DECLARE})});else throw Error("declare unspotted parameters");else n=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:B.ETransactionType.DECLARE,contract_class:{program:r.program,entry_points_by_type:r.entry_points_by_type,abi:r.abi},version:B.ETransactionVersion.V1,max_fee:la(t.maxFee||0),signature:dS(a),sender_address:i,nonce:la(t.nonce)}}),ok.warn(oT.legacyTxWarningMessage,{version:B.ETransactionVersion.V1,type:B.ETransactionType.DECLARE});return this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async deployAccount(e,t){let n,{classHash:r,constructorCalldata:a,addressSalt:i,signature:s}=e;return dm(t)?(n=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:B.ETransactionType.DEPLOY_ACCOUNT,version:B.ETransactionVersion.V3,signature:dS(s),nonce:la(t.nonce),contract_address_salt:la(i||0),constructor_calldata:cF.toHex(a||[]),class_hash:la(r),resource_bounds:t.resourceBounds,tip:la(t.tip),paymaster_data:t.paymasterData.map(e=>la(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}),o3(!t.maxFee,()=>{ok.warn(oT.maxFeeInV3,{type:B.ETransactionType.DEPLOY_ACCOUNT})})):(n=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:cF.toHex(a||[]),class_hash:la(r),contract_address_salt:la(i||0),type:B.ETransactionType.DEPLOY_ACCOUNT,max_fee:la(t.maxFee||0),version:B.ETransactionVersion.V1,signature:dS(s),nonce:la(t.nonce)}}),ok.warn(oT.legacyTxWarningMessage,{version:B.ETransactionVersion.V1,type:B.ETransactionType.DEPLOY_ACCOUNT})),this.waitMode?this.waitForTransaction((await n).transaction_hash):n}callContract(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,n=new dJ(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:lA(e.entrypoint),calldata:cF.toHex(e.calldata)},block_id:n})}estimateMessageFee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,{from_address:n,to_address:r,entry_point_selector:a,payload:i}=e,s={from_address:dz(n),to_address:la(r),entry_point_selector:lS(a),payload:l_(i)},o=new dJ(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){let n,r=d3(t);if(dm(e)?(n={signature:dS(e.signature),nonce:la(e.nonce),resource_bounds:e.resourceBounds,tip:la(e.tip),paymaster_data:e.paymasterData.map(e=>la(e)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(e=>la(e))},o3(!e.maxFee,()=>{ok.warn(oT.maxFeeInV3,{type:e.type,versionType:t})})):(n={signature:dS(e.signature),nonce:la(e.nonce),max_fee:la(e.maxFee||0)},ok.warn(oT.legacyTxWarningMessage,{version:e.version,type:e.type})),e.type===oN.INVOKE)return{type:B.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:cF.toHex(e.calldata),version:la(e.version||r.v3),...n};if(e.type===oN.DECLARE)return dD(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:dv(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:la(e.version||r.v3),...n}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:la(e.version||r.v1),...n};if(e.type===oN.DEPLOY_ACCOUNT){let{account_deployment_data:t,...a}=n;return{type:e.type,constructor_calldata:cF.toHex(e.constructorCalldata||[]),class_hash:la(e.classHash),contract_address_salt:la(e.addressSalt||0),version:la(e.version||r.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}constructor(e){(0,h._)(this,"id","RPC071"),(0,h._)(this,"channelSpecVersion",ob.v0_7_1),(0,h._)(this,"nodeUrl",void 0),(0,h._)(this,"headers",void 0),(0,h._)(this,"requestId",void 0),(0,h._)(this,"blockIdentifier",void 0),(0,h._)(this,"retries",void 0),(0,h._)(this,"waitMode",void 0),(0,h._)(this,"chainId",void 0),(0,h._)(this,"specVersion",void 0),(0,h._)(this,"transactionRetryIntervalFallback",void 0),(0,h._)(this,"batchClient",void 0),(0,h._)(this,"baseFetch",void 0);let{baseFetch:t,batch:n,blockIdentifier:r,chainId:a,headers:i,nodeUrl:s,retries:o,specVersion:l,transactionRetryIntervalFallback:c,waitMode:d}=e||{};Object.values(o_).includes(s)?this.nodeUrl=dK(s,null==e?void 0:e.default,this.channelSpecVersion):s?this.nodeUrl=s:this.nodeUrl=dK(void 0,null==e?void 0:e.default,this.channelSpecVersion),this.baseFetch=t||oA.get("fetch")||dZ,this.blockIdentifier=null!=r?r:d6.blockIdentifier,this.chainId=a,this.headers={...d6.headers,...i},this.retries=null!=o?o:d6.retries,this.specVersion=l,this.transactionRetryIntervalFallback=c,this.waitMode=null!=d&&d,this.requestId=0,"number"==typeof n&&(this.batchClient=new o1({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch})),ok.debug("Using Channel",this.id)}},d8={};sz(d8,{RpcChannel:()=>d9});var d4={headers:{"Content-Type":"application/json"},blockIdentifier:oV.PENDING,retries:200},d9=class{readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){var e;return null!=(e=this.transactionRetryIntervalFallback)?e:5e3}setChainId(e){this.chainId=e}fetch(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:o0(r),headers:this.headers})}errorHandler(e,t,n,r){if(n)throw new dM(n,e,t);if(r instanceof dL)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){try{if(this.batchClient){let{error:n,result:r}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,n),r}let n=await this.fetch(e,t,this.requestId+=1),{error:r,result:a}=await n.json();return this.errorHandler(e,t,r),a}catch(r){var n;throw this.errorHandler(e,t,null==r||null==(n=r.response)?void 0:n.data,r),r}}async getChainId(){return null!=this.chainId||(this.chainId=await this.fetchEndpoint("starknet_chainId")),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){let e=await this.fetchEndpoint("starknet_specVersion");if(dy(this.channelSpecVersion,e)||ok.error(oT.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!db(e))throw new dL("".concat(oT.unsupportedSpecVersion,", channelId: ").concat(this.id));this.specVersion=e}return this.specVersion}getMessagesStatus(e){let t=la(e);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:t})}getStorageProof(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.blockIdentifier,a=new dJ(r).identifier,i=lh(e),s=lh(t);return this.fetchEndpoint("starknet_getStorageProof",{block_id:a,class_hashes:i,contract_addresses:s,contracts_storage_keys:n})}getCompiledCasm(e){let t=la(e);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:t})}getNonceForAddress(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,n=la(e),r=new dJ(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:n,block_id:r})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new dJ(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new dJ(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new dJ(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new dJ(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new dJ(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new dJ(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){let t=la(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){let n=new dJ(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:n,index:t})}getTransactionReceipt(e){let t=la(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){let t=la(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){let t=la(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0,skipFeeCharge:a=!0}=t,i=new dJ(n).identifier,s=[];return r&&s.push(ek.ESimulationFlag.SKIP_VALIDATE),a&&s.push(ek.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map(e=>this.buildTransaction(e)),simulation_flags:s})}async waitForTransaction(e,t){var n,r,a;let i,s=la(e),{retries:o}=this,l=!1,c=!1,d=null!=(n=null==t?void 0:t.retryInterval)?n:this.transactionRetryIntervalDefault,u=null!=(r=null==t?void 0:t.errorStates)?r:[ek.ETransactionStatus.REJECTED],h=null!=(a=null==t?void 0:t.successStates)?a:[ek.ETransactionExecutionStatus.SUCCEEDED,ek.ETransactionStatus.ACCEPTED_ON_L2,ek.ETransactionStatus.ACCEPTED_ON_L1];for(;!l;){await dW(d);try{let e=(i=await this.getTransactionStatus(s)).execution_status,t=i.finality_status;if(!t)throw Error("waiting for transaction status");if(u.includes(e)||u.includes(t)){let n="".concat(e,": ").concat(t),r=Error(n);throw r.response=i,c=!0,r}(h.includes(e)||h.includes(t))&&(l=!0)}catch(e){if(e instanceof Error&&c)throw e;if(o<=0)throw Error("waitForTransaction timed-out with retries ".concat(this.retries))}o-=1}let f=null;for(;null===f;){try{f=await this.getTransactionReceipt(s)}catch(e){if(o<=0)throw Error("waitForTransaction timed-out with retries ".concat(this.retries))}o-=1,await dW(d)}return f}getStorageAt(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.blockIdentifier,r=la(e),a=ls(t),i=new dJ(n).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:r,key:a,block_id:i})}getClassHashAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,n=la(e),r=new dJ(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:r,contract_address:n})}getClass(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,n=la(e),r=new dJ(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:n,block_id:r})}getClassAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,n=la(e),r=new dJ(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:r,contract_address:n})}async getEstimateFee(e,t){let{blockIdentifier:n=this.blockIdentifier,skipValidate:r=!0}=t,a=new dJ(n).identifier,i={simulation_flags:r?[ek.ESimulationFlag.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:e.map(e=>this.buildTransaction(e,"fee")),block_id:a,...i})}async invoke(e,t){let n;if(dm(t))if(oM(t.resourceBounds))n=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:ek.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:cF.toHex(e.calldata),version:ek.ETransactionVersion.V3,signature:dS(e.signature),nonce:la(t.nonce),resource_bounds:t.resourceBounds,tip:la(t.tip),paymaster_data:t.paymasterData.map(e=>la(e)),account_deployment_data:t.accountDeploymentData.map(e=>la(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}});else throw Error(oT.SWOldV3);else throw Error(oT.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async declare(e,t){let n,{contract:r,signature:a,senderAddress:i,compiledClassHash:s}=e;if(dD(r)&&dm(t))if(oM(t.resourceBounds))n=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:ek.ETransactionType.DECLARE,sender_address:i,compiled_class_hash:s||"",version:ek.ETransactionVersion.V3,signature:dS(a),nonce:la(t.nonce),contract_class:{sierra_program:dv(r.sierra_program),contract_class_version:r.contract_class_version,entry_points_by_type:r.entry_points_by_type,abi:r.abi},resource_bounds:t.resourceBounds,tip:la(t.tip),paymaster_data:t.paymasterData.map(e=>la(e)),account_deployment_data:t.accountDeploymentData.map(e=>la(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}});else throw Error(oT.SWOldV3);else throw Error(oT.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await n).transaction_hash):n}async deployAccount(e,t){let n,{classHash:r,constructorCalldata:a,addressSalt:i,signature:s}=e;if(dm(t))if(oM(t.resourceBounds))n=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:ek.ETransactionType.DEPLOY_ACCOUNT,version:ek.ETransactionVersion.V3,signature:dS(s),nonce:la(t.nonce),contract_address_salt:la(i||0),constructor_calldata:cF.toHex(a||[]),class_hash:la(r),resource_bounds:t.resourceBounds,tip:la(t.tip),paymaster_data:t.paymasterData.map(e=>la(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}});else throw Error(oT.SWOldV3);else throw Error(oT.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await n).transaction_hash):n}callContract(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,n=new dJ(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:lA(e.entrypoint),calldata:cF.toHex(e.calldata)},block_id:n})}estimateMessageFee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,{from_address:n,to_address:r,entry_point_selector:a,payload:i}=e,s={from_address:dz(n),to_address:la(r),entry_point_selector:lS(a),payload:l_(i)},o=new dJ(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){let n,r=d3(t);if(dm(e))n={signature:dS(e.signature),nonce:la(e.nonce),resource_bounds:e.resourceBounds,tip:la(e.tip),paymaster_data:e.paymasterData.map(e=>la(e)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(e=>la(e))};else throw Error("v0,v1,v2 tx are not supported on RPC 0.8");if(e.type===oN.INVOKE)return{type:ek.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:cF.toHex(e.calldata),version:la(e.version||r.v3),...n};if(e.type===oN.DECLARE){if(!dD(e.contract))throw ok.error("Cairo 0 -  non Sierra v1 tx are not supported"),Error("Declaring non Sierra contract using RPC 0.8");return{type:e.type,contract_class:{...e.contract,sierra_program:dv(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:la(e.version||r.v3),...n}}if(e.type===oN.DEPLOY_ACCOUNT){let{account_deployment_data:t,...a}=n;return{type:e.type,constructor_calldata:cF.toHex(e.constructorCalldata||[]),class_hash:la(e.classHash),contract_address_salt:la(e.addressSalt||0),version:la(e.version||r.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}constructor(e){(0,h._)(this,"id","RPC081"),(0,h._)(this,"channelSpecVersion",ob.v0_8_1),(0,h._)(this,"nodeUrl",void 0),(0,h._)(this,"headers",void 0),(0,h._)(this,"requestId",void 0),(0,h._)(this,"blockIdentifier",void 0),(0,h._)(this,"retries",void 0),(0,h._)(this,"waitMode",void 0),(0,h._)(this,"chainId",void 0),(0,h._)(this,"specVersion",void 0),(0,h._)(this,"transactionRetryIntervalFallback",void 0),(0,h._)(this,"batchClient",void 0),(0,h._)(this,"baseFetch",void 0);let{baseFetch:t,batch:n,blockIdentifier:r,chainId:a,headers:i,nodeUrl:s,retries:o,specVersion:l,transactionRetryIntervalFallback:c,waitMode:d}=e||{};Object.values(o_).includes(s)?this.nodeUrl=dK(s,null==e?void 0:e.default,this.channelSpecVersion):s?this.nodeUrl=s:this.nodeUrl=dK(void 0,null==e?void 0:e.default,this.channelSpecVersion),this.baseFetch=t||oA.get("fetch")||dZ,this.blockIdentifier=null!=r?r:d4.blockIdentifier,this.chainId=a,this.headers={...d4.headers,...i},this.retries=null!=o?o:d4.retries,this.specVersion=l,this.transactionRetryIntervalFallback=c,this.waitMode=null!=d&&d,this.requestId=0,"number"==typeof n&&(this.batchClient=new o1({nodeUrl:this.nodeUrl,headers:this.headers,interval:n,baseFetch:this.baseFetch})),ok.debug("Using Channel",this.id)}};"undefined"!=typeof WebSocket&&WebSocket||"undefined"!=typeof globalThis&&globalThis.WebSocket||"undefined"!=typeof window&&window.WebSocket&&window.WebSocket.bind(window)||e.g.WebSocket;var d7=class{estimatedFeeToMaxFee(e){var t;return dk(e,null==(t=this.margin)?void 0:t.maxFee)}estimateFeeToBounds(e){var t;return dx(e,null==(t=this.margin)?void 0:t.bounds)}parseGetBlockResponse(e){return e}parseTransactionReceipt(e){return e}parseFeeEstimateResponse(e){var t,n,r,a,i,s,o,l,c,d;let u=e[0];return{overall_fee:ln(u.overall_fee),unit:u.unit,l1_gas_consumed:null!=(n=null!=(t=lr(u.l1_gas_consumed))?t:lr(u.gas_consumed))?n:0n,l1_gas_price:null!=(a=null!=(r=lr(u.l1_gas_price))?r:lr(u.gas_price))?a:0n,l2_gas_consumed:null!=(i=lr(u.l2_gas_consumed))?i:void 0,l2_gas_price:null!=(s=lr(u.l2_gas_price))?s:void 0,l1_data_gas_consumed:null!=(l=null!=(o=lr(u.l1_data_gas_consumed))?o:lr(u.data_gas_consumed))?l:0n,l1_data_gas_price:null!=(d=null!=(c=lr(u.l1_data_gas_price))?c:lr(u.gas_price))?d:0n,suggestedMaxFee:this.estimatedFeeToMaxFee(u.overall_fee),resourceBounds:this.estimateFeeToBounds(u)}}parseFeeEstimateBulkResponse(e){return e.map(e=>{var t,n,r,a,i,s,o,l,c,d;return{overall_fee:ln(e.overall_fee),unit:e.unit,l1_gas_consumed:null!=(n=null!=(t=lr(e.l1_gas_consumed))?t:lr(e.gas_consumed))?n:0n,l1_gas_price:null!=(a=null!=(r=lr(e.l1_gas_price))?r:lr(e.gas_price))?a:0n,l2_gas_consumed:null!=(i=lr(e.l2_gas_consumed))?i:void 0,l2_gas_price:null!=(s=lr(e.l2_gas_price))?s:void 0,l1_data_gas_consumed:null!=(l=null!=(o=lr(e.l1_data_gas_consumed))?o:lr(e.data_gas_consumed))?l:0n,l1_data_gas_price:null!=(d=null!=(c=lr(e.l1_data_gas_price))?c:lr(e.gas_price))?d:0n,suggestedMaxFee:this.estimatedFeeToMaxFee(e.overall_fee),resourceBounds:this.estimateFeeToBounds(e)}})}parseSimulateTransactionResponse(e){return e.map(e=>({...e,suggestedMaxFee:this.estimatedFeeToMaxFee(e.fee_estimation.overall_fee),resourceBounds:this.estimateFeeToBounds(e.fee_estimation)}))}parseContractClassResponse(e){return{...e,abi:o7(e.abi)?JSON.parse(e.abi):e.abi}}parseL1GasPriceResponse(e){return e.l1_gas_price.price_in_wei}constructor(e){(0,h._)(this,"margin",void 0),this.margin=e}},ue=class e{match(e){return this.statusReceipt in e?e[this.statusReceipt](this.value):e._()}isSuccess(){return"success"===this.statusReceipt}isReverted(){return"reverted"===this.statusReceipt}isError(){return"error"===this.statusReceipt}static isSuccess(e){return e.execution_status===oR.SUCCEEDED}static isReverted(e){return e.execution_status===oR.REVERTED}constructor(t){for(let[n]of((0,h._)(this,"statusReceipt",void 0),(0,h._)(this,"value",void 0),[this.statusReceipt,this.value]=e.isSuccess(t)?["success",t]:e.isReverted(t)?["reverted",t]:["error",Error("Unknown response type")],Object.entries(this)))Object.defineProperty(this,n,{enumerable:!1});for(let[e,n]of Object.entries(t))Object.defineProperty(this,e,{enumerable:!0,writable:!1,value:n})}};sz({},{encodeData:()=>up,encodeType:()=>uu,encodeValue:()=>uf,getDependencies:()=>ud,getMessageHash:()=>u_,getStructHash:()=>ug,getTypeHash:()=>uh,isMerkleTreeType:()=>uc,prepareSelector:()=>ul,validateTypedData:()=>uo,verifyMessage:()=>um}),sz({},{MerkleTree:()=>ut,proofMerklePath:()=>function e(t,n,r){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:de;if(0===r.length)return t===n;let[i,...s]=r;return e(t,ut.hash(n,i,a),s,a)}});var ut=class e{build(t){if(1===t.length)return t[0];t.length!==this.leaves.length&&this.branches.push(t);let n=[];for(let r=0;r<t.length;r+=2)r+1===t.length?n.push(e.hash(t[r],"0x0",this.hashMethod)):n.push(e.hash(t[r],t[r+1],this.hashMethod));return this.build(n)}static hash(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:de,[r,a]=[BigInt(e),BigInt(t)].sort((e,t)=>e>=t?1:-1);return n(r,a)}getProof(t){var n,r;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.leaves,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],s=a.indexOf(t);if(-1===s)throw Error("leaf not found");if(1===a.length)return i;let o=s%2==0,l=null!=(n=o?a[s+1]:a[s-1])?n:"0x0",c=[...i,l],d=this.leaves.length===a.length?-1:this.branches.findIndex(e=>e.length===a.length),u=null!=(r=this.branches[d+1])?r:[this.root];return this.getProof(e.hash(o?t:l,o?l:t,this.hashMethod),u,c)}constructor(e,t=de){(0,h._)(this,"leaves",void 0),(0,h._)(this,"branches",[]),(0,h._)(this,"root",void 0),(0,h._)(this,"hashMethod",void 0),this.hashMethod=t,this.leaves=e,this.root=this.build(e)}},un={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},ur={[C.ACTIVE]:{domain:"StarknetDomain",hashMethod:da,hashMerkleMethod:dt,escapeTypeString:e=>'"'.concat(e,'"'),presetTypes:un},[C.LEGACY]:{domain:"StarkNetDomain",hashMethod:dr,hashMerkleMethod:de,escapeTypeString:e=>e,presetTypes:{}}};function ua(e,t,n){let{min:r,max:a}=n,i=BigInt(e);o2(i>=r&&i<=a,"".concat(i," (").concat(t,") is out of bounds [").concat(r,", ").concat(a,"]"))}function ui(e){var t,n;let{types:r,domain:a}=e;return ur[C.ACTIVE].domain in r&&(null==(t=a.revision)?void 0:t.toString())===C.ACTIVE?C.ACTIVE:ur[C.LEGACY].domain in r&&(null!=(n=a.revision)?n:C.LEGACY)===C.LEGACY?C.LEGACY:void 0}function us(e){try{return la(e)}catch(t){if(o7(e))return la(lU(e));throw Error("Invalid BigNumberish: ".concat(e))}}function uo(e){return!!(e.message&&e.primaryType&&e.types&&ui(e))}function ul(e){return lt(e)?e:lA(e)}function uc(e){return"merkletree"===e.type}function ud(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:C.LEGACY,i=[t];return"*"===t[t.length-1]?i=[t.slice(0,-1)]:a===C.ACTIVE&&("enum"===t?i=[r]:t.match(/^\(.*\)$/)&&(i=t.slice(1,-1).split(",").map(e=>"*"===e[e.length-1]?e.slice(0,-1):e))),i.filter(t=>!n.includes(t)&&e[t]).reduce((t,n)=>[...t,...[n,...e[n].reduce((t,n)=>[...t,...ud(e,n.type,t,n.contains,a).filter(e=>!t.includes(e))],[])].filter(e=>!t.includes(e))],[])}function uu(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C.LEGACY,r=n===C.ACTIVE?{...e,...ur[n].presetTypes}:e,[a,...i]=ud(r,t,void 0,void 0,n),s=a?[a,...i.sort()]:[],o=ur[n].escapeTypeString;return s.map(e=>{let t=r[e].map(e=>{let t="enum"===e.type&&n===C.ACTIVE?e.contains:e.type,r=t.match(/^\(.*\)$/)?"(".concat(t.slice(1,-1).split(",").map(e=>e?o(e):e).join(","),")"):o(t);return"".concat(o(e.name),":").concat(r)});return"".concat(o(e),"(").concat(t,")")}).join("")}function uh(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:C.LEGACY;return lA(uu(e,t,n))}function uf(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:C.LEGACY;if(e[t])return[t,ug(e,t,n,a)];if(ur[a].presetTypes[t])return[t,ug(ur[a].presetTypes,t,n,a)];if(t.endsWith("*")){let r=n.map(n=>uf(e,t.slice(0,-1),n,void 0,a)[1]);return[t,ur[a].hashMethod(r)]}switch(t){case"enum":if(a===C.ACTIVE){let[i,s]=Object.entries(n)[0],o=e[r.parent].find(e=>e.name===r.key),l=e[o.contains],c=l.find(e=>e.name===i),d=l.indexOf(c),u=c.type.slice(1,-1).split(",").map((t,n)=>t?uf(e,t,s[n],void 0,a)[1]:t);return[t,ur[a].hashMethod([d,...u])]}return[t,us(n)];case"merkletree":{let t=function(e,t){if(t.parent&&t.key){let n=e[t.parent].find(e=>e.name===t.key);if(!uc(n))throw Error("".concat(t.key," is not a merkle tree"));if(n.contains.endsWith("*"))throw Error("Merkle tree contain property must not be an array but was given ".concat(t.key));return n.contains}return"raw"}(e,r),{root:i}=new ut(n.map(n=>uf(e,t,n,void 0,a)[1]),ur[a].hashMerkleMethod);return["felt",i]}case"selector":return["felt",ul(n)];case"string":if(a===C.ACTIVE){let e=lL(n),r=[e.data.length,...e.data,e.pending_word,e.pending_word_len];return[t,ur[a].hashMethod(r)]}return[t,us(n)];case"i128":if(a===C.ACTIVE){let e=BigInt(n);return ua(e,t,oo),[t,us(e<0n?on+e:e)]}return[t,us(n)];case"timestamp":case"u128":return a===C.ACTIVE&&ua(n,t,ol),[t,us(n)];case"felt":case"shortstring":return a===C.ACTIVE&&ua(us(n),t,os),[t,us(n)];case"ClassHash":case"ContractAddress":return a===C.ACTIVE&&ua(n,t,os),[t,us(n)];case"bool":return a===C.ACTIVE&&o2(o4(n),"Type mismatch for ".concat(t," ").concat(n)),[t,us(n)];default:if(a===C.ACTIVE)throw Error("Unsupported type: ".concat(t));return[t,us(n)]}}function up(e,t,n){var r;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:C.LEGACY,[i,s]=(null!=(r=e[t])?r:ur[a].presetTypes[t]).reduce((r,i)=>{let[s,o]=r;if(void 0===n[i.name]||null===n[i.name]&&"enum"!==i.type)throw Error("Cannot encode data: missing data for '".concat(i.name,"'"));let l=n[i.name],c={parent:t,key:i.name},[d,u]=uf(e,i.type,l,c,a);return[[...s,d],[...o,u]]},[["felt"],[uh(e,t,a)]]);return[i,s]}function ug(e,t,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:C.LEGACY;return ur[r].hashMethod(up(e,t,n,r)[1])}function u_(e,t){if(!uo(e))throw Error("Typed data does not match JSON schema");let n=ui(e),{domain:r,hashMethod:a}=ur[n];return a([lU("StarkNet Message"),ug(e.types,r,e.domain,n),t,ug(e.types,e.primaryType,e.message,n)])}function um(e,t,n,r){let a=uo(e);if(!lv(e)&&!a)throw Error("message has a wrong format.");if(a&&void 0===r)throw Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(a&&!lv(r))throw Error("accountAddress shall be a BigNumberish");let i=a?u_(e,r):la(e),s=Array.isArray(t)?new al.Signature(BigInt(t[0]),BigInt(t[1])):t,o=la(n);return al.verify(s,i,o)}var uy=class{static async create(e){let t=new ox.RpcChannel({...e}),n=await t.getSpecVersion();if(db(n)||ok.warn("Using incompatible node spec version ".concat(n)),dy("0.7",n))return new this({...e,specVersion:ob.v0_7_1});if(dy("0.8",n))return new this({...e,specVersion:ob.v0_8_1});throw new dL("Provided RPC node specification version ".concat(n," is not compatible with the SDK. SDK supported RPC versions ").concat(Object.keys(ob).toString()))}fetch(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.channel.fetch(e,t,n)}async getChainId(){return this.channel.getChainId()}readSpecVersion(){return this.channel.readSpecVersion()}async getSpecVersion(){return this.channel.getSpecVersion()}setUpSpecVersion(){return this.channel.setUpSpecVersion()}async getNonceForAddress(e,t){return this.channel.getNonceForAddress(e,t)}async getBlock(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(e){return this.channel.getBlockWithTxHashes(e)}async getBlockWithTxs(e){return this.channel.getBlockWithTxs(e)}async waitForBlock(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pending",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;if(e===oV.LATEST)return;let n=await this.getBlockNumber(),r=e===oV.PENDING?n+1:Number(la(e));if(r<=n)return;let{retries:a}=this.channel,i=a,s=!1;for(;!s;)if(await this.getBlockNumber()===r?s=!0:await dW(t),(i-=1)<=0)throw Error("waitForBlock() timed-out after ".concat(a," tries."))}async getL1GasPrice(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseL1GasPriceResponse)}async getL1MessageHash(e){let t=await this.channel.getTransactionByHash(e);o2("L1_HANDLER"===t.type,"This L2 transaction is not a L1 message.");let{calldata:n,contract_address:r,entry_point_selector:a,nonce:i}=t;return lk([n[0],r,i,a,n.length-1,...n.slice(1)])}async getBlockWithReceipts(e){return this.channel.getBlockWithReceipts(e)}async getBlockStateUpdate(e){return this.channel.getBlockStateUpdate(e)}async getBlockTransactionsTraces(e){return this.channel.getBlockTransactionsTraces(e)}async getBlockTransactionCount(e){return this.channel.getBlockTransactionCount(e)}async getTransaction(e){return this.channel.getTransactionByHash(e)}async getTransactionByHash(e){return this.channel.getTransactionByHash(e)}async getTransactionByBlockIdAndIndex(e,t){return this.channel.getTransactionByBlockIdAndIndex(e,t)}async getTransactionReceipt(e){let t=await this.channel.getTransactionReceipt(e);return new ue(this.responseParser.parseTransactionReceipt(t))}async getTransactionTrace(e){return this.channel.getTransactionTrace(e)}async getTransactionStatus(e){return this.channel.getTransactionStatus(e)}async getSimulateTransaction(e,t){return this.channel.simulateTransaction(e,t).then(e=>this.responseParser.parseSimulateTransactionResponse(e))}async waitForTransaction(e,t){return new ue(await this.channel.waitForTransaction(e,t))}async getStorageAt(e,t,n){return this.channel.getStorageAt(e,t,n)}async getClassHashAt(e,t){return this.channel.getClassHashAt(e,t)}async getClassByHash(e){return this.getClass(e)}async getClass(e,t){return this.channel.getClass(e,t).then(this.responseParser.parseContractClassResponse)}async getClassAt(e,t){return this.channel.getClassAt(e,t).then(this.responseParser.parseContractClassResponse)}async getContractVersion(e,t){let n,{blockIdentifier:r=this.channel.blockIdentifier,compiler:a=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e)n=await this.getClassAt(e,r);else if(t)n=await this.getClass(t,r);else throw Error("getContractVersion require contractAddress or classHash");return dD(n)?a?{cairo:"1",compiler:cs(n.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getInvokeEstimateFee(e,t,n,r){return this.channel.getEstimateFee([{type:oN.INVOKE,...e,...t}],{blockIdentifier:n,skipValidate:r}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getDeclareEstimateFee(e,t,n,r){return this.channel.getEstimateFee([{type:oN.DECLARE,...e,...t}],{blockIdentifier:n,skipValidate:r}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getDeployAccountEstimateFee(e,t,n,r){return this.channel.getEstimateFee([{type:oN.DEPLOY_ACCOUNT,...e,...t}],{blockIdentifier:n,skipValidate:r}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getEstimateFeeBulk(e,t){return this.channel.getEstimateFee(e,t).then(e=>this.responseParser.parseFeeEstimateBulkResponse(e))}async invokeFunction(e,t){return this.channel.invoke(e,t)}async declareContract(e,t){return this.channel.declare(e,t)}async deployAccountContract(e,t){return this.channel.deployAccount(e,t)}async callContract(e,t){return this.channel.callContract(e,t)}async estimateMessageFee(e,t){return this.channel.estimateMessageFee(e,t)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(e){return this.channel.getEvents(e)}async verifyMessageInStarknet(e,t,n,r,a){let i,s=uo(e);if(!lv(e)&&!s)throw Error("message has a wrong format.");if(!lv(n))throw Error("accountAddress shall be a BigNumberish");let o=s?u_(e,n):la(e),l=a||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","0x617267656e742f696e76616c69642d7369676e6174757265","is invalid, with respect to the public key","0x697320696e76616c6964","INVALID_SIG","0x494e56414c49445f534947"]};for(let e of r?[r]:["isValidSignature","is_valid_signature"])try{let r=await this.callContract({contractAddress:la(n),entrypoint:e,calldata:cF.compile({hash:ln(o).toString(),signature:dT(t)})});if(l.nokResponse.includes(r[0].toString()))return!1;if(0===l.okResponse.length||l.okResponse.includes(r[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(e){if(l.error.some(t=>e.message.includes(t)))return!1;i=e}throw Error("Signature verification Error: ".concat(i))}async isClassDeclared(e,t){let n;if(!e.classHash&&"contract"in e)n=dU(e).classHash;else if(e.classHash)n=e.classHash;else throw Error("contractClassIdentifier type not satisfied");try{return await this.getClass(n,t) instanceof Object}catch(e){if(e instanceof dL)return!1;throw e}}async prepareInvocations(e){let t=[];for(let n of e)n.type===oN.DECLARE?await this.isClassDeclared("payload"in n?n.payload:n)||t.unshift(n):t.push(n);return t}async getL1MessagesStatus(e){if(this.channel instanceof d8.RpcChannel)return this.channel.getMessagesStatus(e);throw new dL("Unsupported method for RPC version")}async getStorageProof(e,t,n,r){if(this.channel instanceof d8.RpcChannel)return this.channel.getStorageProof(e,t,n,r);throw new dL("Unsupported method for RPC version")}async getCompiledCasm(e){if(this.channel instanceof d8.RpcChannel)return this.channel.getCompiledCasm(e);throw new dL("Unsupported method for RPC version")}constructor(e){if((0,h._)(this,"responseParser",void 0),(0,h._)(this,"channel",void 0),(0,h._)(this,"getStateUpdate",this.getBlockStateUpdate),e&&"channel"in e)this.channel=e.channel,this.responseParser="responseParser"in e?e.responseParser:new d7;else{if(e&&e.specVersion)if(dy("0.8",e.specVersion))this.channel=new d8.RpcChannel({...e,waitMode:!1});else if(dy("0.7",e.specVersion))this.channel=new ox.RpcChannel({...e,waitMode:!1});else throw Error("unsupported channel for spec version: ".concat(e.specVersion));else if(dy("0.8",oA.get("rpcVersion")))this.channel=new d8.RpcChannel({...e,waitMode:!1});else if(dy("0.7",oA.get("rpcVersion")))this.channel=new ox.RpcChannel({...e,waitMode:!1});else throw Error("unable to define spec version for channel");this.responseParser=new d7(null==e?void 0:e.feeMarginPercentage)}}};sz({},{StarknetIdContract:()=>uI,StarknetIdIdentityContract:()=>uC,StarknetIdMulticallContract:()=>uO,StarknetIdPfpContract:()=>uU,StarknetIdPopContract:()=>uP,StarknetIdVerifierContract:()=>uB,dynamicCallData:()=>uz,dynamicFelt:()=>uH,execution:()=>uM,getStarknetIdContract:()=>uN,getStarknetIdIdentityContract:()=>uR,getStarknetIdMulticallContract:()=>uV,getStarknetIdPfpContract:()=>uF,getStarknetIdPopContract:()=>uL,getStarknetIdVerifierContract:()=>uD,isStarkDomain:()=>uZ,useDecoded:()=>uk,useEncoded:()=>ux});var ub="abcdefghijklmnopqrstuvwxyz0123456789-",uE=BigInt(ub.length+1),uv="",uw=BigInt(ub.length),uT=BigInt(uv.length),uA=BigInt(uv.length+1);function uS(e){let t=0;for(;e.endsWith(uv[uv.length-1]);)e=e.substring(0,e.length-1),t+=1;return[e,t]}function uk(e){let t="";return(e.forEach(e=>{for(;e!==s9;){let n=e%uE;if(e/=uE,n===BigInt(ub.length)){let n=e/uA;if(n===s9){let r=e%uA;e=n,r===s9?t+=ub[0]:t+=uv[Number(r)-1]}else t+=uv[Number(e%uT)],e/=uT}else t+=ub[Number(n)]}let[n,r]=uS(t);r&&(t=n+(r%2==0?uv[uv.length-1].repeat(r/2-1)+uv[0]+ub[1]:uv[uv.length-1].repeat((r-1)/2+1))),t+="."}),t)?t.concat("stark"):t}function ux(e){let t=BigInt(0),n=BigInt(1);if(e.endsWith(uv[0]+ub[1])){let[t,n]=uS(e.substring(0,e.length-2));e=t+uv[uv.length-1].repeat(2*(n+1))}else{let[t,n]=uS(e);n&&(e=t+uv[uv.length-1].repeat(1+2*(n-1)))}for(let r=0;r<e.length;r+=1){let a=e[r],i=ub.indexOf(a),s=BigInt(ub.indexOf(a));-1!==i?r===e.length-1&&e[r]===ub[0]?(t+=n*uw,n*=uE*uE):(t+=n*s,n*=uE):-1!==uv.indexOf(a)&&(t+=n*uw,n*=uE,t+=n*BigInt(+(r===e.length-1)+uv.indexOf(a)),n*=uT)}return t}var uI={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function uN(e){switch(e){case om.SN_MAIN:return uI.MAINNET;case om.SN_SEPOLIA:return uI.TESTNET_SEPOLIA;default:throw Error("Starknet.id is not yet deployed on this network")}}var uC={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function uR(e){switch(e){case om.SN_MAIN:return uC.MAINNET;case om.SN_SEPOLIA:return uC.TESTNET_SEPOLIA;default:throw Error("Starknet.id verifier contract is not yet deployed on this network")}}var uO="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function uV(e){switch(e){case om.SN_MAIN:case om.SN_SEPOLIA:return uO;default:throw Error("Starknet.id multicall contract is not yet deployed on this network")}}var uB={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function uD(e){switch(e){case om.SN_MAIN:return uB.MAINNET;case om.SN_SEPOLIA:return uB.TESTNET_SEPOLIA;default:throw Error("Starknet.id verifier contract is not yet deployed on this network")}}var uU={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function uF(e){switch(e){case om.SN_MAIN:return uU.MAINNET;case om.SN_SEPOLIA:return uU.TESTNET_SEPOLIA;default:throw Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var uP={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function uL(e){switch(e){case om.SN_MAIN:return uP.MAINNET;case om.SN_SEPOLIA:return uP.TESTNET_SEPOLIA;default:throw Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function uM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return new cu({Static:e,IfEqual:t?cc(t[0],t[1],t[2]):void 0,IfNotEqual:n?cc(n[0],n[1],n[2]):void 0})}function uH(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return new cu({Hardcoded:e,Reference:t?cc(t[0],t[1]):void 0})}function uz(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return new cu({Hardcoded:e,Reference:t?cc(t[0],t[1]):void 0,ArrayReference:n?cc(n[0],n[1]):void 0})}function uZ(e){return/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\.)*[a-z0-9-]{1,48}\.stark$/.test(e)}var uW=class e{async getStarkName(t,n){return e.getStarkName(this,t,n)}async getAddressFromStarkName(t,n){return e.getAddressFromStarkName(this,t,n)}async getStarkProfile(t,n,r,a,i,s,o){return e.getStarkProfile(this,t,n,r,a,i,s,o)}static async getStarkName(e,t,n){let r=await e.getChainId(),a=null!=n?n:uN(r);try{let n=(await e.callContract({contractAddress:a,entrypoint:"address_to_domain",calldata:cF.compile({address:t,hint:[]})})).map(e=>BigInt(e)).slice(1),r=uk(n);if(!r)throw Error("Starkname not found");return r}catch(e){if(e instanceof Error&&"Starkname not found"===e.message)throw e;throw Error("Could not get stark name")}}static async getAddressFromStarkName(e,t,n){let r=t.endsWith(".stark")?t:"".concat(t,".stark");if(!uZ(r))throw Error("Invalid domain, must be a valid .stark domain");let a=await e.getChainId(),i=null!=n?n:uN(a);try{let t=r.replace(".stark","").split(".").map(e=>ux(e).toString(10));return(await e.callContract({contractAddress:i,entrypoint:"domain_to_address",calldata:cF.compile({domain:t,hint:[]})}))[0]}catch(e){throw Error("Could not get address from stark name")}}static async getStarkProfile(e,t,n,r,a,i,s,o){let l=await e.getChainId(),c=null!=n?n:uN(l),d=null!=r?r:uR(l),u=null!=a?a:uD(l),h=null!=i?i:uF(l),f=null!=s?s:uL(l),p=null!=o?o:uV(l);try{let n=[{execution:uM({}),to:uz(c),selector:uz(lA("address_to_domain")),calldata:[uz(t),uz("0")]},{execution:uM({}),to:uH(c),selector:uH(lA("domain_to_id")),calldata:[uz(void 0,void 0,[0,0])]},{execution:uM({}),to:uH(d),selector:uH(lA("get_verifier_data")),calldata:[uz(void 0,[1,0]),uz(lU("twitter")),uz(u),uz("0")]},{execution:uM({}),to:uH(d),selector:uH(lA("get_verifier_data")),calldata:[uz(void 0,[1,0]),uz(lU("github")),uz(u),uz("0")]},{execution:uM({}),to:uH(d),selector:uH(lA("get_verifier_data")),calldata:[uz(void 0,[1,0]),uz(lU("discord")),uz(u),uz("0")]},{execution:uM({}),to:uH(d),selector:uH(lA("get_verifier_data")),calldata:[uz(void 0,[1,0]),uz(lU("proof_of_personhood")),uz(f),uz("0")]},{execution:uM({}),to:uH(d),selector:uH(lA("get_verifier_data")),calldata:[uz(void 0,[1,0]),uz(lU("nft_pp_contract")),uz(h),uz("0")]},{execution:uM({}),to:uH(d),selector:uH(lA("get_extended_verifier_data")),calldata:[uz(void 0,[1,0]),uz(lU("nft_pp_id")),uz("2"),uz(h),uz("0")]},{execution:uM(void 0,void 0,[6,0,0]),to:uH(void 0,[6,0]),selector:uH(lA("tokenURI")),calldata:[uz(void 0,[7,1]),uz(void 0,[7,2])]}],r=await e.callContract({contractAddress:p,entrypoint:"aggregate",calldata:cF.compile({calls:n})});if(Array.isArray(r)){let e=parseInt(r[0],16),t=[],n=1;for(let a=0;a<e;a+=1)if(n<r.length){let e=parseInt(r[n],16);n+=1;let a=r.slice(n,n+e);t.push(a),n+=e}else break;let a=uk(t[0].slice(1).map(e=>BigInt(e))),i="0x0"!==t[2][0]?BigInt(t[2][0]).toString():void 0,s="0x0"!==t[3][0]?BigInt(t[3][0]).toString():void 0,o="0x0"!==t[4][0]?BigInt(t[4][0]).toString():void 0,l="0x1"===t[5][0],c=("0x9"===r[0]?t[8].slice(1).map(e=>lF(e)).join(""):void 0)||"https://starknet.id/api/identicons/".concat(BigInt(t[1][0]).toString());return{name:a,twitter:i,github:s,discord:o,proofOfPersonhood:l,profilePicture:c}}throw Error("Error while calling aggregate function")}catch(e){if(e instanceof Error)throw e;throw Error("Could not get user stark profile data from address")}}},uj=class extends(0,sF.Mixin)(uy,uW){},uY=new uy({default:!0}),uK=class{async getPubKey(){return al.getStarkKey(this.pk)}async signMessage(e,t){let n=u_(e,t);return this.signRaw(n)}async signTransaction(e,t){let n,r=d1(e,t.cairoVersion);if(Object.values(sW.ETransactionVersion2).includes(t.version))n=c4({...t,senderAddress:t.walletAddress,compiledCalldata:r,version:t.version});else if(Object.values(sW.ETransactionVersion3).includes(t.version))n=c4({...t,senderAddress:t.walletAddress,compiledCalldata:r,version:t.version,nonceDataAvailabilityMode:dN(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:dN(t.feeDataAvailabilityMode)});else throw Error("unsupported signTransaction version");return this.signRaw(n)}async signDeployAccountTransaction(e){let t,n=cF.compile(e.constructorCalldata);if(Object.values(sW.ETransactionVersion2).includes(e.version))t=c7({...e,salt:e.addressSalt,constructorCalldata:n,version:e.version});else if(Object.values(sW.ETransactionVersion3).includes(e.version))t=c7({...e,salt:e.addressSalt,compiledConstructorCalldata:n,version:e.version,nonceDataAvailabilityMode:dN(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:dN(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeployAccountTransaction version");return this.signRaw(t)}async signDeclareTransaction(e){let t;if(Object.values(sW.ETransactionVersion2).includes(e.version))t=c9({...e,version:e.version});else if(Object.values(sW.ETransactionVersion3).includes(e.version))t=c9({...e,version:e.version,nonceDataAvailabilityMode:dN(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:dN(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeclareTransaction version");return this.signRaw(t)}async signRaw(e){return al.sign(e,this.pk)}constructor(e=al.utils.randomPrivateKey()){(0,h._)(this,"pk",void 0),this.pk=e instanceof Uint8Array?sJ(e):la(e)}},uG={};function uq(e){return new lW(e).toBigInt()}function uQ(e){return lW.is(e)}function uJ(e){return new lW(e).toUint256HexString()}function uX(e){return"event"===e.type}function u$(e){return ca(e)?function(e){let t=e.filter(e=>uX(e)&&"struct"===e.kind),n=e.filter(e=>uX(e)&&"enum"===e.kind);return t.reduce((e,t)=>{let r=[],{name:a}=t,i=!1,s=e=>e.type===a;for(;;){let e=n.find(e=>e.variants.some(s));if(o5(e))break;let t=e.variants.find(s);r.unshift(t.name),"flat"===t.kind&&(i=!0),a=e.name}if(0===r.length)throw Error("inconsistency in ABI events definition.");i&&(r=[r[r.length-1]]);let o=r.pop(),l={[s$(al.keccak(sG(o)).toString(16))]:t};for(;r.length>0;)l={[s$(al.keccak(sG(r.pop())).toString(16))]:l};return function e(t,n){let r={...t};return le(t)&&le(n)&&Object.keys(n).forEach(a=>{le(n[a])&&a in t?r[a]=e(t[a],n[a]):Object.assign(r,{[a]:n[a]})}),r}(e,l={...l})},{})}(e):e.filter(e=>"event"===e.type).reduce((e,t)=>{let n=t.name,r={...t};return r.name=n,{...e,[s$(al.keccak(sG(n)).toString(16))]:r}},{})}function u0(e,t,n,r){return e.flat().reduce((e,a)=>{var i,s,o;let l=JSON.parse(JSON.stringify(a)),c=t[null!=(o=l.keys.shift())?o:0];if(!c)return e;for(;!c.name;){let e=l.keys.shift();o2(!!e,'Not enough data in "keys" property of this event.'),c=c[e]}let d={};d[c.name]={};let u=l.keys[Symbol.iterator](),h=l.data[Symbol.iterator](),f=(null==(i=c.members)?void 0:i.filter(e=>"key"===e.kind))||c.keys,p=(null==(s=c.members)?void 0:s.filter(e=>"data"===e.kind))||c.data;return f.forEach(e=>{d[c.name][e.name]=cI(u,e,n,r,d[c.name])}),p.forEach(e=>{d[c.name][e.name]=cI(h,e,n,r,d[c.name])}),"block_hash"in l&&(d.block_hash=l.block_hash),"block_number"in l&&(d.block_number=l.block_number),"transaction_hash"in l&&(d.transaction_hash=l.transaction_hash),e.push(d),e},[])}function u1(e){var t;if(!(null==(t=e.events)?void 0:t.length))throw Error("UDC emitted event is empty");let n=e.events.find(e=>lc(e.from_address)===lc(oc.ADDRESS))||{data:[]};return{transaction_hash:e.transaction_hash,contract_address:n.data[0],address:n.data[0],deployer:n.data[1],unique:n.data[2],classHash:n.data[3],calldata_len:n.data[4],calldata:n.data.slice(5,5+parseInt(n.data[4],16)),salt:n.data[n.data.length-1]}}function u2(e){return"calldata_len"in e?{To:e.to,Selector:e.selector,Calldata:e.calldata}:e}function u3(e){var t;let n=null!=(t=e.calldata)?t:[],r=Array.isArray(n)?n:cF.compile(n);return{to:e.contractAddress,selector:lA(e.entrypoint),calldata:r}}function u6(e,t){let n=u3(e);return"1"===t?{...n,calldata_len:n.calldata.length,calldata:n.calldata}:{To:n.to,Selector:n.selector,Calldata:n.calldata}}function u5(e,t){return{name:"Account.execute_from_outside",version:t,chainId:e,..."2"===t?{revision:"1"}:{}}}function u8(e,t,n,r,a){return"1"===a?{types:oG,primaryType:"OutsideExecution",domain:u5(e,a),message:{...t,nonce:n,calls_len:r.length,calls:r.map(e=>u6(e,a))}}:{types:oq,primaryType:"OutsideExecution",domain:u5(e,a),message:{Caller:t.caller,Nonce:n,"Execute After":t.execute_after,"Execute Before":t.execute_before,Calls:r.map(e=>u6(e,a))}}}function u4(e){let t=e.outsideExecution,n=dT(e.signature);return cF.compile({outside_execution:t,signature:n})}function u9(e){return(Array.isArray(e)?e:[e]).map(e=>{let t;if(e.version===oQ.V1)t="execute_from_outside";else if(e.version===oQ.V2)t="execute_from_outside_v2";else throw Error("Unsupported OutsideExecution version");return{contractAddress:la(e.signerAddress),entrypoint:t,calldata:u4(e)}})}async function u7(e,t,n){let r={contractAddress:la(t),entrypoint:"supports_interface",calldata:[la(n)]};try{let t=await e.callContract(r);return 0n!==BigInt(t[0])}catch(e){return!1}}sz(uG,{bnToUint256:()=>uJ,isUint256:()=>uQ,uint256ToBN:()=>uq}),sz({},{getAbiEvents:()=>u$,isAbiEvent:()=>uX,parseEvents:()=>u0,parseUDCEvent:()=>u1}),sz({},{buildExecuteFromOutsideCall:()=>u9,buildExecuteFromOutsideCallData:()=>u4,getOutsideCall:()=>u3,getTypedData:()=>u8,toOutsideCallV2:()=>u2}),sz({},{supportsInterface:()=>u7}),sz({},{assertCallsAreStrictlyEqual:()=>ht,assertPaymasterTransactionSafety:()=>hn,getDefaultPaymasterNodeUrl:()=>he});var he=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||ok.info("Using default public node url, please provide nodeUrl in provider options!");let n=ow[null!=e?e:o_.SN_SEPOLIA],r=Math.floor(Math.random()*n.length);return n[r]};function ht(e,t){let n="Provided calls are not strictly equal to the returned calls";o2(t.length-1===e.length,"".concat(n,": Expected ").concat(e.length+1," calls, got ").concat(t.length));for(let r=0;r<e.length;r+=1){let a=e[r],i=u2(t[r]),s=e=>ln(e).toString(16).toLowerCase();o2(s(a.contractAddress)===s(i.To),"".concat(n,": Contract address mismatch at call ").concat(r,". Expected: ").concat(a.contractAddress,", Got: ").concat(i.To)),o2(lA(a.entrypoint)===i.Selector,"".concat(n,": Entrypoint mismatch at call ").concat(r,". Expected: ").concat(a.entrypoint,", Got: ").concat(i.Selector));let o=cF.toCalldata(a.calldata),l=cF.toCalldata(i.Calldata);o2(o.length===l.length,"".concat(n,": Calldata length mismatch at call ").concat(r,". Expected length: ").concat(o.length,", Got length: ").concat(l.length));for(let e=0;e<o.length;e+=1)o2(BigInt(o[e])===BigInt(l[e]),"".concat(n,": Calldata value mismatch at call ").concat(r,", parameter ").concat(e,". Expected: ").concat(o[e],", Got: ").concat(l[e]))}}var hn=(e,t,n,r)=>{if("sponsored"!==n.feeMode.mode&&("invoke"===e.type||"deploy_and_invoke"===e.type)){let a="calls"in e.typed_data.message?e.typed_data.message.calls:e.typed_data.message.Calls;ht(t,a),((e,t)=>{o2(BigInt(u2(e[e.length-1]).To)===BigInt(t),"Gas token address is not equal to the provided gas token")})(a,n.feeMode.gasToken),r&&(o2(e.fee.suggested_max_fee_in_gas_token<=r,"Gas token price is too high"),((e,t)=>{let n=u2(e[e.length-1]);o2(BigInt(cF.toCalldata(n.Calldata)[1])===BigInt(t),"Gas token value is not equal to the provided gas fees")})(a,e.fee.suggested_max_fee_in_gas_token))}},hr=e=>"sponsored"===e.mode?{mode:"sponsored"}:{mode:"default",gas_token:e.gasToken},ha=e=>e?{execute_after:e.executeAfter||1,execute_before:e.executeBefore}:void 0,hi=e=>({version:e.version,feeMode:(e=>"sponsored"===e.mode?{mode:"sponsored"}:{mode:"default",gasToken:e.gas_token})(e.fee_mode),timeBounds:(e=>e?{executeAfter:e.execute_after,executeBefore:e.execute_before}:void 0)(e.time_bounds)}),hs={headers:{"Content-Type":"application/json"}},ho=class e{fetch(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,r={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:o0(r),headers:this.headers})}errorHandler(e,t,n,r){if(n)throw new dM(n,e,t);if(r instanceof dL)throw r;if(r)throw Error(r.message)}async fetchEndpoint(e,t){try{this.requestId+=1;let n=await this.fetch(e,t,this.requestId),{error:r,result:a}=await n.json();return this.errorHandler(e,t,r),a}catch(r){var n;throw this.errorHandler(e,t,null==r||null==(n=r.response)?void 0:n.data,r),r}}async isAvailable(){return this.fetchEndpoint("paymaster_isAvailable")}async buildTransaction(e,t){let n;switch(e.type){case"invoke":case"deploy_and_invoke":n={...e,invoke:{user_address:e.invoke.userAddress,calls:e.invoke.calls.map(e=>({to:e.contractAddress,selector:lA(e.entrypoint),calldata:cF.toHex(e.calldata)}))}};break;default:n=e}let r={version:t.version,fee_mode:hr(t.feeMode),time_bounds:ha(t.timeBounds)},a=await this.fetchEndpoint("paymaster_buildTransaction",{transaction:n,parameters:r}),i={gas_token_price_in_strk:BigInt(a.fee.gas_token_price_in_strk),estimated_fee_in_strk:BigInt(a.fee.estimated_fee_in_strk),estimated_fee_in_gas_token:BigInt(a.fee.estimated_fee_in_gas_token),suggested_max_fee_in_strk:BigInt(a.fee.suggested_max_fee_in_strk),suggested_max_fee_in_gas_token:BigInt(a.fee.suggested_max_fee_in_gas_token)};switch(a.type){case"invoke":return{type:"invoke",typed_data:a.typed_data,parameters:hi(a.parameters),fee:i};case"deploy_and_invoke":return{type:"deploy_and_invoke",deployment:a.deployment,typed_data:a.typed_data,parameters:hi(a.parameters),fee:i};default:return{type:"deploy",deployment:a.deployment,parameters:hi(a.parameters),fee:i}}}async executeTransaction(e,t){let n;switch(e.type){case"invoke":case"deploy_and_invoke":n={...e,invoke:{user_address:e.invoke.userAddress,typed_data:e.invoke.typedData,signature:dS(e.invoke.signature)}};break;default:n=e}let r={version:t.version,fee_mode:hr(t.feeMode),time_bounds:ha(t.timeBounds)};return this.fetchEndpoint("paymaster_executeTransaction",{transaction:n,parameters:r})}async getSupportedTokens(){return this.fetchEndpoint("paymaster_getSupportedTokens").then(e=>e.map(e=>({token_address:e.token_address,decimals:e.decimals,priceInStrk:BigInt(e.price_in_strk)})))}constructor(t){if((0,h._)(this,"nodeUrl",void 0),(0,h._)(this,"headers",void 0),(0,h._)(this,"baseFetch",void 0),(0,h._)(this,"requestId",void 0),t instanceof e){this.nodeUrl=t.nodeUrl,this.headers={...hs.headers,...t.headers},this.baseFetch=t.baseFetch,this.requestId=t.requestId;return}if(t&&"nodeUrl"in t&&"headers"in t&&"baseFetch"in t){var n,r;this.nodeUrl=null!=(n=t.nodeUrl)?n:he(void 0),this.headers={...hs.headers,...t.headers},this.baseFetch=null!=(r=t.baseFetch)?r:dZ,this.requestId=0;return}let{nodeUrl:a,headers:i,baseFetch:s}=t||{};a&&Object.values(o_).includes(a)?this.nodeUrl=he(a,null==t?void 0:t.default):a?this.nodeUrl=a:this.nodeUrl=he(void 0,null==t?void 0:t.default),this.baseFetch=null!=s?s:dZ,this.headers={...hs.headers,...i},this.requestId=0}},hl=new ho({default:!0}),hc=class extends uj{static async create(){throw new dL("Not supported")}getPreferredVersion(e,t){return this.transactionVersion===oB.V3?t:this.transactionVersion===oB.V2?e:oB.V3}async getNonce(e){return super.getNonceForAddress(this.address,e)}async getNonceSafe(e){try{return ln(null!=e?e:await this.getNonce())}catch(e){return 0n}}async getCairoVersion(e){if(!this.cairoVersion){let{cairo:t}=e?await super.getContractVersion(void 0,e):await super.getContractVersion(this.address);this.cairoVersion=t}return this.cairoVersion}async estimateFee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.estimateInvokeFee(e,t)}async estimateInvokeFee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{nonce:n,blockIdentifier:r,version:a,skipValidate:i=!0}=t,s=Array.isArray(e)?e:[e],o=ln(null!=n?n:await this.getNonce()),l=dC(this.getPreferredVersion(oB.F1,oB.F3),dR(a)),c=await this.getChainId(),d={...dO(t,await this.channel.setUpSpecVersion()),walletAddress:this.address,nonce:o,maxFee:s9,version:l,chainId:c,cairoVersion:await this.getCairoVersion(),skipValidate:i},u=await this.buildInvocation(s,d);return super.getInvokeEstimateFee({...u},{...dO(t,await this.channel.setUpSpecVersion()),version:l,nonce:o},r,t.skipValidate)}async estimateDeclareFee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{blockIdentifier:n,nonce:r,version:a,skipValidate:i=!0}=t,s=ln(null!=r?r:await this.getNonce()),o=dC(dD(e.contract)?this.getPreferredVersion(oB.F2,oB.F3):oB.F1,dR(a)),l=await this.getChainId(),c=await this.buildDeclarePayload(e,{...dO(t,await this.channel.setUpSpecVersion()),nonce:s,chainId:l,version:o,walletAddress:this.address,maxFee:s9,cairoVersion:void 0,skipValidate:i});return super.getDeclareEstimateFee(c,{...dO(t,await this.channel.setUpSpecVersion()),version:o,nonce:s},n,t.skipValidate)}async estimateAccountDeployFee(e){let{classHash:t,addressSalt:n=0,constructorCalldata:r=[],contractAddress:a}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{blockIdentifier:s,version:o,skipValidate:l=!0}=i,c=dC(this.getPreferredVersion(oB.F1,oB.F3),dR(o)),d=await this.getChainId(),u=await this.buildAccountDeployPayload({classHash:t,addressSalt:n,constructorCalldata:r,contractAddress:a},{...dO(i,await this.channel.setUpSpecVersion()),nonce:s9,chainId:d,version:c,walletAddress:this.address,maxFee:s9,cairoVersion:void 0,skipValidate:l});return super.getDeployAccountEstimateFee({...u},{...dO(i,await this.channel.setUpSpecVersion()),version:c,nonce:s9},s,i.skipValidate)}async estimateDeployFee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=this.buildUDCContractPayload(e);return this.estimateInvokeFee(n,t)}async estimateFeeBulk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.length)throw TypeError("Invocations should be non-empty array");let{nonce:n,blockIdentifier:r,version:a,skipValidate:i}=t,s=await this.accountInvocationsFactory(e,{...dO(t,await this.channel.setUpSpecVersion()),versions:[oB.F1,dC(this.getPreferredVersion(oB.F2,oB.F3),a)],nonce:n,blockIdentifier:r,skipValidate:i});return super.getEstimateFeeBulk(s,{blockIdentifier:r,skipValidate:i})}async simulateTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.length)throw TypeError("Invocations should be non-empty array");let{nonce:n,blockIdentifier:r,skipValidate:a=!0,skipExecute:i,version:s}=t,o=await this.accountInvocationsFactory(e,{...dO(t,await this.channel.setUpSpecVersion()),versions:[oB.V1,dC(this.getPreferredVersion(oB.V2,oB.V3),s)],nonce:n,blockIdentifier:r,skipValidate:a});return super.getSimulateTransaction(o,{blockIdentifier:r,skipValidate:a,skipExecute:i})}async execute(e){var t;let n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=Array.isArray(e)?e:[e],a=ln(null!=(t=n.nonce)?t:await this.getNonce()),i=dC(this.getPreferredVersion(oB.V1,oB.V3),n.version),s=await this.getUniversalSuggestedFee(i,{type:oN.INVOKE,payload:e},{...n,version:i}),o=await this.getChainId(),l={...dO(n,await this.channel.setUpSpecVersion()),resourceBounds:s.resourceBounds,walletAddress:this.address,nonce:a,maxFee:s.maxFee,version:i,chainId:o,cairoVersion:await this.getCairoVersion()},c=await this.signer.signTransaction(r,l),d=d1(r,await this.getCairoVersion());return this.invokeFunction({contractAddress:this.address,calldata:d,signature:c},{...dO(n,await this.channel.setUpSpecVersion()),resourceBounds:s.resourceBounds,nonce:a,maxFee:s.maxFee,version:i})}async buildPaymasterTransaction(e,t){let n;if(!t.deploymentData&&await this.getSnip9Version()===oQ.UNSUPPORTED)throw Error("Account is not compatible with SNIP-9");let r={version:"0x1",feeMode:t.feeMode,timeBounds:t.timeBounds};return n=t.deploymentData?e.length>0?{type:"deploy_and_invoke",invoke:{userAddress:this.address,calls:e},deployment:t.deploymentData}:{type:"deploy",deployment:t.deploymentData}:{type:"invoke",invoke:{userAddress:this.address,calls:e}},this.paymaster.buildTransaction(n,r)}async estimatePaymasterTransactionFee(e,t){return(await this.buildPaymasterTransaction(e,t)).fee}async preparePaymasterTransaction(e){let t;switch(e.type){case"deploy_and_invoke":{let n=await this.signMessage(e.typed_data);t={type:"deploy_and_invoke",invoke:{userAddress:this.address,typedData:e.typed_data,signature:dS(n)},deployment:e.deployment};break}case"invoke":{let n=await this.signMessage(e.typed_data);t={type:"invoke",invoke:{userAddress:this.address,typedData:e.typed_data,signature:dS(n)}};break}case"deploy":t={type:"deploy",deployment:e.deployment};break;default:throw Error("Invalid transaction type")}return t}async executePaymasterTransaction(e,t,n){let r=await this.buildPaymasterTransaction(e,t);hn(r,e,t,n);let a=await this.preparePaymasterTransaction(r);return this.paymaster.executeTransaction(a,r.parameters).then(e=>({transaction_hash:e.transaction_hash}))}async declareIfNot(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=dU(e);try{await this.getClassByHash(n.classHash)}catch(n){return this.declare(e,t)}return{transaction_hash:"",class_hash:n.classHash}}async declare(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=dU(e),{nonce:r,version:a}=t,i=dC(dD(e.contract)?this.getPreferredVersion(oB.V2,oB.V3):oB.V1,a),s=await this.getUniversalSuggestedFee(i,{type:oN.DECLARE,payload:n},{...t,version:i}),o={...dO(t,await this.channel.setUpSpecVersion()),resourceBounds:s.resourceBounds,maxFee:s.maxFee,nonce:ln(null!=r?r:await this.getNonce()),version:i,chainId:await this.getChainId(),walletAddress:this.address,cairoVersion:void 0},l=await this.buildDeclarePayload(n,o);return this.declareContract(l,o)}async deploy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{calls:n,addresses:r}=d2(e,this.address);return{...await this.execute(n,t),contract_address:r}}async deployContract(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=await this.deploy(e,t);return u1(await this.waitForTransaction(n.transaction_hash))}async declareAndDeploy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{constructorCalldata:n,salt:r,unique:a}=e,i=await this.declareIfNot(e,t);if(""!==i.transaction_hash){let e=await this.waitForTransaction(i.transaction_hash);i={...i,...e}}let s=await this.deployContract({classHash:i.class_hash,salt:r,unique:a,constructorCalldata:n},t);return{declare:{...i},deploy:s}}async deployAccount(e){let{classHash:t,constructorCalldata:n=[],addressSalt:r=0,contractAddress:a}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},s=dC(this.getPreferredVersion(oB.V1,oB.V3),i.version),o=await this.getChainId(),l=cF.compile(n),c=null!=a?a:di(r,t,l,0),d=await this.getUniversalSuggestedFee(s,{type:oN.DEPLOY_ACCOUNT,payload:{classHash:t,constructorCalldata:l,addressSalt:r,contractAddress:c}},i),u=await this.signer.signDeployAccountTransaction({...dO(i,await this.channel.setUpSpecVersion()),classHash:t,constructorCalldata:l,contractAddress:c,addressSalt:r,chainId:o,resourceBounds:d.resourceBounds,maxFee:d.maxFee,version:s,nonce:s9});return this.deployAccountContract({classHash:t,addressSalt:r,constructorCalldata:n,signature:u},{...dO(i,await this.channel.setUpSpecVersion()),nonce:s9,resourceBounds:d.resourceBounds,maxFee:d.maxFee,version:s})}async signMessage(e){return this.signer.signMessage(e,this.address)}async hashMessage(e){return u_(e,this.address)}async getSnip9Version(){return await u7(this,this.address,oh)?oQ.V2:await u7(this,this.address,ou)?oQ.V1:oQ.UNSUPPORTED}async isValidSnip9Nonce(e){try{let t={contractAddress:this.address,entrypoint:"is_valid_outside_execution_nonce",calldata:[la(e)]},n=await this.callContract(t);return 0n!==BigInt(n[0])}catch(e){throw Error("Failed to check if nonce is valid: ".concat(e))}}async getSnip9Nonce(){let e=dw();return await this.isValidSnip9Nonce(e)?e:this.getSnip9Nonce()}async getOutsideTransaction(e,t,n,r){if(!lt(e.caller)&&"ANY_CALLER"!==e.caller)throw Error("The caller ".concat(e.caller," is not valid."));let a=lt(e.caller)?e.caller:od,i=Array.isArray(t)?t:[t],s=null!=n?n:await this.getSnip9Version();if(!s)throw Error("This account is not handling outside transactions.");let o=r?la(r):await this.getSnip9Nonce(),l=u8(await this.getChainId(),{caller:a,execute_after:e.execute_after,execute_before:e.execute_before},o,i,s),c=await this.signMessage(l);return{outsideExecution:{caller:a,nonce:o,execute_after:e.execute_after,execute_before:e.execute_before,calls:i.map(u3)},signature:c,signerAddress:this.address,version:s}}async executeFromOutside(e,t){let n=u9(e);return this.execute(n,t)}async getUniversalSuggestedFee(e,t,n){var r,a;let{type:i,payload:s}=t,o=0,l=dx(s9,void 0,await this.channel.setUpSpecVersion());return e===oB.V3?l=null!=(r=n.resourceBounds)?r:(await this.getSuggestedFee({type:i,payload:s},n)).resourceBounds:o=null!=(a=n.maxFee)?a:(await this.getSuggestedFee({type:i,payload:s},n)).suggestedMaxFee,{maxFee:o,resourceBounds:l}}async getSuggestedFee(e,t){let{type:n,payload:r}=e;switch(n){case oN.INVOKE:return this.estimateInvokeFee(r,t);case oN.DECLARE:return this.estimateDeclareFee(r,t);case oN.DEPLOY_ACCOUNT:return this.estimateAccountDeployFee(r,t);case oN.DEPLOY:return this.estimateDeployFee(r,t);default:return dI(await this.channel.setUpSpecVersion())}}async buildInvocation(e,t){let n=d1(e,await this.getCairoVersion()),r=t.skipValidate?[]:await this.signer.signTransaction(e,t);return{...dO(t,await this.channel.setUpSpecVersion()),contractAddress:this.address,calldata:n,signature:r}}async buildDeclarePayload(e,t){let{classHash:n,contract:r,compiledClassHash:a}=dU(e),i=dY(r);if(o5(a)&&(t.version===oU.F3||t.version===oU.V3))throw Error("V3 Transaction work with Cairo1 Contracts and require compiledClassHash");let s=t.skipValidate?[]:await this.signer.signDeclareTransaction({...t,...dO(t,await this.channel.setUpSpecVersion()),classHash:n,compiledClassHash:a,senderAddress:t.walletAddress});return{senderAddress:t.walletAddress,signature:s,contract:i,compiledClassHash:a}}async buildAccountDeployPayload(e,t){let{classHash:n,addressSalt:r=0,constructorCalldata:a=[],contractAddress:i}=e,s=cF.compile(a),o=null!=i?i:di(r,n,s,0),l=t.skipValidate?[]:await this.signer.signDeployAccountTransaction({...t,...dO(t,await this.channel.setUpSpecVersion()),classHash:n,contractAddress:o,addressSalt:r,constructorCalldata:s});return{...dO(t,await this.channel.setUpSpecVersion()),classHash:n,addressSalt:r,constructorCalldata:s,signature:l}}buildUDCContractPayload(e){return[].concat(e).map(e=>{let{classHash:t,salt:n="0",unique:r=!0,constructorCalldata:a=[]}=e,i=cF.compile(a);return{contractAddress:oc.ADDRESS,entrypoint:oc.ENTRYPOINT,calldata:[t,n,lm(r),i.length,...i]}})}async accountInvocationsFactory(e,t){let{nonce:n,blockIdentifier:r,skipValidate:a=!0}=t,i=await this.getNonceSafe(n),s=await this.getChainId(),o=t.versions.map(e=>dC(e)),l="payload"in e[0]?e[0].payload:e[0],c=e[0].type===oN.DEPLOY_ACCOUNT?await this.getCairoVersion(l.classHash):await this.getCairoVersion();return Promise.all([].concat(e).map(async(e,n)=>{let l="payload"in e?e.payload:e,d={...dO(t,await this.channel.setUpSpecVersion()),walletAddress:this.address,nonce:ln(Number(i)+n),maxFee:s9,chainId:s,cairoVersion:c,version:"",skipValidate:a},u={type:e.type,nonce:ln(Number(i)+n),blockIdentifier:r,version:""};if(e.type===oN.INVOKE){let e=dV(o[1]);d.version=e,u.version=e;let t=await this.buildInvocation([].concat(l),d);return{...u,...t,...d}}if(e.type===oN.DEPLOY){let e=dV(o[1]);d.version=e,u.version=e;let t=this.buildUDCContractPayload(l),n=await this.buildInvocation(t,d);return{...u,...n,...d,type:oN.INVOKE}}if(e.type===oN.DECLARE){let e=dD(l.contract)?o[1]:o[0];d.version=e,u.version=e;let t=await this.buildDeclarePayload(l,d);return{...u,...t,...d}}if(e.type===oN.DEPLOY_ACCOUNT){let e=dV(o[1]);d.version=e,u.version=e;let t=await this.buildAccountDeployPayload(l,d);return{...u,...t,...d}}throw Error("accountInvocationsFactory: unsupported transaction type: ".concat(e))}))}async getStarkName(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.address,t=arguments.length>1?arguments[1]:void 0;return super.getStarkName(e,t)}constructor(e,t,n,r,a=oA.get("transactionVersion"),i){super(e),(0,h._)(this,"signer",void 0),(0,h._)(this,"address",void 0),(0,h._)(this,"cairoVersion",void 0),(0,h._)(this,"transactionVersion",void 0),(0,h._)(this,"paymaster",void 0),(0,h._)(this,"deploySelf",this.deployAccount),this.address=t.toLowerCase(),this.signer=o7(n)||n instanceof Uint8Array?new uK(n):n,r&&(this.cairoVersion=r.toString()),this.transactionVersion=a,this.paymaster=i?new ho(i):hl,ok.debug("Account setup",{transactionVersion:this.transactionVersion,cairoVersion:this.cairoVersion,channel:this.channel.id})}};function hd(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.request({type:"wallet_requestAccounts",params:{silent_mode:t}})}function hu(e){return e.request({type:"wallet_getPermissions"})}function hh(e,t){return e.request({type:"wallet_watchAsset",params:t})}function hf(e,t){return e.request({type:"wallet_addStarknetChain",params:t})}function hp(e,t){return e.request({type:"wallet_switchStarknetChain",params:{chainId:t}})}function hg(e){return e.request({type:"wallet_requestChainId"})}function h_(e){return e.request({type:"wallet_deploymentData"})}function hm(e,t){return e.request({type:"wallet_addInvokeTransaction",params:t})}function hy(e,t){return e.request({type:"wallet_addDeclareTransaction",params:t})}function hb(e,t){return e.request({type:"wallet_signTypedData",params:t})}function hE(e){return e.request({type:"wallet_supportedSpecs"})}function hv(e,t){e.on("accountsChanged",t)}function hw(e,t){e.on("networkChanged",t)}function hT(e,t){return async function(){for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];let i={...e.contractOptions};return e.contractOptions=void 0,e.call(t.name,r,{parseRequest:!0,parseResponse:!0,...i})}}function hA(e,t){return"view"===t.stateMutability||"view"===t.state_mutability?hT(e,t):async function(){for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];let i={...e.contractOptions};return e.contractOptions=void 0,e.invoke(t.name,r,{parseRequest:!0,...i})}}function hS(e,t){return Array.isArray(e)&&"__compiled__"in e?e:Array.isArray(e)&&Array.isArray(e[0])&&"__compiled__"in e[0]?e[0]:t()}sz({},{addDeclareTransaction:()=>hy,addInvokeTransaction:()=>hm,addStarknetChain:()=>hf,deploymentData:()=>h_,getPermissions:()=>hu,onAccountChange:()=>hv,onNetworkChanged:()=>hw,requestAccounts:()=>hd,requestChainId:()=>hg,signMessage:()=>hb,supportedSpecs:()=>hE,switchStarknetChain:()=>hp,watchAsset:()=>hh});var hk=class{withOptions(e){return this.contractOptions=e,this}attach(e){this.address=e}connect(e){this.providerOrAccount=e}async deployed(){return this.deployTransactionHash&&(await this.providerOrAccount.waitForTransaction(this.deployTransactionHash),this.deployTransactionHash=void 0),this}async call(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{parseRequest:n=!0,parseResponse:r=!0,formatResponse:a,blockIdentifier:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o2(null!==this.address,"contract is not connected to an address");let s=hS(t,()=>n?(this.callData.validate(oZ.CALL,e,t),this.callData.compile(e,t)):(ok.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),t));return this.providerOrAccount.callContract({contractAddress:this.address,calldata:s,entrypoint:e},i).then(t=>r?a?this.callData.format(e,t,a):this.callData.parse(e,t):t)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{parseRequest:n=!0,signature:r,...a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};o2(null!==this.address,"contract is not connected to an address");let i=hS(t,()=>n?(this.callData.validate(oZ.INVOKE,e,t),this.callData.compile(e,t)):(ok.warn("Invoke skipped parsing but provided rawArgs, possible malfunction request"),t)),s={contractAddress:this.address,calldata:i,entrypoint:e};if("execute"in this.providerOrAccount)return this.providerOrAccount.execute(s,{...a});if(!a.nonce)throw Error("Nonce is required when invoking a function without an account");return ok.warn("Invoking ".concat(e," without an account. This will not work on a public node.")),this.providerOrAccount.invokeFunction({...s,signature:r},{...a,nonce:a.nonce})}async estimate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];o2(null!==this.address,"contract is not connected to an address"),hS(t,()=>!1)||this.callData.validate(oZ.INVOKE,e,t);let n=this.populate(e,t);if("estimateInvokeFee"in this.providerOrAccount)return this.providerOrAccount.estimateInvokeFee(n);throw Error("Contract must be connected to the account contract to estimate")}populate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],n=hS(t,()=>this.callData.compile(e,t));return{contractAddress:this.address,entrypoint:e,calldata:n}}parseEvents(e){let t;return e.match({success:e=>{var n;t=u0((null==(n=e.events)?void 0:n.map(t=>({block_hash:e.block_hash,block_number:e.block_number,transaction_hash:e.transaction_hash,...t})).filter(e=>lc(e.from_address)===lc(this.address),[]))||[],this.events,this.structs,cF.getAbiEnum(this.abi))},_:()=>{throw Error("This transaction was not successful.")}}),t}isCairo1(){return lM.isCairo1Abi(this.abi)}async getVersion(){return this.providerOrAccount.getContractVersion(this.address)}typedv2(e){return this}constructor(e,t,n=uY){(0,h._)(this,"abi",void 0),(0,h._)(this,"address",void 0),(0,h._)(this,"providerOrAccount",void 0),(0,h._)(this,"deployTransactionHash",void 0),(0,h._)(this,"structs",void 0),(0,h._)(this,"events",void 0),(0,h._)(this,"functions",void 0),(0,h._)(this,"callStatic",void 0),(0,h._)(this,"populateTransaction",void 0),(0,h._)(this,"estimateFee",void 0),(0,h._)(this,"callData",void 0),(0,h._)(this,"contractOptions",void 0),this.address=t&&t.toLowerCase(),this.providerOrAccount=n,this.callData=new cF(e),this.structs=cF.getAbiStruct(e),this.events=u$(e);let r=cb(e);this.abi=r.getLegacyFormat();let a={enumerable:!0,value:{},writable:!1};Object.defineProperties(this,{functions:{enumerable:!0,value:{},writable:!1},callStatic:{enumerable:!0,value:{},writable:!1},populateTransaction:{enumerable:!0,value:{},writable:!1},estimateFee:{enumerable:!0,value:{},writable:!1}}),this.abi.forEach(e=>{var t,n;if("function"!==e.type)return;let r=e.name;this[r]||Object.defineProperty(this,r,{...a,value:hA(this,e)}),this.functions[r]||Object.defineProperty(this.functions,r,{...a,value:hA(this,e)}),this.callStatic[r]||Object.defineProperty(this.callStatic,r,{...a,value:hT(this,e)}),this.populateTransaction[r]||Object.defineProperty(this.populateTransaction,r,{...a,value:(t=this,function(){for(var n=arguments.length,r=Array(n),a=0;a<n;a++)r[a]=arguments[a];return t.populate(e.name,r)})}),this.estimateFee[r]||Object.defineProperty(this.estimateFee,r,{...a,value:(n=this,function(){for(var t=arguments.length,r=Array(t),a=0;a<t;a++)r[a]=arguments[a];return n.estimate(e.name,r)})})})}};e.s(["PRIVACY_MIXER",()=>hx,"SHARED_SWAP_ACCOUNT_ADDRESS",()=>hI],412776);let hx={CONTRACT_ADDRESS:"0x05effdcfda86066c72c108e174c55a4f8d1249ba69f80e975d7fc814199a376b",CLASS_HASH:"0x00abc35fe33a082fad61df2a88160f16202d1a08cc338f1954063320063be4d5",STRK_TOKEN:"0x04718f5a0fc34cc1af16a1cdee98ffb20c31f5cd61d6ab07201858f4287c938d",DEPLOYMENT_PARAMS:{OWNER:"0x01734203d1C5B2699B3dbC50223c86EC59E2B79E2d34CBE8363F0dCCdC1E9634",MIN_DEPOSIT:0xde0b6b3a7640000n,MAX_DEPOSIT:0x3635c9adc5dea00000n,MIN_DELAY:0n,MIN_ANONYMITY:0n,FEE_RATE:10n}},hI="0x075a05264A7D0ebB864abFbE2bbFeE33D085EB77397b939bD17d55c2e69d87D3"},68043,e=>{"use strict";e.s(["ENV",()=>n,"getNetworkStatus",()=>a,"getStarknetRpc",()=>r]);var t=e.i(247167);let n={NETWORK:"MAINNET",STARKNET_RPC:"https://starknet-mainnet.g.alchemy.com/starknet/version/rpc/v0_8/kwgGr9GGk4YyLXuGfEvpITv1jpvn3PgP",STARKNET_PRIVATE_KEY:t.default.env.STARKNET_PRIVATE_KEY||"",SHARED_SWAP_ACCOUNT_PRIVATE_KEY:t.default.env.SHARED_SWAP_ACCOUNT_PRIVATE_KEY||"0x017e929b437eb038963df230f6dcc8002d06741107abfe22972e4532ba25ccaa",SHARED_SWAP_ACCOUNT_ADDRESS:t.default.env.SHARED_SWAP_ACCOUNT_ADDRESS||"",MIXER_CONTRACT_ADDRESS:"0x05effdcfda86066c72c108e174c55a4f8d1249ba69f80e975d7fc814199a376b",LND_URL:"https://slpm-node.t.voltageapp.io:8080",LND_MACAROON:"0201036c6e64025e030a103294bb4616a5eb95a9a935fd5183e1111207383635383234331a160a0761646472657373120472656164120577726974651a170a08696e766f69636573120472656164120577726974651a0f0a076f6e636861696e12047265616400000620bb9f424dcd1d871d56445eb2394e9f734a461bfbd8904538bb370965efd79643",LND_TLS:"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUUyRENDQkY2Z0F3SUJBZ0lTQmRPR3lzblJnUmJaR1NON3B3ZTQ2a0NrTUFvR0NDcUdTTTQ5QkFNRE1ESXgKQ3pBSkJnTlZCQVlUQWxWVE1SWXdGQVlEVlFRS0V3MU1aWFFuY3lCRmJtTnllWEIwTVFzd0NRWURWUVFERXdKRgpPREFlRncweU5UQTVNVGt5TXpRd01EZGFGdzB5TlRFeU1UZ3lNelF3TURaYU1Cb3hHREFXQmdOVkJBTU1EeW91CmRtOXNkR0ZuWldGd2NDNXBiekJaTUJNR0J5cUdTTTQ5QWdFR0NDcUdTTTQ5QXdFSEEwSUFCQ2tTZnIyTVlzWUgKN05zYUNOVVdCY1V2NmlJMGRVUkxFL0E2UEVSRjUvZkdIU1Vneldzc0o5emdqeG1uQ29JK0tzN1llcWlvMVBHWgp0dUJoVjNJVkJNV2pnZ05xTUlJRFpqQU9CZ05WSFE4QkFmOEVCQU1DQjRBd0hRWURWUjBsQkJZd0ZBWUlLd1lCCkJRVUhBd0VHQ0NzR0FRVUZCd01DTUF3R0ExVWRFd0VCL3dRQ01BQXdIUVlEVlIwT0JCWUVGTzRVNGdScjA3djIKbUUwc1dFdmdjeFpEbk84Sk1COEdBMVVkSXdRWU1CYUFGSThORTZMMkxuN1JVR3d6R0RoZFdZNGpjcEhLTURJRwpDQ3NHQVFVRkJ3RUJCQ1l3SkRBaUJnZ3JCZ0VGQlFjd0FvWVdhSFIwY0RvdkwyVTRMbWt1YkdWdVkzSXViM0puCkx6Q0NBV1VHQTFVZEVRU0NBVnd3Z2dGWWdoRXFMbUl1ZG05c2RHRm5aV0Z3Y0M1cGI0SVJLaTVrTG5admJIUmgKWjJVdVkyeHZkV1NDRVNvdVpDNTJiMngwWVdkbFlYQndMbWx2Z2hjcUxtMHVjbVZzWVhrdWRtOXNkR0ZuWlM1agpiRzkxWklJWEtpNXRMbkpsYkdGNUxuWnZiSFJoWjJWaGNIQXVhVytDRVNvdWJTNTJiMngwWVdkbExtTnNiM1ZrCmdoRXFMbTB1ZG05c2RHRm5aV0Z3Y0M1cGI0SU9LaTV1YjNOMGNpNTJiSFF1WjJXQ0Z5b3VkQzV5Wld4aGVTNTIKYjJ4MFlXZGxMbU5zYjNWa2doY3FMblF1Y21Wc1lYa3VkbTlzZEdGblpXRndjQzVwYjRJUktpNTBMblp2YkhSaApaMlV1WTJ4dmRXU0NFU291ZEM1MmIyeDBZV2RsWVhCd0xtbHZnaEVxTG5VdWRtOXNkR0ZuWldGd2NDNXBiNElQCktpNTJiMngwWVdkbExtTnNiM1ZrZ2hBcUxuWnZiSFJoWjJWaGNHa3VZMjl0Z2c4cUxuWnZiSFJoWjJWaGNIQXUKYVcrQ0JuWnNkQzVuWllJT2RtOXNkR0ZuWldGd2FTNWpiMjB3RXdZRFZSMGdCQXd3Q2pBSUJnWm5nUXdCQWdFdwpMUVlEVlIwZkJDWXdKREFpb0NDZ0hvWWNhSFIwY0RvdkwyVTRMbU11YkdWdVkzSXViM0puTHpNM0xtTnliRENDCkFRUUdDaXNHQVFRQjFua0NCQUlFZ2ZVRWdmSUE4QUIyQU4zY3lqU1YxK0VXQmVlVk12ckhuL2c5SEZEZjJ3QTYKRkJKMkNpeXN1OGdxQUFBQm1XU1BBNVlBQUFRREFFY3dSUUlnVVV0TGtNQk9oYUtDUk1odkZpa1AwUi9DUEhLdgptZHdSNGtsMWVZT3VOSklDSVFDaS8xZmVKNVBYZmMyME9FWDBnMDVZQkxEL01Ic2xzWkZ3UXF5M3BHY3h0UUIyCkFNejdEMnFGY1FsbC9wV2JVODdwc253aTZZVmNEWmVOdHFsK1ZNRCtUQTJ3QUFBQm1XU1BBNkVBQUFRREFFY3cKUlFJaEFKM0QvTFFzR0d5cFYrT2FpSWZJekQ4bFo4bEo3TnZaT2Y3QnVveStxR00xQWlCaTFxZFVwSGdNdTgzbQo5TGxTQ2k5YVo0eFN6VW93aVp6MDBkZDhlN3g5VlRBS0JnZ3Foa2pPUFFRREF3Tm9BREJsQWpFQWpyUERRM1FuClVjYTJSRng0TkhhZ1FwdWtFcTRrV2k0VkduUHIwZFplMERWc2RBM3hnSy9QTHRpcFlDODVDeUlxQWpCNjhLT2cKQzMvb05PN1ZqcmovUjFFWVd1QjZXWDJwYlMyN25PSW10V2taMm9ldWV1dUJ6Y2QyM1pKMHp6Z01UUXM9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVWakNDQWo2Z0F3SUJBZ0lRWTVXVFk4Sk9jSUp4V1JpL3c5ZnRWakFOQmdrcWhraUc5dzBCQVFzRkFEQlAKTVFzd0NRWURWUVFHRXdKVlV6RXBNQ2NHQTFVRUNoTWdTVzUwWlhKdVpYUWdVMlZqZFhKcGRIa2dVbVZ6WldGeQpZMmdnUjNKdmRYQXhGVEFUQmdOVkJBTVRERWxUVWtjZ1VtOXZkQ0JZTVRBZUZ3MHlOREF6TVRNd01EQXdNREJhCkZ3MHlOekF6TVRJeU16VTVOVGxhTURJeEN6QUpCZ05WQkFZVEFsVlRNUll3RkFZRFZRUUtFdzFNWlhRbmN5QkYKYm1OeWVYQjBNUXN3Q1FZRFZRUURFd0pGT0RCMk1CQUdCeXFHU000OUFnRUdCU3VCQkFBaUEySUFCTkZsOGw3YwpTN1FNQXB6U3N2cnU2V3lyT3E0NG9mVFVPVEl6eFVMVXpETU1OTWNoSUpCd1hPaGlMeHh4czBMWGViNUdEY0hiClI2RVRvTWZmZ1Naak85U05IZlk5Z2pNeTl2UXI1L1dXT3JRVFp4aDdhejZOU05ucTN1MnViVDZIVEtPQitEQ0IKOVRBT0JnTlZIUThCQWY4RUJBTUNBWVl3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdJR0NDc0dBUVVGQndNQgpNQklHQTFVZEV3RUIvd1FJTUFZQkFmOENBUUF3SFFZRFZSME9CQllFRkk4TkU2TDJMbjdSVUd3ekdEaGRXWTRqCmNwSEtNQjhHQTFVZEl3UVlNQmFBRkhtMFdlWjd0dVhrQVhPQUNJaklHbGoyNlp0dU1ESUdDQ3NHQVFVRkJ3RUIKQkNZd0pEQWlCZ2dyQmdFRkJRY3dBb1lXYUhSMGNEb3ZMM2d4TG1rdWJHVnVZM0l1YjNKbkx6QVRCZ05WSFNBRQpEREFLTUFnR0JtZUJEQUVDQVRBbkJnTlZIUjhFSURBZU1CeWdHcUFZaGhab2RIUndPaTh2ZURFdVl5NXNaVzVqCmNpNXZjbWN2TUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCbkUwaEdJTktzQ1lXaTBYeDF5Z3hENXFpaEVqWjAKUkkzdFRaejF3dUFUSDNad1lQSXA5N2tXRWF5YW5EMWowY0RoSVl6eTRDa0RvMmpCOEQ1dDBhNnpaV3pscjk4ZApBUUZOaDh1S0prSUhkTFNoeStuVXllWnhjNWJOZU1wMUx1MGdTekU0TWNxZm1OTXZJcGVpd1dTWU85dzgyT2I4Cm90dlhjTzJKVVlpM3N2SElXUm0zKzcwN0RVYkw1MVhNY1kyaVpkbENxNFdhOW5idWszV1RVNGdyNkxZOE16VkEKYURRRzIrNFUzZUo2cVVGMTBiQm5SMXV1VnlEWXM5Umhyd3VjUlZuZnVEajI5Q01MVHNwbE01ZjV3U1Y1aFVwbQpVd3AvdlY3TTR3NGFHdW50NzRrb1g3MW40RWRhZ0NzTC9ZazUrbUFRVTArdHVlMEpPZkFWL1I2dDFrK1hrOXMyCkhNUUZlb3hwcGZ6QVZDMDRGZEc5TStBQzJKV3htRlN0NkJDdWgzQ0VleTNmRTUyUXJqOVlNNzVydHZJanNtLzEKSGwrdS8vV3F4bnUxWlE0anBhK1ZwdVppR09sV3JxU1A5ZW9nZE9oQ0dpc255ZXdXSndSUU9xSzE2d2lHeVplUgp4cy9CZWt3NjV2d1NJYVZrQnJ1UGlUZk1PbzBaaDRnVmE4L3FKZ01iSmJ5cnd3Rzk3ei9QUmdtTEtDRGw4ejNkCnRBMFo3cXE3ZnRhMEdsMjR1eXVCMDVkcUk1SjFMdkF6S3VXZElqVDF0UDhxQ294U0UveHBpeDhoWDJkdDNoKy8KanVqVWdGUEZaMEVWWjB4U3lCTlJGM01ib0dabllYRlV4cE5qVFdQS3BhZ0RISlFtcXJBY0RtV0puTXNGWTNqUwp1MWlndjNPZWZuV2pTUT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K",CASHU_MINTS:"https://mint.coinos.io".split(",").map(e=>e.trim()).filter(Boolean),CASHU_DEFAULT_MINT:"https://mint.coinos.io",CASHU_SINGLE_MINT:!0,DISABLE_CASHU_SPLIT:!0,STRK_BTC_RATE:Number(t.default.env.NEXT_PUBLIC_STRK_BTC_RATE||t.default.env.STRK_BTC_RATE||"0"),STRK_SATS_RATE:(()=>{let e=t.default.env.NEXT_PUBLIC_STRK_SATS_RATE||t.default.env.STRK_SATS_RATE;if(e)return Number(e);let n=Number(t.default.env.NEXT_PUBLIC_STRK_BTC_RATE||t.default.env.STRK_BTC_RATE||"0");return n&&!isNaN(n)&&n>0?Math.floor(1e8*n):125})(),DISABLE_ATOMIQ_PRICE_FETCH:!1,ALLOW_SWAP_PRICE_FALLBACK:"true"===t.default.env.ALLOW_SWAP_PRICE_FALLBACK};function r(){if(n.STARKNET_RPC)return n.STARKNET_RPC;switch(n.NETWORK){case"MAINNET":default:return"https://starknet-mainnet.g.alchemy.com/starknet/version/rpc/v0_8/kwgGr9GGk4YyLXuGfEvpITv1jpvn3PgP";case"TESTNET":return"https://starknet-sepolia.public.blastapi.io/rpc/v0_7"}}function a(){let e=!!(n.LND_URL&&n.LND_MACAROON),t="MAINNET"===n.NETWORK?["MAINNET"===n.NETWORK&&n.STARKNET_RPC&&n.CASHU_DEFAULT_MINT&&n.LND_URL&&n.LND_MACAROON].every(Boolean):["TESTNET"===n.NETWORK&&n.STARKNET_RPC&&n.STARKNET_PRIVATE_KEY&&n.CASHU_DEFAULT_MINT].every(Boolean);return{network:n.NETWORK,starknetRpc:!!n.STARKNET_RPC,privateKey:!!n.STARKNET_PRIVATE_KEY,cashuMint:!!n.CASHU_DEFAULT_MINT,lightningNode:!!n.LND_URL,lightningConfigured:e,cashuMints:n.CASHU_MINTS.length,ready:t,warnings:(()=>{let e=[];return n.STARKNET_RPC||e.push("STARKNET_RPC not configured"),n.CASHU_DEFAULT_MINT||e.push("CASHU_DEFAULT_MINT not configured"),"MAINNET"===n.NETWORK&&(n.LND_URL||e.push("Lightning node (LND_URL) required for mainnet"),n.LND_MACAROON||e.push("Lightning authentication (LND_MACAROON) required for mainnet")),e})()}}!function(){let e=[],t=[];n.NETWORK&&["MAINNET","TESTNET"].includes(n.NETWORK)||e.push("Invalid network configuration"),n.CASHU_DEFAULT_MINT||e.push("No Cashu mint configured"),n.STARKNET_RPC||t.push("Using default ".concat(n.NETWORK," Starknet RPC - configure STARKNET_RPC for better reliability")),n.LND_URL||t.push("Lightning node URL not configured - using fallback mode"),0===n.CASHU_MINTS.length&&t.push("No multi-mint configuration - using single mint mode"),t.forEach(e=>console.warn(e))}()}]);