(globalThis.TURBOPACK||(globalThis.TURBOPACK=[])).push(["object"==typeof document?document.currentScript:void 0,235163,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},515662,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},517021,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},630903,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},725368,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},369553,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ETransactionVersion3=r.ETransactionVersion2=r.ETransactionVersion=r.EDAMode=r.EDataAvailabilityMode=r.EBlockTag=r.ETransactionExecutionStatus=r.ETransactionFinalityStatus=r.ETransactionStatus=r.ESimulationFlag=r.ETransactionType=r.CALL_TYPE=r.L1_DA_MODE=r.PRICE_UNIT_FRI=r.PRICE_UNIT_WEI=r.STATE_MUTABILITY_EXTERNAL=r.STATE_MUTABILITY_VIEW=r.ABI_TYPE_ENUM=r.ABI_TYPE_L1_HANDLER=r.ABI_TYPE_CONSTRUCTOR=r.ABI_TYPE_FUNCTION=r.EVENT_ABI_TYPE=r.STRUCT_ABI_TYPE=r.TXN_TYPE_L1_HANDLER=r.TXN_TYPE_INVOKE=r.TXN_TYPE_DEPLOY_ACCOUNT=r.TXN_TYPE_DEPLOY=r.TXN_TYPE_DECLARE=r.STATUS_RECEIVED=r.STATUS_REJECTED=r.STATUS_PENDING=r.STATUS_REVERTED=r.STATUS_SUCCEEDED=r.STATUS_ACCEPTED_ON_L1=r.STATUS_ACCEPTED_ON_L2=void 0,r.STATUS_ACCEPTED_ON_L2="ACCEPTED_ON_L2",r.STATUS_ACCEPTED_ON_L1="ACCEPTED_ON_L1",r.STATUS_SUCCEEDED="SUCCEEDED",r.STATUS_REVERTED="REVERTED",r.STATUS_PENDING="PENDING",r.STATUS_REJECTED="REJECTED",r.STATUS_RECEIVED="RECEIVED",r.TXN_TYPE_DECLARE="DECLARE",r.TXN_TYPE_DEPLOY="DEPLOY",r.TXN_TYPE_DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",r.TXN_TYPE_INVOKE="INVOKE",r.TXN_TYPE_L1_HANDLER="L1_HANDLER",r.STRUCT_ABI_TYPE="struct",r.EVENT_ABI_TYPE="event",r.ABI_TYPE_FUNCTION="function",r.ABI_TYPE_CONSTRUCTOR="constructor",r.ABI_TYPE_L1_HANDLER="l1_handler",r.ABI_TYPE_ENUM="enum",r.STATE_MUTABILITY_VIEW="view",r.STATE_MUTABILITY_EXTERNAL="external",r.PRICE_UNIT_WEI="WEI",r.PRICE_UNIT_FRI="FRI",r.L1_DA_MODE={BLOB:"BLOB",CALLDATA:"CALLDATA"},r.CALL_TYPE={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},r.ETransactionType={DECLARE:r.TXN_TYPE_DECLARE,DEPLOY:r.TXN_TYPE_DEPLOY,DEPLOY_ACCOUNT:r.TXN_TYPE_DEPLOY_ACCOUNT,INVOKE:r.TXN_TYPE_INVOKE,L1_HANDLER:r.TXN_TYPE_L1_HANDLER},r.ESimulationFlag={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},r.ETransactionStatus={RECEIVED:r.STATUS_RECEIVED,REJECTED:r.STATUS_REJECTED,ACCEPTED_ON_L2:r.STATUS_ACCEPTED_ON_L2,ACCEPTED_ON_L1:r.STATUS_ACCEPTED_ON_L1},r.ETransactionFinalityStatus={ACCEPTED_ON_L2:r.STATUS_ACCEPTED_ON_L2,ACCEPTED_ON_L1:r.STATUS_ACCEPTED_ON_L1},r.ETransactionExecutionStatus={SUCCEEDED:r.STATUS_SUCCEEDED,REVERTED:r.STATUS_REVERTED},r.EBlockTag={LATEST:"latest",PENDING:"pending"},r.EDataAvailabilityMode={L1:"L1",L2:"L2"},r.EDAMode={L1:0,L2:1},r.ETransactionVersion={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},r.ETransactionVersion2={V0:r.ETransactionVersion.V0,V1:r.ETransactionVersion.V1,V2:r.ETransactionVersion.V2,F0:r.ETransactionVersion.F0,F1:r.ETransactionVersion.F1,F2:r.ETransactionVersion.F2},r.ETransactionVersion3={V3:r.ETransactionVersion.V3,F3:r.ETransactionVersion.F3}},72160,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},649743,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},857206,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.CONTRACT=void 0,a(e.r(235163),r),r.CONTRACT=e.r(515662),a(e.r(517021),r),a(e.r(630903),r),a(e.r(725368),r),a(e.r(369553),r),a(e.r(72160),r),a(e.r(649743),r)},660425,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Permission=void 0,r.Permission={ACCOUNTS:"accounts"}},297014,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TypedDataRevision=void 0,r.TypedDataRevision={ACTIVE:"1",LEGACY:"0"}},475900,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},241324,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},731211,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},234561,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},82958,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},378323,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),a(e.r(660425),r),a(e.r(297014),r),a(e.r(475900),r),a(e.r(241324),r),a(e.r(731211),r),a(e.r(234561),r),a(e.r(82958),r)},186994,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},950042,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},254294,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},174840,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},835839,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),a(e.r(186994),r),a(e.r(950042),r),a(e.r(254294),r),a(e.r(174840),r)},906984,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.PAYMASTER_API=r.WALLET_API=r.API=void 0,a(e.r(857206),r),r.API=e.r(857206),a(e.r(378323),r),r.WALLET_API=e.r(378323),r.PAYMASTER_API=e.r(835839)},127873,(e,t,r)=>{"use strict";r._=function(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}},861625,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},917807,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},639601,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},458583,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ETransactionVersion3=r.ETransactionVersion2=r.ETransactionVersion=r.EDAMode=r.EDataAvailabilityMode=r.EBlockTag=r.ETransactionExecutionStatus=r.ETransactionFinalityStatus=r.ETransactionStatus=r.ESimulationFlag=r.ETransactionType=void 0,r.ETransactionType={DECLARE:"DECLARE",DEPLOY:"DEPLOY",DEPLOY_ACCOUNT:"DEPLOY_ACCOUNT",INVOKE:"INVOKE",L1_HANDLER:"L1_HANDLER"},r.ESimulationFlag={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},r.ETransactionStatus={RECEIVED:"RECEIVED",REJECTED:"REJECTED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},r.ETransactionFinalityStatus={ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},r.ETransactionExecutionStatus={SUCCEEDED:"SUCCEEDED",REVERTED:"REVERTED"},r.EBlockTag={LATEST:"latest",PENDING:"pending"},r.EDataAvailabilityMode={L1:"L1",L2:"L2"},r.EDAMode={L1:0,L2:1},r.ETransactionVersion={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},r.ETransactionVersion2={V0:"0x0",V1:"0x1",V2:"0x2",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002"},r.ETransactionVersion3={V3:"0x3",F3:"0x100000000000000000000000000000003"}},12701,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.SPEC=r.Errors=void 0,a(e.r(861625),r),r.Errors=e.r(917807),r.SPEC=e.r(639601),a(e.r(458583),r)},328450,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Permission=void 0,r.Permission={ACCOUNTS:"accounts"}},12473,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TypedDataRevision=void 0,r.TypedDataRevision={ACTIVE:"1",LEGACY:"0"}},52464,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},106931,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},766918,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},580495,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},690409,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},927602,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),a(e.r(328450),r),a(e.r(12473),r),a(e.r(52464),r),a(e.r(106931),r),a(e.r(766918),r),a(e.r(580495),r),a(e.r(690409),r)},536433,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.WALLET_API=r.API=void 0,a(e.r(12701),r),r.API=e.r(12701),a(e.r(927602),r),r.WALLET_API=e.r(927602)},462539,(e,t,r)=>{"use strict";function n(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function a(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function i(e){if("function"!=typeof e)throw Error("function expected");return!0}function o(e,t){if("string"!=typeof t)throw Error("".concat(e,": string expected"));return!0}function s(e){if(!Number.isSafeInteger(e))throw Error("invalid integer: ".concat(e))}function c(e){if(!Array.isArray(e))throw Error("array expected")}function l(e,t){if(!a(!0,t))throw Error("".concat(e,": array of strings expected"))}function u(e,t){if(!a(!1,t))throw Error("".concat(e,": array of numbers expected"))}function d(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=e=>e,a=(e,t)=>r=>e(t(r));return{encode:t.map(e=>e.encode).reduceRight(a,n),decode:t.map(e=>e.decode).reduce(a,n)}}function h(e){let t="string"==typeof e?e.split(""):e,r=t.length;l("alphabet",t);let n=new Map(t.map((e,t)=>[e,t]));return{encode:n=>(c(n),n.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw Error('alphabet.encode: digit index outside alphabet "'.concat(n,'". Allowed: ').concat(e));return t[n]})),decode:t=>(c(t),t.map(t=>{o("alphabet.decode",t);let r=n.get(t);if(void 0===r)throw Error('Unknown letter: "'.concat(t,'". Allowed: ').concat(e));return r}))}}function f(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return o("join",e),{encode:t=>(l("join.decode",t),t.join(e)),decode:t=>(o("join.decode",t),t.split(e))}}function p(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=";return s(e),o("padding",t),{encode(r){for(l("padding.encode",r);r.length*e%8;)r.push(t);return r},decode(r){l("padding.decode",r);let n=r.length;if(n*e%8)throw Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if((n-1)*e%8==0)throw Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}function g(e){return i(e),{encode:e=>e,decode:t=>e(t)}}function m(e,t,r){if(t<2)throw Error("convertRadix: invalid from=".concat(t,", base cannot be less than 2"));if(r<2)throw Error("convertRadix: invalid to=".concat(r,", base cannot be less than 2"));if(c(e),!e.length)return[];let n=0,a=[],i=Array.from(e,e=>{if(s(e),e<0||e>=t)throw Error("invalid integer: ".concat(e));return e}),o=i.length;for(;;){let e=0,s=!0;for(let a=n;a<o;a++){let o=i[a],c=t*e,l=c+o;if(!Number.isSafeInteger(l)||c/t!==e||l-o!==c)throw Error("convertRadix: carry overflow");let u=l/r;e=l%r;let d=Math.floor(u);if(i[a]=d,!Number.isSafeInteger(d)||d*r+e!==l)throw Error("convertRadix: carry overflow");s&&(d?s=!1:n=a)}if(a.push(e),s)break}for(let t=0;t<e.length-1&&0===e[t];t++)a.push(0);return a.reverse()}Object.defineProperty(r,"__esModule",{value:!0}),r.bytes=r.stringToBytes=r.str=r.bytesToString=r.hex=r.utf8=r.bech32m=r.bech32=r.base58check=r.createBase58check=r.base58xmr=r.base58xrp=r.base58flickr=r.base58=r.base64urlnopad=r.base64url=r.base64nopad=r.base64=r.base32crockford=r.base32hexnopad=r.base32hex=r.base32nopad=r.base32=r.base16=r.utils=r.assertNumber=void 0,r.assertNumber=s;let y=(e,t)=>0===t?e:y(t,e%t),b=(e,t)=>e+(t-y(e,t)),w=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function _(e,t,r,n){if(c(e),t<=0||t>32)throw Error("convertRadix2: wrong from=".concat(t));if(r<=0||r>32)throw Error("convertRadix2: wrong to=".concat(r));if(b(t,r)>32)throw Error("convertRadix2: carry overflow from=".concat(t," to=").concat(r," carryBits=").concat(b(t,r)));let a=0,i=0,o=w[t],l=w[r]-1,u=[];for(let n of e){if(s(n),n>=o)throw Error("convertRadix2: invalid data word=".concat(n," from=").concat(t));if(a=a<<t|n,i+t>32)throw Error("convertRadix2: carry overflow pos=".concat(i," from=").concat(t));for(i+=t;i>=r;i-=r)u.push((a>>i-r&l)>>>0);let e=w[i];if(void 0===e)throw Error("invalid carry");a&=e-1}if(a=a<<r-i&l,!n&&i>=t)throw Error("Excess padding");if(!n&&a>0)throw Error("Non-zero padding: ".concat(a));return n&&i>0&&u.push(a>>>0),u}function v(e){return s(e),{encode:t=>{if(!n(t))throw Error("radix.encode input should be Uint8Array");return m(Array.from(t),256,e)},decode:t=>(u("radix.decode",t),Uint8Array.from(m(t,e,256)))}}function E(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(s(e),e<=0||e>32)throw Error("radix2: bits should be in (0..32]");if(b(8,e)>32||b(e,8)>32)throw Error("radix2: carry overflow");return{encode:r=>{if(!n(r))throw Error("radix2.encode input should be Uint8Array");return _(Array.from(r),8,e,!t)},decode:r=>(u("radix2.decode",r),Uint8Array.from(_(r,e,8,t)))}}function S(e){return i(e),function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];try{return e.apply(null,r)}catch(e){}}}function x(e,t){return s(e),i(t),{encode(r){if(!n(r))throw Error("checksum.encode: input should be Uint8Array");let a=t(r).slice(0,e),i=new Uint8Array(r.length+e);return i.set(r),i.set(a,r.length),i},decode(r){if(!n(r))throw Error("checksum.decode: input should be Uint8Array");let a=r.slice(0,-e),i=r.slice(-e),o=t(a).slice(0,e);for(let t=0;t<e;t++)if(o[t]!==i[t])throw Error("Invalid checksum");return a}}}r.utils={alphabet:h,chain:d,checksum:x,convertRadix:m,convertRadix2:_,radix:v,radix2:E,join:f,padding:p},r.base16=d(E(4),h("0123456789ABCDEF"),f("")),r.base32=d(E(5),h("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),p(5),f("")),r.base32nopad=d(E(5),h("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),f("")),r.base32hex=d(E(5),h("0123456789ABCDEFGHIJKLMNOPQRSTUV"),p(5),f("")),r.base32hexnopad=d(E(5),h("0123456789ABCDEFGHIJKLMNOPQRSTUV"),f("")),r.base32crockford=d(E(5),h("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),f(""),g(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),r.base64=d(E(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),p(6),f("")),r.base64nopad=d(E(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),f("")),r.base64url=d(E(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),p(6),f("")),r.base64urlnopad=d(E(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),f(""));let k=e=>d(v(58),h(e),f(""));r.base58=k("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),r.base58flickr=k("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),r.base58xrp=k("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");let T=[0,2,3,5,6,7,9,10,11];r.base58xmr={encode(e){let t="";for(let n=0;n<e.length;n+=8){let a=e.subarray(n,n+8);t+=r.base58.encode(a).padStart(T[a.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){let a=e.slice(n,n+11),i=T.indexOf(a.length),o=r.base58.decode(a);for(let e=0;e<o.length-i;e++)if(0!==o[e])throw Error("base58xmr: wrong padding");t=t.concat(Array.from(o.slice(o.length-i)))}return Uint8Array.from(t)}},r.createBase58check=e=>d(x(4,t=>e(e(t))),r.base58),r.base58check=r.createBase58check;let A=d(h("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),f("")),B=[0x3b6a57b2,0x26508e6d,0x1ea119fa,0x3d4233dd,0x2a1462b3];function I(e){let t=e>>25,r=(0x1ffffff&e)<<5;for(let e=0;e<B.length;e++)(t>>e&1)==1&&(r^=B[e]);return r}function C(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e.length,a=1;for(let t=0;t<n;t++){let r=e.charCodeAt(t);if(r<33||r>126)throw Error("Invalid prefix (".concat(e,")"));a=I(a)^r>>5}a=I(a);for(let t=0;t<n;t++)a=I(a)^31&e.charCodeAt(t);for(let e of t)a=I(a)^e;for(let e=0;e<6;e++)a=I(a);return a^=r,A.encode(_([a%w[30]],30,5,!1))}function O(e){let t="bech32"===e?1:0x2bc830a3,r=E(5),a=r.decode,i=r.encode,s=S(a);function c(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:90;o("bech32.encode prefix",e),n(r)&&(r=Array.from(r)),u("bech32.encode",r);let i=e.length;if(0===i)throw TypeError("Invalid prefix length ".concat(i));let s=i+7+r.length;if(!1!==a&&s>a)throw TypeError("Length ".concat(s," exceeds limit ").concat(a));let c=e.toLowerCase(),l=C(c,r,t);return"".concat(c,"1").concat(A.encode(r)).concat(l)}function l(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;o("bech32.decode input",e);let n=e.length;if(n<8||!1!==r&&n>r)throw TypeError("invalid string length: ".concat(n," (").concat(e,"). Expected (8..").concat(r,")"));let a=e.toLowerCase();if(e!==a&&e!==e.toUpperCase())throw Error("String must be lowercase or uppercase");let i=a.lastIndexOf("1");if(0===i||-1===i)throw Error('Letter "1" must be present between prefix and data only');let s=a.slice(0,i),c=a.slice(i+1);if(c.length<6)throw Error("Data must be at least 6 characters long");let l=A.decode(c).slice(0,-6),u=C(s,l,t);if(!c.endsWith(u))throw Error("Invalid checksum in ".concat(e,': expected "').concat(u,'"'));return{prefix:s,words:l}}let d=S(l);return{encode:c,decode:l,encodeFromBytes:function(e,t){return c(e,i(t))},decodeToBytes:function(e){let{prefix:t,words:r}=l(e,!1);return{prefix:t,words:r,bytes:a(r)}},decodeUnsafe:d,fromWords:a,fromWordsUnsafe:s,toWords:i}}r.bech32=O("bech32"),r.bech32m=O("bech32m"),r.utf8={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},r.hex=d(E(4),h("0123456789abcdef"),f(""),g(e=>{if("string"!=typeof e||e.length%2!=0)throw TypeError("hex.decode: expected string, got ".concat(typeof e," with length ").concat(e.length));return e.toLowerCase()}));let P={utf8:r.utf8,hex:r.hex,base16:r.base16,base32:r.base32,base64:r.base64,base64url:r.base64url,base58:r.base58,base58xmr:r.base58xmr},N="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";r.bytesToString=(e,t)=>{if("string"!=typeof e||!P.hasOwnProperty(e))throw TypeError(N);if(!n(t))throw TypeError("bytesToString() expects Uint8Array");return P[e].encode(t)},r.str=r.bytesToString,r.stringToBytes=(e,t)=>{if(!P.hasOwnProperty(e))throw TypeError(N);if("string"!=typeof t)throw TypeError("stringToBytes() expects string");return P[e].decode(t)},r.bytes=r.stringToBytes},839084,(e,t,r)=>{var n=e.r(127873);e.e,function(e){"use strict";var t;function r(e){return a.test(e)}let a=/^-?[0-9]+$/;function i(e){return o.test(e)}let o=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function s(e,t){if(r(e))return Number.isSafeInteger(Number.parseInt(e,10));let n=String(Number.parseFloat(e));if(e===n)return!0;let a=h(e),i=h(n);return!!(a===i||!0===(null==t?void 0:t.approx)&&!r(e)&&i.length>=14&&a.startsWith(i.substring(0,14)))||!1}let c=((t={}).underflow="underflow",t.overflow="overflow",t.truncate_integer="truncate_integer",t.truncate_float="truncate_float",t);function l(e){if(s(e,{approx:!1}))return;if(r(e))return c.truncate_integer;let t=Number.parseFloat(e);return Number.isFinite(t)?0===t?c.underflow:c.truncate_float:c.overflow}function u(e){let t=e.match(/^(-?)(\d+\.?\d*)([eE]([+-]?\d+))?$/);if(!t)throw SyntaxError("Invalid number: ".concat(e));let r=t[1],n=t[2],a=void 0!==t[4]?Number.parseInt(t[4],10):0,i=n.indexOf(".");a+=-1!==i?i-1:n.length-1;let o=n.replace(".","").replace(/^0*/,e=>(a-=e.length,"")).replace(/0*$/,"");return o.length>0?{sign:r,digits:o,exponent:a}:{sign:r,digits:"0",exponent:a+1}}function d(e,t){if(e===t)return 0;let r=u(e),n=u(t),a="-"===r.sign?-1:1;return r.sign!==n.sign?"0"===r.digits&&"0"===n.digits?0:a:r.exponent!==n.exponent?r.exponent>n.exponent?a:r.exponent<n.exponent?-a:0:r.digits>n.digits?a:r.digits<n.digits?-a:0}function h(e){let{start:t,end:r}=f(e),n=e.substring(t,r),a=n.indexOf(".");return -1===a?n:n.substring(0,a)+n.substring(a+1)}function f(e){let t=0;for("-"===e[0]&&t++;"0"===e[t]||"."===e[t];)t++;let r=e.lastIndexOf("e");for(-1===r&&(r=e.lastIndexOf("E")),-1===r&&(r=e.length);("0"===e[r-1]||"."===e[r-1])&&r>t;)r--;return{start:t,end:r}}class p{valueOf(){let e=l(this.value);if(void 0===e||e===c.truncate_float)return Number.parseFloat(this.value);if(r(this.value))return BigInt(this.value);throw Error("Cannot safely convert to number: the value '".concat(this.value,"' would ").concat(e," and become ").concat(Number.parseFloat(this.value)))}toString(){return this.value}constructor(e){if(n._(this,"isLosslessNumber",!0),!i(e))throw Error('Invalid number (value: "'.concat(e,'")'));this.value=e}}function g(e){return e&&"object"==typeof e&&e.isLosslessNumber||!1}function m(e){return new p(e)}function y(e){return e>=v&&e<=E||e>=S&&e<=k||e>=x&&e<=T}function b(e){return e>=v&&e<=E}function w(e){return"object"==typeof e&&null!==e}let _={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},v=48,E=57,S=65,x=97,k=70,T=102,A=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/;e.LosslessNumber=p,e.UnsafeNumberReason=c,e.compareLosslessNumber=function(e,t){return d(e.value,t.value)},e.compareNumber=d,e.config=function(e){throw Error("config is deprecated, support for circularRefs is removed from the library. If you encounter circular references in your data structures, please rethink your datastructures: better prevent circular references in the first place.")},e.getUnsafeNumberReason=l,e.isInteger=r,e.isLosslessNumber=g,e.isNumber=i,e.isSafeNumber=s,e.parse=function(e,t,r){var n,a;let i="function"==typeof r?{parseNumber:r}:r,o=null!=(n=null==i?void 0:i.parseNumber)?n:m,s=null!=(a=null==i?void 0:i.onDuplicateKey)?a:function(e){let{key:t,position:r}=e;throw SyntaxError("Duplicate key '".concat(t,"' encountered at position ").concat(r))},c=0,l=function t(){var r,n,a,i,l,g;d();let m=null!=(g=null!=(l=null!=(i=null!=(a=null!=(n=null!=(r=h())?r:function(){var t;let r=c;if(45===e.charCodeAt(c)&&(c++,p(r)),e.charCodeAt(c)===v)c++;else if((t=e.charCodeAt(c))>=49&&t<=E)for(c++;b(e.charCodeAt(c));)c++;if(46===e.charCodeAt(c))for(c++,p(r);b(e.charCodeAt(c));)c++;if(101===e.charCodeAt(c)||69===e.charCodeAt(c))for(c++,45!==e.charCodeAt(c)&&43!==e.charCodeAt(c)||c++,p(r);b(e.charCodeAt(c));)c++;if(c>r)return o(e.slice(r,c))}())?n:function(){if(123===e.charCodeAt(c)){c++,d();let r={},n=!0;for(;c<e.length&&125!==e.charCodeAt(c);){n?n=!1:(f(),d());let a=c,i=h();if(void 0===i)return void function(){throw SyntaxError("Quoted object key expected ".concat(x()))}();d(),function(){if(58!==e.charCodeAt(c))throw SyntaxError("Colon ':' expected after property name ".concat(x()));c++}();let o=t();if(void 0===o)return void function(){throw SyntaxError("Object value expected after ':' ".concat(S()))}();if(Object.prototype.hasOwnProperty.call(r,i)&&!function e(t,r){return t===r||(Array.isArray(t)&&Array.isArray(r)?t.length===r.length&&t.every((t,n)=>e(t,r[n])):!!(w(t)&&w(r))&&[...new Set([...Object.keys(t),...Object.keys(r)])].every(n=>e(t[n],r[n])))}(o,r[i])){let e=s({key:i,position:a+1,oldValue:r[i],newValue:o});void 0!==e&&(r[i]=e)}else r[i]=o}return 125!==e.charCodeAt(c)&&function(){throw SyntaxError("Quoted object key or end of object '}' expected ".concat(x()))}(),c++,r}}())?a:function(){if(91===e.charCodeAt(c)){c++,d();let r=[],n=!0;for(;c<e.length&&93!==e.charCodeAt(c);){n?n=!1:f();let e=t();(function(e){if(void 0===e)throw SyntaxError("Array item expected ".concat(x()))})(e),r.push(e)}return 93!==e.charCodeAt(c)&&function(){throw SyntaxError("Array item or end of array ']' expected ".concat(x()))}(),c++,r}}())?i:u("true",!0))?l:u("false",!1))?g:u("null",null);return d(),m}();return function(e){if(void 0===e)throw SyntaxError("JSON value expected ".concat(x()))}(l),function(){if(c<e.length)throw SyntaxError("Expected end of input ".concat(x()))}(),t?function e(t,r,n,a){return Array.isArray(n)?a.call(t,r,function(t,r){for(let n=0;n<t.length;n++)t[n]=e(t,String(n),t[n],r);return t}(n,a)):n&&"object"==typeof n&&!g(n)?a.call(t,r,function(t,r){for(let n of Object.keys(t)){let a=e(t,n,t[n],r);void 0!==a?t[n]=a:delete t[n]}return t}(n,a)):a.call(t,r,n)}({"":l},"",l,t):l;function u(t,r){if(e.slice(c,c+t.length)===t)return c+=t.length,r}function d(){for(var t;32===(t=e.charCodeAt(c))||10===t||9===t||13===t;)c++}function h(){var t;if(34===e.charCodeAt(c)){c++;let r="";for(;c<e.length&&34!==e.charCodeAt(c);){if(92===e.charCodeAt(c)){let t=e[c+1],n=_[t];void 0!==n?(r+=n,c++):"u"===t?y(e.charCodeAt(c+2))&&y(e.charCodeAt(c+3))&&y(e.charCodeAt(c+4))&&y(e.charCodeAt(c+5))?(r+=String.fromCharCode(Number.parseInt(e.slice(c+2,c+6),16)),c+=5):function(t){let r=e.slice(t,t+6);throw SyntaxError("Invalid unicode character '".concat(r,"' ").concat(S()))}(c):function(t){let r=e.slice(t,t+2);throw SyntaxError("Invalid escape character '".concat(r,"' ").concat(S()))}(c)}else(t=e.charCodeAt(c))>=32&&t<=1114111?r+=e[c]:function(e){throw SyntaxError("Invalid character '".concat(e,"' ").concat(S()))}(e[c]);c++}return function(){if(34!==e.charCodeAt(c))throw SyntaxError("End of string '\"' expected ".concat(x()))}(),c++,r}}function f(){if(44!==e.charCodeAt(c))throw SyntaxError("Comma ',' expected after value ".concat(x()));c++}function p(t){if(!b(e.charCodeAt(c))){let r=e.slice(t,c);throw SyntaxError("Invalid number '".concat(r,"', expecting a digit ").concat(x()))}}function S(){return"at position ".concat(c)}function x(){return"".concat(c<e.length?"but got '".concat(e[c],"'"):"but reached end of input"," ").concat(S())}},e.parseLosslessNumber=m,e.parseNumberAndBigInt=function(e){return r(e)?BigInt(e):Number.parseFloat(e)},e.reviveDate=function(e,t){return"string"==typeof t&&A.test(t)?new Date(t):t},e.splitNumber=u,e.stringify=function e(t,r,n,a){let o="number"==typeof n?" ".repeat(n):"string"==typeof n&&""!==n?n:void 0;return function t(s,c){if(Array.isArray(a)){let e=a.find(e=>e.test(s));if(e){let t=e.stringify(s);if("string"!=typeof t||!i(t))throw Error("Invalid JSON number: output of a number stringifier must be a string containing a JSON number (output: ".concat(t,")"));return t}}return"boolean"==typeof s||"number"==typeof s||"string"==typeof s||null===s||s instanceof Date||s instanceof Boolean||s instanceof Number||s instanceof String?JSON.stringify(s):(null==s?void 0:s.isLosslessNumber)||"bigint"==typeof s?s.toString():Array.isArray(s)?function(e,n){if(0===e.length)return"[]";let a=o?n+o:void 0,i=o?"[\n":"[";for(let n=0;n<e.length;n++){let s="function"==typeof r?r.call(e,String(n),e[n]):e[n];o&&(i+=a),i+=void 0!==s&&"function"!=typeof s?t(s,a):"null",n<e.length-1&&(i+=o?",\n":",")}return i+(o?"\n".concat(n,"]"):"]")}(s,c):s&&"object"==typeof s?function(a,i){if("function"==typeof a.toJSON)return e(a.toJSON(),r,n,void 0);let s=Array.isArray(r)?r.map(String):Object.keys(a);if(0===s.length)return"{}";let c=o?i+o:void 0,l=!0,u=o?"{\n":"{";for(let e of s){var d,h;let n="function"==typeof r?r.call(a,e,a[e]):a[e];if(d=0,void 0!==(h=n)&&"function"!=typeof h&&"symbol"!=typeof h){l?l=!1:u+=o?",\n":",";let r=JSON.stringify(e);u+=o?"".concat(c+r,": "):"".concat(r,":"),u+=t(n,c)}}return u+(o?"\n".concat(i,"}"):"}")}(s,c):void 0}("function"==typeof r?r.call({"":t},"",t):t,"")},e.toLosslessNumber=function(e){if(function(e){let{start:t,end:r}=f(e),n=e.indexOf(".");return -1===n||n<t||n>r?r-t:r-t-1}(String(e))>15)throw Error("Invalid number: contains more than 15 digits and is most likely truncated and unsafe by itself (value: ".concat(e,")"));if(Number.isNaN(e))throw Error("Invalid number: NaN");if(!Number.isFinite(e))throw Error("Invalid number: ".concat(e));return new p(String(e))},e.toSafeNumberOrThrow=function(e,t){let r=Number.parseFloat(e),n=l(e);if(!0===(null==t?void 0:t.approx)?n&&n!==c.truncate_float:n){let t=null==n?void 0:n.replace(/_\w+$/,"");throw Error("Cannot safely convert to number: the value '".concat(e,"' would ").concat(t," and become ").concat(r))}return r}}(r)},771952,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.notImplemented=r.bitMask=void 0,r.isBytes=o,r.abytes=s,r.abool=function(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)},r.bytesToHex=l,r.numberToHexUnpadded=u,r.hexToNumber=d,r.hexToBytes=p,r.bytesToNumberBE=function(e){return d(l(e))},r.bytesToNumberLE=function(e){return s(e),d(l(Uint8Array.from(e).reverse()))},r.numberToBytesBE=g,r.numberToBytesLE=function(e,t){return g(e,t).reverse()},r.numberToVarBytesBE=function(e){return p(u(e))},r.ensureBytes=function(e,t,r){let n;if("string"==typeof t)try{n=p(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(o(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let a=n.length;if("number"==typeof r&&a!==r)throw Error(e+" of length "+r+" expected, got "+a);return n},r.concatBytes=m,r.equalBytes=function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r},r.utf8ToBytes=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))},r.inRange=b,r.aInRange=function(e,t,r,n){if(!b(t,r,n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)},r.bitLen=function(e){let t;for(t=0;e>n;e>>=a,t+=1);return t},r.bitGet=function(e,t){return e>>BigInt(t)&a},r.bitSet=function(e,t,r){return e|(r?a:n)<<BigInt(t)},r.createHmacDrbg=function(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=w(e),a=w(e),i=0,o=()=>{n.fill(1),a.fill(0),i=0},s=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return r(a,n,...t)},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w();a=s(_([0]),e),n=s(),0!==e.length&&(a=s(_([1]),e),n=s())},l=()=>{if(i++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=s()).slice();r.push(t),e+=n.length}return m(...r)};return(e,t)=>{let r;for(o(),c(e);!(r=t(l()));)c();return o(),r}},r.validateObject=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(t,r,n)=>{let a=v[r];if("function"!=typeof a)throw Error("invalid validator function");let i=e[t];if((!n||void 0!==i)&&!a(i,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+i)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e},r.memoized=function(e){let t=new WeakMap;return function(r){for(var n=arguments.length,a=Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];let o=t.get(r);if(void 0!==o)return o;let s=e(r,...a);return t.set(r,s),s}};let n=BigInt(0),a=BigInt(1),i=BigInt(2);function o(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e){if(!o(e))throw Error("Uint8Array expected")}let c=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function l(e){s(e);let t="";for(let r=0;r<e.length;r++)t+=c[e[r]];return t}function u(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function d(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?n:BigInt("0x"+e)}let h={_0:48,_9:57,A:65,F:70,a:97,f:102};function f(e){return e>=h._0&&e<=h._9?e-h._0:e>=h.A&&e<=h.F?e-(h.A-10):e>=h.a&&e<=h.f?e-(h.a-10):void 0}function p(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,a=0;t<r;t++,a+=2){let r=f(e.charCodeAt(a)),i=f(e.charCodeAt(a+1));if(void 0===r||void 0===i)throw Error('hex string expected, got non-hex character "'+(e[a]+e[a+1])+'" at index '+a);n[t]=16*r+i}return n}function g(e,t){return p(e.toString(16).padStart(2*t,"0"))}function m(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=0;for(let e=0;e<t.length;e++){let r=t[e];s(r),n+=r.length}let a=new Uint8Array(n);for(let e=0,r=0;e<t.length;e++){let n=t[e];a.set(n,r),r+=n.length}return a}let y=e=>"bigint"==typeof e&&n<=e;function b(e,t,r){return y(e)&&y(t)&&y(r)&&t<=e&&e<r}r.bitMask=e=>(i<<BigInt(e-1))-a;let w=e=>new Uint8Array(e),_=e=>Uint8Array.from(e),v={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||o(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};r.notImplemented=()=>{throw Error("not implemented")}},353539,(e,t,r)=>{"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function a(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(r.length>0&&!r.includes(e.length))throw Error("Uint8Array expected of length "+r+", got length="+e.length)}function i(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function o(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function s(e,t){a(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}Object.defineProperty(r,"__esModule",{value:!0}),r.anumber=n,r.number=n,r.abytes=a,r.bytes=a,r.ahash=i,r.aexists=o,r.aoutput=s,r.default={number:n,bytes:a,hash:i,exists:o,output:s}},304503,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=void 0,r.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},328506,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Hash=r.nextTick=r.byteSwapIfBE=r.byteSwap=r.isLE=r.rotl=r.rotr=r.createView=r.u32=r.u8=void 0,r.isBytes=function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name},r.byteSwap32=function(e){for(let t=0;t<e.length;t++)e[t]=(0,r.byteSwap)(e[t])},r.bytesToHex=function(e){(0,a.abytes)(e);let t="";for(let r=0;r<e.length;r++)t+=i[e[r]];return t},r.hexToBytes=function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,a=0;t<r;t++,a+=2){let r=s(e.charCodeAt(a)),i=s(e.charCodeAt(a+1));if(void 0===r||void 0===i)throw Error('hex string expected, got non-hex character "'+(e[a]+e[a+1])+'" at index '+a);n[t]=16*r+i}return n},r.asyncLoop=c,r.utf8ToBytes=l,r.toBytes=u,r.concatBytes=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=0;for(let e=0;e<t.length;e++){let r=t[e];(0,a.abytes)(r),n+=r.length}let i=new Uint8Array(n);for(let e=0,r=0;e<t.length;e++){let n=t[e];i.set(n,r),r+=n.length}return i},r.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==({}).toString.call(t))throw Error("Options should be object or undefined");return Object.assign(e,t)},r.wrapConstructor=function(e){let t=t=>e().update(u(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},r.wrapConstructorWithOpts=function(e){let t=(t,r)=>e(r).update(u(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.wrapXOFConstructorWithOpts=function(e){let t=(t,r)=>e(r).update(u(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.randomBytes=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(e));if(n.crypto&&"function"==typeof n.crypto.randomBytes)return n.crypto.randomBytes(e);throw Error("crypto.getRandomValues must be defined")};let n=e.r(304503),a=e.r(353539);r.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),r.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),r.rotr=(e,t)=>e<<32-t|e>>>t,r.rotl=(e,t)=>e<<t|e>>>32-t>>>0,r.isLE=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],r.byteSwap=e=>e<<24&0xff000000|e<<8&0xff0000|e>>>8&65280|e>>>24&255,r.byteSwapIfBE=r.isLE?e=>e:e=>(0,r.byteSwap)(e);let i=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),o={_0:48,_9:57,A:65,F:70,a:97,f:102};function s(e){return e>=o._0&&e<=o._9?e-o._0:e>=o.A&&e<=o.F?e-(o.A-10):e>=o.a&&e<=o.f?e-(o.a-10):void 0}async function c(e,t,n){let a=Date.now();for(let i=0;i<e;i++){n(i);let e=Date.now()-a;e>=0&&e<t||(await (0,r.nextTick)(),a+=e)}}function l(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function u(e){return"string"==typeof e&&(e=l(e)),(0,a.abytes)(e),e}r.nextTick=async()=>{},r.Hash=class{clone(){return this._cloneInto()}}},67874,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HashMD=r.Maj=r.Chi=void 0;let n=e.r(353539),a=e.r(328506);r.Chi=(e,t,r)=>e&t^~e&r,r.Maj=(e,t,r)=>e&t^e&r^t&r;class i extends a.Hash{update(e){(0,n.aexists)(this);let{view:t,buffer:r,blockLen:i}=this,o=(e=(0,a.toBytes)(e)).length;for(let n=0;n<o;){let s=Math.min(i-this.pos,o-n);if(s===i){let t=(0,a.createView)(e);for(;i<=o-n;n+=i)this.process(t,n);continue}r.set(e.subarray(n,n+s),this.pos),this.pos+=s,n+=s,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.aexists)(this),(0,n.aoutput)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:o}=this,{pos:s}=this;t[s++]=128,this.buffer.subarray(s).fill(0),this.padOffset>i-s&&(this.process(r,0),s=0);for(let e=s;e<i;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let a=BigInt(32),i=BigInt(0xffffffff),o=Number(r>>a&i),s=Number(r&i),c=4*!!n,l=4*!n;e.setUint32(t+c,o,n),e.setUint32(t+l,s,n)}(r,i-8,BigInt(8*this.length),o),this.process(r,0);let c=(0,a.createView)(e),l=this.outputLen;if(l%4)throw Error("_sha2: outputLen should be aligned to 32bit");let u=l/4,d=this.get();if(u>d.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)c.setUint32(4*e,d[e],o)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:a,destroyed:i,pos:o}=this;return e.length=n,e.pos=o,e.finished=a,e.destroyed=i,n%t&&e.buffer.set(r),e}constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,a.createView)(this.buffer)}}r.HashMD=i},171249,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sha224=r.sha256=r.SHA256=void 0;let n=e.r(67874),a=e.r(328506),i=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),o=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),s=new Uint32Array(64);class c extends n.HashMD{get(){let{A:e,B:t,C:r,D:n,E:a,F:i,G:o,H:s}=this;return[e,t,r,n,a,i,o,s]}set(e,t,r,n,a,i,o,s){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|a,this.F=0|i,this.G=0|o,this.H=0|s}process(e,t){for(let r=0;r<16;r++,t+=4)s[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=s[e-15],r=s[e-2],n=(0,a.rotr)(t,7)^(0,a.rotr)(t,18)^t>>>3,i=(0,a.rotr)(r,17)^(0,a.rotr)(r,19)^r>>>10;s[e]=i+s[e-7]+n+s[e-16]|0}let{A:r,B:o,C:c,D:l,E:u,F:d,G:h,H:f}=this;for(let e=0;e<64;e++){let t=f+((0,a.rotr)(u,6)^(0,a.rotr)(u,11)^(0,a.rotr)(u,25))+(0,n.Chi)(u,d,h)+i[e]+s[e]|0,p=((0,a.rotr)(r,2)^(0,a.rotr)(r,13)^(0,a.rotr)(r,22))+(0,n.Maj)(r,o,c)|0;f=h,h=d,d=u,u=l+t|0,l=c,c=o,o=r,r=t+p|0}r=r+this.A|0,o=o+this.B|0,c=c+this.C|0,l=l+this.D|0,u=u+this.E|0,d=d+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(r,o,c,l,u,d,h,f)}roundClean(){s.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}constructor(){super(64,32,8,!1),this.A=0|o[0],this.B=0|o[1],this.C=0|o[2],this.D=0|o[3],this.E=0|o[4],this.F=0|o[5],this.G=0|o[6],this.H=0|o[7]}}r.SHA256=c;class l extends c{constructor(){super(),this.A=-0x3efa6128,this.B=0x367cd507,this.C=0x3070dd17,this.D=-0x8f1a6c7,this.E=-4191439,this.F=0x68581511,this.G=0x64f98fa7,this.H=-0x4105b05c,this.outputLen=28}}r.sha256=(0,a.wrapConstructor)(()=>new c),r.sha224=(0,a.wrapConstructor)(()=>new l)},552728,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.add5L=r.add5H=r.add4H=r.add4L=r.add3H=r.add3L=r.rotlBL=r.rotlBH=r.rotlSL=r.rotlSH=r.rotr32L=r.rotr32H=r.rotrBL=r.rotrBH=r.rotrSL=r.rotrSH=r.shrSL=r.shrSH=r.toBig=void 0,r.fromBig=i,r.split=o,r.add=_;let n=BigInt(0x100000000-1),a=BigInt(32);function i(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?{h:Number(e&n),l:Number(e>>a&n)}:{h:0|Number(e>>a&n),l:0|Number(e&n)}}function o(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let a=0;a<e.length;a++){let{h:o,l:s}=i(e[a],t);[r[a],n[a]]=[o,s]}return[r,n]}let s=(e,t)=>BigInt(e>>>0)<<a|BigInt(t>>>0);r.toBig=s;let c=(e,t,r)=>e>>>r;r.shrSH=c;let l=(e,t,r)=>e<<32-r|t>>>r;r.shrSL=l;let u=(e,t,r)=>e>>>r|t<<32-r;r.rotrSH=u;let d=(e,t,r)=>e<<32-r|t>>>r;r.rotrSL=d;let h=(e,t,r)=>e<<64-r|t>>>r-32;r.rotrBH=h;let f=(e,t,r)=>e>>>r-32|t<<64-r;r.rotrBL=f;let p=(e,t)=>t;r.rotr32H=p;let g=(e,t)=>e;r.rotr32L=g;let m=(e,t,r)=>e<<r|t>>>32-r;r.rotlSH=m;let y=(e,t,r)=>t<<r|e>>>32-r;r.rotlSL=y;let b=(e,t,r)=>t<<r-32|e>>>64-r;r.rotlBH=b;let w=(e,t,r)=>e<<r-32|t>>>64-r;function _(e,t,r,n){let a=(t>>>0)+(n>>>0);return{h:e+r+(a/0x100000000|0)|0,l:0|a}}r.rotlBL=w;let v=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);r.add3L=v;let E=(e,t,r,n)=>t+r+n+(e/0x100000000|0)|0;r.add3H=E;let S=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);r.add4L=S;let x=(e,t,r,n,a)=>t+r+n+a+(e/0x100000000|0)|0;r.add4H=x;let k=(e,t,r,n,a)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(a>>>0);r.add5L=k;let T=(e,t,r,n,a,i)=>t+r+n+a+i+(e/0x100000000|0)|0;r.add5H=T,r.default={fromBig:i,split:o,toBig:s,shrSH:c,shrSL:l,rotrSH:u,rotrSL:d,rotrBH:h,rotrBL:f,rotr32H:p,rotr32L:g,rotlSH:m,rotlSL:y,rotlBH:b,rotlBL:w,add:_,add3L:v,add3H:E,add4L:S,add4H:x,add5H:T,add5L:k}},477818,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shake256=r.shake128=r.keccak_512=r.keccak_384=r.keccak_256=r.keccak_224=r.sha3_512=r.sha3_384=r.sha3_256=r.sha3_224=r.Keccak=void 0,r.keccakP=w;let n=e.r(353539),a=e.r(552728),i=e.r(328506),o=[],s=[],c=[],l=BigInt(0),u=BigInt(1),d=BigInt(2),h=BigInt(7),f=BigInt(256),p=BigInt(113);for(let e=0,t=u,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],o.push(2*(5*n+r)),s.push((e+1)*(e+2)/2%64);let a=l;for(let e=0;e<7;e++)(t=(t<<u^(t>>h)*p)%f)&d&&(a^=u<<(u<<BigInt(e))-u);c.push(a)}let[g,m]=(0,a.split)(c,!0),y=(e,t,r)=>r>32?(0,a.rotlBH)(e,t,r):(0,a.rotlSH)(e,t,r),b=(e,t,r)=>r>32?(0,a.rotlBL)(e,t,r):(0,a.rotlSL)(e,t,r);function w(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:24,r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,a=(t+2)%10,i=r[a],o=r[a+1],s=y(i,o,1)^r[n],c=b(i,o,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=s,e[t+r+1]^=c}let t=e[2],a=e[3];for(let r=0;r<24;r++){let n=s[r],i=y(t,a,n),c=b(t,a,n),l=o[r];t=e[l],a=e[l+1],e[l]=i,e[l+1]=c}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=g[n],e[1]^=m[n]}r.fill(0)}class _ extends i.Hash{keccak(){i.isLE||(0,i.byteSwap32)(this.state32),w(this.state32,this.rounds),i.isLE||(0,i.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(e){(0,n.aexists)(this);let{blockLen:t,state:r}=this,a=(e=(0,i.toBytes)(e)).length;for(let n=0;n<a;){let i=Math.min(t-this.pos,a-n);for(let t=0;t<i;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,(128&t)!=0&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,n.aexists)(this,!1),(0,n.abytes)(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,a=e.length;n<a;){this.posOut>=r&&this.keccak();let i=Math.min(r-this.posOut,a-n);e.set(t.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,n.anumber)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,n.aoutput)(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:a,enableXOF:i}=this;return e||(e=new _(t,r,n,i,a)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=a,e.suffix=r,e.outputLen=n,e.enableXOF=i,e.destroyed=this.destroyed,e}constructor(e,t,r,a=!1,o=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=a,this.rounds=o,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,n.anumber)(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,i.u32)(this.state)}}r.Keccak=_;let v=(e,t,r)=>(0,i.wrapConstructor)(()=>new _(t,e,r));r.sha3_224=v(6,144,28),r.sha3_256=v(6,136,32),r.sha3_384=v(6,104,48),r.sha3_512=v(6,72,64),r.keccak_224=v(1,144,28),r.keccak_256=v(1,136,32),r.keccak_384=v(1,104,48),r.keccak_512=v(1,72,64);let E=(e,t,r)=>(0,i.wrapXOFConstructorWithOpts)(function(){let n=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new _(t,e,void 0===n.dkLen?r:n.dkLen,!0)});r.shake128=E(31,168,16),r.shake256=E(31,136,32)},660100,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isNegativeLE=void 0,r.mod=d,r.pow=h,r.pow2=function(e,t,r){let n=e;for(;t-- >a;)n*=n,n%=r;return n},r.invert=f,r.tonelliShanks=p,r.FpSqrt=g,r.validateField=function(e){let t=m.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,n.validateObject)(e,t)},r.FpPow=y,r.FpInvertBatch=b,r.FpDiv=function(e,t,r){return e.mul(t,"bigint"==typeof r?f(r,e.ORDER):e.inv(r))},r.FpLegendre=w,r.FpIsSquare=function(e){let t=w(e.ORDER);return r=>{let n=t(e,r);return e.eql(n,e.ZERO)||e.eql(n,e.ONE)}},r.nLength=_,r.Field=function(e,t){let r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=a)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:c,nByteLength:l}=_(e,t);if(l>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let u=Object.freeze({ORDER:e,BITS:c,BYTES:l,MASK:(0,n.bitMask)(c),ZERO:a,ONE:i,create:t=>d(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return a<=t&&t<e},is0:e=>e===a,isOdd:e=>(e&i)===i,neg:t=>d(-t,e),eql:(e,t)=>e===t,sqr:t=>d(t*t,e),add:(t,r)=>d(t+r,e),sub:(t,r)=>d(t-r,e),mul:(t,r)=>d(t*r,e),pow:(e,t)=>y(u,e,t),div:(t,r)=>d(t*f(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>f(t,e),sqrt:s.sqrt||(t=>(r||(r=g(e)),r(u,t))),invertBatch:e=>b(u,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>o?(0,n.numberToBytesLE)(e,l):(0,n.numberToBytesBE)(e,l),fromBytes:e=>{if(e.length!==l)throw Error("Field.fromBytes: expected "+l+" bytes, got "+e.length);return o?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e)}});return Object.freeze(u)},r.FpSqrtOdd=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)},r.FpSqrtEven=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r},r.hashToPrivateScalar=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=(e=(0,n.ensureBytes)("privateHash",e)).length,o=_(t).nByteLength+8;if(o<24||a<o||a>1024)throw Error("hashToPrivateScalar: expected "+o+"-1024 bytes of input, got "+a);return d(r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e),t-i)+i},r.getFieldBytesLength=v,r.getMinHashLength=E,r.mapHashToField=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.length,o=v(t),s=E(t);if(a<16||a<s||a>1024)throw Error("expected "+s+"-1024 bytes of input, got "+a);let c=d(r?(0,n.bytesToNumberBE)(e):(0,n.bytesToNumberLE)(e),t-i)+i;return r?(0,n.numberToBytesLE)(c,o):(0,n.numberToBytesBE)(c,o)};let n=e.r(771952),a=BigInt(0),i=BigInt(1),o=BigInt(2),s=BigInt(3),c=BigInt(4),l=BigInt(5),u=BigInt(8);function d(e,t){let r=e%t;return r>=a?r:t+r}function h(e,t,r){if(t<a)throw Error("invalid exponent, negatives unsupported");if(r<=a)throw Error("invalid modulus");if(r===i)return a;let n=i;for(;t>a;)t&i&&(n=n*e%r),e=e*e%r,t>>=i;return n}function f(e,t){if(e===a)throw Error("invert: expected non-zero number");if(t<=a)throw Error("invert: expected positive modulus, got "+t);let r=d(e,t),n=t,o=a,s=i,c=i,l=a;for(;r!==a;){let e=n/r,t=n%r,a=o-c*e,i=s-l*e;n=r,r=t,o=c,s=l,c=a,l=i}if(n!==i)throw Error("invert: does not exist");return d(o,t)}function p(e){let t,r,n,s=(e-i)/o;for(t=e-i,r=0;t%o===a;t/=o,r++);for(n=o;n<e&&h(n,s,e)!==e-i;n++)if(n>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+i)/c;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let l=(t+i)/o;return function(e,a){if(e.pow(a,s)===e.neg(e.ONE))throw Error("Cannot find square root");let o=r,c=e.pow(e.mul(e.ONE,n),t),u=e.pow(a,l),d=e.pow(a,t);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(d);t<o&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(c,i<<BigInt(o-t-1));c=e.sqr(r),u=e.mul(u,r),d=e.mul(d,c),o=t}return u}}function g(e){if(e%c===s){let t=(e+i)/c;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%u===l){let t=(e-l)/u;return function(e,r){let n=e.mul(r,o),a=e.pow(n,t),i=e.mul(r,a),s=e.mul(e.mul(i,o),a),c=e.mul(i,e.sub(s,e.ONE));if(!e.eql(e.sqr(c),r))throw Error("Cannot find square root");return c}}return p(e)}r.isNegativeLE=(e,t)=>(d(e,t)&i)===i;let m=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function y(e,t,r){if(r<a)throw Error("invalid exponent, negatives unsupported");if(r===a)return e.ONE;if(r===i)return t;let n=e.ONE,o=t;for(;r>a;)r&i&&(n=e.mul(n,o)),o=e.sqr(o),r>>=i;return n}function b(e,t){let r=Array(t.length),n=t.reduce((t,n,a)=>e.is0(n)?t:(r[a]=t,e.mul(t,n)),e.ONE),a=e.inv(n);return t.reduceRight((t,n,a)=>e.is0(n)?t:(r[a]=e.mul(t,r[a]),e.mul(t,n)),a),r}function w(e){let t=(e-i)/o;return(e,r)=>e.pow(r,t)}function _(e,t){let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function v(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function E(e){let t=v(e);return t+Math.ceil(t/2)}},118476,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateOpts=a,r.splitConstants=function(e,t){if("number"!=typeof t)throw Error("poseidonSplitConstants: invalid t");if(!Array.isArray(e)||e.length%t)throw Error("poseidonSplitConstants: invalid rc");let r=[],n=[];for(let a=0;a<e.length;a++)n.push(e[a]),n.length===t&&(r.push(n),n=[]);return r},r.poseidon=function(e){let t=a(e),{Fp:r,mds:n,roundConstants:i,rounds:o,roundsPartial:s,sboxFn:c,t:l}=t,u=t.roundsFull/2,d=t.reversePartialPowIdx?l-1:0,h=(e,t,a)=>(e=e.map((e,t)=>r.add(e,i[a][t])),t?e=e.map(e=>c(e)):e[d]=c(e[d]),e=n.map(t=>t.reduce((t,n,a)=>r.add(t,r.mulN(n,e[a])),r.ZERO))),f=function(e){if(!Array.isArray(e)||e.length!==l)throw Error("invalid values, expected array of bigints with length "+l);e=e.map(e=>{if("bigint"!=typeof e)throw Error("invalid bigint="+e);return r.create(e)});let t=0;for(let r=0;r<u;r++)e=h(e,!0,t++);for(let r=0;r<s;r++)e=h(e,!1,t++);for(let r=0;r<u;r++)e=h(e,!0,t++);if(t!==o)throw Error("invalid number of rounds");return e};return f.roundConstants=i,f};let n=e.r(660100);function a(e){let{Fp:t,mds:r,reversePartialPowIdx:a,roundConstants:i}=e,{roundsFull:o,roundsPartial:s,sboxPower:c,t:l}=e;for(let r of((0,n.validateField)(t),["t","roundsFull","roundsPartial"]))if("number"!=typeof e[r]||!Number.isSafeInteger(e[r]))throw Error("invalid number "+r);if(!Array.isArray(r)||r.length!==l)throw Error("Poseidon: invalid MDS matrix");let u=r.map(e=>{if(!Array.isArray(e)||e.length!==l)throw Error("invalid MDS matrix row: "+e);return e.map(e=>{if("bigint"!=typeof e)throw Error("invalid MDS matrix bigint: "+e);return t.create(e)})});if(void 0!==a&&"boolean"!=typeof a)throw Error("invalid param reversePartialPowIdx="+a);if(1&o)throw Error("roundsFull is not even"+o);let d=o+s;if(!Array.isArray(i)||i.length!==d)throw Error("Poseidon: invalid round constants");let h=i.map(e=>{if(!Array.isArray(e)||e.length!==l)throw Error("invalid round constants");return e.map(e=>{if("bigint"!=typeof e||!t.isValid(e))throw Error("invalid round constant");return t.create(e)})});if(!c||![3,5,7].includes(c))throw Error("invalid sboxPower");let f=BigInt(c),p=e=>(0,n.FpPow)(t,e,f);return 3===c?p=e=>t.mul(t.sqrN(e),e):5===c&&(p=e=>t.mul(t.sqrN(t.sqrN(e)),e)),Object.freeze({...e,rounds:d,sboxFn:p,roundConstants:h,mds:u})}},398467,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.wNAF=function(e,t){return{constTimeNegate:s,hasPrecomputes:e=>1!==p(e),unsafeLadder(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.ZERO,a=t;for(;r>i;)r&o&&(n=n.add(a)),a=a.double(),r>>=o;return n},precomputeWindow(e,r){let{windows:n,windowSize:a}=l(r,t),i=[],o=e,s=o;for(let e=0;e<n;e++){s=o,i.push(s);for(let e=1;e<a;e++)s=s.add(o),i.push(s);o=s.double()}return i},wNAF(r,n,a){let{windows:i,windowSize:c}=l(r,t),u=e.ZERO,d=e.BASE,h=BigInt(2**r-1),f=2**r,p=BigInt(r);for(let e=0;e<i;e++){let t=e*c,r=Number(a&h);a>>=p,r>c&&(r-=f,a+=o);let i=t+Math.abs(r)-1,l=e%2!=0,g=r<0;0===r?d=d.add(s(l,n[t])):u=u.add(s(g,n[i]))}return{p:u,f:d}},wNAFUnsafe(r,n,a){let s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.ZERO,{windows:c,windowSize:u}=l(r,t),d=BigInt(2**r-1),h=2**r,f=BigInt(r);for(let e=0;e<c;e++){let t=e*u;if(a===i)break;let r=Number(a&d);if(a>>=f,r>u&&(r-=h,a+=o),0===r)continue;let c=n[t+Math.abs(r)-1];r<0&&(c=c.negate()),s=s.add(c)}return s},getPrecomputes(e,t,r){let n=h.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&h.set(t,r(n))),n},wNAFCached(e,t,r){let n=p(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){let a=p(e);return 1===a?this.unsafeLadder(e,t,n):this.wNAFUnsafe(a,this.getPrecomputes(a,e,r),t,n)},setWindowSize(e,r){c(r,t),f.set(e,r),h.delete(e)}}},r.pippenger=function(e,t,r,n){if(u(r,e),d(n,t),r.length!==n.length)throw Error("arrays of points and scalars must have equal length");let i=e.ZERO,o=(0,a.bitLen)(BigInt(r.length)),s=o>12?o-3:o>4?o-2:o?2:1,c=(1<<s)-1,l=Array(c+1).fill(i),h=Math.floor((t.BITS-1)/s)*s,f=i;for(let e=h;e>=0;e-=s){l.fill(i);for(let t=0;t<n.length;t++){let a=Number(n[t]>>BigInt(e)&BigInt(c));l[a]=l[a].add(r[t])}let t=i;for(let e=l.length-1,r=i;e>0;e--)r=r.add(l[e]),t=t.add(r);if(f=f.add(t),0!==e)for(let e=0;e<s;e++)f=f.double()}return f},r.precomputeMSMUnsafe=function(e,t,r,n){c(n,t.BITS),u(r,e);let a=e.ZERO,i=2**n-1,o=Math.ceil(t.BITS/n),s=BigInt((1<<n)-1),l=r.map(e=>{let t=[];for(let r=0,n=e;r<i;r++)t.push(n),n=n.add(e);return t});return e=>{if(d(e,t),e.length>r.length)throw Error("array of scalars must be smaller than array of points");let i=a;for(let t=0;t<o;t++){if(i!==a)for(let e=0;e<n;e++)i=i.double();let r=BigInt(o*n-(t+1)*n);for(let t=0;t<e.length;t++){let n=Number(e[t]>>r&s);n&&(i=i.add(l[t][n-1]))}}return i}},r.validateBasic=function(e){return(0,n.validateField)(e.Fp),(0,a.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,n.nLength)(e.n,e.nBitLength),...e,...{p:e.Fp.ORDER}})};let n=e.r(660100),a=e.r(771952),i=BigInt(0),o=BigInt(1);function s(e,t){let r=t.negate();return e?r:t}function c(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function l(e,t){return c(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}function u(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}function d(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}let h=new WeakMap,f=new WeakMap;function p(e){return f.get(e)||1}},605744,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DER=void 0,r.weierstrassPoints=g,r.weierstrass=function(e){let t=function(e){let t=(0,n.validateBasic)(e);return i.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:c,n:l}=t,h=c.BYTES+1,f=2*c.BYTES+1;function p(e){return a.mod(e,l)}function m(e){return a.invert(e,l)}let{ProjectivePoint:y,normPrivateKeyToScalar:b,weierstrassEquation:w,isWithinCurveOrder:_}=g({...t,toBytes(e,t,r){let n=t.toAffine(),a=c.toBytes(n.x),s=i.concatBytes;return((0,o.abool)("isCompressed",r),r)?s(Uint8Array.from([t.hasEvenY()?2:3]),a):s(Uint8Array.from([4]),a,c.toBytes(n.y))},fromBytes(e){let t=e.length,r=e[0],n=e.subarray(1);if(t===h&&(2===r||3===r)){let e,t=i.bytesToNumberBE(n);if(!i.inRange(t,d,c.ORDER))throw Error("Point is not on curve");let a=w(t);try{e=c.sqrt(a)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&r)==1!=((e&d)===d)&&(e=c.neg(e)),{x:t,y:e}}if(t===f&&4===r)return{x:c.fromBytes(n.subarray(0,c.BYTES)),y:c.fromBytes(n.subarray(c.BYTES,2*c.BYTES))};throw Error("invalid Point, expected length of "+h+", or uncompressed "+f+", got "+t)}}),v=e=>i.bytesToHex(i.numberToBytesBE(e,t.nByteLength)),E=(e,t,r)=>i.bytesToNumberBE(e.slice(t,r));class S{static fromCompact(e){let r=t.nByteLength;return new S(E(e=(0,o.ensureBytes)("compactSignature",e,2*r),0,r),E(e,r,2*r))}static fromDER(e){let{r:t,s:n}=r.DER.toSig((0,o.ensureBytes)("DER",e));return new S(t,n)}assertValidity(){i.aInRange("r",this.r,d,l),i.aInRange("s",this.s,d,l)}addRecoveryBit(e){return new S(this.r,this.s,e)}recoverPublicKey(e){let{r,s:n,recovery:a}=this,i=T((0,o.ensureBytes)("msgHash",e));if(null==a||![0,1,2,3].includes(a))throw Error("recovery id invalid");let s=2===a||3===a?r+t.n:r;if(s>=c.ORDER)throw Error("recovery id 2 or 3 invalid");let l=(1&a)==0?"02":"03",u=y.fromHex(l+v(s)),d=m(s),h=p(-i*d),f=p(n*d),g=y.BASE.multiplyAndAddUnsafe(u,h,f);if(!g)throw Error("point at infinify");return g.assertValidity(),g}hasHighS(){return this.s>l>>d}normalizeS(){return this.hasHighS()?new S(this.r,p(-this.s),this.recovery):this}toDERRawBytes(){return i.hexToBytes(this.toDERHex())}toDERHex(){return r.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return i.hexToBytes(this.toCompactHex())}toCompactHex(){return v(this.r)+v(this.s)}constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}}function x(e){let t=i.isBytes(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===h||n===f:r?n===2*h||n===2*f:e instanceof y}let k=t.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let r=i.bytesToNumberBE(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},T=t.bits2int_modN||function(e){return p(k(e))},A=i.bitMask(t.nBitLength);function B(e){return i.aInRange("num < 2^"+t.nBitLength,e,u,A),i.numberToBytesBE(e,t.nByteLength)}let I={lowS:t.lowS,prehash:!1},C={lowS:t.lowS,prehash:!1};return y.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return y.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(x(e))throw Error("first arg must be private key");if(!x(t))throw Error("second arg must be public key");return y.fromHex(t).multiply(b(e)).toRawBytes(r)},sign:function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I,{seed:a,k2sig:h}=function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:I;if(["recovered","canonical"].some(e=>e in n))throw Error("sign() legacy options not supported");let{hash:a,randomBytes:h}=t,{lowS:f,prehash:g,extraEntropy:w}=n;null==f&&(f=!0),e=(0,o.ensureBytes)("msgHash",e),s(n),g&&(e=(0,o.ensureBytes)("prehashed msgHash",a(e)));let v=T(e),E=b(r),x=[B(E),B(v)];if(null!=w&&!1!==w){let e=!0===w?h(c.BYTES):w;x.push((0,o.ensureBytes)("extraEntropy",e))}return{seed:i.concatBytes(...x),k2sig:function(e){var t;let r=k(e);if(!_(r))return;let n=m(r),a=y.BASE.multiply(r).toAffine(),i=p(a.x);if(i===u)return;let o=p(n*p(v+i*E));if(o===u)return;let s=2*(a.x!==i)|Number(a.y&d),c=o;return f&&o>l>>d&&(c=(t=o)>l>>d?p(-t):t,s^=1),new S(i,c,s)}}}(e,r,n);return i.createHmacDrbg(t.hash.outputLen,t.nByteLength,t.hmac)(a,h)},verify:function(e,n,a){var c;let l,u,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:C;n=(0,o.ensureBytes)("msgHash",n),a=(0,o.ensureBytes)("publicKey",a);let{lowS:h,prehash:f,format:g}=d;if(s(d),"strict"in d)throw Error("options.strict was renamed to lowS");if(void 0!==g&&"compact"!==g&&"der"!==g)throw Error("format must be compact or der");let b="string"==typeof e||i.isBytes(e),w=!b&&!g&&"object"==typeof e&&null!==e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!b&&!w)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(w&&(l=new S(e.r,e.s)),b){try{"compact"!==g&&(l=S.fromDER(e))}catch(e){if(!(e instanceof r.DER.Err))throw e}l||"der"===g||(l=S.fromCompact(e))}u=y.fromHex(a)}catch(e){return!1}if(!l||h&&l.hasHighS())return!1;f&&(n=t.hash(n));let{r:_,s:v}=l,E=T(n),x=m(v),k=p(E*x),A=p(_*x),B=null==(c=y.BASE.multiplyAndAddUnsafe(u,k,A))?void 0:c.toAffine();return!!B&&p(B.x)===_},ProjectivePoint:y,Signature:S,utils:{isValidPrivateKey(e){try{return b(e),!0}catch(e){return!1}},normPrivateKeyToScalar:b,randomPrivateKey:()=>{let e=a.getMinHashLength(t.n);return a.mapHashToField(t.randomBytes(e),t.n)},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:y.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}}}},r.SWUFpSqrtRatio=m,r.mapToCurveSimpleSWU=function(e,t){if(a.validateField(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let r=m(e,t.Z);if(!e.isOdd)throw Error("Fp.isOdd is not implemented!");return n=>{let a,i,o,s,c,l,u,d;a=e.sqr(n),a=e.mul(a,t.Z),i=e.sqr(a),i=e.add(i,a),o=e.add(i,e.ONE),o=e.mul(o,t.B),s=e.cmov(t.Z,e.neg(i),!e.eql(i,e.ZERO)),s=e.mul(s,t.A),i=e.sqr(o),l=e.sqr(s),c=e.mul(l,t.A),i=e.add(i,c),i=e.mul(i,o),l=e.mul(l,s),c=e.mul(l,t.B),i=e.add(i,c),u=e.mul(a,o);let{isValid:h,value:f}=r(i,l);d=e.mul(a,n),d=e.mul(d,f),u=e.cmov(u,o,h),d=e.cmov(d,f,h);let p=e.isOdd(n)===e.isOdd(d);return d=e.cmov(e.neg(d),d,p),{x:u=e.div(u,s),y:d}}};let n=e.r(398467),a=e.r(660100),i=e.r(771952),o=e.r(771952);function s(e){void 0!==e.lowS&&(0,o.abool)("lowS",e.lowS),void 0!==e.prehash&&(0,o.abool)("prehash",e.prehash)}let{bytesToNumberBE:c,hexToBytes:l}=i;r.DER={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,t)=>{let{Err:n}=r.DER;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");let a=t.length/2,o=i.numberToHexUnpadded(a);if(o.length/2&128)throw new n("tlv.encode: long form length too big");let s=a>127?i.numberToHexUnpadded(o.length/2|128):"";return i.numberToHexUnpadded(e)+s+o+t},decode(e,t){let{Err:n}=r.DER,a=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[a++]!==e)throw new n("tlv.decode: wrong tlv");let i=t[a++],o=0;if(128&i){let e=127&i;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");let r=t.subarray(a,a+e);if(r.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===r[0])throw new n("tlv.decode(long): zero leftmost byte");for(let e of r)o=o<<8|e;if(a+=e,o<128)throw new n("tlv.decode(long): not minimal encoding")}else o=i;let s=t.subarray(a,a+o);if(s.length!==o)throw new n("tlv.decode: wrong value length");return{v:s,l:t.subarray(a+o)}}},_int:{encode(e){let{Err:t}=r.DER;if(e<u)throw new t("integer: negative integers are not allowed");let n=i.numberToHexUnpadded(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){let{Err:t}=r.DER;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return c(e)}},toSig(e){let{Err:t,_int:n,_tlv:a}=r.DER,o="string"==typeof e?l(e):e;i.abytes(o);let{v:s,l:c}=a.decode(48,o);if(c.length)throw new t("invalid signature: left bytes after parsing");let{v:u,l:d}=a.decode(2,s),{v:h,l:f}=a.decode(2,d);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(u),s:n.decode(h)}},hexFromSig(e){let{_tlv:t,_int:n}=r.DER,a=t.encode(2,n.encode(e.r)),i=t.encode(2,n.encode(e.s));return t.encode(48,a+i)}};let u=BigInt(0),d=BigInt(1),h=BigInt(2),f=BigInt(3),p=BigInt(4);function g(e){let t=function(e){let t=(0,n.validateBasic)(e);i.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:a,a:o}=t;if(r){if(!a.eql(o,a.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,s=a.Field(t.n,t.nBitLength),c=t.toBytes||((e,t,n)=>{let a=t.toAffine();return i.concatBytes(Uint8Array.from([4]),r.toBytes(a.x),r.toBytes(a.y))}),l=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function h(e){let{a:n,b:a}=t,i=r.sqr(e),o=r.mul(i,e);return r.add(r.add(o,r.mul(e,n)),a)}if(!r.eql(r.sqr(t.Gy),h(t.Gx)))throw Error("bad generator point: equation left != right");function p(e){let r,{allowedPrivateKeyLengths:n,nByteLength:s,wrapPrivateKey:c,n:l}=t;if(n&&"bigint"!=typeof e){if(i.isBytes(e)&&(e=i.bytesToHex(e)),"string"!=typeof e||!n.includes(e.length))throw Error("invalid private key");e=e.padStart(2*s,"0")}try{r="bigint"==typeof e?e:i.bytesToNumberBE((0,o.ensureBytes)("private key",e,s))}catch(t){throw Error("invalid private key, expected hex or "+s+" bytes, got "+typeof e)}return c&&(r=a.mod(r,l)),i.aInRange("private key",r,d,l),r}function g(e){if(!(e instanceof b))throw Error("ProjectivePoint expected")}let m=(0,o.memoized)((e,t)=>{let{px:n,py:a,pz:i}=e;if(r.eql(i,r.ONE))return{x:n,y:a};let o=e.is0();null==t&&(t=o?r.ONE:r.inv(i));let s=r.mul(n,t),c=r.mul(a,t),l=r.mul(i,t);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw Error("invZ was invalid");return{x:s,y:c}}),y=(0,o.memoized)(e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw Error("bad point: ZERO")}let{x:n,y:a}=e.toAffine();if(!r.isValid(n)||!r.isValid(a))throw Error("bad point: x or y not FE");let i=r.sqr(a),o=h(n);if(!r.eql(i,o))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class b{static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof b)throw Error("projective point not allowed");let a=e=>r.eql(e,r.ZERO);return a(t)&&a(n)?b.ZERO:new b(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(b.fromAffine)}static fromHex(e){let t=b.fromAffine(l((0,o.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return b.BASE.multiply(p(e))}static msm(e,t){return(0,n.pippenger)(b,s,e,t)}_setWindowSize(e){_.setWindowSize(this,e)}assertValidity(){y(this)}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){g(e);let{px:t,py:n,pz:a}=this,{px:i,py:o,pz:s}=e,c=r.eql(r.mul(t,s),r.mul(i,a)),l=r.eql(r.mul(n,s),r.mul(o,a));return c&&l}negate(){return new b(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:n}=t,a=r.mul(n,f),{px:i,py:o,pz:s}=this,c=r.ZERO,l=r.ZERO,u=r.ZERO,d=r.mul(i,i),h=r.mul(o,o),p=r.mul(s,s),g=r.mul(i,o);return g=r.add(g,g),u=r.mul(i,s),u=r.add(u,u),c=r.mul(e,u),l=r.mul(a,p),l=r.add(c,l),c=r.sub(h,l),l=r.add(h,l),l=r.mul(c,l),c=r.mul(g,c),u=r.mul(a,u),p=r.mul(e,p),g=r.sub(d,p),g=r.mul(e,g),g=r.add(g,u),u=r.add(d,d),d=r.add(u,d),d=r.add(d,p),d=r.mul(d,g),l=r.add(l,d),p=r.mul(o,s),p=r.add(p,p),d=r.mul(p,g),c=r.sub(c,d),u=r.mul(p,h),u=r.add(u,u),new b(c,l,u=r.add(u,u))}add(e){g(e);let{px:n,py:a,pz:i}=this,{px:o,py:s,pz:c}=e,l=r.ZERO,u=r.ZERO,d=r.ZERO,h=t.a,p=r.mul(t.b,f),m=r.mul(n,o),y=r.mul(a,s),w=r.mul(i,c),_=r.add(n,a),v=r.add(o,s);_=r.mul(_,v),v=r.add(m,y),_=r.sub(_,v),v=r.add(n,i);let E=r.add(o,c);return v=r.mul(v,E),E=r.add(m,w),v=r.sub(v,E),E=r.add(a,i),l=r.add(s,c),E=r.mul(E,l),l=r.add(y,w),E=r.sub(E,l),d=r.mul(h,v),l=r.mul(p,w),d=r.add(l,d),l=r.sub(y,d),d=r.add(y,d),u=r.mul(l,d),y=r.add(m,m),y=r.add(y,m),w=r.mul(h,w),v=r.mul(p,v),y=r.add(y,w),w=r.sub(m,w),w=r.mul(h,w),v=r.add(v,w),m=r.mul(y,v),u=r.add(u,m),m=r.mul(E,v),l=r.mul(_,l),l=r.sub(l,m),m=r.mul(_,y),d=r.mul(E,d),new b(l,u,d=r.add(d,m))}subtract(e){return this.add(e.negate())}is0(){return this.equals(b.ZERO)}wNAF(e){return _.wNAFCached(this,e,b.normalizeZ)}multiplyUnsafe(e){let{endo:n,n:a}=t;i.aInRange("scalar",e,u,a);let o=b.ZERO;if(e===u)return o;if(this.is0()||e===d)return this;if(!n||_.hasPrecomputes(this))return _.wNAFCachedUnsafe(this,e,b.normalizeZ);let{k1neg:s,k1:c,k2neg:l,k2:h}=n.splitScalar(e),f=o,p=o,g=this;for(;c>u||h>u;)c&d&&(f=f.add(g)),h&d&&(p=p.add(g)),g=g.double(),c>>=d,h>>=d;return s&&(f=f.negate()),l&&(p=p.negate()),p=new b(r.mul(p.px,n.beta),p.py,p.pz),f.add(p)}multiply(e){let n,a,{endo:o,n:s}=t;if(i.aInRange("scalar",e,d,s),o){let{k1neg:t,k1:i,k2neg:s,k2:c}=o.splitScalar(e),{p:l,f:u}=this.wNAF(i),{p:d,f:h}=this.wNAF(c);l=_.constTimeNegate(t,l),d=_.constTimeNegate(s,d),d=new b(r.mul(d.px,o.beta),d.py,d.pz),n=l.add(d),a=u.add(h)}else{let{p:t,f:r}=this.wNAF(e);n=t,a=r}return b.normalizeZ([n,a])[0]}multiplyAndAddUnsafe(e,t,r){let n=b.BASE,a=(e,t)=>t!==u&&t!==d&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),i=a(this,t).add(a(e,r));return i.is0()?void 0:i}toAffine(e){return m(this,e)}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===d)return!0;if(r)return r(b,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===d?this:r?r(b,this):this.multiplyUnsafe(t.h)}toRawBytes(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return(0,o.abool)("isCompressed",e),this.assertValidity(),c(b,this,e)}toHex(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return(0,o.abool)("isCompressed",e),i.bytesToHex(this.toRawBytes(e))}constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required");Object.freeze(this)}}b.BASE=new b(t.Gx,t.Gy,r.ONE),b.ZERO=new b(r.ZERO,r.ONE,r.ZERO);let w=t.nBitLength,_=(0,n.wNAF)(b,t.endo?Math.ceil(w/2):w);return{CURVE:t,ProjectivePoint:b,normPrivateKeyToScalar:p,weierstrassEquation:h,isWithinCurveOrder:function(e){return i.inRange(e,d,t.n)}}}function m(e,t){let r=e.ORDER,n=u;for(let e=r-d;e%h===u;e/=h)n+=d;let a=n,i=h<<a-d-d,o=i*h,s=(r-d)/o,c=(s-d)/h,l=o-d,g=e.pow(t,s),m=e.pow(t,(s+d)/h),y=(t,r)=>{let n=g,o=e.pow(r,l),s=e.sqr(o);s=e.mul(s,r);let u=e.mul(t,s);u=e.pow(u,c),u=e.mul(u,o),o=e.mul(u,r),s=e.mul(u,t);let f=e.mul(s,o);u=e.pow(f,i);let p=e.eql(u,e.ONE);o=e.mul(s,m),u=e.mul(f,n),s=e.cmov(o,s,p),f=e.cmov(u,f,p);for(let t=a;t>d;t--){let r=t-h;r=h<<r-d;let a=e.pow(f,r),i=e.eql(a,e.ONE);o=e.mul(s,n),n=e.mul(n,n),a=e.mul(f,n),s=e.cmov(o,s,i),f=e.cmov(a,f,i)}return{isValid:p,value:s}};if(e.ORDER%p===f){let r=(e.ORDER-f)/p,n=e.sqrt(e.neg(t));y=(t,a)=>{let i=e.sqr(a),o=e.mul(t,a);i=e.mul(i,o);let s=e.pow(i,r);s=e.mul(s,o);let c=e.mul(s,n),l=e.mul(e.sqr(s),a),u=e.eql(l,t),d=e.cmov(c,s,u);return{isValid:u,value:d}}}return y}},373692,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hmac=r.HMAC=void 0;let n=e.r(353539),a=e.r(328506);class i extends a.Hash{update(e){return(0,n.aexists)(this),this.iHash.update(e),this}digestInto(e){(0,n.aexists)(this),(0,n.abytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:a,blockLen:i,outputLen:o}=this;return e.finished=n,e.destroyed=a,e.blockLen=i,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,n.ahash)(e);let r=(0,a.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<o.length;e++)o[e]^=54;this.iHash.update(o),this.oHash=e.create();for(let e=0;e<o.length;e++)o[e]^=106;this.oHash.update(o),o.fill(0)}}r.HMAC=i,r.hmac=(e,t,r)=>new i(e,t).update(r).digest(),r.hmac.create=(e,t)=>new i(e,t)},554289,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getHash=o,r.createCurve=function(e,t){let r=t=>(0,i.weierstrass)({...e,...o(t)});return Object.freeze({...r(t),create:r})};let n=e.r(373692),a=e.r(328506),i=e.r(605744);function o(e){return{hash:e,hmac:function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return(0,n.hmac)(e,t,(0,a.concatBytes)(...i))},randomBytes:a.randomBytes}}},302633,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.poseidonSmall=r.Fp251=r.keccak=r.computeHashOnElements=r.utils=r.Signature=r.ProjectivePoint=r.CURVE=r._starkCurve=r.MAX_VALUE=void 0,r.normalizePrivateKey=m,r.getPublicKey=y,r.getSharedSecret=function(e,t){return p.getSharedSecret(m(e),t)},r.sign=function(e,t,r){let n=p.sign(w(e),m(t),r);return b(n),n},r.verify=function(e,t,r){if(!(e instanceof E)){let t=g(e);try{e=E.fromDER(t)}catch(r){if(!(r instanceof c.DER.Err))throw r;e=E.fromCompact(t)}}return b(e),p.verify(e,w(t),g(r))},r.grindKey=T,r.getStarkKey=function(e){return x(y(e,!0))},r.ethSigToPrivate=function(e){if(130!==(e=k(e)).length)throw Error("Wrong ethereum signature");return T(e.substring(0,64))},r.getAccountPath=function(e,t,r,n){let a=B(L(e)),i=B(L(t)),o=l.hexToNumber(k(r));return"m/2645'/".concat(a,"'/").concat(i,"'/").concat(B(o),"'/").concat(B(o>>31n),"'/").concat(n)},r.pedersen=R,r._poseidonMDS=U,r.poseidonBasic=V,r.poseidonCreate=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=e.rate+e.capacity;if(!Number.isSafeInteger(t))throw Error("Wrong mdsAttempt=".concat(t));return V(e,U(e.Fp,"HadesMDS",r,t))},r.poseidonHash=M,r.poseidonHashFunc=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.poseidonSmall;return l.numberToVarBytesBE(M(l.bytesToNumberBE(e),l.bytesToNumberBE(t),n))},r.poseidonHashSingle=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.poseidonSmall;return t([e,0n,1n])[0]},r.poseidonHashMany=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.poseidonSmall,{m:n,rate:a}=t;if(!Array.isArray(e))throw Error("bigint array expected in values");let i=Array.from(e);for(i.push(1n);i.length%a!=0;)i.push(0n);let o=Array(n).fill(0n);for(let e=0;e<i.length;e+=a){for(let t=0;t<a;t++){let r=i[e+t];if(void 0===r)throw Error("invalid index");if(void 0===o[t])throw Error("state[j] is undefined");o[t]=o[t]+r}o=t(o)}return o[0]};let n=e.r(477818),a=e.r(171249),i=e.r(328506),o=e.r(660100),s=e.r(118476),c=e.r(605744),l=e.r(771952),u=e.r(554289),d=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583");function h(e){for(;0===e[0];)e=e.subarray(1);let t=8*e.length-252,r=l.bytesToNumberBE(e);return t>0?r>>BigInt(t):r}function f(e){return"string"==typeof e&&1&(e=k(e)).length&&(e="0"+e),l.hexToBytes(e)}r.MAX_VALUE=BigInt("0x800000000000000000000000000000000000000000000000000000000000000");let p=(0,c.weierstrass)({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:(0,o.Field)(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:d,nBitLength:252,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,...(0,u.getHash)(a.sha256),bits2int:h,bits2int_modN:e=>{let t=l.bytesToNumberBE(e).toString(16);return 63===t.length&&(e=f(t+"0")),(0,o.mod)(h(e),d)}});function g(e){return l.ensureBytes("","string"==typeof e?f(e):e)}function m(e){return l.bytesToHex(g(e)).padStart(64,"0")}function y(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return p.getPublicKey(m(e),t)}function b(e){let{r:t,s:n}=e;if(t<0n||t>=r.MAX_VALUE)throw Error("Signature.r should be [1, ".concat(r.MAX_VALUE,")"));let a=(0,o.invert)(n,d);if(a<0n||a>=r.MAX_VALUE)throw Error("inv(Signature.s) should be [1, ".concat(r.MAX_VALUE,")"))}function w(e){let t=g(e);if(l.bytesToNumberBE(t)>=r.MAX_VALUE)throw Error("msgHash should be [0, ".concat(r.MAX_VALUE,")"));return t}r._starkCurve=p;let{CURVE:_,ProjectivePoint:v,Signature:E,utils:S}=p;function x(e){let t=l.bytesToHex(e.subarray(1)).replace(/^0+/gm,"");return"0x".concat(t)}function k(e){return e.replace(/^0x/i,"")}function T(e){let t=g(e),r=2n**256n,n=r-(0,o.mod)(r,d);for(let e=0;;e++){let r=L(l.concatBytes(t,l.numberToVarBytesBE(BigInt(e))));if(r<n)return(0,o.mod)(r,d).toString(16);if(1e5===e)throw Error("grindKey is broken: tried 100k vals")}}r.CURVE=_,r.ProjectivePoint=v,r.Signature=E,r.utils=S;let A=2n**31n-1n,B=e=>Number(e&A),I=[new v(0x49ee3eba8c1600700ee1b87eb599f16716b0b1022947733551fde4050ca6804n,0x3ca0cfe4b3bc6ddf346d49d06ea0ed34e621062c0e056c1d0405d266e10268an,1n),new v(0x234287dcbaffe7f969c748655fca9e58fa8120b6d56eb0c1080d17957ebe47bn,0x3b056f100f96fb21e889527d41f4e39940135dd7a6c94cc6ed0268ee89e5615n,1n),new v(0x4fa56f376c83db33f9dab2656558f3399099ec1de5e3018b7a6932dba8aa378n,0x3fa0984c931c9e38113e0c0e47e4401562761f92a7a23b45168f4e80ff5b54dn,1n),new v(0x4ba4cc166be8dec764910f75b45f74b40c690c74709e90f3aa372f0bd2d6997n,0x40301cf5c1751f4b971e46c4ede85fcac5c59a5ce5ae7c48151f27b24b219cn,1n),new v(0x54302dcb0e6cc1c6e44cca8f61a63bb2ca65048d53fb325d36ff12c49a58202n,0x1b77b3e37d13504b348046268d8ae25ce98ad783c25561a879dcc77e99c2426n,1n)];function C(e,t){let r=[],n=e;for(let e=0;e<248;e++)r.push(n),n=n.double();n=t;for(let e=0;e<4;e++)r.push(n),n=n.double();return r}let O=C(I[1],I[2]),P=C(I[3],I[4]);function N(e,t,r){let n=function(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e){if(!Number.isSafeInteger(e))throw Error("Invalid pedersenArg: ".concat(e));t=BigInt(e)}else t=l.bytesToNumberBE(g(e));if(!(0n<=t&&t<p.CURVE.Fp.ORDER))throw Error("PedersenArg should be 0 <= value < CURVE.P: ".concat(t));return t}(t);for(let t=0;t<252;t++){let a=r[t];if(!a)throw Error("invalid constant index");if(a.equals(e))throw Error("Same point");(1n&n)!==0n&&(e=e.add(a)),n>>=1n}return e}function R(e,t){let r=I[0];return r=N(r,e,O),x((r=N(r,t,P)).toRawBytes(!0))}r.computeHashOnElements=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:R;return[0,...e,e.length].reduce((e,r)=>t(e,r))};let D=l.bitMask(250);r.keccak=e=>l.bytesToNumberBE((0,n.keccak_256)(e))&D;let L=e=>l.bytesToNumberBE((0,a.sha256)(e));function H(e,t,r){let n=e.fromBytes((0,a.sha256)((0,i.utf8ToBytes)("".concat(t).concat(r))));return e.create(n)}function U(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,a=[],i=[];for(let o=0;o<r;o++)a.push(H(e,"".concat(t,"x"),n*r+o)),i.push(H(e,"".concat(t,"y"),n*r+o));if(new Set([...a,...i]).size!==2*r)throw Error("X and Y values are not distinct");return a.map(t=>i.map(r=>e.inv(e.sub(t,r))))}r.Fp251=(0,o.Field)(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));let F=[[3,1,1],[1,-1,1],[1,1,-2]].map(e=>e.map(BigInt));function V(e,t){if((0,o.validateField)(e.Fp),!Number.isSafeInteger(e.rate)||!Number.isSafeInteger(e.capacity))throw Error("Wrong poseidon opts: ".concat(e));let r=e.rate+e.capacity,n=e.roundsFull+e.roundsPartial,a=[];for(let t=0;t<n;t++){let n=[];for(let a=0;a<r;a++)n.push(H(e.Fp,"Hades",r*t+a));a.push(n)}let i=(0,s.poseidon)({...e,t:r,sboxPower:3,reversePartialPowIdx:!0,mds:t,roundConstants:a});return i.m=r,i.rate=e.rate,i.capacity=e.capacity,i}function M(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.poseidonSmall;return n([e,t,2n])[0]}r.poseidonSmall=V({Fp:r.Fp251,rate:2,capacity:1,roundsFull:8,roundsPartial:83},F)},834131,(e,t,r)=>{"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},494333,(e,t,r)=>{"use strict";let n,a,i;function o(e){let t=e.length;for(;--t>=0;)e[t]=0}let s=573,c=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),l=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),u=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),d=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h=Array(576);o(h);let f=Array(60);o(f);let p=Array(512);o(p);let g=Array(256);o(g);let m=Array(29);o(m);let y=Array(30);function b(e,t,r,n,a){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}function w(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}o(y);let _=e=>e<256?p[e]:p[256+(e>>>7)],v=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},E=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,v(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},S=(e,t,r)=>{E(e,r[2*t],r[2*t+1])},x=(e,t)=>{let r=0;do r|=1&e,e>>>=1,r<<=1;while(--t>0)return r>>>1},k=(e,t,r)=>{let n,a,i=Array(16),o=0;for(n=1;n<=15;n++)o=o+r[n-1]<<1,i[n]=o;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=x(i[t]++,t))}},T=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},A=e=>{e.bi_valid>8?v(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},B=(e,t,r,n)=>{let a=2*t,i=2*r;return e[a]<e[i]||e[a]===e[i]&&n[t]<=n[r]},I=(e,t,r)=>{let n=e.heap[r],a=r<<1;for(;a<=e.heap_len&&(a<e.heap_len&&B(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!B(t,n,e.heap[a],e.depth));)e.heap[r]=e.heap[a],r=a,a<<=1;e.heap[r]=n},C=(e,t,r)=>{let n,a,i,o,s=0;if(0!==e.sym_next)do n=(255&e.pending_buf[e.sym_buf+s++])+((255&e.pending_buf[e.sym_buf+s++])<<8),a=e.pending_buf[e.sym_buf+s++],0===n?S(e,a,t):(S(e,(i=g[a])+256+1,t),0!==(o=c[i])&&E(e,a-=m[i],o),S(e,i=_(--n),r),0!==(o=l[i])&&E(e,n-=y[i],o));while(s<e.sym_next)S(e,256,t)},O=(e,t)=>{let r,n,a,i=t.dyn_tree,o=t.stat_desc.static_tree,c=t.stat_desc.has_stree,l=t.stat_desc.elems,u=-1;for(r=0,e.heap_len=0,e.heap_max=s;r<l;r++)0!==i[2*r]?(e.heap[++e.heap_len]=u=r,e.depth[r]=0):i[2*r+1]=0;for(;e.heap_len<2;)i[2*(a=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[a]=0,e.opt_len--,c&&(e.static_len-=o[2*a+1]);for(t.max_code=u,r=e.heap_len>>1;r>=1;r--)I(e,i,r);a=l;do r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],I(e,i,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,i[2*a]=i[2*r]+i[2*n],e.depth[a]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,i[2*r+1]=i[2*n+1]=a,e.heap[1]=a++,I(e,i,1);while(e.heap_len>=2)e.heap[--e.heap_max]=e.heap[1],((e,t)=>{let r,n,a,i,o,c,l=t.dyn_tree,u=t.max_code,d=t.stat_desc.static_tree,h=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,g=t.stat_desc.max_length,m=0;for(i=0;i<=15;i++)e.bl_count[i]=0;for(l[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<s;r++)(i=l[2*l[2*(n=e.heap[r])+1]+1]+1)>g&&(i=g,m++),l[2*n+1]=i,!(n>u)&&(e.bl_count[i]++,o=0,n>=p&&(o=f[n-p]),c=l[2*n],e.opt_len+=c*(i+o),h&&(e.static_len+=c*(d[2*n+1]+o)));if(0!==m){do{for(i=g-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[g]--,m-=2}while(m>0)for(i=g;0!==i;i--)for(n=e.bl_count[i];0!==n;)!((a=e.heap[--r])>u)&&(l[2*a+1]!==i&&(e.opt_len+=(i-l[2*a+1])*l[2*a],l[2*a+1]=i),n--)}})(e,t),k(i,u,e.bl_count)},P=(e,t,r)=>{let n,a,i=-1,o=t[1],s=0,c=7,l=4;for(0===o&&(c=138,l=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)a=o,o=t[(n+1)*2+1],++s<c&&a===o||(s<l?e.bl_tree[2*a]+=s:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[32]++):s<=10?e.bl_tree[34]++:e.bl_tree[36]++,s=0,i=a,0===o?(c=138,l=3):a===o?(c=6,l=3):(c=7,l=4))},N=(e,t,r)=>{let n,a,i=-1,o=t[1],s=0,c=7,l=4;for(0===o&&(c=138,l=3),n=0;n<=r;n++)if(a=o,o=t[(n+1)*2+1],!(++s<c)||a!==o){if(s<l)do S(e,a,e.bl_tree);while(0!=--s)else 0!==a?(a!==i&&(S(e,a,e.bl_tree),s--),S(e,16,e.bl_tree),E(e,s-3,2)):s<=10?(S(e,17,e.bl_tree),E(e,s-3,3)):(S(e,18,e.bl_tree),E(e,s-11,7));s=0,i=a,0===o?(c=138,l=3):a===o?(c=6,l=3):(c=7,l=4)}},R=!1,D=(e,t,r,n)=>{E(e,0+ +!!n,3),A(e),v(e,r),v(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r};t.exports._tr_init=e=>{R||((()=>{let e,t,r,o,s,d=Array(16);for(o=0,r=0;o<28;o++)for(e=0,m[o]=r;e<1<<c[o];e++)g[r++]=o;for(g[r-1]=o,s=0,o=0;o<16;o++)for(e=0,y[o]=s;e<1<<l[o];e++)p[s++]=o;for(s>>=7;o<30;o++)for(e=0,y[o]=s<<7;e<1<<l[o]-7;e++)p[256+s++]=o;for(t=0;t<=15;t++)d[t]=0;for(e=0;e<=143;)h[2*e+1]=8,e++,d[8]++;for(;e<=255;)h[2*e+1]=9,e++,d[9]++;for(;e<=279;)h[2*e+1]=7,e++,d[7]++;for(;e<=287;)h[2*e+1]=8,e++,d[8]++;for(k(h,287,d),e=0;e<30;e++)f[2*e+1]=5,f[2*e]=x(e,5);n=new b(h,c,257,286,15),a=new b(f,l,0,30,15),i=new b([],u,0,19,7)})(),R=!0),e.l_desc=new w(e.dyn_ltree,n),e.d_desc=new w(e.dyn_dtree,a),e.bl_desc=new w(e.bl_tree,i),e.bi_buf=0,e.bi_valid=0,T(e)},t.exports._tr_stored_block=D,t.exports._tr_flush_block=(e,t,r,n)=>{let a,i,o=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,r=0xf3ffc07f;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),O(e,e.l_desc),O(e,e.d_desc),o=(e=>{let t;for(P(e,e.dyn_ltree,e.l_desc.max_code),P(e,e.dyn_dtree,e.d_desc.max_code),O(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*d[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),a=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=a&&(a=i)):a=i=r+5,r+4<=a&&-1!==t?D(e,t,r,n):4===e.strategy||i===a?(E(e,2+ +!!n,3),C(e,h,f)):(E(e,4+ +!!n,3),((e,t,r,n)=>{let a;for(E(e,t-257,5),E(e,r-1,5),E(e,n-4,4),a=0;a<n;a++)E(e,e.bl_tree[2*d[a]+1],3);N(e,e.dyn_ltree,t-1),N(e,e.dyn_dtree,r-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,o+1),C(e,e.dyn_ltree,e.dyn_dtree)),T(e),n&&A(e)},t.exports._tr_tally=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[(g[r]+256+1)*2]++,e.dyn_dtree[2*_(t)]++),e.sym_next===e.sym_end),t.exports._tr_align=e=>{E(e,2,3),S(e,256,h),(e=>{16===e.bi_valid?(v(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},443486,(e,t,r)=>{"use strict";t.exports=(e,t,r,n)=>{let a=65535&e,i=e>>>16&65535,o=0;for(;0!==r;){o=r>2e3?2e3:r,r-=o;do i=i+(a=a+t[n++]|0)|0;while(--o)a%=65521,i%=65521}return a|i<<16}},63327,(e,t,r)=>{"use strict";let n=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?0xedb88320^e>>>1:e>>>1;t[r]=e}return t})());t.exports=(e,t,r,a)=>{let i=a+r;e^=-1;for(let r=a;r<i;r++)e=e>>>8^n[(e^t[r])&255];return -1^e}},319558,(e,t,r)=>{"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},879674,(e,t,r)=>{"use strict";let{_tr_init:n,_tr_stored_block:a,_tr_flush_block:i,_tr_tally:o,_tr_align:s}=e.r(494333),c=e.r(443486),l=e.r(63327),u=e.r(319558),{Z_NO_FLUSH:d,Z_PARTIAL_FLUSH:h,Z_FULL_FLUSH:f,Z_FINISH:p,Z_BLOCK:g,Z_OK:m,Z_STREAM_END:y,Z_STREAM_ERROR:b,Z_DATA_ERROR:w,Z_BUF_ERROR:_,Z_DEFAULT_COMPRESSION:v,Z_FILTERED:E,Z_HUFFMAN_ONLY:S,Z_RLE:x,Z_FIXED:k,Z_DEFAULT_STRATEGY:T,Z_UNKNOWN:A,Z_DEFLATED:B}=e.r(834131),I=573,C=(e,t)=>(e.msg=u[t],t),O=e=>2*e-9*(e>4),P=e=>{let t=e.length;for(;--t>=0;)e[t]=0},N=e=>{let t,r,n,a=e.w_size;n=t=e.hash_size;do r=e.head[--n],e.head[n]=r>=a?r-a:0;while(--t)n=t=a;do r=e.prev[--n],e.prev[n]=r>=a?r-a:0;while(--t)},R=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,D=e=>{let t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},L=(e,t)=>{i(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,D(e.strm)},H=(e,t)=>{e.pending_buf[e.pending++]=t},U=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},F=(e,t,r,n)=>{let a=e.avail_in;return(a>n&&(a=n),0===a)?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),r),1===e.state.wrap?e.adler=c(e.adler,t,a,r):2===e.state.wrap&&(e.adler=l(e.adler,t,a,r)),e.next_in+=a,e.total_in+=a,a)},V=(e,t)=>{let r,n,a=e.max_chain_length,i=e.strstart,o=e.prev_length,s=e.nice_match,c=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,l=e.window,u=e.w_mask,d=e.prev,h=e.strstart+258,f=l[i+o-1],p=l[i+o];e.prev_length>=e.good_match&&(a>>=2),s>e.lookahead&&(s=e.lookahead);do{if(l[(r=t)+o]!==p||l[r+o-1]!==f||l[r]!==l[i]||l[++r]!==l[i+1])continue;i+=2,r++;do;while(l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&l[++i]===l[++r]&&i<h)if(n=258-(h-i),i=h-258,n>o){if(e.match_start=t,o=n,n>=s)break;f=l[i+o-1],p=l[i+o]}}while((t=d[t&u])>c&&0!=--a)return o<=e.lookahead?o:e.lookahead},M=e=>{let t,r,n,a=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-262)&&(e.window.set(e.window.subarray(a,a+a-r),0),e.match_start-=a,e.strstart-=a,e.block_start-=a,e.insert>e.strstart&&(e.insert=e.strstart),N(e),r+=a),0===e.strm.avail_in)break;if(t=F(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=t,e.lookahead+e.insert>=3)for(n=e.strstart-e.insert,e.ins_h=e.window[n],e.ins_h=R(e,e.ins_h,e.window[n+1]);e.insert&&(e.ins_h=R(e,e.ins_h,e.window[n+3-1]),e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},j=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,i,o,s=0,c=e.strm.avail_in;do{if(n=65535,o=e.bi_valid+42>>3,e.strm.avail_out<o||(o=e.strm.avail_out-o,n>(i=e.strstart-e.block_start)+e.strm.avail_in&&(n=i+e.strm.avail_in),n>o&&(n=o),n<r&&(0===n&&t!==p||t===d||n!==i+e.strm.avail_in)))break;s=+(t===p&&n===i+e.strm.avail_in),a(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,D(e.strm),i&&(i>n&&(i=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,n-=i),n&&(F(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===s)return((c-=e.strm.avail_in)&&(c>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=c&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-c,e.strm.next_in),e.strstart),e.strstart+=c,e.insert+=c>e.w_size-e.insert?e.w_size-e.insert:c),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s)?4:t!==d&&t!==p&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(o=e.window_size-e.strstart,e.strm.avail_in>o&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,o+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),o>e.strm.avail_in&&(o=e.strm.avail_in),o&&(F(e.strm,e.window,e.strstart,o),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.high_water<e.strstart&&(e.high_water=e.strstart),o=e.bi_valid+42>>3,r=(o=e.pending_buf_size-o>65535?65535:e.pending_buf_size-o)>e.w_size?e.w_size:o,((i=e.strstart-e.block_start)>=r||(i||t===p)&&t!==d&&0===e.strm.avail_in&&i<=o)&&(n=i>o?o:i,s=+(t===p&&0===e.strm.avail_in&&n===i),a(e,e.block_start,n,s),e.block_start+=n,D(e.strm)),s?3:1)},z=(e,t)=>{let r,n;for(;;){if(e.lookahead<262){if(M(e),e.lookahead<262&&t===d)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=R(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-262&&(e.match_length=V(e,r)),e.match_length>=3)if(n=o(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=R(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length)e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=R(e,e.ins_h,e.window[e.strstart+1]);else n=o(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(L(e,!1),0===e.strm.avail_out))return 1}return(e.insert=e.strstart<2?e.strstart:2,t===p)?(L(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(L(e,!1),0===e.strm.avail_out)?1:2},W=(e,t)=>{let r,n,a;for(;;){if(e.lookahead<262){if(M(e),e.lookahead<262&&t===d)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=R(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-262&&(e.match_length=V(e,r),e.match_length<=5&&(e.strategy===E||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,n=o(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=R(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length)if(e.match_available=0,e.match_length=2,e.strstart++,n&&(L(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=o(e,0,e.window[e.strstart-1]))&&L(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return(e.match_available&&(n=o(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===p)?(L(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(L(e,!1),0===e.strm.avail_out)?1:2};function G(e,t,r,n,a){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=a}let K=[new G(0,0,0,0,j),new G(4,4,8,4,z),new G(4,5,16,8,z),new G(4,6,32,32,z),new G(4,4,16,16,W),new G(8,16,32,32,W),new G(8,16,128,128,W),new G(8,32,128,256,W),new G(32,128,258,1024,W),new G(32,258,258,4096,W)];function q(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=B,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*I),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),P(this.dyn_ltree),P(this.dyn_dtree),P(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),P(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),P(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let Y=e=>{if(!e)return 1;let t=e.state;return t&&t.strm===e&&(42===t.status||57===t.status||69===t.status||73===t.status||91===t.status||103===t.status||113===t.status||666===t.status)?0:1},Z=e=>{if(Y(e))return C(e,b);e.total_in=e.total_out=0,e.data_type=A;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=+(2!==t.wrap),t.last_flush=-2,n(t),m},X=e=>{let t=Z(e);return t===m&&(e=>{e.window_size=2*e.w_size,P(e.head),e.max_lazy_match=K[e.level].max_lazy,e.good_match=K[e.level].good_length,e.nice_match=K[e.level].nice_length,e.max_chain_length=K[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},J=(e,t,r,n,a,i)=>{if(!e)return b;let o=1;if(t===v&&(t=6),n<0?(o=0,n=-n):n>15&&(o=2,n-=16),a<1||a>9||r!==B||n<8||n>15||t<0||t>9||i<0||i>k||8===n&&1!==o)return C(e,b);8===n&&(n=9);let s=new q;return e.state=s,s.strm=e,s.status=42,s.wrap=o,s.gzhead=null,s.w_bits=n,s.w_size=1<<s.w_bits,s.w_mask=s.w_size-1,s.hash_bits=a+7,s.hash_size=1<<s.hash_bits,s.hash_mask=s.hash_size-1,s.hash_shift=~~((s.hash_bits+3-1)/3),s.window=new Uint8Array(2*s.w_size),s.head=new Uint16Array(s.hash_size),s.prev=new Uint16Array(s.w_size),s.lit_bufsize=1<<a+6,s.pending_buf_size=4*s.lit_bufsize,s.pending_buf=new Uint8Array(s.pending_buf_size),s.sym_buf=s.lit_bufsize,s.sym_end=(s.lit_bufsize-1)*3,s.level=t,s.strategy=i,s.method=r,X(e)};t.exports.deflateInit=(e,t)=>J(e,t,B,15,8,T),t.exports.deflateInit2=J,t.exports.deflateReset=X,t.exports.deflateResetKeep=Z,t.exports.deflateSetHeader=(e,t)=>Y(e)||2!==e.state.wrap?b:(e.state.gzhead=t,m),t.exports.deflate=(e,t)=>{if(Y(e)||t>g||t<0)return e?C(e,b):b;let r=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===r.status&&t!==p)return C(e,0===e.avail_out?_:b);let n=r.last_flush;if(r.last_flush=t,0!==r.pending){if(D(e),0===e.avail_out)return r.last_flush=-1,m}else if(0===e.avail_in&&O(t)<=O(n)&&t!==p)return C(e,_);if(666===r.status&&0!==e.avail_in)return C(e,_);if(42===r.status&&0===r.wrap&&(r.status=113),42===r.status){let t=B+(r.w_bits-8<<4)<<8;if(t|=(r.strategy>=S||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(t|=32),U(r,t+=31-t%31),0!==r.strstart&&(U(r,e.adler>>>16),U(r,65535&e.adler)),e.adler=1,r.status=113,D(e),0!==r.pending)return r.last_flush=-1,m}if(57===r.status){if(e.adler=0,H(r,31),H(r,139),H(r,8),r.gzhead)H(r,+!!r.gzhead.text+2*!!r.gzhead.hcrc+4*!!r.gzhead.extra+8*!!r.gzhead.name+16*!!r.gzhead.comment),H(r,255&r.gzhead.time),H(r,r.gzhead.time>>8&255),H(r,r.gzhead.time>>16&255),H(r,r.gzhead.time>>24&255),H(r,9===r.level?2:4*(r.strategy>=S||r.level<2)),H(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(H(r,255&r.gzhead.extra.length),H(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=l(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(H(r,0),H(r,0),H(r,0),H(r,0),H(r,0),H(r,9===r.level?2:4*(r.strategy>=S||r.level<2)),H(r,3),r.status=113,D(e),0!==r.pending)return r.last_flush=-1,m}if(69===r.status){if(r.gzhead.extra){let t=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){let a=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+a),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>t&&(e.adler=l(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex+=a,D(e),0!==r.pending)return r.last_flush=-1,m;t=0,n-=a}let a=new Uint8Array(r.gzhead.extra);r.pending_buf.set(a.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>t&&(e.adler=l(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=l(e.adler,r.pending_buf,r.pending-n,n)),D(e),0!==r.pending)return r.last_flush=-1,m;n=0}t=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,H(r,t)}while(0!==t)r.gzhead.hcrc&&r.pending>n&&(e.adler=l(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=l(e.adler,r.pending_buf,r.pending-n,n)),D(e),0!==r.pending)return r.last_flush=-1,m;n=0}t=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,H(r,t)}while(0!==t)r.gzhead.hcrc&&r.pending>n&&(e.adler=l(e.adler,r.pending_buf,r.pending-n,n))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(D(e),0!==r.pending))return r.last_flush=-1,m;H(r,255&e.adler),H(r,e.adler>>8&255),e.adler=0}if(r.status=113,D(e),0!==r.pending)return r.last_flush=-1,m}if(0!==e.avail_in||0!==r.lookahead||t!==d&&666!==r.status){let n=0===r.level?j(r,t):r.strategy===S?((e,t)=>{let r;for(;;){if(0===e.lookahead&&(M(e),0===e.lookahead)){if(t===d)return 1;break}if(e.match_length=0,r=o(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(L(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===p)?(L(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(L(e,!1),0===e.strm.avail_out)?1:2})(r,t):r.strategy===x?((e,t)=>{let r,n,a,i,s=e.window;for(;;){if(e.lookahead<=258){if(M(e),e.lookahead<=258&&t===d)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(n=s[a=e.strstart-1])===s[++a]&&n===s[++a]&&n===s[++a]){i=e.strstart+258;do;while(n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&a<i)e.match_length=258-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=o(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=o(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(L(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===p)?(L(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(L(e,!1),0===e.strm.avail_out)?1:2})(r,t):K[r.level].func(r,t);if((3===n||4===n)&&(r.status=666),1===n||3===n)return 0===e.avail_out&&(r.last_flush=-1),m;if(2===n&&(t===h?s(r):t!==g&&(a(r,0,0,!1),t===f&&(P(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),D(e),0===e.avail_out))return r.last_flush=-1,m}return t!==p?m:r.wrap<=0?y:(2===r.wrap?(H(r,255&e.adler),H(r,e.adler>>8&255),H(r,e.adler>>16&255),H(r,e.adler>>24&255),H(r,255&e.total_in),H(r,e.total_in>>8&255),H(r,e.total_in>>16&255),H(r,e.total_in>>24&255)):(U(r,e.adler>>>16),U(r,65535&e.adler)),D(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?m:y)},t.exports.deflateEnd=e=>{if(Y(e))return b;let t=e.state.status;return e.state=null,113===t?C(e,w):m},t.exports.deflateSetDictionary=(e,t)=>{let r=t.length;if(Y(e))return b;let n=e.state,a=n.wrap;if(2===a||1===a&&42!==n.status||n.lookahead)return b;if(1===a&&(e.adler=c(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===a&&(P(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}let i=e.avail_in,o=e.next_in,s=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,M(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do n.ins_h=R(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++;while(--t)n.strstart=e,n.lookahead=2,M(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=o,e.input=s,e.avail_in=i,n.wrap=a,m},t.exports.deflateInfo="pako deflate (from Nodeca project)"},779148,(e,t,r)=>{"use strict";let n=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);t.exports.assign=function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let r=t.shift();if(r){if("object"!=typeof r)throw TypeError(r+"must be non-object");for(let t in r)n(r,t)&&(e[t]=r[t])}}return e},t.exports.flattenChunks=e=>{let t=0;for(let r=0,n=e.length;r<n;r++)t+=e[r].length;let r=new Uint8Array(t);for(let t=0,n=0,a=e.length;t<a;t++){let a=e[t];r.set(a,n),n+=a.length}return r}},963202,(e,t,r)=>{"use strict";let n=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){n=!1}let a=new Uint8Array(256);for(let e=0;e<256;e++)a[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;a[254]=a[254]=1,t.exports.string2buf=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,a,i,o=e.length,s=0;for(a=0;a<o;a++)(64512&(r=e.charCodeAt(a)))==55296&&a+1<o&&(64512&(n=e.charCodeAt(a+1)))==56320&&(r=65536+(r-55296<<10)+(n-56320),a++),s+=r<128?1:r<2048?2:r<65536?3:4;for(i=0,t=new Uint8Array(s),a=0;i<s;a++)(64512&(r=e.charCodeAt(a)))==55296&&a+1<o&&(64512&(n=e.charCodeAt(a+1)))==56320&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?t[i++]=r:(r<2048?t[i++]=192|r>>>6:(r<65536?t[i++]=224|r>>>12:(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63),t[i++]=128|r>>>6&63),t[i++]=128|63&r);return t},t.exports.buf2string=(e,t)=>{let r,i,o=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let s=Array(2*o);for(i=0,r=0;r<o;){let t=e[r++];if(t<128){s[i++]=t;continue}let n=a[t];if(n>4){s[i++]=65533,r+=n-1;continue}for(t&=2===n?31:3===n?15:7;n>1&&r<o;)t=t<<6|63&e[r++],n--;if(n>1){s[i++]=65533;continue}t<65536?s[i++]=t:(t-=65536,s[i++]=55296|t>>10&1023,s[i++]=56320|1023&t)}return((e,t)=>{if(t<65534&&e.subarray&&n)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r})(s,i)},t.exports.utf8border=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(192&e[r])==128;)r--;return r<0||0===r?t:r+a[e[r]]>t?r:t}},698899,(e,t,r)=>{"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},948901,(e,t,r)=>{"use strict";let n=e.r(879674),a=e.r(779148),i=e.r(963202),o=e.r(319558),s=e.r(698899),c=Object.prototype.toString,{Z_NO_FLUSH:l,Z_SYNC_FLUSH:u,Z_FULL_FLUSH:d,Z_FINISH:h,Z_OK:f,Z_STREAM_END:p,Z_DEFAULT_COMPRESSION:g,Z_DEFAULT_STRATEGY:m,Z_DEFLATED:y}=e.r(834131);function b(e){this.options=a.assign({level:g,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:m},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;let r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==f)throw Error(o[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?i.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=n.deflateSetDictionary(this.strm,e))!==f)throw Error(o[r]);this._dict_set=!0}}function w(e,t){let r=new b(t);if(r.push(e,!0),r.err)throw r.msg||o[r.err];return r.result}b.prototype.push=function(e,t){let r,a,o=this.strm,s=this.options.chunkSize;if(this.ended)return!1;for(a=t===~~t?t:!0===t?h:l,"string"==typeof e?o.input=i.string2buf(e):"[object ArrayBuffer]"===c.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;;){if(0===o.avail_out&&(o.output=new Uint8Array(s),o.next_out=0,o.avail_out=s),(a===u||a===d)&&o.avail_out<=6){this.onData(o.output.subarray(0,o.next_out)),o.avail_out=0;continue}if((r=n.deflate(o,a))===p)return o.next_out>0&&this.onData(o.output.subarray(0,o.next_out)),r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===f;if(0===o.avail_out){this.onData(o.output);continue}if(a>0&&o.next_out>0){this.onData(o.output.subarray(0,o.next_out)),o.avail_out=0;continue}if(0===o.avail_in)break}return!0},b.prototype.onData=function(e){this.chunks.push(e)},b.prototype.onEnd=function(e){e===f&&(this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.exports.Deflate=b,t.exports.deflate=w,t.exports.deflateRaw=function(e,t){return(t=t||{}).raw=!0,w(e,t)},t.exports.gzip=function(e,t){return(t=t||{}).gzip=!0,w(e,t)},t.exports.constants=e.r(834131)},675531,(e,t,r)=>{"use strict";t.exports=function(e,t){let r,n,a,i,o,s,c,l,u,d,h,f,p,g,m,y,b,w,_,v,E,S,x,k,T=e.state;r=e.next_in,x=e.input,n=r+(e.avail_in-5),a=e.next_out,k=e.output,i=a-(t-e.avail_out),o=a+(e.avail_out-257),s=T.dmax,c=T.wsize,l=T.whave,u=T.wnext,d=T.window,h=T.hold,f=T.bits,p=T.lencode,g=T.distcode,m=(1<<T.lenbits)-1,y=(1<<T.distbits)-1;e:do for(f<15&&(h+=x[r++]<<f,f+=8,h+=x[r++]<<f,f+=8),b=p[h&m];;){if(h>>>=w=b>>>24,f-=w,0==(w=b>>>16&255))k[a++]=65535&b;else if(16&w)for(_=65535&b,(w&=15)&&(f<w&&(h+=x[r++]<<f,f+=8),_+=h&(1<<w)-1,h>>>=w,f-=w),f<15&&(h+=x[r++]<<f,f+=8,h+=x[r++]<<f,f+=8),b=g[h&y];;){if(h>>>=w=b>>>24,f-=w,16&(w=b>>>16&255)){if(v=65535&b,f<(w&=15)&&(h+=x[r++]<<f,(f+=8)<w&&(h+=x[r++]<<f,f+=8)),(v+=h&(1<<w)-1)>s){e.msg="invalid distance too far back",T.mode=16209;break e}if(h>>>=w,f-=w,v>(w=a-i)){if((w=v-w)>l&&T.sane){e.msg="invalid distance too far back",T.mode=16209;break e}if(E=0,S=d,0===u){if(E+=c-w,w<_){_-=w;do k[a++]=d[E++];while(--w)E=a-v,S=k}}else if(u<w){if(E+=c+u-w,(w-=u)<_){_-=w;do k[a++]=d[E++];while(--w)if(E=0,u<_){_-=w=u;do k[a++]=d[E++];while(--w)E=a-v,S=k}}}else if(E+=u-w,w<_){_-=w;do k[a++]=d[E++];while(--w)E=a-v,S=k}for(;_>2;)k[a++]=S[E++],k[a++]=S[E++],k[a++]=S[E++],_-=3;_&&(k[a++]=S[E++],_>1&&(k[a++]=S[E++]))}else{E=a-v;do k[a++]=k[E++],k[a++]=k[E++],k[a++]=k[E++],_-=3;while(_>2)_&&(k[a++]=k[E++],_>1&&(k[a++]=k[E++]))}}else if((64&w)==0){b=g[(65535&b)+(h&(1<<w)-1)];continue}else{e.msg="invalid distance code",T.mode=16209;break e}break}else if((64&w)==0){b=p[(65535&b)+(h&(1<<w)-1)];continue}else if(32&w){T.mode=16191;break e}else{e.msg="invalid literal/length code",T.mode=16209;break e}break}while(r<n&&a<o)r-=_=f>>3,f-=_<<3,h&=(1<<f)-1,e.next_in=r,e.next_out=a,e.avail_in=r<n?5+(n-r):5-(r-n),e.avail_out=a<o?257+(o-a):257-(a-o),T.hold=h,T.bits=f}},273012,(e,t,r)=>{"use strict";let n=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),a=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),i=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),o=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);t.exports=(e,t,r,s,c,l,u,d)=>{let h,f,p,g,m,y,b,w,_,v=d.bits,E=0,S=0,x=0,k=0,T=0,A=0,B=0,I=0,C=0,O=0,P=null,N=new Uint16Array(16),R=new Uint16Array(16),D=null;for(E=0;E<=15;E++)N[E]=0;for(S=0;S<s;S++)N[t[r+S]]++;for(k=15,T=v;k>=1&&0===N[k];k--);if(T>k&&(T=k),0===k)return c[l++]=0x1400000,c[l++]=0x1400000,d.bits=1,0;for(x=1;x<k&&0===N[x];x++);for(T<x&&(T=x),I=1,E=1;E<=15;E++)if(I<<=1,(I-=N[E])<0)return -1;if(I>0&&(0===e||1!==k))return -1;for(E=1,R[1]=0;E<15;E++)R[E+1]=R[E]+N[E];for(S=0;S<s;S++)0!==t[r+S]&&(u[R[t[r+S]]++]=S);if(0===e?(P=D=u,y=20):1===e?(P=n,D=a,y=257):(P=i,D=o,y=0),O=0,S=0,E=x,m=l,A=T,B=0,p=-1,g=(C=1<<T)-1,1===e&&C>852||2===e&&C>592)return 1;for(;;){b=E-B,u[S]+1<y?(w=0,_=u[S]):u[S]>=y?(w=D[u[S]-y],_=P[u[S]-y]):(w=96,_=0),h=1<<E-B,x=f=1<<A;do c[m+(O>>B)+(f-=h)]=b<<24|w<<16|_;while(0!==f)for(h=1<<E-1;O&h;)h>>=1;if(0!==h?(O&=h-1,O+=h):O=0,S++,0==--N[E]){if(E===k)break;E=t[r+u[S]]}if(E>T&&(O&g)!==p){for(0===B&&(B=T),m+=x,I=1<<(A=E-B);A+B<k&&!((I-=N[A+B])<=0);)A++,I<<=1;if(C+=1<<A,1===e&&C>852||2===e&&C>592)return 1;c[p=O&g]=T<<24|A<<16|m-l}}return 0!==O&&(c[m+O]=E-B<<24|4194304),d.bits=T,0}},757235,(e,t,r)=>{"use strict";let n,a,i=e.r(443486),o=e.r(63327),s=e.r(675531),c=e.r(273012),{Z_FINISH:l,Z_BLOCK:u,Z_TREES:d,Z_OK:h,Z_STREAM_END:f,Z_NEED_DICT:p,Z_STREAM_ERROR:g,Z_DATA_ERROR:m,Z_MEM_ERROR:y,Z_BUF_ERROR:b,Z_DEFLATED:w}=e.r(834131),_=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function v(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}let E=e=>{if(!e)return 1;let t=e.state;return+(!t||t.strm!==e||t.mode<16180||t.mode>16211)},S=e=>{if(E(e))return g;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,h},x=e=>{if(E(e))return g;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,S(e)},k=(e,t)=>{let r;if(E(e))return g;let n=e.state;return(t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15))?g:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,x(e))},T=(e,t)=>{if(!e)return g;let r=new v;e.state=r,r.strm=e,r.window=null,r.mode=16180;let n=k(e,t);return n!==h&&(e.state=null),n},A=!0,B=e=>{if(A){n=new Int32Array(512),a=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(c(1,e.lens,0,288,n,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;c(2,e.lens,0,32,a,0,e.work,{bits:5}),A=!1}e.lencode=n,e.lenbits=9,e.distcode=a,e.distbits=5},I=(e,t,r,n)=>{let a,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>n&&(a=n),i.window.set(t.subarray(r-n,r-n+a),i.wnext),(n-=a)?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0};t.exports.inflateReset=x,t.exports.inflateReset2=k,t.exports.inflateResetKeep=S,t.exports.inflateInit=e=>T(e,15),t.exports.inflateInit2=T,t.exports.inflate=(e,t)=>{let r,n,a,v,S,x,k,T,A,C,O,P,N,R,D,L,H,U,F,V,M,j,z,W,G=0,K=new Uint8Array(4),q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(E(e)||!e.output||!e.input&&0!==e.avail_in)return g;16191===(r=e.state).mode&&(r.mode=16192),S=e.next_out,a=e.output,k=e.avail_out,v=e.next_in,n=e.input,x=e.avail_in,T=r.hold,A=r.bits,C=x,O=k,j=h;t:for(;;)switch(r.mode){case 16180:if(0===r.wrap){r.mode=16192;break}for(;A<16;){if(0===x)break t;x--,T+=n[v++]<<A,A+=8}if(2&r.wrap&&35615===T){0===r.wbits&&(r.wbits=15),r.check=0,K[0]=255&T,K[1]=T>>>8&255,r.check=o(r.check,K,2,0),T=0,A=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&T)<<8)+(T>>8))%31){e.msg="incorrect header check",r.mode=16209;break}if((15&T)!==w){e.msg="unknown compression method",r.mode=16209;break}if(T>>>=4,A-=4,M=(15&T)+8,0===r.wbits&&(r.wbits=M),M>15||M>r.wbits){e.msg="invalid window size",r.mode=16209;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&T?16189:16191,T=0,A=0;break;case 16181:for(;A<16;){if(0===x)break t;x--,T+=n[v++]<<A,A+=8}if(r.flags=T,(255&r.flags)!==w){e.msg="unknown compression method",r.mode=16209;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=16209;break}r.head&&(r.head.text=T>>8&1),512&r.flags&&4&r.wrap&&(K[0]=255&T,K[1]=T>>>8&255,r.check=o(r.check,K,2,0)),T=0,A=0,r.mode=16182;case 16182:for(;A<32;){if(0===x)break t;x--,T+=n[v++]<<A,A+=8}r.head&&(r.head.time=T),512&r.flags&&4&r.wrap&&(K[0]=255&T,K[1]=T>>>8&255,K[2]=T>>>16&255,K[3]=T>>>24&255,r.check=o(r.check,K,4,0)),T=0,A=0,r.mode=16183;case 16183:for(;A<16;){if(0===x)break t;x--,T+=n[v++]<<A,A+=8}r.head&&(r.head.xflags=255&T,r.head.os=T>>8),512&r.flags&&4&r.wrap&&(K[0]=255&T,K[1]=T>>>8&255,r.check=o(r.check,K,2,0)),T=0,A=0,r.mode=16184;case 16184:if(1024&r.flags){for(;A<16;){if(0===x)break t;x--,T+=n[v++]<<A,A+=8}r.length=T,r.head&&(r.head.extra_len=T),512&r.flags&&4&r.wrap&&(K[0]=255&T,K[1]=T>>>8&255,r.check=o(r.check,K,2,0)),T=0,A=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&((P=r.length)>x&&(P=x),P&&(r.head&&(M=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(v,v+P),M)),512&r.flags&&4&r.wrap&&(r.check=o(r.check,n,P,v)),x-=P,v+=P,r.length-=P),r.length))break t;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===x)break t;P=0;do M=n[v+P++],r.head&&M&&r.length<65536&&(r.head.name+=String.fromCharCode(M));while(M&&P<x)if(512&r.flags&&4&r.wrap&&(r.check=o(r.check,n,P,v)),x-=P,v+=P,M)break t}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===x)break t;P=0;do M=n[v+P++],r.head&&M&&r.length<65536&&(r.head.comment+=String.fromCharCode(M));while(M&&P<x)if(512&r.flags&&4&r.wrap&&(r.check=o(r.check,n,P,v)),x-=P,v+=P,M)break t}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;A<16;){if(0===x)break t;x--,T+=n[v++]<<A,A+=8}if(4&r.wrap&&T!==(65535&r.check)){e.msg="header crc mismatch",r.mode=16209;break}T=0,A=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=16191;break;case 16189:for(;A<32;){if(0===x)break t;x--,T+=n[v++]<<A,A+=8}e.adler=r.check=_(T),T=0,A=0,r.mode=16190;case 16190:if(0===r.havedict)return e.next_out=S,e.avail_out=k,e.next_in=v,e.avail_in=x,r.hold=T,r.bits=A,p;e.adler=r.check=1,r.mode=16191;case 16191:if(t===u||t===d)break t;case 16192:if(r.last){T>>>=7&A,A-=7&A,r.mode=16206;break}for(;A<3;){if(0===x)break t;x--,T+=n[v++]<<A,A+=8}switch(r.last=1&T,A-=1,3&(T>>>=1)){case 0:r.mode=16193;break;case 1:if(B(r),r.mode=16199,t===d){T>>>=2,A-=2;break t}break;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=16209}T>>>=2,A-=2;break;case 16193:for(T>>>=7&A,A-=7&A;A<32;){if(0===x)break t;x--,T+=n[v++]<<A,A+=8}if((65535&T)!=(T>>>16^65535)){e.msg="invalid stored block lengths",r.mode=16209;break}if(r.length=65535&T,T=0,A=0,r.mode=16194,t===d)break t;case 16194:r.mode=16195;case 16195:if(P=r.length){if(P>x&&(P=x),P>k&&(P=k),0===P)break t;a.set(n.subarray(v,v+P),S),x-=P,v+=P,k-=P,S+=P,r.length-=P;break}r.mode=16191;break;case 16196:for(;A<14;){if(0===x)break t;x--,T+=n[v++]<<A,A+=8}if(r.nlen=(31&T)+257,A-=5,r.ndist=(31&(T>>>=5))+1,A-=5,r.ncode=(15&(T>>>=5))+4,T>>>=4,A-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=16209;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;A<3;){if(0===x)break t;x--,T+=n[v++]<<A,A+=8}r.lens[q[r.have++]]=7&T,T>>>=3,A-=3}for(;r.have<19;)r.lens[q[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,z={bits:r.lenbits},j=c(0,r.lens,0,19,r.lencode,0,r.work,z),r.lenbits=z.bits,j){e.msg="invalid code lengths set",r.mode=16209;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;D=(G=r.lencode[T&(1<<r.lenbits)-1])>>>24,L=G>>>16&255,H=65535&G,!(D<=A);){if(0===x)break t;x--,T+=n[v++]<<A,A+=8}if(H<16)T>>>=D,A-=D,r.lens[r.have++]=H;else{if(16===H){for(W=D+2;A<W;){if(0===x)break t;x--,T+=n[v++]<<A,A+=8}if(T>>>=D,A-=D,0===r.have){e.msg="invalid bit length repeat",r.mode=16209;break}M=r.lens[r.have-1],P=3+(3&T),T>>>=2,A-=2}else if(17===H){for(W=D+3;A<W;){if(0===x)break t;x--,T+=n[v++]<<A,A+=8}T>>>=D,A-=D,M=0,P=3+(7&T),T>>>=3,A-=3}else{for(W=D+7;A<W;){if(0===x)break t;x--,T+=n[v++]<<A,A+=8}T>>>=D,A-=D,M=0,P=11+(127&T),T>>>=7,A-=7}if(r.have+P>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=16209;break}for(;P--;)r.lens[r.have++]=M}}if(16209===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=16209;break}if(r.lenbits=9,z={bits:r.lenbits},j=c(1,r.lens,0,r.nlen,r.lencode,0,r.work,z),r.lenbits=z.bits,j){e.msg="invalid literal/lengths set",r.mode=16209;break}if(r.distbits=6,r.distcode=r.distdyn,z={bits:r.distbits},j=c(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,z),r.distbits=z.bits,j){e.msg="invalid distances set",r.mode=16209;break}if(r.mode=16199,t===d)break t;case 16199:r.mode=16200;case 16200:if(x>=6&&k>=258){e.next_out=S,e.avail_out=k,e.next_in=v,e.avail_in=x,r.hold=T,r.bits=A,s(e,O),S=e.next_out,a=e.output,k=e.avail_out,v=e.next_in,n=e.input,x=e.avail_in,T=r.hold,A=r.bits,16191===r.mode&&(r.back=-1);break}for(r.back=0;D=(G=r.lencode[T&(1<<r.lenbits)-1])>>>24,L=G>>>16&255,H=65535&G,!(D<=A);){if(0===x)break t;x--,T+=n[v++]<<A,A+=8}if(L&&(240&L)==0){for(U=D,F=L,V=H;D=(G=r.lencode[V+((T&(1<<U+F)-1)>>U)])>>>24,L=G>>>16&255,H=65535&G,!(U+D<=A);){if(0===x)break t;x--,T+=n[v++]<<A,A+=8}T>>>=U,A-=U,r.back+=U}if(T>>>=D,A-=D,r.back+=D,r.length=H,0===L){r.mode=16205;break}if(32&L){r.back=-1,r.mode=16191;break}if(64&L){e.msg="invalid literal/length code",r.mode=16209;break}r.extra=15&L,r.mode=16201;case 16201:if(r.extra){for(W=r.extra;A<W;){if(0===x)break t;x--,T+=n[v++]<<A,A+=8}r.length+=T&(1<<r.extra)-1,T>>>=r.extra,A-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;D=(G=r.distcode[T&(1<<r.distbits)-1])>>>24,L=G>>>16&255,H=65535&G,!(D<=A);){if(0===x)break t;x--,T+=n[v++]<<A,A+=8}if((240&L)==0){for(U=D,F=L,V=H;D=(G=r.distcode[V+((T&(1<<U+F)-1)>>U)])>>>24,L=G>>>16&255,H=65535&G,!(U+D<=A);){if(0===x)break t;x--,T+=n[v++]<<A,A+=8}T>>>=U,A-=U,r.back+=U}if(T>>>=D,A-=D,r.back+=D,64&L){e.msg="invalid distance code",r.mode=16209;break}r.offset=H,r.extra=15&L,r.mode=16203;case 16203:if(r.extra){for(W=r.extra;A<W;){if(0===x)break t;x--,T+=n[v++]<<A,A+=8}r.offset+=T&(1<<r.extra)-1,T>>>=r.extra,A-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=16209;break}r.mode=16204;case 16204:if(0===k)break t;if(P=O-k,r.offset>P){if((P=r.offset-P)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=16209;break}P>r.wnext?(P-=r.wnext,N=r.wsize-P):N=r.wnext-P,P>r.length&&(P=r.length),R=r.window}else R=a,N=S-r.offset,P=r.length;P>k&&(P=k),k-=P,r.length-=P;do a[S++]=R[N++];while(--P)0===r.length&&(r.mode=16200);break;case 16205:if(0===k)break t;a[S++]=r.length,k--,r.mode=16200;break;case 16206:if(r.wrap){for(;A<32;){if(0===x)break t;x--,T|=n[v++]<<A,A+=8}if(O-=k,e.total_out+=O,r.total+=O,4&r.wrap&&O&&(e.adler=r.check=r.flags?o(r.check,a,O,S-O):i(r.check,a,O,S-O)),O=k,4&r.wrap&&(r.flags?T:_(T))!==r.check){e.msg="incorrect data check",r.mode=16209;break}T=0,A=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;A<32;){if(0===x)break t;x--,T+=n[v++]<<A,A+=8}if(4&r.wrap&&T!==(0|r.total)){e.msg="incorrect length check",r.mode=16209;break}T=0,A=0}r.mode=16208;case 16208:j=f;break t;case 16209:j=m;break t;case 16210:return y;default:return g}return e.next_out=S,e.avail_out=k,e.next_in=v,e.avail_in=x,r.hold=T,r.bits=A,(r.wsize||O!==e.avail_out&&r.mode<16209&&(r.mode<16206||t!==l))&&I(e,e.output,e.next_out,O-e.avail_out),C-=e.avail_in,O-=e.avail_out,e.total_in+=C,e.total_out+=O,r.total+=O,4&r.wrap&&O&&(e.adler=r.check=r.flags?o(r.check,a,O,e.next_out-O):i(r.check,a,O,e.next_out-O)),e.data_type=r.bits+64*!!r.last+128*(16191===r.mode)+256*(16199===r.mode||16194===r.mode),(0===C&&0===O||t===l)&&j===h&&(j=b),j},t.exports.inflateEnd=e=>{if(E(e))return g;let t=e.state;return t.window&&(t.window=null),e.state=null,h},t.exports.inflateGetHeader=(e,t)=>{if(E(e))return g;let r=e.state;return(2&r.wrap)==0?g:(r.head=t,t.done=!1,h)},t.exports.inflateSetDictionary=(e,t)=>{let r,n=t.length;return E(e)||0!==(r=e.state).wrap&&16190!==r.mode?g:16190===r.mode&&i(1,t,n,0)!==r.check?m:I(e,t,n,n)?(r.mode=16210,y):(r.havedict=1,h)},t.exports.inflateInfo="pako inflate (from Nodeca project)"},524448,(e,t,r)=>{"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},882473,(e,t,r)=>{"use strict";let n=e.r(757235),a=e.r(779148),i=e.r(963202),o=e.r(319558),s=e.r(698899),c=e.r(524448),l=Object.prototype.toString,{Z_NO_FLUSH:u,Z_FINISH:d,Z_OK:h,Z_STREAM_END:f,Z_NEED_DICT:p,Z_STREAM_ERROR:g,Z_DATA_ERROR:m,Z_MEM_ERROR:y}=e.r(834131);function b(e){this.options=a.assign({chunkSize:65536,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits)==0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new s,this.strm.avail_out=0;let r=n.inflateInit2(this.strm,t.windowBits);if(r!==h||(this.header=new c,n.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=i.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw)&&(r=n.inflateSetDictionary(this.strm,t.dictionary))!==h))throw Error(o[r])}function w(e,t){let r=new b(t);if(r.push(e),r.err)throw r.msg||o[r.err];return r.result}b.prototype.push=function(e,t){let r,a,o,s=this.strm,c=this.options.chunkSize,b=this.options.dictionary;if(this.ended)return!1;for(a=t===~~t?t:!0===t?d:u,"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;;){for(0===s.avail_out&&(s.output=new Uint8Array(c),s.next_out=0,s.avail_out=c),(r=n.inflate(s,a))===p&&b&&((r=n.inflateSetDictionary(s,b))===h?r=n.inflate(s,a):r===m&&(r=p));s.avail_in>0&&r===f&&s.state.wrap>0&&0!==e[s.next_in];)n.inflateReset(s),r=n.inflate(s,a);switch(r){case g:case m:case p:case y:return this.onEnd(r),this.ended=!0,!1}if(o=s.avail_out,s.next_out&&(0===s.avail_out||r===f))if("string"===this.options.to){let e=i.utf8border(s.output,s.next_out),t=s.next_out-e,r=i.buf2string(s.output,e);s.next_out=t,s.avail_out=c-t,t&&s.output.set(s.output.subarray(e,e+t),0),this.onData(r)}else this.onData(s.output.length===s.next_out?s.output:s.output.subarray(0,s.next_out));if(r!==h||0!==o){if(r===f)return r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===s.avail_in)break}}return!0},b.prototype.onData=function(e){this.chunks.push(e)},b.prototype.onEnd=function(e){e===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.exports.Inflate=b,t.exports.inflate=w,t.exports.inflateRaw=function(e,t){return(t=t||{}).raw=!0,w(e,t)},t.exports.ungzip=w,t.exports.constants=e.r(834131)},209643,(e,t,r)=>{"use strict";let{Deflate:n,deflate:a,deflateRaw:i,gzip:o}=e.r(948901),{Inflate:s,inflate:c,inflateRaw:l,ungzip:u}=e.r(882473),d=e.r(834131);t.exports.Deflate=n,t.exports.deflate=a,t.exports.deflateRaw=i,t.exports.gzip=o,t.exports.Inflate=s,t.exports.inflate=c,t.exports.inflateRaw=l,t.exports.ungzip=u,t.exports.constants=d},494887,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.expand_message_xmd=c,r.expand_message_xof=l,r.hash_to_field=u,r.isogenyMap=function(e,t){let r=t.map(e=>Array.from(e).reverse());return(t,n)=>{let[a,i,o,s]=r.map(r=>r.reduce((r,n)=>e.add(e.mul(r,t),n)));return t=e.div(a,i),n=e.mul(n,e.div(o,s)),{x:t,y:n}}},r.createHasher=function(e,t,r){if("function"!=typeof t)throw Error("mapToCurve() must be defined");return{hashToCurve(n,a){let i=u(n,2,{...r,DST:r.DST,...a}),o=e.fromAffine(t(i[0])),s=e.fromAffine(t(i[1])),c=o.add(s).clearCofactor();return c.assertValidity(),c},encodeToCurve(n,a){let i=u(n,1,{...r,DST:r.encodeDST,...a}),o=e.fromAffine(t(i[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(r){if(!Array.isArray(r))throw Error("mapToCurve: expected array of bigints");for(let e of r)if("bigint"!=typeof e)throw Error("mapToCurve: expected array of bigints");let n=e.fromAffine(t(r)).clearCofactor();return n.assertValidity(),n}}};let n=e.r(660100),a=e.r(771952),i=a.bytesToNumberBE;function o(e,t){if(s(e),s(t),e<0||e>=1<<8*t)throw Error("invalid I2OSP input: "+e);let r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=255&e,e>>>=8;return new Uint8Array(r)}function s(e){if(!Number.isSafeInteger(e))throw Error("number expected")}function c(e,t,r,n){(0,a.abytes)(e),(0,a.abytes)(t),s(r),t.length>255&&(t=n((0,a.concatBytes)((0,a.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));let{outputLen:i,blockLen:c}=n,l=Math.ceil(r/i);if(r>65535||l>255)throw Error("expand_message_xmd: invalid lenInBytes");let u=(0,a.concatBytes)(t,o(t.length,1)),d=o(0,c),h=o(r,2),f=Array(l),p=n((0,a.concatBytes)(d,e,h,o(0,1),u));f[0]=n((0,a.concatBytes)(p,o(1,1),u));for(let e=1;e<=l;e++){let t=[function(e,t){let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}(p,f[e-1]),o(e+1,1),u];f[e]=n((0,a.concatBytes)(...t))}return(0,a.concatBytes)(...f).slice(0,r)}function l(e,t,r,n,i){if((0,a.abytes)(e),(0,a.abytes)(t),s(r),t.length>255){let e=Math.ceil(2*n/8);t=i.create({dkLen:e}).update((0,a.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(e).update(o(r,2)).update(t).update(o(t.length,1)).digest()}function u(e,t,r){let o;(0,a.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:u,k:d,m:h,hash:f,expand:p,DST:g}=r;(0,a.abytes)(e),s(t);let m="string"==typeof g?(0,a.utf8ToBytes)(g):g,y=Math.ceil((u.toString(2).length+d)/8),b=t*h*y;if("xmd"===p)o=c(e,m,b,f);else if("xof"===p)o=l(e,m,b,d,f);else if("_internal_pass"===p)o=e;else throw Error('expand must be "xmd" or "xof"');let w=Array(t);for(let e=0;e<t;e++){let t=Array(h);for(let r=0;r<h;r++){let a=y*(r+e*h),s=o.subarray(a,a+y);t[r]=(0,n.mod)(i(s),u)}w[e]=t}return w}},394922,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.encodeToCurve=r.hashToCurve=r.schnorr=r.secp256k1=void 0;let n=e.r(171249),a=e.r(328506),i=e.r(554289),o=e.r(494887),s=e.r(660100),c=e.r(771952),l=e.r(605744),u=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),d=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h=BigInt(1),f=BigInt(2),p=(e,t)=>(e+t/f)/t;function g(e){let t=BigInt(3),r=BigInt(6),n=BigInt(11),a=BigInt(22),i=BigInt(23),o=BigInt(44),c=BigInt(88),l=e*e*e%u,d=l*l*e%u,h=(0,s.pow2)(d,t,u)*d%u,p=(0,s.pow2)(h,t,u)*d%u,g=(0,s.pow2)(p,f,u)*l%u,y=(0,s.pow2)(g,n,u)*g%u,b=(0,s.pow2)(y,a,u)*y%u,w=(0,s.pow2)(b,o,u)*b%u,_=(0,s.pow2)(w,c,u)*w%u,v=(0,s.pow2)(_,o,u)*b%u,E=(0,s.pow2)(v,t,u)*d%u,S=(0,s.pow2)(E,i,u)*y%u,x=(0,s.pow2)(S,r,u)*l%u,k=(0,s.pow2)(x,f,u);if(!m.eql(m.sqr(k),e))throw Error("Cannot find square root");return k}let m=(0,s.Field)(u,void 0,void 0,{sqrt:g});r.secp256k1=(0,i.createCurve)({a:BigInt(0),b:BigInt(7),Fp:m,n:d,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-h*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=BigInt("0x100000000000000000000000000000000"),i=p(t*e,d),o=p(-r*e,d),c=(0,s.mod)(e-i*t-o*n,d),l=(0,s.mod)(-i*r-o*t,d),u=c>a,f=l>a;if(u&&(c=d-c),f&&(l=d-l),c>a||l>a)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:u,k1:c,k2neg:f,k2:l}}}},n.sha256);let y=BigInt(0),b={};function w(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];let i=b[e];if(void 0===i){let t=(0,n.sha256)(Uint8Array.from(e,e=>e.charCodeAt(0)));i=(0,c.concatBytes)(t,t),b[e]=i}return(0,n.sha256)((0,c.concatBytes)(i,...r))}let _=e=>e.toRawBytes(!0).slice(1),v=e=>(0,c.numberToBytesBE)(e,32),E=e=>(0,s.mod)(e,u),S=e=>(0,s.mod)(e,d),x=r.secp256k1.ProjectivePoint;function k(e){let t=r.secp256k1.utils.normPrivateKeyToScalar(e),n=x.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:S(-t),bytes:_(n)}}function T(e){(0,c.aInRange)("x",e,h,u);let t=E(e*e),r=g(E(t*e+BigInt(7)));r%f!==y&&(r=E(-r));let n=new x(e,r,h);return n.assertValidity(),n}let A=c.bytesToNumberBE;function B(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return S(A(w("BIP0340/challenge",...t)))}function I(e,t,r){let n=(0,c.ensureBytes)("signature",e,64),a=(0,c.ensureBytes)("message",t),i=(0,c.ensureBytes)("publicKey",r,32);try{let e,t=T(A(i)),r=A(n.subarray(0,32));if(!(0,c.inRange)(r,h,u))return!1;let o=A(n.subarray(32,64));if(!(0,c.inRange)(o,h,d))return!1;let s=B(v(r),_(t),a),l=(e=S(-s),x.BASE.multiplyAndAddUnsafe(t,o,e));if(!l||!l.hasEvenY()||l.toAffine().x!==r)return!1;return!0}catch(e){return!1}}r.schnorr={getPublicKey:function(e){return k(e).bytes},sign:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,a.randomBytes)(32),n=(0,c.ensureBytes)("message",e),{bytes:i,scalar:o}=k(t),s=v(o^A(w("BIP0340/aux",(0,c.ensureBytes)("auxRand",r,32)))),l=S(A(w("BIP0340/nonce",s,i,n)));if(l===y)throw Error("sign failed: k is zero");let{bytes:u,scalar:d}=k(l),h=B(u,i,n),f=new Uint8Array(64);if(f.set(u,0),f.set(v(S(d+h*o)),32),!I(f,n,i))throw Error("sign: Invalid signature produced");return f},verify:I,utils:{randomPrivateKey:r.secp256k1.utils.randomPrivateKey,lift_x:T,pointToBytes:_,numberToBytesBE:c.numberToBytesBE,bytesToNumberBE:c.bytesToNumberBE,taggedHash:w,mod:s.mod}};let C=(0,o.isogenyMap)(m,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e)))),O=(0,l.mapToCurveSimpleSWU)(m,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:m.create(BigInt("-11"))}),P=(0,o.createHasher)(r.secp256k1.ProjectivePoint,e=>{let{x:t,y:r}=O(m.create(e[0]));return C(t,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:m.ORDER,m:1,k:128,expand:"xmd",hash:n.sha256});r.hashToCurve=P.hashToCurve,r.encodeToCurve=P.encodeToCurve},288128,(e,t,r)=>{"use strict";var n,a,i,o,s,c=e.i(467034),l=e.r(127873),u=Object.create,d=Object.defineProperty,h=Object.getOwnPropertyDescriptor,f=Object.getOwnPropertyNames,p=Object.getPrototypeOf,g=Object.prototype.hasOwnProperty,m=(e,t)=>{for(var r in t)d(e,r,{get:t[r],enumerable:!0})},y=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of f(t))g.call(e,a)||a===r||d(e,a,{get:()=>t[a],enumerable:!(n=h(t,a))||n.enumerable});return e},b=(e,t,r)=>(r=null!=e?u(p(e)):{},y(!t&&e&&e.__esModule?r:d(r,"default",{value:e,enumerable:!0}),e)),w={};m(w,{Account:()=>oc,AccountInterface:()=>ol,BatchClient:()=>eQ,BlockStatus:()=>ek,BlockTag:()=>eT,CairoCustomEnum:()=>rS,CairoFixedArray:()=>rD,CairoOption:()=>rk,CairoOptionVariant:()=>rx,CairoResult:()=>rA,CairoResultVariant:()=>rT,CairoUint256:()=>t0,CairoUint512:()=>t5,CallData:()=>rX,Contract:()=>oB,ContractFactory:()=>oC,ContractInterface:()=>oI,EDAMode:()=>eP,EDataAvailabilityMode:()=>eO,ETH_ADDRESS:()=>eV,ETransactionExecutionStatus:()=>eL,ETransactionStatus:()=>eD,ETransactionVersion:()=>eB,ETransactionVersion2:()=>eI,ETransactionVersion3:()=>eC,EntryPointType:()=>ev,EthSigner:()=>iD,LedgerSigner:()=>iL,LedgerSigner111:()=>iL,LedgerSigner221:()=>iz,LedgerSigner231:()=>iG,LibraryError:()=>an,Literal:()=>eF,LogLevelIndex:()=>ey,NON_ZERO_PREFIX:()=>eM,OutsideExecutionTypesV1:()=>ej,OutsideExecutionTypesV2:()=>ez,OutsideExecutionVersion:()=>eW,PaymasterInterface:()=>oo,PaymasterRpc:()=>oi,Provider:()=>ik,ProviderInterface:()=>iT,RPC:()=>v,RPC07:()=>ew,RPC08:()=>aC,RPCResponseParser:()=>aH,ReceiptTx:()=>aU,ResponseParser:()=>oO,RpcChannel:()=>aP,RpcError:()=>aa,RpcProvider:()=>ik,Signer:()=>iI,SignerInterface:()=>iB,Subscription:()=>aD,TimeoutError:()=>ai,TransactionExecutionStatus:()=>ex,TransactionFinalityStatus:()=>eS,TransactionType:()=>eE,TypedDataRevision:()=>eG.TypedDataRevision,UINT_128_MAX:()=>tq,UINT_128_MIN:()=>t3,UINT_256_HIGH_MAX:()=>tJ,UINT_256_HIGH_MIN:()=>t$,UINT_256_LOW_MAX:()=>tX,UINT_256_LOW_MIN:()=>tQ,UINT_256_MAX:()=>tY,UINT_256_MIN:()=>tZ,UINT_512_MAX:()=>t1,UINT_512_MIN:()=>t2,Uint:()=>eU,ValidateType:()=>eH,WalletAccount:()=>ox,WebSocketChannel:()=>aL,WebSocketNotConnectedError:()=>ao,addAddressPadding:()=>iF,byteArray:()=>tj,cairo:()=>tG,config:()=>em,constants:()=>_,contractClassResponseToLegacyCompiledContract:()=>ae,defaultPaymaster:()=>os,defaultProvider:()=>iA,ec:()=>r0,encode:()=>T,eth:()=>as,events:()=>iK,extractContractHashes:()=>n9,getCalldata:()=>oA,getChecksumAddress:()=>iM,getLedgerPathBuffer:()=>iH,getLedgerPathBuffer111:()=>iH,getLedgerPathBuffer221:()=>iW,hash:()=>rJ,isPendingBlock:()=>nW,isPendingStateUpdate:()=>nK,isPendingTransaction:()=>nG,isRPC08_FeeEstimate:()=>eN,isRPC08_ResourceBounds:()=>eR,isSierra:()=>n7,isSupportedSpecVersion:()=>nM,isV3Tx:()=>nF,isVersion:()=>nV,json:()=>eK,logger:()=>eb,merkle:()=>aV,num:()=>e1,outsideExecution:()=>iJ,parseCalldataField:()=>rU,paymaster:()=>i4,provider:()=>ah,selector:()=>tv,shortString:()=>tP,src5:()=>i6,stark:()=>nL,starknetId:()=>a8,toAnyPatchVersion:()=>nj,toApiVersion:()=>nz,transaction:()=>av,typedData:()=>aF,types:()=>e_,uint256:()=>iO,units:()=>oP,v2hash:()=>r$,v3hash:()=>r9,validateAndParseAddress:()=>iV,validateChecksumAddress:()=>ij,wallet:()=>ou}),t.exports=y(d({},"__esModule",{value:!0}),w);var _={};m(_,{ADDR_BOUND:()=>X,API_VERSION:()=>q,BaseUrl:()=>es,DEFAULT_GLOBAL_CONFIG:()=>eh,HARDENING_4BYTES:()=>eo,HARDENING_BYTE:()=>ei,IS_BROWSER:()=>B,MASK_250:()=>G,MASK_31:()=>K,MAX_STORAGE_ITEM_SIZE:()=>Z,NetworkName:()=>ec,OutsideExecutionCallerAny:()=>er,PAYMASTER_RPC_NODES:()=>ep,PRIME:()=>Y,RANGE_FELT:()=>Q,RANGE_I128:()=>$,RANGE_U128:()=>ee,RPC_DEFAULT_NODES:()=>ef,SNIP9_V1_INTERFACE_ID:()=>en,SNIP9_V2_INTERFACE_ID:()=>ea,SYSTEM_MESSAGES:()=>eg,StarknetChainId:()=>el,SupportedRpcVersion:()=>ed,TEXT_TO_FELT_MAX_LEN:()=>j,TRANSACTION_VERSION:()=>z,TransactionHashPrefix:()=>eu,UDC:()=>et,ZERO:()=>W});var v={};m(v,{JRPC:()=>E,PAYMASTER_API:()=>k.PAYMASTER_API,RPCSPEC07:()=>S,RPCSPEC08:()=>x});var E={},S=b(e.r(536433)),x=b(e.r(906984)),k=e.r(906984);((e,t,r)=>(y(e,t,"default"),r&&y(r,t,"default")))(v,e.r(906984));var T={};m(T,{IS_BROWSER:()=>B,addHexPrefix:()=>D,arrayBufferToString:()=>I,atobUniversal:()=>O,btoaUniversal:()=>P,buf2hex:()=>N,calcByteLength:()=>H,concatenateArrayBuffer:()=>M,padLeft:()=>L,pascalToSnake:()=>V,removeHexPrefix:()=>R,sanitizeBytes:()=>U,sanitizeHex:()=>F,utf8ToArray:()=>C});var A=e.r(462539),B="undefined"!=typeof window;function I(e){return new Uint8Array(e).reduce((e,t)=>e+String.fromCharCode(t),"")}function C(e){return new TextEncoder().encode(e)}function O(e){return A.base64.decode(e)}function P(e){return A.base64.encode(new Uint8Array(e))}function N(e){return e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}function R(e){return e.replace(/^0x/i,"")}function D(e){return"0x".concat(R(e))}function L(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"0",a=t-e.length,i=e;if(a>0){let t=n.repeat(a);i=r?t+e:e+t}return i}(e,t,!0,r)}function H(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,{length:r}=e,n=r%t;return n?(r-n)/t*t+t:r}function U(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:8,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"0";return L(e,H(e,t),r)}function F(e){let t=U(R(e),2);return t?D(t):t}var V=e=>/[a-z]/.test(e)?e.split(/(?=[A-Z])/).join("_").toUpperCase():e;function M(e){let t=new Uint8Array(e.reduce((e,t)=>e+t.byteLength,0)),r=0;return e.forEach(e=>{t.set(e,r),r+=e.byteLength}),t}var j=31,{ETransactionVersion:z}=x,W=0n,G=2n**250n-1n,K=2n**31n-1n,q=W,Y=2n**251n+17n*2n**192n+1n,Z=256n,X=2n**251n-Z,J=(e,t)=>({min:e,max:t}),Q=J(W,Y-1n),$=J(-(2n**127n),2n**127n-1n),ee=J(W,2n**128n-1n),et={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},er="0x414e595f43414c4c4552",en="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",ea="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",ei=128,eo=2147483648n,es={SN_MAIN:"https://alpha-mainnet.starknet.io",SN_SEPOLIA:"https://alpha-sepolia.starknet.io"},ec={SN_MAIN:"SN_MAIN",SN_SEPOLIA:"SN_SEPOLIA"},el={SN_MAIN:"0x534e5f4d41494e",SN_SEPOLIA:"0x534e5f5345504f4c4941"},eu={DECLARE:"0x6465636c617265",DEPLOY:"0x6465706c6f79",DEPLOY_ACCOUNT:"0x6465706c6f795f6163636f756e74",INVOKE:"0x696e766f6b65",L1_HANDLER:"0x6c315f68616e646c6572"},ed={"0.7.1":"0.7.1","0.8.1":"0.8.1",v0_7_1:"0.7.1",v0_8_1:"0.8.1"},eh={legacyMode:!1,rpcVersion:"0.8.1",transactionVersion:v.ETransactionVersion.V3,logLevel:"INFO",feeMarginPercentage:{bounds:{l1_gas:{max_amount:50,max_price_per_unit:50},l1_data_gas:{max_amount:50,max_price_per_unit:50},l2_gas:{max_amount:50,max_price_per_unit:50}},maxFee:50},fetch:void 0,websocket:void 0},ef={SN_MAIN:["https://starknet-mainnet.public.blastapi.io/rpc/"],SN_SEPOLIA:["https://starknet-sepolia.public.blastapi.io/rpc/"]},ep={SN_MAIN:["https://starknet.paymaster.avnu.fi"],SN_SEPOLIA:["https://sepolia.paymaster.avnu.fi"]},eg={legacyTxWarningMessage:"You are using a deprecated transaction version (V0,V1,V2)!\nUpdate to the latest V3 transactions!",legacyTxRPC08Message:"RPC 0.8 do not support legacy transactions",SWOldV3:"RPC 0.7 V3 tx (improper resource bounds) not supported in RPC 0.8",channelVersionMismatch:"Channel specification version is not compatible with the connected node Specification Version",unsupportedSpecVersion:"The connected node specification version is not supported by this library",maxFeeInV3:"maxFee is not supported in V3 transactions, use resourceBounds instead"},em=(n=class e{initialize(){this.config={...eh}}static getInstance(){return e.instance||(e.instance=new e),e.instance}get(e,t){var r;return null!=(r=this.config[e])?r:t}set(e,t){this.config[e]=t}update(e){this.config={...this.config,...e}}getAll(){return{...this.config}}reset(){this.initialize()}delete(e){delete this.config[e]}hasKey(e){return e in this.config}constructor(){l._(this,"config",void 0),this.initialize()}},l._(n,"instance",void 0),n).getInstance(),ey={DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,OFF:0},eb=(a=class e{static getInstance(){return e.instance||(e.instance=new e),e.instance}getTimestamp(){return new Date().toISOString()}shouldLog(e){return e<=ey[this.config.get("logLevel","INFO")]}formatMessage(e){let{level:t,message:r,timestamp:n,data:a}=e,i="[".concat(n,"] ").concat(t,": ").concat(r);if(a)try{i+="\n".concat(JSON.stringify(a,null,2))}catch(e){i+="\n[JSON.stringify Error/Circular]: ".concat(e)}return i}log(e,t,r){if(!this.shouldLog(ey[e]))return;let n={level:e,message:t,timestamp:this.getTimestamp(),data:r},a=this.formatMessage(n);switch(e){case"DEBUG":console.debug(a);break;case"INFO":console.info(a);break;case"WARN":console.warn(a);break;case"ERROR":case"FATAL":console.error(a);break;case"OFF":break;default:console.log(a)}}debug(e,t){this.log("DEBUG",e,t)}info(e,t){this.log("INFO",e,t)}warn(e,t){this.log("WARN",e,t)}error(e,t){this.log("ERROR",e,t)}fatal(e,t){this.log("FATAL",e,t)}setLogLevel(e){this.config.set("logLevel",e)}getLogLevel(){return this.config.get("logLevel","INFO")}getEnabledLogLevels(){return Object.keys(ey).filter(e=>this.shouldLog(ey[e])&&"OFF"!==e)}constructor(){l._(this,"config",void 0),this.config=em}},l._(a,"instance",void 0),a).getInstance(),ew={};m(ew,{RpcChannel:()=>aI});var e_={};m(e_,{BlockStatus:()=>ek,BlockTag:()=>eT,EDAMode:()=>eP,EDataAvailabilityMode:()=>eO,ETH_ADDRESS:()=>eV,ETransactionExecutionStatus:()=>eL,ETransactionStatus:()=>eD,ETransactionVersion:()=>eB,ETransactionVersion2:()=>eI,ETransactionVersion3:()=>eC,EntryPointType:()=>ev,Literal:()=>eF,NON_ZERO_PREFIX:()=>eM,OutsideExecutionTypesV1:()=>ej,OutsideExecutionTypesV2:()=>ez,OutsideExecutionVersion:()=>eW,RPC:()=>v,TransactionExecutionStatus:()=>ex,TransactionFinalityStatus:()=>eS,TransactionType:()=>eE,TypedDataRevision:()=>eG.TypedDataRevision,Uint:()=>eU,ValidateType:()=>eH,isRPC08_FeeEstimate:()=>eN,isRPC08_ResourceBounds:()=>eR});var ev={EXTERNAL:"EXTERNAL",L1_HANDLER:"L1_HANDLER",CONSTRUCTOR:"CONSTRUCTOR"},eE={DECLARE:"DECLARE",DEPLOY:"DEPLOY",DEPLOY_ACCOUNT:"DEPLOY_ACCOUNT",INVOKE:"INVOKE_FUNCTION"},eS={NOT_RECEIVED:"NOT_RECEIVED",RECEIVED:"RECEIVED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},ex={REJECTED:"REJECTED",REVERTED:"REVERTED",SUCCEEDED:"SUCCEEDED"},ek={PENDING:"PENDING",ACCEPTED_ON_L1:"ACCEPTED_ON_L1",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",REJECTED:"REJECTED"},eT={PENDING:"pending",LATEST:"latest"},eA=b(e.r(906984)),{ETransactionVersion:eB}=eA,{ETransactionVersion2:eI}=eA,{ETransactionVersion3:eC}=eA,{EDataAvailabilityMode:eO}=eA,{EDAMode:eP}=eA;function eN(e){return"l1_data_gas_consumed"in e}function eR(e){return"l1_data_gas"in e}var{ETransactionStatus:eD}=eA,{ETransactionExecutionStatus:eL}=eA,eH={DEPLOY:"DEPLOY",CALL:"CALL",INVOKE:"INVOKE"},eU={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},eF={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},eV="core::starknet::eth_address::EthAddress",eM="core::zeroable::NonZero::",ej={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},ez={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]},eW={UNSUPPORTED:"0",V1:"1",V2:"2"},eG=e.r(536433),eK={};m(eK,{parse:()=>eZ,parseAlwaysAsBig:()=>eX,stringify:()=>eJ});var eq=b(e.r(839084)),eY=e=>{if(!eq.isInteger(e))return parseFloat(e);let t=parseInt(e,10);return Number.isSafeInteger(t)?t:BigInt(e)},eZ=e=>eq.parse(String(e),void 0,eY),eX=e=>eq.parse(String(e),void 0,eq.parseNumberAndBigInt),eJ=(e,t,r,n)=>eq.stringify(e,t,r,n),eQ=class{async wait(){return this.delayPromise&&this.delayPromiseResolve||(this.delayPromise=new Promise(e=>{this.delayPromiseResolve=e})),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout(()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)},this.interval),this.delayPromise}addPendingRequest(e,t,r){let n={id:null!=r?r:"batched_".concat(this.requestId+=1),jsonrpc:"2.0",method:e,params:null!=t?t:void 0};return this.pendingRequests[n.id]=n,n.id}async sendBatch(e){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:eJ(e),headers:this.headers})).json()}async fetch(e,t,r){let n=this.addPendingRequest(e,t,r);await this.wait();let a=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[n]){let e=this.sendBatch(Object.values(a));Object.keys(a).forEach(t=>{this.batchPromises[t]=e})}let i=await this.batchPromises[n];delete this.batchPromises[n];let o=i.find(e=>e.id===n);if(!o)throw Error("Couldn't find the result for the request. Method: ".concat(e));return o}constructor(e){l._(this,"nodeUrl",void 0),l._(this,"headers",void 0),l._(this,"interval",void 0),l._(this,"requestId",0),l._(this,"pendingRequests",{}),l._(this,"batchPromises",{}),l._(this,"delayTimer",void 0),l._(this,"delayPromise",void 0),l._(this,"delayPromiseResolve",void 0),l._(this,"baseFetch",void 0),this.nodeUrl=e.nodeUrl,this.headers=e.headers,this.interval=e.interval,this.baseFetch=e.baseFetch}};function e$(e,t){if(!e)throw Error(t||"Assertion failure")}function e0(e,t){if(!e)if(0===t.length)t();else throw Error("AssertionX failure: message function should not require arguments")}var e1={};m(e1,{addPercent:()=>tb,assertInRange:()=>tl,bigNumberishArrayToDecimalStringArray:()=>tu,bigNumberishArrayToHexadecimalStringArray:()=>td,cleanHex:()=>tc,getDecimalString:()=>tf,getHexString:()=>tp,getHexStringArray:()=>tg,hexToBytes:()=>ty,hexToDecimalString:()=>ts,isBigNumberish:()=>t_,isHex:()=>te,isStringWholeNumber:()=>th,stringToSha256ToArrayBuff4:()=>tw,toBigInt:()=>tt,toCairoBool:()=>tm,toHex:()=>tn,toHex64:()=>to,toHexString:()=>ta,toStorageKey:()=>ti,tryToBigInt:()=>tr});var e2=e.r(771952),e3=e.r(171249),e5=e=>void 0===e||void 0===e;function e6(e){return"number"==typeof e}function e8(e){return"boolean"==typeof e}function e4(e){return"bigint"==typeof e}function e7(e){return"string"==typeof e}function e9(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function te(e){return/^0x[0-9a-f]*$/i.test(e)}function tt(e){return BigInt(e)}function tr(e){return e?BigInt(e):void 0}function tn(e){return D(tt(e).toString(16))}var ta=tn;function ti(e){return D(tt(e).toString(16).padStart(64,"0"))}function to(e){let t=D(tt(e).toString(16).padStart(64,"0"));if(66!==t.length)throw TypeError("number is too big for hex 0x(64) representation");return t}function ts(e){return BigInt(D(e)).toString(10)}function tc(e){return e.toLowerCase().replace(/^(0x)0+/,"$1")}function tl(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=BigInt(e),i=BigInt(t),o=BigInt(r);e$(a>=i&&a<=o,"Message not signable, ".concat(""===n?"invalid length":"invalid ".concat(n," length"),"."))}function tu(e){return e.map(e=>tt(e).toString(10))}function td(e){return e.map(e=>tn(e))}function th(e){return/^\d+$/.test(e)}function tf(e){if(te(e))return ts(e);if(th(e))return e;throw Error("".concat(e," needs to be a hex-string or whole-number-string"))}function tp(e){if(te(e))return e;if(th(e))return ta(e);throw Error("".concat(e," needs to be a hex-string or whole-number-string"))}function tg(e){return e.map(tp)}function tm(e){return(+e).toString()}function ty(e){if(!te(e))throw Error("".concat(e," needs to be a hex-string"));let t=R(e);return t.length%2!=0&&(t="0".concat(t)),(0,e2.hexToBytes)(t)}function tb(e,t){let r=BigInt(e);return r+r*BigInt(t)/100n}function tw(e){return ty(tn(Number(BigInt(D(N((0,e3.sha256)(e))))&K)))}function t_(e){return e6(e)||e4(e)||e7(e)&&(te(e)||th(e))}var tv={};m(tv,{getL1MessageHash:()=>tO,getL2MessageHash:()=>tC,getSelector:()=>tB,getSelectorFromName:()=>tA,keccakBn:()=>tk,solidityUint256PackedKeccak256:()=>tI,starknetKeccak:()=>tT});var tE=e.r(302633),tS=e.r(477818),tx=e.r(771952);function tk(e){let t=R(tn(BigInt(e))),r=t.length%2==0?t:"0".concat(t);return D((0,tE.keccak)(ty(D(r))).toString(16))}function tT(e){return BigInt(D((0,tE.keccak)(C(e)).toString(16)))&G}function tA(e){return tn(tT(e))}function tB(e){return e6(e)||e4(e)?tn(e):te(e)?e:th(e)?tn(e):tA(e)}function tI(e){let t=D(e.reduce((e,t)=>e+R(tn(t)).padStart(64,"0"),""));return D((0,tx.bytesToHex)((0,tS.keccak_256)(ty(t))))}function tC(e,t,r,n,a){return tI([e,t,a,r,n.length,...n])}function tO(e,t,r){return tI([e,t,r.length,...r])}var tP={};function tN(e){return/^[\x00-\x7F]*$/.test(e)}function tR(e){return e.length<=j}function tD(e){return/^[0-9]*$/i.test(e)}function tL(e){return e7(e)&&!te(e)&&!th(e)}m(tP,{decodeShortString:()=>tM,encodeShortString:()=>tV,isASCII:()=>tN,isDecimalString:()=>tD,isLongText:()=>tU,isShortString:()=>tR,isShortText:()=>tH,isText:()=>tL,splitLongString:()=>tF});var tH=e=>tL(e)&&tR(e),tU=e=>tL(e)&&!tR(e);function tF(e){let t=RegExp("[^]{1,".concat(j,"}"),"g");return e.match(t)||[]}function tV(e){if(!tN(e))throw Error("".concat(e," is not an ASCII string"));if(!tR(e))throw Error("".concat(e," is too long"));return D(e.replace(/./g,e=>e.charCodeAt(0).toString(16)))}function tM(e){if(!tN(e))throw Error("".concat(e," is not an ASCII string"));if(te(e))return R(e).replace(/.{2}/g,e=>String.fromCharCode(parseInt(e,16)));if(tD(e))return tM("0X".concat(BigInt(e).toString(16)));throw Error("".concat(e," is not Hex or decimal"))}var tj={};function tz(e){let t=0n===BigInt(e.pending_word)?"":tM(tn(e.pending_word));return e.data.reduce((e,t)=>e+(0n===BigInt(t)?"":tM(tn(t))),"")+t}function tW(e){let t=tF(e),r=t[t.length-1],n=t.map(tV),[a,i]=void 0===r||31===r.length?["0x00",0]:[n.pop(),r.length];return{data:0===n.length?[]:n,pending_word:a,pending_word_len:i}}m(tj,{byteArrayFromString:()=>tW,stringFromByteArray:()=>tz});var tG={};function tK(e){if(e4(e)||Number.isInteger(e))return e.toString();if(e7(e)){if(te(e))return BigInt(e).toString();if(tL(e)){if(!tR(e))throw Error("".concat(e," is a long string > 31 chars. Please split it into an array of short strings."));return BigInt(tV(e)).toString()}if(th(e))return e}if(e8(e))return"".concat(+e);throw Error("".concat(e," can't be computed by felt()"))}m(tG,{felt:()=>rE,getAbiContractVersion:()=>rb,getArrayType:()=>rg,isCairo1Abi:()=>rm,isCairo1Type:()=>rp,isLen:()=>t6,isTypeArray:()=>t4,isTypeBool:()=>rs,isTypeByteArray:()=>rd,isTypeBytes31:()=>ru,isTypeContractAddress:()=>rc,isTypeEnum:()=>rt,isTypeEthAddress:()=>rl,isTypeFelt:()=>t8,isTypeLiteral:()=>ro,isTypeNamedTuple:()=>t9,isTypeNonZero:()=>ry,isTypeOption:()=>rr,isTypeResult:()=>rn,isTypeSecp256k1Point:()=>rf,isTypeStruct:()=>re,isTypeTuple:()=>t7,isTypeU96:()=>rh,isTypeUint:()=>ra,isTypeUint256:()=>ri,tuple:()=>rv,uint256:()=>rw,uint512:()=>r_});var tq=(1n<<128n)-1n,tY=(1n<<256n)-1n,tZ=0n,tX=0xffffffffffffffffffffffffffffffffn,tJ=0xffffffffffffffffffffffffffffffffn,tQ=0n,t$=0n,t0=(i=class e{static validate(e){let t=BigInt(e);if(t<tZ)throw Error("bigNumberish is smaller than UINT_256_MIN");if(t>tY)throw Error("bigNumberish is bigger than UINT_256_MAX");return t}static validateProps(e,t){let r=BigInt(e),n=BigInt(t);if(r<tQ||r>tX)throw Error("low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX");if(n<t$||n>tJ)throw Error("high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX");return{low:r,high:n}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:D(this.low.toString(16)),high:D(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[tK(this.low),tK(this.high)]}constructor(...t){if(l._(this,"low",void 0),l._(this,"high",void 0),"object"==typeof t[0]&&1===t.length&&"low"in t[0]&&"high"in t[0]){let r=e.validateProps(t[0].low,t[0].high);this.low=r.low,this.high=r.high}else if(1===t.length){let r=e.validate(t[0]);this.low=r&tq,this.high=r>>128n}else if(2===t.length){let r=e.validateProps(t[0],t[1]);this.low=r.low,this.high=r.high}else throw Error("Incorrect constructor parameters")}},l._(i,"abiSelector","core::integer::u256"),i),t1=(1n<<512n)-1n,t2=0n,t3=0n,t5=(o=class e{static validate(e){let t=BigInt(e);if(t<t2)throw Error("bigNumberish is smaller than UINT_512_MIN.");if(t>t1)throw Error("bigNumberish is bigger than UINT_512_MAX.");return t}static validateProps(e,t,r,n){let a=BigInt(e),i=BigInt(t),o=BigInt(r),s=BigInt(n);return[a,i,o,s].forEach((e,t)=>{if(e<t3||e>tq)throw Error("limb".concat(t," is not in the range of a u128 number"))}),{limb0:a,limb1:i,limb2:o,limb3:s}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:D(this.limb0.toString(16)),limb1:D(this.limb1.toString(16)),limb2:D(this.limb2.toString(16)),limb3:D(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[tK(this.limb0),tK(this.limb1),tK(this.limb2),tK(this.limb3)]}constructor(...t){if(l._(this,"limb0",void 0),l._(this,"limb1",void 0),l._(this,"limb2",void 0),l._(this,"limb3",void 0),"object"==typeof t[0]&&1===t.length&&"limb0"in t[0]&&"limb1"in t[0]&&"limb2"in t[0]&&"limb3"in t[0]){let r=e.validateProps(t[0].limb0,t[0].limb1,t[0].limb2,t[0].limb3);this.limb0=r.limb0,this.limb1=r.limb1,this.limb2=r.limb2,this.limb3=r.limb3}else if(1===t.length){let r=e.validate(t[0]);this.limb0=r&tq,this.limb1=(r&tq<<128n)>>128n,this.limb2=(r&tq<<256n)>>256n,this.limb3=r>>384n}else if(4===t.length){let r=e.validateProps(t[0],t[1],t[2],t[3]);this.limb0=r.limb0,this.limb1=r.limb1,this.limb2=r.limb2,this.limb3=r.limb3}else throw Error("Incorrect Uint512 constructor parameters")}},l._(o,"abiSelector","core::integer::u512"),o),t6=e=>/_len$/.test(e),t8=e=>"felt"===e||"core::felt252"===e,t4=e=>/\*/.test(e)||e.startsWith("core::array::Array::")||e.startsWith("core::array::Span::"),t7=e=>/^\(.*\)$/i.test(e),t9=e=>/\(.*\)/i.test(e)&&e.includes(":"),re=(e,t)=>e in t,rt=(e,t)=>e in t,rr=e=>e.startsWith("core::option::Option::"),rn=e=>e.startsWith("core::result::Result::"),ra=e=>Object.values(eU).includes(e),ri=e=>t0.isAbiType(e),ro=e=>Object.values(eF).includes(e),rs=e=>"core::bool"===e,rc=e=>e===eF.ContractAddress,rl=e=>e===eV,ru=e=>"core::bytes_31::bytes31"===e,rd=e=>"core::byte_array::ByteArray"===e,rh=e=>"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"===e,rf=e=>e===eF.Secp256k1Point,rp=e=>e.includes("::"),rg=e=>rp(e)?e.substring(e.indexOf("<")+1,e.lastIndexOf(">")):e.replace("*","");function rm(e){let{cairo:t}=rb(e);if(void 0===t)throw Error("Unable to determine Cairo version");return"1"===t}function ry(e){return e.startsWith(eM)}function rb(e){if(e.find(e=>"interface"===e.type))return{cairo:"1",compiler:"2"};let t=e.find(e=>("function"===e.type||"constructor"===e.type)&&(e.inputs.length||e.outputs.length));return t?rp((t.inputs.length?t.inputs:t.outputs)[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}:{cairo:void 0,compiler:void 0}}var rw=e=>new t0(e).toUint256DecimalString(),r_=e=>new t5(e).toUint512DecimalString(),rv=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return{...t}};function rE(e){return tK(e)}var rS=class{unwrap(){return Object.values(this.variant).find(e=>!e5(e))}activeVariant(){let e=Object.entries(this.variant).find(e=>!e5(e[1]));return e5(e)?"":e[0]}constructor(e){l._(this,"variant",void 0);let t=Object.values(e);if(0===t.length)throw Error("This Enum must have at least 1 variant");if(1!==t.filter(e=>!e5(e)).length)throw Error("This Enum must have exactly one active variant");this.variant=e}},rx={Some:0,None:1},rk=class{unwrap(){return this.None?void 0:this.Some}isSome(){return!e5(this.Some)}isNone(){return!0===this.None}constructor(e,t){if(l._(this,"Some",void 0),l._(this,"None",void 0),!(e in Object.values(rx)))throw Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(e===rx.Some){if(e5(t))throw Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=t,this.None=void 0}else this.Some=void 0,this.None=!0}},rT={Ok:0,Err:1},rA=class{unwrap(){if(!e5(this.Ok))return this.Ok;if(!e5(this.Err))return this.Err;throw Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!e5(this.Ok)}isErr(){return!e5(this.Err)}constructor(e,t){if(l._(this,"Ok",void 0),l._(this,"Err",void 0),!(e in Object.values(rT)))throw Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");e===rT.Ok?(this.Ok=t,this.Err=void 0):(this.Ok=void 0,this.Err=t)}},rB={isBN:(e,t,r)=>{if(!e4(e[r]))throw Error("Data and formatter mismatch on ".concat(r,":").concat(t[r],", expected response data ").concat(r,":").concat(e[r]," to be BN instead it is ").concat(typeof e[r]))},unknown:(e,t,r)=>{throw Error("Unhandled formatter type on ".concat(r,":").concat(t[r]," for data ").concat(r,":").concat(e[r]))}},rI=class{methodInputsLength(e){return e.inputs.reduce((e,t)=>t6(t.name)?e:e+1,0)}getMethod(e){return this.abi.find(t=>t.name===e)}getLegacyFormat(){return this.abi}constructor(e){l._(this,"abi",void 0),this.abi=e}},rC=class{methodInputsLength(e){return e.inputs.length}getMethod(e){var t;let r=this.abi.find(e=>"interface"===e.type);return null==r||null==(t=r.items)?void 0:t.find(t=>t.name===e)}getLegacyFormat(){return this.abi.flatMap(e=>"interface"===e.type?e.items:e)}constructor(e){l._(this,"abi",void 0),this.abi=e}};function rO(e){var t;let r=(t=e).find(e=>"interface"===e.type)?2:+!!rm(t);if(0===r||1===r)return new rI(e);if(2===r)return new rC(e);throw Error("Unsupported ABI version ".concat(r))}function rP(e,t,r){return"constructor"===e&&!r&&!t.length}function rN(e,t,r){for(let n=0,a=0;n<e.length;n++)if(e[n]===t)a++;else if(e[n]===r&&0==--a)return n;return 1/0}function rR(e){return rp(e)?function(e){let t,r=e.slice(1,-1),n=[],a=0;for(;a<r.length;){switch(!0){case"("===r[a]:t=a+rN(r.slice(a),"(",")")+1;break;case r.startsWith("core::result::Result::<",a)||r.startsWith("core::array::Array::<",a)||r.startsWith("core::option::Option::<",a):t=a+rN(r.slice(a),"<",">")+1;break;default:{let e=r.indexOf(",",a);t=-1!==e?e:1/0}}n.push(r.slice(a,t)),a=t+2}return n}(e):function(e){let{subTuple:t,result:r}=function(e){if(!e.includes("("))return{subTuple:[],result:e};let t=[],r="",n=0;for(;n<e.length;){if("("===e[n]){let a=1,i=n;for(n++;a;)")"===e[n]&&a--,"("===e[n]&&a++,n++;t.push(e.substring(i,n)),r+=" ",n--}else r+=e[n];n++}return{subTuple:t,result:r}}(e.replace(/\s/g,"").slice(1,-1)),n=r.split(",").map(e=>t.length?e.replace(" ",t.shift()):e);return t9(e)&&(n=n.reduce((e,t)=>e.concat(function(e){let t=e.substring(0,e.indexOf(":")),r=e.substring(t.length+1);return{name:t,type:r}}(t)),[])),n}(e)}var rD=(s=class e{static getFixedArraySize(e){let t=e.match(RegExp("(?<=; )\\d+(?=\\])"));if(null===t)throw Error("ABI type ".concat(e," do not includes a valid number after ';' character."));return Number(t[0])}getFixedArraySize(){return e.getFixedArraySize(this.arrayType)}getFixedArrayType(){return e.getFixedArrayType(this.arrayType)}static compile(e){return e.reduce((e,t,r)=>(e[r]=t,e),{})}compile(){return e.compile(this.content)}static isTypeFixedArray(e){return/^\[.*;\s.*\]$/.test(e)&&RegExp("(?<=\\[).+(?=;)").test(e)&&RegExp("(?<=; )\\d+(?=\\])").test(e)}constructor(t,r){l._(this,"content",void 0),l._(this,"arrayType",void 0),e$(e.isTypeFixedArray(r),"The type ".concat(r," is not a Cairo fixed array. Needs [type; length]."));try{e.getFixedArrayType(r)}catch(e){throw Error("The type ".concat(r," do not includes any content type. Needs [type; length]."))}try{e.getFixedArraySize(r)}catch(e){throw Error("The type ".concat(r," type do not includes any length. Needs [type; length]."))}e$(e.getFixedArraySize(r)===t.length,"The ABI type ".concat(r," is expecting ").concat(e.getFixedArraySize(r)," items. ").concat(t.length," items provided.")),this.content=t,this.arrayType=r}},l._(s,"getFixedArrayType",e=>{let t=e.match(RegExp("(?<=\\[).+(?=;)"));if(null===t)throw Error("ABI type ".concat(e," do not includes a valid type of data."));return t[0]}),s);function rL(e,t){switch(!0){case t0.isAbiType(e):return new t0(t).toApiRequest();case t5.isAbiType(e):return new t5(t).toApiRequest();case ru(e):return tV(t.toString());case rf(e):{let e=R(tn(t)).padStart(128,"0"),r=rw(D(e.slice(-64))),n=rw(D(e.slice(0,-64)));return[tK(n.low),tK(n.high),tK(r.low),tK(r.high)]}default:return tK(t)}}function rH(e,t,r,n){if(void 0===e)throw Error("Missing parameter for type ".concat(t));if(rD.isTypeFixedArray(t)){let a=rD.getFixedArrayType(t),i=[];if(Array.isArray(e))i=new rD(e,t).content;else if("object"==typeof e)e$((i=Object.values(e)).length===rD.getFixedArraySize(t),"ABI type ".concat(t,": object provided do not includes  ").concat(rD.getFixedArraySize(t)," items. ").concat(i.length," items provided."));else throw Error("ABI type ".concat(t,": not an Array representing a cairo.fixedArray() provided."));return i.reduce((e,t)=>e.concat(rH(t,a,r,n)),[])}if(Array.isArray(e)){let a=[];a.push(tK(e.length));let i=rg(t);return e.reduce((e,t)=>e.concat(rH(t,i,r,n)),a)}if(r[t]&&r[t].members.length){if(t0.isAbiType(t))return new t0(e).toApiRequest();if(t5.isAbiType(t))return new t5(e).toApiRequest();if(rl(t))return rL(t,e);if(rd(t)){let t=tW(e);return[t.data.length.toString(),...t.data.map(e=>e.toString()),t.pending_word.toString(),t.pending_word_len.toString()]}let{members:a}=r[t];return a.reduce((t,a)=>t.concat(rH(e[a.name],a.type,r,n)),[])}if(t7(t))return(function(e,t){let r=rR(t),n=Object.values(e);if(n.length!==r.length)throw Error("ParseTuple: provided and expected abi tuple size do not match.\n      provided: ".concat(n,"\n      expected: ").concat(r));return r.map((e,t)=>{var r;return{element:n[t],type:null!=(r=e.type)?r:e}})})(e,t).reduce((e,t)=>{let a=rH(t.element,t.type,r,n);return e.concat(a)},[]);if(t0.isAbiType(t))return new t0(e).toApiRequest();if(t5.isAbiType(t))return new t5(e).toApiRequest();if(rt(t,n)){let{variants:a}=n[t];if(rr(t)){if(e.isSome()){let t=a.find(e=>"Some"===e.name);if(e5(t))throw Error("Error in abi : Option has no 'Some' variant.");let i=t.type;if("()"===i)return rx.Some.toString();let o=rH(e.unwrap(),i,r,n);return Array.isArray(o)?[rx.Some.toString(),...o]:[rx.Some.toString(),o]}return rx.None.toString()}if(rn(t)){if(e.isOk()){let t=a.find(e=>"Ok"===e.name);if(e5(t))throw Error("Error in abi : Result has no 'Ok' variant.");let i=t.type;if("()"===i)return rT.Ok.toString();let o=rH(e.unwrap(),i,r,n);return Array.isArray(o)?[rT.Ok.toString(),...o]:[rT.Ok.toString(),o]}let t=a.find(e=>"Err"===e.name);if(e5(t))throw Error("Error in abi : Result has no 'Err' variant.");let i=t.type;if("()"===i)return rT.Err.toString();let o=rH(e.unwrap(),i,r,n);return Array.isArray(o)?[rT.Err.toString(),...o]:[rT.Err.toString(),o]}let i=e.activeVariant(),o=a.find(e=>e.name===i);if(e5(o))throw Error("Not find in abi : Enum has no '".concat(i,"' variant."));let s=o.type,c=a.findIndex(e=>e.name===i);if("()"===s)return c.toString();let l=rH(e.unwrap(),s,r,n);return Array.isArray(l)?[c.toString(),...l]:[c.toString(),l]}if(ry(t))return rL(rg(t),e);if("object"==typeof e)throw Error("Parameter ".concat(e," do not align with abi parameter ").concat(t));return rL(t,e)}function rU(e,t,r,n){let{name:a,type:i}=t,{value:o}=e.next();switch(!0){case rD.isTypeFixedArray(i):if(!Array.isArray(o)&&"object"!=typeof o)throw Error("ABI expected parameter ".concat(a," to be an array or an object, got ").concat(o));return rH(o,t.type,r,n);case t4(i):if(!Array.isArray(o)&&!tL(o))throw Error("ABI expected parameter ".concat(a," to be array or long string, got ").concat(o));return e7(o)&&(o=tF(o)),rH(o,t.type,r,n);case ry(i):return rL(rg(i),o);case rl(i):return rL(i,o);case re(i,r)||t7(i)||t0.isAbiType(i):case rt(i,n):return rH(o,i,r,n);default:return rL(i,o)}}function rF(e,t){switch(!0){case rs(e):return!!BigInt(t.next().value);case t0.isAbiType(e):return new t0(t.next().value,t.next().value).toBigInt();case t5.isAbiType(e):let r=t.next().value,n=t.next().value;return new t5(r,n,t.next().value,t.next().value).toBigInt();case rl(e):return BigInt(t.next().value);case ru(e):return tM(t.next().value);case rf(e):let a=R(t.next().value).padStart(32,"0"),i=R(t.next().value).padStart(32,"0"),o=R(t.next().value).padStart(32,"0");return BigInt(D(i+a+R(t.next().value).padStart(32,"0")+o));default:return BigInt(t.next().value)}}function rV(e,t,r,n){if("()"===t.type)return{};if(t0.isAbiType(t.type))return new t0(e.next().value,e.next().value).toBigInt();if(t5.isAbiType(t.type)){let t=e.next().value,r=e.next().value;return new t5(t,r,e.next().value,e.next().value).toBigInt()}if(rd(t.type)){let t=[],r=BigInt(e.next().value);for(;t.length<r;)t.push(tn(e.next().value));let n=tn(e.next().value);return tz({data:t,pending_word:n,pending_word_len:BigInt(e.next().value)})}if(rD.isTypeFixedArray(t.type)){let a=[],i={name:"",type:rD.getFixedArrayType(t.type)},o=rD.getFixedArraySize(t.type);for(;a.length<o;)a.push(rV(e,i,r,n));return a}if(t4(t.type)){let a=[],i={name:"",type:rg(t.type)},o=BigInt(e.next().value);for(;a.length<o;)a.push(rV(e,i,r,n));return a}if(ry(t.type))return rV(e,{name:"",type:rg(t.type)},r,n);if(r&&t.type in r&&r[t.type])return rl(t.type)?rF(t.type,e):r[t.type].members.reduce((t,a)=>(t[a.name]=rV(e,a,r,n),t),{});if(n&&t.type in n&&n[t.type]){let a=Number(e.next().value),i=n[t.type].variants.reduce((t,i,o)=>(o===a?t[i.name]=rV(e,{name:"",type:i.type},r,n):t[i.name]=void 0,t),{});if(t.type.startsWith("core::option::Option")){let e=a===rx.Some?i.Some:void 0;return new rk(a,e)}if(t.type.startsWith("core::result::Result")){let e;return e=a===rT.Ok?i.Ok:i.Err,new rA(a,e)}return new rS(i)}if(t7(t.type))return rR(t.type).reduce((t,a,i)=>{let o=(null==a?void 0:a.name)?a.name:i,s=(null==a?void 0:a.type)?a.type:a;return t[o]=rV(e,{name:o,type:s},r,n),t},{});if(t4(t.type)){let a=[],i={name:"",type:rg(t.type)},o=BigInt(e.next().value);for(;a.length<o;)a.push(rV(e,i,r,n));return a}return rF(t.type,e)}function rM(e,t,r,n,a){let{name:i,type:o}=t;switch(!0){case t6(i):return BigInt(e.next().value);case r&&o in r||t7(o):case n&&rt(o,n):case rD.isTypeFixedArray(o):return rV(e,t,r,n);case t4(o):if(rp(o))return rV(e,t,r,n);let s=[];if(a&&a["".concat(i,"_len")]){let o=a["".concat(i,"_len")];for(;s.length<o;)s.push(rV(e,{name:i,type:t.type.replace("*","")},r,n))}return s;case ry(o):return rV(e,t,r,n);default:return rF(o,e)}}var rj=(e,t)=>{if(e$(e7(e)||e6(e)||e4(e),"Validate: arg ".concat(t.name," should be a felt typed as (String, Number or BigInt)")),e7(e)&&!te(e))return;let r=BigInt(e.toString(10));e$(r>=0n&&r<=2n**252n-1n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0, 2^252-1]"))},rz=(e,t)=>{let r;switch(e6(e)&&e$(e<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),e$(e7(e)||e6(e)||e4(e)||e9(e)&&"low"in e&&"high"in e||e9(e)&&["limb0","limb1","limb2","limb3"].every(t=>t in e),"Validate: arg ".concat(t.name," of cairo type ").concat(t.type," should be type (String, Number or BigInt), but is ").concat(typeof e," ").concat(e,".")),t.type){case eU.u256:r=new t0(e).toBigInt();break;case eU.u512:r=new t5(e).toBigInt();break;default:r=tt(e)}switch(t.type){case eU.u8:e$(r>=0n&&r<=255n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0 - 255]"));break;case eU.u16:e$(r>=0n&&r<=65535n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0, 65535]"));break;case eU.u32:e$(r>=0n&&r<=4294967295n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0, 4294967295]"));break;case eU.u64:e$(r>=0n&&r<=2n**64n-1n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0, 2^64-1]"));break;case eU.u128:e$(r>=0n&&r<=2n**128n-1n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0, 2^128-1]"));break;case eU.u256:e$(r>=0n&&r<=2n**256n-1n,"Validate: arg ".concat(t.name," is ").concat(t.type," should be in range 0 - 2^256-1"));break;case eU.u512:e$(t5.is(r),"Validate: arg ".concat(t.name," is ").concat(t.type," should be in range 0 - 2^512-1"));break;case eF.ClassHash:case eF.ContractAddress:e$(r>=0n&&r<=2n**252n-1n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0, 2^252-1]"));break;case eF.Secp256k1Point:e$(r>=0n&&r<=2n**512n-1n,"Validate: arg ".concat(t.name," must be ").concat(t.type," : a 512 bits number."));break;case eF.U96:e$(r>=0n&&r<=2n**96n-1n,"Validate: arg ".concat(t.name," must be ").concat(t.type," : a 96 bits number."))}},rW=(e,t)=>{e$(e8(e),"Validate: arg ".concat(t.name," of cairo type ").concat(t.type," should be type (Boolean)"))},rG=(e,t,r)=>{if(t.type===eU.u256||t.type===eU.u512)return void rz(e,t);if(rl(t.type)){e$(!e9(e),'EthAddress type is waiting a BigNumberish. Got "'.concat(e,'"'));let r=BigInt(e.toString(10));e$(r>=0n&&r<=2n**160n-1n,"Validate: arg ".concat(t.name," cairo typed ").concat(t.type," should be in range [0, 2^160-1]"));return}e$(e9(e),"Validate: arg ".concat(t.name," is cairo type struct (").concat(t.type,"), and should be defined as a js object (not array)")),r[t.type].members.forEach(r=>{let{name:n}=r;e$(Object.keys(e).includes(n),"Validate: arg ".concat(t.name," should have a property ").concat(n))})},rK=(e,t)=>{e$(e9(e),"Validate: arg ".concat(t.name," is cairo type Enum (").concat(t.type,"), and should be defined as a js object (not array)"));let r=Object.getOwnPropertyNames(Object.getPrototypeOf(e)),n=[...Object.getOwnPropertyNames(e),...r];if(!(rr(t.type)&&n.includes("isSome")&&n.includes("isNone")||rn(t.type)&&n.includes("isOk")&&n.includes("isErr"))&&!(n.includes("variant")&&n.includes("activeVariant")))throw Error("Validate Enum: argument ".concat(t.name,", type ").concat(t.type,', value received "').concat(e,'", is not an Enum.'))},rq=(e,t)=>{e$(e9(e),"Validate: arg ".concat(t.name," should be a tuple (defined as object)"))},rY=(e,t,r,n)=>{let a=t4(t.type),i=a?rg(t.type):rD.getFixedArrayType(t.type);if(a&&t8(i)&&tU(e))return;let o=[];if(a)e$(Array.isArray(e),"Validate: arg ".concat(t.name," should be an Array")),o=e;else switch(!0){case Array.isArray(e):o=e;break;case"object"==typeof e:o=Object.values(e);break;default:throw Error("Validate: arg ".concat(t.name," should be an Array or an object."))}switch(!0){case t8(i):o.forEach(e=>rj(e,t));break;case t7(i):o.forEach(e=>rq(e,{name:t.name,type:i}));break;case t4(i):o.forEach(e=>rY(e,{name:"",type:i},r,n));break;case re(i,r):o.forEach(e=>rG(e,{name:t.name,type:i},r));break;case rt(i,n):o.forEach(e=>rK(e,{name:t.name,type:i}));break;case ra(i)||ro(i):o.forEach(e=>rz(e,{name:"",type:i}));break;case rs(i):o.forEach(e=>rW(e,t));break;default:throw Error("Validate Unhandled: argument ".concat(t.name,", type ").concat(t.type,", value ").concat(o))}};function rZ(e,t,r,n){e.inputs.reduce((e,a)=>{let i=t[e];switch(!0){case t6(a.name):return e;case t8(a.type):rj(i,a);break;case ru(a.type):e$(e7(i),"Validate: arg ".concat(a.name," should be a string.")),e$(i.length<32,"Validate: arg ".concat(a.name," cairo typed ").concat(a.type," should be a string of less than 32 characters."));break;case ra(a.type)||ro(a.type):rz(i,a);break;case rs(a.type):rW(i,a);break;case rd(a.type):e$(e7(i),"Validate: arg ".concat(a.name," should be a string."));break;case t4(a.type)||rD.isTypeFixedArray(a.type):rY(i,a,r,n);break;case re(a.type,r):rG(i,a,r);break;case rt(a.type,n):rK(i,a);break;case t7(a.type):rq(i,a);break;case ry(a.type):let o=rg(a.type);switch(e$(ra(o)&&o!==t5.abiSelector||t8(o),"Validate: ".concat(a.name," type is not authorized for NonZero type.")),!0){case t8(o):rj(i,a),e$(BigInt(i.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case ra(o):rz(i,{name:"",type:o}),o===eU.u256?e$(new t0(i).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):e$(tt(i)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw Error("Validate Unhandled: argument ".concat(a.name,", type ").concat(a.type,', value "').concat(i,'"'))}break;default:throw Error("Validate Unhandled: argument ".concat(a.name,", type ").concat(a.type,", value ").concat(i))}return e+1},0)}var rX=class e{validate(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[];e!==eH.DEPLOY&&e$(this.abi.filter(t=>{if("function"!==t.type)return!1;let r="view"===t.stateMutability||"view"===t.state_mutability;return e===eH.INVOKE?!r:r}).map(e=>e.name).includes(t),"".concat(e===eH.INVOKE?"invocable":"viewable"," method not found in abi"));let n=this.abi.find(r=>e===eH.DEPLOY?r.name===t&&"constructor"===r.type:r.name===t&&"function"===r.type);if(rP(t,r,n))return;let a=this.parser.methodInputsLength(n);if(r.length!==a)throw Error("Invalid number of arguments, expected ".concat(a," arguments, but got ").concat(r.length));rZ(n,r,this.structs,this.enums)}compile(e,t){let r,n=this.abi.find(t=>t.name===e);if(rP(e,t,n))return[];Array.isArray(t)?r=t:(r=Object.values(function(e,t,r,n){let a=(e,t)=>{if(rD.isTypeFixedArray(t)){var s,c=e,l=t;let r=rD.getFixedArrayType(l),n=rD.getFixedArraySize(l);if(Array.isArray(c)){if(n!==c.length)throw Error("ABI type ".concat(l,": array provided do not includes  ").concat(n," items. ").concat(c.length," items provided."));return c.map(e=>a(e,r))}if(n!==Object.keys(c).length)throw Error("ABI type ".concat(l,": object provided do not includes  ").concat(n," properties. ").concat(Object.keys(c).length," items provided."));return a(c,r)}if(t4(t)){var u=e,d=t;let r=rg(d);return e7(u)?u:u.map(e=>a(e,r))}if(rt(t,n))return o(e,n[t]);if(t7(t)){return s=e,rR(t).reduce((e,t,r)=>{let n,i=Object.keys(s),o=(null==t?void 0:t.type)?t.type:t;return n=a(s[i[r]],o),Object.defineProperty(e,r.toString(),{enumerable:!0,value:null!=n?n:s[i[r]]}),e},{})}if(rl(t)||ry(t)||rd(t)||rh(t)||rf(t))return e;if(t0.isAbiType(t)){if("object"!=typeof e)return e;if(!("low"in e&&"high"in e))throw Error("Your object includes the property : ".concat(t,", containing an Uint256 object without the 'low' and 'high' keys."));return{low:e.low,high:e.high}}if(t5.isAbiType(t)){if("object"!=typeof e)return e;if(!["limb0","limb1","limb2","limb3"].every(t=>t in e))throw Error("Your object includes the property : ".concat(t,", containing an Uint512 object without the 'limb0' to 'limb3' keys."));return{limb0:e.limb0,limb1:e.limb1,limb2:e.limb2,limb3:e.limb3}}return re(t,r)?i(e,r[t].members):e},i=(e,t)=>t.reduce((t,r)=>{let n;if("undefined"===e[r.name]&&(rp(r.type)||!t6(r.name)))throw Error("Your object needs a property with key : ".concat(r.name," ."));return n=a(e[r.name],r.type),Object.defineProperty(t,r.name,{enumerable:!0,value:null!=n?n:e[r.name]}),t},{}),o=(e,t)=>{if(rn(t.name)){let r=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(",")),n=t.name.substring(t.name.indexOf(",")+1,t.name.lastIndexOf(">"));return e.isOk()?new rA(rT.Ok,a(e.unwrap(),r)):new rA(rT.Err,a(e.unwrap(),n))}if(rr(t.name)){let r=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(">"));return e.isSome()?new rk(rx.Some,a(e.unwrap(),r)):new rk(rx.None,{})}return new rS(Object.fromEntries(Object.entries(e.variant).map(r=>{if(e5(r[1]))return r;let n=t.type.substring(t.type.lastIndexOf("<")+1,t.type.lastIndexOf(">"));return"()"===n?r:[r[0],a(e.unwrap(),n)]})))};return t.reduce((t,r)=>{let n;return t6(r.name)&&!rp(r.type)?t:(n=a(e[r.name],r.type),Object.defineProperty(t,r.name,{enumerable:!0,value:n}),t)},{})}(t,n.inputs,this.structs,this.enums)),rZ(n,r,this.structs,this.enums));let a=r[Symbol.iterator](),i=n.inputs.reduce((e,t)=>t6(t.name)&&!rp(t.type)?e:e.concat(rU(a,t,this.structs,this.enums)),[]);return Object.defineProperty(i,"__compiled__",{enumerable:!1,writable:!1,value:!0}),i}static compile(e){let t,r=e=>{let t=function(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".",n=Array.isArray(e)?[e.length.toString(),...e]:e;return Object.entries(n).flatMap(e=>{let[a,i]=e,o=i;"entrypoint"===a?o=tA(o):tU(o)&&(o=tW(o));let s=Array.isArray(n)&&"0"===a?"$$len":a;if(e4(o))return[["".concat(r).concat(s),tK(o)]];if(Object(o)===o){let e=Object.getOwnPropertyNames(Object.getPrototypeOf(o)),n=[...Object.getOwnPropertyNames(o),...e];if(n.includes("isSome")&&n.includes("isNone")){let e=o,n=e.isSome()?rx.Some:rx.None;return e.isSome()?t({0:n,1:e.unwrap()},"".concat(r).concat(s,".")):[["".concat(r).concat(s),tK(n)]]}if(n.includes("isOk")&&n.includes("isErr")){let e=o;return t({0:e.isOk()?rT.Ok:rT.Err,1:e.unwrap()},"".concat(r).concat(s,"."))}if(n.includes("variant")&&n.includes("activeVariant")){let e=o,n=e.activeVariant(),a=Object.keys(e.variant).findIndex(e=>e===n);return"object"==typeof e.unwrap()&&0===Object.keys(e.unwrap()).length?[["".concat(r).concat(s),tK(a)]]:t({0:a,1:e.unwrap()},"".concat(r).concat(s,"."))}return t(o,"".concat(r).concat(s,"."))}return[["".concat(r).concat(s),tK(o)]]})};return Object.fromEntries(t(e))};return Object.defineProperty(t=Array.isArray(e)?Object.values(r({...e})):Object.values(r(e)),"__compiled__",{enumerable:!1,writable:!1,value:!0}),t}parse(e,t){let{outputs:r}=this.abi.find(t=>t.name===e),n=t.flat()[Symbol.iterator](),a=r.flat().reduce((e,t,r)=>{var a;let i=null!=(a=t.name)?a:r;return e[i]=rM(n,t,this.structs,this.enums,e),e[i]&&e["".concat(i,"_len")]&&delete e["".concat(i,"_len")],e},{});return 1===Object.keys(a).length&&0 in a?a[0]:a}format(e,t,r){return function e(t,r,n){return Object.entries(t).reduce((a,i)=>{let[o,s]=i,c=null!=n?n:r[o];if(!(o in r)&&!n)return a[o]=s,a;if("string"===c){if(Array.isArray(t[o])){let r=e(t[o],t[o].map(e=>c));return a[o]=Object.values(r).join(""),a}return rB.isBN(t,r,o),a[o]=tM(s),a}if("number"===c)return rB.isBN(t,r,o),a[o]=Number(s),a;if("function"==typeof c)return a[o]=c(s),a;if(Array.isArray(c)){let r=e(t[o],c,c[0]);return a[o]=Object.values(r),a}return e9(c)?a[o]=e(t[o],c):rB.unknown(t,r,o),a},{})}(this.parse(e,t),r)}static getAbiStruct(e){return e.filter(e=>"struct"===e.type).reduce((e,t)=>({...e,[t.name]:t}),{})}static getAbiEnum(e){let t=e.filter(e=>"enum"===e.type).reduce((e,t)=>({...e,[t.name]:t}),{});return delete t["core::bool"],t}static toCalldata(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.compile(t)}static toHex(){let t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return e.compile(t).map(e=>tn(e))}decodeParameters(e,t){let r=Array.isArray(e)?e:[e],n=t.flat()[Symbol.iterator](),a=r.map(e=>rM(n,{name:"",type:e},this.structs,this.enums));return 1===a.length?a[0]:a}constructor(t){l._(this,"abi",void 0),l._(this,"parser",void 0),l._(this,"structs",void 0),l._(this,"enums",void 0),this.structs=e.getAbiStruct(t),this.enums=e.getAbiEnum(t),this.parser=rO(t),this.abi=this.parser.getLegacyFormat()}},rJ={};m(rJ,{calculateContractAddressFromHash:()=>nk,calculateDeclareTransactionHash:()=>ny,calculateDeployAccountTransactionHash:()=>nb,calculateInvokeTransactionHash:()=>nm,calculateL2MessageTxHash:()=>r7,computeCompiledClassHash:()=>nP,computeContractClassHash:()=>nD,computeHashOnElements:()=>nE,computeHintedClassHash:()=>nB,computeLegacyContractClassHash:()=>nI,computePedersenHash:()=>n_,computePedersenHashOnElements:()=>nS,computePoseidonHash:()=>nv,computePoseidonHashOnElements:()=>nx,computeSierraContractClassHash:()=>nR,formatSpaces:()=>nA,getL1MessageHash:()=>tO,getL2MessageHash:()=>tC,getSelector:()=>tB,getSelectorFromName:()=>tA,hashByteCodeSegments:()=>nO,keccakBn:()=>tk,poseidon:()=>rQ,solidityUint256PackedKeccak256:()=>tI,starknetKeccak:()=>tT});var rQ=b(e.r(118476)),r$={};m(r$,{calculateDeclareTransactionHash:()=>r6,calculateDeployAccountTransactionHash:()=>r8,calculateL2MessageTxHash:()=>r7,calculateTransactionHash:()=>r4,calculateTransactionHashCommon:()=>r5,computeHashOnElements:()=>r3});var r0={};m(r0,{starkCurve:()=>r1,weierstrass:()=>r2});var r1=b(e.r(302633)),r2=b(e.r(605744));function r3(e){return[...e,e.length].reduce((e,t)=>r1.pedersen(tt(e),tt(t)),0).toString()}function r5(e,t,r,n,a,i,o){let s=arguments.length>7&&void 0!==arguments[7]?arguments[7]:[],c=[e,t,r,n,r3(a),i,o,...s];return r3(c)}function r6(e,t,r,n,a,i,o){return r5(eu.DECLARE,r,t,0,[e],n,a,[i,...o?[o]:[]])}function r8(e,t,r,n,a,i,o,s){let c=[t,n,...r];return r5(eu.DEPLOY_ACCOUNT,a,e,0,c,i,o,[s])}function r4(e,t,r,n,a,i){return r5(eu.INVOKE,t,e,0,r,n,a,[i])}function r7(e,t,r,n,a,i){let o=[e,...n];return r5(eu.L1_HANDLER,0,t,tB(r),o,0,a,[i])}var r9={};m(r9,{calculateDeclareTransactionHash:()=>np,calculateDeployAccountTransactionHash:()=>nf,calculateInvokeTransactionHash:()=>ng,calculateTransactionHashCommon:()=>nh,encodeDataResourceBoundsL1:()=>nl,encodeResourceBoundsL1:()=>ns,encodeResourceBoundsL2:()=>nc,hashDAMode:()=>no,hashFeeField:()=>nu,hashFeeFieldV3B3:()=>nd});var ne=e.r(302633),nt=e=>e.map(e=>BigInt(e)),nr=64n+128n,nn=BigInt(tV("L1_GAS")),na=BigInt(tV("L2_GAS")),ni=BigInt(tV("L1_DATA"));function no(e,t){return(BigInt(e)<<32n)+BigInt(t)}function ns(e){return(nn<<nr)+(BigInt(e.l1_gas.max_amount)<<128n)+BigInt(e.l1_gas.max_price_per_unit)}function nc(e){return(na<<nr)+(BigInt(e.l2_gas.max_amount)<<128n)+BigInt(e.l2_gas.max_price_per_unit)}function nl(e){return(ni<<nr)+(BigInt(e.l1_data_gas.max_amount)<<128n)+BigInt(e.l1_data_gas.max_price_per_unit)}function nu(e,t){let r=ns(t),n=nc(t);return(0,ne.poseidonHashMany)([BigInt(e),r,n])}function nd(e,t){let r=ns(t),n=nc(t),a=nl(t);return(0,ne.poseidonHashMany)([BigInt(e),r,n,a])}function nh(e,t,r,n,a,i,o,s,c,l){let u=arguments.length>10&&void 0!==arguments[10]?arguments[10]:[],d=eR(l)?nd(i,l):nu(i,l),h=no(s,c),f=nt([e,t,r,d,(0,ne.poseidonHashMany)(nt(o)),n,a,h,...nt(u)]);return tn((0,ne.poseidonHashMany)(f))}function nf(e,t,r,n,a,i,o,s,c,l,u,d){return nh(eu.DEPLOY_ACCOUNT,a,e,i,o,u,d,s,c,l,[(0,ne.poseidonHashMany)(nt(r)),t,n])}function np(e,t,r,n,a,i,o,s,c,l,u,d){return nh(eu.DECLARE,n,r,a,i,u,nt(d),s,c,l,[(0,ne.poseidonHashMany)(nt(o)),e,t])}function ng(e,t,r,n,a,i,o,s,c,l,u){return nh(eu.INVOKE,t,e,n,a,l,u,o,s,c,[(0,ne.poseidonHashMany)(nt(i)),(0,ne.poseidonHashMany)(nt(r))])}function nm(e){return[v.ETransactionVersion.V3,v.ETransactionVersion.F3].includes(e.version)?ng(e.senderAddress,e.version,e.compiledCalldata,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):r4(e.senderAddress,e.version,e.compiledCalldata,e.maxFee,e.chainId,e.nonce)}function ny(e){return[v.ETransactionVersion.V3,v.ETransactionVersion.F3].includes(e.version)?np(e.classHash,e.compiledClassHash,e.senderAddress,e.version,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):r6(e.classHash,e.senderAddress,e.version,e.maxFee,e.chainId,e.nonce,e.compiledClassHash)}function nb(e){return[v.ETransactionVersion.V3,v.ETransactionVersion.F3].includes(e.version)?nf(e.contractAddress,e.classHash,e.compiledConstructorCalldata,e.salt,e.version,e.chainId,e.nonce,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):r8(e.contractAddress,e.classHash,e.constructorCalldata,e.salt,e.version,e.maxFee,e.chainId,e.nonce)}var nw=e.r(302633);function n_(e,t){return r1.pedersen(BigInt(e),BigInt(t))}function nv(e,t){return tn(r1.poseidonHash(BigInt(e),BigInt(t)))}function nE(e){return[...e,e.length].reduce((e,t)=>r1.pedersen(BigInt(e),BigInt(t)),0).toString()}var nS=nE;function nx(e){return tn((0,nw.poseidonHashMany)(e.map(e=>BigInt(e))))}function nk(e,t,r,n){let a=nE(rX.compile(r));return tn(BigInt(nE([tK("0x535441524b4e45545f434f4e54524143545f41444452455353"),n,e,t,a]))%X)}function nT(e,t){return"attributes"===e||"accessible_scopes"===e?Array.isArray(t)&&0===t.length?void 0:t:"debug_info"===e?null:null===t?void 0:t}function nA(e){let t=!1,r=[];for(let n of e)'"'===n&&!1==(r.length>0&&"\\"===r.slice(-1)[0])&&(t=!t),t?r.push(n):r.push(":"===n?": ":","===n?", ":n);return r.join("")}function nB(e){let{abi:t,program:r}=e,n=nA(eJ({abi:t,program:r},nT));return D(r1.keccak(C(n)).toString(16))}function nI(e){let t=e7(e)?eZ(e):e,r=tn(q),n=nE(t.entry_points_by_type.EXTERNAL.flatMap(e=>[e.selector,e.offset])),a=nE(t.entry_points_by_type.L1_HANDLER.flatMap(e=>[e.selector,e.offset])),i=nE(t.entry_points_by_type.CONSTRUCTOR.flatMap(e=>[e.selector,e.offset])),o=nE(t.program.builtins.map(e=>tV(e))),s=nB(t),c=nE(t.program.data);return nE([r,n,a,i,o,s,c])}function nC(e){let t=e.flatMap(e=>{var t;return[BigInt(e.selector),BigInt(e.offset),(t=e.builtins,(0,nw.poseidonHashMany)(t.flatMap(e=>BigInt(tV(e)))))]});return(0,nw.poseidonHashMany)(t)}function nO(e){var t;let r=e.bytecode.map(e=>BigInt(e)),n=null!=(t=e.bytecode_segment_lengths)?t:[],a=0,i=n.flatMap(e=>{let t=r.slice(a,a+=e);return[BigInt(e),(0,nw.poseidonHashMany)(t)]});return 1n+(0,nw.poseidonHashMany)(i)}function nP(e){let t=BigInt(tV("COMPILED_CLASS_V1")),r=nC(e.entry_points_by_type.EXTERNAL),n=nC(e.entry_points_by_type.L1_HANDLER),a=nC(e.entry_points_by_type.CONSTRUCTOR),i=e.bytecode_segment_lengths?nO(e):(0,nw.poseidonHashMany)(e.bytecode.map(e=>BigInt(e)));return tn((0,nw.poseidonHashMany)([t,r,n,a,i]))}function nN(e){let t=e.flatMap(e=>[BigInt(e.selector),BigInt(e.function_idx)]);return(0,nw.poseidonHashMany)(t)}function nR(e){let t=BigInt(tV("CONTRACT_CLASS_V0.1.0")),r=nN(e.entry_points_by_type.EXTERNAL),n=nN(e.entry_points_by_type.L1_HANDLER),a=nN(e.entry_points_by_type.CONSTRUCTOR),i=function(e){let t=nA(eJ(e.abi,null));return BigInt(D(r1.keccak(C(t)).toString(16)))}(e),o=(0,nw.poseidonHashMany)(e.sierra_program.map(e=>BigInt(e)));return tn((0,nw.poseidonHashMany)([t,r,n,a,i,o]))}function nD(e){let t=e7(e)?eZ(e):e;return"sierra_program"in t?nR(t):nI(t)}var nL={};m(nL,{ZEROFee:()=>n1,compressProgram:()=>nq,decompressProgram:()=>nY,estimateFeeToBounds:()=>n0,estimatedFeeToMaxFee:()=>n$,formatSignature:()=>nX,getFullPublicKey:()=>n4,intDAM:()=>n2,randomAddress:()=>nZ,reduceV2:()=>n8,signatureToDecimalArray:()=>nJ,signatureToHexArray:()=>nQ,toFeeVersion:()=>n5,toTransactionVersion:()=>n3,v3Details:()=>n6});var nH=e.r(302633),nU=e.r(209643);function nF(e){let t=e.version?tn(e.version):eB.V3;return t===eB.V3||t===eB.F3}function nV(e,t){let r=e.split("."),n=t.split(".");return r.every((e,t)=>"*"===e||e===n[t])}function nM(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{allowAnyPatchVersion:!1};return Object.values(ed).some(r=>nV(t.allowAnyPatchVersion?nj(r):r,e))}function nj(e){let t=e.split(".");return t.length<3?e:"".concat(t[0],".").concat(t[1],".*")}function nz(e){let[t,r]=e.replace(/^v/,"").split(".");return"v".concat(t,"_").concat(r)}function nW(e){return"PENDING"===e.status}function nG(e){return!("block_hash"in e)}function nK(e){return!("block_hash"in e)}function nq(e){let t=e7(e)?e:eJ(e);return P((0,nU.gzip)(t))}function nY(e){return Array.isArray(e)?e:eZ(I((0,nU.ungzip)(O(e))))}function nZ(){let e=nH.utils.randomPrivateKey();return(0,nH.getStarkKey)(e)}function nX(e){if(!e)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(e))return e.map(e=>tn(e));try{let{r:t,s:r}=e;return[tn(t),tn(r)]}catch(e){throw Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function nJ(e){return tu(nX(e))}function nQ(e){return td(nX(e))}function n$(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:em.get("feeMarginPercentage").maxFee;return tb(e,t)}function n0(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:em.get("feeMarginPercentage").bounds,r=arguments.length>2?arguments[2]:void 0;if(e4(e))return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},...r&&nV("0.8",r)&&{l1_data_gas:{max_amount:"0x0",max_price_per_unit:"0x0"}}};if(eN(e))return{l2_gas:{max_amount:tn(tb(e.l2_gas_consumed,t.l2_gas.max_amount)),max_price_per_unit:tn(tb(e.l2_gas_price,t.l2_gas.max_price_per_unit))},l1_gas:{max_amount:tn(tb(e.l1_gas_consumed,t.l1_gas.max_amount)),max_price_per_unit:tn(tb(e.l1_gas_price,t.l1_gas.max_price_per_unit))},l1_data_gas:{max_amount:tn(tb(e.l1_data_gas_consumed,t.l1_data_gas.max_amount)),max_price_per_unit:tn(tb(e.l1_data_gas_price,t.l1_data_gas.max_price_per_unit))}};return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:void 0!==e.data_gas_consumed&&void 0!==e.data_gas_price?tn(tb(BigInt(e.overall_fee)/BigInt(e.gas_price),t.l1_gas.max_amount)):tn(tb(e.gas_consumed,t.l1_gas.max_amount)),max_price_per_unit:tn(tb(e.gas_price,t.l1_gas.max_price_per_unit))}}}function n1(e){return{l1_gas_consumed:0n,l1_gas_price:0n,l1_data_gas_consumed:0n,l1_data_gas_price:0n,l2_gas_consumed:0n,l2_gas_price:0n,overall_fee:W,unit:"FRI",suggestedMaxFee:W,resourceBounds:n0(W,void 0,e)}}function n2(e){if(e===eO.L1)return eP.L1;if(e===eO.L2)return eP.L2;throw Error("EDAM conversion")}function n3(e,t){let r=t?tn(t):void 0,n=tn(e);if(t&&!Object.values(eB).includes(r))throw Error("providedVersion ".concat(t," is not ETransactionVersion"));if(!Object.values(eB).includes(n))throw Error("defaultVersion ".concat(e," is not ETransactionVersion"));return t?r:n}function n5(e){if(!e)return;let t=tn(e);if(t===eB.V0)return eB.F0;if(t===eB.V1)return eB.F1;if(t===eB.V2)return eB.F2;if(t===eB.V3)return eB.F3;throw Error("toFeeVersion: ".concat(t," is not supported"))}function n6(e,t){var r;return{tip:e.tip||0,paymasterData:e.paymasterData||[],accountDeploymentData:e.accountDeploymentData||[],nonceDataAvailabilityMode:e.nonceDataAvailabilityMode||eO.L1,feeDataAvailabilityMode:e.feeDataAvailabilityMode||eO.L1,resourceBounds:null!=(r=e.resourceBounds)?r:n0(W,void 0,t)}}function n8(e){return e===eB.F2?eB.F1:e===eB.V2?eB.V1:e}function n4(e){let t=tn(e);return D(N((0,nH.getPublicKey)(t,!1)))}function n7(e){return"sierra_program"in(e7(e)?eZ(e):e)}function n9(e){var t;let r={...e};if(n7(e.contract)&&(!e.compiledClassHash&&e.casm&&(r.compiledClassHash=nP(e.casm)),!r.compiledClassHash))throw Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(r.classHash=null!=(t=e.classHash)?t:nD(e.contract),!r.classHash)throw Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return r}function ae(e){if(n7(e))throw Error("ContractClassResponse need to be LegacyContractClass (cairo0 response class)");return{...e,program:nY(e.program)}}var at={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,ENTRYPOINT_NOT_FOUND:21,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,STORAGE_PROOF_NOT_SUPPORTED:42,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_RESOURCES_FOR_VALIDATE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63,INVALID_SUBSCRIPTION_ID:66,TOO_MANY_ADDRESSES_IN_FILTER:67,TOO_MANY_BLOCKS_BACK:68,COMPILATION_ERROR:100,INVALID_ADDRESS:150,TOKEN_NOT_SUPPORTED:151,INVALID_SIGNATURE:153,MAX_AMOUNT_TOO_LOW:154,CLASS_HASH_NOT_SUPPORTED:155,PAYMASTER_TRANSACTION_EXECUTION_ERROR:156,INVALID_TIME_BOUNDS:157,INVALID_DEPLOYMENT_DATA:158,INVALID_CLASS_HASH:159,INVALID_ID:160,UNKNOWN_ERROR:163},ar=class extends Error{constructor(e){super(e),l._(this,"name",void 0),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(e,t){let{setPrototypeOf:r}=Object;r?r(e,t):e.__proto__=t}(this,new.target.prototype),function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e.constructor,{captureStackTrace:r}=Error;r&&r(e,t)}(this)}},an=class extends ar{},aa=class extends an{get code(){return this.baseError.code}isType(e){return at[e]===this.code}constructor(e,t,r){super("RPC: ".concat(t," with params ").concat(eJ(r,null,2),"\n\n      ").concat(e.code,": ").concat(e.message,": ").concat(eJ(e.data))),l._(this,"request",void 0),this.baseError=e,this.request={method:t,params:r}}},ai=class extends an{constructor(e){super(e),this.name="TimeoutError"}},ao=class extends an{constructor(e){super(e),this.name="WebSocketNotConnectedError"}},as={};m(as,{ethRandomPrivateKey:()=>al,validateAndParseEthAddress:()=>au});var ac=e.r(394922);function al(){return F(N(ac.secp256k1.utils.randomPrivateKey()))}function au(e){tl(e,W,2n**160n-1n,"Ethereum Address ");let t=D(R(tn(e)).padStart(40,"0"));return e$(!!t.match(/^(0x)?[0-9a-f]{40}$/),"Invalid Ethereum Address Format"),t}var ad="undefined"!=typeof globalThis&&globalThis.fetch.bind(globalThis)||"undefined"!=typeof window&&window.fetch.bind(window)||e.g.fetch.bind(e.g)||(()=>{throw new an("'fetch()' not detected, use the 'baseFetch' constructor parameter to set it")}),ah={};function af(e){return new Promise(t=>{setTimeout(t,e)})}function ap(e){let t={...e};return delete t.sierra_program_debug_info,t.abi=nA(eJ(e.abi)),t.sierra_program=nA(eJ(e.sierra_program)),t.sierra_program=nq(t.sierra_program),t}function ag(e){let t=e7(e)?eZ(e):e;return n7(e)?ap(t):{...t,..."program"in t&&{program:nq(t.program)}}}m(ah,{Block:()=>a_,createSierraContractClass:()=>ap,getDefaultNodeUrl:()=>am,getDefaultNodes:()=>ay,getSupportedRpcVersions:()=>ab,parseContract:()=>ag,validBlockTags:()=>aw,wait:()=>af});var am=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=arguments.length>2?arguments[2]:void 0;t||eb.info("Using default public node url, please provide nodeUrl in provider options!");let n=ay(null!=r?r:em.get("rpcVersion"))[null!=e?e:ec.SN_SEPOLIA],a=Math.floor(Math.random()*n.length);return n[a]};function ay(e){let t={...ef};return Object.keys(t).forEach(function(r,n){t[r]=t[r].map(t=>"".concat(t).concat(nz(e)))}),t}function ab(){return[...new Set(Object.values(ed))]}var aw=Object.values(eT),a_=class{setIdentifier(e){if(e7(e))if(tD(e))this.number=parseInt(e,10);else if(te(e))this.hash=e;else if(aw.includes(e))this.tag=e;else throw TypeError("Block identifier unmanaged: ".concat(e));else e4(e)?this.hash=tn(e):e6(e)?this.number=e:this.tag=eT.PENDING;if(e6(this.number)&&this.number<0)throw TypeError("Block number (".concat(this.number,") can't be negative"))}get queryIdentifier(){return null!==this.number?"blockNumber=".concat(this.number):null!==this.hash?"blockHash=".concat(this.hash):"blockNumber=".concat(this.tag)}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(e){this.setIdentifier(e)}constructor(e){l._(this,"hash",null),l._(this,"number",null),l._(this,"tag",null),l._(this,"valueOf",()=>this.number),l._(this,"toString",()=>this.hash),this.setIdentifier(e)}},av={};m(av,{buildUDCCall:()=>aT,fromCallsToExecuteCalldata:()=>aS,fromCallsToExecuteCalldata_cairo1:()=>ax,getExecuteCalldata:()=>ak,getVersionsByType:()=>aA,transformCallsToMulticallArrays:()=>aE});var aE=e=>{let t=[],r=[];return e.forEach(e=>{let n=rX.compile(e.calldata||[]);t.push({to:tt(e.contractAddress).toString(10),selector:tt(tA(e.entrypoint)).toString(10),data_offset:r.length.toString(),data_len:n.length.toString()}),r.push(...n)}),{callArray:t,calldata:rX.compile({calldata:r})}},aS=e=>{let{callArray:t,calldata:r}=aE(e);return[...rX.compile({callArray:t}),...r]},ax=e=>{let t=e.map(e=>({contractAddress:e.contractAddress,entrypoint:e.entrypoint,calldata:Array.isArray(e.calldata)&&"__compiled__"in e.calldata?e.calldata:rX.compile(e.calldata)}));return rX.compile({orderCalls:t})},ak=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"0";return"1"===t?ax(e):aS(e)};function aT(e,t){let r=[].concat(e).map(e=>{let{classHash:r,salt:n,unique:a=!0,constructorCalldata:i=[]}=e,o=rX.compile(i),s=null!=n?n:nZ();return{call:{contractAddress:et.ADDRESS,entrypoint:et.ENTRYPOINT,calldata:[r,s,tm(a),o.length,...o]},address:nk(a?r1.pedersen(t,s):s,r,o,a?et.ADDRESS:0)}});return{calls:r.map(e=>e.call),addresses:r.map(e=>e.address)}}function aA(e){return"fee"===e?{v1:eB.F1,v2:eB.F2,v3:eB.F3}:{v1:eB.V1,v2:eB.V2,v3:eB.V3}}var aB={headers:{"Content-Type":"application/json"},blockIdentifier:eT.PENDING,retries:200},aI=class{readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){var e;return null!=(e=this.transactionRetryIntervalFallback)?e:5e3}setChainId(e){this.chainId=e}fetch(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n={id:r,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:eJ(n),headers:this.headers})}errorHandler(e,t,r,n){if(r)throw new aa(r,e,t);if(n instanceof an)throw n;if(n)throw Error(n.message)}async fetchEndpoint(e,t){try{if(this.batchClient){let{error:r,result:n}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,r),n}let r=await this.fetch(e,t,this.requestId+=1),{error:n,result:a}=await r.json();return this.errorHandler(e,t,n),a}catch(n){var r;throw this.errorHandler(e,t,null==n||null==(r=n.response)?void 0:r.data,n),n}}async getChainId(){return null!=this.chainId||(this.chainId=await this.fetchEndpoint("starknet_chainId")),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){let e=await this.fetchEndpoint("starknet_specVersion");if(nV(this.channelSpecVersion,e)||eb.error(eg.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!nM(e))throw new an("".concat(eg.unsupportedSpecVersion,", channelId: ").concat(this.id));this.specVersion=e}return this.specVersion}getNonceForAddress(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,r=tn(e),n=new a_(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new a_(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new a_(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new a_(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new a_(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new a_(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new a_(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){let t=tn(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){let r=new a_(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:t})}getTransactionReceipt(e){let t=tn(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){let t=tn(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){let t=tn(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{blockIdentifier:r=this.blockIdentifier,skipValidate:n=!0,skipFeeCharge:a=!0}=t,i=new a_(r).identifier,o=[];return n&&o.push(S.ESimulationFlag.SKIP_VALIDATE),a&&o.push(S.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map(e=>this.buildTransaction(e)),simulation_flags:o})}async waitForTransaction(e,t){var r,n,a;let i,o=tn(e),{retries:s}=this,c=!1,l=!1,u=null!=(r=null==t?void 0:t.retryInterval)?r:this.transactionRetryIntervalDefault,d=null!=(n=null==t?void 0:t.errorStates)?n:[S.ETransactionStatus.REJECTED],h=null!=(a=null==t?void 0:t.successStates)?a:[S.ETransactionExecutionStatus.SUCCEEDED,S.ETransactionStatus.ACCEPTED_ON_L2,S.ETransactionStatus.ACCEPTED_ON_L1];for(;!c;){await af(u);try{let e=(i=await this.getTransactionStatus(o)).execution_status,t=i.finality_status;if(!t)throw Error("waiting for transaction status");if(d.includes(e)||d.includes(t)){let r="".concat(e,": ").concat(t),n=Error(r);throw n.response=i,l=!0,n}(h.includes(e)||h.includes(t))&&(c=!0)}catch(e){if(e instanceof Error&&l)throw e;if(s<=0)throw Error("waitForTransaction timed-out with retries ".concat(this.retries))}s-=1}let f=null;for(;null===f;){try{f=await this.getTransactionReceipt(o)}catch(e){if(s<=0)throw Error("waitForTransaction timed-out with retries ".concat(this.retries))}s-=1,await af(u)}return f}getStorageAt(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.blockIdentifier,n=tn(e),a=ti(t),i=new a_(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:a,block_id:i})}getClassHashAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,r=tn(e),n=new a_(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}getClass(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,r=tn(e),n=new a_(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n})}getClassAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,r=tn(e),n=new a_(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r})}async getEstimateFee(e,t){let{blockIdentifier:r=this.blockIdentifier,skipValidate:n=!0}=t,a=new a_(r).identifier,i={simulation_flags:n?[S.ESimulationFlag.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:e.map(e=>this.buildTransaction(e,"fee")),block_id:a,...i})}async invoke(e,t){let r;return nF(t)?(r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:S.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:rX.toHex(e.calldata),version:S.ETransactionVersion.V3,signature:nQ(e.signature),nonce:tn(t.nonce),resource_bounds:t.resourceBounds,tip:tn(t.tip),paymaster_data:t.paymasterData.map(e=>tn(e)),account_deployment_data:t.accountDeploymentData.map(e=>tn(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}),e0(!t.maxFee,()=>{eb.warn(eg.maxFeeInV3,{type:S.ETransactionType.INVOKE})})):(r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:rX.toHex(e.calldata),type:S.ETransactionType.INVOKE,max_fee:tn(t.maxFee||0),version:S.ETransactionVersion.V1,signature:nQ(e.signature),nonce:tn(t.nonce)}}),eb.warn(eg.legacyTxWarningMessage,{version:S.ETransactionVersion.V1,type:S.ETransactionType.INVOKE})),this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare(e,t){let r,{contract:n,signature:a,senderAddress:i,compiledClassHash:o}=e;if(n7(n)||nF(t))if(n7(n)&&!nF(t))r=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:S.ETransactionType.DECLARE,contract_class:{sierra_program:nY(n.sierra_program),contract_class_version:n.contract_class_version,entry_points_by_type:n.entry_points_by_type,abi:n.abi},compiled_class_hash:o||"",version:S.ETransactionVersion.V2,max_fee:tn(t.maxFee||0),signature:nQ(a),sender_address:i,nonce:tn(t.nonce)}}),eb.warn(eg.legacyTxWarningMessage,{version:S.ETransactionVersion.V2,type:S.ETransactionType.DECLARE});else if(n7(n)&&nF(t))r=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:S.ETransactionType.DECLARE,sender_address:i,compiled_class_hash:o||"",version:S.ETransactionVersion.V3,signature:nQ(a),nonce:tn(t.nonce),contract_class:{sierra_program:nY(n.sierra_program),contract_class_version:n.contract_class_version,entry_points_by_type:n.entry_points_by_type,abi:n.abi},resource_bounds:t.resourceBounds,tip:tn(t.tip),paymaster_data:t.paymasterData.map(e=>tn(e)),account_deployment_data:t.accountDeploymentData.map(e=>tn(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}),e0(!t.maxFee,()=>{eb.warn(eg.maxFeeInV3,{type:S.ETransactionType.DECLARE})});else throw Error("declare unspotted parameters");else r=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:S.ETransactionType.DECLARE,contract_class:{program:n.program,entry_points_by_type:n.entry_points_by_type,abi:n.abi},version:S.ETransactionVersion.V1,max_fee:tn(t.maxFee||0),signature:nQ(a),sender_address:i,nonce:tn(t.nonce)}}),eb.warn(eg.legacyTxWarningMessage,{version:S.ETransactionVersion.V1,type:S.ETransactionType.DECLARE});return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async deployAccount(e,t){let r,{classHash:n,constructorCalldata:a,addressSalt:i,signature:o}=e;return nF(t)?(r=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:S.ETransactionType.DEPLOY_ACCOUNT,version:S.ETransactionVersion.V3,signature:nQ(o),nonce:tn(t.nonce),contract_address_salt:tn(i||0),constructor_calldata:rX.toHex(a||[]),class_hash:tn(n),resource_bounds:t.resourceBounds,tip:tn(t.tip),paymaster_data:t.paymasterData.map(e=>tn(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}),e0(!t.maxFee,()=>{eb.warn(eg.maxFeeInV3,{type:S.ETransactionType.DEPLOY_ACCOUNT})})):(r=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:rX.toHex(a||[]),class_hash:tn(n),contract_address_salt:tn(i||0),type:S.ETransactionType.DEPLOY_ACCOUNT,max_fee:tn(t.maxFee||0),version:S.ETransactionVersion.V1,signature:nQ(o),nonce:tn(t.nonce)}}),eb.warn(eg.legacyTxWarningMessage,{version:S.ETransactionVersion.V1,type:S.ETransactionType.DEPLOY_ACCOUNT})),this.waitMode?this.waitForTransaction((await r).transaction_hash):r}callContract(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,r=new a_(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:tA(e.entrypoint),calldata:rX.toHex(e.calldata)},block_id:r})}estimateMessageFee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,{from_address:r,to_address:n,entry_point_selector:a,payload:i}=e,o={from_address:au(r),to_address:tn(n),entry_point_selector:tB(a),payload:tg(i)},s=new a_(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:o,block_id:s})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){let r,n=aA(t);if(nF(e)?(r={signature:nQ(e.signature),nonce:tn(e.nonce),resource_bounds:e.resourceBounds,tip:tn(e.tip),paymaster_data:e.paymasterData.map(e=>tn(e)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(e=>tn(e))},e0(!e.maxFee,()=>{eb.warn(eg.maxFeeInV3,{type:e.type,versionType:t})})):(r={signature:nQ(e.signature),nonce:tn(e.nonce),max_fee:tn(e.maxFee||0)},eb.warn(eg.legacyTxWarningMessage,{version:e.version,type:e.type})),e.type===eE.INVOKE)return{type:S.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:rX.toHex(e.calldata),version:tn(e.version||n.v3),...r};if(e.type===eE.DECLARE)return n7(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:nY(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:tn(e.version||n.v3),...r}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:tn(e.version||n.v1),...r};if(e.type===eE.DEPLOY_ACCOUNT){let{account_deployment_data:t,...a}=r;return{type:e.type,constructor_calldata:rX.toHex(e.constructorCalldata||[]),class_hash:tn(e.classHash),contract_address_salt:tn(e.addressSalt||0),version:tn(e.version||n.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}constructor(e){l._(this,"id","RPC071"),l._(this,"channelSpecVersion",ed.v0_7_1),l._(this,"nodeUrl",void 0),l._(this,"headers",void 0),l._(this,"requestId",void 0),l._(this,"blockIdentifier",void 0),l._(this,"retries",void 0),l._(this,"waitMode",void 0),l._(this,"chainId",void 0),l._(this,"specVersion",void 0),l._(this,"transactionRetryIntervalFallback",void 0),l._(this,"batchClient",void 0),l._(this,"baseFetch",void 0);let{baseFetch:t,batch:r,blockIdentifier:n,chainId:a,headers:i,nodeUrl:o,retries:s,specVersion:c,transactionRetryIntervalFallback:u,waitMode:d}=e||{};Object.values(ec).includes(o)?this.nodeUrl=am(o,null==e?void 0:e.default,this.channelSpecVersion):o?this.nodeUrl=o:this.nodeUrl=am(void 0,null==e?void 0:e.default,this.channelSpecVersion),this.baseFetch=t||em.get("fetch")||ad,this.blockIdentifier=null!=n?n:aB.blockIdentifier,this.chainId=a,this.headers={...aB.headers,...i},this.retries=null!=s?s:aB.retries,this.specVersion=c,this.transactionRetryIntervalFallback=u,this.waitMode=null!=d&&d,this.requestId=0,"number"==typeof r&&(this.batchClient=new eQ({nodeUrl:this.nodeUrl,headers:this.headers,interval:r,baseFetch:this.baseFetch})),eb.debug("Using Channel",this.id)}},aC={};m(aC,{RpcChannel:()=>aP});var aO={headers:{"Content-Type":"application/json"},blockIdentifier:eT.PENDING,retries:200},aP=class{readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){var e;return null!=(e=this.transactionRetryIntervalFallback)?e:5e3}setChainId(e){this.chainId=e}fetch(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n={id:r,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:eJ(n),headers:this.headers})}errorHandler(e,t,r,n){if(r)throw new aa(r,e,t);if(n instanceof an)throw n;if(n)throw Error(n.message)}async fetchEndpoint(e,t){try{if(this.batchClient){let{error:r,result:n}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,r),n}let r=await this.fetch(e,t,this.requestId+=1),{error:n,result:a}=await r.json();return this.errorHandler(e,t,n),a}catch(n){var r;throw this.errorHandler(e,t,null==n||null==(r=n.response)?void 0:r.data,n),n}}async getChainId(){return null!=this.chainId||(this.chainId=await this.fetchEndpoint("starknet_chainId")),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){let e=await this.fetchEndpoint("starknet_specVersion");if(nV(this.channelSpecVersion,e)||eb.error(eg.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!nM(e))throw new an("".concat(eg.unsupportedSpecVersion,", channelId: ").concat(this.id));this.specVersion=e}return this.specVersion}getMessagesStatus(e){let t=tn(e);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:t})}getStorageProof(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:this.blockIdentifier,a=new a_(n).identifier,i=td(e),o=td(t);return this.fetchEndpoint("starknet_getStorageProof",{block_id:a,class_hashes:i,contract_addresses:o,contracts_storage_keys:r})}getCompiledCasm(e){let t=tn(e);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:t})}getNonceForAddress(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,r=tn(e),n=new a_(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new a_(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new a_(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new a_(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new a_(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new a_(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.blockIdentifier,t=new a_(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){let t=tn(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){let r=new a_(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:t})}getTransactionReceipt(e){let t=tn(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){let t=tn(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){let t=tn(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{blockIdentifier:r=this.blockIdentifier,skipValidate:n=!0,skipFeeCharge:a=!0}=t,i=new a_(r).identifier,o=[];return n&&o.push(x.ESimulationFlag.SKIP_VALIDATE),a&&o.push(x.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map(e=>this.buildTransaction(e)),simulation_flags:o})}async waitForTransaction(e,t){var r,n,a;let i,o=tn(e),{retries:s}=this,c=!1,l=!1,u=null!=(r=null==t?void 0:t.retryInterval)?r:this.transactionRetryIntervalDefault,d=null!=(n=null==t?void 0:t.errorStates)?n:[x.ETransactionStatus.REJECTED],h=null!=(a=null==t?void 0:t.successStates)?a:[x.ETransactionExecutionStatus.SUCCEEDED,x.ETransactionStatus.ACCEPTED_ON_L2,x.ETransactionStatus.ACCEPTED_ON_L1];for(;!c;){await af(u);try{let e=(i=await this.getTransactionStatus(o)).execution_status,t=i.finality_status;if(!t)throw Error("waiting for transaction status");if(d.includes(e)||d.includes(t)){let r="".concat(e,": ").concat(t),n=Error(r);throw n.response=i,l=!0,n}(h.includes(e)||h.includes(t))&&(c=!0)}catch(e){if(e instanceof Error&&l)throw e;if(s<=0)throw Error("waitForTransaction timed-out with retries ".concat(this.retries))}s-=1}let f=null;for(;null===f;){try{f=await this.getTransactionReceipt(o)}catch(e){if(s<=0)throw Error("waitForTransaction timed-out with retries ".concat(this.retries))}s-=1,await af(u)}return f}getStorageAt(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this.blockIdentifier,n=tn(e),a=ti(t),i=new a_(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:a,block_id:i})}getClassHashAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,r=tn(e),n=new a_(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}getClass(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,r=tn(e),n=new a_(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n})}getClassAt(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,r=tn(e),n=new a_(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r})}async getEstimateFee(e,t){let{blockIdentifier:r=this.blockIdentifier,skipValidate:n=!0}=t,a=new a_(r).identifier,i={simulation_flags:n?[x.ESimulationFlag.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:e.map(e=>this.buildTransaction(e,"fee")),block_id:a,...i})}async invoke(e,t){let r;if(nF(t))if(eR(t.resourceBounds))r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:x.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:rX.toHex(e.calldata),version:x.ETransactionVersion.V3,signature:nQ(e.signature),nonce:tn(t.nonce),resource_bounds:t.resourceBounds,tip:tn(t.tip),paymaster_data:t.paymasterData.map(e=>tn(e)),account_deployment_data:t.accountDeploymentData.map(e=>tn(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}});else throw Error(eg.SWOldV3);else throw Error(eg.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare(e,t){let r,{contract:n,signature:a,senderAddress:i,compiledClassHash:o}=e;if(n7(n)&&nF(t))if(eR(t.resourceBounds))r=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:x.ETransactionType.DECLARE,sender_address:i,compiled_class_hash:o||"",version:x.ETransactionVersion.V3,signature:nQ(a),nonce:tn(t.nonce),contract_class:{sierra_program:nY(n.sierra_program),contract_class_version:n.contract_class_version,entry_points_by_type:n.entry_points_by_type,abi:n.abi},resource_bounds:t.resourceBounds,tip:tn(t.tip),paymaster_data:t.paymasterData.map(e=>tn(e)),account_deployment_data:t.accountDeploymentData.map(e=>tn(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}});else throw Error(eg.SWOldV3);else throw Error(eg.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async deployAccount(e,t){let r,{classHash:n,constructorCalldata:a,addressSalt:i,signature:o}=e;if(nF(t))if(eR(t.resourceBounds))r=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:x.ETransactionType.DEPLOY_ACCOUNT,version:x.ETransactionVersion.V3,signature:nQ(o),nonce:tn(t.nonce),contract_address_salt:tn(i||0),constructor_calldata:rX.toHex(a||[]),class_hash:tn(n),resource_bounds:t.resourceBounds,tip:tn(t.tip),paymaster_data:t.paymasterData.map(e=>tn(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}});else throw Error(eg.SWOldV3);else throw Error(eg.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}callContract(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,r=new a_(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:tA(e.entrypoint),calldata:rX.toHex(e.calldata)},block_id:r})}estimateMessageFee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.blockIdentifier,{from_address:r,to_address:n,entry_point_selector:a,payload:i}=e,o={from_address:au(r),to_address:tn(n),entry_point_selector:tB(a),payload:tg(i)},s=new a_(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:o,block_id:s})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){let r,n=aA(t);if(nF(e))r={signature:nQ(e.signature),nonce:tn(e.nonce),resource_bounds:e.resourceBounds,tip:tn(e.tip),paymaster_data:e.paymasterData.map(e=>tn(e)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(e=>tn(e))};else throw Error("v0,v1,v2 tx are not supported on RPC 0.8");if(e.type===eE.INVOKE)return{type:x.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:rX.toHex(e.calldata),version:tn(e.version||n.v3),...r};if(e.type===eE.DECLARE){if(!n7(e.contract))throw eb.error("Cairo 0 -  non Sierra v1 tx are not supported"),Error("Declaring non Sierra contract using RPC 0.8");return{type:e.type,contract_class:{...e.contract,sierra_program:nY(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:tn(e.version||n.v3),...r}}if(e.type===eE.DEPLOY_ACCOUNT){let{account_deployment_data:t,...a}=r;return{type:e.type,constructor_calldata:rX.toHex(e.constructorCalldata||[]),class_hash:tn(e.classHash),contract_address_salt:tn(e.addressSalt||0),version:tn(e.version||n.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}constructor(e){l._(this,"id","RPC081"),l._(this,"channelSpecVersion",ed.v0_8_1),l._(this,"nodeUrl",void 0),l._(this,"headers",void 0),l._(this,"requestId",void 0),l._(this,"blockIdentifier",void 0),l._(this,"retries",void 0),l._(this,"waitMode",void 0),l._(this,"chainId",void 0),l._(this,"specVersion",void 0),l._(this,"transactionRetryIntervalFallback",void 0),l._(this,"batchClient",void 0),l._(this,"baseFetch",void 0);let{baseFetch:t,batch:r,blockIdentifier:n,chainId:a,headers:i,nodeUrl:o,retries:s,specVersion:c,transactionRetryIntervalFallback:u,waitMode:d}=e||{};Object.values(ec).includes(o)?this.nodeUrl=am(o,null==e?void 0:e.default,this.channelSpecVersion):o?this.nodeUrl=o:this.nodeUrl=am(void 0,null==e?void 0:e.default,this.channelSpecVersion),this.baseFetch=t||em.get("fetch")||ad,this.blockIdentifier=null!=n?n:aO.blockIdentifier,this.chainId=a,this.headers={...aO.headers,...i},this.retries=null!=s?s:aO.retries,this.specVersion=c,this.transactionRetryIntervalFallback=u,this.waitMode=null!=d&&d,this.requestId=0,"number"==typeof r&&(this.batchClient=new eQ({nodeUrl:this.nodeUrl,headers:this.headers,interval:r,baseFetch:this.baseFetch})),eb.debug("Using Channel",this.id)}},aN=class{on(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}off(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter(e=>e!==t))}emit(e,t){this.listeners[e]&&this.listeners[e].forEach(e=>e(t))}clear(){this.listeners={}}constructor(){l._(this,"listeners",{})}},aR="undefined"!=typeof WebSocket&&WebSocket||"undefined"!=typeof globalThis&&globalThis.WebSocket||"undefined"!=typeof window&&window.WebSocket&&window.WebSocket.bind(window)||e.g.WebSocket||class{constructor(){throw new an("WebSocket module not detected, use the 'websocket' constructor parameter to set a compatible connection")}},aD=class{get isClosed(){return this._isClosed}_handleEvent(e){if(this.handler)this.handler(e);else{if(this.buffer.length>=this.maxBufferSize){let e=this.buffer.shift();eb.warn("Subscription ".concat(this.id,": Buffer full. Dropping oldest event:"),e)}this.buffer.push(e)}}on(e){if(this.handler)throw Error("A handler is already attached to this subscription.");for(this.handler=e;this.buffer.length>0;){let e=this.buffer.shift();e&&this.handler(e)}}async unsubscribe(){if(this._isClosed)return!0;let e=await this.channel.unsubscribe(this.id);return e&&(this._isClosed=!0,this.channel.removeSubscription(this.id),this.events.emit("unsubscribe",void 0),this.events.clear()),e}constructor(e,t,r,n,a){l._(this,"channel",void 0),l._(this,"method",void 0),l._(this,"params",void 0),l._(this,"id",void 0),l._(this,"events",new aN),l._(this,"buffer",[]),l._(this,"maxBufferSize",void 0),l._(this,"handler",null),l._(this,"_isClosed",!1),this.channel=e,this.method=t,this.params=r,this.id=n,this.maxBufferSize=a}},aL=class{idResolver(e){return e||this.sendId++}send(e,t,r){if(!this.isConnected())throw new ao("WebSocketChannel.send() failed due to socket being disconnected");let n=this.idResolver(r),a={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.websocket.send(eJ(a)),n}sendReceive(e,t){if(this.isReconnecting||!this.isConnected()&&this.autoReconnect&&!this.userInitiatedClose)return eb.info("WebSocket: Connection unavailable, queueing request: ".concat(e)),new Promise((r,n)=>{this.requestQueue.push({method:e,params:t,resolve:r,reject:n})});let r=this.send(e,t);return new Promise((t,n)=>{let a;if(!this.websocket||this.websocket.readyState!==aR.OPEN)return void n(new ao("WebSocket not available or not connected."));let i=s=>{if(!e7(s.data))return void eb.warn("WebSocket received non-string message data:",s.data);let c=JSON.parse(s.data);c.id===r&&(clearTimeout(a),this.websocket.removeEventListener("message",i),this.websocket.removeEventListener("error",o),"result"in c?t(c.result):n(Error("Error on ".concat(e," (id: ").concat(r,"): ").concat(JSON.stringify(c.error)))))},o=t=>{clearTimeout(a),this.websocket.removeEventListener("message",i),this.websocket.removeEventListener("error",o),n(Error("WebSocket error during ".concat(e," (id: ").concat(r,"): ").concat(t.type||"Unknown error")))};this.websocket.addEventListener("message",i),this.websocket.addEventListener("error",o),a=setTimeout(()=>{this.websocket.removeEventListener("message",i),this.websocket.removeEventListener("error",o),n(new ai("Request ".concat(e," (id: ").concat(r,") timed out after ").concat(this.requestTimeout,"ms")))},this.requestTimeout)})}isConnected(){return this.websocket.readyState===aR.OPEN}async waitForConnection(){return this.websocket.readyState!==aR.OPEN?new Promise((e,t)=>{this.websocket&&(this.websocket.onopen=()=>e(this.websocket.readyState),this.websocket.onerror=e=>t(e))}):this.websocket.readyState}disconnect(e,t){this.reconnectTimeoutId&&(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=null),this.websocket.close(e,t),this.userInitiatedClose=!0}async waitForDisconnection(){return this.websocket.readyState!==aR.CLOSED?new Promise((e,t)=>{this.websocket&&(this.websocket.onclose=()=>e(this.websocket.readyState),this.websocket.onerror=t)}):this.websocket.readyState}async unsubscribe(e){let t=await this.sendReceive("starknet_unsubscribe",{subscription_id:e});return t&&this.events.emit("unsubscribe",e),t}waitForUnsubscription(e){return new Promise(t=>{let r=n=>{n===e&&(this.events.off("unsubscribe",r),t())};this.events.on("unsubscribe",r)})}reconnect(){this.userInitiatedClose=!1,this.websocket=new this.WsImplementation(this.nodeUrl),this.websocket.addEventListener("open",this.openListener),this.websocket.addEventListener("close",this.closeListener),this.websocket.addEventListener("message",this.messageListener),this.websocket.addEventListener("error",this.errorListener)}_processRequestQueue(){for(eb.info("WebSocket: Processing ".concat(this.requestQueue.length," queued requests."));this.requestQueue.length>0;){let{method:e,params:t,resolve:r,reject:n}=this.requestQueue.shift();this.sendReceive(e,t).then(r).catch(n)}}async _restoreSubscriptions(){let e=Array.from(this.activeSubscriptions.values());this.activeSubscriptions.clear();let t=e.map(async e=>{try{let t=await this.sendReceive(e.method,e.params);e.id=t,this.activeSubscriptions.set(t,e),eb.info("Subscription ".concat(e.method," restored with new ID: ").concat(t))}catch(t){eb.error("Failed to restore subscription ".concat(e.method,":"),t)}});await Promise.all(t)}_startReconnect(){if(this.isReconnecting||!this.autoReconnect)return;this.isReconnecting=!0,this.reconnectAttempts=0;let e=()=>{if(this.reconnectAttempts>=this.reconnectOptions.retries){eb.error("WebSocket: Maximum reconnection retries reached. Giving up."),this.isReconnecting=!1;return}this.reconnectAttempts+=1,eb.info("WebSocket: Connection lost. Attempting to reconnect... (".concat(this.reconnectAttempts,"/").concat(this.reconnectOptions.retries,")")),this.reconnect(),this.websocket.onopen=async()=>{eb.info("WebSocket: Reconnection successful."),this.isReconnecting=!1,this.reconnectAttempts=0,await this._restoreSubscriptions(),this._processRequestQueue(),this.events.emit("open",new Event("open"))},this.websocket.onerror=()=>{let t=this.reconnectOptions.delay*2**(this.reconnectAttempts-1);eb.info("WebSocket: Reconnect attempt failed. Retrying in ".concat(t,"ms.")),this.reconnectTimeoutId=setTimeout(e,t)}};e()}onCloseProxy(e){this.websocket.removeEventListener("open",this.openListener),this.websocket.removeEventListener("close",this.closeListener),this.websocket.removeEventListener("message",this.messageListener),this.websocket.removeEventListener("error",this.errorListener),this.events.emit("close",e),this.userInitiatedClose||this._startReconnect()}onMessageProxy(e){let t;try{t=JSON.parse(e.data)}catch(t){eb.error("WebSocketChannel: Error parsing incoming message: ".concat(e.data,", Error: ").concat(t));return}if(t.method&&e9(t.params)&&"subscription_id"in t.params){let{result:e,subscription_id:r}=t.params,n=this.activeSubscriptions.get(r);n?n._handleEvent(e):eb.warn("WebSocketChannel: Received event for untracked subscription ID: ".concat(r,"."))}eb.debug("onMessageProxy:",e.data),this.events.emit("message",e)}async subscribeNewHeads(e){let t="starknet_subscribeNewHeads",r={block_id:e?new a_(e).identifier:void 0},n=await this.sendReceive(t,r),a=new aD(this,t,r,n,this.maxBufferSize);return this.activeSubscriptions.set(n,a),a}async subscribeEvents(e,t,r){let n="starknet_subscribeEvents",a={from_address:void 0!==e?tn(e):void 0,keys:t,block_id:r?new a_(r).identifier:void 0},i=await this.sendReceive(n,a),o=new aD(this,n,a,i,this.maxBufferSize);return this.activeSubscriptions.set(i,o),o}async subscribeTransactionStatus(e,t){let r="starknet_subscribeTransactionStatus",n={transaction_hash:tn(e),block_id:t?new a_(t).identifier:void 0},a=await this.sendReceive(r,n),i=new aD(this,r,n,a,this.maxBufferSize);return this.activeSubscriptions.set(a,i),i}async subscribePendingTransaction(e,t){let r="starknet_subscribePendingTransactions",n={transaction_details:e,sender_address:t&&td(t)},a=await this.sendReceive(r,n),i=new aD(this,r,n,a,this.maxBufferSize);return this.activeSubscriptions.set(a,i),i}removeSubscription(e){this.activeSubscriptions.delete(e)}on(e,t){this.events.on(e,t)}off(e,t){this.events.off(e,t)}constructor(e){var t,r,n,a,i,o,s;l._(this,"nodeUrl",void 0),l._(this,"websocket",void 0),l._(this,"WsImplementation",void 0),l._(this,"activeSubscriptions",new Map),l._(this,"maxBufferSize",void 0),l._(this,"autoReconnect",void 0),l._(this,"reconnectOptions",void 0),l._(this,"requestTimeout",void 0),l._(this,"isReconnecting",!1),l._(this,"reconnectAttempts",0),l._(this,"userInitiatedClose",!1),l._(this,"reconnectTimeoutId",null),l._(this,"requestQueue",[]),l._(this,"events",new aN),l._(this,"openListener",e=>this.events.emit("open",e)),l._(this,"closeListener",this.onCloseProxy.bind(this)),l._(this,"messageListener",this.onMessageProxy.bind(this)),l._(this,"errorListener",e=>this.events.emit("error",e)),l._(this,"sendId",0),this.nodeUrl=e.nodeUrl,this.maxBufferSize=null!=(n=e.maxBufferSize)?n:1e3,this.autoReconnect=null==(a=e.autoReconnect)||a,this.reconnectOptions={retries:null!=(i=null==(t=e.reconnectOptions)?void 0:t.retries)?i:5,delay:null!=(o=null==(r=e.reconnectOptions)?void 0:r.delay)?o:2e3},this.requestTimeout=null!=(s=e.requestTimeout)?s:6e4,this.WsImplementation=e.websocket||em.get("websocket")||aR,this.websocket=new this.WsImplementation(this.nodeUrl),this.websocket.addEventListener("open",this.openListener),this.websocket.addEventListener("close",this.closeListener),this.websocket.addEventListener("message",this.messageListener),this.websocket.addEventListener("error",this.errorListener)}},aH=class{estimatedFeeToMaxFee(e){var t;return n$(e,null==(t=this.margin)?void 0:t.maxFee)}estimateFeeToBounds(e){var t;return n0(e,null==(t=this.margin)?void 0:t.bounds)}parseGetBlockResponse(e){return e}parseTransactionReceipt(e){return e}parseFeeEstimateResponse(e){var t,r,n,a,i,o,s,c,l,u;let d=e[0];return{overall_fee:tt(d.overall_fee),unit:d.unit,l1_gas_consumed:null!=(r=null!=(t=tr(d.l1_gas_consumed))?t:tr(d.gas_consumed))?r:0n,l1_gas_price:null!=(a=null!=(n=tr(d.l1_gas_price))?n:tr(d.gas_price))?a:0n,l2_gas_consumed:null!=(i=tr(d.l2_gas_consumed))?i:void 0,l2_gas_price:null!=(o=tr(d.l2_gas_price))?o:void 0,l1_data_gas_consumed:null!=(c=null!=(s=tr(d.l1_data_gas_consumed))?s:tr(d.data_gas_consumed))?c:0n,l1_data_gas_price:null!=(u=null!=(l=tr(d.l1_data_gas_price))?l:tr(d.gas_price))?u:0n,suggestedMaxFee:this.estimatedFeeToMaxFee(d.overall_fee),resourceBounds:this.estimateFeeToBounds(d)}}parseFeeEstimateBulkResponse(e){return e.map(e=>{var t,r,n,a,i,o,s,c,l,u;return{overall_fee:tt(e.overall_fee),unit:e.unit,l1_gas_consumed:null!=(r=null!=(t=tr(e.l1_gas_consumed))?t:tr(e.gas_consumed))?r:0n,l1_gas_price:null!=(a=null!=(n=tr(e.l1_gas_price))?n:tr(e.gas_price))?a:0n,l2_gas_consumed:null!=(i=tr(e.l2_gas_consumed))?i:void 0,l2_gas_price:null!=(o=tr(e.l2_gas_price))?o:void 0,l1_data_gas_consumed:null!=(c=null!=(s=tr(e.l1_data_gas_consumed))?s:tr(e.data_gas_consumed))?c:0n,l1_data_gas_price:null!=(u=null!=(l=tr(e.l1_data_gas_price))?l:tr(e.gas_price))?u:0n,suggestedMaxFee:this.estimatedFeeToMaxFee(e.overall_fee),resourceBounds:this.estimateFeeToBounds(e)}})}parseSimulateTransactionResponse(e){return e.map(e=>({...e,suggestedMaxFee:this.estimatedFeeToMaxFee(e.fee_estimation.overall_fee),resourceBounds:this.estimateFeeToBounds(e.fee_estimation)}))}parseContractClassResponse(e){return{...e,abi:e7(e.abi)?JSON.parse(e.abi):e.abi}}parseL1GasPriceResponse(e){return e.l1_gas_price.price_in_wei}constructor(e){l._(this,"margin",void 0),this.margin=e}},aU=class e{match(e){return this.statusReceipt in e?e[this.statusReceipt](this.value):e._()}isSuccess(){return"success"===this.statusReceipt}isReverted(){return"reverted"===this.statusReceipt}isError(){return"error"===this.statusReceipt}static isSuccess(e){return e.execution_status===ex.SUCCEEDED}static isReverted(e){return e.execution_status===ex.REVERTED}constructor(t){for(let[r]of(l._(this,"statusReceipt",void 0),l._(this,"value",void 0),[this.statusReceipt,this.value]=e.isSuccess(t)?["success",t]:e.isReverted(t)?["reverted",t]:["error",Error("Unknown response type")],Object.entries(this)))Object.defineProperty(this,r,{enumerable:!1});for(let[e,r]of Object.entries(t))Object.defineProperty(this,e,{enumerable:!0,writable:!1,value:r})}},aF={};m(aF,{encodeData:()=>a0,encodeType:()=>aJ,encodeValue:()=>a$,getDependencies:()=>aX,getMessageHash:()=>a2,getStructHash:()=>a1,getTypeHash:()=>aQ,isMerkleTreeType:()=>aZ,prepareSelector:()=>aY,validateTypedData:()=>aq,verifyMessage:()=>a3});var aV={};m(aV,{MerkleTree:()=>aM,proofMerklePath:()=>function e(t,r,n){let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n_;if(0===n.length)return t===r;let[i,...o]=n;return e(t,aM.hash(r,i,a),o,a)}});var aM=class e{build(t){if(1===t.length)return t[0];t.length!==this.leaves.length&&this.branches.push(t);let r=[];for(let n=0;n<t.length;n+=2)n+1===t.length?r.push(e.hash(t[n],"0x0",this.hashMethod)):r.push(e.hash(t[n],t[n+1],this.hashMethod));return this.build(r)}static hash(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:n_,[n,a]=[BigInt(e),BigInt(t)].sort((e,t)=>e>=t?1:-1);return r(n,a)}getProof(t){var r,n;let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.leaves,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],o=a.indexOf(t);if(-1===o)throw Error("leaf not found");if(1===a.length)return i;let s=o%2==0,c=null!=(r=s?a[o+1]:a[o-1])?r:"0x0",l=[...i,c],u=this.leaves.length===a.length?-1:this.branches.findIndex(e=>e.length===a.length),d=null!=(n=this.branches[u+1])?n:[this.root];return this.getProof(e.hash(s?t:c,s?c:t,this.hashMethod),d,l)}constructor(e,t=n_){l._(this,"leaves",void 0),l._(this,"branches",[]),l._(this,"root",void 0),l._(this,"hashMethod",void 0),this.hashMethod=t,this.leaves=e,this.root=this.build(e)}},aj={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},az={[eG.TypedDataRevision.ACTIVE]:{domain:"StarknetDomain",hashMethod:nx,hashMerkleMethod:nv,escapeTypeString:e=>'"'.concat(e,'"'),presetTypes:aj},[eG.TypedDataRevision.LEGACY]:{domain:"StarkNetDomain",hashMethod:nS,hashMerkleMethod:n_,escapeTypeString:e=>e,presetTypes:{}}};function aW(e,t,r){let{min:n,max:a}=r,i=BigInt(e);e$(i>=n&&i<=a,"".concat(i," (").concat(t,") is out of bounds [").concat(n,", ").concat(a,"]"))}function aG(e){var t,r;let{types:n,domain:a}=e;return az[eG.TypedDataRevision.ACTIVE].domain in n&&(null==(t=a.revision)?void 0:t.toString())===eG.TypedDataRevision.ACTIVE?eG.TypedDataRevision.ACTIVE:az[eG.TypedDataRevision.LEGACY].domain in n&&(null!=(r=a.revision)?r:eG.TypedDataRevision.LEGACY)===eG.TypedDataRevision.LEGACY?eG.TypedDataRevision.LEGACY:void 0}function aK(e){try{return tn(e)}catch(t){if(e7(e))return tn(tV(e));throw Error("Invalid BigNumberish: ".concat(e))}}function aq(e){return!!(e.message&&e.primaryType&&e.types&&aG(e))}function aY(e){return te(e)?e:tA(e)}function aZ(e){return"merkletree"===e.type}function aX(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"",a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:eG.TypedDataRevision.LEGACY,i=[t];return"*"===t[t.length-1]?i=[t.slice(0,-1)]:a===eG.TypedDataRevision.ACTIVE&&("enum"===t?i=[n]:t.match(/^\(.*\)$/)&&(i=t.slice(1,-1).split(",").map(e=>"*"===e[e.length-1]?e.slice(0,-1):e))),i.filter(t=>!r.includes(t)&&e[t]).reduce((t,r)=>[...t,...[r,...e[r].reduce((t,r)=>[...t,...aX(e,r.type,t,r.contains,a).filter(e=>!t.includes(e))],[])].filter(e=>!t.includes(e))],[])}function aJ(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eG.TypedDataRevision.LEGACY,n=r===eG.TypedDataRevision.ACTIVE?{...e,...az[r].presetTypes}:e,[a,...i]=aX(n,t,void 0,void 0,r),o=a?[a,...i.sort()]:[],s=az[r].escapeTypeString;return o.map(e=>{let t=n[e].map(e=>{let t="enum"===e.type&&r===eG.TypedDataRevision.ACTIVE?e.contains:e.type,n=t.match(/^\(.*\)$/)?"(".concat(t.slice(1,-1).split(",").map(e=>e?s(e):e).join(","),")"):s(t);return"".concat(s(e.name),":").concat(n)});return"".concat(s(e),"(").concat(t,")")}).join("")}function aQ(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:eG.TypedDataRevision.LEGACY;return tA(aJ(e,t,r))}function a$(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:eG.TypedDataRevision.LEGACY;if(e[t])return[t,a1(e,t,r,a)];if(az[a].presetTypes[t])return[t,a1(az[a].presetTypes,t,r,a)];if(t.endsWith("*")){let n=r.map(r=>a$(e,t.slice(0,-1),r,void 0,a)[1]);return[t,az[a].hashMethod(n)]}switch(t){case"enum":if(a===eG.TypedDataRevision.ACTIVE){let[i,o]=Object.entries(r)[0],s=e[n.parent].find(e=>e.name===n.key),c=e[s.contains],l=c.find(e=>e.name===i),u=c.indexOf(l),d=l.type.slice(1,-1).split(",").map((t,r)=>t?a$(e,t,o[r],void 0,a)[1]:t);return[t,az[a].hashMethod([u,...d])]}return[t,aK(r)];case"merkletree":{let t=function(e,t){if(t.parent&&t.key){let r=e[t.parent].find(e=>e.name===t.key);if(!aZ(r))throw Error("".concat(t.key," is not a merkle tree"));if(r.contains.endsWith("*"))throw Error("Merkle tree contain property must not be an array but was given ".concat(t.key));return r.contains}return"raw"}(e,n),{root:i}=new aM(r.map(r=>a$(e,t,r,void 0,a)[1]),az[a].hashMerkleMethod);return["felt",i]}case"selector":return["felt",aY(r)];case"string":if(a===eG.TypedDataRevision.ACTIVE){let e=tW(r),n=[e.data.length,...e.data,e.pending_word,e.pending_word_len];return[t,az[a].hashMethod(n)]}return[t,aK(r)];case"i128":if(a===eG.TypedDataRevision.ACTIVE){let e=BigInt(r);return aW(e,t,$),[t,aK(e<0n?Y+e:e)]}return[t,aK(r)];case"timestamp":case"u128":return a===eG.TypedDataRevision.ACTIVE&&aW(r,t,ee),[t,aK(r)];case"felt":case"shortstring":return a===eG.TypedDataRevision.ACTIVE&&aW(aK(r),t,Q),[t,aK(r)];case"ClassHash":case"ContractAddress":return a===eG.TypedDataRevision.ACTIVE&&aW(r,t,Q),[t,aK(r)];case"bool":return a===eG.TypedDataRevision.ACTIVE&&e$(e8(r),"Type mismatch for ".concat(t," ").concat(r)),[t,aK(r)];default:if(a===eG.TypedDataRevision.ACTIVE)throw Error("Unsupported type: ".concat(t));return[t,aK(r)]}}function a0(e,t,r){var n;let a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:eG.TypedDataRevision.LEGACY,[i,o]=(null!=(n=e[t])?n:az[a].presetTypes[t]).reduce((n,i)=>{let[o,s]=n;if(void 0===r[i.name]||null===r[i.name]&&"enum"!==i.type)throw Error("Cannot encode data: missing data for '".concat(i.name,"'"));let c=r[i.name],l={parent:t,key:i.name},[u,d]=a$(e,i.type,c,l,a);return[[...o,u],[...s,d]]},[["felt"],[aQ(e,t,a)]]);return[i,o]}function a1(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:eG.TypedDataRevision.LEGACY;return az[n].hashMethod(a0(e,t,r,n)[1])}function a2(e,t){if(!aq(e))throw Error("Typed data does not match JSON schema");let r=aG(e),{domain:n,hashMethod:a}=az[r];return a([tV("StarkNet Message"),a1(e.types,n,e.domain,r),t,a1(e.types,e.primaryType,e.message,r)])}function a3(e,t,r,n){let a=aq(e);if(!t_(e)&&!a)throw Error("message has a wrong format.");if(a&&void 0===n)throw Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(a&&!t_(n))throw Error("accountAddress shall be a BigNumberish");let i=a?a2(e,n):tn(e),o=Array.isArray(t)?new r1.Signature(BigInt(t[0]),BigInt(t[1])):t,s=tn(r);return r1.verify(o,i,s)}var a5=class{static async create(e){let t=new ew.RpcChannel({...e}),r=await t.getSpecVersion();if(nM(r)||eb.warn("Using incompatible node spec version ".concat(r)),nV("0.7",r))return new this({...e,specVersion:ed.v0_7_1});if(nV("0.8",r))return new this({...e,specVersion:ed.v0_8_1});throw new an("Provided RPC node specification version ".concat(r," is not compatible with the SDK. SDK supported RPC versions ").concat(Object.keys(ed).toString()))}fetch(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;return this.channel.fetch(e,t,r)}async getChainId(){return this.channel.getChainId()}readSpecVersion(){return this.channel.readSpecVersion()}async getSpecVersion(){return this.channel.getSpecVersion()}setUpSpecVersion(){return this.channel.setUpSpecVersion()}async getNonceForAddress(e,t){return this.channel.getNonceForAddress(e,t)}async getBlock(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(e){return this.channel.getBlockWithTxHashes(e)}async getBlockWithTxs(e){return this.channel.getBlockWithTxs(e)}async waitForBlock(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"pending",t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:5e3;if(e===eT.LATEST)return;let r=await this.getBlockNumber(),n=e===eT.PENDING?r+1:Number(tn(e));if(n<=r)return;let{retries:a}=this.channel,i=a,o=!1;for(;!o;)if(await this.getBlockNumber()===n?o=!0:await af(t),(i-=1)<=0)throw Error("waitForBlock() timed-out after ".concat(a," tries."))}async getL1GasPrice(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseL1GasPriceResponse)}async getL1MessageHash(e){let t=await this.channel.getTransactionByHash(e);e$("L1_HANDLER"===t.type,"This L2 transaction is not a L1 message.");let{calldata:r,contract_address:n,entry_point_selector:a,nonce:i}=t;return tI([r[0],n,i,a,r.length-1,...r.slice(1)])}async getBlockWithReceipts(e){return this.channel.getBlockWithReceipts(e)}async getBlockStateUpdate(e){return this.channel.getBlockStateUpdate(e)}async getBlockTransactionsTraces(e){return this.channel.getBlockTransactionsTraces(e)}async getBlockTransactionCount(e){return this.channel.getBlockTransactionCount(e)}async getTransaction(e){return this.channel.getTransactionByHash(e)}async getTransactionByHash(e){return this.channel.getTransactionByHash(e)}async getTransactionByBlockIdAndIndex(e,t){return this.channel.getTransactionByBlockIdAndIndex(e,t)}async getTransactionReceipt(e){let t=await this.channel.getTransactionReceipt(e);return new aU(this.responseParser.parseTransactionReceipt(t))}async getTransactionTrace(e){return this.channel.getTransactionTrace(e)}async getTransactionStatus(e){return this.channel.getTransactionStatus(e)}async getSimulateTransaction(e,t){return this.channel.simulateTransaction(e,t).then(e=>this.responseParser.parseSimulateTransactionResponse(e))}async waitForTransaction(e,t){return new aU(await this.channel.waitForTransaction(e,t))}async getStorageAt(e,t,r){return this.channel.getStorageAt(e,t,r)}async getClassHashAt(e,t){return this.channel.getClassHashAt(e,t)}async getClassByHash(e){return this.getClass(e)}async getClass(e,t){return this.channel.getClass(e,t).then(this.responseParser.parseContractClassResponse)}async getClassAt(e,t){return this.channel.getClassAt(e,t).then(this.responseParser.parseContractClassResponse)}async getContractVersion(e,t){let r,{blockIdentifier:n=this.channel.blockIdentifier,compiler:a=!0}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(e)r=await this.getClassAt(e,n);else if(t)r=await this.getClass(t,n);else throw Error("getContractVersion require contractAddress or classHash");return n7(r)?a?{cairo:"1",compiler:rb(r.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getInvokeEstimateFee(e,t,r,n){return this.channel.getEstimateFee([{type:eE.INVOKE,...e,...t}],{blockIdentifier:r,skipValidate:n}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getDeclareEstimateFee(e,t,r,n){return this.channel.getEstimateFee([{type:eE.DECLARE,...e,...t}],{blockIdentifier:r,skipValidate:n}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getDeployAccountEstimateFee(e,t,r,n){return this.channel.getEstimateFee([{type:eE.DEPLOY_ACCOUNT,...e,...t}],{blockIdentifier:r,skipValidate:n}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getEstimateFeeBulk(e,t){return this.channel.getEstimateFee(e,t).then(e=>this.responseParser.parseFeeEstimateBulkResponse(e))}async invokeFunction(e,t){return this.channel.invoke(e,t)}async declareContract(e,t){return this.channel.declare(e,t)}async deployAccountContract(e,t){return this.channel.deployAccount(e,t)}async callContract(e,t){return this.channel.callContract(e,t)}async estimateMessageFee(e,t){return this.channel.estimateMessageFee(e,t)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(e){return this.channel.getEvents(e)}async verifyMessageInStarknet(e,t,r,n,a){let i,o=aq(e);if(!t_(e)&&!o)throw Error("message has a wrong format.");if(!t_(r))throw Error("accountAddress shall be a BigNumberish");let s=o?a2(e,r):tn(e),c=a||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","0x617267656e742f696e76616c69642d7369676e6174757265","is invalid, with respect to the public key","0x697320696e76616c6964","INVALID_SIG","0x494e56414c49445f534947"]};for(let e of n?[n]:["isValidSignature","is_valid_signature"])try{let n=await this.callContract({contractAddress:tn(r),entrypoint:e,calldata:rX.compile({hash:tt(s).toString(),signature:nX(t)})});if(c.nokResponse.includes(n[0].toString()))return!1;if(0===c.okResponse.length||c.okResponse.includes(n[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(e){if(c.error.some(t=>e.message.includes(t)))return!1;i=e}throw Error("Signature verification Error: ".concat(i))}async isClassDeclared(e,t){let r;if(!e.classHash&&"contract"in e)r=n9(e).classHash;else if(e.classHash)r=e.classHash;else throw Error("contractClassIdentifier type not satisfied");try{return await this.getClass(r,t) instanceof Object}catch(e){if(e instanceof an)return!1;throw e}}async prepareInvocations(e){let t=[];for(let r of e)r.type===eE.DECLARE?await this.isClassDeclared("payload"in r?r.payload:r)||t.unshift(r):t.push(r);return t}async getL1MessagesStatus(e){if(this.channel instanceof aC.RpcChannel)return this.channel.getMessagesStatus(e);throw new an("Unsupported method for RPC version")}async getStorageProof(e,t,r,n){if(this.channel instanceof aC.RpcChannel)return this.channel.getStorageProof(e,t,r,n);throw new an("Unsupported method for RPC version")}async getCompiledCasm(e){if(this.channel instanceof aC.RpcChannel)return this.channel.getCompiledCasm(e);throw new an("Unsupported method for RPC version")}constructor(e){if(l._(this,"responseParser",void 0),l._(this,"channel",void 0),l._(this,"getStateUpdate",this.getBlockStateUpdate),e&&"channel"in e)this.channel=e.channel,this.responseParser="responseParser"in e?e.responseParser:new aH;else{if(e&&e.specVersion)if(nV("0.8",e.specVersion))this.channel=new aC.RpcChannel({...e,waitMode:!1});else if(nV("0.7",e.specVersion))this.channel=new ew.RpcChannel({...e,waitMode:!1});else throw Error("unsupported channel for spec version: ".concat(e.specVersion));else if(nV("0.8",em.get("rpcVersion")))this.channel=new aC.RpcChannel({...e,waitMode:!1});else if(nV("0.7",em.get("rpcVersion")))this.channel=new ew.RpcChannel({...e,waitMode:!1});else throw Error("unable to define spec version for channel");this.responseParser=new aH(null==e?void 0:e.feeMarginPercentage)}}},a6=e.r(451837),a8={};m(a8,{StarknetIdContract:()=>is,StarknetIdIdentityContract:()=>il,StarknetIdMulticallContract:()=>id,StarknetIdPfpContract:()=>im,StarknetIdPopContract:()=>ib,StarknetIdVerifierContract:()=>ip,dynamicCallData:()=>iE,dynamicFelt:()=>iv,execution:()=>i_,getStarknetIdContract:()=>ic,getStarknetIdIdentityContract:()=>iu,getStarknetIdMulticallContract:()=>ih,getStarknetIdPfpContract:()=>iy,getStarknetIdPopContract:()=>iw,getStarknetIdVerifierContract:()=>ig,isStarkDomain:()=>iS,useDecoded:()=>ii,useEncoded:()=>io});var a4="abcdefghijklmnopqrstuvwxyz0123456789-",a7=BigInt(a4.length+1),a9="",ie=BigInt(a4.length),it=BigInt(a9.length),ir=BigInt(a9.length+1);function ia(e){let t=0;for(;e.endsWith(a9[a9.length-1]);)e=e.substring(0,e.length-1),t+=1;return[e,t]}function ii(e){let t="";return(e.forEach(e=>{for(;e!==W;){let r=e%a7;if(e/=a7,r===BigInt(a4.length)){let r=e/ir;if(r===W){let n=e%ir;e=r,n===W?t+=a4[0]:t+=a9[Number(n)-1]}else t+=a9[Number(e%it)],e/=it}else t+=a4[Number(r)]}let[r,n]=ia(t);n&&(t=r+(n%2==0?a9[a9.length-1].repeat(n/2-1)+a9[0]+a4[1]:a9[a9.length-1].repeat((n-1)/2+1))),t+="."}),t)?t.concat("stark"):t}function io(e){let t=BigInt(0),r=BigInt(1);if(e.endsWith(a9[0]+a4[1])){let[t,r]=ia(e.substring(0,e.length-2));e=t+a9[a9.length-1].repeat(2*(r+1))}else{let[t,r]=ia(e);r&&(e=t+a9[a9.length-1].repeat(1+2*(r-1)))}for(let n=0;n<e.length;n+=1){let a=e[n],i=a4.indexOf(a),o=BigInt(a4.indexOf(a));-1!==i?n===e.length-1&&e[n]===a4[0]?(t+=r*ie,r*=a7*a7):(t+=r*o,r*=a7):-1!==a9.indexOf(a)&&(t+=r*ie,r*=a7,t+=r*BigInt(+(n===e.length-1)+a9.indexOf(a)),r*=it)}return t}var is={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function ic(e){switch(e){case el.SN_MAIN:return is.MAINNET;case el.SN_SEPOLIA:return is.TESTNET_SEPOLIA;default:throw Error("Starknet.id is not yet deployed on this network")}}var il={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function iu(e){switch(e){case el.SN_MAIN:return il.MAINNET;case el.SN_SEPOLIA:return il.TESTNET_SEPOLIA;default:throw Error("Starknet.id verifier contract is not yet deployed on this network")}}var id="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function ih(e){switch(e){case el.SN_MAIN:case el.SN_SEPOLIA:return id;default:throw Error("Starknet.id multicall contract is not yet deployed on this network")}}var ip={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function ig(e){switch(e){case el.SN_MAIN:return ip.MAINNET;case el.SN_SEPOLIA:return ip.TESTNET_SEPOLIA;default:throw Error("Starknet.id verifier contract is not yet deployed on this network")}}var im={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function iy(e){switch(e){case el.SN_MAIN:return im.MAINNET;case el.SN_SEPOLIA:return im.TESTNET_SEPOLIA;default:throw Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var ib={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function iw(e){switch(e){case el.SN_MAIN:return ib.MAINNET;case el.SN_SEPOLIA:return ib.TESTNET_SEPOLIA;default:throw Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function i_(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return new rS({Static:e,IfEqual:t?rv(t[0],t[1],t[2]):void 0,IfNotEqual:r?rv(r[0],r[1],r[2]):void 0})}function iv(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return new rS({Hardcoded:e,Reference:t?rv(t[0],t[1]):void 0})}function iE(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;return new rS({Hardcoded:e,Reference:t?rv(t[0],t[1]):void 0,ArrayReference:r?rv(r[0],r[1]):void 0})}function iS(e){return/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\.)*[a-z0-9-]{1,48}\.stark$/.test(e)}var ix=class e{async getStarkName(t,r){return e.getStarkName(this,t,r)}async getAddressFromStarkName(t,r){return e.getAddressFromStarkName(this,t,r)}async getStarkProfile(t,r,n,a,i,o,s){return e.getStarkProfile(this,t,r,n,a,i,o,s)}static async getStarkName(e,t,r){let n=await e.getChainId(),a=null!=r?r:ic(n);try{let r=(await e.callContract({contractAddress:a,entrypoint:"address_to_domain",calldata:rX.compile({address:t,hint:[]})})).map(e=>BigInt(e)).slice(1),n=ii(r);if(!n)throw Error("Starkname not found");return n}catch(e){if(e instanceof Error&&"Starkname not found"===e.message)throw e;throw Error("Could not get stark name")}}static async getAddressFromStarkName(e,t,r){let n=t.endsWith(".stark")?t:"".concat(t,".stark");if(!iS(n))throw Error("Invalid domain, must be a valid .stark domain");let a=await e.getChainId(),i=null!=r?r:ic(a);try{let t=n.replace(".stark","").split(".").map(e=>io(e).toString(10));return(await e.callContract({contractAddress:i,entrypoint:"domain_to_address",calldata:rX.compile({domain:t,hint:[]})}))[0]}catch(e){throw Error("Could not get address from stark name")}}static async getStarkProfile(e,t,r,n,a,i,o,s){let c=await e.getChainId(),l=null!=r?r:ic(c),u=null!=n?n:iu(c),d=null!=a?a:ig(c),h=null!=i?i:iy(c),f=null!=o?o:iw(c),p=null!=s?s:ih(c);try{let r=[{execution:i_({}),to:iE(l),selector:iE(tA("address_to_domain")),calldata:[iE(t),iE("0")]},{execution:i_({}),to:iv(l),selector:iv(tA("domain_to_id")),calldata:[iE(void 0,void 0,[0,0])]},{execution:i_({}),to:iv(u),selector:iv(tA("get_verifier_data")),calldata:[iE(void 0,[1,0]),iE(tV("twitter")),iE(d),iE("0")]},{execution:i_({}),to:iv(u),selector:iv(tA("get_verifier_data")),calldata:[iE(void 0,[1,0]),iE(tV("github")),iE(d),iE("0")]},{execution:i_({}),to:iv(u),selector:iv(tA("get_verifier_data")),calldata:[iE(void 0,[1,0]),iE(tV("discord")),iE(d),iE("0")]},{execution:i_({}),to:iv(u),selector:iv(tA("get_verifier_data")),calldata:[iE(void 0,[1,0]),iE(tV("proof_of_personhood")),iE(f),iE("0")]},{execution:i_({}),to:iv(u),selector:iv(tA("get_verifier_data")),calldata:[iE(void 0,[1,0]),iE(tV("nft_pp_contract")),iE(h),iE("0")]},{execution:i_({}),to:iv(u),selector:iv(tA("get_extended_verifier_data")),calldata:[iE(void 0,[1,0]),iE(tV("nft_pp_id")),iE("2"),iE(h),iE("0")]},{execution:i_(void 0,void 0,[6,0,0]),to:iv(void 0,[6,0]),selector:iv(tA("tokenURI")),calldata:[iE(void 0,[7,1]),iE(void 0,[7,2])]}],n=await e.callContract({contractAddress:p,entrypoint:"aggregate",calldata:rX.compile({calls:r})});if(Array.isArray(n)){let e=parseInt(n[0],16),t=[],r=1;for(let a=0;a<e;a+=1)if(r<n.length){let e=parseInt(n[r],16);r+=1;let a=n.slice(r,r+e);t.push(a),r+=e}else break;let a=ii(t[0].slice(1).map(e=>BigInt(e))),i="0x0"!==t[2][0]?BigInt(t[2][0]).toString():void 0,o="0x0"!==t[3][0]?BigInt(t[3][0]).toString():void 0,s="0x0"!==t[4][0]?BigInt(t[4][0]).toString():void 0,c="0x1"===t[5][0],l=("0x9"===n[0]?t[8].slice(1).map(e=>tM(e)).join(""):void 0)||"https://starknet.id/api/identicons/".concat(BigInt(t[1][0]).toString());return{name:a,twitter:i,github:o,discord:s,proofOfPersonhood:c,profilePicture:l}}throw Error("Error while calling aggregate function")}catch(e){if(e instanceof Error)throw e;throw Error("Could not get user stark profile data from address")}}},ik=class extends(0,a6.Mixin)(a5,ix){},iT=class{},iA=new a5({default:!0}),iB=class{},iI=class{async getPubKey(){return r1.getStarkKey(this.pk)}async signMessage(e,t){let r=a2(e,t);return this.signRaw(r)}async signTransaction(e,t){let r,n=ak(e,t.cairoVersion);if(Object.values(v.ETransactionVersion2).includes(t.version))r=nm({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version});else if(Object.values(v.ETransactionVersion3).includes(t.version))r=nm({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version,nonceDataAvailabilityMode:n2(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:n2(t.feeDataAvailabilityMode)});else throw Error("unsupported signTransaction version");return this.signRaw(r)}async signDeployAccountTransaction(e){let t,r=rX.compile(e.constructorCalldata);if(Object.values(v.ETransactionVersion2).includes(e.version))t=nb({...e,salt:e.addressSalt,constructorCalldata:r,version:e.version});else if(Object.values(v.ETransactionVersion3).includes(e.version))t=nb({...e,salt:e.addressSalt,compiledConstructorCalldata:r,version:e.version,nonceDataAvailabilityMode:n2(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:n2(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeployAccountTransaction version");return this.signRaw(t)}async signDeclareTransaction(e){let t;if(Object.values(v.ETransactionVersion2).includes(e.version))t=ny({...e,version:e.version});else if(Object.values(v.ETransactionVersion3).includes(e.version))t=ny({...e,version:e.version,nonceDataAvailabilityMode:n2(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:n2(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeclareTransaction version");return this.signRaw(t)}async signRaw(e){return r1.sign(e,this.pk)}constructor(e=r1.utils.randomPrivateKey()){l._(this,"pk",void 0),this.pk=e instanceof Uint8Array?N(e):tn(e)}},iC=e.r(394922),iO={};function iP(e){return new t0(e).toBigInt()}function iN(e){return t0.is(e)}function iR(e){return new t0(e).toUint256HexString()}m(iO,{bnToUint256:()=>iR,isUint256:()=>iN,uint256ToBN:()=>iP});var iD=class{async getPubKey(){return D(N(iC.secp256k1.getPublicKey(this.pk,!1)).padStart(130,"0").slice(2))}async signMessage(e,t){let r=a2(e,t),n=iC.secp256k1.sign(R(F(r)),this.pk);return this.formatEthSignature(n)}async signTransaction(e,t){let r,n=ak(e,t.cairoVersion);if(Object.values(v.ETransactionVersion2).includes(t.version))r=nm({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version});else if(Object.values(v.ETransactionVersion3).includes(t.version))r=nm({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version,nonceDataAvailabilityMode:n2(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:n2(t.feeDataAvailabilityMode)});else throw Error("unsupported signTransaction version");let a=iC.secp256k1.sign(R(F(r)),this.pk);return this.formatEthSignature(a)}async signDeployAccountTransaction(e){let t,r=rX.compile(e.constructorCalldata);if(Object.values(v.ETransactionVersion2).includes(e.version))t=nb({...e,salt:e.addressSalt,constructorCalldata:r,version:e.version});else if(Object.values(v.ETransactionVersion3).includes(e.version))t=nb({...e,salt:e.addressSalt,compiledConstructorCalldata:r,version:e.version,nonceDataAvailabilityMode:n2(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:n2(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeployAccountTransaction version");let n=iC.secp256k1.sign(R(F(t)),this.pk);return this.formatEthSignature(n)}async signDeclareTransaction(e){let t;if(Object.values(v.ETransactionVersion2).includes(e.version))t=ny({...e,version:e.version});else if(Object.values(v.ETransactionVersion3).includes(e.version))t=ny({...e,version:e.version,nonceDataAvailabilityMode:n2(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:n2(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeclareTransaction version");let r=iC.secp256k1.sign(R(F(t)),this.pk);return this.formatEthSignature(r)}formatEthSignature(e){let t=iR(e.r),r=iR(e.s);return[tn(t.low),tn(t.high),tn(r.low),tn(r.high),tn(e.recovery)]}constructor(e=al()){l._(this,"pk",void 0),this.pk=e instanceof Uint8Array?N(e).padStart(64,"0"):R(tn(e)).padStart(64,"0")}},iL=class{async getPubKey(){return this.pubKey||await this.getPublicKeys(),this.pubKey}async getFullPubKey(){return this.fullPubKey||await this.getPublicKeys(),this.fullPubKey}async getAppVersion(){if(!this.appVersion){let e=await this._transporter.send(Number("0x5a"),0,0,0);this.appVersion="".concat(e[0],".").concat(e[1],".").concat(e[2])}return this.appVersion}async signMessage(e,t){let r=a2(e,t);return this.signRaw(r)}async signTransaction(e,t){let r,n=ak(e,t.cairoVersion);if(Object.values(v.ETransactionVersion2).includes(t.version))r=nm({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version});else if(Object.values(v.ETransactionVersion3).includes(t.version))r=nm({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version,nonceDataAvailabilityMode:n2(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:n2(t.feeDataAvailabilityMode)});else throw Error("unsupported signTransaction version");return this.signRaw(r)}async signDeployAccountTransaction(e){let t,r=rX.compile(e.constructorCalldata);if(Object.values(v.ETransactionVersion2).includes(e.version))t=nb({...e,salt:e.addressSalt,constructorCalldata:r,version:e.version});else if(Object.values(v.ETransactionVersion3).includes(e.version))t=nb({...e,salt:e.addressSalt,compiledConstructorCalldata:r,version:e.version,nonceDataAvailabilityMode:n2(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:n2(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeployAccountTransaction version");return this.signRaw(t)}async signDeclareTransaction(e){let t;if(Object.values(v.ETransactionVersion2).includes(e.version))t=ny({...e,version:e.version});else if(Object.values(v.ETransactionVersion3).includes(e.version))t=ny({...e,version:e.version,nonceDataAvailabilityMode:n2(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:n2(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeclareTransaction version");return this.signRaw(t)}async signRaw(e){D(N(await this._transporter.send(Number("0x5a"),2,0,0,c.Buffer.from(this.pathBuffer))));let t=ty(tn(BigInt(e)<<4n)),r=Uint8Array.from(await this._transporter.send(Number("0x5a"),2,1,0,c.Buffer.from(t))),n=BigInt(D(N(r.subarray(1,33)))),a=BigInt(D(N(r.subarray(33,65)))),i=r[65];return new r1.Signature(n,a).addRecoveryBit(i)}async getPublicKeys(){let e=this.pathBuffer,t=Uint8Array.from(await this._transporter.send(Number("0x5a"),1,0,0,c.Buffer.from(e)));this.pubKey=D(N(t.subarray(1,33))),this.fullPubKey=D(N(t.subarray(0,65)))}constructor(e,t,r="LedgerW",n=iH){l._(this,"transporter",void 0),l._(this,"_transporter",void 0),l._(this,"accountID",void 0),l._(this,"eip2645applicationName",void 0),l._(this,"pathBuffer",void 0),l._(this,"appVersion",void 0),l._(this,"pubKey",void 0),l._(this,"fullPubKey",void 0),e$(t>=0,"Ledger account ID shall not be a negative number."),e$(t<=K,"Ledger account ID shall be < 2**31."),e$(!!r,"Ledger application name shall not be empty."),this.transporter=e,this._transporter=this.transporter,this.accountID=t,this.pubKey="",this.fullPubKey="",this.eip2645applicationName=r,this.appVersion="",this.pathBuffer=n(this.accountID,this.eip2645applicationName)}};function iH(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LedgerW",r=new Uint8Array([128,0,10,85]),n=new Uint8Array([71,65,233,201]),a="LedgerW"===t?new Uint8Array([43,206,231,219]):tw(t),i=new Uint8Array([0,0,0,0]);return M([r,n,a,i,ty(D(R(tn(e)).padStart(8,"0"))),new Uint8Array([0,0,0,0])])}var iU=e.r(771952);function iF(e){let t=R(tn(e7(e)?D(e):e)).padStart(64,"0");return D(t)}function iV(e){let t=iF(e);if(!t.match(/^(0x)?[0-9a-fA-F]{64}$/))throw Error("Invalid Address Format");return tl(t,W,X-1n,"Starknet Address"),t}function iM(e){let t=R(iV(e)).toLowerCase().split(""),r=R(tk(e)),n=(0,iU.hexToBytes)(r.padStart(64,"0"));for(let e=0;e<t.length;e+=2)n[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&n[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return D(t.join(""))}function ij(e){return iM(e)===e}var iz=class extends iL{async signTransaction(e,t){let r=ak(e,t.cairoVersion);if(Object.values(v.ETransactionVersion2).includes(t.version)){let n=nm({...t,senderAddress:t.walletAddress,compiledCalldata:r,version:t.version}),a=await this.signTxV1(t,e);return e$(tt(n)===a.hash,"The V1 transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),a.signature}if(Object.values(v.ETransactionVersion3).includes(t.version)){let n=nm({...t,senderAddress:t.walletAddress,compiledCalldata:r,version:t.version,nonceDataAvailabilityMode:n2(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:n2(t.feeDataAvailabilityMode)}),a=await this.signTxV3(t,e);return e$(tt(n)===a.hash,"The V3 transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),a.signature}throw Error("unsupported signTransaction version")}async signDeployAccountTransaction(e){let t,r=rX.compile(e.constructorCalldata);if(Object.values(v.ETransactionVersion2).includes(e.version)){t=nb({...e,salt:e.addressSalt,constructorCalldata:r,version:e.version});let n=await this.signDeployAccountV1(e);return e$(tt(t)===n.hash,"The transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),n.signature}if(Object.values(v.ETransactionVersion3).includes(e.version)){t=nb({...e,salt:e.addressSalt,compiledConstructorCalldata:r,version:e.version,nonceDataAvailabilityMode:n2(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:n2(e.feeDataAvailabilityMode)});let n=await this.signDeployAccountV3(e);return e$(tt(t)===n.hash,"The transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),n.signature}throw Error("unsupported signDeployAccountTransaction version")}convertBnToLedger(e){return ty(iF(tn(e)))}decodeSignatureLedger(e){let t=BigInt(D(N(e.subarray(0,32)))),r=BigInt(D(N(e.subarray(33,65)))),n=BigInt(D(N(e.subarray(65,97)))),a=e[97];return{hash:t,signature:new r1.Signature(r,n).addRecoveryBit(a)}}encodeCall(e){let t=this.convertBnToLedger(e.contractAddress),r=ty(iF(tB(e.entrypoint))),n=new Uint8Array([]);e.calldata&&(n=M(rX.compile(e.calldata).map(e=>this.convertBnToLedger(e))));let a=M([t,r,n]),i=[];for(let e=0;e<a.length;e+=224)i.push(a.subarray(e,e+224));return i}async signTxV1(e,t){await this._transporter.send(Number("0x5a"),4,0,0,c.Buffer.from(this.pathBuffer));let r=this.convertBnToLedger(e.walletAddress),n=this.convertBnToLedger(e.maxFee),a=M([r,n,this.convertBnToLedger(e.chainId),this.convertBnToLedger(e.nonce)]);await this._transporter.send(Number("0x5a"),4,1,0,c.Buffer.from(a));let i=this.convertBnToLedger(t.length);await this._transporter.send(Number("0x5a"),4,2,0,c.Buffer.from(i));let o=new Uint8Array(0);for(let e of t){let t=this.encodeCall(e);await this._transporter.send(Number("0x5a"),4,3,0,c.Buffer.from(t[0])),t.length>1&&t.slice(1).forEach(async e=>{await this._transporter.send(Number("0x5a"),4,3,1,c.Buffer.from(e))}),o=await this._transporter.send(Number("0x5a"),4,3,2)}return this.decodeSignatureLedger(o)}async signTxV3(e,t){e$(e.paymasterData.length<=7,"Paymaster data includes more than 7 items."),e$(e.accountDeploymentData.length<=7,"accountDeploymentData includes more than 7 items"),await this._transporter.send(Number("0x5a"),3,0,0,c.Buffer.from(this.pathBuffer));let r=this.convertBnToLedger(e.walletAddress),n=this.convertBnToLedger(e.tip),a=this.convertBnToLedger(e.chainId),i=this.convertBnToLedger(e.nonce),o=this.convertBnToLedger(no(e.nonceDataAvailabilityMode===v.EDataAvailabilityMode.L1?v.EDAMode.L1:v.EDAMode.L2,e.feeDataAvailabilityMode===v.EDataAvailabilityMode.L1?v.EDAMode.L1:v.EDAMode.L2)),s=M([r,n,this.convertBnToLedger(ns(e.resourceBounds)),this.convertBnToLedger(nc(e.resourceBounds)),a,i,o]);await this._transporter.send(Number("0x5a"),3,1,0,c.Buffer.from(s));let l=M(e.paymasterData.map(e=>this.convertBnToLedger(e)));await this._transporter.send(Number("0x5a"),3,2,0,c.Buffer.from(l));let u=M(e.paymasterData.map(e=>this.convertBnToLedger(e)));await this._transporter.send(Number("0x5a"),3,3,0,c.Buffer.from(u));let d=this.convertBnToLedger(t.length);await this._transporter.send(Number("0x5a"),3,4,0,c.Buffer.from(d));let h=new Uint8Array(0);for(let e of t){let t=this.encodeCall(e);await this._transporter.send(Number("0x5a"),3,5,0,c.Buffer.from(t[0])),t.length>1&&t.slice(1).forEach(async e=>{await this._transporter.send(Number("0x5a"),3,5,1,c.Buffer.from(e))}),h=await this._transporter.send(Number("0x5a"),3,5,2)}return this.decodeSignatureLedger(h)}async signDeployAccountV1(e){await this._transporter.send(Number("0x5a"),6,0,0,c.Buffer.from(this.pathBuffer));let t=this.convertBnToLedger(e.contractAddress),r=this.convertBnToLedger(e.classHash),n=this.convertBnToLedger(e.addressSalt),a=M([t,r,n,this.convertBnToLedger(e.chainId),this.convertBnToLedger(e.nonce)]);await this._transporter.send(Number("0x5a"),6,1,0,c.Buffer.from(a));let i=this.convertBnToLedger(e.maxFee);await this._transporter.send(Number("0x5a"),6,2,0,c.Buffer.from(i));let o=rX.compile(e.constructorCalldata),s=this.convertBnToLedger(o.length);await this._transporter.send(Number("0x5a"),6,3,0,c.Buffer.from(s));let l=M(o.map(e=>this.convertBnToLedger(e))),u=[];for(let e=0;e<l.length;e+=224)u.push(l.subarray(e,e+224));let d=new Uint8Array(0);for(let e of u)d=await this._transporter.send(Number("0x5a"),6,4,0,c.Buffer.from(e));return this.decodeSignatureLedger(d)}async signDeployAccountV3(e){await this._transporter.send(Number("0x5a"),5,0,0,c.Buffer.from(this.pathBuffer));let t=this.convertBnToLedger(e.contractAddress),r=this.convertBnToLedger(e.chainId),n=this.convertBnToLedger(e.nonce),a=this.convertBnToLedger(no(e.nonceDataAvailabilityMode===v.EDataAvailabilityMode.L1?v.EDAMode.L1:v.EDAMode.L2,e.feeDataAvailabilityMode===v.EDataAvailabilityMode.L1?v.EDAMode.L1:v.EDAMode.L2)),i=M([t,r,n,a,this.convertBnToLedger(e.classHash),this.convertBnToLedger(e.addressSalt)]);await this._transporter.send(Number("0x5a"),5,1,0,c.Buffer.from(i));let o=this.convertBnToLedger(e.tip),s=M([o,this.convertBnToLedger(ns(e.resourceBounds)),this.convertBnToLedger(nc(e.resourceBounds))]);await this._transporter.send(Number("0x5a"),5,2,0,c.Buffer.from(s));let l=M(e.paymasterData.map(e=>this.convertBnToLedger(e)));await this._transporter.send(Number("0x5a"),5,3,0,c.Buffer.from(l));let u=rX.compile(e.constructorCalldata),d=this.convertBnToLedger(u.length);await this._transporter.send(Number("0x5a"),5,4,0,c.Buffer.from(d));let h=M(u.map(e=>this.convertBnToLedger(e))),f=[];for(let e=0;e<h.length;e+=224)f.push(h.subarray(e,e+224));let p=new Uint8Array(0);for(let e of f)p=await this._transporter.send(Number("0x5a"),5,5,0,c.Buffer.from(e));return this.decodeSignatureLedger(p)}constructor(e,t,r="LedgerW",n=iW){super(e,t,r,n)}};function iW(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"LedgerW",r=new Uint8Array([ei,0,10,85]),n=new Uint8Array([71|ei,65,233,201]),a="LedgerW"===t?new Uint8Array([43,206,231,219]):tw(t),i=M([new Uint8Array([a[0]|ei]),a.subarray(1)]),o=new Uint8Array([ei,0,0,0]);return M([r,n,i,o,ty(D(R(tn(BigInt(e)|eo)).padStart(8,"0"))),new Uint8Array([0,0,0,0])])}var iG=class extends iz{async signTxV1(e,t){await this._transporter.send(Number("0x5a"),4,0,0,c.Buffer.from(this.pathBuffer));let r=this.convertBnToLedger(e.walletAddress),n=this.convertBnToLedger(e.maxFee),a=M([r,n,this.convertBnToLedger(e.chainId),this.convertBnToLedger(e.nonce)]);await this._transporter.send(Number("0x5a"),4,1,0,c.Buffer.from(a));let i=this.convertBnToLedger(t.length);await this._transporter.send(Number("0x5a"),4,2,0,c.Buffer.from(i));let o=new Uint8Array(0);for(let e of t){let t=this.encodeCall(e);o=await this._transporter.send(Number("0x5a"),4,3,0,c.Buffer.from(t[0])),t.length>1&&t.slice(1).forEach(async e=>{o=await this._transporter.send(Number("0x5a"),4,3,1,c.Buffer.from(e))})}return this.decodeSignatureLedger(o)}async signTxV3(e,t){e$(e.paymasterData.length<=7,"Paymaster data includes more than 7 items."),e$(e.accountDeploymentData.length<=7,"accountDeploymentData includes more than 7 items"),await this._transporter.send(Number("0x5a"),3,0,0,c.Buffer.from(this.pathBuffer));let r=this.convertBnToLedger(e.walletAddress),n=this.convertBnToLedger(e.chainId),a=M([r,n,this.convertBnToLedger(e.nonce),this.convertBnToLedger(no(n2(e.nonceDataAvailabilityMode),n2(e.feeDataAvailabilityMode)))]);if(await this._transporter.send(Number("0x5a"),3,1,0,c.Buffer.from(a)),eR(e.resourceBounds)){let t=this.convertBnToLedger(e.tip),r=this.convertBnToLedger(ns(e.resourceBounds)),n=M([t,r,this.convertBnToLedger(nc(e.resourceBounds)),this.convertBnToLedger(nl(e.resourceBounds))]);await this._transporter.send(Number("0x5a"),3,2,0,c.Buffer.from(n))}else{let t=this.convertBnToLedger(e.tip),r=M([t,this.convertBnToLedger(ns(e.resourceBounds)),this.convertBnToLedger(nc(e.resourceBounds))]);await this._transporter.send(Number("0x5a"),3,2,0,c.Buffer.from(r))}let i=M(e.paymasterData.map(e=>this.convertBnToLedger(e)));await this._transporter.send(Number("0x5a"),3,3,0,c.Buffer.from(i));let o=M(e.paymasterData.map(e=>this.convertBnToLedger(e)));await this._transporter.send(Number("0x5a"),3,4,0,c.Buffer.from(o));let s=this.convertBnToLedger(t.length);await this._transporter.send(Number("0x5a"),3,5,0,c.Buffer.from(s));let l=new Uint8Array(0);for(let e of t){let t=this.encodeCall(e);l=await this._transporter.send(Number("0x5a"),3,6,0,c.Buffer.from(t[0])),t.length>1&&t.slice(1).forEach(async e=>{l=await this._transporter.send(Number("0x5a"),3,6,1,c.Buffer.from(e))})}return this.decodeSignatureLedger(l)}async signDeployAccountV1(e){await this._transporter.send(Number("0x5a"),6,0,0,c.Buffer.from(this.pathBuffer));let t=this.convertBnToLedger(e.contractAddress),r=this.convertBnToLedger(e.classHash),n=this.convertBnToLedger(e.addressSalt),a=this.convertBnToLedger(e.maxFee),i=M([t,r,n,a,this.convertBnToLedger(e.chainId),this.convertBnToLedger(e.nonce)]);await this._transporter.send(Number("0x5a"),6,1,0,c.Buffer.from(i));let o=rX.compile(e.constructorCalldata),s=this.convertBnToLedger(o.length);await this._transporter.send(Number("0x5a"),6,2,0,c.Buffer.from(s));let l=M(o.map(e=>this.convertBnToLedger(e))),u=[];for(let e=0;e<l.length;e+=224)u.push(l.subarray(e,e+224));let d=new Uint8Array(0);for(let e of u)d=await this._transporter.send(Number("0x5a"),6,3,0,c.Buffer.from(e));return this.decodeSignatureLedger(d)}async signDeployAccountV3(e){await this._transporter.send(Number("0x5a"),5,0,0,c.Buffer.from(this.pathBuffer));let t=this.convertBnToLedger(e.contractAddress),r=this.convertBnToLedger(e.chainId),n=this.convertBnToLedger(e.nonce),a=this.convertBnToLedger(no(n2(e.nonceDataAvailabilityMode),n2(e.feeDataAvailabilityMode))),i=M([t,r,n,a,this.convertBnToLedger(e.classHash),this.convertBnToLedger(e.addressSalt)]);if(await this._transporter.send(Number("0x5a"),5,1,0,c.Buffer.from(i)),eR(e.resourceBounds)){let t=this.convertBnToLedger(e.tip),r=this.convertBnToLedger(ns(e.resourceBounds)),n=M([t,r,this.convertBnToLedger(nc(e.resourceBounds)),this.convertBnToLedger(nl(e.resourceBounds))]);await this._transporter.send(Number("0x5a"),5,2,0,c.Buffer.from(n))}else{let t=this.convertBnToLedger(e.tip),r=M([t,this.convertBnToLedger(ns(e.resourceBounds)),this.convertBnToLedger(nc(e.resourceBounds))]);await this._transporter.send(Number("0x5a"),5,2,0,c.Buffer.from(r))}let o=M(e.paymasterData.map(e=>this.convertBnToLedger(e)));await this._transporter.send(Number("0x5a"),5,3,0,c.Buffer.from(o));let s=rX.compile(e.constructorCalldata),l=this.convertBnToLedger(s.length);await this._transporter.send(Number("0x5a"),5,4,0,c.Buffer.from(l));let u=M(s.map(e=>this.convertBnToLedger(e))),d=[];for(let e=0;e<u.length;e+=224)d.push(u.subarray(e,e+224));let h=new Uint8Array(0);for(let e of d)h=await this._transporter.send(Number("0x5a"),5,5,0,c.Buffer.from(e));return this.decodeSignatureLedger(h)}encodeCall(e){let t=this.convertBnToLedger(e.contractAddress),r=ty(iF(tB(e.entrypoint))),n=new Uint8Array([]);if(e.calldata){let t=rX.compile(e.calldata);n=M([this.convertBnToLedger(t.length),...t.map(e=>this.convertBnToLedger(e))])}else n=this.convertBnToLedger("0x00");let a=M([t,r,n]),i=[];for(let e=0;e<a.length;e+=224)i.push(a.subarray(e,e+224));return i}constructor(e,t,r="LedgerW",n=iW){super(e,t,r,n)}},iK={};function iq(e){return"event"===e.type}function iY(e){return rm(e)?function(e){let t=e.filter(e=>iq(e)&&"struct"===e.kind),r=e.filter(e=>iq(e)&&"enum"===e.kind);return t.reduce((e,t)=>{let n=[],{name:a}=t,i=!1,o=e=>e.type===a;for(;;){let e=r.find(e=>e.variants.some(o));if(e5(e))break;let t=e.variants.find(o);n.unshift(t.name),"flat"===t.kind&&(i=!0),a=e.name}if(0===n.length)throw Error("inconsistency in ABI events definition.");i&&(n=[n[n.length-1]]);let s=n.pop(),c={[D(r1.keccak(C(s)).toString(16))]:t};for(;n.length>0;)c={[D(r1.keccak(C(n.pop())).toString(16))]:c};return function e(t,r){let n={...t};return e9(t)&&e9(r)&&Object.keys(r).forEach(a=>{e9(r[a])&&a in t?n[a]=e(t[a],r[a]):Object.assign(n,{[a]:r[a]})}),n}(e,c={...c})},{})}(e):e.filter(e=>"event"===e.type).reduce((e,t)=>{let r=t.name,n={...t};return n.name=r,{...e,[D(r1.keccak(C(r)).toString(16))]:n}},{})}function iZ(e,t,r,n){return e.flat().reduce((e,a)=>{var i,o,s;let c=JSON.parse(JSON.stringify(a)),l=t[null!=(s=c.keys.shift())?s:0];if(!l)return e;for(;!l.name;){let e=c.keys.shift();e$(!!e,'Not enough data in "keys" property of this event.'),l=l[e]}let u={};u[l.name]={};let d=c.keys[Symbol.iterator](),h=c.data[Symbol.iterator](),f=(null==(i=l.members)?void 0:i.filter(e=>"key"===e.kind))||l.keys,p=(null==(o=l.members)?void 0:o.filter(e=>"data"===e.kind))||l.data;return f.forEach(e=>{u[l.name][e.name]=rM(d,e,r,n,u[l.name])}),p.forEach(e=>{u[l.name][e.name]=rM(h,e,r,n,u[l.name])}),"block_hash"in c&&(u.block_hash=c.block_hash),"block_number"in c&&(u.block_number=c.block_number),"transaction_hash"in c&&(u.transaction_hash=c.transaction_hash),e.push(u),e},[])}function iX(e){var t;if(!(null==(t=e.events)?void 0:t.length))throw Error("UDC emitted event is empty");let r=e.events.find(e=>tc(e.from_address)===tc(et.ADDRESS))||{data:[]};return{transaction_hash:e.transaction_hash,contract_address:r.data[0],address:r.data[0],deployer:r.data[1],unique:r.data[2],classHash:r.data[3],calldata_len:r.data[4],calldata:r.data.slice(5,5+parseInt(r.data[4],16)),salt:r.data[r.data.length-1]}}m(iK,{getAbiEvents:()=>iY,isAbiEvent:()=>iq,parseEvents:()=>iZ,parseUDCEvent:()=>iX});var iJ={};function iQ(e){return"calldata_len"in e?{To:e.to,Selector:e.selector,Calldata:e.calldata}:e}function i$(e){var t;let r=null!=(t=e.calldata)?t:[],n=Array.isArray(r)?r:rX.compile(r);return{to:e.contractAddress,selector:tA(e.entrypoint),calldata:n}}function i0(e,t){let r=i$(e);return"1"===t?{...r,calldata_len:r.calldata.length,calldata:r.calldata}:{To:r.to,Selector:r.selector,Calldata:r.calldata}}function i1(e,t){return{name:"Account.execute_from_outside",version:t,chainId:e,..."2"===t?{revision:"1"}:{}}}function i2(e,t,r,n,a){return"1"===a?{types:ej,primaryType:"OutsideExecution",domain:i1(e,a),message:{...t,nonce:r,calls_len:n.length,calls:n.map(e=>i0(e,a))}}:{types:ez,primaryType:"OutsideExecution",domain:i1(e,a),message:{Caller:t.caller,Nonce:r,"Execute After":t.execute_after,"Execute Before":t.execute_before,Calls:n.map(e=>i0(e,a))}}}function i3(e){let t=e.outsideExecution,r=nX(e.signature);return rX.compile({outside_execution:t,signature:r})}function i5(e){return(Array.isArray(e)?e:[e]).map(e=>{let t;if(e.version===eW.V1)t="execute_from_outside";else if(e.version===eW.V2)t="execute_from_outside_v2";else throw Error("Unsupported OutsideExecution version");return{contractAddress:tn(e.signerAddress),entrypoint:t,calldata:i3(e)}})}m(iJ,{buildExecuteFromOutsideCall:()=>i5,buildExecuteFromOutsideCallData:()=>i3,getOutsideCall:()=>i$,getTypedData:()=>i2,toOutsideCallV2:()=>iQ});var i6={};async function i8(e,t,r){let n={contractAddress:tn(t),entrypoint:"supports_interface",calldata:[tn(r)]};try{let t=await e.callContract(n);return 0n!==BigInt(t[0])}catch(e){return!1}}m(i6,{supportsInterface:()=>i8});var i4={};m(i4,{assertCallsAreStrictlyEqual:()=>i9,assertPaymasterTransactionSafety:()=>oe,getDefaultPaymasterNodeUrl:()=>i7});var i7=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t||eb.info("Using default public node url, please provide nodeUrl in provider options!");let r=ep[null!=e?e:ec.SN_SEPOLIA],n=Math.floor(Math.random()*r.length);return r[n]};function i9(e,t){let r="Provided calls are not strictly equal to the returned calls";e$(t.length-1===e.length,"".concat(r,": Expected ").concat(e.length+1," calls, got ").concat(t.length));for(let n=0;n<e.length;n+=1){let a=e[n],i=iQ(t[n]),o=e=>tt(e).toString(16).toLowerCase();e$(o(a.contractAddress)===o(i.To),"".concat(r,": Contract address mismatch at call ").concat(n,". Expected: ").concat(a.contractAddress,", Got: ").concat(i.To)),e$(tA(a.entrypoint)===i.Selector,"".concat(r,": Entrypoint mismatch at call ").concat(n,". Expected: ").concat(a.entrypoint,", Got: ").concat(i.Selector));let s=rX.toCalldata(a.calldata),c=rX.toCalldata(i.Calldata);e$(s.length===c.length,"".concat(r,": Calldata length mismatch at call ").concat(n,". Expected length: ").concat(s.length,", Got length: ").concat(c.length));for(let e=0;e<s.length;e+=1)e$(BigInt(s[e])===BigInt(c[e]),"".concat(r,": Calldata value mismatch at call ").concat(n,", parameter ").concat(e,". Expected: ").concat(s[e],", Got: ").concat(c[e]))}}var oe=(e,t,r,n)=>{if("sponsored"!==r.feeMode.mode&&("invoke"===e.type||"deploy_and_invoke"===e.type)){let a="calls"in e.typed_data.message?e.typed_data.message.calls:e.typed_data.message.Calls;i9(t,a),((e,t)=>{e$(BigInt(iQ(e[e.length-1]).To)===BigInt(t),"Gas token address is not equal to the provided gas token")})(a,r.feeMode.gasToken),n&&(e$(e.fee.suggested_max_fee_in_gas_token<=n,"Gas token price is too high"),((e,t)=>{let r=iQ(e[e.length-1]);e$(BigInt(rX.toCalldata(r.Calldata)[1])===BigInt(t),"Gas token value is not equal to the provided gas fees")})(a,e.fee.suggested_max_fee_in_gas_token))}},ot=e=>"sponsored"===e.mode?{mode:"sponsored"}:{mode:"default",gas_token:e.gasToken},or=e=>e?{execute_after:e.executeAfter||1,execute_before:e.executeBefore}:void 0,on=e=>({version:e.version,feeMode:(e=>"sponsored"===e.mode?{mode:"sponsored"}:{mode:"default",gasToken:e.gas_token})(e.fee_mode),timeBounds:(e=>e?{executeAfter:e.execute_after,executeBefore:e.execute_before}:void 0)(e.time_bounds)}),oa={headers:{"Content-Type":"application/json"}},oi=class e{fetch(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,n={id:r,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:eJ(n),headers:this.headers})}errorHandler(e,t,r,n){if(r)throw new aa(r,e,t);if(n instanceof an)throw n;if(n)throw Error(n.message)}async fetchEndpoint(e,t){try{this.requestId+=1;let r=await this.fetch(e,t,this.requestId),{error:n,result:a}=await r.json();return this.errorHandler(e,t,n),a}catch(n){var r;throw this.errorHandler(e,t,null==n||null==(r=n.response)?void 0:r.data,n),n}}async isAvailable(){return this.fetchEndpoint("paymaster_isAvailable")}async buildTransaction(e,t){let r;switch(e.type){case"invoke":case"deploy_and_invoke":r={...e,invoke:{user_address:e.invoke.userAddress,calls:e.invoke.calls.map(e=>({to:e.contractAddress,selector:tA(e.entrypoint),calldata:rX.toHex(e.calldata)}))}};break;default:r=e}let n={version:t.version,fee_mode:ot(t.feeMode),time_bounds:or(t.timeBounds)},a=await this.fetchEndpoint("paymaster_buildTransaction",{transaction:r,parameters:n}),i={gas_token_price_in_strk:BigInt(a.fee.gas_token_price_in_strk),estimated_fee_in_strk:BigInt(a.fee.estimated_fee_in_strk),estimated_fee_in_gas_token:BigInt(a.fee.estimated_fee_in_gas_token),suggested_max_fee_in_strk:BigInt(a.fee.suggested_max_fee_in_strk),suggested_max_fee_in_gas_token:BigInt(a.fee.suggested_max_fee_in_gas_token)};switch(a.type){case"invoke":return{type:"invoke",typed_data:a.typed_data,parameters:on(a.parameters),fee:i};case"deploy_and_invoke":return{type:"deploy_and_invoke",deployment:a.deployment,typed_data:a.typed_data,parameters:on(a.parameters),fee:i};default:return{type:"deploy",deployment:a.deployment,parameters:on(a.parameters),fee:i}}}async executeTransaction(e,t){let r;switch(e.type){case"invoke":case"deploy_and_invoke":r={...e,invoke:{user_address:e.invoke.userAddress,typed_data:e.invoke.typedData,signature:nQ(e.invoke.signature)}};break;default:r=e}let n={version:t.version,fee_mode:ot(t.feeMode),time_bounds:or(t.timeBounds)};return this.fetchEndpoint("paymaster_executeTransaction",{transaction:r,parameters:n})}async getSupportedTokens(){return this.fetchEndpoint("paymaster_getSupportedTokens").then(e=>e.map(e=>({token_address:e.token_address,decimals:e.decimals,priceInStrk:BigInt(e.price_in_strk)})))}constructor(t){if(l._(this,"nodeUrl",void 0),l._(this,"headers",void 0),l._(this,"baseFetch",void 0),l._(this,"requestId",void 0),t instanceof e){this.nodeUrl=t.nodeUrl,this.headers={...oa.headers,...t.headers},this.baseFetch=t.baseFetch,this.requestId=t.requestId;return}if(t&&"nodeUrl"in t&&"headers"in t&&"baseFetch"in t){var r,n;this.nodeUrl=null!=(r=t.nodeUrl)?r:i7(void 0),this.headers={...oa.headers,...t.headers},this.baseFetch=null!=(n=t.baseFetch)?n:ad,this.requestId=0;return}let{nodeUrl:a,headers:i,baseFetch:o}=t||{};a&&Object.values(ec).includes(a)?this.nodeUrl=i7(a,null==t?void 0:t.default):a?this.nodeUrl=a:this.nodeUrl=i7(void 0,null==t?void 0:t.default),this.baseFetch=null!=o?o:ad,this.headers={...oa.headers,...i},this.requestId=0}},oo=class{},os=new oi({default:!0}),oc=class extends ik{static async create(){throw new an("Not supported")}getPreferredVersion(e,t){return this.transactionVersion===eB.V3?t:this.transactionVersion===eB.V2?e:eB.V3}async getNonce(e){return super.getNonceForAddress(this.address,e)}async getNonceSafe(e){try{return tt(null!=e?e:await this.getNonce())}catch(e){return 0n}}async getCairoVersion(e){if(!this.cairoVersion){let{cairo:t}=e?await super.getContractVersion(void 0,e):await super.getContractVersion(this.address);this.cairoVersion=t}return this.cairoVersion}async estimateFee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return this.estimateInvokeFee(e,t)}async estimateInvokeFee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{nonce:r,blockIdentifier:n,version:a,skipValidate:i=!0}=t,o=Array.isArray(e)?e:[e],s=tt(null!=r?r:await this.getNonce()),c=n3(this.getPreferredVersion(eB.F1,eB.F3),n5(a)),l=await this.getChainId(),u={...n6(t,await this.channel.setUpSpecVersion()),walletAddress:this.address,nonce:s,maxFee:W,version:c,chainId:l,cairoVersion:await this.getCairoVersion(),skipValidate:i},d=await this.buildInvocation(o,u);return super.getInvokeEstimateFee({...d},{...n6(t,await this.channel.setUpSpecVersion()),version:c,nonce:s},n,t.skipValidate)}async estimateDeclareFee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{blockIdentifier:r,nonce:n,version:a,skipValidate:i=!0}=t,o=tt(null!=n?n:await this.getNonce()),s=n3(n7(e.contract)?this.getPreferredVersion(eB.F2,eB.F3):eB.F1,n5(a)),c=await this.getChainId(),l=await this.buildDeclarePayload(e,{...n6(t,await this.channel.setUpSpecVersion()),nonce:o,chainId:c,version:s,walletAddress:this.address,maxFee:W,cairoVersion:void 0,skipValidate:i});return super.getDeclareEstimateFee(l,{...n6(t,await this.channel.setUpSpecVersion()),version:s,nonce:o},r,t.skipValidate)}async estimateAccountDeployFee(e){let{classHash:t,addressSalt:r=0,constructorCalldata:n=[],contractAddress:a}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{blockIdentifier:o,version:s,skipValidate:c=!0}=i,l=n3(this.getPreferredVersion(eB.F1,eB.F3),n5(s)),u=await this.getChainId(),d=await this.buildAccountDeployPayload({classHash:t,addressSalt:r,constructorCalldata:n,contractAddress:a},{...n6(i,await this.channel.setUpSpecVersion()),nonce:W,chainId:u,version:l,walletAddress:this.address,maxFee:W,cairoVersion:void 0,skipValidate:c});return super.getDeployAccountEstimateFee({...d},{...n6(i,await this.channel.setUpSpecVersion()),version:l,nonce:W},o,i.skipValidate)}async estimateDeployFee(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=this.buildUDCContractPayload(e);return this.estimateInvokeFee(r,t)}async estimateFeeBulk(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.length)throw TypeError("Invocations should be non-empty array");let{nonce:r,blockIdentifier:n,version:a,skipValidate:i}=t,o=await this.accountInvocationsFactory(e,{...n6(t,await this.channel.setUpSpecVersion()),versions:[eB.F1,n3(this.getPreferredVersion(eB.F2,eB.F3),a)],nonce:r,blockIdentifier:n,skipValidate:i});return super.getEstimateFeeBulk(o,{blockIdentifier:n,skipValidate:i})}async simulateTransaction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};if(!e.length)throw TypeError("Invocations should be non-empty array");let{nonce:r,blockIdentifier:n,skipValidate:a=!0,skipExecute:i,version:o}=t,s=await this.accountInvocationsFactory(e,{...n6(t,await this.channel.setUpSpecVersion()),versions:[eB.V1,n3(this.getPreferredVersion(eB.V2,eB.V3),o)],nonce:r,blockIdentifier:n,skipValidate:a});return super.getSimulateTransaction(s,{blockIdentifier:n,skipValidate:a,skipExecute:i})}async execute(e){var t;let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=Array.isArray(e)?e:[e],a=tt(null!=(t=r.nonce)?t:await this.getNonce()),i=n3(this.getPreferredVersion(eB.V1,eB.V3),r.version),o=await this.getUniversalSuggestedFee(i,{type:eE.INVOKE,payload:e},{...r,version:i}),s=await this.getChainId(),c={...n6(r,await this.channel.setUpSpecVersion()),resourceBounds:o.resourceBounds,walletAddress:this.address,nonce:a,maxFee:o.maxFee,version:i,chainId:s,cairoVersion:await this.getCairoVersion()},l=await this.signer.signTransaction(n,c),u=ak(n,await this.getCairoVersion());return this.invokeFunction({contractAddress:this.address,calldata:u,signature:l},{...n6(r,await this.channel.setUpSpecVersion()),resourceBounds:o.resourceBounds,nonce:a,maxFee:o.maxFee,version:i})}async buildPaymasterTransaction(e,t){let r;if(!t.deploymentData&&await this.getSnip9Version()===eW.UNSUPPORTED)throw Error("Account is not compatible with SNIP-9");let n={version:"0x1",feeMode:t.feeMode,timeBounds:t.timeBounds};return r=t.deploymentData?e.length>0?{type:"deploy_and_invoke",invoke:{userAddress:this.address,calls:e},deployment:t.deploymentData}:{type:"deploy",deployment:t.deploymentData}:{type:"invoke",invoke:{userAddress:this.address,calls:e}},this.paymaster.buildTransaction(r,n)}async estimatePaymasterTransactionFee(e,t){return(await this.buildPaymasterTransaction(e,t)).fee}async preparePaymasterTransaction(e){let t;switch(e.type){case"deploy_and_invoke":{let r=await this.signMessage(e.typed_data);t={type:"deploy_and_invoke",invoke:{userAddress:this.address,typedData:e.typed_data,signature:nQ(r)},deployment:e.deployment};break}case"invoke":{let r=await this.signMessage(e.typed_data);t={type:"invoke",invoke:{userAddress:this.address,typedData:e.typed_data,signature:nQ(r)}};break}case"deploy":t={type:"deploy",deployment:e.deployment};break;default:throw Error("Invalid transaction type")}return t}async executePaymasterTransaction(e,t,r){let n=await this.buildPaymasterTransaction(e,t);oe(n,e,t,r);let a=await this.preparePaymasterTransaction(n);return this.paymaster.executeTransaction(a,n.parameters).then(e=>({transaction_hash:e.transaction_hash}))}async declareIfNot(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n9(e);try{await this.getClassByHash(r.classHash)}catch(r){return this.declare(e,t)}return{transaction_hash:"",class_hash:r.classHash}}async declare(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=n9(e),{nonce:n,version:a}=t,i=n3(n7(e.contract)?this.getPreferredVersion(eB.V2,eB.V3):eB.V1,a),o=await this.getUniversalSuggestedFee(i,{type:eE.DECLARE,payload:r},{...t,version:i}),s={...n6(t,await this.channel.setUpSpecVersion()),resourceBounds:o.resourceBounds,maxFee:o.maxFee,nonce:tt(null!=n?n:await this.getNonce()),version:i,chainId:await this.getChainId(),walletAddress:this.address,cairoVersion:void 0},c=await this.buildDeclarePayload(r,s);return this.declareContract(c,s)}async deploy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{calls:r,addresses:n}=aT(e,this.address);return{...await this.execute(r,t),contract_address:n}}async deployContract(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=await this.deploy(e,t);return iX(await this.waitForTransaction(r.transaction_hash))}async declareAndDeploy(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},{constructorCalldata:r,salt:n,unique:a}=e,i=await this.declareIfNot(e,t);if(""!==i.transaction_hash){let e=await this.waitForTransaction(i.transaction_hash);i={...i,...e}}let o=await this.deployContract({classHash:i.class_hash,salt:n,unique:a,constructorCalldata:r},t);return{declare:{...i},deploy:o}}async deployAccount(e){let{classHash:t,constructorCalldata:r=[],addressSalt:n=0,contractAddress:a}=e,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},o=n3(this.getPreferredVersion(eB.V1,eB.V3),i.version),s=await this.getChainId(),c=rX.compile(r),l=null!=a?a:nk(n,t,c,0),u=await this.getUniversalSuggestedFee(o,{type:eE.DEPLOY_ACCOUNT,payload:{classHash:t,constructorCalldata:c,addressSalt:n,contractAddress:l}},i),d=await this.signer.signDeployAccountTransaction({...n6(i,await this.channel.setUpSpecVersion()),classHash:t,constructorCalldata:c,contractAddress:l,addressSalt:n,chainId:s,resourceBounds:u.resourceBounds,maxFee:u.maxFee,version:o,nonce:W});return this.deployAccountContract({classHash:t,addressSalt:n,constructorCalldata:r,signature:d},{...n6(i,await this.channel.setUpSpecVersion()),nonce:W,resourceBounds:u.resourceBounds,maxFee:u.maxFee,version:o})}async signMessage(e){return this.signer.signMessage(e,this.address)}async hashMessage(e){return a2(e,this.address)}async getSnip9Version(){return await i8(this,this.address,ea)?eW.V2:await i8(this,this.address,en)?eW.V1:eW.UNSUPPORTED}async isValidSnip9Nonce(e){try{let t={contractAddress:this.address,entrypoint:"is_valid_outside_execution_nonce",calldata:[tn(e)]},r=await this.callContract(t);return 0n!==BigInt(r[0])}catch(e){throw Error("Failed to check if nonce is valid: ".concat(e))}}async getSnip9Nonce(){let e=nZ();return await this.isValidSnip9Nonce(e)?e:this.getSnip9Nonce()}async getOutsideTransaction(e,t,r,n){if(!te(e.caller)&&"ANY_CALLER"!==e.caller)throw Error("The caller ".concat(e.caller," is not valid."));let a=te(e.caller)?e.caller:er,i=Array.isArray(t)?t:[t],o=null!=r?r:await this.getSnip9Version();if(!o)throw Error("This account is not handling outside transactions.");let s=n?tn(n):await this.getSnip9Nonce(),c=i2(await this.getChainId(),{caller:a,execute_after:e.execute_after,execute_before:e.execute_before},s,i,o),l=await this.signMessage(c);return{outsideExecution:{caller:a,nonce:s,execute_after:e.execute_after,execute_before:e.execute_before,calls:i.map(i$)},signature:l,signerAddress:this.address,version:o}}async executeFromOutside(e,t){let r=i5(e);return this.execute(r,t)}async getUniversalSuggestedFee(e,t,r){var n,a;let{type:i,payload:o}=t,s=0,c=n0(W,void 0,await this.channel.setUpSpecVersion());return e===eB.V3?c=null!=(n=r.resourceBounds)?n:(await this.getSuggestedFee({type:i,payload:o},r)).resourceBounds:s=null!=(a=r.maxFee)?a:(await this.getSuggestedFee({type:i,payload:o},r)).suggestedMaxFee,{maxFee:s,resourceBounds:c}}async getSuggestedFee(e,t){let{type:r,payload:n}=e;switch(r){case eE.INVOKE:return this.estimateInvokeFee(n,t);case eE.DECLARE:return this.estimateDeclareFee(n,t);case eE.DEPLOY_ACCOUNT:return this.estimateAccountDeployFee(n,t);case eE.DEPLOY:return this.estimateDeployFee(n,t);default:return n1(await this.channel.setUpSpecVersion())}}async buildInvocation(e,t){let r=ak(e,await this.getCairoVersion()),n=t.skipValidate?[]:await this.signer.signTransaction(e,t);return{...n6(t,await this.channel.setUpSpecVersion()),contractAddress:this.address,calldata:r,signature:n}}async buildDeclarePayload(e,t){let{classHash:r,contract:n,compiledClassHash:a}=n9(e),i=ag(n);if(e5(a)&&(t.version===eC.F3||t.version===eC.V3))throw Error("V3 Transaction work with Cairo1 Contracts and require compiledClassHash");let o=t.skipValidate?[]:await this.signer.signDeclareTransaction({...t,...n6(t,await this.channel.setUpSpecVersion()),classHash:r,compiledClassHash:a,senderAddress:t.walletAddress});return{senderAddress:t.walletAddress,signature:o,contract:i,compiledClassHash:a}}async buildAccountDeployPayload(e,t){let{classHash:r,addressSalt:n=0,constructorCalldata:a=[],contractAddress:i}=e,o=rX.compile(a),s=null!=i?i:nk(n,r,o,0),c=t.skipValidate?[]:await this.signer.signDeployAccountTransaction({...t,...n6(t,await this.channel.setUpSpecVersion()),classHash:r,contractAddress:s,addressSalt:n,constructorCalldata:o});return{...n6(t,await this.channel.setUpSpecVersion()),classHash:r,addressSalt:n,constructorCalldata:o,signature:c}}buildUDCContractPayload(e){return[].concat(e).map(e=>{let{classHash:t,salt:r="0",unique:n=!0,constructorCalldata:a=[]}=e,i=rX.compile(a);return{contractAddress:et.ADDRESS,entrypoint:et.ENTRYPOINT,calldata:[t,r,tm(n),i.length,...i]}})}async accountInvocationsFactory(e,t){let{nonce:r,blockIdentifier:n,skipValidate:a=!0}=t,i=await this.getNonceSafe(r),o=await this.getChainId(),s=t.versions.map(e=>n3(e)),c="payload"in e[0]?e[0].payload:e[0],l=e[0].type===eE.DEPLOY_ACCOUNT?await this.getCairoVersion(c.classHash):await this.getCairoVersion();return Promise.all([].concat(e).map(async(e,r)=>{let c="payload"in e?e.payload:e,u={...n6(t,await this.channel.setUpSpecVersion()),walletAddress:this.address,nonce:tt(Number(i)+r),maxFee:W,chainId:o,cairoVersion:l,version:"",skipValidate:a},d={type:e.type,nonce:tt(Number(i)+r),blockIdentifier:n,version:""};if(e.type===eE.INVOKE){let e=n8(s[1]);u.version=e,d.version=e;let t=await this.buildInvocation([].concat(c),u);return{...d,...t,...u}}if(e.type===eE.DEPLOY){let e=n8(s[1]);u.version=e,d.version=e;let t=this.buildUDCContractPayload(c),r=await this.buildInvocation(t,u);return{...d,...r,...u,type:eE.INVOKE}}if(e.type===eE.DECLARE){let e=n7(c.contract)?s[1]:s[0];u.version=e,d.version=e;let t=await this.buildDeclarePayload(c,u);return{...d,...t,...u}}if(e.type===eE.DEPLOY_ACCOUNT){let e=n8(s[1]);u.version=e,d.version=e;let t=await this.buildAccountDeployPayload(c,u);return{...d,...t,...u}}throw Error("accountInvocationsFactory: unsupported transaction type: ".concat(e))}))}async getStarkName(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.address,t=arguments.length>1?arguments[1]:void 0;return super.getStarkName(e,t)}constructor(e,t,r,n,a=em.get("transactionVersion"),i){super(e),l._(this,"signer",void 0),l._(this,"address",void 0),l._(this,"cairoVersion",void 0),l._(this,"transactionVersion",void 0),l._(this,"paymaster",void 0),l._(this,"deploySelf",this.deployAccount),this.address=t.toLowerCase(),this.signer=e7(r)||r instanceof Uint8Array?new iI(r):r,n&&(this.cairoVersion=n.toString()),this.transactionVersion=a,this.paymaster=i?new oi(i):os,eb.debug("Account setup",{transactionVersion:this.transactionVersion,cairoVersion:this.cairoVersion,channel:this.channel.id})}},ol=class extends iT{},ou={};function od(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return e.request({type:"wallet_requestAccounts",params:{silent_mode:t}})}function oh(e){return e.request({type:"wallet_getPermissions"})}function of(e,t){return e.request({type:"wallet_watchAsset",params:t})}function op(e,t){return e.request({type:"wallet_addStarknetChain",params:t})}function og(e,t){return e.request({type:"wallet_switchStarknetChain",params:{chainId:t}})}function om(e){return e.request({type:"wallet_requestChainId"})}function oy(e){return e.request({type:"wallet_deploymentData"})}function ob(e,t){return e.request({type:"wallet_addInvokeTransaction",params:t})}function ow(e,t){return e.request({type:"wallet_addDeclareTransaction",params:t})}function o_(e,t){return e.request({type:"wallet_signTypedData",params:t})}function ov(e){return e.request({type:"wallet_supportedSpecs"})}function oE(e,t){e.on("accountsChanged",t)}function oS(e,t){e.on("networkChanged",t)}m(ou,{addDeclareTransaction:()=>ow,addInvokeTransaction:()=>ob,addStarknetChain:()=>op,deploymentData:()=>oy,getPermissions:()=>oh,onAccountChange:()=>oE,onNetworkChanged:()=>oS,requestAccounts:()=>od,requestChainId:()=>om,signMessage:()=>o_,supportedSpecs:()=>ov,switchStarknetChain:()=>og,watchAsset:()=>of});var ox=class e extends oc{onAccountChange(e){oE(this.walletProvider,e)}onNetworkChanged(e){oS(this.walletProvider,e)}requestAccounts(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return od(this.walletProvider,e)}getPermissions(){return oh(this.walletProvider)}switchStarknetChain(e){return og(this.walletProvider,e)}watchAsset(e){return of(this.walletProvider,e)}addStarknetChain(e){return op(this.walletProvider,e)}execute(e){let t=[].concat(e).map(e=>{let{contractAddress:t,entrypoint:r,calldata:n}=e;return{contract_address:t,entry_point:r,calldata:n}});return ob(this.walletProvider,{calls:t})}declare(e){let t=n9(e),r=e.contract,n={...r,abi:eJ(r.abi)};if(!t.compiledClassHash)throw Error("compiledClassHash is required");let a={compiled_class_hash:t.compiledClassHash,contract_class:n};return ow(this.walletProvider,a)}async deploy(e){let{calls:t,addresses:r}=aT(e,this.address);return{...await this.execute(t),contract_address:r}}signMessage(e){return o_(this.walletProvider,e)}static async connect(t,r,n,a){let i=arguments.length>4&&void 0!==arguments[4]&&arguments[4],[o]=await od(r,i);return new e(t,r,o,n,a)}static async connectSilent(t,r,n,a){return e.connect(t,r,n,a,!0)}constructor(e,t,r,n,a){super(e,r,"",n,void 0,a),l._(this,"walletProvider",void 0),this.walletProvider=t,this.walletProvider.on("accountsChanged",e=>{e&&(this.address=e[0].toLowerCase())}),this.walletProvider.on("networkChanged",e=>{e&&this.channel.setChainId(e)})}};function ok(e,t){return async function(){for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];let i={...e.contractOptions};return e.contractOptions=void 0,e.call(t.name,n,{parseRequest:!0,parseResponse:!0,...i})}}function oT(e,t){return"view"===t.stateMutability||"view"===t.state_mutability?ok(e,t):async function(){for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];let i={...e.contractOptions};return e.contractOptions=void 0,e.invoke(t.name,n,{parseRequest:!0,...i})}}function oA(e,t){return Array.isArray(e)&&"__compiled__"in e?e:Array.isArray(e)&&Array.isArray(e[0])&&"__compiled__"in e[0]?e[0]:t()}var oB=class{withOptions(e){return this.contractOptions=e,this}attach(e){this.address=e}connect(e){this.providerOrAccount=e}async deployed(){return this.deployTransactionHash&&(await this.providerOrAccount.waitForTransaction(this.deployTransactionHash),this.deployTransactionHash=void 0),this}async call(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{parseRequest:r=!0,parseResponse:n=!0,formatResponse:a,blockIdentifier:i}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e$(null!==this.address,"contract is not connected to an address");let o=oA(t,()=>r?(this.callData.validate(eH.CALL,e,t),this.callData.compile(e,t)):(eb.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),t));return this.providerOrAccount.callContract({contractAddress:this.address,calldata:o,entrypoint:e},i).then(t=>n?a?this.callData.format(e,t,a):this.callData.parse(e,t):t)}invoke(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],{parseRequest:r=!0,signature:n,...a}=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e$(null!==this.address,"contract is not connected to an address");let i=oA(t,()=>r?(this.callData.validate(eH.INVOKE,e,t),this.callData.compile(e,t)):(eb.warn("Invoke skipped parsing but provided rawArgs, possible malfunction request"),t)),o={contractAddress:this.address,calldata:i,entrypoint:e};if("execute"in this.providerOrAccount)return this.providerOrAccount.execute(o,{...a});if(!a.nonce)throw Error("Nonce is required when invoking a function without an account");return eb.warn("Invoking ".concat(e," without an account. This will not work on a public node.")),this.providerOrAccount.invokeFunction({...o,signature:n},{...a,nonce:a.nonce})}async estimate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];e$(null!==this.address,"contract is not connected to an address"),oA(t,()=>!1)||this.callData.validate(eH.INVOKE,e,t);let r=this.populate(e,t);if("estimateInvokeFee"in this.providerOrAccount)return this.providerOrAccount.estimateInvokeFee(r);throw Error("Contract must be connected to the account contract to estimate")}populate(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],r=oA(t,()=>this.callData.compile(e,t));return{contractAddress:this.address,entrypoint:e,calldata:r}}parseEvents(e){let t;return e.match({success:e=>{var r;t=iZ((null==(r=e.events)?void 0:r.map(t=>({block_hash:e.block_hash,block_number:e.block_number,transaction_hash:e.transaction_hash,...t})).filter(e=>tc(e.from_address)===tc(this.address),[]))||[],this.events,this.structs,rX.getAbiEnum(this.abi))},_:()=>{throw Error("This transaction was not successful.")}}),t}isCairo1(){return tG.isCairo1Abi(this.abi)}async getVersion(){return this.providerOrAccount.getContractVersion(this.address)}typedv2(e){return this}constructor(e,t,r=iA){l._(this,"abi",void 0),l._(this,"address",void 0),l._(this,"providerOrAccount",void 0),l._(this,"deployTransactionHash",void 0),l._(this,"structs",void 0),l._(this,"events",void 0),l._(this,"functions",void 0),l._(this,"callStatic",void 0),l._(this,"populateTransaction",void 0),l._(this,"estimateFee",void 0),l._(this,"callData",void 0),l._(this,"contractOptions",void 0),this.address=t&&t.toLowerCase(),this.providerOrAccount=r,this.callData=new rX(e),this.structs=rX.getAbiStruct(e),this.events=iY(e);let n=rO(e);this.abi=n.getLegacyFormat();let a={enumerable:!0,value:{},writable:!1};Object.defineProperties(this,{functions:{enumerable:!0,value:{},writable:!1},callStatic:{enumerable:!0,value:{},writable:!1},populateTransaction:{enumerable:!0,value:{},writable:!1},estimateFee:{enumerable:!0,value:{},writable:!1}}),this.abi.forEach(e=>{var t,r;if("function"!==e.type)return;let n=e.name;this[n]||Object.defineProperty(this,n,{...a,value:oT(this,e)}),this.functions[n]||Object.defineProperty(this.functions,n,{...a,value:oT(this,e)}),this.callStatic[n]||Object.defineProperty(this.callStatic,n,{...a,value:ok(this,e)}),this.populateTransaction[n]||Object.defineProperty(this.populateTransaction,n,{...a,value:(t=this,function(){for(var r=arguments.length,n=Array(r),a=0;a<r;a++)n[a]=arguments[a];return t.populate(e.name,n)})}),this.estimateFee[n]||Object.defineProperty(this.estimateFee,n,{...a,value:(r=this,function(){for(var t=arguments.length,n=Array(t),a=0;a<t;a++)n[a]=arguments[a];return r.estimate(e.name,n)})})})}},oI=class{constructor(){l._(this,"functions",void 0),l._(this,"callStatic",void 0),l._(this,"populateTransaction",void 0),l._(this,"estimateFee",void 0)}},oC=class{async deploy(){for(var e,t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];let a=oA(r,()=>{var e;return(null==(e=this.contractOptions)?void 0:e.parseRequest)?(this.CallData.validate(eH.DEPLOY,"constructor",r),this.CallData.compile("constructor",r)):(eb.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),r)}),{deploy:{contract_address:i,transaction_hash:o}}=await this.account.declareAndDeploy({contract:this.compiledContract,casm:this.casm,classHash:this.classHash,compiledClassHash:this.compiledClassHash,constructorCalldata:a,salt:null==(e=this.contractOptions)?void 0:e.addressSalt});e$(!!i,"Deployment of the contract failed");let s=new oB(this.compiledContract.abi,i,this.account);return s.deployTransactionHash=o,s}connect(e){return this.account=e,this}attach(e){return new oB(this.abi,e,this.account)}constructor(e){var t;l._(this,"compiledContract",void 0),l._(this,"account",void 0),l._(this,"abi",void 0),l._(this,"classHash",void 0),l._(this,"casm",void 0),l._(this,"compiledClassHash",void 0),l._(this,"CallData",void 0),l._(this,"contractOptions",void 0),this.compiledContract=e.compiledContract,this.account=e.account,this.casm=e.casm,this.abi=null!=(t=e.abi)?t:e.compiledContract.abi,this.classHash=e.classHash,this.compiledClassHash=e.compiledClassHash,this.CallData=new rX(this.abi),this.contractOptions=e.contractOptions}},oO=class{};function oP(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"fri";if("strk"===t){let t="";"bigint"==typeof e?t=e.toString():"string"==typeof e&&(t=te(e)?BigInt(e).toString():e);let[r,n="0"]=t.split("."),a=n.padEnd(18,"0");return"".concat(r).concat(a).replace(/\b0+/g,"")}let r=BigInt(e).toString();return(r.length<=18?"0.".concat(r.padStart(18,"0")):"".concat(r.slice(0,r.length-18),".").concat(r.slice(r.length-18))).replace(/(\.[0-9]*[1-9])0+$|\.0*$/,"$1")}},877963,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},252519,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},968531,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},610788,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},223249,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},567717,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},48714,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BigIntBufferUtils=void 0;let n=e.r(843943);r.BigIntBufferUtils={toBuffer:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"be",r=arguments.length>2?arguments[2]:void 0,a=Array(r);for(let t=0;t<r;t++)a[t]=Number(255n&e),e>>=8n;let i=n.Buffer.from(a);return"be"===t&&i.reverse(),i},fromBuffer:function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"be";if("le"===t){let t=n.Buffer.alloc(e.length);e.copy(t),t.reverse(),e=t}let r=0n;for(let t of e)r<<=8n,r|=BigInt(t);return r}}},444407,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StatePredictorUtils=void 0;let n=e.r(843943),a=e.r(48714);class i{static gtBuffer(e,t){for(let r=0;r<e.length;r++){if(e[r]>t[r])return!0;if(e[r]<t[r])break}return!1}static divInPlace(e,t){let r=0;for(let n=0;n<32;n++){let a=e[n]+r,i=Math.floor(a/t);r=a%t*256,e[n]=i}}static addInPlace(e,t){let r=0;for(let n=0;n<32;n++){let a=31-n,i=e[a]+t[a]+r,o=255&i;r=i>>8,e[a]=o}}static nbitsToTarget(e){let t=n.Buffer.alloc(32,0),r=[e>>16&127,e>>8&255,255&e],a=32-(e>>24&255);for(let e=0;e<3;e++)a+e<32&&(t[a+e]=r[e]);return t}static getDifficulty(e){let t=i.nbitsToTarget(e),r=0;for(let e=0;e<32;e++)if(t[e]>0){r=e;break}let a=32-r-3,o=0;for(let e=0;e<3;e++)o|=t[r+e]<<(2-e)*8;let s=n.Buffer.from("00000000FFFF0000000000000000000000000000000000000000000000000000","hex");i.divInPlace(s,o);let c=n.Buffer.alloc(32,0);for(let e=0;e<32-a;e++)c[e+a]=s[e];return c}static getChainwork(e){let t=i.nbitsToTarget(e),r=a.BigIntBufferUtils.fromBuffer(t);return a.BigIntBufferUtils.toBuffer((0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffn&~r)/(r+1n)+1n,"be",32)}}r.StatePredictorUtils=i,i.DIFF_ADJUSTMENT_PERIOD=2016},273135,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},421058,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ChainEvent=void 0,r.ChainEvent=class{}},869874,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SwapEvent=r.SwapEventType=void 0;let n=e.r(421058);!function(e){e[e.INITIALIZE=0]="INITIALIZE",e[e.REFUND=1]="REFUND",e[e.CLAIM=2]="CLAIM"}(r.SwapEventType||(r.SwapEventType={}));class a extends n.ChainEvent{constructor(e){super(),this.escrowHash=e}}r.SwapEvent=a},137130,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ClaimEvent=void 0;let n=e.r(869874);class a extends n.SwapEvent{constructor(e,t){super(e),this.result=t}}r.ClaimEvent=a},270903,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InitializeEvent=void 0;let n=e.r(869874);class a extends n.SwapEvent{constructor(e,t,r){super(e),this.swapType=t,this.swapData=r}}r.InitializeEvent=a},88489,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RefundEvent=void 0;let n=e.r(869874);class a extends n.SwapEvent{}r.RefundEvent=a},177394,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Lockable=void 0,r.Lockable=class{lock(e){if(this.isLocked())return null;this.lockedTill=Date.now()+1e3*e,this.lockNonce++;let t=this.lockNonce;return()=>this.lockNonce===t&&(this.lockedTill=0,!0)}isLocked(){return this.lockedTill>Date.now()}constructor(){this.lockedTill=0,this.lockNonce=0}}},597219,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},575503,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},795213,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},960399,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SwapData=void 0;class n{static deserialize(e){let t=n.deserializers[e.type];if(null!=t)return new t(e);throw Error("No deserializer found for swap data type: ".concat(e.type))}}r.SwapData=n,n.deserializers={}},329711,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ChainSwapType=void 0,function(e){e[e.HTLC=0]="HTLC",e[e.CHAIN=1]="CHAIN",e[e.CHAIN_NONCED=2]="CHAIN_NONCED",e[e.CHAIN_TXID=3]="CHAIN_TXID"}(r.ChainSwapType||(r.ChainSwapType={}))},895532,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SwapCommitStateType=void 0,function(e){e[e.EXPIRED=0]="EXPIRED",e[e.NOT_COMMITED=1]="NOT_COMMITED",e[e.COMMITED=2]="COMMITED",e[e.PAID=3]="PAID",e[e.REFUNDABLE=4]="REFUNDABLE"}(r.SwapCommitStateType||(r.SwapCommitStateType={}))},140463,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SignatureVerificationError=void 0;class n extends Error{constructor(e){super(e),Object.setPrototypeOf(this,n.prototype)}}r.SignatureVerificationError=n},824209,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CannotInitializeATAError=void 0;class n extends Error{constructor(e){super(e),Object.setPrototypeOf(this,n.prototype)}}r.CannotInitializeATAError=n},337024,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SwapDataVerificationError=void 0;class n extends Error{constructor(e){super(e),Object.setPrototypeOf(this,n.prototype)}}r.SwapDataVerificationError=n},918776,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},805663,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},90258,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BitcoinNetwork=void 0,function(e){e[e.MAINNET=0]="MAINNET",e[e.TESTNET=1]="TESTNET",e[e.TESTNET4=2]="TESTNET4",e[e.REGTEST=3]="REGTEST"}(r.BitcoinNetwork||(r.BitcoinNetwork={}))},681567,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},310617,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},503557,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpvVaultData=void 0;class n{static deserialize(e){if(null!=n.deserializers[e.type])return new n.deserializers[e.type](e)}calculateStateAfter(e){let t=[...this.getBalances()],r=this.getWithdrawalCount(),n=this.getUtxo();for(let a of e){if(a.getSpentVaultUtxo()!==n)throw Error("Invalid transaction, doesn't spend prior vault UTXO!");a.getTotalOutput().forEach((e,r)=>{if(null==t[r])throw Error("Tried to withdraw non-existing token!");if(t[r].rawAmount-=e,t[r].rawAmount<0n)throw Error("Prior transaction withdrew more than available in vault")}),n=a.getCreatedVaultUtxo(),r++}return t.forEach(e=>{e.scaledAmount=e.rawAmount*e.multiplier}),{withdrawalCount:r,balances:t}}}r.SpvVaultData=n,n.deserializers={}},874207,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpvWithdrawalStateType=void 0,function(e){e[e.CLOSED=-1]="CLOSED",e[e.NOT_FOUND=0]="NOT_FOUND",e[e.CLAIMED=1]="CLAIMED",e[e.FRONTED=2]="FRONTED"}(r.SpvWithdrawalStateType||(r.SpvWithdrawalStateType={}))},510822,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpvWithdrawalTransactionData=void 0;let n=e.r(843943);class a{static deserialize(e){if(null!=a.deserializers[e.type])return new a.deserializers[e.type](e)}serialize(){return this.btcTx}getRecipient(){return this.recipient}getOutputWithoutFees(){return this.rawAmounts}getCallerFee(){return this.rawAmounts.map(e=>e*this.callerFeeRate/100000n)}getFrontingFee(){return this.rawAmounts.map(e=>e*this.frontingFeeRate/100000n)}getExecutionFee(){return[this.rawAmounts[0]*this.executionFeeRate/100000n]}getTotalOutput(){let e=[...this.getOutputWithoutFees()],t=this.getCallerFee();null!=t&&t.forEach((t,r)=>{if(null!=t&&0n!==t){if(null==e[r])throw Error("Caller fee token out of bounds");e[r]+=t}});let r=this.getFrontingFee();null!=r&&r.forEach((t,r)=>{if(null!=t&&0n!==t){if(null==e[r])throw Error("Fronting fee token out of bounds");e[r]+=t}});let n=this.getExecutionFee();return null!=n&&n.forEach((t,r)=>{if(null!=t&&0n!==t){if(null==e[r])throw Error("Execution fee token out of bounds");e[r]+=t}}),e.forEach((e,t)=>{if(e>=2n**64n)throw Error("Token "+t+" amount out of bounds")}),e}getExecutionData(){return null==this.executionHash?null:{executionHash:this.executionHash,executionExpiry:this.executionExpiry}}getTxId(){return this.btcTx.txid}getSpentVaultUtxo(){let e=this.btcTx.ins[0];return e.txid+":"+e.vout}getCreatedVaultUtxo(){return this.getTxId()+":0"}getNewVaultScript(){return n.Buffer.from(this.btcTx.outs[0].scriptPubKey.hex,"hex")}getNewVaultBtcAmount(){return this.btcTx.outs[0].value}constructor(e){let t;if(e.ins.length<2)throw Error("Need at least 2 inputs");if(e.outs.length<2)throw Error("Need at least 2 outputs");let r=BigInt(e.ins[0].sequence),a=BigInt(e.ins[1].sequence);if((2147483648n&r)!=2147483648n||(2147483648n&a)!=2147483648n)throw Error("nSequence0 high bit not set!");let i=e.locktime+1e9;if(i>=0x100000000)throw Error("Execution expiry overflow");let o=e.outs[1],s=n.Buffer.from(o.scriptPubKey.hex,"hex");if(0===s.length)throw Error("Output 1 empty script");if(106!==s.at(0))throw Error("Output 1 is not OP_RETURN");if(0===s.at(1))throw Error("Output 1 OP_RETURN followed by OP_0");if(76===s.at(1)){let e=s.at(2);if((t=s.subarray(3,3+e)).length!==e)throw Error("Output 1 OP_RETURN data length mismatch!")}else if(75>=s.at(1)){let e=s.at(1);if((t=s.subarray(2,2+e)).length!==e)throw Error("Output 1 OP_RETURN data length mismatch!")}else throw Error("Output 1 invalid push opcode");let c=this.fromOpReturnData(t);this.recipient=c.recipient,this.rawAmounts=c.rawAmounts,this.callerFeeRate=1048575n&r,this.frontingFeeRate=r>>10n&1047552n|a>>20n&1023n,this.executionFeeRate=1048575n&a,this.executionHash=c.executionHash,this.executionExpiry=i,this.btcTx=e}}r.SpvWithdrawalTransactionData=a,a.deserializers={}},394489,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpvVaultEvent=r.SpvVaultEventType=void 0;let n=e.r(421058);!function(e){e[e.OPEN=0]="OPEN",e[e.DEPOSIT=1]="DEPOSIT",e[e.CLAIM=2]="CLAIM",e[e.CLOSE=3]="CLOSE",e[e.FRONT=4]="FRONT"}(r.SpvVaultEventType||(r.SpvVaultEventType={}));class a extends n.ChainEvent{constructor(e,t){super(),this.owner=e,this.vaultId=t}}r.SpvVaultEvent=a},714693,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpvVaultCloseEvent=void 0;let n=e.r(394489);class a extends n.SpvVaultEvent{constructor(e,t,r,a){super(e,t),this.eventType=n.SpvVaultEventType.CLOSE,this.btcTxId=r,this.error=a}}r.SpvVaultCloseEvent=a},690406,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpvVaultClaimEvent=void 0;let n=e.r(394489);class a extends n.SpvVaultEvent{constructor(e,t,r,a,i,o,s,c,l){super(e,t),this.eventType=n.SpvVaultEventType.CLAIM,this.btcTxId=r,this.recipient=a,this.executionHash=i,this.amounts=o,this.caller=s,this.frontingAddress=c,this.withdrawCount=l}}r.SpvVaultClaimEvent=a},266736,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpvVaultDepositEvent=void 0;let n=e.r(394489);class a extends n.SpvVaultEvent{constructor(e,t,r,a){super(e,t),this.eventType=n.SpvVaultEventType.DEPOSIT,this.amounts=r,this.depositCount=a}}r.SpvVaultDepositEvent=a},891091,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpvVaultOpenEvent=void 0;let n=e.r(394489);class a extends n.SpvVaultEvent{constructor(e,t,r,a){super(e,t),this.eventType=n.SpvVaultEventType.OPEN,this.btcTxId=r,this.vout=a}}r.SpvVaultOpenEvent=a},113748,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpvVaultFrontEvent=void 0;let n=e.r(394489);class a extends n.SpvVaultEvent{constructor(e,t,r,a,i,o,s){super(e,t),this.eventType=n.SpvVaultEventType.FRONT,this.btcTxId=r,this.recipient=a,this.executionHash=i,this.amounts=o,this.frontingAddress=s}}r.SpvVaultFrontEvent=a},991989,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),a(e.r(877963),r),a(e.r(252519),r),a(e.r(968531),r),a(e.r(610788),r),a(e.r(223249),r),a(e.r(567717),r),a(e.r(444407),r),a(e.r(273135),r),a(e.r(137130),r),a(e.r(270903),r),a(e.r(88489),r),a(e.r(869874),r),a(e.r(177394),r),a(e.r(597219),r),a(e.r(575503),r),a(e.r(795213),r),a(e.r(960399),r),a(e.r(329711),r),a(e.r(895532),r),a(e.r(140463),r),a(e.r(824209),r),a(e.r(337024),r),a(e.r(918776),r),a(e.r(805663),r),a(e.r(48714),r),a(e.r(90258),r),a(e.r(681567),r),a(e.r(310617),r),a(e.r(503557),r),a(e.r(874207),r),a(e.r(510822),r),a(e.r(421058),r),a(e.r(394489),r),a(e.r(714693),r),a(e.r(690406),r),a(e.r(266736),r),a(e.r(891091),r),a(e.r(113748),r)},162773,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelockRefundHandler=void 0;let n=e.r(441484);class a{getCommitment(e){return e}getWitness(e,t){if(a.getExpiry(t)>BigInt(Math.floor(Date.now()/1e3)))throw Error("Not expired yet!");return Promise.resolve({initialTxns:[],witness:[]})}getGas(){return a.gas}static getExpiry(e){return(0,n.bigNumberishToBuffer)(e.refundData,32).readBigUInt64BE(24).valueOf()}constructor(e){this.address=e}}r.TimelockRefundHandler=a,a.gas={l1DataGas:0,l2Gas:4e6,l1Gas:0}},54614,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetSwapData=void 0;let n=e.r(991989),a=e.r(162773),i=e.r(288128),o=e.r(441484);class s extends n.SwapData{static toFlags(e){let t=(0,o.toBigInt)(e);return{sequence:t>>64n,payOut:(1n&t)===1n,payIn:(2n&t)===2n,reputation:(4n&t)===4n}}getFlags(){return(this.sequence<<64n)+(this.payOut?1n:0n)+(this.payIn?2n:0n)+(this.reputation?4n:0n)}getOfferer(){return this.offerer}setOfferer(e){this.offerer=e,this.payIn=!0}getClaimer(){return this.claimer}setClaimer(e){this.claimer=e,this.payIn=!1,this.payOut=!0,this.reputation=!1}serialize(){return{type:"strk",offerer:this.offerer,claimer:this.claimer,token:this.token,refundHandler:this.refundHandler,claimHandler:this.claimHandler,payOut:this.payOut,payIn:this.payIn,reputation:this.reputation,sequence:null==this.sequence?null:this.sequence.toString(10),claimData:this.claimData,refundData:this.refundData,amount:null==this.amount?null:this.amount.toString(10),feeToken:this.feeToken,securityDeposit:null==this.securityDeposit?null:this.securityDeposit.toString(10),claimerBounty:null==this.claimerBounty?null:this.claimerBounty.toString(10),kind:this.kind,extraData:this.extraData}}getAmount(){return this.amount}getToken(){return this.token}isToken(e){return this.token.toLowerCase()===e.toLowerCase()}getType(){return this.kind}getExpiry(){return a.TimelockRefundHandler.getExpiry(this)}isPayIn(){return this.payIn}isPayOut(){return this.payOut}getEscrowHash(){let e=i.cairo.uint256("0x"+this.amount.toString(16)),t=i.cairo.uint256("0x"+this.securityDeposit.toString(16)),r=i.cairo.uint256("0x"+this.claimerBounty.toString(16)),n=i.hash.computePoseidonHashOnElements([this.offerer,this.claimer,this.token,this.refundHandler,this.claimHandler,this.getFlags(),this.claimData,this.refundData,e.low,e.high,this.feeToken,t.low,t.high,r.low,r.high]);return n.startsWith("0x")&&(n=n.slice(2)),n.padStart(64,"0")}getClaimHash(){let e=this.claimData;return e.startsWith("0x")&&(e=e.slice(2)),e.padStart(64,"0")}getSequence(){return this.sequence}getConfirmationsHint(){return null==this.extraData||84!=this.extraData.length?null:parseInt(this.extraData.slice(80),16)}getNonceHint(){return null==this.extraData||84!=this.extraData.length?null:BigInt("0x"+this.extraData.slice(64,80))}getTxoHashHint(){return null==this.extraData||84!=this.extraData.length?null:this.extraData.slice(0,64)}getExtraData(){return this.extraData}setExtraData(e){this.extraData=e}getSecurityDeposit(){return this.securityDeposit}getClaimerBounty(){return this.claimerBounty}getTotalDeposit(){return this.claimerBounty<this.securityDeposit?this.securityDeposit:this.claimerBounty}getDepositToken(){return this.feeToken}isDepositToken(e){return e.startsWith("0x")||(e="0x"+e),(0,o.toHex)(this.feeToken)===(0,o.toHex)(e)}isClaimer(e){return e.startsWith("0x")||(e="0x"+e),(0,o.toHex)(this.claimer)===(0,o.toHex)(e)}isOfferer(e){return e.startsWith("0x")||(e="0x"+e),(0,o.toHex)(this.offerer)===(0,o.toHex)(e)}isRefundHandler(e){return e.startsWith("0x")||(e="0x"+e),(0,o.toHex)(this.refundHandler)===(0,o.toHex)(e)}isClaimHandler(e){return e.startsWith("0x")||(e="0x"+e),(0,o.toHex)(this.claimHandler)===(0,o.toHex)(e)}isClaimData(e){return e.startsWith("0x")||(e="0x"+e),(0,o.toHex)(this.claimData)===(0,o.toHex)(e)}equals(e){return e.offerer.toLowerCase()===this.offerer.toLowerCase()&&e.claimer.toLowerCase()===this.claimer.toLowerCase()&&e.token.toLowerCase()===this.token.toLowerCase()&&e.refundHandler.toLowerCase()===this.refundHandler.toLowerCase()&&e.claimHandler.toLowerCase()===this.claimHandler.toLowerCase()&&e.payIn===this.payIn&&e.payOut===this.payOut&&e.reputation===this.reputation&&this.sequence===e.sequence&&e.claimData.toLowerCase()===this.claimData.toLowerCase()&&e.refundData.toLowerCase()===this.refundData.toLowerCase()&&e.amount===this.amount&&e.securityDeposit===this.securityDeposit&&e.claimerBounty===this.claimerBounty}toEscrowStruct(){return{offerer:this.offerer,claimer:this.claimer,token:this.token,refund_handler:this.refundHandler,claim_handler:this.claimHandler,flags:this.getFlags(),claim_data:this.claimData,refund_data:this.refundData,amount:i.cairo.uint256((0,o.toBigInt)(this.amount)),fee_token:this.feeToken,security_deposit:i.cairo.uint256((0,o.toBigInt)(this.securityDeposit)),claimer_bounty:i.cairo.uint256((0,o.toBigInt)(this.claimerBounty)),success_action:new i.CairoOption(i.CairoOptionVariant.None)}}static fromSerializedFeltArray(e,t){let r=(0,o.toHex)(e.shift()),n=(0,o.toHex)(e.shift()),a=(0,o.toHex)(e.shift()),i=(0,o.toHex)(e.shift()),c=(0,o.toHex)(e.shift()),{payOut:l,payIn:u,reputation:d,sequence:h}=s.toFlags(e.shift()),f=(0,o.toHex)(e.shift()),p=(0,o.toHex)(e.shift()),g=(0,o.toBigInt)({low:e.shift(),high:e.shift()}),m=(0,o.toHex)(e.shift()),y=(0,o.toBigInt)({low:e.shift(),high:e.shift()}),b=(0,o.toBigInt)({low:e.shift(),high:e.shift()});return 0n===(0,o.toBigInt)(e.shift())&&((0,o.toHex)(e.shift()),(0,o.toBigInt)(e.shift()),(0,o.toBigInt)({low:e.shift(),high:e.shift()})),new s(r,n,a,i,c,l,u,d,h,f,p,g,m,y,b,t.getType(),null)}constructor(e,t,r,n,a,i,o,s,c,l,u,d,h,f,p,g,m){super(),null!=t||null!=r||null!=n||null!=a||null!=i||null!=o||null!=s||null!=c||null!=l||null!=u||null!=d||null!=h||null!=f||null!=p?(this.offerer=e,this.claimer=t,this.token=r,this.refundHandler=n,this.claimHandler=a,this.payOut=i,this.payIn=o,this.reputation=s,this.sequence=c,this.claimData=l,this.refundData=u,this.amount=d,this.feeToken=h,this.securityDeposit=f,this.claimerBounty=p,this.kind=g,this.extraData=m):(this.offerer=e.offerer,this.claimer=e.claimer,this.token=e.token,this.refundHandler=e.refundHandler,this.claimHandler=e.claimHandler,this.payOut=e.payOut,this.payIn=e.payIn,this.reputation=e.reputation,this.sequence=null==e.sequence?null:BigInt(e.sequence),this.claimData=e.claimData,this.refundData=e.refundData,this.amount=null==e.amount?null:BigInt(e.amount),this.feeToken=e.feeToken,this.securityDeposit=null==e.securityDeposit?null:BigInt(e.securityDeposit),this.claimerBounty=null==e.claimerBounty?null:BigInt(e.claimerBounty),this.kind=e.kind,this.extraData=e.extraData)}}r.StarknetSwapData=s,n.SwapData.deserializers.strk=s},441484,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.findLastIndex=r.parseInitFunctionCalldata=r.poseidonHashRange=r.bufferToByteArray=r.bufferToBytes31Span=r.bytes31SpanToBuffer=r.toBigInt=r.bigNumberishToBuffer=r.u32ReverseEndianness=r.bufferToU32Array=r.u32ArrayToBuffer=r.calculateHash=r.toHex=r.tryWithRetries=r.getLogger=r.onceAsync=r.timeoutPromise=r.isUint256=void 0;let n=e.r(906984),a=e.r(288128),i=e.r(843943),o=e.r(54614);function s(e){return null!=e.low&&null!=e.high}function c(e,t){return new Promise((r,n)=>{let a=setTimeout(r,e);null!=t&&t.addEventListener("abort",()=>{clearTimeout(a),n(Error("Aborted"))})})}function l(t){return{debug:function(r){for(var n=arguments.length,a=Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return e.g.atomiqLogLevel>=3&&console.debug(t+r,...a)},info:function(r){for(var n=arguments.length,a=Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return e.g.atomiqLogLevel>=2&&console.info(t+r,...a)},warn:function(r){for(var n=arguments.length,a=Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return(null==e.g.atomiqLogLevel||e.g.atomiqLogLevel>=1)&&console.warn(t+r,...a)},error:function(r){for(var n=arguments.length,a=Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];return(null==e.g.atomiqLogLevel||e.g.atomiqLogLevel>=0)&&console.error(t+r,...a)}}}r.isUint256=s,r.timeoutPromise=c,r.onceAsync=function(e){let t;return()=>null==t?t=e():t.catch(()=>t=e())},r.getLogger=l;let u=l("Utils: ");function d(e,t){if(s(e))return i.Buffer.concat([d(e.high,16),d(e.low,16)]);e="string"==typeof e?e.startsWith("0x")?e.slice(2):BigInt(e).toString(16):e.toString(16),null!=t&&(e=e.padStart(2*t,"0"));let r=i.Buffer.from(e,"hex");return r.length>t?r.slice(r.length-t):r}function h(e){return null==e?null:s(e)?h(e.high)<<128n|h(e.low):"string"==typeof e?(e.startsWith("0x")||(e="0x"+e),BigInt(e)):"bigint"==typeof e?e:BigInt(e)}function f(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=[];for(let a=t+31;a<r;a+=31)n.push(BigInt("0x"+e.slice(a-31,a).toString("hex")));return r>t+31*n.length&&n.push(BigInt("0x"+e.slice(t+31*n.length,r).toString("hex"))),n}r.tryWithRetries=async function(e,t,r,n){(t=t||{}).maxRetries=t.maxRetries||5,t.delay=t.delay||500,t.exponential=null==t.exponential||t.exponential;let a=null;for(let i=0;i<t.maxRetries;i++){try{return await e()}catch(e){if(null!=r&&r(e))throw e;a=e,u.error("tryWithRetries(): error on try number: "+i,e)}if(null!=n&&n.aborted)throw Error("Aborted");i!==t.maxRetries-1&&await c(t.exponential?t.delay*Math.pow(2,i):t.delay,n)}throw a},r.toHex=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:64;if(null==e)return null;switch(typeof e){case"string":if(e.startsWith("0x"))return"0x"+e.slice(2).padStart(t,"0").toLowerCase();return"0x"+BigInt(e).toString(16).padStart(t,"0");case"number":case"bigint":return"0x"+e.toString(16).padStart(t,"0")}return"0x"+e.toString("hex").padStart(t,"0")},r.calculateHash=function(e){let t={version:e.details.version,maxFee:e.details.maxFee,chainId:e.details.chainId,nonce:e.details.nonce,accountDeploymentData:"0x3"===e.details.version?e.details.accountDeploymentData:null,nonceDataAvailabilityMode:"0x3"===e.details.version?n.EDAMode[e.details.nonceDataAvailabilityMode]:null,feeDataAvailabilityMode:"0x3"===e.details.version?n.EDAMode[e.details.feeDataAvailabilityMode]:null,resourceBounds:"0x3"===e.details.version?e.details.resourceBounds:null,tip:"0x3"===e.details.version?e.details.tip:null,paymasterData:"0x3"===e.details.version?e.details.paymasterData:null};switch(e.type){case"INVOKE":let r=a.CallData.compile(e.signed.calldata);return e.txId=a.hash.calculateInvokeTransactionHash({senderAddress:e.details.walletAddress,compiledCalldata:r,...t});case"DEPLOY_ACCOUNT":let i=a.CallData.compile(e.signed.constructorCalldata);return e.txId=a.hash.calculateDeployAccountTransactionHash({contractAddress:e.tx.contractAddress,classHash:e.signed.classHash,constructorCalldata:i,compiledConstructorCalldata:i,salt:e.signed.addressSalt,...t});default:throw Error("Unsupported tx type!")}},r.u32ArrayToBuffer=function(e){let t=i.Buffer.alloc(4*e.length);for(let r=0;r<e.length;r++)t.writeUInt32BE(Number(e[r]),4*r);return t},r.bufferToU32Array=function(e){let t=[];for(let r=0;r<e.length;r+=4)t.push(e.readUInt32BE(r));return t},r.u32ReverseEndianness=function(e){let t=BigInt(e);return Number((255n&t)<<24n|(65280n&t)<<8n|t>>8n&65280n|t>>24n&255n)},r.bigNumberishToBuffer=d,r.toBigInt=h,r.bytes31SpanToBuffer=function(e,t){let r=[],n=Math.floor(t/31),a=t-31*n,o=n+ +(0!==a);if(e.length<o)throw Error("Not enough bytes in the felt array!");let s=0;for(;s<n;s++)r.push(d(e[s],31));return 0!==a&&r.push(d(e[s],a)),i.Buffer.concat(r)},r.bufferToBytes31Span=f,r.bufferToByteArray=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length,n=[];for(let a=t+31;a<r;a+=31)n.push(BigInt("0x"+e.slice(a-31,a).toString("hex")));let a=BigInt(0),i=BigInt(r-(t+31*n.length));return i!==BigInt(0)&&(a=BigInt("0x"+e.slice(t+31*n.length,r).toString("hex"))),[BigInt(n.length),...n,a,i]},r.poseidonHashRange=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.length;return a.hash.computePoseidonHashOnElements(f(e,t,r))},r.parseInitFunctionCalldata=function(e,t){let r=o.StarknetSwapData.fromSerializedFeltArray(e,t),n=Number(h(e.shift())),a=e.splice(0,n),i=h(e.shift()),s=Number(h(e.shift())),c=e.splice(0,s);if(0!==e.length)throw Error("Calldata not read fully!");return{escrow:r,signature:a,timeout:i,extraData:c}},r.findLastIndex=function(e,t){for(let r=e.length-1;r>=0;r--)if(t(e[r],r))return r;return -1}},978288,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetModule=void 0;let n=e.r(441484);r.StarknetModule=class{constructor(e){this.logger=(0,n.getLogger)(this.constructor.name+": "),this.provider=e.provider,this.retryPolicy=e.retryPolicy,this.root=e}}},541479,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ERC20Abi=void 0,r.ERC20Abi=[{type:"impl",name:"MintableToken",interface_name:"src::mintable_token_interface::IMintableToken"},{type:"struct",name:"core::integer::u256",members:[{name:"low",type:"core::integer::u128"},{name:"high",type:"core::integer::u128"}]},{type:"interface",name:"src::mintable_token_interface::IMintableToken",items:[{type:"function",name:"permissioned_mint",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u256"}],outputs:[],state_mutability:"external"},{type:"function",name:"permissioned_burn",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u256"}],outputs:[],state_mutability:"external"}]},{type:"impl",name:"MintableTokenCamelImpl",interface_name:"src::mintable_token_interface::IMintableTokenCamel"},{type:"interface",name:"src::mintable_token_interface::IMintableTokenCamel",items:[{type:"function",name:"permissionedMint",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u256"}],outputs:[],state_mutability:"external"},{type:"function",name:"permissionedBurn",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u256"}],outputs:[],state_mutability:"external"}]},{type:"impl",name:"Replaceable",interface_name:"src::replaceability_interface::IReplaceable"},{type:"struct",name:"core::array::Span::<core::felt252>",members:[{name:"snapshot",type:"@core::array::Array::<core::felt252>"}]},{type:"struct",name:"src::replaceability_interface::EICData",members:[{name:"eic_hash",type:"core::starknet::class_hash::ClassHash"},{name:"eic_init_data",type:"core::array::Span::<core::felt252>"}]},{type:"enum",name:"core::option::Option::<src::replaceability_interface::EICData>",variants:[{name:"Some",type:"src::replaceability_interface::EICData"},{name:"None",type:"()"}]},{type:"enum",name:"core::bool",variants:[{name:"False",type:"()"},{name:"True",type:"()"}]},{type:"struct",name:"src::replaceability_interface::ImplementationData",members:[{name:"impl_hash",type:"core::starknet::class_hash::ClassHash"},{name:"eic_data",type:"core::option::Option::<src::replaceability_interface::EICData>"},{name:"final",type:"core::bool"}]},{type:"interface",name:"src::replaceability_interface::IReplaceable",items:[{type:"function",name:"get_upgrade_delay",inputs:[],outputs:[{type:"core::integer::u64"}],state_mutability:"view"},{type:"function",name:"get_impl_activation_time",inputs:[{name:"implementation_data",type:"src::replaceability_interface::ImplementationData"}],outputs:[{type:"core::integer::u64"}],state_mutability:"view"},{type:"function",name:"add_new_implementation",inputs:[{name:"implementation_data",type:"src::replaceability_interface::ImplementationData"}],outputs:[],state_mutability:"external"},{type:"function",name:"remove_implementation",inputs:[{name:"implementation_data",type:"src::replaceability_interface::ImplementationData"}],outputs:[],state_mutability:"external"},{type:"function",name:"replace_to",inputs:[{name:"implementation_data",type:"src::replaceability_interface::ImplementationData"}],outputs:[],state_mutability:"external"}]},{type:"impl",name:"AccessControlImplExternal",interface_name:"src::access_control_interface::IAccessControl"},{type:"interface",name:"src::access_control_interface::IAccessControl",items:[{type:"function",name:"has_role",inputs:[{name:"role",type:"core::felt252"},{name:"account",type:"core::starknet::contract_address::ContractAddress"}],outputs:[{type:"core::bool"}],state_mutability:"view"},{type:"function",name:"get_role_admin",inputs:[{name:"role",type:"core::felt252"}],outputs:[{type:"core::felt252"}],state_mutability:"view"}]},{type:"impl",name:"RolesImpl",interface_name:"src::roles_interface::IMinimalRoles"},{type:"interface",name:"src::roles_interface::IMinimalRoles",items:[{type:"function",name:"is_governance_admin",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"}],outputs:[{type:"core::bool"}],state_mutability:"view"},{type:"function",name:"is_upgrade_governor",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"}],outputs:[{type:"core::bool"}],state_mutability:"view"},{type:"function",name:"register_governance_admin",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"}],outputs:[],state_mutability:"external"},{type:"function",name:"remove_governance_admin",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"}],outputs:[],state_mutability:"external"},{type:"function",name:"register_upgrade_governor",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"}],outputs:[],state_mutability:"external"},{type:"function",name:"remove_upgrade_governor",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"}],outputs:[],state_mutability:"external"},{type:"function",name:"renounce",inputs:[{name:"role",type:"core::felt252"}],outputs:[],state_mutability:"external"}]},{type:"impl",name:"ERC20Impl",interface_name:"openzeppelin::token::erc20::interface::IERC20"},{type:"interface",name:"openzeppelin::token::erc20::interface::IERC20",items:[{type:"function",name:"name",inputs:[],outputs:[{type:"core::felt252"}],state_mutability:"view"},{type:"function",name:"symbol",inputs:[],outputs:[{type:"core::felt252"}],state_mutability:"view"},{type:"function",name:"decimals",inputs:[],outputs:[{type:"core::integer::u8"}],state_mutability:"view"},{type:"function",name:"total_supply",inputs:[],outputs:[{type:"core::integer::u256"}],state_mutability:"view"},{type:"function",name:"balance_of",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"}],outputs:[{type:"core::integer::u256"}],state_mutability:"view"},{type:"function",name:"allowance",inputs:[{name:"owner",type:"core::starknet::contract_address::ContractAddress"},{name:"spender",type:"core::starknet::contract_address::ContractAddress"}],outputs:[{type:"core::integer::u256"}],state_mutability:"view"},{type:"function",name:"transfer",inputs:[{name:"recipient",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u256"}],outputs:[{type:"core::bool"}],state_mutability:"external"},{type:"function",name:"transfer_from",inputs:[{name:"sender",type:"core::starknet::contract_address::ContractAddress"},{name:"recipient",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u256"}],outputs:[{type:"core::bool"}],state_mutability:"external"},{type:"function",name:"approve",inputs:[{name:"spender",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u256"}],outputs:[{type:"core::bool"}],state_mutability:"external"}]},{type:"impl",name:"ERC20CamelOnlyImpl",interface_name:"openzeppelin::token::erc20::interface::IERC20CamelOnly"},{type:"interface",name:"openzeppelin::token::erc20::interface::IERC20CamelOnly",items:[{type:"function",name:"totalSupply",inputs:[],outputs:[{type:"core::integer::u256"}],state_mutability:"view"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"}],outputs:[{type:"core::integer::u256"}],state_mutability:"view"},{type:"function",name:"transferFrom",inputs:[{name:"sender",type:"core::starknet::contract_address::ContractAddress"},{name:"recipient",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u256"}],outputs:[{type:"core::bool"}],state_mutability:"external"}]},{type:"constructor",name:"constructor",inputs:[{name:"name",type:"core::felt252"},{name:"symbol",type:"core::felt252"},{name:"decimals",type:"core::integer::u8"},{name:"initial_supply",type:"core::integer::u256"},{name:"recipient",type:"core::starknet::contract_address::ContractAddress"},{name:"permitted_minter",type:"core::starknet::contract_address::ContractAddress"},{name:"provisional_governance_admin",type:"core::starknet::contract_address::ContractAddress"},{name:"upgrade_delay",type:"core::integer::u64"}]},{type:"function",name:"increase_allowance",inputs:[{name:"spender",type:"core::starknet::contract_address::ContractAddress"},{name:"added_value",type:"core::integer::u256"}],outputs:[{type:"core::bool"}],state_mutability:"external"},{type:"function",name:"decrease_allowance",inputs:[{name:"spender",type:"core::starknet::contract_address::ContractAddress"},{name:"subtracted_value",type:"core::integer::u256"}],outputs:[{type:"core::bool"}],state_mutability:"external"},{type:"function",name:"increaseAllowance",inputs:[{name:"spender",type:"core::starknet::contract_address::ContractAddress"},{name:"addedValue",type:"core::integer::u256"}],outputs:[{type:"core::bool"}],state_mutability:"external"},{type:"function",name:"decreaseAllowance",inputs:[{name:"spender",type:"core::starknet::contract_address::ContractAddress"},{name:"subtractedValue",type:"core::integer::u256"}],outputs:[{type:"core::bool"}],state_mutability:"external"},{type:"event",name:"openzeppelin::token::erc20_v070::erc20::ERC20::Transfer",kind:"struct",members:[{name:"from",type:"core::starknet::contract_address::ContractAddress",kind:"data"},{name:"to",type:"core::starknet::contract_address::ContractAddress",kind:"data"},{name:"value",type:"core::integer::u256",kind:"data"}]},{type:"event",name:"openzeppelin::token::erc20_v070::erc20::ERC20::Approval",kind:"struct",members:[{name:"owner",type:"core::starknet::contract_address::ContractAddress",kind:"data"},{name:"spender",type:"core::starknet::contract_address::ContractAddress",kind:"data"},{name:"value",type:"core::integer::u256",kind:"data"}]},{type:"event",name:"src::replaceability_interface::ImplementationAdded",kind:"struct",members:[{name:"implementation_data",type:"src::replaceability_interface::ImplementationData",kind:"data"}]},{type:"event",name:"src::replaceability_interface::ImplementationRemoved",kind:"struct",members:[{name:"implementation_data",type:"src::replaceability_interface::ImplementationData",kind:"data"}]},{type:"event",name:"src::replaceability_interface::ImplementationReplaced",kind:"struct",members:[{name:"implementation_data",type:"src::replaceability_interface::ImplementationData",kind:"data"}]},{type:"event",name:"src::replaceability_interface::ImplementationFinalized",kind:"struct",members:[{name:"impl_hash",type:"core::starknet::class_hash::ClassHash",kind:"data"}]},{type:"event",name:"src::access_control_interface::RoleGranted",kind:"struct",members:[{name:"role",type:"core::felt252",kind:"data"},{name:"account",type:"core::starknet::contract_address::ContractAddress",kind:"data"},{name:"sender",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"src::access_control_interface::RoleRevoked",kind:"struct",members:[{name:"role",type:"core::felt252",kind:"data"},{name:"account",type:"core::starknet::contract_address::ContractAddress",kind:"data"},{name:"sender",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"src::access_control_interface::RoleAdminChanged",kind:"struct",members:[{name:"role",type:"core::felt252",kind:"data"},{name:"previous_admin_role",type:"core::felt252",kind:"data"},{name:"new_admin_role",type:"core::felt252",kind:"data"}]},{type:"event",name:"src::roles_interface::GovernanceAdminAdded",kind:"struct",members:[{name:"added_account",type:"core::starknet::contract_address::ContractAddress",kind:"data"},{name:"added_by",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"src::roles_interface::GovernanceAdminRemoved",kind:"struct",members:[{name:"removed_account",type:"core::starknet::contract_address::ContractAddress",kind:"data"},{name:"removed_by",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"src::roles_interface::UpgradeGovernorAdded",kind:"struct",members:[{name:"added_account",type:"core::starknet::contract_address::ContractAddress",kind:"data"},{name:"added_by",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"src::roles_interface::UpgradeGovernorRemoved",kind:"struct",members:[{name:"removed_account",type:"core::starknet::contract_address::ContractAddress",kind:"data"},{name:"removed_by",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"openzeppelin::token::erc20_v070::erc20::ERC20::Event",kind:"enum",variants:[{name:"Transfer",type:"openzeppelin::token::erc20_v070::erc20::ERC20::Transfer",kind:"nested"},{name:"Approval",type:"openzeppelin::token::erc20_v070::erc20::ERC20::Approval",kind:"nested"},{name:"ImplementationAdded",type:"src::replaceability_interface::ImplementationAdded",kind:"nested"},{name:"ImplementationRemoved",type:"src::replaceability_interface::ImplementationRemoved",kind:"nested"},{name:"ImplementationReplaced",type:"src::replaceability_interface::ImplementationReplaced",kind:"nested"},{name:"ImplementationFinalized",type:"src::replaceability_interface::ImplementationFinalized",kind:"nested"},{name:"RoleGranted",type:"src::access_control_interface::RoleGranted",kind:"nested"},{name:"RoleRevoked",type:"src::access_control_interface::RoleRevoked",kind:"nested"},{name:"RoleAdminChanged",type:"src::access_control_interface::RoleAdminChanged",kind:"nested"},{name:"GovernanceAdminAdded",type:"src::roles_interface::GovernanceAdminAdded",kind:"nested"},{name:"GovernanceAdminRemoved",type:"src::roles_interface::GovernanceAdminRemoved",kind:"nested"},{name:"UpgradeGovernorAdded",type:"src::roles_interface::UpgradeGovernorAdded",kind:"nested"},{name:"UpgradeGovernorRemoved",type:"src::roles_interface::UpgradeGovernorRemoved",kind:"nested"}]}]},309694,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetAddresses=void 0;let n=e.r(978288),a=e.r(288128);class i extends n.StarknetModule{static isValidAddress(e){if(66!==e.length)return!1;try{return(0,a.validateAndParseAddress)(e),!0}catch(e){return!1}}}r.StarknetAddresses=i},187203,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetTokens=void 0;let n=e.r(978288),a=e.r(604616),i=e.r(541479),o=e.r(288128),s=e.r(441484),c=e.r(309694);class l extends n.StarknetModule{getContract(e){return new o.Contract(i.ERC20Abi,e,this.root.provider).typedv2(i.ERC20Abi)}Transfer(e,t,r,n){let i=this.getContract(r);return new a.StarknetAction(e,this.root,i.populateTransaction.transfer(t,n),l.GasCosts.TRANSFER)}Approve(e,t,r,n){let i=this.getContract(r);return new a.StarknetAction(e,this.root,i.populateTransaction.approve(t,n),l.GasCosts.APPROVE)}isValidToken(e){return c.StarknetAddresses.isValidAddress(e)}async getTokenBalance(e,t){let r=this.getContract(t),n=await r.balance_of(e),a=(0,s.toBigInt)(n);return this.logger.debug("getTokenBalance(): token balance fetched, token: "+t+" address: "+e+" amount: "+a.toString()),a}getNativeCurrencyAddress(){return this.root.Fees.getDefaultGasToken()}async txsTransfer(e,t,r,n,a){let i=this.Transfer(e,n,t,r);return a=null!=a?a:await this.root.Fees.getFeeRate(),this.logger.debug("txsTransfer(): transfer TX created, recipient: "+n.toString()+" token: "+t.toString()+" amount: "+r.toString(10)),[await i.tx(a)]}}r.StarknetTokens=l,l.ERC20_ETH="0x049d36570d4e46f48e99674bd3fcc84644ddd6b96f7c741b1562b82f9e004dc7",l.ERC20_STRK="0x04718f5a0fc34cc1af16a1cdee98ffb20c31f5cd61d6ab07201858f4287c938d",l.GasCosts={TRANSFER:{l1DataGas:400,l2Gas:4e6,l1Gas:0},APPROVE:{l1DataGas:400,l2Gas:4e6,l1Gas:0}}},880747,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetFees=r.starknetGasAdd=r.starknetGasMul=void 0;let n=e.r(441484),a=e.r(187203);r.starknetGasMul=function(e,t){return{l1Gas:e.l1Gas*t,l2Gas:e.l2Gas*t,l1DataGas:e.l1DataGas*t}},r.starknetGasAdd=function(e,t){return{l1Gas:e.l1Gas+t.l1Gas,l2Gas:e.l2Gas+t.l2Gas,l1DataGas:e.l1DataGas+t.l1DataGas}},r.StarknetFees=class{async _getFeeRate(){let e=await this.provider.getBlock("latest"),t=(0,n.toBigInt)(e.l1_gas_price.price_in_fri)*this.feeMultiplierPPM/1000000n,r=(0,n.toBigInt)(e.l1_data_gas_price.price_in_fri)*this.feeMultiplierPPM/1000000n,a=(0,n.toBigInt)(e.l2_gas_price.price_in_fri)*this.feeMultiplierPPM/1000000n;return this.logger.debug("_getFeeRate(): L1 fee rate: ",[t.toString(10),r.toString(10),a.toString(10)]),{l1GasCost:t,l2GasCost:a,l1DataGasCost:r}}async getFeeRate(){if(null==this.blockFeeCache||Date.now()-this.blockFeeCache.timestamp>5e3){let e={timestamp:Date.now(),feeRate:null};e.feeRate=this._getFeeRate().catch(t=>{throw this.blockFeeCache===e&&(this.blockFeeCache=null),t}),this.blockFeeCache=e}let{l1GasCost:e,l2GasCost:t,l1DataGasCost:r}=await this.blockFeeCache.feeRate;e>this.maxFeeRate.l1GasCost&&(e=this.maxFeeRate.l1GasCost),t>this.maxFeeRate.l2GasCost&&(t=this.maxFeeRate.l2GasCost),r>this.maxFeeRate.l1DataGasCost&&(r=this.maxFeeRate.l1DataGasCost);let n=e.toString(10)+","+t.toString(10)+","+r.toString(10)+";v3";return this.logger.debug("getFeeRate(): calculated fee: "+n),n}getDefaultGasToken(){return a.StarknetTokens.ERC20_STRK}static getGasFee(e,t){if(null==t)return 0n;let[r,n,a]=t.split(";")[0].split(",");return BigInt(e.l1Gas)*BigInt(r)+BigInt(e.l2Gas)*BigInt(n)+BigInt(e.l1DataGas)*BigInt(a)}static getGasToken(e){return null==e?null:"v1"===e.split(";")[1]?a.StarknetTokens.ERC20_ETH:a.StarknetTokens.ERC20_STRK}getFeeDetails(e,t){if(null==t)return null;let[r,a,i]=t.split(";")[0].split(",");return{version:"0x3",resourceBounds:{l1_gas:{max_amount:(0,n.toHex)(e.l1Gas,16),max_price_per_unit:(0,n.toHex)(BigInt(r),16)},l2_gas:{max_amount:(0,n.toHex)(e.l2Gas,16),max_price_per_unit:(0,n.toHex)(BigInt(a),16)},l1_data_gas:{max_amount:(0,n.toHex)(e.l1DataGas,16),max_price_per_unit:(0,n.toHex)(BigInt(i),16)}},tip:"0x0",paymasterData:[],nonceDataAvailabilityMode:this.nonceDA,feeDataAvailabilityMode:this.feeDA}}constructor(e,t={l1GasCost:0x470de4df820000n,l2GasCost:4000000000000000n,l1DataGasCost:0x2386f26fc10000n},r=1.25,a){var i,o;this.logger=(0,n.getLogger)("StarknetFees: "),this.blockFeeCache=null,this.provider=e,this.maxFeeRate=t,this.feeDA=null!=(i=null==a?void 0:a.fee)?i:"L1",this.nonceDA=null!=(o=null==a?void 0:a.nonce)?o:"L1",this.feeMultiplierPPM=BigInt(Math.floor(1e6*r))}}},604616,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetAction=void 0;let n=e.r(880747);r.StarknetAction=class{estimateFeeRate(){return this.root.Fees.getFeeRate()}addIx(e,t){this.instructions.push(e),this.gas=(0,n.starknetGasAdd)(this.gas,t)}add(e){return this.addAction(e)}addAction(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.instructions.length;if(e.mainSigner!==this.mainSigner)throw Error("Actions need to have the same signer!");return null==this.gas.l1Gas&&null!=e.gas.l1Gas&&(this.gas.l1Gas=e.gas.l1Gas),null==this.gas.l2Gas&&null!=e.gas.l2Gas&&(this.gas.l2Gas=e.gas.l2Gas),null==this.gas.l1DataGas&&null!=e.gas.l1DataGas&&(this.gas.l1DataGas=e.gas.l1DataGas),null!=this.gas.l1Gas&&null!=e.gas.l1Gas&&(this.gas.l1Gas+=e.gas.l1Gas),null!=this.gas.l2Gas&&null!=e.gas.l2Gas&&(this.gas.l2Gas+=e.gas.l2Gas),null!=this.gas.l1DataGas&&null!=e.gas.l1DataGas&&(this.gas.l1DataGas+=e.gas.l1DataGas),this.instructions.splice(t,0,...e.instructions),null==this.feeRate&&(this.feeRate=e.feeRate),this}async tx(e){return null==e&&(e=this.feeRate),null==e&&(e=await this.estimateFeeRate()),{type:"INVOKE",tx:this.instructions,details:{...this.root.Fees.getFeeDetails(this.gas,e),walletAddress:this.mainSigner,cairoVersion:"1",chainId:this.root.starknetChainId,nonce:null,accountDeploymentData:[],skipValidate:!1}}}async addToTxs(e,t){e.push(await this.tx(t))}ixsLength(){return this.instructions.length}constructor(e,t,r=[],n,a){var i,o,s;this.mainSigner=e,this.root=t,this.instructions=Array.isArray(r)?r:[r],this.gas={l1Gas:null!=(i=null==n?void 0:n.l1Gas)?i:0,l2Gas:null!=(o=null==n?void 0:n.l2Gas)?o:0,l1DataGas:null!=(s=null==n?void 0:n.l1DataGas)?s:0},this.feeRate=a}}},483771,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetTransactions=void 0;let n=e.r(978288),a=e.r(441484);class i extends n.StarknetModule{async confirmTransaction(e,t){let r="pending";for(;"pending"===r||"not_found"===r;)await (0,a.timeoutPromise)(3e3,t),"not_found"===(r=await this._getTxIdStatus(e.txId))&&null!=e.signed&&await this.sendSignedTransaction(e).catch(e=>{var t;(null==(t=e.baseError)?void 0:t.code)!==59&&this.logger.error("confirmTransaction(): Error on transaction re-send: ",e)});if("rejected"===r)throw Error("Transaction rejected!");let n=(0,a.toBigInt)(e.details.nonce)+1n,i=this.latestConfirmedNonces[e.details.walletAddress];if((null==i||n>i)&&(this.latestConfirmedNonces[e.details.walletAddress]=n),"reverted"===r)throw Error("Transaction reverted!")}async prepareTransactions(e,t){let r=await e.getNonce(),n=this.latestConfirmedNonces[e.getAddress()];null!=n&&n>r&&(this.logger.debug("prepareTransactions(): Using nonce from local cache!"),r=n),r===BigInt(0)&&e.isWalletAccount()&&(r=BigInt(1));let a=await e.checkAndGetDeployPayload(r);null!=a&&t.unshift(await this.root.Accounts.getAccountDeployTransaction(a));for(let n=0;n<t.length;n++){let a=t[n];null!=a.details.nonce&&(r=BigInt(a.details.nonce)),null==r&&(r=BigInt(await this.root.provider.getNonceForAddress(e.getAddress()))),null==a.details.nonce&&(a.details.nonce=r),this.logger.debug("sendAndConfirm(): transaction prepared ("+(n+1)+"/"+t.length+"), nonce: "+a.details.nonce),r+=BigInt(1),null!=this.cbkBeforeTxSigned&&await this.cbkBeforeTxSigned(a)}}async sendSignedTransaction(e,t,r){let n;if(null!=t&&await t(e.txId,await this.serializeTx(e)),this.logger.debug("sendSignedTransaction(): sending transaction: ",e.txId),null==e.signed){let t;switch(e.type){case"INVOKE":t=(await r.account.execute(e.tx,e.details)).transaction_hash;break;case"DEPLOY_ACCOUNT":t=(await r.account.deployAccount(e.tx,e.details)).transaction_hash;break;default:throw Error("Unsupported tx type!")}return e.txId=t,t}switch(e.type){case"INVOKE":n=await this.provider.channel.invoke(e.signed,e.details).then(e=>e.transaction_hash);break;case"DEPLOY_ACCOUNT":n=await this.provider.channel.deployAccount(e.signed,e.details).then(e=>e.transaction_hash);break;default:throw Error("Unsupported tx type!")}return e.txId!==n&&this.logger.warn("sendSignedTransaction(): sent tx hash not matching the precomputed hash!"),this.logger.info("sendSignedTransaction(): tx sent, expected txHash: "+e.txId+", txHash: "+n),n}async sendAndConfirm(e,t,r,n,i,o){if(await this.prepareTransactions(e,t),!e.isWalletAccount())for(let r=0;r<t.length;r++){let n=t[r];switch(n.type){case"INVOKE":n.signed=await e.account.buildInvocation(n.tx,n.details),(0,a.calculateHash)(n);break;case"DEPLOY_ACCOUNT":n.signed=await e.account.buildAccountDeployPayload(n.tx,n.details),(0,a.calculateHash)(n);break;default:throw Error("Unsupported tx type!")}this.logger.debug("sendAndConfirm(): transaction signed ("+(r+1)+"/"+t.length+"): "+n.txId)}this.logger.debug("sendAndConfirm(): sending transactions, count: "+t.length+" waitForConfirmation: "+r+" parallel: "+i);let s=[];if(i){let a=[];for(let i=0;i<t.length;i++){let c=t[i],l=await this.sendSignedTransaction(c,o,e);r&&a.push(this.confirmTransaction(c,n)),s.push(l),this.logger.debug("sendAndConfirm(): transaction sent ("+(i+1)+"/"+t.length+"): "+c.txId)}a.length>0&&await Promise.all(a)}else for(let a=0;a<t.length;a++){let i=t[a],c=await this.sendSignedTransaction(i,o,e),l=this.confirmTransaction(i,n);this.logger.debug("sendAndConfirm(): transaction sent ("+(a+1)+"/"+t.length+"): "+i.txId),(a<t.length-1||r)&&await l,s.push(c)}return this.logger.info("sendAndConfirm(): sent transactions, count: "+t.length+" waitForConfirmation: "+r+" parallel: "+i),s}serializeTx(e){return Promise.resolve(JSON.stringify(e,(e,t)=>"bigint"==typeof t?(0,a.toHex)(t):t))}deserializeTx(e){return Promise.resolve(JSON.parse(e))}async getTxStatus(e){let t=await this.deserializeTx(e);return await this.getTxIdStatus(t.txId)}async _getTxIdStatus(e){let t=await this.provider.getTransactionStatus(e).catch(e=>{if(null!=e.message&&e.message.includes("29: Transaction hash not found"))return null;throw e});return null==t?"not_found":"RECEIVED"===t.finality_status?"pending":"REJECTED"===t.finality_status?"rejected":"SUCCEEDED"===t.execution_status?"success":"reverted"}async getTxIdStatus(e){let t=await this._getTxIdStatus(e);return"rejected"===t?"reverted":t}onBeforeTxSigned(e){this.cbkBeforeTxSigned=e}offBeforeTxSigned(e){return this.cbkBeforeTxSigned=null,!0}constructor(){super(...arguments),this.latestConfirmedNonces={}}}r.StarknetTransactions=i},869305,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetEvents=void 0;let n=e.r(978288);class a extends n.StarknetModule{async getBlockEvents(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,a=arguments.length>4?arguments[4]:void 0,i=[],o=null;for(;null==o||(null==o?void 0:o.continuation_token)!=null;)o=await this.root.provider.getEvents({address:e,from_block:null==r?"pending":{block_number:r},to_block:null==n?"pending":{block_number:n},keys:t,chunk_size:this.EVENTS_LIMIT,continuation_token:null==o?void 0:o.continuation_token}),null!=a&&a.throwIfAborted(),i.push(...o.events);return i}async findInEvents(e,t,r,n){let a=await this.provider.getBlockNumber();for(let i=a;i>=0;i-=this.FORWARD_BLOCK_RANGE){let o=await this.getBlockEvents(e,t,Math.max(i-this.FORWARD_BLOCK_RANGE,0),i===a?null:i,n),s=await r(o.reverse());if(null!=s)return s}return null}async findInEventsForward(e,t,r,n,a){(null==a||a>this.EVENTS_LIMIT)&&(a=this.EVENTS_LIMIT);let i=null;for(;null==i||(null==i?void 0:i.continuation_token)!=null;){i=await this.root.provider.getEvents({address:e,to_block:"latest",keys:t,chunk_size:null!=a?a:this.EVENTS_LIMIT,continuation_token:null==i?void 0:i.continuation_token}),null!=n&&n.throwIfAborted();let o=await r(i.events);if(null!=o)return o}return null}constructor(){super(...arguments),this.EVENTS_LIMIT=100,this.FORWARD_BLOCK_RANGE=2e3}}r.StarknetEvents=a},134299,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetSignatures=void 0;let n=e.r(843943),a=e.r(978288),i=e.r(288128),o=e.r(441484),s=e.r(14582),c=[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],l=[{name:"Data hash",type:"u256"}];class u extends a.StarknetModule{getTypedMessage(e,t,r){return{types:{StarknetDomain:c,[t]:e},primaryType:t,domain:this.domain,message:r}}async signTypedMessage(e,t,r,n){let a=await e.account.signMessage(this.getTypedMessage(t,r,n));return JSON.stringify(i.stark.formatSignature(a))}async isValidSignature(e,t,r,n,a){return this.provider.verifyMessageInStarknet(this.getTypedMessage(r,n,a),JSON.parse(e),t)}getDataSignature(e,t){let r=n.Buffer.from((0,s.sha256)(t));return this.signTypedMessage(e,l,"DataHash",{"Data hash":i.cairo.uint256((0,o.toHex)(r))})}isValidDataSignature(e,t,r){let a=n.Buffer.from((0,s.sha256)(e));return this.isValidSignature(t,r,l,"DataHash",{"Data hash":i.cairo.uint256((0,o.toHex)(a))})}constructor(e,t="atomiq.exchange"){super(e),this.domain={name:t,version:"1",chainId:i.shortString.decodeShortString(e.starknetChainId),revision:"1"}}}r.StarknetSignatures=u},852037,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetAccounts=void 0;let n=e.r(978288);class a extends n.StarknetModule{async getAccountDeployTransaction(e){let t={...this.root.Fees.getFeeDetails({l1DataGas:500,l2Gas:2e8,l1Gas:0},await this.root.Fees.getFeeRate()),walletAddress:e.contractAddress,cairoVersion:"1",chainId:this.root.starknetChainId,nonce:0,accountDeploymentData:[],skipValidate:!1};return{type:"DEPLOY_ACCOUNT",tx:e,details:t}}}r.StarknetAccounts=a},745242,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetBlocks=void 0;let n=e.r(978288);class a extends n.StarknetModule{fetchAndSaveBlockTime(e){let t=e.toString(10),r=this.provider.getBlockWithTxHashes(e).then(e=>e.timestamp),n=Date.now();return this.blockCache[t]={blockTime:r,timestamp:n},r.catch(e=>{throw null!=this.blockCache[t]&&this.blockCache[t].blockTime===r&&delete this.blockCache[t],e}),{blockTime:r,timestamp:n}}cleanupBlocks(){let e=Date.now();for(let t in this.blockCache)if(e-this.blockCache[t].timestamp>this.BLOCK_CACHE_TIME)delete this.blockCache[t];else break}getBlockTime(e){this.cleanupBlocks();let t=this.blockCache[e.toString(10)];return(null==t||Date.now()-t.timestamp>this.BLOCK_CACHE_TIME)&&(t=this.fetchAndSaveBlockTime(e)),t.blockTime}constructor(){super(...arguments),this.BLOCK_CACHE_TIME=5e3,this.blockCache={}}}r.StarknetBlocks=a},138530,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetSigner=void 0;let n=e.r(441484);r.StarknetSigner=class{getPublicKey(){return this.account.signer.getPubKey()}getAddress(){return(0,n.toHex)(this.account.address)}isWalletAccount(){return null!=this.account.walletProvider}async getNonce(){try{return BigInt(await this.account.getNonceForAddress(this.getAddress(),"pending"))}catch(e){if(null!=e.message&&e.message.includes("20: Contract not found"))return BigInt(0);throw e}}async checkAndGetDeployPayload(e){if(this.isDeployed)return null;let t=this.account;return null==t.getDeploymentData||(null!=e||(e=BigInt(await this.getNonce())),this.isDeployed=e!=BigInt(0),this.isDeployed)?null:t.getDeploymentData()}constructor(e){this.isDeployed=null,this.account=e}}},99192,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetKeypairWallet=void 0;let n=e.r(288128),a=e.r(441484),i=e.r(843943),o="0x00261c293c8084cd79086214176b33e5911677cec55104fddc8d25b0b736dcad";class s extends n.Account{getDeploymentData(){return{classHash:o,constructorCalldata:n.CallData.compile({publicKey:this.publicKey}),addressSalt:this.publicKey,contractAddress:this.address}}static generateRandomPrivateKey(){return"0x"+i.Buffer.from(n.ec.starkCurve.utils.randomPrivateKey()).toString("hex")}constructor(e,t){let r=n.ec.starkCurve.getStarkKey((0,a.toHex)(t));super(e,n.hash.calculateContractAddressFromHash(r,o,n.CallData.compile({publicKey:r}),0),t,"1"),this.publicKey=r}}r.StarknetKeypairWallet=s},132246,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetChainInterface=void 0;let n=e.r(288128),a=e.r(441484),i=e.r(483771),o=e.r(880747),s=e.r(309694),c=e.r(187203),l=e.r(869305),u=e.r(134299),d=e.r(852037),h=e.r(745242),f=e.r(138530),p=e.r(843943),g=e.r(99192);r.StarknetChainInterface=class{async getBalance(e,t){return await this.Tokens.getTokenBalance(e,t)}getNativeCurrencyAddress(){return this.Tokens.getNativeCurrencyAddress()}isValidToken(e){return this.Tokens.isValidToken(e)}isValidAddress(e){return s.StarknetAddresses.isValidAddress(e)}offBeforeTxReplace(e){return!0}onBeforeTxReplace(e){}onBeforeTxSigned(e){this.Transactions.onBeforeTxSigned(e)}offBeforeTxSigned(e){return this.Transactions.offBeforeTxSigned(e)}randomAddress(){return(0,a.toHex)(n.stark.randomAddress())}randomSigner(){let e="0x"+p.Buffer.from(n.ec.starkCurve.utils.randomPrivateKey()).toString("hex"),t=new g.StarknetKeypairWallet(this.provider,e);return new f.StarknetSigner(t)}sendAndConfirm(e,t,r,n,a,i){return this.Transactions.sendAndConfirm(e,t,r,n,a,i)}serializeTx(e){return this.Transactions.serializeTx(e)}deserializeTx(e){return this.Transactions.deserializeTx(e)}getTxIdStatus(e){return this.Transactions.getTxIdStatus(e)}getTxStatus(e){return this.Transactions.getTxStatus(e)}txsTransfer(e,t,r,n,a){return this.Tokens.txsTransfer(e,t,r,n,a)}async transfer(e,t,r,n,a){let i=await this.Tokens.txsTransfer(e.getAddress(),t,r,n,null==a?void 0:a.feeRate),[o]=await this.Transactions.sendAndConfirm(e,i,null==a?void 0:a.waitForConfirmation,null==a?void 0:a.abortSignal,!1);return o}constructor(e,t,r,n=new o.StarknetFees(t)){this.chainId="STARKNET",this.logger=(0,a.getLogger)("StarknetChainInterface: "),this.starknetChainId=e,this.provider=t,this.retryPolicy=r,this.Fees=n,this.Tokens=new c.StarknetTokens(this),this.Transactions=new i.StarknetTransactions(this),this.Signatures=new u.StarknetSignatures(this),this.Events=new l.StarknetEvents(this),this.Accounts=new d.StarknetAccounts(this),this.Blocks=new h.StarknetBlocks(this)}}},958415,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetBtcHeader=void 0;let n=e.r(843943),a=e.r(441484),i=e.r(14582);class o{getMerkleRoot(){return(0,a.u32ArrayToBuffer)(this.merkle_root)}getNbits(){return(0,a.u32ReverseEndianness)(this.nbits)}getNonce(){return(0,a.u32ReverseEndianness)(this.nonce)}getReversedPrevBlockhash(){return(0,a.u32ArrayToBuffer)(this.previous_blockhash)}getTimestamp(){return(0,a.u32ReverseEndianness)(this.reversed_timestamp)}getVersion(){return(0,a.u32ReverseEndianness)(this.reversed_version)}getHash(){if(null!=this.hash)return this.hash;let e=n.Buffer.alloc(80);return e.writeUInt32BE(this.reversed_version,0),(0,a.u32ArrayToBuffer)(this.previous_blockhash).copy(e,4),(0,a.u32ArrayToBuffer)(this.merkle_root).copy(e,36),e.writeUInt32BE(this.reversed_timestamp,68),e.writeUInt32BE(this.nbits,72),e.writeUInt32BE(this.nonce,76),n.Buffer.from((0,i.sha256)((0,i.sha256)(e)))}serialize(){return[this.reversed_version,...this.previous_blockhash,...this.merkle_root,this.reversed_timestamp,this.nbits,this.nonce]}static fromSerializedFeltArray(e){let t=(0,a.toHex)(e.shift()),r=e.splice(0,8).map(a.toHex),n=e.splice(0,8).map(a.toHex),i=(0,a.toHex)(e.shift());return new o({reversed_version:t,previous_blockhash:r,merkle_root:n,reversed_timestamp:i,nbits:(0,a.toHex)(e.shift()),nonce:(0,a.toHex)(e.shift())})}constructor(e){this.reversed_version=Number(e.reversed_version),this.previous_blockhash=e.previous_blockhash.map(e=>Number(e)),this.merkle_root=e.merkle_root.map(e=>Number(e)),this.reversed_timestamp=Number(e.reversed_timestamp),this.nbits=Number(e.nbits),this.nonce=Number(e.nonce),this.hash=e.hash}}r.StarknetBtcHeader=o},228033,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetBtcStoredHeader=void 0;let n=e.r(991989),a=e.r(958415),i=e.r(843943),o=e.r(288128),s=e.r(441484);class c{getBlockheight(){return this.block_height}getChainWork(){return(0,s.bigNumberishToBuffer)(this.chain_work,32)}getHeader(){return this.blockheader}getLastDiffAdjustment(){return this.last_diff_adjustment}getPrevBlockTimestamps(){return this.prev_block_timestamps}getBlockHash(){return(0,s.u32ArrayToBuffer)(this.block_hash).reverse()}computeNextBlockTimestamps(){let e=[...this.prev_block_timestamps];for(let t=1;t<10;t++)e[t-1]=e[t];return e[9]=this.blockheader.getTimestamp(),e}computeNextChainWork(e){let t=[...this.getChainWork()];return n.StatePredictorUtils.addInPlace(t,[...n.StatePredictorUtils.getChainwork(e)]),i.Buffer.from(t)}computeNextLastDiffAdjustment(e){let t=this.block_height+1,r=this.last_diff_adjustment;return t%n.StatePredictorUtils.DIFF_ADJUSTMENT_PERIOD==0&&(r=e),r}computeNext(e){return new c({chain_work:"0x"+this.computeNextChainWork(e.getNbits()).toString("hex"),prev_block_timestamps:this.computeNextBlockTimestamps(),block_height:this.block_height+1,last_diff_adjustment:this.computeNextLastDiffAdjustment(e.getTimestamp()),block_hash:(0,s.bufferToU32Array)(e.getHash()),blockheader:e})}serialize(){return[...this.blockheader.serialize(),...this.block_hash,this.chain_work.low,this.chain_work.high,this.block_height,this.last_diff_adjustment,...this.prev_block_timestamps]}static fromSerializedFeltArray(e){let t=a.StarknetBtcHeader.fromSerializedFeltArray(e),r=e.splice(0,8).map(s.toHex),n={low:e.shift(),high:e.shift()},i=(0,s.toHex)(e.shift());return new c({blockheader:t,block_hash:r,chain_work:n,block_height:i,last_diff_adjustment:(0,s.toHex)(e.shift()),prev_block_timestamps:e.splice(0,10).map(s.toHex)})}constructor(e){this.blockheader=e.blockheader instanceof a.StarknetBtcHeader?e.blockheader:new a.StarknetBtcHeader(e.blockheader),this.block_hash=e.block_hash.map(e=>Number(e)),this.chain_work=(0,s.isUint256)(e.chain_work)?e.chain_work:o.cairo.uint256(e.chain_work),this.block_height=Number(e.block_height),this.last_diff_adjustment=Number(e.last_diff_adjustment),this.prev_block_timestamps=e.prev_block_timestamps.map(e=>Number(e))}}r.StarknetBtcStoredHeader=c},996655,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetContractEvents=void 0;let n=e.r(869305),a=e.r(288128),i=e.r(441484);class o extends n.StarknetEvents{toStarknetAbiEvents(e){let t=a.events.getAbiEvents(this.abi),r=a.CallData.getAbiStruct(this.abi),n=a.CallData.getAbiEnum(this.abi),i=a.events.parseEvents(e,t,r,n);if(i.length!==e.length)throw Error("Invalid event detected, please check provided ABI");return i.map((t,r)=>{let n=e[r],a=Object.keys(t)[0];return{name:a,txHash:n.transaction_hash,params:t[a],blockNumber:n.block_number,blockHash:n.block_hash,data:n.data,keys:n.keys}})}toFilter(e,t){let r=[];return r.push(e.map(e=>{let t=e.split(":"),r=t[t.length-1];return(0,i.toHex)(a.hash.starknetKeccak(r))})),null!=t&&t.forEach(e=>r.push(null==e?[]:[e])),r}async getContractBlockEvents(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:r,a=await super.getBlockEvents(this.contract.contract.address,this.toFilter(e,t),r,n);return this.toStarknetAbiEvents(a)}async findInContractEvents(e,t,r,n){return this.findInEvents(this.contract.contract.address,this.toFilter(e,t),async e=>{for(let t of this.toStarknetAbiEvents(e)){let e=await r(t);if(null!=e)return e}},n)}async findInContractEventsForward(e,t,r,n){return this.findInEventsForward(this.contract.contract.address,this.toFilter(e,t),async e=>{for(let t of this.toStarknetAbiEvents(e)){let e=await r(t);if(null!=e)return e}},n)}constructor(e,t,r){super(e),this.contract=t,this.abi=r}}r.StarknetContractEvents=o},338777,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetContractBase=void 0;let n=e.r(288128),a=e.r(996655);r.StarknetContractBase=class{constructor(e,t,r){this.Chain=e,this.contract=new n.Contract(r,t,e.provider).typedv2(r),this.Events=new a.StarknetContractEvents(e,this,r)}}},663312,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BtcRelayAbi=void 0,r.BtcRelayAbi=[{type:"impl",name:"BtcRelayImpl",interface_name:"btc_relay::IBtcRelay"},{type:"struct",name:"btc_relay::structs::blockheader::BlockHeader",members:[{name:"reversed_version",type:"core::integer::u32"},{name:"previous_blockhash",type:"[core::integer::u32; 8]"},{name:"merkle_root",type:"[core::integer::u32; 8]"},{name:"reversed_timestamp",type:"core::integer::u32"},{name:"nbits",type:"core::integer::u32"},{name:"nonce",type:"core::integer::u32"}]},{type:"struct",name:"core::array::Span::<btc_relay::structs::blockheader::BlockHeader>",members:[{name:"snapshot",type:"@core::array::Array::<btc_relay::structs::blockheader::BlockHeader>"}]},{type:"struct",name:"core::integer::u256",members:[{name:"low",type:"core::integer::u128"},{name:"high",type:"core::integer::u128"}]},{type:"struct",name:"btc_relay::structs::stored_blockheader::StoredBlockHeader",members:[{name:"blockheader",type:"btc_relay::structs::blockheader::BlockHeader"},{name:"block_hash",type:"[core::integer::u32; 8]"},{name:"chain_work",type:"core::integer::u256"},{name:"block_height",type:"core::integer::u32"},{name:"last_diff_adjustment",type:"core::integer::u32"},{name:"prev_block_timestamps",type:"[core::integer::u32; 10]"}]},{type:"interface",name:"btc_relay::IBtcRelay",items:[{type:"function",name:"submit_main_blockheaders",inputs:[{name:"block_headers",type:"core::array::Span::<btc_relay::structs::blockheader::BlockHeader>"},{name:"stored_header",type:"btc_relay::structs::stored_blockheader::StoredBlockHeader"}],outputs:[],state_mutability:"external"},{type:"function",name:"submit_short_fork_blockheaders",inputs:[{name:"block_headers",type:"core::array::Span::<btc_relay::structs::blockheader::BlockHeader>"},{name:"stored_header",type:"btc_relay::structs::stored_blockheader::StoredBlockHeader"}],outputs:[],state_mutability:"external"},{type:"function",name:"submit_fork_blockheaders",inputs:[{name:"fork_id",type:"core::felt252"},{name:"block_headers",type:"core::array::Span::<btc_relay::structs::blockheader::BlockHeader>"},{name:"stored_header",type:"btc_relay::structs::stored_blockheader::StoredBlockHeader"}],outputs:[],state_mutability:"external"}]},{type:"impl",name:"BtcRelayReadOnlyImpl",interface_name:"btc_relay::IBtcRelayReadOnly"},{type:"interface",name:"btc_relay::IBtcRelayReadOnly",items:[{type:"function",name:"get_chainwork",inputs:[],outputs:[{type:"core::integer::u256"}],state_mutability:"view"},{type:"function",name:"get_blockheight",inputs:[],outputs:[{type:"core::integer::u32"}],state_mutability:"view"},{type:"function",name:"verify_blockheader",inputs:[{name:"stored_header",type:"btc_relay::structs::stored_blockheader::StoredBlockHeader"}],outputs:[{type:"core::integer::u32"}],state_mutability:"view"},{type:"function",name:"get_commit_hash",inputs:[{name:"height",type:"core::integer::u32"}],outputs:[{type:"core::felt252"}],state_mutability:"view"},{type:"function",name:"get_tip_commit_hash",inputs:[],outputs:[{type:"core::felt252"}],state_mutability:"view"}]},{type:"constructor",name:"constructor",inputs:[{name:"stored_header",type:"btc_relay::structs::stored_blockheader::StoredBlockHeader"}]},{type:"event",name:"btc_relay::events::StoreHeader",kind:"struct",members:[{name:"commit_hash",type:"core::felt252",kind:"key"},{name:"block_hash_poseidon",type:"core::felt252",kind:"key"},{name:"header",type:"btc_relay::structs::stored_blockheader::StoredBlockHeader",kind:"data"}]},{type:"event",name:"btc_relay::events::StoreForkHeader",kind:"struct",members:[{name:"commit_hash",type:"core::felt252",kind:"key"},{name:"block_hash_poseidon",type:"core::felt252",kind:"key"},{name:"fork_id",type:"core::felt252",kind:"key"},{name:"header",type:"btc_relay::structs::stored_blockheader::StoredBlockHeader",kind:"data"}]},{type:"event",name:"btc_relay::events::ChainReorg",kind:"struct",members:[{name:"fork_submitter",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"fork_id",type:"core::felt252",kind:"key"},{name:"tip_block_hash_poseidon",type:"core::felt252",kind:"key"},{name:"tip_commit_hash",type:"core::felt252",kind:"key"},{name:"start_height",type:"core::felt252",kind:"data"}]},{type:"event",name:"btc_relay::BtcRelay::Event",kind:"enum",variants:[{name:"StoreHeader",type:"btc_relay::events::StoreHeader",kind:"nested"},{name:"StoreForkHeader",type:"btc_relay::events::StoreForkHeader",kind:"nested"},{name:"ChainReorg",type:"btc_relay::events::ChainReorg",kind:"nested"}]}]},853796,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetBtcRelay=void 0;let n=e.r(843943),a=e.r(958415),i=e.r(991989),o=e.r(441484),s=e.r(338777),c=e.r(228033),l=e.r(663312),u=e.r(288128),d=e.r(880747),h=e.r(604616);function f(e){return new a.StarknetBtcHeader({reversed_version:(0,o.u32ReverseEndianness)(e.getVersion()),previous_blockhash:(0,o.bufferToU32Array)(n.Buffer.from(e.getPrevBlockhash(),"hex").reverse()),merkle_root:(0,o.bufferToU32Array)(n.Buffer.from(e.getMerkleRoot(),"hex").reverse()),reversed_timestamp:(0,o.u32ReverseEndianness)(e.getTimestamp()),nbits:(0,o.u32ReverseEndianness)(e.getNbits()),nonce:(0,o.u32ReverseEndianness)(e.getNonce()),hash:n.Buffer.from(e.getHash(),"hex").reverse()})}let p={l1DataGas:600,l2Gas:24e6,l1Gas:0},g={l1DataGas:1e3,l2Gas:4e7,l1Gas:0},m={[i.BitcoinNetwork.TESTNET4]:"0x0099b63f39f0cabb767361de3d8d3e97212351a51540e2687c2571f4da490dbe",[i.BitcoinNetwork.TESTNET]:"0x068601c79da2231d21e015ccfd59c243861156fa523a12c9f987ec28eb8dbc8c",[i.BitcoinNetwork.MAINNET]:"0x057b14a4231b82f1e525ff35a722d893ca3dd2bde0baa6cee97937c5be861dbc"};function y(e,t,r){return r.push((0,o.toHex)(e.length)),e.forEach(e=>{r.push(...e.serialize())}),r.push(...t.serialize()),r}let b=(0,o.getLogger)("StarknetBtcRelay: ");class w extends s.StarknetContractBase{SaveMainHeaders(e,t,r){return new h.StarknetAction(e,this.Chain,{contractAddress:this.contract.address,entrypoint:"submit_main_blockheaders",calldata:y(t,r,[])},(0,d.starknetGasMul)(p,t.length))}SaveShortForkHeaders(e,t,r){return new h.StarknetAction(e,this.Chain,{contractAddress:this.contract.address,entrypoint:"submit_short_fork_blockheaders",calldata:y(t,r,[])},(0,d.starknetGasMul)(p,t.length))}SaveLongForkHeaders(e,t,r,n){let a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:100;return new h.StarknetAction(e,this.Chain,{contractAddress:this.contract.address,entrypoint:"submit_fork_blockheaders",calldata:y(r,n,[(0,o.toHex)(t)])},(0,d.starknetGasAdd)((0,d.starknetGasMul)(p,r.length),(0,d.starknetGasMul)(g,a)))}computeCommitedHeaders(e,t){let r=[e];for(let e of t)r.push(r[r.length-1].computeNext(e));return r}async _saveHeaders(e,t,r,n,a,o){let s,c=t.map(f);switch(a){case -1:s=this.SaveShortForkHeaders(e,c,r);break;case 0:s=this.SaveMainHeaders(e,c,r);break;default:s=this.SaveLongForkHeaders(e,a,c,r)}let l=await s.tx(o),u=this.computeCommitedHeaders(r,c),d=u[u.length-1];return 0!==a&&i.StatePredictorUtils.gtBuffer(d.getBlockHash(),n)&&(a=0),{forkId:a,lastStoredHeader:d,tx:l,computedCommitedHeaders:u}}getBlock(e,t){let r=[null==e?null:(0,o.toHex)(e)];if(null!=t){let e=u.hash.computePoseidonHashOnElements((0,o.bufferToU32Array)(n.Buffer.from([...t]).reverse()));r.push(e)}return this.Events.findInContractEvents(["btc_relay::events::StoreHeader","btc_relay::events::StoreForkHeader"],r,e=>Promise.resolve([c.StarknetBtcStoredHeader.fromSerializedFeltArray(e.data),BigInt(e.params.commit_hash)]))}async getBlockHeight(){return Number(await this.contract.get_blockheight())}async getTipData(){let e=await this.contract.get_tip_commit_hash();if(null==e||BigInt(e)===BigInt(0))return null;let t=await this.getBlock(e);if(null==t)return null;let[r]=t;return{blockheight:r.getBlockheight(),commitHash:(0,o.bigNumberishToBuffer)(e,32).toString("hex"),blockhash:r.getBlockHash().toString("hex"),chainWork:r.getChainWork()}}async retrieveLogAndBlockheight(e,t){let r=await this.getBlockHeight();if(null!=t&&r<t)return null;let a=await this.getBlock(null,n.Buffer.from(e.blockhash,"hex"));if(null==a)return null;let[i,s]=a;return BigInt(await this.contract.get_commit_hash(i.block_height))!==BigInt(s)?null:(b.debug("retrieveLogAndBlockheight(): block found, commit hash: "+(0,o.toHex)(s)+" blockhash: "+e.blockhash+" current btc relay height: "+r),{header:i,height:r})}async retrieveLogByCommitHash(e,t){let r=await this.getBlock(e,n.Buffer.from(t.blockhash,"hex"));if(null==r)return null;let[a,i]=r;return BigInt(await this.contract.get_commit_hash(a.block_height))!==BigInt(i)?null:(b.debug("retrieveLogByCommitHash(): block found, commit hash: "+e+" blockhash: "+t.blockhash+" height: "+a.block_height),a)}async retrieveLatestKnownBlockLog(){let e=await this.Events.findInContractEvents(["btc_relay::events::StoreHeader","btc_relay::events::StoreForkHeader"],null,async e=>{let t=c.StarknetBtcStoredHeader.fromSerializedFeltArray(e.data),r=t.getBlockHash().toString("hex"),n=e.params.commit_hash,[a,i]=await Promise.all([this.bitcoinRpc.isInMainChain(r).catch(()=>!1),this.contract.get_commit_hash(t.block_height)]);return a&&BigInt(n)===BigInt(i)?{resultStoredHeader:t,resultBitcoinHeader:await this.bitcoinRpc.getBlockHeader(r),commitHash:n}:null});return null!=e&&b.debug("retrieveLatestKnownBlockLog(): block found, commit hash: "+(0,o.toHex)(e.commitHash)+" blockhash: "+e.resultBitcoinHeader.getHash()+" height: "+e.resultStoredHeader.getBlockheight()),e}saveMainHeaders(e,t,r,n){return b.debug("saveMainHeaders(): submitting main blockheaders, count: "+t.length),this._saveHeaders(e,t,r,null,0,n)}async saveNewForkHeaders(e,t,r,n,a){let i=Math.floor(0xffffffffffff*Math.random());return b.debug("saveNewForkHeaders(): submitting new fork & blockheaders, count: "+t.length+" forkId: 0x"+i.toString(16)),await this._saveHeaders(e,t,r,n,i,a)}saveForkHeaders(e,t,r,n,a,i){return b.debug("saveForkHeaders(): submitting blockheaders to existing fork, count: "+t.length+" forkId: 0x"+n.toString(16)),this._saveHeaders(e,t,r,a,n,i)}saveShortForkHeaders(e,t,r,n,a){return b.debug("saveShortForkHeaders(): submitting short fork blockheaders, count: "+t.length),this._saveHeaders(e,t,r,n,-1,a)}async estimateSynchronizeFee(e,t){let r=e-(await this.getTipData()).blockheight;if(r<=0)return 0n;let n=BigInt(r)*await this.getFeePerBlock(t);return b.debug("estimateSynchronizeFee(): required blockheight: "+e+" blockheight delta: "+r+" fee: "+n.toString(10)),n}async getFeePerBlock(e){return null!=e||(e=await this.Chain.Fees.getFeeRate()),d.StarknetFees.getGasFee(p,e)}getMainFeeRate(e){return this.Chain.Fees.getFeeRate()}getForkFeeRate(e,t){return this.Chain.Fees.getFeeRate()}saveInitialHeader(e,t,r,n,a){throw Error("Not supported, starknet contract is initialized with constructor!")}static async getCommitedHeadersAndSynchronize(e,t,r,n,a,i){let s=[],c={};for(let e of r){let r=e.blockheight+e.requiredConfirmations-1,n=await (0,o.tryWithRetries)(()=>t.retrieveLogAndBlockheight({blockhash:e.blockhash},r));null!=n?c[n.header.getBlockHash().toString("hex")]=n.header:s.push(e)}if(0===s.length)return c;if(null==a)return null;let l=await a.syncToLatestTxs(e.toString(),i);for(let e in b.debug("getCommitedHeaderAndSynchronize(): BTC Relay not synchronized to required blockheight, synchronizing ourselves in "+l.txs.length+" txs"),b.debug("getCommitedHeaderAndSynchronize(): BTC Relay computed header map: ",l.computedHeaderMap),n.push(...l.txs),l.computedHeaderMap){let t=l.computedHeaderMap[e];c[t.getBlockHash().toString("hex")]=t}for(let e of s)if(null==c[e.blockhash])return null;return c}constructor(e,t,r,n=m[r]){super(e,n,l.BtcRelayAbi),this.maxHeadersPerTx=100,this.maxForkHeadersPerTx=100,this.maxShortForkHeadersPerTx=100,this.bitcoinRpc=t}}r.StarknetBtcRelay=w},847748,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EscrowManagerAbi=void 0,r.EscrowManagerAbi=[{type:"impl",name:"EscrowManagerImpl",interface_name:"escrow_manager::IEscrowManager"},{type:"struct",name:"core::integer::u256",members:[{name:"low",type:"core::integer::u128"},{name:"high",type:"core::integer::u128"}]},{type:"struct",name:"escrow_manager::structs::escrow::EscrowExecution",members:[{name:"hash",type:"core::felt252"},{name:"expiry",type:"core::integer::u64"},{name:"fee",type:"core::integer::u256"}]},{type:"enum",name:"core::option::Option::<escrow_manager::structs::escrow::EscrowExecution>",variants:[{name:"Some",type:"escrow_manager::structs::escrow::EscrowExecution"},{name:"None",type:"()"}]},{type:"struct",name:"escrow_manager::structs::escrow::EscrowData",members:[{name:"offerer",type:"core::starknet::contract_address::ContractAddress"},{name:"claimer",type:"core::starknet::contract_address::ContractAddress"},{name:"token",type:"core::starknet::contract_address::ContractAddress"},{name:"refund_handler",type:"core::starknet::contract_address::ContractAddress"},{name:"claim_handler",type:"core::starknet::contract_address::ContractAddress"},{name:"flags",type:"core::integer::u128"},{name:"claim_data",type:"core::felt252"},{name:"refund_data",type:"core::felt252"},{name:"amount",type:"core::integer::u256"},{name:"fee_token",type:"core::starknet::contract_address::ContractAddress"},{name:"security_deposit",type:"core::integer::u256"},{name:"claimer_bounty",type:"core::integer::u256"},{name:"success_action",type:"core::option::Option::<escrow_manager::structs::escrow::EscrowExecution>"}]},{type:"struct",name:"core::array::Span::<core::felt252>",members:[{name:"snapshot",type:"@core::array::Array::<core::felt252>"}]},{type:"interface",name:"escrow_manager::IEscrowManager",items:[{type:"function",name:"initialize",inputs:[{name:"escrow",type:"escrow_manager::structs::escrow::EscrowData"},{name:"signature",type:"core::array::Array::<core::felt252>"},{name:"timeout",type:"core::integer::u64"},{name:"extra_data",type:"core::array::Span::<core::felt252>"}],outputs:[],state_mutability:"external"},{type:"function",name:"claim",inputs:[{name:"escrow",type:"escrow_manager::structs::escrow::EscrowData"},{name:"witness",type:"core::array::Array::<core::felt252>"}],outputs:[],state_mutability:"external"},{type:"function",name:"refund",inputs:[{name:"escrow",type:"escrow_manager::structs::escrow::EscrowData"},{name:"witness",type:"core::array::Array::<core::felt252>"}],outputs:[],state_mutability:"external"},{type:"function",name:"cooperative_refund",inputs:[{name:"escrow",type:"escrow_manager::structs::escrow::EscrowData"},{name:"signature",type:"core::array::Array::<core::felt252>"},{name:"timeout",type:"core::integer::u64"}],outputs:[],state_mutability:"external"}]},{type:"impl",name:"LPVaultImpl",interface_name:"escrow_manager::components::lp_vault::ILPVault"},{type:"struct",name:"core::array::Span::<(core::starknet::contract_address::ContractAddress, core::starknet::contract_address::ContractAddress)>",members:[{name:"snapshot",type:"@core::array::Array::<(core::starknet::contract_address::ContractAddress, core::starknet::contract_address::ContractAddress)>"}]},{type:"interface",name:"escrow_manager::components::lp_vault::ILPVault",items:[{type:"function",name:"deposit",inputs:[{name:"token",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u256"}],outputs:[],state_mutability:"external"},{type:"function",name:"withdraw",inputs:[{name:"token",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u256"},{name:"destination",type:"core::starknet::contract_address::ContractAddress"}],outputs:[],state_mutability:"external"},{type:"function",name:"get_balance",inputs:[{name:"data",type:"core::array::Span::<(core::starknet::contract_address::ContractAddress, core::starknet::contract_address::ContractAddress)>"}],outputs:[{type:"core::array::Array::<core::integer::u256>"}],state_mutability:"view"}]},{type:"impl",name:"ReputationTrackerImpl",interface_name:"escrow_manager::components::reputation::IReputationTracker"},{type:"struct",name:"core::array::Span::<(core::starknet::contract_address::ContractAddress, core::starknet::contract_address::ContractAddress, core::starknet::contract_address::ContractAddress)>",members:[{name:"snapshot",type:"@core::array::Array::<(core::starknet::contract_address::ContractAddress, core::starknet::contract_address::ContractAddress, core::starknet::contract_address::ContractAddress)>"}]},{type:"struct",name:"escrow_manager::state::reputation::Reputation",members:[{name:"amount",type:"core::integer::u256"},{name:"count",type:"core::integer::u128"}]},{type:"interface",name:"escrow_manager::components::reputation::IReputationTracker",items:[{type:"function",name:"get_reputation",inputs:[{name:"data",type:"core::array::Span::<(core::starknet::contract_address::ContractAddress, core::starknet::contract_address::ContractAddress, core::starknet::contract_address::ContractAddress)>"}],outputs:[{type:"core::array::Array::<[escrow_manager::state::reputation::Reputation; 3]>"}],state_mutability:"view"}]},{type:"impl",name:"EscrowStorageImpl",interface_name:"escrow_manager::components::escrow_storage::IEscrowStorage"},{type:"struct",name:"escrow_manager::state::escrow::EscrowState",members:[{name:"init_blockheight",type:"core::integer::u64"},{name:"finish_blockheight",type:"core::integer::u64"},{name:"state",type:"core::integer::u8"}]},{type:"struct",name:"core::array::Span::<escrow_manager::state::escrow::EscrowState>",members:[{name:"snapshot",type:"@core::array::Array::<escrow_manager::state::escrow::EscrowState>"}]},{type:"interface",name:"escrow_manager::components::escrow_storage::IEscrowStorage",items:[{type:"function",name:"get_state",inputs:[{name:"escrow",type:"escrow_manager::structs::escrow::EscrowData"}],outputs:[{type:"escrow_manager::state::escrow::EscrowState"}],state_mutability:"view"},{type:"function",name:"get_hash_state",inputs:[{name:"escrow_hash",type:"core::felt252"}],outputs:[{type:"escrow_manager::state::escrow::EscrowState"}],state_mutability:"view"},{type:"function",name:"get_hash_state_multiple",inputs:[{name:"escrow_hashes",type:"core::array::Span::<core::felt252>"}],outputs:[{type:"core::array::Span::<escrow_manager::state::escrow::EscrowState>"}],state_mutability:"view"}]},{type:"event",name:"escrow_manager::components::lp_vault::lp_vault::Event",kind:"enum",variants:[]},{type:"event",name:"escrow_manager::components::reputation::reputation::Event",kind:"enum",variants:[]},{type:"event",name:"escrow_manager::components::escrow_storage::escrow_storage::Event",kind:"enum",variants:[]},{type:"event",name:"escrow_manager::events::Initialize",kind:"struct",members:[{name:"offerer",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"claimer",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"claim_data",type:"core::felt252",kind:"key"},{name:"escrow_hash",type:"core::felt252",kind:"key"},{name:"claim_handler",type:"core::starknet::contract_address::ContractAddress",kind:"data"},{name:"refund_handler",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"escrow_manager::events::Claim",kind:"struct",members:[{name:"offerer",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"claimer",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"claim_data",type:"core::felt252",kind:"key"},{name:"escrow_hash",type:"core::felt252",kind:"key"},{name:"witness_result",type:"core::array::Span::<core::felt252>",kind:"data"},{name:"claim_handler",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"escrow_manager::events::Refund",kind:"struct",members:[{name:"offerer",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"claimer",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"claim_data",type:"core::felt252",kind:"key"},{name:"escrow_hash",type:"core::felt252",kind:"key"},{name:"witness_result",type:"core::array::Span::<core::felt252>",kind:"data"},{name:"refund_handler",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"escrow_manager::EscrowManager::Event",kind:"enum",variants:[{name:"LPVaultEvent",type:"escrow_manager::components::lp_vault::lp_vault::Event",kind:"nested"},{name:"ReputationTrackerEvent",type:"escrow_manager::components::reputation::reputation::Event",kind:"nested"},{name:"EscrowStorageEvent",type:"escrow_manager::components::escrow_storage::escrow_storage::Event",kind:"nested"},{name:"Initialize",type:"escrow_manager::events::Initialize",kind:"nested"},{name:"Claim",type:"escrow_manager::events::Claim",kind:"nested"},{name:"Refund",type:"escrow_manager::events::Refund",kind:"nested"}]}]},122052,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetContractModule=void 0;let n=e.r(978288);class a extends n.StarknetModule{constructor(e,t){super(e),this.contract=t}}r.StarknetContractModule=a},300019,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetSwapModule=void 0;let n=e.r(122052);class a extends n.StarknetContractModule{constructor(e,t){super(e,t),this.swapContract=t.contract}}r.StarknetSwapModule=a},166269,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetLpVault=void 0;let n=e.r(441484),a=e.r(300019),i=e.r(604616),o=e.r(288128);class s extends a.StarknetSwapModule{Withdraw(e,t,r){return new i.StarknetAction(e,this.root,this.swapContract.populateTransaction.withdraw(t,o.cairo.uint256(r),e),s.GasCosts.WITHDRAW)}Deposit(e,t,r){return new i.StarknetAction(e,this.root,this.swapContract.populateTransaction.deposit(t,o.cairo.uint256(r)),s.GasCosts.WITHDRAW)}async getIntermediaryData(e,t){let[r,n]=await Promise.all([this.getIntermediaryBalance(e,t),this.getIntermediaryReputation(e,t)]);return{balance:r,reputation:n}}async getIntermediaryReputation(e,t){let r=Object.keys(this.contract.claimHandlersByAddress).map(r=>o.cairo.tuple(e,t,r)),a=await this.provider.callContract(this.swapContract.populateTransaction.get_reputation(r));if(Number((0,n.toBigInt)(a.shift()))!==r.length)throw Error("getIntermediaryReputation(): Invalid response length");let i={};return Object.keys(this.contract.claimHandlersByAddress).forEach(e=>{i[this.contract.claimHandlersByAddress[e].getType()]={successVolume:(0,n.toBigInt)({low:a.shift(),high:a.shift()}),successCount:(0,n.toBigInt)(a.shift()),coopCloseVolume:(0,n.toBigInt)({low:a.shift(),high:a.shift()}),coopCloseCount:(0,n.toBigInt)(a.shift()),failVolume:(0,n.toBigInt)({low:a.shift(),high:a.shift()}),failCount:(0,n.toBigInt)(a.shift())}}),i}async getIntermediaryBalance(e,t){let r=(0,n.toBigInt)((await this.swapContract.get_balance([o.cairo.tuple(e,t)]))[0]);return this.logger.debug("getIntermediaryBalance(): token LP balance fetched, token: "+t.toString()+" address: "+e+" amount: "+(null==r?"null":r.toString())),r}async txsWithdraw(e,t,r,n){let a=await this.Withdraw(e,t,r);return null!=n||(n=await this.root.Fees.getFeeRate()),this.logger.debug("txsWithdraw(): withdraw TX created, token: "+t.toString()+" amount: "+r.toString(10)),[await a.tx(n)]}async txsDeposit(e,t,r,n){let a=await this.root.Tokens.Approve(e,this.swapContract.address,t,r);return a.add(this.Deposit(e,t,r)),null!=n||(n=await this.root.Fees.getFeeRate()),this.logger.debug("txsDeposit(): deposit TX created, token: "+t.toString()+" amount: "+r.toString(10)),[await a.tx(n)]}}r.StarknetLpVault=s,s.GasCosts={WITHDRAW:{l1DataGas:500,l2Gas:32e5,l1Gas:0},DEPOSIT:{l1:500,l2Gas:4e6,l1Gas:0}}},177650,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetSwapInit=void 0;let n=e.r(991989),a=e.r(441484),i=e.r(843943),o=e.r(604616),s=e.r(300019),c=e.r(288128),l=e.r(880747),u=[{name:"Swap hash",type:"felt"},{name:"Offerer",type:"ContractAddress"},{name:"Claimer",type:"ContractAddress"},{name:"Token amount",type:"TokenAmount"},{name:"Pay in",type:"bool"},{name:"Pay out",type:"bool"},{name:"Tracking reputation",type:"bool"},{name:"Claim handler",type:"ContractAddress"},{name:"Claim data",type:"felt"},{name:"Refund handler",type:"ContractAddress"},{name:"Refund data",type:"felt"},{name:"Security deposit",type:"TokenAmount"},{name:"Claimer bounty",type:"TokenAmount"},{name:"Claim action hash",type:"felt"},{name:"Deadline",type:"timestamp"}];class d extends s.StarknetSwapModule{Init(e,t,r){return new o.StarknetAction(e.payIn?e.offerer:e.claimer,this.root,this.swapContract.populateTransaction.initialize(e.toEscrowStruct(),r,t,null==e.extraData||""===e.extraData?[]:(0,a.bufferToBytes31Span)(i.Buffer.from(e.extraData,"hex")).map(a.toHex)),e.payIn?d.GasCosts.INIT_PAY_IN:d.GasCosts.INIT)}getAuthPrefix(e){return e.isPayIn()?"claim_initialize":"initialize"}async preFetchForInitSignatureVerification(){return{pendingBlockTime:await this.root.Blocks.getBlockTime("pending")}}async signSwapInitialization(e,t,r){let n=Math.floor(Date.now()/1e3)+r,i=await this.root.Signatures.signTypedMessage(e,u,"Initialize",{"Swap hash":"0x"+t.getEscrowHash(),Offerer:t.offerer,Claimer:t.claimer,"Token amount":{token_address:t.token,amount:c.cairo.uint256(t.amount)},"Pay in":t.isPayIn(),"Pay out":t.isPayOut(),"Tracking reputation":t.reputation,"Refund handler":t.refundHandler,"Claim handler":t.claimHandler,"Claim data":"0x"+t.getClaimHash(),"Refund data":t.refundData.startsWith("0x")?t.refundData:"0x"+t.refundData,"Security deposit":{token_address:t.feeToken,amount:c.cairo.uint256(t.securityDeposit)},"Claimer bounty":{token_address:t.feeToken,amount:c.cairo.uint256(t.claimerBounty)},"Claim action hash":0n,Deadline:(0,a.toHex)(n)});return{prefix:this.getAuthPrefix(t),timeout:n.toString(10),signature:i}}async isSignatureValid(e,t,r,i,o,s){if(!t.isOfferer(e)&&!t.isClaimer(e))throw new n.SignatureVerificationError("TX sender not offerer nor claimer");let l=t.isOfferer(e)?t.claimer:t.offerer;if(!t.isPayIn()&&await this.contract.isExpired(e.toString(),t))throw new n.SignatureVerificationError("Swap will expire too soon!");if(i!==this.getAuthPrefix(t))throw new n.SignatureVerificationError("Invalid prefix");let d=BigInt(Math.floor(Date.now()/1e3)),h=BigInt(r);if(h-d<BigInt(this.contract.authGracePeriod)||await this.isSignatureExpired(r,s))throw new n.SignatureVerificationError("Authorization expired!");if(!await this.root.Signatures.isValidSignature(o,l,u,"Initialize",{"Swap hash":"0x"+t.getEscrowHash(),Offerer:t.offerer,Claimer:t.claimer,"Token amount":{token_address:t.token,amount:c.cairo.uint256(t.amount)},"Pay in":t.isPayIn(),"Pay out":t.isPayOut(),"Tracking reputation":t.reputation,"Refund handler":t.refundHandler,"Claim handler":t.claimHandler,"Claim data":"0x"+t.getClaimHash(),"Refund data":t.refundData.startsWith("0x")?t.refundData:"0x"+t.refundData,"Security deposit":{token_address:t.feeToken,amount:c.cairo.uint256(t.securityDeposit)},"Claimer bounty":{token_address:t.feeToken,amount:c.cairo.uint256(t.claimerBounty)},"Claim action hash":0n,Deadline:(0,a.toHex)(h)}))throw new n.SignatureVerificationError("Invalid signature!");return null}async getSignatureExpiry(e){let t=Date.now(),r=(parseInt(e)-this.contract.authGracePeriod)*1e3;return r<t?0:r}async isSignatureExpired(e,t){return(null==t||null==t.pendingBlockTime)&&(t=await this.preFetchForInitSignatureVerification()),t.pendingBlockTime>parseInt(e)}async txsInit(e,t,r,i,o,s,c){if(!s){let[s,c]=await Promise.all([(0,a.tryWithRetries)(()=>this.isSignatureValid(e,t,r,i,o),this.retryPolicy,e=>e instanceof n.SignatureVerificationError),(0,a.tryWithRetries)(()=>this.contract.getCommitStatus(e,t),this.retryPolicy)]);if(c.type!==n.SwapCommitStateType.NOT_COMMITED)throw new n.SwapDataVerificationError("Invoice already being paid for or paid")}null!=c||(c=await this.root.Fees.getFeeRate());let l=this.Init(t,BigInt(r),JSON.parse(o));return t.payIn&&t.isOfferer(e)&&l.addAction(this.root.Tokens.Approve(e,this.swapContract.address,t.token,t.amount),0),0n!==t.getTotalDeposit()&&l.addAction(this.root.Tokens.Approve(e,this.swapContract.address,t.feeToken,t.getTotalDeposit()),0),this.logger.debug("txsInitPayIn(): create swap init TX, swap: "+t.getClaimHash()+" feerate: "+c),[await l.tx(c)]}async getInitFee(e,t){return null!=t||(t=await this.root.Fees.getFeeRate()),l.StarknetFees.getGasFee(e.payIn?d.GasCosts.INIT_PAY_IN:d.GasCosts.INIT,t)}}r.StarknetSwapInit=d,d.GasCosts={INIT:{l1DataGas:750,l2Gas:8e6,l1Gas:0},INIT_PAY_IN:{l1DataGas:500,l2Gas:48e5,l1Gas:0}}},557011,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetSwapRefund=void 0;let n=e.r(991989),a=e.r(441484),i=e.r(300019),o=e.r(604616),s=e.r(880747),c=[{name:"Swap hash",type:"felt"},{name:"Timeout",type:"timestamp"}];class l extends i.StarknetSwapModule{Refund(e,t,r,n){return new o.StarknetAction(e,this.root,this.swapContract.populateTransaction.refund(t.toEscrowStruct(),r),(0,s.starknetGasAdd)(t.payIn?l.GasCosts.REFUND_PAY_OUT:l.GasCosts.REFUND,n))}RefundWithSignature(e,t,r,n){return new o.StarknetAction(e,this.root,this.swapContract.populateTransaction.cooperative_refund(t.toEscrowStruct(),n,BigInt(r)),t.payIn?l.GasCosts.REFUND_PAY_OUT:l.GasCosts.REFUND)}async signSwapRefund(e,t,r){let n=Math.floor(Date.now()/1e3)+r,i=await this.root.Signatures.signTypedMessage(e,c,"Refund",{"Swap hash":"0x"+t.getEscrowHash(),Timeout:(0,a.toHex)(n)});return{prefix:"refund",timeout:n.toString(10),signature:i}}async isSignatureValid(e,t,r,i){if("refund"!==r)throw new n.SignatureVerificationError("Invalid prefix");let o=BigInt(t);if(o-BigInt(Math.floor(Date.now()/1e3))<BigInt(this.contract.authGracePeriod))throw new n.SignatureVerificationError("Authorization expired!");if(!await this.root.Signatures.isValidSignature(i,e.claimer,c,"Refund",{"Swap hash":"0x"+e.getEscrowHash(),Timeout:(0,a.toHex)(o)}))throw new n.SignatureVerificationError("Invalid signature!");return null}async txsRefund(e,t,r,i,o){let s=this.contract.refundHandlersByAddress[t.refundHandler.toLowerCase()];if(null==s)throw Error("Invalid refund handler");if(r&&!await (0,a.tryWithRetries)(()=>this.contract.isRequestRefundable(t.offerer.toString(),t),this.retryPolicy))throw new n.SwapDataVerificationError("Not refundable yet!");null!=i||(i=await this.root.Fees.getFeeRate());let{initialTxns:c,witness:l}=await s.getWitness(e,t,o,i),u=this.Refund(e,t,l,s.getGas(t));return await u.addToTxs(c,i),this.logger.debug("txsRefund(): creating refund transaction, swap: "+t.getClaimHash()),c}async txsRefundWithAuthorization(e,t,r,i,o,s,c){if(s&&!await (0,a.tryWithRetries)(()=>this.contract.isCommited(t),this.retryPolicy))throw new n.SwapDataVerificationError("Not correctly committed");await (0,a.tryWithRetries)(()=>this.isSignatureValid(t,r,i,o),this.retryPolicy,e=>e instanceof n.SignatureVerificationError);let l=this.RefundWithSignature(e,t,r,JSON.parse(o));return null!=c||(c=await this.root.Fees.getFeeRate()),this.logger.debug("txsRefundWithAuthorization(): creating refund transaction, swap: "+t.getClaimHash()+" auth expiry: "+r+" signature: "+o),[await l.tx(c)]}async getRefundFee(e,t){return null!=t||(t=await this.root.Fees.getFeeRate()),s.StarknetFees.getGasFee(e.payIn?l.GasCosts.REFUND_PAY_OUT:l.GasCosts.REFUND,t)}}r.StarknetSwapRefund=l,l.GasCosts={REFUND:{l1DataGas:750,l2Gas:4e6,l1Gas:0},REFUND_PAY_OUT:{l1DataGas:900,l2Gas:6e6,l1Gas:0}}},949330,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HashlockClaimHandler=void 0;let n=e.r(441484),a=e.r(288128),i=e.r(991989),o=e.r(843943),s=e.r(14582);class c{getCommitment(e){if(32!==e.length)throw Error("Invalid swap hash");return a.hash.computePoseidonHashOnElements((0,n.bufferToU32Array)(e))}getWitness(e,t,r){if(!t.isClaimHandler(this.address))throw Error("Invalid claim handler");if(64!==r.length)throw Error("Invalid hash secret: string length");let a=o.Buffer.from(r,"hex");if(32!==a.length)throw Error("Invalid hash secret: buff length");let i=o.Buffer.from((0,s.sha256)(a));if(!t.isClaimData((0,n.toHex)(this.getCommitment(i))))throw Error("Invalid hash secret: poseidon hash doesn't match");return Promise.resolve({initialTxns:[],witness:(0,n.bufferToU32Array)(a)})}getGas(){return c.gas}getType(){return c.type}parseWitnessResult(e){return(0,n.u32ArrayToBuffer)(e).toString("hex")}constructor(e){this.address=e}}r.HashlockClaimHandler=c,c.type=i.ChainSwapType.HTLC,c.gas={l1DataGas:0,l2Gas:16e6,l1Gas:0}},879509,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IBitcoinClaimHandler=void 0;let n=e.r(991989),a=e.r(288128),i=e.r(853796),o=e.r(441484),s=(0,o.getLogger)("IBitcoinClaimHandler: ");class c{serializeCommitment(e){return[e.confirmations,e.btcRelay.contract.address]}getCommitment(e){return a.hash.computePoseidonHashOnElements(this.serializeCommitment(e))}async _getWitness(e,t,r,n,c){let{tx:l,btcRelay:u,commitedHeader:d,synchronizer:h,requiredConfirmations:f}=r,p=this.serializeCommitment({...n,btcRelay:u,confirmations:f}),g=a.hash.computePoseidonHashOnElements(p);if(!t.isClaimData(g))throw Error("Invalid commit data");let m=await u.bitcoinRpc.getMerkleProof(l.txid,l.blockhash);s.debug("getWitness(): merkle proof computed: ",m);let y=[];if(null==d){let t=await i.StarknetBtcRelay.getCommitedHeadersAndSynchronize(e,u,[{blockheight:l.height,requiredConfirmations:f,blockhash:l.blockhash}],y,h,c);if(null==t)throw Error("Cannot fetch committed header!");d=t[l.blockhash]}return p.push(...d.serialize()),p.push(m.merkle.length,...m.merkle.map(o.bufferToU32Array).flat()),p.push(m.pos),{initialTxns:y,witness:p}}parseWitnessResult(e){return(0,o.u32ArrayToBuffer)(e).toString("hex")}constructor(e){this.address=e}}r.IBitcoinClaimHandler=c,c.address="",c.type=n.ChainSwapType.CHAIN_TXID,c.gas={l1DataGas:0,l2Gas:4e8,l1Gas:0}},770686,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BitcoinTxIdClaimHandler=void 0;let n=e.r(991989),a=e.r(441484),i=e.r(879509),o=e.r(843943);(0,a.getLogger)("BitcoinTxIdClaimHandler: ");class s extends i.IBitcoinClaimHandler{serializeCommitment(e){return[...(0,a.bufferToU32Array)(o.Buffer.from(e.txId,"hex").reverse()),...super.serializeCommitment(e)]}getWitness(e,t,r,n){if(!t.isClaimHandler(this.address))throw Error("Invalid claim handler");return this._getWitness(e,t,r,{txId:r.tx.txid})}getGas(e){return s.gas}getType(){return s.type}}r.BitcoinTxIdClaimHandler=s,s.type=n.ChainSwapType.CHAIN_TXID,s.gas={l1DataGas:0,l2Gas:4e8,l1Gas:0}},545562,(e,t,r)=>{"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function a(e){for(var t=arguments.length,r=Array(t>1?t-1:0),n=1;n<t;n++)r[n-1]=arguments[n];if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(r.length>0&&!r.includes(e.length))throw Error("Uint8Array expected of length "+r+", got length="+e.length)}Object.defineProperty(r,"__esModule",{value:!0}),r.anumber=n,r.abytes=a,r.ahash=function(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)},r.aexists=function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")},r.aoutput=function(e,t){a(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}},563299,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=void 0,r.crypto="object"==typeof globalThis&&"crypto"in globalThis?globalThis.crypto:void 0},759610,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Hash=r.nextTick=r.byteSwapIfBE=r.isLE=void 0,r.isBytes=function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name},r.u8=function(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},r.u32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))},r.createView=function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)},r.rotr=function(e,t){return e<<32-t|e>>>t},r.rotl=function(e,t){return e<<t|e>>>32-t>>>0},r.byteSwap=i,r.byteSwap32=function(e){for(let t=0;t<e.length;t++)e[t]=i(e[t])},r.bytesToHex=function(e){if((0,a.abytes)(e),o)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=s[e[r]];return t},r.hexToBytes=function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(o)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,a=0;t<r;t++,a+=2){let r=l(e.charCodeAt(a)),i=l(e.charCodeAt(a+1));if(void 0===r||void 0===i)throw Error('hex string expected, got non-hex character "'+(e[a]+e[a+1])+'" at index '+a);n[t]=16*r+i}return n},r.asyncLoop=u,r.utf8ToBytes=d,r.toBytes=h,r.concatBytes=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=0;for(let e=0;e<t.length;e++){let r=t[e];(0,a.abytes)(r),n+=r.length}let i=new Uint8Array(n);for(let e=0,r=0;e<t.length;e++){let n=t[e];i.set(n,r),r+=n.length}return i},r.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==({}).toString.call(t))throw Error("Options should be object or undefined");return Object.assign(e,t)},r.wrapConstructor=function(e){let t=t=>e().update(h(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},r.wrapConstructorWithOpts=function(e){let t=(t,r)=>e(r).update(h(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.wrapXOFConstructorWithOpts=function(e){let t=(t,r)=>e(r).update(h(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.randomBytes=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:32;if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(e));if(n.crypto&&"function"==typeof n.crypto.randomBytes)return Uint8Array.from(n.crypto.randomBytes(e));throw Error("crypto.getRandomValues must be defined")};let n=e.r(563299),a=e.r(545562);function i(e){return e<<24&0xff000000|e<<8&0xff0000|e>>>8&65280|e>>>24&255}r.isLE=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],r.byteSwapIfBE=r.isLE?e=>e:e=>i(e);let o="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,s=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),c={_0:48,_9:57,A:65,F:70,a:97,f:102};function l(e){return e>=c._0&&e<=c._9?e-c._0:e>=c.A&&e<=c.F?e-(c.A-10):e>=c.a&&e<=c.f?e-(c.a-10):void 0}async function u(e,t,n){let a=Date.now();for(let i=0;i<e;i++){n(i);let e=Date.now()-a;e>=0&&e<t||(await (0,r.nextTick)(),a+=e)}}function d(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function h(e){return"string"==typeof e&&(e=d(e)),(0,a.abytes)(e),e}r.nextTick=async()=>{},r.Hash=class{clone(){return this._cloneInto()}}},948559,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HashMD=void 0,r.setBigUint64=i,r.Chi=function(e,t,r){return e&t^~e&r},r.Maj=function(e,t,r){return e&t^e&r^t&r};let n=e.r(545562),a=e.r(759610);function i(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let a=BigInt(32),i=BigInt(0xffffffff),o=Number(r>>a&i),s=Number(r&i),c=4*!!n,l=4*!n;e.setUint32(t+c,o,n),e.setUint32(t+l,s,n)}class o extends a.Hash{update(e){(0,n.aexists)(this);let{view:t,buffer:r,blockLen:i}=this,o=(e=(0,a.toBytes)(e)).length;for(let n=0;n<o;){let s=Math.min(i-this.pos,o-n);if(s===i){let t=(0,a.createView)(e);for(;i<=o-n;n+=i)this.process(t,n);continue}r.set(e.subarray(n,n+s),this.pos),this.pos+=s,n+=s,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.aexists)(this),(0,n.aoutput)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:o,isLE:s}=this,{pos:c}=this;t[c++]=128,this.buffer.subarray(c).fill(0),this.padOffset>o-c&&(this.process(r,0),c=0);for(let e=c;e<o;e++)t[e]=0;i(r,o-8,BigInt(8*this.length),s),this.process(r,0);let l=(0,a.createView)(e),u=this.outputLen;if(u%4)throw Error("_sha2: outputLen should be aligned to 32bit");let d=u/4,h=this.get();if(d>h.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<d;e++)l.setUint32(4*e,h[e],s)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:a,destroyed:i,pos:o}=this;return e.length=n,e.pos=o,e.finished=a,e.destroyed=i,n%t&&e.buffer.set(r),e}constructor(e,t,r,n){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.buffer=new Uint8Array(e),this.view=(0,a.createView)(this.buffer)}}r.HashMD=o},703088,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sha224=r.sha256=r.SHA256=void 0;let n=e.r(948559),a=e.r(759610),i=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),o=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),s=new Uint32Array(64);class c extends n.HashMD{get(){let{A:e,B:t,C:r,D:n,E:a,F:i,G:o,H:s}=this;return[e,t,r,n,a,i,o,s]}set(e,t,r,n,a,i,o,s){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|a,this.F=0|i,this.G=0|o,this.H=0|s}process(e,t){for(let r=0;r<16;r++,t+=4)s[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=s[e-15],r=s[e-2],n=(0,a.rotr)(t,7)^(0,a.rotr)(t,18)^t>>>3,i=(0,a.rotr)(r,17)^(0,a.rotr)(r,19)^r>>>10;s[e]=i+s[e-7]+n+s[e-16]|0}let{A:r,B:o,C:c,D:l,E:u,F:d,G:h,H:f}=this;for(let e=0;e<64;e++){let t=f+((0,a.rotr)(u,6)^(0,a.rotr)(u,11)^(0,a.rotr)(u,25))+(0,n.Chi)(u,d,h)+i[e]+s[e]|0,p=((0,a.rotr)(r,2)^(0,a.rotr)(r,13)^(0,a.rotr)(r,22))+(0,n.Maj)(r,o,c)|0;f=h,h=d,d=u,u=l+t|0,l=c,c=o,o=r,r=t+p|0}r=r+this.A|0,o=o+this.B|0,c=c+this.C|0,l=l+this.D|0,u=u+this.E|0,d=d+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(r,o,c,l,u,d,h,f)}roundClean(){s.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}constructor(e=32){super(64,e,8,!1),this.A=0|o[0],this.B=0|o[1],this.C=0|o[2],this.D=0|o[3],this.E=0|o[4],this.F=0|o[5],this.G=0|o[6],this.H=0|o[7]}}r.SHA256=c;class l extends c{constructor(){super(28),this.A=-0x3efa6128,this.B=0x367cd507,this.C=0x3070dd17,this.D=-0x8f1a6c7,this.E=-4191439,this.F=0x68581511,this.G=0x64f98fa7,this.H=-0x4105b05c}}r.sha256=(0,a.wrapConstructor)(()=>new c),r.sha224=(0,a.wrapConstructor)(()=>new l)},635639,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.add5L=r.add5H=r.add4H=r.add4L=r.add3H=r.add3L=r.rotlBL=r.rotlBH=r.rotlSL=r.rotlSH=r.rotr32L=r.rotr32H=r.rotrBL=r.rotrBH=r.rotrSL=r.rotrSH=r.shrSL=r.shrSH=r.toBig=void 0,r.fromBig=i,r.split=o,r.add=_;let n=BigInt(0x100000000-1),a=BigInt(32);function i(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t?{h:Number(e&n),l:Number(e>>a&n)}:{h:0|Number(e>>a&n),l:0|Number(e&n)}}function o(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let a=0;a<e.length;a++){let{h:o,l:s}=i(e[a],t);[r[a],n[a]]=[o,s]}return[r,n]}let s=(e,t)=>BigInt(e>>>0)<<a|BigInt(t>>>0);r.toBig=s;let c=(e,t,r)=>e>>>r;r.shrSH=c;let l=(e,t,r)=>e<<32-r|t>>>r;r.shrSL=l;let u=(e,t,r)=>e>>>r|t<<32-r;r.rotrSH=u;let d=(e,t,r)=>e<<32-r|t>>>r;r.rotrSL=d;let h=(e,t,r)=>e<<64-r|t>>>r-32;r.rotrBH=h;let f=(e,t,r)=>e>>>r-32|t<<64-r;r.rotrBL=f;let p=(e,t)=>t;r.rotr32H=p;let g=(e,t)=>e;r.rotr32L=g;let m=(e,t,r)=>e<<r|t>>>32-r;r.rotlSH=m;let y=(e,t,r)=>t<<r|e>>>32-r;r.rotlSL=y;let b=(e,t,r)=>t<<r-32|e>>>64-r;r.rotlBH=b;let w=(e,t,r)=>e<<r-32|t>>>64-r;function _(e,t,r,n){let a=(t>>>0)+(n>>>0);return{h:e+r+(a/0x100000000|0)|0,l:0|a}}r.rotlBL=w;let v=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);r.add3L=v;let E=(e,t,r,n)=>t+r+n+(e/0x100000000|0)|0;r.add3H=E;let S=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);r.add4L=S;let x=(e,t,r,n,a)=>t+r+n+a+(e/0x100000000|0)|0;r.add4H=x;let k=(e,t,r,n,a)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(a>>>0);r.add5L=k;let T=(e,t,r,n,a,i)=>t+r+n+a+i+(e/0x100000000|0)|0;r.add5H=T,r.default={fromBig:i,split:o,toBig:s,shrSH:c,shrSL:l,rotrSH:u,rotrSL:d,rotrBH:h,rotrBL:f,rotr32H:p,rotr32L:g,rotlSH:m,rotlSL:y,rotlBH:b,rotlBL:w,add:_,add3L:v,add3H:E,add4L:S,add4H:x,add5H:T,add5L:k}},266454,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sha384=r.sha512_256=r.sha512_224=r.sha512=r.SHA384=r.SHA512_256=r.SHA512_224=r.SHA512=void 0;let n=e.r(948559),a=e.r(635639),i=e.r(759610),[o,s]=a.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),c=new Uint32Array(80),l=new Uint32Array(80);class u extends n.HashMD{get(){let{Ah:e,Al:t,Bh:r,Bl:n,Ch:a,Cl:i,Dh:o,Dl:s,Eh:c,El:l,Fh:u,Fl:d,Gh:h,Gl:f,Hh:p,Hl:g}=this;return[e,t,r,n,a,i,o,s,c,l,u,d,h,f,p,g]}set(e,t,r,n,a,i,o,s,c,l,u,d,h,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|a,this.Cl=0|i,this.Dh=0|o,this.Dl=0|s,this.Eh=0|c,this.El=0|l,this.Fh=0|u,this.Fl=0|d,this.Gh=0|h,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)c[r]=e.getUint32(t),l[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|c[e-15],r=0|l[e-15],n=a.default.rotrSH(t,r,1)^a.default.rotrSH(t,r,8)^a.default.shrSH(t,r,7),i=a.default.rotrSL(t,r,1)^a.default.rotrSL(t,r,8)^a.default.shrSL(t,r,7),o=0|c[e-2],s=0|l[e-2],u=a.default.rotrSH(o,s,19)^a.default.rotrBH(o,s,61)^a.default.shrSH(o,s,6),d=a.default.rotrSL(o,s,19)^a.default.rotrBL(o,s,61)^a.default.shrSL(o,s,6),h=a.default.add4L(i,d,l[e-7],l[e-16]),f=a.default.add4H(h,n,u,c[e-7],c[e-16]);c[e]=0|f,l[e]=0|h}let{Ah:r,Al:n,Bh:i,Bl:u,Ch:d,Cl:h,Dh:f,Dl:p,Eh:g,El:m,Fh:y,Fl:b,Gh:w,Gl:_,Hh:v,Hl:E}=this;for(let e=0;e<80;e++){let t=a.default.rotrSH(g,m,14)^a.default.rotrSH(g,m,18)^a.default.rotrBH(g,m,41),S=a.default.rotrSL(g,m,14)^a.default.rotrSL(g,m,18)^a.default.rotrBL(g,m,41),x=g&y^~g&w,k=m&b^~m&_,T=a.default.add5L(E,S,k,s[e],l[e]),A=a.default.add5H(T,v,t,x,o[e],c[e]),B=0|T,I=a.default.rotrSH(r,n,28)^a.default.rotrBH(r,n,34)^a.default.rotrBH(r,n,39),C=a.default.rotrSL(r,n,28)^a.default.rotrBL(r,n,34)^a.default.rotrBL(r,n,39),O=r&i^r&d^i&d,P=n&u^n&h^u&h;v=0|w,E=0|_,w=0|y,_=0|b,y=0|g,b=0|m,({h:g,l:m}=a.default.add(0|f,0|p,0|A,0|B)),f=0|d,p=0|h,d=0|i,h=0|u,i=0|r,u=0|n;let N=a.default.add3L(B,C,P);r=a.default.add3H(N,A,I,O),n=0|N}({h:r,l:n}=a.default.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:u}=a.default.add(0|this.Bh,0|this.Bl,0|i,0|u)),({h:d,l:h}=a.default.add(0|this.Ch,0|this.Cl,0|d,0|h)),({h:f,l:p}=a.default.add(0|this.Dh,0|this.Dl,0|f,0|p)),({h:g,l:m}=a.default.add(0|this.Eh,0|this.El,0|g,0|m)),({h:y,l:b}=a.default.add(0|this.Fh,0|this.Fl,0|y,0|b)),({h:w,l:_}=a.default.add(0|this.Gh,0|this.Gl,0|w,0|_)),({h:v,l:E}=a.default.add(0|this.Hh,0|this.Hl,0|v,0|E)),this.set(r,n,i,u,d,h,f,p,g,m,y,b,w,_,v,E)}roundClean(){c.fill(0),l.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}constructor(e=64){super(128,e,16,!1),this.Ah=0x6a09e667,this.Al=-0xc4336f8,this.Bh=-0x4498517b,this.Bl=-0x7b3558c5,this.Ch=0x3c6ef372,this.Cl=-0x16b07d5,this.Dh=-0x5ab00ac6,this.Dl=0x5f1d36f1,this.Eh=0x510e527f,this.El=-0x52197d2f,this.Fh=-0x64fa9774,this.Fl=0x2b3e6c1f,this.Gh=0x1f83d9ab,this.Gl=-0x4be4295,this.Hh=0x5be0cd19,this.Hl=0x137e2179}}r.SHA512=u;class d extends u{constructor(){super(28),this.Ah=-0x73c2c838,this.Al=0x19544da2,this.Bh=0x73e19966,this.Bl=-0x76232b2a,this.Ch=0x1dfab7ae,this.Cl=0x32ff9c82,this.Dh=0x679dd514,this.Dl=0x582f9fcf,this.Eh=0xf6d2b69,this.El=0x7bd44da8,this.Fh=0x77e36f73,this.Fl=0x4c48942,this.Gh=0x3f9d85a8,this.Gl=0x6a1d36c8,this.Hh=0x1112e6ad,this.Hl=-0x6e296d5f}}r.SHA512_224=d;class h extends u{constructor(){super(32),this.Ah=0x22312194,this.Al=-0x3d408d4,this.Bh=-0x60aaa05d,this.Bl=-0x37b39b3e,this.Ch=0x2393b86b,this.Cl=0x6f53b151,this.Dh=-0x69c788e7,this.Dl=0x5940eabd,this.Eh=-0x69d7c11e,this.El=-0x5771001d,this.Fh=-0x41a1e1db,this.Fl=0x53863992,this.Gh=0x2b0199fc,this.Gl=0x2c85b8aa,this.Hh=0xeb72ddc,this.Hl=-0x7e3ad35e}}r.SHA512_256=h;class f extends u{constructor(){super(48),this.Ah=-0x344462a3,this.Al=-0x3efa6128,this.Bh=0x629a292a,this.Bl=0x367cd507,this.Ch=-0x6ea6fea6,this.Cl=0x3070dd17,this.Dh=0x152fecd8,this.Dl=-0x8f1a6c7,this.Eh=0x67332667,this.El=-4191439,this.Fh=-0x714bb579,this.Fl=0x68581511,this.Gh=-0x24f3d1f3,this.Gl=0x64f98fa7,this.Hh=0x47b5481d,this.Hl=-0x4105b05c}}r.SHA384=f,r.sha512=(0,i.wrapConstructor)(()=>new u),r.sha512_224=(0,i.wrapConstructor)(()=>new d),r.sha512_256=(0,i.wrapConstructor)(()=>new h),r.sha384=(0,i.wrapConstructor)(()=>new f)},976653,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sha512_256=r.sha512_224=r.sha512=r.sha384=r.sha256=r.sha224=void 0;var n=e.r(703088);Object.defineProperty(r,"sha224",{enumerable:!0,get:function(){return n.sha224}}),Object.defineProperty(r,"sha256",{enumerable:!0,get:function(){return n.sha256}});var a=e.r(266454);Object.defineProperty(r,"sha384",{enumerable:!0,get:function(){return a.sha384}}),Object.defineProperty(r,"sha512",{enumerable:!0,get:function(){return a.sha512}}),Object.defineProperty(r,"sha512_224",{enumerable:!0,get:function(){return a.sha512_224}}),Object.defineProperty(r,"sha512_256",{enumerable:!0,get:function(){return a.sha512_256}})},5868,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hmac=r.HMAC=void 0;let n=e.r(545562),a=e.r(759610);class i extends a.Hash{update(e){return(0,n.aexists)(this),this.iHash.update(e),this}digestInto(e){(0,n.aexists)(this),(0,n.abytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:a,blockLen:i,outputLen:o}=this;return e.finished=n,e.destroyed=a,e.blockLen=i,e.outputLen=o,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,n.ahash)(e);let r=(0,a.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,o=new Uint8Array(i);o.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<o.length;e++)o[e]^=54;this.iHash.update(o),this.oHash=e.create();for(let e=0;e<o.length;e++)o[e]^=106;this.oHash.update(o),o.fill(0)}}r.HMAC=i,r.hmac=(e,t,r)=>new i(e,t).update(r).digest(),r.hmac.create=(e,t)=>new i(e,t)},39970,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.notImplemented=r.bitMask=void 0,r.isBytes=i,r.abytes=o,r.abool=function(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)},r.numberToHexUnpadded=s,r.hexToNumber=c,r.bytesToHex=d,r.hexToBytes=p,r.bytesToNumberBE=function(e){return c(d(e))},r.bytesToNumberLE=function(e){return o(e),c(d(Uint8Array.from(e).reverse()))},r.numberToBytesBE=g,r.numberToBytesLE=function(e,t){return g(e,t).reverse()},r.numberToVarBytesBE=function(e){return p(s(e))},r.ensureBytes=function(e,t,r){let n;if("string"==typeof t)try{n=p(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(i(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let a=n.length;if("number"==typeof r&&a!==r)throw Error(e+" of length "+r+" expected, got "+a);return n},r.concatBytes=m,r.equalBytes=function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r},r.utf8ToBytes=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))},r.inRange=b,r.aInRange=function(e,t,r,n){if(!b(t,r,n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)},r.bitLen=function(e){let t;for(t=0;e>n;e>>=a,t+=1);return t},r.bitGet=function(e,t){return e>>BigInt(t)&a},r.bitSet=function(e,t,r){return e|(r?a:n)<<BigInt(t)},r.createHmacDrbg=function(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=w(e),a=w(e),i=0,o=()=>{n.fill(1),a.fill(0),i=0},s=function(){for(var e=arguments.length,t=Array(e),i=0;i<e;i++)t[i]=arguments[i];return r(a,n,...t)},c=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:w(0);a=s(_([0]),e),n=s(),0!==e.length&&(a=s(_([1]),e),n=s())},l=()=>{if(i++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=s()).slice();r.push(t),e+=n.length}return m(...r)};return(e,t)=>{let r;for(o(),c(e);!(r=t(l()));)c();return o(),r}},r.validateObject=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=(t,r,n)=>{let a=v[r];if("function"!=typeof a)throw Error("invalid validator function");let i=e[t];if((!n||void 0!==i)&&!a(i,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+i)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e},r.memoized=function(e){let t=new WeakMap;return function(r){for(var n=arguments.length,a=Array(n>1?n-1:0),i=1;i<n;i++)a[i-1]=arguments[i];let o=t.get(r);if(void 0!==o)return o;let s=e(r,...a);return t.set(r,s),s}};let n=BigInt(0),a=BigInt(1);function i(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function o(e){if(!i(e))throw Error("Uint8Array expected")}function s(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function c(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?n:BigInt("0x"+e)}let l="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,u=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function d(e){if(o(e),l)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=u[e[r]];return t}let h={_0:48,_9:57,A:65,F:70,a:97,f:102};function f(e){return e>=h._0&&e<=h._9?e-h._0:e>=h.A&&e<=h.F?e-(h.A-10):e>=h.a&&e<=h.f?e-(h.a-10):void 0}function p(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(l)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,a=0;t<r;t++,a+=2){let r=f(e.charCodeAt(a)),i=f(e.charCodeAt(a+1));if(void 0===r||void 0===i)throw Error('hex string expected, got non-hex character "'+(e[a]+e[a+1])+'" at index '+a);n[t]=16*r+i}return n}function g(e,t){return p(e.toString(16).padStart(2*t,"0"))}function m(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=0;for(let e=0;e<t.length;e++){let r=t[e];o(r),n+=r.length}let a=new Uint8Array(n);for(let e=0,r=0;e<t.length;e++){let n=t[e];a.set(n,r),r+=n.length}return a}let y=e=>"bigint"==typeof e&&n<=e;function b(e,t,r){return y(e)&&y(t)&&y(r)&&t<=e&&e<r}r.bitMask=e=>(a<<BigInt(e))-a;let w=e=>new Uint8Array(e),_=e=>Uint8Array.from(e),v={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||i(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};r.notImplemented=()=>{throw Error("not implemented")}},849546,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isNegativeLE=void 0,r.mod=d,r.pow=h,r.pow2=function(e,t,r){let n=e;for(;t-- >a;)n*=n,n%=r;return n},r.invert=f,r.tonelliShanks=p,r.FpSqrt=g,r.validateField=function(e){let t=m.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,n.validateObject)(e,t)},r.FpPow=y,r.FpInvertBatch=b,r.FpDiv=function(e,t,r){return e.mul(t,"bigint"==typeof r?f(r,e.ORDER):e.inv(r))},r.FpLegendre=w,r.FpIsSquare=function(e){let t=w(e.ORDER);return r=>{let n=t(e,r);return e.eql(n,e.ZERO)||e.eql(n,e.ONE)}},r.nLength=_,r.Field=function(e,t){let r,o=arguments.length>2&&void 0!==arguments[2]&&arguments[2],s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{};if(e<=a)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:c,nByteLength:l}=_(e,t);if(l>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let u=Object.freeze({ORDER:e,isLE:o,BITS:c,BYTES:l,MASK:(0,n.bitMask)(c),ZERO:a,ONE:i,create:t=>d(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return a<=t&&t<e},is0:e=>e===a,isOdd:e=>(e&i)===i,neg:t=>d(-t,e),eql:(e,t)=>e===t,sqr:t=>d(t*t,e),add:(t,r)=>d(t+r,e),sub:(t,r)=>d(t-r,e),mul:(t,r)=>d(t*r,e),pow:(e,t)=>y(u,e,t),div:(t,r)=>d(t*f(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>f(t,e),sqrt:s.sqrt||(t=>(r||(r=g(e)),r(u,t))),invertBatch:e=>b(u,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>o?(0,n.numberToBytesLE)(e,l):(0,n.numberToBytesBE)(e,l),fromBytes:e=>{if(e.length!==l)throw Error("Field.fromBytes: expected "+l+" bytes, got "+e.length);return o?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e)}});return Object.freeze(u)},r.FpSqrtOdd=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)},r.FpSqrtEven=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r},r.hashToPrivateScalar=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=(e=(0,n.ensureBytes)("privateHash",e)).length,o=_(t).nByteLength+8;if(o<24||a<o||a>1024)throw Error("hashToPrivateScalar: expected "+o+"-1024 bytes of input, got "+a);return d(r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e),t-i)+i},r.getFieldBytesLength=v,r.getMinHashLength=E,r.mapHashToField=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=e.length,o=v(t),s=E(t);if(a<16||a<s||a>1024)throw Error("expected "+s+"-1024 bytes of input, got "+a);let c=d(r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e),t-i)+i;return r?(0,n.numberToBytesLE)(c,o):(0,n.numberToBytesBE)(c,o)};let n=e.r(39970),a=BigInt(0),i=BigInt(1),o=BigInt(2),s=BigInt(3),c=BigInt(4),l=BigInt(5),u=BigInt(8);function d(e,t){let r=e%t;return r>=a?r:t+r}function h(e,t,r){if(t<a)throw Error("invalid exponent, negatives unsupported");if(r<=a)throw Error("invalid modulus");if(r===i)return a;let n=i;for(;t>a;)t&i&&(n=n*e%r),e=e*e%r,t>>=i;return n}function f(e,t){if(e===a)throw Error("invert: expected non-zero number");if(t<=a)throw Error("invert: expected positive modulus, got "+t);let r=d(e,t),n=t,o=a,s=i,c=i,l=a;for(;r!==a;){let e=n/r,t=n%r,a=o-c*e,i=s-l*e;n=r,r=t,o=c,s=l,c=a,l=i}if(n!==i)throw Error("invert: does not exist");return d(o,t)}function p(e){let t,r,n,s=(e-i)/o;for(t=e-i,r=0;t%o===a;t/=o,r++);for(n=o;n<e&&h(n,s,e)!==e-i;n++)if(n>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+i)/c;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let l=(t+i)/o;return function(e,a){if(e.pow(a,s)===e.neg(e.ONE))throw Error("Cannot find square root");let o=r,c=e.pow(e.mul(e.ONE,n),t),u=e.pow(a,l),d=e.pow(a,t);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(d);t<o&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(c,i<<BigInt(o-t-1));c=e.sqr(r),u=e.mul(u,r),d=e.mul(d,c),o=t}return u}}function g(e){if(e%c===s){let t=(e+i)/c;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%u===l){let t=(e-l)/u;return function(e,r){let n=e.mul(r,o),a=e.pow(n,t),i=e.mul(r,a),s=e.mul(e.mul(i,o),a),c=e.mul(i,e.sub(s,e.ONE));if(!e.eql(e.sqr(c),r))throw Error("Cannot find square root");return c}}return p(e)}r.isNegativeLE=(e,t)=>(d(e,t)&i)===i;let m=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function y(e,t,r){if(r<a)throw Error("invalid exponent, negatives unsupported");if(r===a)return e.ONE;if(r===i)return t;let n=e.ONE,o=t;for(;r>a;)r&i&&(n=e.mul(n,o)),o=e.sqr(o),r>>=i;return n}function b(e,t){let r=Array(t.length),n=t.reduce((t,n,a)=>e.is0(n)?t:(r[a]=t,e.mul(t,n)),e.ONE),a=e.inv(n);return t.reduceRight((t,n,a)=>e.is0(n)?t:(r[a]=e.mul(t,r[a]),e.mul(t,n)),a),r}function w(e){let t=(e-i)/o;return(e,r)=>e.pow(r,t)}function _(e,t){let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function v(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function E(e){let t=v(e);return t+Math.ceil(t/2)}},704808,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.wNAF=function(e,t){return{constTimeNegate:s,hasPrecomputes:e=>1!==g(e),unsafeLadder(t,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:e.ZERO,a=t;for(;r>i;)r&o&&(n=n.add(a)),a=a.double(),r>>=o;return n},precomputeWindow(e,r){let{windows:n,windowSize:a}=l(r,t),i=[],o=e,s=o;for(let e=0;e<n;e++){s=o,i.push(s);for(let e=1;e<a;e++)s=s.add(o),i.push(s);o=s.double()}return i},wNAF(r,n,a){let i=e.ZERO,o=e.BASE,c=l(r,t);for(let e=0;e<c.windows;e++){let{nextN:t,offset:r,isZero:l,isNeg:d,isNegF:h,offsetF:f}=u(a,e,c);a=t,l?o=o.add(s(h,n[f])):i=i.add(s(d,n[r]))}return{p:i,f:o}},wNAFUnsafe(r,n,a){let o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.ZERO,s=l(r,t);for(let e=0;e<s.windows&&a!==i;e++){let{nextN:t,offset:r,isZero:i,isNeg:c}=u(a,e,s);if(a=t,!i){let e=n[r];o=o.add(c?e.negate():e)}}return o},getPrecomputes(e,t,r){let n=f.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&f.set(t,r(n))),n},wNAFCached(e,t,r){let n=g(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){let a=g(e);return 1===a?this.unsafeLadder(e,t,n):this.wNAFUnsafe(a,this.getPrecomputes(a,e,r),t,n)},setWindowSize(e,r){c(r,t),p.set(e,r),f.delete(e)}}},r.pippenger=function(e,t,r,n){if(d(r,e),h(n,t),r.length!==n.length)throw Error("arrays of points and scalars must have equal length");let i=e.ZERO,o=(0,a.bitLen)(BigInt(r.length)),s=o>12?o-3:o>4?o-2:o?2:1,c=(0,a.bitMask)(s),l=Array(Number(c)+1).fill(i),u=Math.floor((t.BITS-1)/s)*s,f=i;for(let e=u;e>=0;e-=s){l.fill(i);for(let t=0;t<n.length;t++){let a=Number(n[t]>>BigInt(e)&c);l[a]=l[a].add(r[t])}let t=i;for(let e=l.length-1,r=i;e>0;e--)r=r.add(l[e]),t=t.add(r);if(f=f.add(t),0!==e)for(let e=0;e<s;e++)f=f.double()}return f},r.precomputeMSMUnsafe=function(e,t,r,n){c(n,t.BITS),d(r,e);let i=e.ZERO,o=2**n-1,s=Math.ceil(t.BITS/n),l=(0,a.bitMask)(n),u=r.map(e=>{let t=[];for(let r=0,n=e;r<o;r++)t.push(n),n=n.add(e);return t});return e=>{if(h(e,t),e.length>r.length)throw Error("array of scalars must be smaller than array of points");let a=i;for(let t=0;t<s;t++){if(a!==i)for(let e=0;e<n;e++)a=a.double();let r=BigInt(s*n-(t+1)*n);for(let t=0;t<e.length;t++){let n=Number(e[t]>>r&l);n&&(a=a.add(u[t][n-1]))}}return a}},r.validateBasic=function(e){return(0,n.validateField)(e.Fp),(0,a.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,n.nLength)(e.n,e.nBitLength),...e,...{p:e.Fp.ORDER}})};let n=e.r(849546),a=e.r(39970),i=BigInt(0),o=BigInt(1);function s(e,t){let r=t.negate();return e?r:t}function c(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function l(e,t){c(e,t);let r=Math.ceil(t/e)+1,n=2**(e-1),i=2**e;return{windows:r,windowSize:n,mask:(0,a.bitMask)(e),maxNumber:i,shiftBy:BigInt(e)}}function u(e,t,r){let{windowSize:n,mask:a,maxNumber:i,shiftBy:s}=r,c=Number(e&a),l=e>>s;c>n&&(c-=i,l+=o);let u=t*n,d=u+Math.abs(c)-1,h=0===c;return{nextN:l,offset:d,isZero:h,isNeg:c<0,isNegF:t%2!=0,offsetF:u}}function d(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}function h(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}let f=new WeakMap,p=new WeakMap;function g(e){return p.get(e)||1}},978660,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DER=r.DERErr=void 0,r.weierstrassPoints=f,r.weierstrass=function(e){let t=function(e){let t=(0,n.validateBasic)(e);return(0,i.validateObject)(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:s,n:u}=t,d=s.BYTES+1,h=2*s.BYTES+1;function p(e){return(0,a.mod)(e,u)}function g(e){return(0,a.invert)(e,u)}let{ProjectivePoint:m,normPrivateKeyToScalar:y,weierstrassEquation:b,isWithinCurveOrder:w}=f({...t,toBytes(e,t,r){let n=t.toAffine(),a=s.toBytes(n.x),o=i.concatBytes;return((0,i.abool)("isCompressed",r),r)?o(Uint8Array.from([t.hasEvenY()?2:3]),a):o(Uint8Array.from([4]),a,s.toBytes(n.y))},fromBytes(e){let t=e.length,r=e[0],n=e.subarray(1);if(t===d&&(2===r||3===r)){let e,t=(0,i.bytesToNumberBE)(n);if(!(0,i.inRange)(t,l,s.ORDER))throw Error("Point is not on curve");let a=b(t);try{e=s.sqrt(a)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&r)==1!=((e&l)===l)&&(e=s.neg(e)),{x:t,y:e}}if(t===h&&4===r)return{x:s.fromBytes(n.subarray(0,s.BYTES)),y:s.fromBytes(n.subarray(s.BYTES,2*s.BYTES))};throw Error("invalid Point, expected length of "+d+", or uncompressed "+h+", got "+t)}}),_=e=>(0,i.bytesToHex)((0,i.numberToBytesBE)(e,t.nByteLength)),v=(e,t,r)=>(0,i.bytesToNumberBE)(e.slice(t,r));class E{static fromCompact(e){let r=t.nByteLength;return new E(v(e=(0,i.ensureBytes)("compactSignature",e,2*r),0,r),v(e,r,2*r))}static fromDER(e){let{r:t,s:n}=r.DER.toSig((0,i.ensureBytes)("DER",e));return new E(t,n)}assertValidity(){}addRecoveryBit(e){return new E(this.r,this.s,e)}recoverPublicKey(e){let{r,s:n,recovery:a}=this,o=k((0,i.ensureBytes)("msgHash",e));if(null==a||![0,1,2,3].includes(a))throw Error("recovery id invalid");let c=2===a||3===a?r+t.n:r;if(c>=s.ORDER)throw Error("recovery id 2 or 3 invalid");let l=(1&a)==0?"02":"03",u=m.fromHex(l+_(c)),d=g(c),h=p(-o*d),f=p(n*d),y=m.BASE.multiplyAndAddUnsafe(u,h,f);if(!y)throw Error("point at infinify");return y.assertValidity(),y}hasHighS(){return this.s>u>>l}normalizeS(){return this.hasHighS()?new E(this.r,p(-this.s),this.recovery):this}toDERRawBytes(){return(0,i.hexToBytes)(this.toDERHex())}toDERHex(){return r.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return(0,i.hexToBytes)(this.toCompactHex())}toCompactHex(){return _(this.r)+_(this.s)}constructor(e,t,r){(0,i.aInRange)("r",e,l,u),(0,i.aInRange)("s",t,l,u),this.r=e,this.s=t,null!=r&&(this.recovery=r),Object.freeze(this)}}function S(e){let t=(0,i.isBytes)(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===d||n===h:r?n===2*d||n===2*h:e instanceof m}let x=t.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let r=(0,i.bytesToNumberBE)(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},k=t.bits2int_modN||function(e){return p(x(e))},T=(0,i.bitMask)(t.nBitLength);function A(e){return(0,i.aInRange)("num < 2^"+t.nBitLength,e,c,T),(0,i.numberToBytesBE)(e,t.nByteLength)}let B={lowS:t.lowS,prehash:!1},I={lowS:t.lowS,prehash:!1};return m.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e){let t=!(arguments.length>1)||void 0===arguments[1]||arguments[1];return m.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t){let r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(S(e))throw Error("first arg must be private key");if(!S(t))throw Error("second arg must be public key");return m.fromHex(t).multiply(y(e)).toRawBytes(r)},sign:function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B,{seed:a,k2sig:d}=function(e,r){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:B;if(["recovered","canonical"].some(e=>e in n))throw Error("sign() legacy options not supported");let{hash:a,randomBytes:d}=t,{lowS:h,prehash:f,extraEntropy:b}=n;null==h&&(h=!0),e=(0,i.ensureBytes)("msgHash",e),o(n),f&&(e=(0,i.ensureBytes)("prehashed msgHash",a(e)));let _=k(e),v=y(r),S=[A(v),A(_)];if(null!=b&&!1!==b){let e=!0===b?d(s.BYTES):b;S.push((0,i.ensureBytes)("extraEntropy",e))}return{seed:(0,i.concatBytes)(...S),k2sig:function(e){var t;let r=x(e);if(!w(r))return;let n=g(r),a=m.BASE.multiply(r).toAffine(),i=p(a.x);if(i===c)return;let o=p(n*p(_+i*v));if(o===c)return;let s=2*(a.x!==i)|Number(a.y&l),d=o;return h&&o>u>>l&&(d=(t=o)>u>>l?p(-t):t,s^=1),new E(i,d,s)}}}(e,r,n);return(0,i.createHmacDrbg)(t.hash.outputLen,t.nByteLength,t.hmac)(a,d)},verify:function(e,n,a){var s;let c,l,u=arguments.length>3&&void 0!==arguments[3]?arguments[3]:I;n=(0,i.ensureBytes)("msgHash",n),a=(0,i.ensureBytes)("publicKey",a);let{lowS:d,prehash:h,format:f}=u;if(o(u),"strict"in u)throw Error("options.strict was renamed to lowS");if(void 0!==f&&"compact"!==f&&"der"!==f)throw Error("format must be compact or der");let y="string"==typeof e||(0,i.isBytes)(e),b=!y&&!f&&"object"==typeof e&&null!==e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!y&&!b)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(b&&(c=new E(e.r,e.s)),y){try{"compact"!==f&&(c=E.fromDER(e))}catch(e){if(!(e instanceof r.DER.Err))throw e}c||"der"===f||(c=E.fromCompact(e))}l=m.fromHex(a)}catch(e){return!1}if(!c||d&&c.hasHighS())return!1;h&&(n=t.hash(n));let{r:w,s:_}=c,v=k(n),S=g(_),x=p(v*S),T=p(w*S),A=null==(s=m.BASE.multiplyAndAddUnsafe(l,x,T))?void 0:s.toAffine();return!!A&&p(A.x)===w},ProjectivePoint:m,Signature:E,utils:{isValidPrivateKey(e){try{return y(e),!0}catch(e){return!1}},normPrivateKeyToScalar:y,randomPrivateKey:()=>{let e=(0,a.getMinHashLength)(t.n);return(0,a.mapHashToField)(t.randomBytes(e),t.n)},precompute(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:8,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:m.BASE;return t._setWindowSize(e),t.multiply(BigInt(3)),t}}}},r.SWUFpSqrtRatio=p,r.mapToCurveSimpleSWU=function(e,t){if((0,a.validateField)(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let r=p(e,t.Z);if(!e.isOdd)throw Error("Fp.isOdd is not implemented!");return n=>{let a,i,o,s,c,l,u,d;a=e.sqr(n),a=e.mul(a,t.Z),i=e.sqr(a),i=e.add(i,a),o=e.add(i,e.ONE),o=e.mul(o,t.B),s=e.cmov(t.Z,e.neg(i),!e.eql(i,e.ZERO)),s=e.mul(s,t.A),i=e.sqr(o),l=e.sqr(s),c=e.mul(l,t.A),i=e.add(i,c),i=e.mul(i,o),l=e.mul(l,s),c=e.mul(l,t.B),i=e.add(i,c),u=e.mul(a,o);let{isValid:h,value:f}=r(i,l);d=e.mul(a,n),d=e.mul(d,f),u=e.cmov(u,o,h),d=e.cmov(d,f,h);let p=e.isOdd(n)===e.isOdd(d);return d=e.cmov(e.neg(d),d,p),{x:u=e.div(u,s),y:d}}};let n=e.r(704808),a=e.r(849546),i=e.r(39970);function o(e){void 0!==e.lowS&&(0,i.abool)("lowS",e.lowS),void 0!==e.prehash&&(0,i.abool)("prehash",e.prehash)}class s extends Error{constructor(e=""){super(e)}}r.DERErr=s,r.DER={Err:s,_tlv:{encode:(e,t)=>{let{Err:n}=r.DER;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");let a=t.length/2,o=(0,i.numberToHexUnpadded)(a);if(o.length/2&128)throw new n("tlv.encode: long form length too big");let s=a>127?(0,i.numberToHexUnpadded)(o.length/2|128):"";return(0,i.numberToHexUnpadded)(e)+s+o+t},decode(e,t){let{Err:n}=r.DER,a=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[a++]!==e)throw new n("tlv.decode: wrong tlv");let i=t[a++],o=0;if(128&i){let e=127&i;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");let r=t.subarray(a,a+e);if(r.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===r[0])throw new n("tlv.decode(long): zero leftmost byte");for(let e of r)o=o<<8|e;if(a+=e,o<128)throw new n("tlv.decode(long): not minimal encoding")}else o=i;let s=t.subarray(a,a+o);if(s.length!==o)throw new n("tlv.decode: wrong value length");return{v:s,l:t.subarray(a+o)}}},_int:{encode(e){let{Err:t}=r.DER;if(e<c)throw new t("integer: negative integers are not allowed");let n=(0,i.numberToHexUnpadded)(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){let{Err:t}=r.DER;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return(0,i.bytesToNumberBE)(e)}},toSig(e){let{Err:t,_int:n,_tlv:a}=r.DER,o=(0,i.ensureBytes)("signature",e),{v:s,l:c}=a.decode(48,o);if(c.length)throw new t("invalid signature: left bytes after parsing");let{v:l,l:u}=a.decode(2,s),{v:d,l:h}=a.decode(2,u);if(h.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(l),s:n.decode(d)}},hexFromSig(e){let{_tlv:t,_int:n}=r.DER,a=t.encode(2,n.encode(e.r)),i=t.encode(2,n.encode(e.s));return t.encode(48,a+i)}};let c=BigInt(0),l=BigInt(1),u=BigInt(2),d=BigInt(3),h=BigInt(4);function f(e){let t=function(e){let t=(0,n.validateBasic)(e);(0,i.validateObject)(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:a,a:o}=t;if(r){if(!a.eql(o,a.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,o=(0,a.Field)(t.n,t.nBitLength),s=t.toBytes||((e,t,n)=>{let a=t.toAffine();return(0,i.concatBytes)(Uint8Array.from([4]),r.toBytes(a.x),r.toBytes(a.y))}),u=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function h(e){let{a:n,b:a}=t,i=r.sqr(e),o=r.mul(i,e);return r.add(r.add(o,r.mul(e,n)),a)}if(!r.eql(r.sqr(t.Gy),h(t.Gx)))throw Error("bad generator point: equation left != right");function f(e){let r,{allowedPrivateKeyLengths:n,nByteLength:o,wrapPrivateKey:s,n:c}=t;if(n&&"bigint"!=typeof e){if((0,i.isBytes)(e)&&(e=(0,i.bytesToHex)(e)),"string"!=typeof e||!n.includes(e.length))throw Error("invalid private key");e=e.padStart(2*o,"0")}try{r="bigint"==typeof e?e:(0,i.bytesToNumberBE)((0,i.ensureBytes)("private key",e,o))}catch(t){throw Error("invalid private key, expected hex or "+o+" bytes, got "+typeof e)}return s&&(r=(0,a.mod)(r,c)),(0,i.aInRange)("private key",r,l,c),r}function p(e){if(!(e instanceof y))throw Error("ProjectivePoint expected")}let g=(0,i.memoized)((e,t)=>{let{px:n,py:a,pz:i}=e;if(r.eql(i,r.ONE))return{x:n,y:a};let o=e.is0();null==t&&(t=o?r.ONE:r.inv(i));let s=r.mul(n,t),c=r.mul(a,t),l=r.mul(i,t);if(o)return{x:r.ZERO,y:r.ZERO};if(!r.eql(l,r.ONE))throw Error("invZ was invalid");return{x:s,y:c}}),m=(0,i.memoized)(e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw Error("bad point: ZERO")}let{x:n,y:a}=e.toAffine();if(!r.isValid(n)||!r.isValid(a))throw Error("bad point: x or y not FE");let i=r.sqr(a),o=h(n);if(!r.eql(i,o))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class y{static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof y)throw Error("projective point not allowed");let a=e=>r.eql(e,r.ZERO);return a(t)&&a(n)?y.ZERO:new y(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(y.fromAffine)}static fromHex(e){let t=y.fromAffine(u((0,i.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return y.BASE.multiply(f(e))}static msm(e,t){return(0,n.pippenger)(y,o,e,t)}_setWindowSize(e){w.setWindowSize(this,e)}assertValidity(){m(this)}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){p(e);let{px:t,py:n,pz:a}=this,{px:i,py:o,pz:s}=e,c=r.eql(r.mul(t,s),r.mul(i,a)),l=r.eql(r.mul(n,s),r.mul(o,a));return c&&l}negate(){return new y(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:n}=t,a=r.mul(n,d),{px:i,py:o,pz:s}=this,c=r.ZERO,l=r.ZERO,u=r.ZERO,h=r.mul(i,i),f=r.mul(o,o),p=r.mul(s,s),g=r.mul(i,o);return g=r.add(g,g),u=r.mul(i,s),u=r.add(u,u),c=r.mul(e,u),l=r.mul(a,p),l=r.add(c,l),c=r.sub(f,l),l=r.add(f,l),l=r.mul(c,l),c=r.mul(g,c),u=r.mul(a,u),p=r.mul(e,p),g=r.sub(h,p),g=r.mul(e,g),g=r.add(g,u),u=r.add(h,h),h=r.add(u,h),h=r.add(h,p),h=r.mul(h,g),l=r.add(l,h),p=r.mul(o,s),p=r.add(p,p),h=r.mul(p,g),c=r.sub(c,h),u=r.mul(p,f),u=r.add(u,u),new y(c,l,u=r.add(u,u))}add(e){p(e);let{px:n,py:a,pz:i}=this,{px:o,py:s,pz:c}=e,l=r.ZERO,u=r.ZERO,h=r.ZERO,f=t.a,g=r.mul(t.b,d),m=r.mul(n,o),b=r.mul(a,s),w=r.mul(i,c),_=r.add(n,a),v=r.add(o,s);_=r.mul(_,v),v=r.add(m,b),_=r.sub(_,v),v=r.add(n,i);let E=r.add(o,c);return v=r.mul(v,E),E=r.add(m,w),v=r.sub(v,E),E=r.add(a,i),l=r.add(s,c),E=r.mul(E,l),l=r.add(b,w),E=r.sub(E,l),h=r.mul(f,v),l=r.mul(g,w),h=r.add(l,h),l=r.sub(b,h),h=r.add(b,h),u=r.mul(l,h),b=r.add(m,m),b=r.add(b,m),w=r.mul(f,w),v=r.mul(g,v),b=r.add(b,w),w=r.sub(m,w),w=r.mul(f,w),v=r.add(v,w),m=r.mul(b,v),u=r.add(u,m),m=r.mul(E,v),l=r.mul(_,l),l=r.sub(l,m),m=r.mul(_,b),h=r.mul(E,h),new y(l,u,h=r.add(h,m))}subtract(e){return this.add(e.negate())}is0(){return this.equals(y.ZERO)}wNAF(e){return w.wNAFCached(this,e,y.normalizeZ)}multiplyUnsafe(e){let{endo:n,n:a}=t;(0,i.aInRange)("scalar",e,c,a);let o=y.ZERO;if(e===c)return o;if(this.is0()||e===l)return this;if(!n||w.hasPrecomputes(this))return w.wNAFCachedUnsafe(this,e,y.normalizeZ);let{k1neg:s,k1:u,k2neg:d,k2:h}=n.splitScalar(e),f=o,p=o,g=this;for(;u>c||h>c;)u&l&&(f=f.add(g)),h&l&&(p=p.add(g)),g=g.double(),u>>=l,h>>=l;return s&&(f=f.negate()),d&&(p=p.negate()),p=new y(r.mul(p.px,n.beta),p.py,p.pz),f.add(p)}multiply(e){let n,a,{endo:o,n:s}=t;if((0,i.aInRange)("scalar",e,l,s),o){let{k1neg:t,k1:i,k2neg:s,k2:c}=o.splitScalar(e),{p:l,f:u}=this.wNAF(i),{p:d,f:h}=this.wNAF(c);l=w.constTimeNegate(t,l),d=w.constTimeNegate(s,d),d=new y(r.mul(d.px,o.beta),d.py,d.pz),n=l.add(d),a=u.add(h)}else{let{p:t,f:r}=this.wNAF(e);n=t,a=r}return y.normalizeZ([n,a])[0]}multiplyAndAddUnsafe(e,t,r){let n=y.BASE,a=(e,t)=>t!==c&&t!==l&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),i=a(this,t).add(a(e,r));return i.is0()?void 0:i}toAffine(e){return g(this,e)}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===l)return!0;if(r)return r(y,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===l?this:r?r(y,this):this.multiplyUnsafe(t.h)}toRawBytes(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return(0,i.abool)("isCompressed",e),this.assertValidity(),s(y,this,e)}toHex(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];return(0,i.abool)("isCompressed",e),(0,i.bytesToHex)(this.toRawBytes(e))}constructor(e,t,n){if(null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required");this.px=e,this.py=t,this.pz=n,Object.freeze(this)}}y.BASE=new y(t.Gx,t.Gy,r.ONE),y.ZERO=new y(r.ZERO,r.ONE,r.ZERO);let b=t.nBitLength,w=(0,n.wNAF)(y,t.endo?Math.ceil(b/2):b);return{CURVE:t,ProjectivePoint:y,normPrivateKeyToScalar:f,weierstrassEquation:h,isWithinCurveOrder:function(e){return(0,i.inRange)(e,l,t.n)}}}function p(e,t){let r=e.ORDER,n=c;for(let e=r-l;e%u===c;e/=u)n+=l;let a=n,i=u<<a-l-l,o=i*u,s=(r-l)/o,f=(s-l)/u,p=o-l,g=e.pow(t,s),m=e.pow(t,(s+l)/u),y=(t,r)=>{let n=g,o=e.pow(r,p),s=e.sqr(o);s=e.mul(s,r);let c=e.mul(t,s);c=e.pow(c,f),c=e.mul(c,o),o=e.mul(c,r),s=e.mul(c,t);let d=e.mul(s,o);c=e.pow(d,i);let h=e.eql(c,e.ONE);o=e.mul(s,m),c=e.mul(d,n),s=e.cmov(o,s,h),d=e.cmov(c,d,h);for(let t=a;t>l;t--){let r=t-u;r=u<<r-l;let a=e.pow(d,r),i=e.eql(a,e.ONE);o=e.mul(s,n),n=e.mul(n,n),a=e.mul(d,n),s=e.cmov(o,s,i),d=e.cmov(a,d,i)}return{isValid:h,value:s}};if(e.ORDER%h===d){let r=(e.ORDER-d)/h,n=e.sqrt(e.neg(t));y=(t,a)=>{let i=e.sqr(a),o=e.mul(t,a);i=e.mul(i,o);let s=e.pow(i,r);s=e.mul(s,o);let c=e.mul(s,n),l=e.mul(e.sqr(s),a),u=e.eql(l,t),d=e.cmov(c,s,u);return{isValid:u,value:d}}}return y}},962345,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getHash=o,r.createCurve=function(e,t){let r=t=>(0,i.weierstrass)({...e,...o(t)});return{...r(t),create:r}};let n=e.r(5868),a=e.r(759610),i=e.r(978660);function o(e){return{hash:e,hmac:function(t){for(var r=arguments.length,i=Array(r>1?r-1:0),o=1;o<r;o++)i[o-1]=arguments[o];return(0,n.hmac)(e,t,(0,a.concatBytes)(...i))},randomBytes:a.randomBytes}}},265678,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.expand_message_xmd=c,r.expand_message_xof=l,r.hash_to_field=u,r.isogenyMap=function(e,t){let r=t.map(e=>Array.from(e).reverse());return(t,n)=>{let[a,i,o,s]=r.map(r=>r.reduce((r,n)=>e.add(e.mul(r,t),n)));if(e.is0(i)||e.is0(s))throw Error("bad point: ZERO");return t=e.div(a,i),n=e.mul(n,e.div(o,s)),{x:t,y:n}}},r.createHasher=function(e,t,r){if("function"!=typeof t)throw Error("mapToCurve() must be defined");return{hashToCurve(n,a){let i=u(n,2,{...r,DST:r.DST,...a}),o=e.fromAffine(t(i[0])),s=e.fromAffine(t(i[1])),c=o.add(s).clearCofactor();return c.assertValidity(),c},encodeToCurve(n,a){let i=u(n,1,{...r,DST:r.encodeDST,...a}),o=e.fromAffine(t(i[0])).clearCofactor();return o.assertValidity(),o},mapToCurve(r){if(!Array.isArray(r))throw Error("mapToCurve: expected array of bigints");for(let e of r)if("bigint"!=typeof e)throw Error("mapToCurve: expected array of bigints");let n=e.fromAffine(t(r)).clearCofactor();return n.assertValidity(),n}}};let n=e.r(849546),a=e.r(39970),i=a.bytesToNumberBE;function o(e,t){if(s(e),s(t),e<0||e>=1<<8*t)throw Error("invalid I2OSP input: "+e);let r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=255&e,e>>>=8;return new Uint8Array(r)}function s(e){if(!Number.isSafeInteger(e))throw Error("number expected")}function c(e,t,r,n){(0,a.abytes)(e),(0,a.abytes)(t),s(r),t.length>255&&(t=n((0,a.concatBytes)((0,a.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));let{outputLen:i,blockLen:c}=n,l=Math.ceil(r/i);if(r>65535||l>255)throw Error("expand_message_xmd: invalid lenInBytes");let u=(0,a.concatBytes)(t,o(t.length,1)),d=o(0,c),h=o(r,2),f=Array(l),p=n((0,a.concatBytes)(d,e,h,o(0,1),u));f[0]=n((0,a.concatBytes)(p,o(1,1),u));for(let e=1;e<=l;e++){let t=[function(e,t){let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}(p,f[e-1]),o(e+1,1),u];f[e]=n((0,a.concatBytes)(...t))}return(0,a.concatBytes)(...f).slice(0,r)}function l(e,t,r,n,i){if((0,a.abytes)(e),(0,a.abytes)(t),s(r),t.length>255){let e=Math.ceil(2*n/8);t=i.create({dkLen:e}).update((0,a.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(e).update(o(r,2)).update(t).update(o(t.length,1)).digest()}function u(e,t,r){let o;(0,a.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:u,k:d,m:h,hash:f,expand:p,DST:g}=r;(0,a.abytes)(e),s(t);let m="string"==typeof g?(0,a.utf8ToBytes)(g):g,y=Math.ceil((u.toString(2).length+d)/8),b=t*h*y;if("xmd"===p)o=c(e,m,b,f);else if("xof"===p)o=l(e,m,b,d,f);else if("_internal_pass"===p)o=e;else throw Error('expand must be "xmd" or "xof"');let w=Array(t);for(let e=0;e<t;e++){let t=Array(h);for(let r=0;r<h;r++){let a=y*(r+e*h),s=o.subarray(a,a+y);t[r]=(0,n.mod)(i(s),u)}w[e]=t}return w}},540281,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.encodeToCurve=r.hashToCurve=r.schnorr=r.secp256k1=void 0;let n=e.r(976653),a=e.r(759610),i=e.r(962345),o=e.r(265678),s=e.r(849546),c=e.r(39970),l=e.r(978660),u=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),d=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h=BigInt(1),f=BigInt(2),p=(e,t)=>(e+t/f)/t;function g(e){let t=BigInt(3),r=BigInt(6),n=BigInt(11),a=BigInt(22),i=BigInt(23),o=BigInt(44),c=BigInt(88),l=e*e*e%u,d=l*l*e%u,h=(0,s.pow2)(d,t,u)*d%u,p=(0,s.pow2)(h,t,u)*d%u,g=(0,s.pow2)(p,f,u)*l%u,y=(0,s.pow2)(g,n,u)*g%u,b=(0,s.pow2)(y,a,u)*y%u,w=(0,s.pow2)(b,o,u)*b%u,_=(0,s.pow2)(w,c,u)*w%u,v=(0,s.pow2)(_,o,u)*b%u,E=(0,s.pow2)(v,t,u)*d%u,S=(0,s.pow2)(E,i,u)*y%u,x=(0,s.pow2)(S,r,u)*l%u,k=(0,s.pow2)(x,f,u);if(!m.eql(m.sqr(k),e))throw Error("Cannot find square root");return k}let m=(0,s.Field)(u,void 0,void 0,{sqrt:g});r.secp256k1=(0,i.createCurve)({a:BigInt(0),b:BigInt(7),Fp:m,n:d,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-h*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=BigInt("0x100000000000000000000000000000000"),i=p(t*e,d),o=p(-r*e,d),c=(0,s.mod)(e-i*t-o*n,d),l=(0,s.mod)(-i*r-o*t,d),u=c>a,f=l>a;if(u&&(c=d-c),f&&(l=d-l),c>a||l>a)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:u,k1:c,k2neg:f,k2:l}}}},n.sha256);let y=BigInt(0),b={};function w(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];let i=b[e];if(void 0===i){let t=(0,n.sha256)(Uint8Array.from(e,e=>e.charCodeAt(0)));i=(0,c.concatBytes)(t,t),b[e]=i}return(0,n.sha256)((0,c.concatBytes)(i,...r))}let _=e=>e.toRawBytes(!0).slice(1),v=e=>(0,c.numberToBytesBE)(e,32),E=e=>(0,s.mod)(e,u),S=e=>(0,s.mod)(e,d),x=r.secp256k1.ProjectivePoint;function k(e){let t=r.secp256k1.utils.normPrivateKeyToScalar(e),n=x.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:S(-t),bytes:_(n)}}function T(e){(0,c.aInRange)("x",e,h,u);let t=E(e*e),r=g(E(t*e+BigInt(7)));r%f!==y&&(r=E(-r));let n=new x(e,r,h);return n.assertValidity(),n}let A=c.bytesToNumberBE;function B(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return S(A(w("BIP0340/challenge",...t)))}function I(e,t,r){let n=(0,c.ensureBytes)("signature",e,64),a=(0,c.ensureBytes)("message",t),i=(0,c.ensureBytes)("publicKey",r,32);try{let e,t=T(A(i)),r=A(n.subarray(0,32));if(!(0,c.inRange)(r,h,u))return!1;let o=A(n.subarray(32,64));if(!(0,c.inRange)(o,h,d))return!1;let s=B(v(r),_(t),a),l=(e=S(-s),x.BASE.multiplyAndAddUnsafe(t,o,e));if(!l||!l.hasEvenY()||l.toAffine().x!==r)return!1;return!0}catch(e){return!1}}r.schnorr={getPublicKey:function(e){return k(e).bytes},sign:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:(0,a.randomBytes)(32),n=(0,c.ensureBytes)("message",e),{bytes:i,scalar:o}=k(t),s=v(o^A(w("BIP0340/aux",(0,c.ensureBytes)("auxRand",r,32)))),l=S(A(w("BIP0340/nonce",s,i,n)));if(l===y)throw Error("sign failed: k is zero");let{bytes:u,scalar:d}=k(l),h=B(u,i,n),f=new Uint8Array(64);if(f.set(u,0),f.set(v(S(d+h*o)),32),!I(f,n,i))throw Error("sign: Invalid signature produced");return f},verify:I,utils:{randomPrivateKey:r.secp256k1.utils.randomPrivateKey,lift_x:T,pointToBytes:_,numberToBytesBE:c.numberToBytesBE,bytesToNumberBE:c.bytesToNumberBE,taggedHash:w,mod:s.mod}};let C=(0,o.isogenyMap)(m,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e)))),O=(0,l.mapToCurveSimpleSWU)(m,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:m.create(BigInt("-11"))}),P=(0,o.createHasher)(r.secp256k1.ProjectivePoint,e=>{let{x:t,y:r}=O(m.create(e[0]));return C(t,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:m.ORDER,m:1,k:128,expand:"xmd",hash:n.sha256});r.hashToCurve=P.hashToCurve,r.encodeToCurve=P.encodeToCurve},313458,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ripemd160=r.RIPEMD160=void 0;let n=e.r(948559),a=e.r(759610),i=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),o=new Uint8Array(Array(16).fill(0).map((e,t)=>t)),s=o.map(e=>(9*e+5)%16),c=[o],l=[s];for(let e=0;e<4;e++)for(let t of[c,l])t.push(t[e].map(e=>i[e]));let u=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),d=c.map((e,t)=>e.map(e=>u[t][e])),h=l.map((e,t)=>e.map(e=>u[t][e])),f=new Uint32Array([0,0x5a827999,0x6ed9eba1,0x8f1bbcdc,0xa953fd4e]),p=new Uint32Array([0x50a28be6,0x5c4dd124,0x6d703ef3,0x7a6d76e9,0]);function g(e,t,r,n){return 0===e?t^r^n:1===e?t&r|~t&n:2===e?(t|~r)^n:3===e?t&n|r&~n:t^(r|~n)}let m=new Uint32Array(16);class y extends n.HashMD{get(){let{h0:e,h1:t,h2:r,h3:n,h4:a}=this;return[e,t,r,n,a]}set(e,t,r,n,a){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|n,this.h4=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)m[r]=e.getUint32(t,!0);let r=0|this.h0,n=r,i=0|this.h1,o=i,s=0|this.h2,u=s,y=0|this.h3,b=y,w=0|this.h4,_=w;for(let e=0;e<5;e++){let t=4-e,v=f[e],E=p[e],S=c[e],x=l[e],k=d[e],T=h[e];for(let t=0;t<16;t++){let n=(0,a.rotl)(r+g(e,i,s,y)+m[S[t]]+v,k[t])+w|0;r=w,w=y,y=0|(0,a.rotl)(s,10),s=i,i=n}for(let e=0;e<16;e++){let r=(0,a.rotl)(n+g(t,o,u,b)+m[x[e]]+E,T[e])+_|0;n=_,_=b,b=0|(0,a.rotl)(u,10),u=o,o=r}}this.set(this.h1+s+b|0,this.h2+y+_|0,this.h3+w+n|0,this.h4+r+o|0,this.h0+i+u|0)}roundClean(){m.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}constructor(){super(64,20,8,!0),this.h0=0x67452301,this.h1=-0x10325477,this.h2=-0x67452302,this.h3=0x10325476,this.h4=-0x3c2d1e10}}r.RIPEMD160=y,r.ripemd160=(0,a.wrapConstructor)(()=>new y)},732557,(e,t,r)=>{"use strict";function n(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function a(e){for(var t=arguments.length,r=Array(t>1?t-1:0),a=1;a<t;a++)r[a-1]=arguments[a];if(!n(e))throw Error("Uint8Array expected");if(r.length>0&&!r.includes(e.length))throw Error("Uint8Array expected of length "+r+", got length="+e.length)}function i(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function o(e){if("function"!=typeof e)throw Error("function expected");return!0}function s(e,t){if("string"!=typeof t)throw Error("".concat(e,": string expected"));return!0}function c(e){if(!Number.isSafeInteger(e))throw Error("invalid integer: ".concat(e))}function l(e){if(!Array.isArray(e))throw Error("array expected")}function u(e,t){if(!i(!0,t))throw Error("".concat(e,": array of strings expected"))}function d(e,t){if(!i(!1,t))throw Error("".concat(e,": array of numbers expected"))}function h(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=e=>e,a=(e,t)=>r=>e(t(r));return{encode:t.map(e=>e.encode).reduceRight(a,n),decode:t.map(e=>e.decode).reduce(a,n)}}function f(e){let t="string"==typeof e?e.split(""):e,r=t.length;u("alphabet",t);let n=new Map(t.map((e,t)=>[e,t]));return{encode:n=>(l(n),n.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw Error('alphabet.encode: digit index outside alphabet "'.concat(n,'". Allowed: ').concat(e));return t[n]})),decode:t=>(l(t),t.map(t=>{s("alphabet.decode",t);let r=n.get(t);if(void 0===r)throw Error('Unknown letter: "'.concat(t,'". Allowed: ').concat(e));return r}))}}function p(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return s("join",e),{encode:t=>(u("join.decode",t),t.join(e)),decode:t=>(s("join.decode",t),t.split(e))}}function g(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"=";return c(e),s("padding",t),{encode(r){for(u("padding.encode",r);r.length*e%8;)r.push(t);return r},decode(r){u("padding.decode",r);let n=r.length;if(n*e%8)throw Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if((n-1)*e%8==0)throw Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}function m(e){return o(e),{encode:e=>e,decode:t=>e(t)}}function y(e,t,r){if(t<2)throw Error("convertRadix: invalid from=".concat(t,", base cannot be less than 2"));if(r<2)throw Error("convertRadix: invalid to=".concat(r,", base cannot be less than 2"));if(l(e),!e.length)return[];let n=0,a=[],i=Array.from(e,e=>{if(c(e),e<0||e>=t)throw Error("invalid integer: ".concat(e));return e}),o=i.length;for(;;){let e=0,s=!0;for(let a=n;a<o;a++){let o=i[a],c=t*e,l=c+o;if(!Number.isSafeInteger(l)||c/t!==e||l-o!==c)throw Error("convertRadix: carry overflow");let u=l/r;e=l%r;let d=Math.floor(u);if(i[a]=d,!Number.isSafeInteger(d)||d*r+e!==l)throw Error("convertRadix: carry overflow");s&&(d?s=!1:n=a)}if(a.push(e),s)break}for(let t=0;t<e.length-1&&0===e[t];t++)a.push(0);return a.reverse()}Object.defineProperty(r,"__esModule",{value:!0}),r.bytes=r.stringToBytes=r.str=r.bytesToString=r.hex=r.utf8=r.bech32m=r.bech32=r.base58check=r.createBase58check=r.base58xmr=r.base58xrp=r.base58flickr=r.base58=r.base64urlnopad=r.base64url=r.base64nopad=r.base64=r.base32crockford=r.base32hexnopad=r.base32hex=r.base32nopad=r.base32=r.base16=r.utils=void 0;let b=(e,t)=>0===t?e:b(t,e%t),w=(e,t)=>e+(t-b(e,t)),_=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function v(e,t,r,n){if(l(e),t<=0||t>32)throw Error("convertRadix2: wrong from=".concat(t));if(r<=0||r>32)throw Error("convertRadix2: wrong to=".concat(r));if(w(t,r)>32)throw Error("convertRadix2: carry overflow from=".concat(t," to=").concat(r," carryBits=").concat(w(t,r)));let a=0,i=0,o=_[t],s=_[r]-1,u=[];for(let n of e){if(c(n),n>=o)throw Error("convertRadix2: invalid data word=".concat(n," from=").concat(t));if(a=a<<t|n,i+t>32)throw Error("convertRadix2: carry overflow pos=".concat(i," from=").concat(t));for(i+=t;i>=r;i-=r)u.push((a>>i-r&s)>>>0);let e=_[i];if(void 0===e)throw Error("invalid carry");a&=e-1}if(a=a<<r-i&s,!n&&i>=t)throw Error("Excess padding");if(!n&&a>0)throw Error("Non-zero padding: ".concat(a));return n&&i>0&&u.push(a>>>0),u}function E(e){return c(e),{encode:t=>{if(!n(t))throw Error("radix.encode input should be Uint8Array");return y(Array.from(t),256,e)},decode:t=>(d("radix.decode",t),Uint8Array.from(y(t,e,256)))}}function S(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(c(e),e<=0||e>32)throw Error("radix2: bits should be in (0..32]");if(w(8,e)>32||w(e,8)>32)throw Error("radix2: carry overflow");return{encode:r=>{if(!n(r))throw Error("radix2.encode input should be Uint8Array");return v(Array.from(r),8,e,!t)},decode:r=>(d("radix2.decode",r),Uint8Array.from(v(r,e,8,t)))}}function x(e){return o(e),function(){for(var t=arguments.length,r=Array(t),n=0;n<t;n++)r[n]=arguments[n];try{return e.apply(null,r)}catch(e){}}}function k(e,t){return c(e),o(t),{encode(r){if(!n(r))throw Error("checksum.encode: input should be Uint8Array");let a=t(r).slice(0,e),i=new Uint8Array(r.length+e);return i.set(r),i.set(a,r.length),i},decode(r){if(!n(r))throw Error("checksum.decode: input should be Uint8Array");let a=r.slice(0,-e),i=r.slice(-e),o=t(a).slice(0,e);for(let t=0;t<e;t++)if(o[t]!==i[t])throw Error("Invalid checksum");return a}}}r.utils={alphabet:f,chain:h,checksum:k,convertRadix:y,convertRadix2:v,radix:E,radix2:S,join:p,padding:g},r.base16=h(S(4),f("0123456789ABCDEF"),p("")),r.base32=h(S(5),f("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),g(5),p("")),r.base32nopad=h(S(5),f("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),p("")),r.base32hex=h(S(5),f("0123456789ABCDEFGHIJKLMNOPQRSTUV"),g(5),p("")),r.base32hexnopad=h(S(5),f("0123456789ABCDEFGHIJKLMNOPQRSTUV"),p("")),r.base32crockford=h(S(5),f("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),p(""),m(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));let T="function"==typeof Uint8Array.from([]).toBase64&&"function"==typeof Uint8Array.fromBase64,A=(e,t)=>{if(s("base64",e),e.length>0&&!(t?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/).test(e))throw Error("invalid base64");return Uint8Array.fromBase64(e,{alphabet:t?"base64url":"base64",lastChunkHandling:"strict"})};r.base64=T?{encode:e=>(a(e),e.toBase64()),decode:e=>A(e,!1)}:h(S(6),f("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),g(6),p("")),r.base64nopad=h(S(6),f("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),p("")),r.base64url=T?{encode:e=>(a(e),e.toBase64({alphabet:"base64url"})),decode:e=>A(e,!0)}:h(S(6),f("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),g(6),p("")),r.base64urlnopad=h(S(6),f("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),p(""));let B=e=>h(E(58),f(e),p(""));r.base58=B("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),r.base58flickr=B("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),r.base58xrp=B("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");let I=[0,2,3,5,6,7,9,10,11];r.base58xmr={encode(e){let t="";for(let n=0;n<e.length;n+=8){let a=e.subarray(n,n+8);t+=r.base58.encode(a).padStart(I[a.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){let a=e.slice(n,n+11),i=I.indexOf(a.length),o=r.base58.decode(a);for(let e=0;e<o.length-i;e++)if(0!==o[e])throw Error("base58xmr: wrong padding");t=t.concat(Array.from(o.slice(o.length-i)))}return Uint8Array.from(t)}},r.createBase58check=e=>h(k(4,t=>e(e(t))),r.base58),r.base58check=r.createBase58check;let C=h(f("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),p("")),O=[0x3b6a57b2,0x26508e6d,0x1ea119fa,0x3d4233dd,0x2a1462b3];function P(e){let t=e>>25,r=(0x1ffffff&e)<<5;for(let e=0;e<O.length;e++)(t>>e&1)==1&&(r^=O[e]);return r}function N(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=e.length,a=1;for(let t=0;t<n;t++){let r=e.charCodeAt(t);if(r<33||r>126)throw Error("Invalid prefix (".concat(e,")"));a=P(a)^r>>5}a=P(a);for(let t=0;t<n;t++)a=P(a)^31&e.charCodeAt(t);for(let e of t)a=P(a)^e;for(let e=0;e<6;e++)a=P(a);return a^=r,C.encode(v([a%_[30]],30,5,!1))}function R(e){let t="bech32"===e?1:0x2bc830a3,r=S(5),a=r.decode,i=r.encode,o=x(a);function c(e,r){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:90;s("bech32.encode prefix",e),n(r)&&(r=Array.from(r)),d("bech32.encode",r);let i=e.length;if(0===i)throw TypeError("Invalid prefix length ".concat(i));let o=i+7+r.length;if(!1!==a&&o>a)throw TypeError("Length ".concat(o," exceeds limit ").concat(a));let c=e.toLowerCase(),l=N(c,r,t);return"".concat(c,"1").concat(C.encode(r)).concat(l)}function l(e){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:90;s("bech32.decode input",e);let n=e.length;if(n<8||!1!==r&&n>r)throw TypeError("invalid string length: ".concat(n," (").concat(e,"). Expected (8..").concat(r,")"));let a=e.toLowerCase();if(e!==a&&e!==e.toUpperCase())throw Error("String must be lowercase or uppercase");let i=a.lastIndexOf("1");if(0===i||-1===i)throw Error('Letter "1" must be present between prefix and data only');let o=a.slice(0,i),c=a.slice(i+1);if(c.length<6)throw Error("Data must be at least 6 characters long");let l=C.decode(c).slice(0,-6),u=N(o,l,t);if(!c.endsWith(u))throw Error("Invalid checksum in ".concat(e,': expected "').concat(u,'"'));return{prefix:o,words:l}}let u=x(l);return{encode:c,decode:l,encodeFromBytes:function(e,t){return c(e,i(t))},decodeToBytes:function(e){let{prefix:t,words:r}=l(e,!1);return{prefix:t,words:r,bytes:a(r)}},decodeUnsafe:u,fromWords:a,fromWordsUnsafe:o,toWords:i}}r.bech32=R("bech32"),r.bech32m=R("bech32m"),r.utf8={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},r.hex="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex?{encode:e=>(a(e),e.toHex()),decode:e=>(s("hex",e),Uint8Array.fromHex(e))}:h(S(4),f("0123456789abcdef"),p(""),m(e=>{if("string"!=typeof e||e.length%2!=0)throw TypeError("hex.decode: expected string, got ".concat(typeof e," with length ").concat(e.length));return e.toLowerCase()}));let D={utf8:r.utf8,hex:r.hex,base16:r.base16,base32:r.base32,base64:r.base64,base64url:r.base64url,base58:r.base58,base58xmr:r.base58xmr},L="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";r.bytesToString=(e,t)=>{if("string"!=typeof e||!D.hasOwnProperty(e))throw TypeError(L);if(!n(t))throw TypeError("bytesToString() expects Uint8Array");return D[e].encode(t)},r.str=r.bytesToString,r.stringToBytes=(e,t)=>{if(!D.hasOwnProperty(e))throw TypeError(L);if("string"!=typeof t)throw TypeError("stringToBytes() expects string");return D[e].decode(t)},r.bytes=r.stringToBytes},561676,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r._TEST=r.ZeroPad=r.magicBytes=r.flag=r.cstring=r.string=r.hex=r.bytes=r.bool=r.F64LE=r.F64BE=r.F32LE=r.F32BE=r.I8=r.U8=r.I16BE=r.I16LE=r.U16BE=r.U16LE=r.I32BE=r.I32LE=r.U32BE=r.U32LE=r.int=r.I64BE=r.I64LE=r.U64BE=r.U64LE=r.I128BE=r.I128LE=r.U128BE=r.U128LE=r.I256BE=r.I256LE=r.U256BE=r.U256LE=r.bigint=r.bits=r.coders=r.wrap=r.utils=r.NULL=r.EMPTY=void 0,r.validate=y,r.isCoder=w,r.prefix=function(e,t){if(!w(t))throw Error("prefix: invalid inner value ".concat(t));return T(k(e),_(t))},r.apply=T,r.lazy=function(e){if("function"!=typeof e)throw Error("lazy: expected function, got ".concat(typeof e));return(0,r.wrap)({encodeStream:(t,r)=>e().encodeStream(t,r),decodeStream:t=>e().decodeStream(t)})},r.flagged=function(e,t,n){if(!w(t))throw Error("flagged: invalid inner value ".concat(t));if("string"!=typeof e&&!w(t))throw Error("flagged: wrong path=".concat(e));return(0,r.wrap)({encodeStream:(r,a)=>{"string"==typeof e?d.resolve(r.stack,e)?t.encodeStream(r,a):n&&t.encodeStream(r,n):(e.encodeStream(r,!!a),a?t.encodeStream(r,a):n&&t.encodeStream(r,n))},decodeStream:r=>{if("string"==typeof e?!!d.resolve(r.stack,e):e.decodeStream(r))return t.decodeStream(r);n&&t.decodeStream(r)}})},r.optional=function(e,t,n){if(!w(e)||!w(t))throw Error("optional: invalid flag or inner value flag=".concat(e," inner=").concat(t));return(0,r.wrap)({size:void 0!==n&&e.size&&t.size?e.size+t.size:void 0,encodeStream:(r,a)=>{e.encodeStream(r,!!a),a?t.encodeStream(r,a):void 0!==n&&t.encodeStream(r,n)},decodeStream:r=>{if(e.decodeStream(r))return t.decodeStream(r);void 0!==n&&t.decodeStream(r)}})},r.magic=A,r.constant=function(e){return(0,r.wrap)({encodeStream:(t,r)=>{if(r!==e)throw Error("constant: invalid value ".concat(r," (exp: ").concat(e,")"))},decodeStream:t=>e})},r.struct=function(e){if(!s(e))throw Error("struct: expected plain object, got ".concat(e));for(let t in e)if(!w(e[t]))throw Error("struct: field ".concat(t," is not CoderType"));return(0,r.wrap)({size:B(Object.values(e)),encodeStream:(t,r)=>{t.pushObj(r,n=>{for(let a in e)n(a,()=>e[a].encodeStream(t,r[a]))})},decodeStream:t=>{let r={};return t.pushObj(r,n=>{for(let a in e)n(a,()=>r[a]=e[a].decodeStream(t))}),r},validate:e=>{if("object"!=typeof e||null===e)throw Error("struct: invalid value ".concat(e));return e}})},r.tuple=function(e){if(!Array.isArray(e))throw Error("Packed.Tuple: got ".concat(typeof e," instead of array"));for(let t=0;t<e.length;t++)if(!w(e[t]))throw Error("tuple: field ".concat(t," is not CoderType"));return(0,r.wrap)({size:B(e),encodeStream:(t,r)=>{if(!Array.isArray(r))throw t.err("tuple: invalid value ".concat(r));t.pushObj(r,n=>{for(let a=0;a<e.length;a++)n("".concat(a),()=>e[a].encodeStream(t,r[a]))})},decodeStream:t=>{let r=[];return t.pushObj(r,n=>{for(let a=0;a<e.length;a++)n("".concat(a),()=>r.push(e[a].decodeStream(t)))}),r},validate:t=>{if(!Array.isArray(t))throw Error("tuple: invalid value ".concat(t));if(t.length!==e.length)throw Error("tuple: wrong length=".concat(t.length,", expected ").concat(e.length));return t}})},r.array=function(e,t){if(!w(t))throw Error("array: invalid inner value ".concat(t));let n=l("string"==typeof e?"../".concat(e):e);return(0,r.wrap)({size:"number"==typeof e&&t.size?e*t.size:void 0,encodeStream:(r,o)=>{r.pushObj(o,s=>{i(e)||n.encodeStream(r,o.length);for(let n=0;n<o.length;n++)s("".concat(n),()=>{let s=o[n],c=r.pos;if(t.encodeStream(r,s),i(e)){if(e.length>r.pos-c)return;let t=r.finish(!1).subarray(c,r.pos);if(a(t.subarray(0,e.length),e))throw r.err("array: inner element encoding same as separator. elm=".concat(s," data=").concat(t))}})}),i(e)&&r.bytes(e)},decodeStream:r=>{let o=[];return r.pushObj(o,s=>{if(null===e)for(let e=0;!r.isEnd()&&(s("".concat(e),()=>o.push(t.decodeStream(r))),!t.size||!(r.leftBytes<t.size));e++);else if(i(e))for(let n=0;;n++){if(a(r.bytes(e.length,!0),e)){r.bytes(e.length);break}s("".concat(n),()=>o.push(t.decodeStream(r)))}else{let e;s("arrayLen",()=>e=n.decodeStream(r));for(let n=0;n<e;n++)s("".concat(n),()=>o.push(t.decodeStream(r)))}}),o},validate:e=>{if(!Array.isArray(e))throw Error("array: invalid value ".concat(e));return e}})},r.map=I,r.tag=C,r.mappedTag=function(e,t){if(!w(e))throw Error("mappedTag: invalid tag value ".concat(C));if(!s(t))throw Error("mappedTag: variants should be plain object");let r={},n={};for(let e in t){let a=t[e];r[e]=a[0],n[e]=a[1]}return C(I(e,r),n)},r.bitset=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("boolean"!=typeof t)throw Error("bitset/pad: expected boolean, got ".concat(typeof t));if(!Array.isArray(e))throw Error("bitset/names: expected array");for(let t of e)if("string"!=typeof t)throw Error("bitset/names: expected array of strings");return(0,r.wrap)({encodeStream:(r,n)=>{for(let t=0;t<e.length;t++)r.bits(+n[e[t]],1);t&&e.length%8&&r.bits(0,8-e.length%8)},decodeStream:r=>{let n={};for(let t=0;t<e.length;t++)n[e[t]]=!!r.bits(1);return t&&e.length%8&&r.bits(8-e.length%8),n},validate:e=>{if(!s(e))throw Error("bitset: invalid value ".concat(e));for(let t of Object.values(e))if("boolean"!=typeof t)throw Error("expected boolean");return e}})},r.padLeft=function(e,t,n){if(!c(e)||e<=0)throw Error("padLeft: wrong blockSize=".concat(e));if(!w(t))throw Error("padLeft: invalid inner value ".concat(t));if(void 0!==n&&"function"!=typeof n)throw Error("padLeft: wrong padFn=".concat(typeof n));let a=n||r.ZeroPad;if(!t.size)throw Error("padLeft cannot have dynamic size");return(0,r.wrap)({size:t.size+O(e,t.size),encodeStream:(r,n)=>{let i=O(e,t.size);for(let e=0;e<i;e++)r.byte(a(e));t.encodeStream(r,n)},decodeStream:r=>(r.bytes(O(e,t.size)),t.decodeStream(r))})},r.padRight=function(e,t,n){if(!w(t))throw Error("padRight: invalid inner value ".concat(t));if(!c(e)||e<=0)throw Error("padLeft: wrong blockSize=".concat(e));if(void 0!==n&&"function"!=typeof n)throw Error("padRight: wrong padFn=".concat(typeof n));let a=n||r.ZeroPad;return(0,r.wrap)({size:t.size?t.size+O(e,t.size):void 0,encodeStream:(r,n)=>{let i=r.pos;t.encodeStream(r,n);let o=O(e,r.pos-i);for(let e=0;e<o;e++)r.byte(a(e))},decodeStream:r=>{let n=r.pos,a=t.decodeStream(r);return r.bytes(O(e,r.pos-n)),a}})},r.pointer=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(!w(e))throw Error("pointer: invalid ptr value ".concat(e));if(!w(t))throw Error("pointer: invalid inner value ".concat(t));if("boolean"!=typeof n)throw Error("pointer/sized: expected boolean, got ".concat(typeof n));if(!e.size)throw Error("unsized pointer");return(0,r.wrap)({size:n?e.size:void 0,encodeStream:(r,n)=>{let a=r.pos;e.encodeStream(r,0),r.ptrs.push({pos:a,ptr:e,buffer:t.encode(n)})},decodeStream:r=>{let n=e.decodeStream(r);return r._enablePointers(),t.decodeStream(r.offsetReader(n))}})};let n=e.r(732557);function a(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function i(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}r.EMPTY=new Uint8Array,r.NULL=new Uint8Array([0]);let o=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function s(e){return"[object Object]"===Object.prototype.toString.call(e)}function c(e){return Number.isSafeInteger(e)}r.utils={equalBytes:a,isBytes:i,isCoder:w,checkBounds:g,concatBytes:function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];let n=0;for(let e=0;e<t.length;e++){let r=t[e];if(!i(r))throw Error("Uint8Array expected");n+=r.length}let a=new Uint8Array(n);for(let e=0,r=0;e<t.length;e++){let n=t[e];a.set(n,r),r+=n.length}return a},createView:o,isPlainObject:s};let l=e=>{if(null!==e&&"string"!=typeof e&&!w(e)&&!i(e)&&!c(e))throw Error("lengthCoder: expected null | number | Uint8Array | CoderType, got ".concat(e," (").concat(typeof e,")"));return{encodeStream(t,r){let n;if(null!==e){if(w(e))return e.encodeStream(t,r);if("number"==typeof e?n=e:"string"==typeof e&&(n=d.resolve(t.stack,e)),"bigint"==typeof n&&(n=Number(n)),void 0===n||n!==r)throw t.err("Wrong length: ".concat(n," len=").concat(e," exp=").concat(r," (").concat(typeof r,")"))}},decodeStream(t){let r;if(w(e)?r=Number(e.decodeStream(t)):"number"==typeof e?r=e:"string"==typeof e&&(r=d.resolve(t.stack,e)),"bigint"==typeof r&&(r=Number(r)),"number"!=typeof r)throw t.err("Wrong length: ".concat(r));return r}}},u={BITS:32,FULL_MASK:0xffffffff,len:e=>Math.ceil(e/32),create:e=>new Uint32Array(u.len(e)),clean:e=>e.fill(0),debug:e=>Array.from(e).map(e=>(e>>>0).toString(2).padStart(32,"0")),checkLen:(e,t)=>{if(u.len(t)!==e.length)throw Error("wrong length=".concat(e.length,". Expected: ").concat(u.len(t)))},chunkLen:(e,t,r)=>{if(t<0)throw Error("wrong pos=".concat(t));if(t+r>e)throw Error("wrong range=".concat(t,"/").concat(r," of ").concat(e))},set:function(e,t,r){let n=!(arguments.length>3)||void 0===arguments[3]||arguments[3];return(!!n||(e[t]&r)==0)&&(e[t]|=r,!0)},pos:(e,t)=>({chunk:Math.floor((e+t)/32),mask:1<<32-(e+t)%32-1}),indices:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];u.checkLen(e,t);let{FULL_MASK:n,BITS:a}=u,i=a-t%a,o=i?n>>>i<<i:n,s=[];for(let t=0;t<e.length;t++){let n=e[t];if(r&&(n=~n),t===e.length-1&&(n&=o),0!==n)for(let e=0;e<a;e++)n&1<<a-e-1&&s.push(t*a+e)}return s},range:e=>{let t,r=[];for(let n of e)void 0===t||n!==t.pos+t.length?r.push(t={pos:n,length:1}):t.length+=1;return r},rangeDebug:function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return"[".concat(u.range(u.indices(e,t,r)).map(e=>"(".concat(e.pos,"/").concat(e.length,")")).join(", "),"]")},setRange:function(e,t,r,n){let a=!(arguments.length>4)||void 0===arguments[4]||arguments[4];u.chunkLen(t,r,n);let{FULL_MASK:i,BITS:o}=u,s=r%o?Math.floor(r/o):void 0,c=r+n,l=c%o?Math.floor(c/o):void 0;if(void 0!==s&&s===l)return u.set(e,s,i>>>o-n<<o-n-r,a);if(void 0!==s&&!u.set(e,s,i>>>r%o,a))return!1;let d=void 0!==s?s+1:r/o,h=void 0!==l?l:c/o;for(let t=d;t<h;t++)if(!u.set(e,t,i,a))return!1;return void 0===l||s===l||!!u.set(e,l,i<<o-c%o,a)}},d={pushObj:(e,t,r)=>{let n={obj:t};e.push(n),r((e,t)=>{n.field=e,t(),n.field=void 0}),e.pop()},path:e=>{let t=[];for(let r of e)void 0!==r.field&&t.push(r.field);return t.join("/")},err:(e,t,r)=>{let n=Error("".concat(e,"(").concat(d.path(t),"): ").concat("string"==typeof r?r:r.message));return r instanceof Error&&r.stack&&(n.stack=r.stack),n},resolve:(e,t)=>{let r=t.split("/"),n=e.map(e=>e.obj),a=0;for(;a<r.length;a++)if(".."===r[a])n.pop();else break;let i=n.pop();for(;a<r.length;a++){if(!i||void 0===i[r[a]])return;i=i[r[a]]}return i}};class h{_enablePointers(){if(this.parent)return this.parent._enablePointers();this.bs||(this.bs=u.create(this.data.length),u.setRange(this.bs,this.data.length,0,this.pos,this.opts.allowMultipleReads))}markBytesBS(e,t){return this.parent?this.parent.markBytesBS(this.parentOffset+e,t):!t||!this.bs||u.setRange(this.bs,this.data.length,e,t,!1)}markBytes(e){let t=this.pos;this.pos+=e;let r=this.markBytesBS(t,e);if(!this.opts.allowMultipleReads&&!r)throw this.err("multiple read pos=".concat(this.pos," len=").concat(e));return r}pushObj(e,t){return d.pushObj(this.stack,e,t)}readView(e,t){if(!Number.isFinite(e))throw this.err("readView: wrong length=".concat(e));if(this.pos+e>this.data.length)throw this.err("readView: Unexpected end of buffer");let r=t(this.view,this.pos);return this.markBytes(e),r}absBytes(e){if(e>this.data.length)throw Error("Unexpected end of buffer");return this.data.subarray(e)}finish(){if(!this.opts.allowUnreadBytes){if(this.bitPos)throw this.err("".concat(this.bitPos," bits left after unpack: ").concat(n.hex.encode(this.data.slice(this.pos))));if(this.bs&&!this.parent){let e=u.indices(this.bs,this.data.length,!0);if(!e.length)return;{let t=u.range(e).map(e=>{let{pos:t,length:r}=e;return"(".concat(t,"/").concat(r,")[").concat(n.hex.encode(this.data.subarray(t,t+r)),"]")}).join(", ");throw this.err("unread byte ranges: ".concat(t," (total=").concat(this.data.length,")"))}}if(!this.isEnd())throw this.err("".concat(this.leftBytes," bytes ").concat(this.bitPos," bits left after unpack: ").concat(n.hex.encode(this.data.slice(this.pos))))}}err(e){return d.err("Reader",this.stack,e)}offsetReader(e){if(e>this.data.length)throw this.err("offsetReader: Unexpected end of buffer");return new h(this.absBytes(e),this.opts,this.stack,this,e)}bytes(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(this.bitPos)throw this.err("readBytes: bitPos not empty");if(!Number.isFinite(e))throw this.err("readBytes: wrong length=".concat(e));if(this.pos+e>this.data.length)throw this.err("readBytes: Unexpected end of buffer");let r=this.data.subarray(this.pos,this.pos+e);return t||this.markBytes(e),r}byte(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];if(this.bitPos)throw this.err("readByte: bitPos not empty");if(this.pos+1>this.data.length)throw this.err("readBytes: Unexpected end of buffer");let t=this.data[this.pos];return e||this.markBytes(1),t}get leftBytes(){return this.data.length-this.pos}get totalBytes(){return this.data.length}isEnd(){return this.pos>=this.data.length&&!this.bitPos}bits(e){if(e>32)throw this.err("BitReader: cannot read more than 32 bits in single call");let t=0;for(;e;){this.bitPos||(this.bitBuf=this.byte(),this.bitPos=8);let r=Math.min(e,this.bitPos);this.bitPos-=r,t=t<<r|this.bitBuf>>this.bitPos&2**r-1,this.bitBuf&=2**this.bitPos-1,e-=r}return t>>>0}find(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.pos;if(!i(e))throw this.err("find: needle is not bytes! ".concat(e));if(this.bitPos)throw this.err("findByte: bitPos not empty");if(!e.length)throw this.err("find: needle is empty");for(let r=t;-1!==(r=this.data.indexOf(e[0],r))&&-1!==r&&!(this.data.length-r<e.length);r++)if(a(e,this.data.subarray(r,r+e.length)))return r}constructor(e,t={},r=[],n,a=0){this.pos=0,this.bitBuf=0,this.bitPos=0,this.data=e,this.opts=t,this.stack=r,this.parent=n,this.parentOffset=a,this.view=o(e)}}class f{pushObj(e,t){return d.pushObj(this.stack,e,t)}writeView(e,t){if(this.finished)throw this.err("buffer: finished");if(!c(e)||e>8)throw Error("wrong writeView length=".concat(e));t(this.view),this.bytes(this.viewBuf.slice(0,e)),this.viewBuf.fill(0)}err(e){if(this.finished)throw this.err("buffer: finished");return d.err("Reader",this.stack,e)}bytes(e){if(this.finished)throw this.err("buffer: finished");if(this.bitPos)throw this.err("writeBytes: ends with non-empty bit buffer");this.buffers.push(e),this.pos+=e.length}byte(e){if(this.finished)throw this.err("buffer: finished");if(this.bitPos)throw this.err("writeByte: ends with non-empty bit buffer");this.buffers.push(new Uint8Array([e])),this.pos++}finish(){let e=!(arguments.length>0)||void 0===arguments[0]||arguments[0];if(this.finished)throw this.err("buffer: finished");if(this.bitPos)throw this.err("buffer: ends with non-empty bit buffer");let t=this.buffers.concat(this.ptrs.map(e=>e.buffer)),r=new Uint8Array(t.map(e=>e.length).reduce((e,t)=>e+t,0));for(let e=0,n=0;e<t.length;e++){let a=t[e];r.set(a,n),n+=a.length}for(let e=this.pos,t=0;t<this.ptrs.length;t++){let n=this.ptrs[t];r.set(n.ptr.encode(e),n.pos),e+=n.buffer.length}if(e){for(let e of(this.buffers=[],this.ptrs))e.buffer.fill(0);this.ptrs=[],this.finished=!0,this.bitBuf=0}return r}bits(e,t){if(t>32)throw this.err("writeBits: cannot write more than 32 bits in single call");if(e>=2**t)throw this.err("writeBits: value (".concat(e,") >= 2**bits (").concat(t,")"));for(;t;){let r=Math.min(t,8-this.bitPos);this.bitBuf=this.bitBuf<<r|e>>t-r,this.bitPos+=r,t-=r,e&=2**t-1,8===this.bitPos&&(this.bitPos=0,this.buffers.push(new Uint8Array([this.bitBuf])),this.pos++)}}constructor(e=[]){this.pos=0,this.buffers=[],this.ptrs=[],this.bitBuf=0,this.bitPos=0,this.viewBuf=new Uint8Array(8),this.finished=!1,this.stack=e,this.view=o(this.viewBuf)}}let p=e=>Uint8Array.from(e).reverse();function g(e,t,r){if(r){let r=2n**(t-1n);if(e<-r||e>=r)throw Error("value out of signed bounds. Expected ".concat(-r," <= ").concat(e," < ").concat(r))}else if(0n>e||e>=2n**t)throw Error("value out of unsigned bounds. Expected 0 <= ".concat(e," < ").concat(2n**t))}function m(e){return{encodeStream:e.encodeStream,decodeStream:e.decodeStream,size:e.size,encode:t=>{let r=new f;return e.encodeStream(r,t),r.finish()},decode:function(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=new h(t,r),a=e.decodeStream(n);return n.finish(),a}}}function y(e,t){if(!w(e))throw Error("validate: invalid inner value ".concat(e));if("function"!=typeof t)throw Error("validate: fn should be function");return m({size:e.size,encodeStream:(r,n)=>{let a;try{a=t(n)}catch(e){throw r.err(e)}e.encodeStream(r,a)},decodeStream:r=>{let n=e.decodeStream(r);try{return t(n)}catch(e){throw r.err(e)}}})}r.wrap=e=>{let t=m(e);return e.validate?y(t,e.validate):t};let b=e=>s(e)&&"function"==typeof e.decode&&"function"==typeof e.encode;function w(e){return s(e)&&b(e)&&"function"==typeof e.encodeStream&&"function"==typeof e.decodeStream&&(void 0===e.size||c(e.size))}let _=e=>{if(!b(e))throw Error("BaseCoder expected");return{encode:e.decode,decode:e.encode}};r.coders={dict:function(){return{encode:e=>{if(!Array.isArray(e))throw Error("array expected");let t={};for(let r of e){if(!Array.isArray(r)||2!==r.length)throw Error("array of two elements expected");let e=r[0],n=r[1];if(void 0!==t[e])throw Error("key(".concat(e,") appears twice in struct"));t[e]=n}return t},decode:e=>{if(!s(e))throw Error("expected plain object, got ".concat(e));return Object.entries(e)}}},numberBigint:{encode:e=>{if("bigint"!=typeof e)throw Error("expected bigint, got ".concat(typeof e));if(e>BigInt(Number.MAX_SAFE_INTEGER))throw Error("element bigger than MAX_SAFE_INTEGER=".concat(e));return Number(e)},decode:e=>{if(!c(e))throw Error("element is not a safe integer");return BigInt(e)}},tsEnum:function(e){if(!s(e))throw Error("plain object expected");return{encode:t=>{if(!c(t)||!(t in e))throw Error("wrong value ".concat(t));return e[t]},decode:t=>{if("string"!=typeof t)throw Error("wrong value ".concat(typeof t));return e[t]}}},decimal:function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!c(e))throw Error("decimal/precision: wrong value ".concat(e));if("boolean"!=typeof t)throw Error("decimal/round: expected boolean, got ".concat(typeof t));let r=10n**BigInt(e);return{encode:t=>{if("bigint"!=typeof t)throw Error("expected bigint, got ".concat(typeof t));let r=(t<0n?-t:t).toString(10),n=r.length-e;n<0&&(r=r.padStart(r.length-n,"0"),n=0);let a=r.length-1;for(;a>=n&&"0"===r[a];a--);let i=r.slice(0,n),o=r.slice(n,a+1);return(i||(i="0"),t<0n&&(i="-"+i),o)?"".concat(i,".").concat(o):i},decode:n=>{if("string"!=typeof n)throw Error("expected string, got ".concat(typeof n));if("-0"===n)throw Error("negative zero is not allowed");let a=!1;if(n.startsWith("-")&&(a=!0,n=n.slice(1)),!/^(0|[1-9]\d*)(\.\d+)?$/.test(n))throw Error("wrong string value=".concat(n));let i=n.indexOf(".");i=-1===i?n.length:i;let o=n.slice(0,i),s=n.slice(i+1).replace(/0+$/,""),c=BigInt(o)*r;if(!t&&s.length>e)throw Error("fractional part cannot be represented with this precision (num=".concat(n,", prec=").concat(e,")"));let l=Math.min(s.length,e),u=c+BigInt(s.slice(0,l))*10n**BigInt(e-l);return a?-u:u}}},match:function(e){if(!Array.isArray(e))throw Error("expected array, got ".concat(typeof e));for(let t of e)if(!b(t))throw Error("wrong base coder ".concat(t));return{encode:t=>{for(let r of e){let e=r.encode(t);if(void 0!==e)return e}throw Error("match/encode: cannot find match in ".concat(t))},decode:t=>{for(let r of e){let e=r.decode(t);if(void 0!==e)return e}throw Error("match/decode: cannot find match in ".concat(t))}}},reverse:_},r.bits=e=>{if(!c(e))throw Error("bits: wrong length ".concat(e," (").concat(typeof e,")"));return(0,r.wrap)({encodeStream:(t,r)=>t.bits(r,e),decodeStream:t=>t.bits(e),validate:e=>{if(!c(e))throw Error("bits: wrong value ".concat(e));return e}})},r.bigint=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!(arguments.length>3)||void 0===arguments[3]||arguments[3];if(!c(e))throw Error("bigint/size: wrong value ".concat(e));if("boolean"!=typeof t)throw Error("bigint/le: expected boolean, got ".concat(typeof t));if("boolean"!=typeof n)throw Error("bigint/signed: expected boolean, got ".concat(typeof n));if("boolean"!=typeof a)throw Error("bigint/sized: expected boolean, got ".concat(typeof a));let i=BigInt(e),o=2n**(8n*i-1n);return(0,r.wrap)({size:a?e:void 0,encodeStream:(r,i)=>{n&&i<0&&(i|=o);let s=[];for(let t=0;t<e;t++)s.push(Number(255n&i)),i>>=8n;let c=new Uint8Array(s).reverse();if(!a){let e=0;for(e=0;e<c.length&&0===c[e];e++);c=c.subarray(e)}r.bytes(t?c.reverse():c)},decodeStream:r=>{let i=r.bytes(a?e:Math.min(e,r.leftBytes)),s=t?i:p(i),c=0n;for(let e=0;e<s.length;e++)c|=BigInt(s[e])<<8n*BigInt(e);return n&&c&o&&(c=(c^o)-o),c},validate:e=>{if("bigint"!=typeof e)throw Error("bigint: invalid value: ".concat(e));return g(e,8n*i,!!n),e}})},r.U256LE=(0,r.bigint)(32,!0),r.U256BE=(0,r.bigint)(32,!1),r.I256LE=(0,r.bigint)(32,!0,!0),r.I256BE=(0,r.bigint)(32,!1,!0),r.U128LE=(0,r.bigint)(16,!0),r.U128BE=(0,r.bigint)(16,!1),r.I128LE=(0,r.bigint)(16,!0,!0),r.I128BE=(0,r.bigint)(16,!1,!0),r.U64LE=(0,r.bigint)(8,!0),r.U64BE=(0,r.bigint)(8,!1),r.I64LE=(0,r.bigint)(8,!0,!0),r.I64BE=(0,r.bigint)(8,!1,!0),r.int=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=!(arguments.length>3)||void 0===arguments[3]||arguments[3];if(!c(e))throw Error("int/size: wrong value ".concat(e));if("boolean"!=typeof t)throw Error("int/le: expected boolean, got ".concat(typeof t));if("boolean"!=typeof n)throw Error("int/signed: expected boolean, got ".concat(typeof n));if("boolean"!=typeof a)throw Error("int/sized: expected boolean, got ".concat(typeof a));if(e>6)throw Error("int supports size up to 6 bytes (48 bits): use bigints instead");return T((0,r.bigint)(e,t,n,a),r.coders.numberBigint)};let v=(e,t)=>(0,r.wrap)({size:e,encodeStream:(r,n)=>r.writeView(e,e=>t.write(e,n)),decodeStream:r=>r.readView(e,t.read),validate:e=>{if("number"!=typeof e)throw Error("viewCoder: expected number, got ".concat(typeof e));return t.validate&&t.validate(e),e}}),E=(e,t,r)=>{let n=8*e,a=2**(n-1),i=2**n;return v(e,{write:r.write,read:r.read,validate:t?e=>{if(!c(e))throw Error("sintView: value is not safe integer: ".concat(e));if(e<-a||e>=a)throw Error("sintView: value out of bounds. Expected ".concat(-a," <= ").concat(e," < ").concat(a))}:e=>{if(!c(e))throw Error("uintView: value is not safe integer: ".concat(e));if(0>e||e>=i)throw Error("uintView: value out of bounds. Expected 0 <= ".concat(e," < ").concat(i))}})};r.U32LE=E(4,!1,{read:(e,t)=>e.getUint32(t,!0),write:(e,t)=>e.setUint32(0,t,!0)}),r.U32BE=E(4,!1,{read:(e,t)=>e.getUint32(t,!1),write:(e,t)=>e.setUint32(0,t,!1)}),r.I32LE=E(4,!0,{read:(e,t)=>e.getInt32(t,!0),write:(e,t)=>e.setInt32(0,t,!0)}),r.I32BE=E(4,!0,{read:(e,t)=>e.getInt32(t,!1),write:(e,t)=>e.setInt32(0,t,!1)}),r.U16LE=E(2,!1,{read:(e,t)=>e.getUint16(t,!0),write:(e,t)=>e.setUint16(0,t,!0)}),r.U16BE=E(2,!1,{read:(e,t)=>e.getUint16(t,!1),write:(e,t)=>e.setUint16(0,t,!1)}),r.I16LE=E(2,!0,{read:(e,t)=>e.getInt16(t,!0),write:(e,t)=>e.setInt16(0,t,!0)}),r.I16BE=E(2,!0,{read:(e,t)=>e.getInt16(t,!1),write:(e,t)=>e.setInt16(0,t,!1)}),r.U8=E(1,!1,{read:(e,t)=>e.getUint8(t),write:(e,t)=>e.setUint8(0,t)}),r.I8=E(1,!0,{read:(e,t)=>e.getInt8(t),write:(e,t)=>e.setInt8(0,t)});let S=e=>v(4,{read:(t,r)=>t.getFloat32(r,e),write:(t,r)=>t.setFloat32(0,r,e),validate:e=>{if(Math.fround(e)!==e&&!Number.isNaN(e))throw Error("f32: wrong value=".concat(e))}}),x=e=>v(8,{read:(t,r)=>t.getFloat64(r,e),write:(t,r)=>t.setFloat64(0,r,e)});r.F32BE=S(!1),r.F32LE=S(!0),r.F64BE=x(!1),r.F64LE=x(!0),r.bool=(0,r.wrap)({size:1,encodeStream:(e,t)=>e.byte(+!!t),decodeStream:e=>{let t=e.byte();if(0!==t&&1!==t)throw e.err("bool: invalid value ".concat(t));return 1===t},validate:e=>{if("boolean"!=typeof e)throw Error("bool: invalid value ".concat(e));return e}});let k=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if("boolean"!=typeof t)throw Error("bytes/le: expected boolean, got ".concat(typeof t));let n=l(e),a=i(e);return(0,r.wrap)({size:"number"==typeof e?e:void 0,encodeStream:(r,i)=>{a||n.encodeStream(r,i.length),r.bytes(t?p(i):i),a&&r.bytes(e)},decodeStream:r=>{let i;if(a){let t=r.find(e);if(!t)throw r.err("bytes: cannot find terminator");i=r.bytes(t-r.pos),r.bytes(e.length)}else i=r.bytes(null===e?r.leftBytes:n.decodeStream(r));return t?p(i):i},validate:e=>{if(!i(e))throw Error("bytes: invalid value ".concat(e));return e}})};function T(e,t){if(!w(e))throw Error("apply: invalid inner value ".concat(e));if(!b(t))throw Error("apply: invalid base value ".concat(e));return(0,r.wrap)({size:e.size,encodeStream:(r,n)=>{let a;try{a=t.decode(n)}catch(e){throw r.err(""+e)}return e.encodeStream(r,a)},decodeStream:r=>{let n=e.decodeStream(r);try{return t.encode(n)}catch(e){throw r.err(""+e)}}})}function A(e,t){let n=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if(!w(e))throw Error("magic: invalid inner value ".concat(e));if("boolean"!=typeof n)throw Error("magic: expected boolean, got ".concat(typeof n));return(0,r.wrap)({size:e.size,encodeStream:(r,n)=>e.encodeStream(r,t),decodeStream:r=>{let o=e.decodeStream(r);if(n&&"object"!=typeof o&&o!==t||i(t)&&!a(t,o))throw r.err("magic: invalid value: ".concat(o," !== ").concat(t))},validate:e=>{if(void 0!==e)throw Error("magic: wrong value=".concat(typeof e));return e}})}function B(e){let t=0;for(let r of e){if(void 0===r.size)return;if(!c(r.size))throw Error("sizeof: wrong element size=".concat(t));t+=r.size}return t}function I(e,t){if(!w(e))throw Error("map: invalid inner value ".concat(e));if(!s(t))throw Error("map: variants should be plain object");let n=new Map;for(let e in t)n.set(t[e],e);return(0,r.wrap)({size:e.size,encodeStream:(r,n)=>e.encodeStream(r,t[n]),decodeStream:t=>{let r=e.decodeStream(t),a=n.get(r);if(void 0===a)throw t.err("Enum: unknown value: ".concat(r," ").concat(Array.from(n.keys())));return a},validate:e=>{if("string"!=typeof e)throw Error("map: invalid value ".concat(e));if(!(e in t))throw Error("Map: unknown variant: ".concat(e));return e}})}function C(e,t){if(!w(e))throw Error("tag: invalid tag value ".concat(e));if(!s(t))throw Error("tag: variants should be plain object");for(let e in t)if(!w(t[e]))throw Error("tag: variant ".concat(e," is not CoderType"));return(0,r.wrap)({size:e.size,encodeStream:(r,n)=>{let{TAG:a,data:i}=n,o=t[a];e.encodeStream(r,a),o.encodeStream(r,i)},decodeStream:r=>{let n=e.decodeStream(r),a=t[n];if(!a)throw r.err("Tag: invalid tag ".concat(n));return{TAG:n,data:a.decodeStream(r)}},validate:e=>{let{TAG:r}=e;if(!t[r])throw Error("Tag: invalid tag ".concat(r.toString()));return e}})}function O(e,t){return t%e==0?0:e-t%e}r.bytes=k,r.string=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return y(T(k(e,t),n.utf8),e=>{if("string"!=typeof e)throw Error("expected string, got ".concat(typeof e));return e})},r.cstring=(0,r.string)(r.NULL),r.hex=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{isLE:!1,with0x:!1},r=T(k(e,t.isLE),n.hex),a=t.with0x;if("boolean"!=typeof a)throw Error("hex/with0x: expected boolean, got ".concat(typeof a));return a&&(r=T(r,{encode:e=>"0x".concat(e),decode:e=>{if(!e.startsWith("0x"))throw Error("hex(with0x=true).encode input should start with 0x");return e.slice(2)}})),r},r.flag=function(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!i(e))throw Error("flag/flagValue: expected Uint8Array, got ".concat(typeof e));if("boolean"!=typeof t)throw Error("flag/xor: expected boolean, got ".concat(typeof t));return(0,r.wrap)({size:e.length,encodeStream:(r,n)=>{!!n!==t&&r.bytes(e)},decodeStream:r=>{let n=r.leftBytes>=e.length;return n&&(n=a(r.bytes(e.length,!0),e))&&r.bytes(e.length),n!==t},validate:e=>{if(void 0!==e&&"boolean"!=typeof e)throw Error("flag: expected boolean value or undefined, got ".concat(typeof e));return e}})},r.magicBytes=e=>{let t="string"==typeof e?n.utf8.decode(e):e;return A(k(t.length),t)},r.ZeroPad=e=>0,r._TEST={_bitset:u,_Reader:h,_Writer:f,Path:d}},446598,(e,t,r)=>{"use strict";var n;Object.defineProperty(r,"__esModule",{value:!0}),r.TEST_NETWORK=r.NETWORK=r.TAPROOT_UNSPENDABLE_KEY=r.PubT=r.tagSchnorr=r.signSchnorr=r.pubECDSA=r.pubSchnorr=r.randomPrivateKeyBytes=r.sha256x2=r.hash160=r.sha256=r.isBytes=r.equalBytes=r.concatBytes=void 0,r.signECDSA=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=a.secp256k1.sign(e,t);if(r&&!h(n)){let r=new Uint8Array(32),i=0;for(;!h(n);)if(r.set(s.U32LE.encode(i++)),n=a.secp256k1.sign(e,t,{extraEntropy:r}),i>0xffffffff)throw Error("lowR counter overflow: report the error")}return n.toDERRawBytes()},r.validatePubkey=function(e,t){let r=e.length;if(t===n.ecdsa){if(32===r)throw Error("Expected non-Schnorr key");return c.fromHex(e),e}if(t===n.schnorr){if(32!==r)throw Error("Expected 32-byte Schnorr key");return a.schnorr.utils.lift_x(a.schnorr.utils.bytesToNumberBE(e)),e}throw Error("Unknown key type")},r.tapTweak=f,r.taprootTweakPrivKey=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:new Uint8Array,r=a.schnorr.utils,n=r.bytesToNumberBE(e),i=c.fromPrivateKey(n),o=i.hasEvenY()?n:r.mod(-n,l),s=f(r.pointToBytes(i),t);return r.numberToBytesBE(r.mod(o+s,l),32)},r.taprootTweakPubkey=function(e,t){let r=a.schnorr.utils,n=f(e,t),i=r.lift_x(r.bytesToNumberBE(e)).add(c.fromPrivateKey(n)),o=+!i.hasEvenY();return[r.pointToBytes(i),o]},r.compareBytes=function(e,t){if(!u(e)||!u(t))throw Error("cmp: wrong type a=".concat(typeof e," b=").concat(typeof t));let r=Math.min(e.length,t.length);for(let n=0;n<r;n++)if(e[n]!=t[n])return Math.sign(e[n]-t[n]);return Math.sign(e.length-t.length)};let a=e.r(540281),i=e.r(313458),o=e.r(703088);Object.defineProperty(r,"sha256",{enumerable:!0,get:function(){return o.sha256}});let s=e.r(561676),c=a.secp256k1.ProjectivePoint,l=a.secp256k1.CURVE.n,u=s.utils.isBytes;r.isBytes=u;let d=s.utils.concatBytes;r.concatBytes=d,r.equalBytes=s.utils.equalBytes,r.hash160=e=>(0,i.ripemd160)((0,o.sha256)(e)),r.sha256x2=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,o.sha256)((0,o.sha256)(d(...t)))},r.randomPrivateKeyBytes=a.schnorr.utils.randomPrivateKey,r.pubSchnorr=a.schnorr.getPublicKey,r.pubECDSA=a.secp256k1.getPublicKey;let h=e=>e.r<l/2n;function f(e,t){let r=a.schnorr.utils,n=r.taggedHash("TapTweak",e,t),i=r.bytesToNumberBE(n);if(i>=l)throw Error("tweak higher than curve order");return i}r.signSchnorr=a.schnorr.sign,r.tagSchnorr=a.schnorr.utils.taggedHash,function(e){e[e.ecdsa=0]="ecdsa",e[e.schnorr=1]="schnorr"}(n||(r.PubT=n={})),r.TAPROOT_UNSPENDABLE_KEY=(0,o.sha256)(c.BASE.toRawBytes(!1)),r.NETWORK={bech32:"bc",pubKeyHash:0,scriptHash:5,wif:128},r.TEST_NETWORK={bech32:"tb",pubKeyHash:111,scriptHash:196,wif:239}},716004,(e,t,r)=>{"use strict";var n;Object.defineProperty(r,"__esModule",{value:!0}),r.RawOldTx=r.RawTx=r.RawOutput=r.RawInput=r.BTCArray=r.RawWitness=r.VarBytes=r.CompactSizeLen=r.CompactSize=r.Script=r.OP=r.MAX_SCRIPT_BYTE_LENGTH=void 0,r.ScriptNum=o,r.OpToNum=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:4,r=!(arguments.length>2)||void 0===arguments[2]||arguments[2];if("number"==typeof e)return e;if((0,i.isBytes)(e))try{let n=o(t,r).decode(e);if(n>Number.MAX_SAFE_INTEGER)return;return Number(n)}catch(e){}};let a=e.r(561676),i=e.r(446598);function o(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return a.wrap({encodeStream:(e,t)=>{if(0n===t)return;let r=t<0,n=BigInt(t),a=[];for(let e=r?-n:n;e;e>>=8n)a.push(Number(255n&e));a[a.length-1]>=128?a.push(128*!!r):r&&(a[a.length-1]|=128),e.bytes(new Uint8Array(a))},decodeStream:r=>{let n=r.leftBytes;if(n>e)throw Error("ScriptNum: number (".concat(n,") bigger than limit=").concat(e));if(0===n)return 0n;if(t){let e=r.bytes(n,!0);if((127&e[e.length-1])==0&&(n<=1||(128&e[e.length-2])==0))throw Error("Non-minimally encoded ScriptNum")}let a=0,i=0n;for(let e=0;e<n;++e)i|=BigInt(a=r.byte())<<8n*BigInt(e);return a>=128&&(i&=2n**BigInt(8*n)-1n>>1n,i=-i),i}})}r.MAX_SCRIPT_BYTE_LENGTH=520,function(e){e[e.OP_0=0]="OP_0",e[e.PUSHDATA1=76]="PUSHDATA1",e[e.PUSHDATA2=77]="PUSHDATA2",e[e.PUSHDATA4=78]="PUSHDATA4",e[e["1NEGATE"]=79]="1NEGATE",e[e.RESERVED=80]="RESERVED",e[e.OP_1=81]="OP_1",e[e.OP_2=82]="OP_2",e[e.OP_3=83]="OP_3",e[e.OP_4=84]="OP_4",e[e.OP_5=85]="OP_5",e[e.OP_6=86]="OP_6",e[e.OP_7=87]="OP_7",e[e.OP_8=88]="OP_8",e[e.OP_9=89]="OP_9",e[e.OP_10=90]="OP_10",e[e.OP_11=91]="OP_11",e[e.OP_12=92]="OP_12",e[e.OP_13=93]="OP_13",e[e.OP_14=94]="OP_14",e[e.OP_15=95]="OP_15",e[e.OP_16=96]="OP_16",e[e.NOP=97]="NOP",e[e.VER=98]="VER",e[e.IF=99]="IF",e[e.NOTIF=100]="NOTIF",e[e.VERIF=101]="VERIF",e[e.VERNOTIF=102]="VERNOTIF",e[e.ELSE=103]="ELSE",e[e.ENDIF=104]="ENDIF",e[e.VERIFY=105]="VERIFY",e[e.RETURN=106]="RETURN",e[e.TOALTSTACK=107]="TOALTSTACK",e[e.FROMALTSTACK=108]="FROMALTSTACK",e[e["2DROP"]=109]="2DROP",e[e["2DUP"]=110]="2DUP",e[e["3DUP"]=111]="3DUP",e[e["2OVER"]=112]="2OVER",e[e["2ROT"]=113]="2ROT",e[e["2SWAP"]=114]="2SWAP",e[e.IFDUP=115]="IFDUP",e[e.DEPTH=116]="DEPTH",e[e.DROP=117]="DROP",e[e.DUP=118]="DUP",e[e.NIP=119]="NIP",e[e.OVER=120]="OVER",e[e.PICK=121]="PICK",e[e.ROLL=122]="ROLL",e[e.ROT=123]="ROT",e[e.SWAP=124]="SWAP",e[e.TUCK=125]="TUCK",e[e.CAT=126]="CAT",e[e.SUBSTR=127]="SUBSTR",e[e.LEFT=128]="LEFT",e[e.RIGHT=129]="RIGHT",e[e.SIZE=130]="SIZE",e[e.INVERT=131]="INVERT",e[e.AND=132]="AND",e[e.OR=133]="OR",e[e.XOR=134]="XOR",e[e.EQUAL=135]="EQUAL",e[e.EQUALVERIFY=136]="EQUALVERIFY",e[e.RESERVED1=137]="RESERVED1",e[e.RESERVED2=138]="RESERVED2",e[e["1ADD"]=139]="1ADD",e[e["1SUB"]=140]="1SUB",e[e["2MUL"]=141]="2MUL",e[e["2DIV"]=142]="2DIV",e[e.NEGATE=143]="NEGATE",e[e.ABS=144]="ABS",e[e.NOT=145]="NOT",e[e["0NOTEQUAL"]=146]="0NOTEQUAL",e[e.ADD=147]="ADD",e[e.SUB=148]="SUB",e[e.MUL=149]="MUL",e[e.DIV=150]="DIV",e[e.MOD=151]="MOD",e[e.LSHIFT=152]="LSHIFT",e[e.RSHIFT=153]="RSHIFT",e[e.BOOLAND=154]="BOOLAND",e[e.BOOLOR=155]="BOOLOR",e[e.NUMEQUAL=156]="NUMEQUAL",e[e.NUMEQUALVERIFY=157]="NUMEQUALVERIFY",e[e.NUMNOTEQUAL=158]="NUMNOTEQUAL",e[e.LESSTHAN=159]="LESSTHAN",e[e.GREATERTHAN=160]="GREATERTHAN",e[e.LESSTHANOREQUAL=161]="LESSTHANOREQUAL",e[e.GREATERTHANOREQUAL=162]="GREATERTHANOREQUAL",e[e.MIN=163]="MIN",e[e.MAX=164]="MAX",e[e.WITHIN=165]="WITHIN",e[e.RIPEMD160=166]="RIPEMD160",e[e.SHA1=167]="SHA1",e[e.SHA256=168]="SHA256",e[e.HASH160=169]="HASH160",e[e.HASH256=170]="HASH256",e[e.CODESEPARATOR=171]="CODESEPARATOR",e[e.CHECKSIG=172]="CHECKSIG",e[e.CHECKSIGVERIFY=173]="CHECKSIGVERIFY",e[e.CHECKMULTISIG=174]="CHECKMULTISIG",e[e.CHECKMULTISIGVERIFY=175]="CHECKMULTISIGVERIFY",e[e.NOP1=176]="NOP1",e[e.CHECKLOCKTIMEVERIFY=177]="CHECKLOCKTIMEVERIFY",e[e.CHECKSEQUENCEVERIFY=178]="CHECKSEQUENCEVERIFY",e[e.NOP4=179]="NOP4",e[e.NOP5=180]="NOP5",e[e.NOP6=181]="NOP6",e[e.NOP7=182]="NOP7",e[e.NOP8=183]="NOP8",e[e.NOP9=184]="NOP9",e[e.NOP10=185]="NOP10",e[e.CHECKSIGADD=186]="CHECKSIGADD",e[e.INVALID=255]="INVALID"}(n||(r.OP=n={})),r.Script=a.wrap({encodeStream:(e,t)=>{for(let r of t){if("string"==typeof r){if(void 0===n[r])throw Error("Unknown opcode=".concat(r));e.byte(n[r]);continue}if("number"==typeof r){if(0===r){e.byte(0);continue}else if(1<=r&&r<=16){e.byte(n.OP_1-1+r);continue}}if("number"==typeof r&&(r=o().encode(BigInt(r))),!(0,i.isBytes)(r))throw Error("Wrong Script OP=".concat(r," (").concat(typeof r,")"));let t=r.length;t<n.PUSHDATA1?e.byte(t):t<=255?(e.byte(n.PUSHDATA1),e.byte(t)):t<=65535?(e.byte(n.PUSHDATA2),e.bytes(a.U16LE.encode(t))):(e.byte(n.PUSHDATA4),e.bytes(a.U32LE.encode(t))),e.bytes(r)}},decodeStream:e=>{let t=[];for(;!e.isEnd();){let r=e.byte();if(n.OP_0<r&&r<=n.PUSHDATA4){let i;if(r<n.PUSHDATA1)i=r;else if(r===n.PUSHDATA1)i=a.U8.decodeStream(e);else if(r===n.PUSHDATA2)i=a.U16LE.decodeStream(e);else if(r===n.PUSHDATA4)i=a.U32LE.decodeStream(e);else throw Error("Should be not possible");t.push(e.bytes(i))}else if(0===r)t.push(0);else if(n.OP_1<=r&&r<=n.OP_16)t.push(r-(n.OP_1-1));else{let e=n[r];if(void 0===e)throw Error("Unknown opcode=".concat(r.toString(16)));t.push(e)}}return t}});let s={253:[253,2,253n,65535n],254:[254,4,65536n,4294967295n],255:[255,8,4294967296n,0xffffffffffffffffn]};r.CompactSize=a.wrap({encodeStream:(e,t)=>{if("number"==typeof t&&(t=BigInt(t)),0n<=t&&t<=252n)return e.byte(Number(t));for(let[r,n,a,i]of Object.values(s))if(!(a>t)&&!(t>i)){e.byte(r);for(let r=0;r<n;r++)e.byte(Number(t>>8n*BigInt(r)&255n));return}throw e.err("VarInt too big: ".concat(t))},decodeStream:e=>{let t=e.byte();if(t<=252)return BigInt(t);let[r,n,a]=s[t],i=0n;for(let t=0;t<n;t++)i|=BigInt(e.byte())<<8n*BigInt(t);if(i<a)throw e.err("Wrong CompactSize(".concat(8*n,")"));return i}}),r.CompactSizeLen=a.apply(r.CompactSize,a.coders.numberBigint),r.VarBytes=a.bytes(r.CompactSize),r.RawWitness=a.array(r.CompactSizeLen,r.VarBytes),r.BTCArray=e=>a.array(r.CompactSize,e),r.RawInput=a.struct({txid:a.bytes(32,!0),index:a.U32LE,finalScriptSig:r.VarBytes,sequence:a.U32LE}),r.RawOutput=a.struct({amount:a.U64LE,script:r.VarBytes});let c=a.struct({version:a.I32LE,segwitFlag:a.flag(new Uint8Array([0,1])),inputs:(0,r.BTCArray)(r.RawInput),outputs:(0,r.BTCArray)(r.RawOutput),witnesses:a.flagged("segwitFlag",a.array("inputs/length",r.RawWitness)),lockTime:a.U32LE});r.RawTx=a.validate(c,function(e){if(e.segwitFlag&&e.witnesses&&!e.witnesses.length)throw Error("Segwit flag with empty witnesses array");return e}),r.RawOldTx=a.struct({version:a.I32LE,inputs:(0,r.BTCArray)(r.RawInput),outputs:(0,r.BTCArray)(r.RawOutput),lockTime:a.U32LE})},223838,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r._Estimator=r._cmpBig=r.toVsize=void 0,r.getPrevOut=u,r.normalizeInput=d,r.getInputType=h,r.selectUTXO=function(e,t,r,n){return new g(e,t,{createTx:!0,bip69:!0,...n}).result(r)};let n=e.r(732557),a=e.r(561676),i=e.r(460058),o=e.r(427102),s=e.r(716004),c=e.r(552535),l=e.r(446598);function u(e){if(e.nonWitnessUtxo){if(void 0===e.index)throw Error("Unknown input index");return e.nonWitnessUtxo.outputs[e.index]}if(e.witnessUtxo)return e.witnessUtxo;throw Error("Cannot find previous output info")}function d(e,t,r){let a,u=arguments.length>3&&void 0!==arguments[3]&&arguments[3],{nonWitnessUtxo:d,txid:h}=e;"string"==typeof d&&(d=n.hex.decode(d)),(0,l.isBytes)(d)&&(d=s.RawTx.decode(d)),"nonWitnessUtxo"in e||void 0!==d||(d=null==t?void 0:t.nonWitnessUtxo),"string"==typeof h&&(h=n.hex.decode(h)),void 0===h&&(h=null==t?void 0:t.txid);let f={...t,...e,nonWitnessUtxo:d,txid:h};return"nonWitnessUtxo"in e||void 0!==f.nonWitnessUtxo||delete f.nonWitnessUtxo,void 0===f.sequence&&(f.sequence=c.DEFAULT_SEQUENCE),null===f.tapMerkleRoot&&delete f.tapMerkleRoot,f=o.mergeKeyMap(o.PSBTInput,f,t,r),o.PSBTInputCoder.encode(f),f.nonWitnessUtxo&&void 0!==f.index?a=f.nonWitnessUtxo.outputs[f.index]:f.witnessUtxo&&(a=f.witnessUtxo),a&&!u&&(0,i.checkScript)(a&&a.script,f.redeemScript,f.witnessScript),f}function h(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],r="legacy",n=c.SignatureHash.ALL,a=u(e),o=i.OutScript.decode(a.script),s=o.type,l=o,d=[o];if("tr"===o.type)return n=c.SignatureHash.DEFAULT,{txType:"taproot",type:"tr",last:o,lastScript:a.script,defaultSighash:n,sighash:e.sighashType||n};{if(("wpkh"===o.type||"wsh"===o.type)&&(r="segwit"),"sh"===o.type){if(!e.redeemScript)throw Error("inputType: sh without redeemScript");let t=i.OutScript.decode(e.redeemScript);("wpkh"===t.type||"wsh"===t.type)&&(r="segwit"),d.push(t),l=t,s+="-".concat(t.type)}if("wsh"===l.type){if(!e.witnessScript)throw Error("inputType: wsh without witnessScript");let t=i.OutScript.decode(e.witnessScript);"wsh"===t.type&&(r="segwit"),d.push(t),l=t,s+="-".concat(t.type)}let a=d[d.length-1];if("sh"===a.type||"wsh"===a.type)throw Error("inputType: sh/wsh cannot be terminal type");let c=i.OutScript.encode(a),u={type:s,txType:r,last:a,lastScript:c,defaultSighash:n,sighash:e.sighashType||n};if("legacy"===r&&!t&&!e.nonWitnessUtxo)throw Error("Transaction/sign: legacy input without nonWitnessUtxo, can result in attack that forces paying higher fees. Pass allowLegacyWitnessUtxo=true, if you sure");return u}}r.toVsize=e=>Math.ceil(e/4);let f=e=>o.TaprootControlBlock.encode(e);function p(e){let t,r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:l.NETWORK;if("script"in e&&(0,l.isBytes)(e.script)&&(t=e.script),"address"in e){if("string"!=typeof e.address)throw Error("Estimator: wrong output address=".concat(e.address));t=i.OutScript.encode((0,i.Address)(n).decode(e.address))}if(!t)throw Error("Estimator: wrong output script");if("bigint"!=typeof e.amount)throw Error("Estimator: wrong output amount=".concat(e.amount,", should be of type bigint but got ").concat(typeof e.amount,"."));if(t&&!r.allowUnknownOutputs&&"unknown"===i.OutScript.decode(t).type)throw Error("Estimator: unknown output script type, there is a chance that input is unspendable. Pass allowUnknownOutputs=true, if you sure");return r.disableScriptCheck||(0,i.checkScript)(t),t}r._cmpBig=(e,t)=>{let r=e-t;return r<0n?-1:+(r>0n)};class g{checkInputIdx(e){if(!Number.isSafeInteger(e)||0>e||e>=this.normalizedInputs.length)throw Error("Wrong input index=".concat(e));return e}sortIndices(e){return e.slice().sort((e,t)=>{let r=this.normalizedInputs[this.checkInputIdx(e)],n=this.normalizedInputs[this.checkInputIdx(t)],a=(0,l.compareBytes)(r.normalized.txid,n.normalized.txid);return 0!==a?a:r.normalized.index-n.normalized.index})}sortOutputs(e){let t=e.map(e=>p(e,this.opts,this.opts.network));return e.map((e,t)=>t).sort((n,a)=>{let i=e[n].amount,o=e[a].amount,s=(0,r._cmpBig)(i,o);return 0!==s?s:(0,l.compareBytes)(t[n],t[a])})}getSatoshi(e){return this.opts.feePerByte*BigInt((0,r.toVsize)(e))}get biggest(){return this.normalizedInputs.map((e,t)=>t).sort((e,t)=>(0,r._cmpBig)(this.normalizedInputs[t].value,this.normalizedInputs[e].value))}get smallest(){return this.biggest.reverse()}get oldest(){return this.normalizedInputs.map((e,t)=>t)}get newest(){return this.oldest.reverse()}accumulate(e){let t,r=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=!(arguments.length>2)||void 0===arguments[2]||arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.opts.alwaysChange?this.changeWeight:this.baseWeight,o=!1,c=0,l=0n,u=this.amount,d=[];for(let e of this.requiredIndices){this.checkInputIdx(e);let{estimate:r,amount:n}=this.normalizedInputs[e],h=i+r.weight;!o&&r.hasWitnesses&&(h+=2);let f=h+4*s.CompactSizeLen.encode(c).length;if(t=this.getSatoshi(f),i=h,r.hasWitnesses&&(o=!0),c++,l+=n,d.push(e),!a&&u+t<=l)return{indices:d,fee:t,weight:f,total:l}}for(let h of e){this.checkInputIdx(h);let{estimate:e,amount:f,value:p}=this.normalizedInputs[h],g=i+e.weight;!o&&e.hasWitnesses&&(g+=2);let m=g+4*s.CompactSizeLen.encode(c).length;if((t=this.getSatoshi(m),!r||!(f+l>u+t+this.dust))&&(!n||!(p<=0n))&&(i=g,e.hasWitnesses&&(o=!0),c++,l+=f,d.push(h),!a&&u+t<=l))return{indices:d,fee:t,weight:m,total:l}}if(a)return{indices:d,fee:t,weight:i+4*s.CompactSizeLen.encode(c).length,total:l}}default(){let{biggest:e}=this,t=this.accumulate(e,!0,!1);return t||this.accumulate(e)}select(e){if("all"===e)return this.accumulate(this.normalizedInputs.map((e,t)=>t),!1,!0,!0);if("default"===e)return this.default();let t={Oldest:()=>this.oldest,Newest:()=>this.newest,Smallest:()=>this.smallest,Biggest:()=>this.biggest};if(e.startsWith("exact")){let[r,n]=e.slice(5).split("/");if(!t[r])throw Error("Estimator.select: wrong strategy=".concat(e));e=n;let a=this.accumulate(t[r](),!0,!0);if(a)return a}if(e.startsWith("accum")){let r=e.slice(5);if(!t[r])throw Error("Estimator.select: wrong strategy=".concat(e));return this.accumulate(t[r]())}throw Error("Estimator.select: wrong strategy=".concat(e))}result(e){let t,r=this.select(e);if(!r)return;let{indices:n,weight:a,total:i}=r,o=this.opts.alwaysChange,s=this.opts.alwaysChange?a:a+(this.changeWeight-this.baseWeight),l=this.getSatoshi(s),u=r.fee,d=i-this.amount-l;d>this.dust&&(o=!0);let h=n,f=Array.from(this.outputs);if(o){if(u=l,d<0n)throw Error("Estimator.result: negative change=".concat(d));f.push({address:this.opts.changeAddress,amount:d})}this.opts.bip69&&(h=this.sortIndices(h),f=this.sortOutputs(f).map(e=>f[e]));let g={inputs:h.map(e=>this.normalizedInputs[e].normalized),outputs:f,fee:u,weight:this.opts.alwaysChange?r.weight:s,change:!!o};if(this.opts.createTx){let{inputs:e,outputs:r}=g;for(let r of(t=new c.Transaction(this.opts),e))t.addInput(r);for(let e of r)t.addOutput({...e,script:p(e,this.opts,this.opts.network)})}return Object.assign(g,{tx:t})}constructor(e,t,o){if(this.outputs=t,this.opts=o,this.requiredIndices=[],"bigint"!=typeof o.feePerByte)throw Error("Estimator: wrong feePerByte=".concat(o.feePerByte,", should be of type bigint but got ").concat(typeof o.feePerByte,"."));let g=void 0===o.dust?BigInt(182):o.dust;if("bigint"!=typeof g)throw Error("Estimator: wrong dust=".concat(o.dust,", should be of type bigint but got ").concat(typeof o.dust,"."));let m=void 0===o.dustRelayFeeRate?3n:o.dustRelayFeeRate;if("bigint"!=typeof m)throw Error("Estimator: wrong dustRelayFeeRate=".concat(o.dustRelayFeeRate,", should be of type bigint but got ").concat(typeof o.dustRelayFeeRate,"."));if(this.dust=g*m,void 0!==o.requiredInputs&&!Array.isArray(o.requiredInputs))throw Error("Estimator: wrong required inputs=".concat(o.requiredInputs));let y=o.network||l.NETWORK,b=0n,w=32;for(let e of t){let t=p(e,o,o.network);w+=32+4*s.VarBytes.encode(t).length,b+=e.amount}if("string"!=typeof o.changeAddress)throw Error("Estimator: wrong change address=".concat(o.changeAddress));let _=w+32+4*s.VarBytes.encode(i.OutScript.encode((0,i.Address)(y).decode(o.changeAddress))).length;w+=4*s.CompactSizeLen.encode(t.length).length,_+=4*s.CompactSizeLen.encode(t.length+1).length,this.baseWeight=w,this.changeWeight=_,this.amount=b;let v=Array.from(e);if(o.requiredInputs)for(let e=0;e<o.requiredInputs.length;e++)this.requiredIndices.push(v.push(o.requiredInputs[e])-1);let E=new Set;this.normalizedInputs=v.map(e=>{let t=d(e,void 0,void 0,o.disableScriptCheck);(0,c.inputBeforeSign)(t);let p="".concat(n.hex.encode(t.txid),":").concat(t.index);if(!o.allowSameUtxo&&E.has(p))throw Error("Estimator: same input passed multiple times: ".concat(p));E.add(p);let g=h(t,o.allowLegacyWitnessUtxo),m=u(t),y=function(e,t,r){let n,o=a.EMPTY;if("taproot"===e.txType){let o=e.sighash!==c.SignatureHash.DEFAULT?65:64;if(t.tapInternalKey&&!(0,l.equalBytes)(t.tapInternalKey,l.TAPROOT_UNSPENDABLE_KEY))n=[new Uint8Array(o)];else if(t.tapLeafScript)n=function(e,t,r){if(!e||!e.length)throw Error("no leafs");let n=()=>new Uint8Array(t);for(let[t,o]of e.sort((e,t)=>f(e[0]).length-f(t[0]).length)){let e=o.slice(0,-1),c=o[o.length-1],u=i.OutScript.decode(e),d=[];if("tr_ms"===u.type){let e=u.m,t=u.pubkeys.length-e;for(let t=0;t<e;t++)d.push(n());for(let e=0;e<t;e++)d.push(a.EMPTY)}else if("tr_ns"===u.type)for(let e of u.pubkeys)d.push(n());else{if(!r)throw Error("Finalize: Unknown tapLeafScript");let a=(0,i.tapLeafHash)(e,c);for(let i of r){if(!i.finalizeTaproot)continue;let r=s.Script.decode(e),o=i.encode(r);if(void 0===o)continue;let c=r.filter(e=>{if(!(0,l.isBytes)(e))return!1;try{return(0,l.validatePubkey)(e,l.PubT.schnorr),!0}catch(e){return!1}}),u=i.finalizeTaproot(e,o,c.map(e=>[{pubKey:e,leafHash:a},n()]));if(u)return u.concat(f(t))}}return d.reverse().concat([e,f(t)])}throw Error("there was no witness")}(t.tapLeafScript,o,r.customScripts);else throw Error("estimateInput/taproot: unknown input")}else{let t=()=>new Uint8Array(72),i=()=>new Uint8Array(33),c=a.EMPTY,u=[],d=e.last.type;if("ms"===d){let r=e.last.m,n=[0];for(let e=0;e<r;e++)n.push(t());c=s.Script.encode(n)}else if("pk"===d)c=s.Script.encode([t()]);else if("pkh"===d)c=s.Script.encode([t(),i()]);else if("wpkh"===d)c=a.EMPTY,u=[t(),i()];else if("unknown"===d&&!r.allowUnknownInputs)throw Error("Unknown inputs are not allowed");e.type.includes("wsh-")&&(c.length&&e.lastScript.length&&(u=s.Script.decode(c).map(e=>{if(0===e)return a.EMPTY;if((0,l.isBytes)(e))return e;throw Error("Wrong witness op=".concat(e))})),u=u.concat(e.lastScript)),"segwit"===e.txType&&(n=u),e.type.startsWith("sh-wsh-")?o=s.Script.encode([s.Script.encode([0,new Uint8Array(l.sha256.outputLen)])]):e.type.startsWith("sh-")?o=s.Script.encode([...s.Script.decode(c),e.lastScript]):e.type.startsWith("wsh-")||"segwit"!==e.txType&&(o=c)}let u=160+4*s.VarBytes.encode(o).length,d=!1;return n&&(u+=s.RawWitness.encode(n).length,d=!0),{weight:u,hasWitnesses:d}}(g,t,this.opts),b=m.amount-o.feePerByte*BigInt((0,r.toVsize)(y.weight));return{inputType:g,normalized:t,amount:m.amount,value:b,estimate:y}})}}r._Estimator=g},552535,(e,t,r)=>{"use strict";var n,a;Object.defineProperty(r,"__esModule",{value:!0}),r.Transaction=r.SigHash=r.SignatureHash=r.def=r.Decimal=r.DEFAULT_SEQUENCE=r.DEFAULT_LOCKTIME=r.DEFAULT_VERSION=r.PRECISION=void 0,r.cloneDeep=g,r.inputBeforeSign=y,r.PSBTCombine=function(e){if(!e||!Array.isArray(e)||!e.length)throw Error("PSBTCombine: wrong PSBT list");let t=E.fromPSBT(e[0]);for(let r=1;r<e.length;r++)t.combine(E.fromPSBT(e[r]));return t.toPSBT()},r.bip32Path=function(e){let t=[];if(!/^[mM]'?/.test(e))throw Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return t;for(let r of e.replace(/^[mM]'?\//,"").split("/")){let e=/^(\d+)('?)$/.exec(r);if(!e||3!==e.length)throw Error("Invalid child index: ".concat(r));let n=+e[1];if(!Number.isSafeInteger(n)||n>=0x80000000)throw Error("Invalid index");"'"===e[2]&&(n+=0x80000000),t.push(n)}return t};let i=e.r(732557),o=e.r(561676),s=e.r(460058),c=e.r(427102),l=e.r(716004),u=e.r(446598),d=e.r(446598),h=e.r(223838),f=new Uint8Array(32),p={amount:0xffffffffffffffffn,script:o.EMPTY};function g(e){if(Array.isArray(e))return e.map(e=>g(e));if((0,d.isBytes)(e))return Uint8Array.from(e);if(["number","bigint","boolean","string","undefined"].includes(typeof e))return e;if(null===e)return e;if("object"==typeof e)return Object.fromEntries(Object.entries(e).map(e=>{let[t,r]=e;return[t,g(r)]}));throw Error("cloneDeep: unknown type=".concat(e," (").concat(typeof e,")"))}function m(e){if(void 0===e.script||void 0===e.amount)throw Error("Transaction/output: script and amount required");return{script:e.script,amount:e.amount}}function y(e){if(void 0===e.txid||void 0===e.index)throw Error("Transaction/input: txid and index required");return{txid:e.txid,index:e.index,sequence:(0,r.def)(e.sequence,r.DEFAULT_SEQUENCE),finalScriptSig:(0,r.def)(e.finalScriptSig,o.EMPTY)}}function b(e){for(let t in e)c.PSBTInputFinalKeys.includes(t)||delete e[t]}r.PRECISION=8,r.DEFAULT_VERSION=2,r.DEFAULT_LOCKTIME=0,r.DEFAULT_SEQUENCE=0xffffffff,r.Decimal=o.coders.decimal(r.PRECISION),r.def=(e,t)=>void 0===e?t:e,function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.ANYONECANPAY=128]="ANYONECANPAY"}(n||(r.SignatureHash=n={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.DEFAULT_ANYONECANPAY=128]="DEFAULT_ANYONECANPAY",e[e.ALL_ANYONECANPAY=129]="ALL_ANYONECANPAY",e[e.NONE_ANYONECANPAY=130]="NONE_ANYONECANPAY",e[e.SINGLE_ANYONECANPAY=131]="SINGLE_ANYONECANPAY"}(a||(r.SigHash=a={}));let w=o.struct({txid:o.bytes(32,!0),index:o.U32LE});function _(e){if("number"!=typeof e||"string"!=typeof a[e])throw Error("Invalid SigHash=".concat(e));return e}function v(e){let t=31&e;return{isAny:!!(e&n.ANYONECANPAY),isNone:t===n.NONE,isSingle:t===n.SINGLE}}class E{static fromRaw(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},r=l.RawTx.decode(e),n=new E({...t,version:r.version,lockTime:r.lockTime});for(let e of r.outputs)n.addOutput(e);if(n.outputs=r.outputs,n.inputs=r.inputs,r.witnesses)for(let e=0;e<r.witnesses.length;e++)n.inputs[e].finalScriptWitness=r.witnesses[e];return n}static fromPSBT(e){let t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};try{t=c.RawPSBTV0.decode(e)}catch(r){try{t=c.RawPSBTV2.decode(e)}catch(e){throw r}}let a=t.global.version||0;if(0!==a&&2!==a)throw Error("Wrong PSBT version=".concat(a));let i=t.global.unsignedTx,s=0===a?null==i?void 0:i.version:t.global.txVersion,l=0===a?null==i?void 0:i.lockTime:t.global.fallbackLocktime,u=new E({...n,version:s,lockTime:l,PSBTVersion:a}),d=0===a?null==i?void 0:i.inputs.length:t.global.inputCount;u.inputs=t.inputs.slice(0,d).map((e,r)=>{var n;return{finalScriptSig:o.EMPTY,...null==(n=t.global.unsignedTx)?void 0:n.inputs[r],...e}});let h=0===a?null==i?void 0:i.outputs.length:t.global.outputCount;return u.outputs=t.outputs.slice(0,h).map((e,r)=>{var n;return{...e,...null==(n=t.global.unsignedTx)?void 0:n.outputs[r]}}),u.global={...t.global,txVersion:s},l!==r.DEFAULT_LOCKTIME&&(u.global.fallbackLocktime=l),u}toPSBT(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.opts.PSBTVersion;if(0!==e&&2!==e)throw Error("Wrong PSBT version=".concat(e));let t=this.inputs.map(t=>c.cleanPSBTFields(e,c.PSBTInput,t));for(let e of t)e.partialSig&&!e.partialSig.length&&delete e.partialSig,e.finalScriptSig&&!e.finalScriptSig.length&&delete e.finalScriptSig,e.finalScriptWitness&&!e.finalScriptWitness.length&&delete e.finalScriptWitness;let n=this.outputs.map(t=>c.cleanPSBTFields(e,c.PSBTOutput,t)),a={...this.global};return 0===e?(a.unsignedTx=l.RawOldTx.decode(l.RawOldTx.encode({version:this.version,lockTime:this.lockTime,inputs:this.inputs.map(y).map(e=>({...e,finalScriptSig:o.EMPTY})),outputs:this.outputs.map(m)})),delete a.fallbackLocktime,delete a.txVersion):(a.version=e,a.txVersion=this.version,a.inputCount=this.inputs.length,a.outputCount=this.outputs.length,a.fallbackLocktime&&a.fallbackLocktime===r.DEFAULT_LOCKTIME&&delete a.fallbackLocktime),this.opts.bip174jsCompat&&(t.length||t.push({}),n.length||n.push({})),(0===e?c.RawPSBTV0:c.RawPSBTV2).encode({global:a,inputs:t,outputs:n})}get lockTime(){let e=r.DEFAULT_LOCKTIME,t=0,n=r.DEFAULT_LOCKTIME,a=0;for(let r of this.inputs)r.requiredHeightLocktime&&(e=Math.max(e,r.requiredHeightLocktime),t++),r.requiredTimeLocktime&&(n=Math.max(n,r.requiredTimeLocktime),a++);return t&&t>=a?e:n!==r.DEFAULT_LOCKTIME?n:this.global.fallbackLocktime||r.DEFAULT_LOCKTIME}get version(){if(void 0===this.global.txVersion)throw Error("No global.txVersion");return this.global.txVersion}inputStatus(e){this.checkInputIdx(e);let t=this.inputs[e];return t.finalScriptSig&&t.finalScriptSig.length||t.finalScriptWitness&&t.finalScriptWitness.length?"finalized":t.tapKeySig||t.tapScriptSig&&t.tapScriptSig.length||t.partialSig&&t.partialSig.length?"signed":"unsigned"}inputSighash(e){this.checkInputIdx(e);let t=this.inputs[e].sighashType,r=void 0===t?n.DEFAULT:t,a=r===n.DEFAULT?n.ALL:3&r;return{sigInputs:r&n.ANYONECANPAY,sigOutputs:a}}signStatus(){let e=!0,t=!0,r=[],a=[];for(let i=0;i<this.inputs.length;i++){if("unsigned"===this.inputStatus(i))continue;let{sigInputs:o,sigOutputs:s}=this.inputSighash(i);if(o===n.ANYONECANPAY?r.push(i):e=!1,s===n.ALL)t=!1;else if(s===n.SINGLE)a.push(i);else if(s===n.NONE);else throw Error("Wrong signature hash output type: ".concat(s))}return{addInput:e,addOutput:t,inputs:r,outputs:a}}get isFinal(){for(let e=0;e<this.inputs.length;e++)if("finalized"!==this.inputStatus(e))return!1;return!0}get hasWitnesses(){let e=!1;for(let t of this.inputs)t.finalScriptWitness&&t.finalScriptWitness.length&&(e=!0);return e}get weight(){if(!this.isFinal)throw Error("Transaction is not finalized");let e=32,t=this.outputs.map(m);for(let r of(e+=4*l.CompactSizeLen.encode(this.outputs.length).length,t))e+=32+4*l.VarBytes.encode(r.script).length;for(let t of(this.hasWitnesses&&(e+=2),e+=4*l.CompactSizeLen.encode(this.inputs.length).length,this.inputs))e+=160+4*l.VarBytes.encode(t.finalScriptSig||o.EMPTY).length,this.hasWitnesses&&t.finalScriptWitness&&(e+=l.RawWitness.encode(t.finalScriptWitness).length);return e}get vsize(){return(0,h.toVsize)(this.weight)}toBytes(){let e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return l.RawTx.encode({version:this.version,lockTime:this.lockTime,inputs:this.inputs.map(y).map(t=>({...t,finalScriptSig:e&&t.finalScriptSig||o.EMPTY})),outputs:this.outputs.map(m),witnesses:this.inputs.map(e=>e.finalScriptWitness||[]),segwitFlag:t&&this.hasWitnesses})}get unsignedTx(){return this.toBytes(!1,!1)}get hex(){return i.hex.encode(this.toBytes(!0,this.hasWitnesses))}get hash(){if(!this.isFinal)throw Error("Transaction is not finalized");return i.hex.encode(u.sha256x2(this.toBytes(!0)))}get id(){if(!this.isFinal)throw Error("Transaction is not finalized");return i.hex.encode(u.sha256x2(this.toBytes(!0)).reverse())}checkInputIdx(e){if(!Number.isSafeInteger(e)||0>e||e>=this.inputs.length)throw Error("Wrong input index=".concat(e))}getInput(e){return this.checkInputIdx(e),g(this.inputs[e])}get inputsLength(){return this.inputs.length}addInput(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t&&!this.signStatus().addInput)throw Error("Tx has signed inputs, cannot add new one");return this.inputs.push((0,h.normalizeInput)(e,void 0,void 0,this.opts.disableScriptCheck)),this.inputs.length-1}updateInput(e,t){let r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.checkInputIdx(e),!n){let t=this.signStatus();(!t.addInput||t.inputs.includes(e))&&(r=c.PSBTInputUnsignedKeys)}this.inputs[e]=(0,h.normalizeInput)(t,this.inputs[e],r,this.opts.disableScriptCheck)}checkOutputIdx(e){if(!Number.isSafeInteger(e)||0>e||e>=this.outputs.length)throw Error("Wrong output index=".concat(e))}getOutput(e){return this.checkOutputIdx(e),g(this.outputs[e])}getOutputAddress(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:d.NETWORK,r=this.getOutput(e);if(r.script)return(0,s.Address)(t).encode(s.OutScript.decode(r.script))}get outputsLength(){return this.outputs.length}normalizeOutput(e,t,r){let{amount:n,script:a}=e;if(void 0===n&&(n=null==t?void 0:t.amount),"bigint"!=typeof n)throw Error("Wrong amount type, should be of type bigint in sats, but got ".concat(n," of type ").concat(typeof n));"string"==typeof a&&(a=i.hex.decode(a)),void 0===a&&(a=null==t?void 0:t.script);let o={...t,...e,amount:n,script:a};if(void 0===o.amount&&delete o.amount,o=c.mergeKeyMap(c.PSBTOutput,o,t,r),c.PSBTOutputCoder.encode(o),o.script&&!this.opts.allowUnknownOutputs&&"unknown"===s.OutScript.decode(o.script).type)throw Error("Transaction/output: unknown output script type, there is a chance that input is unspendable. Pass allowUnknownOutputs=true, if you sure");return this.opts.disableScriptCheck||(0,s.checkScript)(o.script,o.redeemScript,o.witnessScript),o}addOutput(e){let t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(!t&&!this.signStatus().addOutput)throw Error("Tx has signed outputs, cannot add new one");return this.outputs.push(this.normalizeOutput(e)),this.outputs.length-1}updateOutput(e,t){let r,n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];if(this.checkOutputIdx(e),!n){let t=this.signStatus();(!t.addOutput||t.outputs.includes(e))&&(r=c.PSBTOutputUnsignedKeys)}this.outputs[e]=this.normalizeOutput(t,this.outputs[e],r)}addOutputAddress(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:d.NETWORK;return this.addOutput({script:s.OutScript.encode((0,s.Address)(r).decode(e)),amount:t})}get fee(){let e=0n;for(let t of this.inputs){let r=(0,h.getPrevOut)(t);if(!r)throw Error("Empty input amount");e+=r.amount}for(let t of this.outputs.map(m))e-=t.amount;return e}preimageLegacy(e,t,r){let{isAny:n,isNone:a,isSingle:i}=v(r);if(e<0||!Number.isSafeInteger(e))throw Error("Invalid input idx=".concat(e));if(i&&e>=this.outputs.length||e>=this.inputs.length)return o.U256BE.encode(1n);t=l.Script.encode(l.Script.decode(t).filter(e=>"CODESEPARATOR"!==e));let s=this.inputs.map(y).map((r,n)=>({...r,finalScriptSig:n===e?t:o.EMPTY}));n?s=[s[e]]:(a||i)&&(s=s.map((t,r)=>({...t,sequence:r===e?t.sequence:0})));let c=this.outputs.map(m);a?c=[]:i&&(c=c.slice(0,e).fill(p).concat([c[e]]));let d=l.RawTx.encode({lockTime:this.lockTime,version:this.version,segwitFlag:!1,inputs:s,outputs:c});return u.sha256x2(d,o.I32LE.encode(r))}preimageWitnessV0(e,t,r,n){let{isAny:a,isNone:i,isSingle:s}=v(r),c=f,d=f,h=f,p=this.inputs.map(y),g=this.outputs.map(m);a||(c=u.sha256x2(...p.map(w.encode))),a||s||i||(d=u.sha256x2(...p.map(e=>o.U32LE.encode(e.sequence)))),s||i?s&&e<g.length&&(h=u.sha256x2(l.RawOutput.encode(g[e]))):h=u.sha256x2(...g.map(l.RawOutput.encode));let b=p[e];return u.sha256x2(o.I32LE.encode(this.version),c,d,o.bytes(32,!0).encode(b.txid),o.U32LE.encode(b.index),l.VarBytes.encode(t),o.U64LE.encode(n),o.U32LE.encode(b.sequence),h,o.U32LE.encode(this.lockTime),o.U32LE.encode(r))}preimageWitnessV1(e,t,r,a){let i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:-1,c=arguments.length>5?arguments[5]:void 0,h=arguments.length>6&&void 0!==arguments[6]?arguments[6]:192,p=arguments.length>7?arguments[7]:void 0;if(!Array.isArray(a)||this.inputs.length!==a.length)throw Error("Invalid amounts array=".concat(a));if(!Array.isArray(t)||this.inputs.length!==t.length)throw Error("Invalid prevOutScript array=".concat(t));let g=[o.U8.encode(0),o.U8.encode(r),o.I32LE.encode(this.version),o.U32LE.encode(this.lockTime)],b=r===n.DEFAULT?n.ALL:3&r,_=r&n.ANYONECANPAY,v=this.inputs.map(y),E=this.outputs.map(m);_!==n.ANYONECANPAY&&g.push(...[v.map(w.encode),a.map(o.U64LE.encode),t.map(l.VarBytes.encode),v.map(e=>o.U32LE.encode(e.sequence))].map(e=>u.sha256((0,d.concatBytes)(...e)))),b===n.ALL&&g.push(u.sha256((0,d.concatBytes)(...E.map(l.RawOutput.encode))));let S=!!p|2*!!c;if(g.push(new Uint8Array([S])),_===n.ANYONECANPAY){let r=v[e];g.push(w.encode(r),o.U64LE.encode(a[e]),l.VarBytes.encode(t[e]),o.U32LE.encode(r.sequence))}else g.push(o.U32LE.encode(e));return 1&S&&g.push(u.sha256(l.VarBytes.encode(p||o.EMPTY))),b===n.SINGLE&&g.push(e<E.length?u.sha256(l.RawOutput.encode(E[e])):f),c&&g.push((0,s.tapLeafHash)(c,h),o.U8.encode(0),o.I32LE.encode(i)),u.tagSchnorr("TapSighash",...g)}signIdx(e,t,r,a){this.checkInputIdx(t);let i=this.inputs[t],c=(0,h.getInputType)(i,this.opts.allowLegacyWitnessUtxo);if(!(0,d.isBytes)(e)){if(!i.bip32Derivation||!i.bip32Derivation.length)throw Error("bip32Derivation: empty");let r=i.bip32Derivation.filter(t=>t[1].fingerprint==e.fingerprint).map(t=>{let[r,{path:n}]=t,a=e;for(let e of n)a=a.deriveChild(e);if(!(0,d.equalBytes)(a.publicKey,r))throw Error("bip32Derivation: wrong pubKey");if(!a.privateKey)throw Error("bip32Derivation: no privateKey");return a});if(!r.length)throw Error("bip32Derivation: no items with fingerprint=".concat(e.fingerprint));let n=!1;for(let e of r)this.signIdx(e.privateKey,t)&&(n=!0);return n}r?r.forEach(_):r=[c.defaultSighash];let f=c.sighash;if(!r.includes(f))throw Error("Input with not allowed sigHash=".concat(f,". Allowed: ").concat(r.join(", ")));let{sigOutputs:p}=this.inputSighash(t);if(p===n.SINGLE&&t>=this.outputs.length)throw Error("Input with sighash SINGLE, but there is no output with corresponding index=".concat(t));let g=(0,h.getPrevOut)(i);if("taproot"===c.txType){let r=this.inputs.map(h.getPrevOut),c=r.map(e=>e.script),p=r.map(e=>e.amount),g=!1,m=u.pubSchnorr(e),y=i.tapMerkleRoot||o.EMPTY;if(i.tapInternalKey){let{pubKey:r,privKey:s}=function(e,t,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:o.EMPTY;return(0,d.equalBytes)(r,t)&&(e=u.taprootTweakPrivKey(e,n),t=u.pubSchnorr(e)),{privKey:e,pubKey:t}}(e,m,i.tapInternalKey,y),[l,h]=u.taprootTweakPubkey(i.tapInternalKey,y);if((0,d.equalBytes)(l,r)){let e=this.preimageWitnessV1(t,c,f,p),r=(0,d.concatBytes)(u.signSchnorr(e,s,a),f!==n.DEFAULT?new Uint8Array([f]):o.EMPTY);this.updateInput(t,{tapKeySig:r},!0),g=!0}}if(i.tapLeafScript)for(let[r,h]of(i.tapScriptSig=i.tapScriptSig||[],i.tapLeafScript)){let r=h.subarray(0,-1),i=l.Script.decode(r),y=h[h.length-1],b=(0,s.tapLeafHash)(r,y);if(-1===i.findIndex(e=>(0,d.isBytes)(e)&&(0,d.equalBytes)(e,m)))continue;let w=this.preimageWitnessV1(t,c,f,p,void 0,r,y),_=(0,d.concatBytes)(u.signSchnorr(w,e,a),f!==n.DEFAULT?new Uint8Array([f]):o.EMPTY);this.updateInput(t,{tapScriptSig:[[{pubKey:m,leafHash:b},_]]},!0),g=!0}if(!g)throw Error("No taproot scripts signed")}else{let r,n=u.pubECDSA(e),a=!1,i=u.hash160(n);for(let e of l.Script.decode(c.lastScript))(0,d.isBytes)(e)&&((0,d.equalBytes)(e,n)||(0,d.equalBytes)(e,i))&&(a=!0);if(!a)throw Error("Input script doesn't have pubKey: ".concat(c.lastScript));if("legacy"===c.txType)r=this.preimageLegacy(t,c.lastScript,f);else if("segwit"===c.txType){let e=c.lastScript;"wpkh"===c.last.type&&(e=s.OutScript.encode({type:"pkh",hash:c.last.hash})),r=this.preimageWitnessV0(t,e,f,g.amount)}else throw Error("Transaction/sign: unknown tx type: ".concat(c.txType));let o=u.signECDSA(r,e,this.opts.lowR);this.updateInput(t,{partialSig:[[n,(0,d.concatBytes)(o,new Uint8Array([f]))]]},!0)}return!0}sign(e,t,r){let n=0;for(let a=0;a<this.inputs.length;a++)try{this.signIdx(e,a,t,r)&&n++}catch(e){}if(!n)throw Error("No inputs signed");return n}finalizeIdx(e){let t,r;if(this.checkInputIdx(e),this.fee<0n)throw Error("Outputs spends more than inputs amount");let n=this.inputs[e],a=(0,h.getInputType)(n,this.opts.allowLegacyWitnessUtxo);if("taproot"===a.txType){if(n.tapKeySig)n.finalScriptWitness=[n.tapKeySig];else if(n.tapLeafScript&&n.tapScriptSig){for(let[e,t]of n.tapLeafScript.sort((e,t)=>c.TaprootControlBlock.encode(e[0]).length-c.TaprootControlBlock.encode(t[0]).length)){let r=t.slice(0,-1),a=t[t.length-1],i=s.OutScript.decode(r),u=(0,s.tapLeafHash)(r,a),h=n.tapScriptSig.filter(e=>(0,d.equalBytes)(e[0].leafHash,u)),f=[];if("tr_ms"===i.type){let e=i.m,t=i.pubkeys,r=0;for(let n of t){let t=h.findIndex(e=>(0,d.equalBytes)(e[0].pubKey,n));if(r===e||-1===t){f.push(o.EMPTY);continue}f.push(h[t][1]),r++}if(r!==e)continue}else if("tr_ns"===i.type){for(let e of i.pubkeys){let t=h.findIndex(t=>(0,d.equalBytes)(t[0].pubKey,e));-1!==t&&f.push(h[t][1])}if(f.length!==i.pubkeys.length)continue}else if("unknown"===i.type&&this.opts.allowUnknownInputs){let e=l.Script.decode(r);if(!(f=h.map(t=>{let[{pubKey:r},n]=t,a=e.findIndex(e=>(0,d.isBytes)(e)&&(0,d.equalBytes)(e,r));if(-1===a)throw Error("finalize/taproot: cannot find position of pubkey in script");return{signature:n,pos:a}}).sort((e,t)=>e.pos-t.pos).map(e=>e.signature)).length)continue}else{let t=this.opts.customScripts;if(t)for(let a of t){if(!a.finalizeTaproot)continue;let t=l.Script.decode(r),i=a.encode(t);if(void 0===i)continue;let s=a.finalizeTaproot(r,i,h);if(s){n.finalScriptWitness=s.concat(c.TaprootControlBlock.encode(e)),n.finalScriptSig=o.EMPTY,b(n);return}}throw Error("Finalize: Unknown tapLeafScript")}n.finalScriptWitness=f.reverse().concat([r,c.TaprootControlBlock.encode(e)]);break}if(!n.finalScriptWitness)throw Error("finalize/taproot: empty witness")}else throw Error("finalize/taproot: unknown input");n.finalScriptSig=o.EMPTY,b(n);return}if(!n.partialSig||!n.partialSig.length)throw Error("Not enough partial sign");let i=o.EMPTY,f=[];if("ms"===a.last.type){let e=a.last.m,t=a.last.pubkeys,r=[];for(let e of t){let t=n.partialSig.find(t=>(0,d.equalBytes)(e,t[0]));t&&r.push(t[1])}if((r=r.slice(0,e)).length!==e)throw Error("Multisig: wrong signatures count, m=".concat(e," n=").concat(t.length," signatures=").concat(r.length));i=l.Script.encode([0,...r])}else if("pk"===a.last.type)i=l.Script.encode([n.partialSig[0][1]]);else if("pkh"===a.last.type)i=l.Script.encode([n.partialSig[0][1],n.partialSig[0][0]]);else if("wpkh"===a.last.type)i=o.EMPTY,f=[n.partialSig[0][1],n.partialSig[0][0]];else if("unknown"===a.last.type&&!this.opts.allowUnknownInputs)throw Error("Unknown inputs not allowed");if(a.type.includes("wsh-")&&(i.length&&a.lastScript.length&&(f=l.Script.decode(i).map(e=>{if(0===e)return o.EMPTY;if((0,d.isBytes)(e))return e;throw Error("Wrong witness op=".concat(e))})),f=f.concat(a.lastScript)),"segwit"===a.txType&&(r=f),a.type.startsWith("sh-wsh-")?t=l.Script.encode([l.Script.encode([0,u.sha256(a.lastScript)])]):a.type.startsWith("sh-")?t=l.Script.encode([...l.Script.decode(i),a.lastScript]):a.type.startsWith("wsh-")||"segwit"!==a.txType&&(t=i),!t&&!r)throw Error("Unknown error finalizing input");t&&(n.finalScriptSig=t),r&&(n.finalScriptWitness=r),b(n)}finalize(){for(let e=0;e<this.inputs.length;e++)this.finalizeIdx(e)}extract(){if(!this.isFinal)throw Error("Transaction has unfinalized inputs");if(!this.outputs.length)throw Error("Transaction has no outputs");if(this.fee<0n)throw Error("Outputs spends more than inputs amount");return this.toBytes(!0,!0)}combine(e){for(let t of["PSBTVersion","version","lockTime"])if(this.opts[t]!==e.opts[t])throw Error("Transaction/combine: different ".concat(t," this=").concat(this.opts[t]," other=").concat(e.opts[t]));for(let t of["inputs","outputs"])if(this[t].length!==e[t].length)throw Error("Transaction/combine: different ".concat(t," length this=").concat(this[t].length," other=").concat(e[t].length));let t=this.global.unsignedTx?l.RawOldTx.encode(this.global.unsignedTx):o.EMPTY,r=e.global.unsignedTx?l.RawOldTx.encode(e.global.unsignedTx):o.EMPTY;if(!(0,d.equalBytes)(t,r))throw Error("Transaction/combine: different unsigned tx");this.global=c.mergeKeyMap(c.PSBTGlobal,this.global,e.global);for(let t=0;t<this.inputs.length;t++)this.updateInput(t,e.inputs[t],!0);for(let t=0;t<this.outputs.length;t++)this.updateOutput(t,e.outputs[t],!0);return this}clone(){return E.fromPSBT(this.toPSBT(this.opts.PSBTVersion),this.opts)}constructor(e={}){this.global={},this.inputs=[],this.outputs=[];let t=this.opts=function(e){if(void 0!==e&&"[object Object]"!==({}).toString.call(e))throw Error("Wrong object type for transaction options: ".concat(e));let t={...e,version:(0,r.def)(e.version,r.DEFAULT_VERSION),lockTime:(0,r.def)(e.lockTime,0),PSBTVersion:(0,r.def)(e.PSBTVersion,0)};if(void 0!==t.allowUnknowInput&&(e.allowUnknownInputs=t.allowUnknowInput),void 0!==t.allowUnknowOutput&&(e.allowUnknownOutputs=t.allowUnknowOutput),![-1,0,1,2,3].includes(t.version))throw Error("Unknown version: ".concat(t.version));if("number"!=typeof t.lockTime)throw Error("Transaction lock time should be number");if(o.U32LE.encode(t.lockTime),0!==t.PSBTVersion&&2!==t.PSBTVersion)throw Error("Unknown PSBT version ".concat(t.PSBTVersion));for(let e of["allowUnknownOutputs","allowUnknownInputs","disableScriptCheck","bip174jsCompat","allowLegacyWitnessUtxo","lowR"]){let r=t[e];if(void 0!==r&&"boolean"!=typeof r)throw Error("Transation options wrong type: ".concat(e,"=").concat(r," (").concat(typeof r,")"))}if(void 0!==t.customScripts){let e=t.customScripts;if(!Array.isArray(e))throw Error("wrong custom scripts type (expected array): customScripts=".concat(e," (").concat(typeof e,")"));for(let t of e)if("function"!=typeof t.encode||"function"!=typeof t.decode||void 0!==t.finalizeTaproot&&"function"!=typeof t.finalizeTaproot)throw Error("wrong script=".concat(t," (").concat(typeof t,")"))}return Object.freeze(t)}(e);t.lockTime!==r.DEFAULT_LOCKTIME&&(this.global.fallbackLocktime=t.lockTime),this.global.txVersion=t.version}}r.Transaction=E},427102,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RawPSBTV2=r.RawPSBTV0=r._DebugPSBT=r._RawPSBTV2=r._RawPSBTV0=r.PSBTOutputCoder=r.PSBTInputCoder=r.PSBTOutputUnsignedKeys=r.PSBTOutput=r.PSBTInputUnsignedKeys=r.PSBTInputFinalKeys=r.PSBTInput=r.PSBTGlobal=r.TaprootControlBlock=void 0,r.cleanPSBTFields=function(e,t,r){let n={};for(let a in r){if("unknown"!==a){if(!t[a])continue;let{allowInc:r,silentIgnore:n}=v(t[a]);if(!r.includes(e)){if(n)continue;throw Error("Failed to serialize in PSBTv".concat(e,": ").concat(a," but versions allows inclusion=").concat(r))}}n[a]=r[a]}return n},r.mergeKeyMap=function(e,t,r,a){let i={...r,...t};for(let o in e){let c=o,[l,u,d]=e[c],h=a&&!a.includes(o);if(void 0===t[o]&&o in t){if(h)throw Error("Cannot remove signed field=".concat(o));delete i[o]}else if(u){let e=r&&r[o]?r[o]:[],a=t[c];if(a){if(!Array.isArray(a))throw Error("keyMap(".concat(o,"): KV pairs should be [k, v][]"));a=a.map(e=>{if(2!==e.length)throw Error("keyMap(".concat(o,"): KV pairs should be [k, v][]"));return["string"==typeof e[0]?u.decode(n.hex.decode(e[0])):e[0],"string"==typeof e[1]?d.decode(n.hex.decode(e[1])):e[1]]});let t={},r=(e,r,a)=>{if(void 0===t[e]){t[e]=[r,a];return}let i=n.hex.encode(d.encode(t[e][1])),o=n.hex.encode(d.encode(a));if(i!==o)throw Error("keyMap(".concat(c,"): same key=").concat(e," oldVal=").concat(i," newVal=").concat(o))};for(let[t,a]of e)r(n.hex.encode(u.encode(t)),t,a);for(let[e,i]of a){let a=n.hex.encode(u.encode(e));if(void 0===i){if(h)throw Error("Cannot remove signed field=".concat(c,"/").concat(e));delete t[a]}else r(a,e,i)}i[c]=Object.values(t)}}else if("string"==typeof i[o])i[o]=d.decode(n.hex.decode(i[o]));else if(h&&o in t&&r&&void 0!==r[o]&&!(0,s.equalBytes)(d.encode(t[o]),d.encode(r[o])))throw Error("Cannot change signed field=".concat(o))}for(let t in i)e[t]||delete i[t];return i};let n=e.r(732557),a=e.r(561676),i=e.r(716004),o=e.r(552535),s=e.r(446598),c=a.validate(a.bytes(null),e=>(0,s.validatePubkey)(e,s.PubT.ecdsa)),l=a.validate(a.bytes(32),e=>(0,s.validatePubkey)(e,s.PubT.schnorr)),u=a.validate(a.bytes(null),e=>{if(64!==e.length&&65!==e.length)throw Error("Schnorr signature should be 64 or 65 bytes long");return e}),d=a.struct({fingerprint:a.U32BE,path:a.array(null,a.U32LE)}),h=a.struct({hashes:a.array(i.CompactSizeLen,a.bytes(32)),der:d}),f=a.bytes(78),p=a.struct({pubKey:l,leafHash:a.bytes(32)}),g=a.struct({version:a.U8,internalKey:a.bytes(32),merklePath:a.array(null,a.bytes(32))});r.TaprootControlBlock=a.validate(g,e=>{if(e.merklePath.length>128)throw Error("TaprootControlBlock: merklePath should be of length 0..128 (inclusive)");return e});let m=a.array(null,a.struct({depth:a.U8,version:a.U8,script:i.VarBytes})),y=a.bytes(null),b=a.bytes(20),w=a.bytes(32);r.PSBTGlobal={unsignedTx:[0,!1,i.RawOldTx,[0],[0],!1],xpub:[1,f,d,[],[0,2],!1],txVersion:[2,!1,a.U32LE,[2],[2],!1],fallbackLocktime:[3,!1,a.U32LE,[],[2],!1],inputCount:[4,!1,i.CompactSizeLen,[2],[2],!1],outputCount:[5,!1,i.CompactSizeLen,[2],[2],!1],txModifiable:[6,!1,a.U8,[],[2],!1],version:[251,!1,a.U32LE,[],[0,2],!1],proprietary:[252,y,y,[],[0,2],!1]},r.PSBTInput={nonWitnessUtxo:[0,!1,i.RawTx,[],[0,2],!1],witnessUtxo:[1,!1,i.RawOutput,[],[0,2],!1],partialSig:[2,c,y,[],[0,2],!1],sighashType:[3,!1,a.U32LE,[],[0,2],!1],redeemScript:[4,!1,y,[],[0,2],!1],witnessScript:[5,!1,y,[],[0,2],!1],bip32Derivation:[6,c,d,[],[0,2],!1],finalScriptSig:[7,!1,y,[],[0,2],!1],finalScriptWitness:[8,!1,i.RawWitness,[],[0,2],!1],porCommitment:[9,!1,y,[],[0,2],!1],ripemd160:[10,b,y,[],[0,2],!1],sha256:[11,w,y,[],[0,2],!1],hash160:[12,b,y,[],[0,2],!1],hash256:[13,w,y,[],[0,2],!1],txid:[14,!1,w,[2],[2],!0],index:[15,!1,a.U32LE,[2],[2],!0],sequence:[16,!1,a.U32LE,[],[2],!0],requiredTimeLocktime:[17,!1,a.U32LE,[],[2],!1],requiredHeightLocktime:[18,!1,a.U32LE,[],[2],!1],tapKeySig:[19,!1,u,[],[0,2],!1],tapScriptSig:[20,p,u,[],[0,2],!1],tapLeafScript:[21,r.TaprootControlBlock,y,[],[0,2],!1],tapBip32Derivation:[22,w,h,[],[0,2],!1],tapInternalKey:[23,!1,l,[],[0,2],!1],tapMerkleRoot:[24,!1,w,[],[0,2],!1],proprietary:[252,y,y,[],[0,2],!1]},r.PSBTInputFinalKeys=["txid","sequence","index","witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknown"],r.PSBTInputUnsignedKeys=["partialSig","finalScriptSig","finalScriptWitness","tapKeySig","tapScriptSig"],r.PSBTOutput={redeemScript:[0,!1,y,[],[0,2],!1],witnessScript:[1,!1,y,[],[0,2],!1],bip32Derivation:[2,c,d,[],[0,2],!1],amount:[3,!1,a.I64LE,[2],[2],!0],script:[4,!1,y,[2],[2],!0],tapInternalKey:[5,!1,l,[],[0,2],!1],tapTree:[6,!1,m,[],[0,2],!1],tapBip32Derivation:[7,l,h,[],[0,2],!1],proprietary:[252,y,y,[],[0,2],!1]},r.PSBTOutputUnsignedKeys=[];let _=a.array(a.NULL,a.struct({key:a.prefix(i.CompactSizeLen,a.struct({type:i.CompactSizeLen,key:a.bytes(null)})),value:a.bytes(i.CompactSizeLen)}));function v(e){let[t,r,n,a,i,o]=e;return{type:t,kc:r,vc:n,reqInc:a,allowInc:i,silentIgnore:o}}function E(e){let t={};for(let r in e){let[n,a,i]=e[r];t[n]=[r,a,i]}return a.wrap({encodeStream:(t,r)=>{let n=[];for(let t in e){let i=r[t];if(void 0===i)continue;let[o,c,l]=e[t];if(c){let e=i.map(e=>{let[t,r]=e;return[c.encode(t),l.encode(r)]});for(let[t,r]of(e.sort((e,t)=>(0,s.compareBytes)(e[0],t[0])),e))n.push({key:{key:t,type:o},value:r})}else n.push({key:{type:o,key:a.EMPTY},value:l.encode(i)})}if(r.unknown)for(let[e,t]of(r.unknown.sort((e,t)=>(0,s.compareBytes)(e[0].key,t[0].key)),r.unknown))n.push({key:e,value:t});_.encodeStream(t,n)},decodeStream:e=>{let r=_.decodeStream(e),a={},i={};for(let e of r){let r="unknown",o=e.key.key,s=e.value;if(t[e.key.type]){let[c,l,u]=t[e.key.type];if(r=c,!l&&o.length)throw Error("PSBT: Non-empty key for ".concat(r," (key=").concat(n.hex.encode(o)," value=").concat(n.hex.encode(s)));if(o=l?l.decode(o):void 0,s=u.decode(s),!l){if(a[r])throw Error("PSBT: Same keys: ".concat(r," (key=").concat(o," value=").concat(s,")"));a[r]=s,i[r]=!0;continue}}else o={type:e.key.type,key:e.key.key};if(i[r])throw Error("PSBT: Key type with empty key and no key=".concat(r," val=").concat(s));a[r]||(a[r]=[]),a[r].push([o,s])}return a}})}a.struct({type:i.CompactSizeLen,key:a.bytes(null)}),r.PSBTInputCoder=a.validate(E(r.PSBTInput),e=>{if(e.finalScriptWitness&&!e.finalScriptWitness.length)throw Error("validateInput: empty finalScriptWitness");if(e.partialSig&&!e.partialSig.length)throw Error("Empty partialSig");if(e.partialSig)for(let[t]of e.partialSig)(0,s.validatePubkey)(t,s.PubT.ecdsa);if(e.bip32Derivation)for(let[t]of e.bip32Derivation)(0,s.validatePubkey)(t,s.PubT.ecdsa);if(void 0!==e.requiredTimeLocktime&&e.requiredTimeLocktime<5e8)throw Error("validateInput: wrong timeLocktime=".concat(e.requiredTimeLocktime));if(void 0!==e.requiredHeightLocktime&&(e.requiredHeightLocktime<=0||e.requiredHeightLocktime>=5e8))throw Error("validateInput: wrong heighLocktime=".concat(e.requiredHeightLocktime));if(e.nonWitnessUtxo&&void 0!==e.index){let t=e.nonWitnessUtxo.outputs.length-1;if(e.index>t)throw Error("validateInput: index(".concat(e.index,") not in nonWitnessUtxo"));let r=e.nonWitnessUtxo.outputs[e.index];if(e.witnessUtxo&&(!(0,s.equalBytes)(e.witnessUtxo.script,r.script)||e.witnessUtxo.amount!==r.amount))throw Error("validateInput: witnessUtxo different from nonWitnessUtxo")}if(e.tapLeafScript)for(let[t,r]of e.tapLeafScript){if((254&t.version)!==r[r.length-1])throw Error("validateInput: tapLeafScript version mimatch");if(1&r[r.length-1])throw Error("validateInput: tapLeafScript version has parity bit!")}if(e.nonWitnessUtxo&&void 0!==e.index&&e.txid){if(e.nonWitnessUtxo.outputs.length-1<e.index)throw Error("nonWitnessUtxo: incorect output index");let t=o.Transaction.fromRaw(i.RawTx.encode(e.nonWitnessUtxo),{allowUnknownOutputs:!0,disableScriptCheck:!0,allowUnknownInputs:!0}),r=n.hex.encode(e.txid);if(t.isFinal&&t.id!==r)throw Error("nonWitnessUtxo: wrong txid, exp=".concat(r," got=").concat(t.id))}return e}),r.PSBTOutputCoder=a.validate(E(r.PSBTOutput),e=>{if(e.bip32Derivation)for(let[t]of e.bip32Derivation)(0,s.validatePubkey)(t,s.PubT.ecdsa);return e});let S=a.validate(E(r.PSBTGlobal),e=>{if(0===(e.version||0)){if(!e.unsignedTx)throw Error("PSBTv0: missing unsignedTx");for(let t of e.unsignedTx.inputs)if(t.finalScriptSig&&t.finalScriptSig.length)throw Error("PSBTv0: input scriptSig found in unsignedTx")}return e});function x(e,t,r){for(let n in r){if("unknown"===n||!t[n])continue;let{allowInc:r}=v(t[n]);if(!r.includes(e))throw Error("PSBTv".concat(e,": field ").concat(n," is not allowed"))}for(let n in t){let{reqInc:a}=v(t[n]);if(a.includes(e)&&void 0===r[n])throw Error("PSBTv".concat(e,": missing required field ").concat(n))}}function k(e){let t=e&&e.global&&e.global.version||0;for(let n of(x(t,r.PSBTGlobal,e.global),e.inputs))x(t,r.PSBTInput,n);for(let n of e.outputs)x(t,r.PSBTOutput,n);let n=t?e.global.inputCount:e.global.unsignedTx.inputs.length;if(e.inputs.length<n)throw Error("Not enough inputs");let a=e.inputs.slice(n);if(a.length>1||a.length&&Object.keys(a[0]).length)throw Error("Unexpected inputs left in tx=".concat(a));let i=t?e.global.outputCount:e.global.unsignedTx.outputs.length;if(e.outputs.length<i)throw Error("Not outputs inputs");let o=e.outputs.slice(i);if(o.length>1||o.length&&Object.keys(o[0]).length)throw Error("Unexpected outputs left in tx=".concat(o));return e}r._RawPSBTV0=a.struct({magic:a.magic(a.string(new Uint8Array([255])),"psbt"),global:S,inputs:a.array("global/unsignedTx/inputs/length",r.PSBTInputCoder),outputs:a.array(null,r.PSBTOutputCoder)}),r._RawPSBTV2=a.struct({magic:a.magic(a.string(new Uint8Array([255])),"psbt"),global:S,inputs:a.array("global/inputCount",r.PSBTInputCoder),outputs:a.array("global/outputCount",r.PSBTOutputCoder)}),r._DebugPSBT=a.struct({magic:a.magic(a.string(new Uint8Array([255])),"psbt"),items:a.array(null,a.apply(a.array(a.NULL,a.tuple([a.hex(i.CompactSizeLen),a.bytes(i.CompactSize)])),a.coders.dict()))}),r.RawPSBTV0=a.validate(r._RawPSBTV0,k),r.RawPSBTV2=a.validate(r._RawPSBTV2,k)},460058,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r._sortPubkeys=r.p2tr_pk=r.p2tr_ns=r.tapLeafHash=r.TAP_LEAF_VERSION=r.p2ms=r.p2wpkh=r.p2wsh=r.p2sh=r.p2pkh=r.p2pk=r.OutScript=void 0,r.checkScript=f,r.taprootListToTree=g,r.p2tr=m,r.combinations=y,r.p2tr_ms=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||p(t),{type:"tr_ms",script:r.OutScript.encode({type:"tr_ms",pubkeys:t,m:e})}},r.getAddress=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.NETWORK;if("tr"===e)return m(s.pubSchnorr(t),void 0,n).address;let a=s.pubECDSA(t);if("pkh"===e)return(0,r.p2pkh)(a,n).address;if("wpkh"===e)return(0,r.p2wpkh)(a,n).address;throw Error("getAddress: unknown type=".concat(e))},r.multisig=b,r.sortedMultisig=function(e,t){let r=arguments.length>2&&void 0!==arguments[2]&&arguments[2],n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:c.NETWORK;return b(e,t,!0,r,n)},r.WIF=function(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.NETWORK;return{encode:t=>E(s.concatBytes(t,new Uint8Array([1])).subarray(0,33),[e.wif]),decode(t){let r=w.decode(t);if(r[0]!==e.wif)throw Error("Wrong WIF prefix");if(33!==(r=r.subarray(1)).length)throw Error("Wrong WIF length");if(1!==r[32])throw Error("Wrong WIF postfix");return r.subarray(0,-1)}}},r.Address=S;let n=e.r(732557),a=e.r(561676),i=e.r(427102),o=e.r(716004),s=e.r(446598),c=e.r(446598);function l(e,t){try{return s.validatePubkey(e,t),!0}catch(e){return!1}}let u=[{encode(e){if(2===e.length&&1===e[0]&&s.isBytes(e[1])&&"4e73"===n.hex.encode(e[1]))return{type:"p2a",script:o.Script.encode(e)}},decode:e=>{if("p2a"===e.type)return[1,n.hex.decode("4e73")]}},{encode(e){if(2===e.length&&s.isBytes(e[0])&&l(e[0],s.PubT.ecdsa)&&"CHECKSIG"===e[1])return{type:"pk",pubkey:e[0]}},decode:e=>"pk"===e.type?[e.pubkey,"CHECKSIG"]:void 0},{encode(e){if(5===e.length&&"DUP"===e[0]&&"HASH160"===e[1]&&s.isBytes(e[2])&&"EQUALVERIFY"===e[3]&&"CHECKSIG"===e[4])return{type:"pkh",hash:e[2]}},decode:e=>"pkh"===e.type?["DUP","HASH160",e.hash,"EQUALVERIFY","CHECKSIG"]:void 0},{encode(e){if(3===e.length&&"HASH160"===e[0]&&s.isBytes(e[1])&&"EQUAL"===e[2])return{type:"sh",hash:e[1]}},decode:e=>"sh"===e.type?["HASH160",e.hash,"EQUAL"]:void 0},{encode(e){if(2===e.length&&0===e[0]&&s.isBytes(e[1])&&32===e[1].length)return{type:"wsh",hash:e[1]}},decode:e=>"wsh"===e.type?[0,e.hash]:void 0},{encode(e){if(2===e.length&&0===e[0]&&s.isBytes(e[1])&&20===e[1].length)return{type:"wpkh",hash:e[1]}},decode:e=>"wpkh"===e.type?[0,e.hash]:void 0},{encode(e){let t=e.length-1;if("CHECKMULTISIG"!==e[t])return;let r=e[0],n=e[t-1];if("number"!=typeof r||"number"!=typeof n)return;let a=e.slice(1,-2);if(n===a.length){for(let e of a)if(!s.isBytes(e))return;return{type:"ms",m:r,pubkeys:a}}},decode:e=>"ms"===e.type?[e.m,...e.pubkeys,e.pubkeys.length,"CHECKMULTISIG"]:void 0},{encode(e){if(2===e.length&&1===e[0]&&s.isBytes(e[1]))return{type:"tr",pubkey:e[1]}},decode:e=>"tr"===e.type?[1,e.pubkey]:void 0},{encode(e){let t=e.length-1;if("CHECKSIG"!==e[t])return;let r=[];for(let n=0;n<t;n++){let a=e[n];if(1&n){if("CHECKSIGVERIFY"!==a||n===t-1)return;continue}if(!s.isBytes(a))return;r.push(a)}return{type:"tr_ns",pubkeys:r}},decode:e=>{if("tr_ns"!==e.type)return;let t=[];for(let r=0;r<e.pubkeys.length-1;r++)t.push(e.pubkeys[r],"CHECKSIGVERIFY");return t.push(e.pubkeys[e.pubkeys.length-1],"CHECKSIG"),t}},{encode(e){let t=e.length-1;if("NUMEQUAL"!==e[t]||"CHECKSIG"!==e[1])return;let r=[],n=(0,o.OpToNum)(e[t-1]);if("number"==typeof n){for(let n=0;n<t-1;n++){let t=e[n];if(1&n){if(t!==(1===n?"CHECKSIG":"CHECKSIGADD"))throw Error("OutScript.encode/tr_ms: wrong element");continue}if(!s.isBytes(t))throw Error("OutScript.encode/tr_ms: wrong key element");r.push(t)}return{type:"tr_ms",pubkeys:r,m:n}}},decode:e=>{if("tr_ms"!==e.type)return;let t=[e.pubkeys[0],"CHECKSIG"];for(let r=1;r<e.pubkeys.length;r++)t.push(e.pubkeys[r],"CHECKSIGADD");return t.push(e.m,"NUMEQUAL"),t}},{encode:e=>({type:"unknown",script:o.Script.encode(e)}),decode:e=>"unknown"===e.type?o.Script.decode(e.script):void 0}],d=a.apply(o.Script,a.coders.match(u));function h(e,t){if(!s.equalBytes(e.hash,s.sha256(t)))throw Error("checkScript: wsh wrong witnessScript hash");let n=r.OutScript.decode(t);if("tr"===n.type||"tr_ns"===n.type||"tr_ms"===n.type)throw Error("checkScript: P2".concat(n.type," cannot be wrapped in P2SH"));if("wpkh"===n.type||"sh"===n.type)throw Error("checkScript: P2".concat(n.type," cannot be wrapped in P2WSH"))}function f(e,t,n){if(e){let a=r.OutScript.decode(e);if("tr_ns"===a.type||"tr_ms"===a.type||"ms"===a.type||"pk"==a.type)throw Error("checkScript: non-wrapped ".concat(a.type));if("sh"===a.type&&t){if(!s.equalBytes(a.hash,s.hash160(t)))throw Error("checkScript: sh wrong redeemScript hash");let e=r.OutScript.decode(t);if("tr"===e.type||"tr_ns"===e.type||"tr_ms"===e.type)throw Error("checkScript: P2".concat(e.type," cannot be wrapped in P2SH"));if("sh"===e.type)throw Error("checkScript: P2SH cannot be wrapped in P2SH")}"wsh"===a.type&&n&&h(a,n)}if(t){let e=r.OutScript.decode(t);"wsh"===e.type&&n&&h(e,n)}}function p(e){let t={};for(let r of e){let a=n.hex.encode(r);if(t[a])throw Error("Multisig: non-uniq pubkey: ".concat(e.map(n.hex.encode)));t[a]=!0}}function g(e){let t=Array.from(e);for(;t.length>=2;){t.sort((e,t)=>(t.weight||1)-(e.weight||1));let e=t.pop(),r=t.pop(),n=((null==r?void 0:r.weight)||1)+((null==e?void 0:e.weight)||1);t.push({weight:n,childs:[(null==r?void 0:r.childs)||r,(null==e?void 0:e.childs)||e]})}let r=t[0];return(null==r?void 0:r.childs)||r}function m(e,t){let u,d,h=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.NETWORK,f=arguments.length>3&&void 0!==arguments[3]&&arguments[3],p=arguments.length>4?arguments[4]:void 0;if(!e&&!t)throw Error("p2tr: should have pubKey or scriptTree (or both)");let m="string"==typeof e?n.hex.decode(e):e||s.TAPROOT_UNSPENDABLE_KEY;if(!l(m,s.PubT.schnorr))throw Error("p2tr: non-schnorr pubkey");let y=t?function e(t){let r=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];if(!t)throw Error("taprootAddPath: empty tree");if("leaf"===t.type)return{...t,path:r};if("branch"!==t.type)throw Error("taprootAddPath: wrong type=".concat(t));return{...t,path:r,left:e(t.left,[t.right.hash,...r]),right:e(t.right,[t.left.hash,...r])}}(function e(t,i){let c=arguments.length>2&&void 0!==arguments[2]&&arguments[2],l=arguments.length>3?arguments[3]:void 0;if(!t)throw Error("taprootHashTree: empty tree");if(Array.isArray(t)&&1===t.length&&(t=t[0]),!Array.isArray(t)){let{leafVersion:e,script:u}=t;if(t.tapLeafScript||t.tapMerkleRoot&&!s.equalBytes(t.tapMerkleRoot,a.EMPTY))throw Error("P2TR: tapRoot leafScript cannot have tree");let d="string"==typeof u?n.hex.decode(u):u;if(!s.isBytes(d))throw Error("checkScript: wrong script type=".concat(d));return!function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],i=arguments.length>3?arguments[3]:void 0,c=r.OutScript.decode(e);if("unknown"===c.type){if(i){let t=a.apply(o.Script,a.coders.match(i)).decode(e);if(void 0!==t){if("string"!=typeof t.type||!t.type.startsWith("tr_"))throw Error("P2TR: invalid custom type=".concat(t.type));return}}if(n)return}if(!["tr_ns","tr_ms"].includes(c.type))throw Error("P2TR: invalid leaf script=".concat(c.type));if(!n&&c.pubkeys)for(let e of c.pubkeys){if(s.equalBytes(e,s.TAPROOT_UNSPENDABLE_KEY))throw Error("Unspendable taproot key in leaf script");if(s.equalBytes(e,t))throw Error("Using P2TR with leaf script with same key as internal key is not supported")}}(d,i,c,l),{type:"leaf",version:e,script:d,hash:(0,r.tapLeafHash)(d,e)}}if(2!==t.length&&(t=g(t)),2!==t.length)throw Error("hashTree: non binary tree!");let u=e(t[0],i,c,l),d=e(t[1],i,c,l),[h,f]=[u.hash,d.hash];return -1===s.compareBytes(f,h)&&([h,f]=[f,h]),{type:"branch",left:u,right:d,hash:s.tagSchnorr("TapBranch",h,f)}}(t,m,f,p)):void 0,b=y?y.hash:void 0,[w,_]=s.taprootTweakPubkey(m,b||a.EMPTY);y&&(u=(function e(t){if(!t)throw Error("taprootAddPath: empty tree");if("leaf"===t.type)return[t];if("branch"!==t.type)throw Error("taprootWalkTree: wrong type=".concat(t));return[...e(t.left),...e(t.right)]})(y).map(e=>({...e,controlBlock:i.TaprootControlBlock.encode({version:(e.version||r.TAP_LEAF_VERSION)+_,internalKey:m,merklePath:e.path})}))),u&&(d=u.map(e=>[i.TaprootControlBlock.decode(e.controlBlock),s.concatBytes(e.script,new Uint8Array([e.version||r.TAP_LEAF_VERSION]))]));let v={type:"tr",script:r.OutScript.encode({type:"tr",pubkey:w}),address:S(h).encode({type:"tr",pubkey:w}),tweakedPubkey:w,tapInternalKey:m};return u&&(v.leaves=u),d&&(v.tapLeafScript=d),b&&(v.tapMerkleRoot=b),v}function y(e,t){let r=[];if(!Array.isArray(t))throw Error("combinations: lst arg should be array");let n=t.length;if(e>n)throw Error("combinations: m > lst.length, no combinations possible");let a=Array.from({length:e},(e,t)=>t),i=a.length-1;r:for(;;){r.push(a.map(e=>t[e])),a[i]+=1;let o=i;for(;o>=0&&a[o]>n-e+o;o--){if(a[o]=0,0===o)break r;a[o-1]+=1}for(o+=1;o<a.length;o++)a[o]=a[o-1]+1}return r}function b(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=arguments.length>4&&void 0!==arguments[4]?arguments[4]:c.NETWORK,o=(0,r.p2ms)(e,n?(0,r._sortPubkeys)(t):t);return a?(0,r.p2wsh)(o,i):(0,r.p2sh)(o,i)}r.OutScript=a.validate(d,e=>{if("pk"===e.type&&!l(e.pubkey,s.PubT.ecdsa))throw Error("OutScript/pk: wrong key");if(("pkh"===e.type||"sh"===e.type||"wpkh"===e.type)&&(!s.isBytes(e.hash)||20!==e.hash.length))throw Error("OutScript/".concat(e.type,": wrong hash"));if("wsh"===e.type&&(!s.isBytes(e.hash)||32!==e.hash.length))throw Error("OutScript/wsh: wrong hash");if("tr"===e.type&&(!s.isBytes(e.pubkey)||!l(e.pubkey,s.PubT.schnorr)))throw Error("OutScript/tr: wrong taproot public key");if(("ms"===e.type||"tr_ns"===e.type||"tr_ms"===e.type)&&!Array.isArray(e.pubkeys))throw Error("OutScript/multisig: wrong pubkeys array");if("ms"===e.type){let t=e.pubkeys.length;for(let t of e.pubkeys)if(!l(t,s.PubT.ecdsa))throw Error("OutScript/multisig: wrong pubkey");if(e.m<=0||t>16||e.m>t)throw Error("OutScript/multisig: invalid params")}if("tr_ns"===e.type||"tr_ms"===e.type){for(let t of e.pubkeys)if(!l(t,s.PubT.schnorr))throw Error("OutScript/".concat(e.type,": wrong pubkey"))}if("tr_ms"===e.type){let t=e.pubkeys.length;if(e.m<=0||t>999||e.m>t)throw Error("OutScript/tr_ms: invalid params")}return e}),r.p2pk=function(e){if(arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.NETWORK,!l(e,s.PubT.ecdsa))throw Error("P2PK: invalid publicKey");return{type:"pk",script:r.OutScript.encode({type:"pk",pubkey:e})}},r.p2pkh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.NETWORK;if(!l(e,s.PubT.ecdsa))throw Error("P2PKH: invalid publicKey");let n=s.hash160(e);return{type:"pkh",script:r.OutScript.encode({type:"pkh",hash:n}),address:S(t).encode({type:"pkh",hash:n})}},r.p2sh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.NETWORK,n=e.script;if(!s.isBytes(n))throw Error("Wrong script: ".concat(typeof e.script,", expected Uint8Array"));let a=s.hash160(n);f(r.OutScript.encode({type:"sh",hash:a}),n,e.witnessScript);let i={type:"sh",redeemScript:n,script:r.OutScript.encode({type:"sh",hash:a}),address:S(t).encode({type:"sh",hash:a})};return e.witnessScript&&(i.witnessScript=e.witnessScript),i},r.p2wsh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.NETWORK,n=e.script;if(!s.isBytes(n))throw Error("Wrong script: ".concat(typeof n,", expected Uint8Array"));let a=s.sha256(n);return f(r.OutScript.encode({type:"wsh",hash:a}),void 0,n),{type:"wsh",witnessScript:n,script:r.OutScript.encode({type:"wsh",hash:a}),address:S(t).encode({type:"wsh",hash:a})}},r.p2wpkh=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:c.NETWORK;if(!l(e,s.PubT.ecdsa))throw Error("P2WPKH: invalid publicKey");if(65===e.length)throw Error("P2WPKH: uncompressed public key");let n=s.hash160(e);return{type:"wpkh",script:r.OutScript.encode({type:"wpkh",hash:n}),address:S(t).encode({type:"wpkh",hash:n})}},r.p2ms=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||p(t),{type:"ms",script:r.OutScript.encode({type:"ms",pubkeys:t,m:e})}},r.TAP_LEAF_VERSION=192,r.tapLeafHash=function(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:r.TAP_LEAF_VERSION;return s.tagSchnorr("TapLeaf",new Uint8Array([t]),o.VarBytes.encode(e))},r.p2tr_ns=function(e,t){let n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return n||p(t),y(e,t).map(e=>({type:"tr_ns",script:r.OutScript.encode({type:"tr_ns",pubkeys:e})}))},r.p2tr_pk=e=>(0,r.p2tr_ns)(1,[e],void 0)[0],r._sortPubkeys=e=>Array.from(e).sort(s.compareBytes);let w=(0,n.createBase58check)(s.sha256);function _(e,t){if(t.length<2||t.length>40)throw Error("Witness: invalid length");if(e>16)throw Error("Witness: invalid version");if(0===e&&20!==t.length&&32!==t.length)throw Error("Witness: invalid length for version")}function v(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:c.NETWORK;_(e,t);let a=0===e?n.bech32:n.bech32m;return a.encode(r.bech32,[e].concat(a.toWords(t)))}function E(e,t){return w.encode(s.concatBytes(Uint8Array.from(t),e))}function S(){let e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:c.NETWORK;return{encode(t){let{type:r}=t;if("wpkh"===r||"wsh"===r)return v(0,t.hash,e);if("tr"===r)return v(1,t.pubkey,e);if("pkh"===r)return E(t.hash,[e.pubKeyHash]);if("sh"===r)return E(t.hash,[e.scriptHash]);throw Error("Unknown address type=".concat(r))},decode(t){if(t.length<14||t.length>74)throw Error("Invalid address length");if(e.bech32&&t.toLowerCase().startsWith("".concat(e.bech32,"1"))){let r;try{if(r=n.bech32.decode(t),0!==r.words[0])throw Error("bech32: wrong version=".concat(r.words[0]))}catch(e){if(0===(r=n.bech32m.decode(t)).words[0])throw Error("bech32m: wrong version=".concat(r.words[0]))}if(r.prefix!==e.bech32)throw Error("wrong bech32 prefix=".concat(r.prefix));let[a,...i]=r.words,o=n.bech32.fromWords(i);if(_(a,o),0===a&&32===o.length)return{type:"wsh",hash:o};if(0===a&&20===o.length)return{type:"wpkh",hash:o};if(1===a&&32===o.length)return{type:"tr",pubkey:o};else throw Error("Unknown witness program")}let r=w.decode(t);if(21!==r.length)throw Error("Invalid base58 address");if(r[0]===e.pubKeyHash)return{type:"pkh",hash:r.slice(1)};if(r[0]===e.scriptHash)return{type:"sh",hash:r.slice(1)};throw Error("Invalid address prefix=".concat(r[0]))}}}},960474,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r._Estimator=r._cmpBig=r.SigHash=r.PSBTCombine=r.DEFAULT_SEQUENCE=r.Decimal=r.bip32Path=r.TaprootControlBlock=r._DebugPSBT=r.WIF=r.taprootListToTree=r.sortedMultisig=r.OutScript=r.getAddress=r.combinations=r.Address=r._sortPubkeys=r.utils=r.selectUTXO=r.getInputType=r.TEST_NETWORK=r.TAPROOT_UNSPENDABLE_KEY=r.NETWORK=r.Transaction=r.ScriptNum=r.Script=r.RawWitness=r.RawTx=r.OP=r.MAX_SCRIPT_BYTE_LENGTH=r.CompactSize=r.p2wsh=r.p2wpkh=r.p2tr_pk=r.p2tr_ns=r.p2tr_ms=r.p2tr=r.p2sh=r.p2pkh=r.p2pk=r.p2ms=r.multisig=void 0;let n=e.r(446598);var a=e.r(460058);Object.defineProperty(r,"multisig",{enumerable:!0,get:function(){return a.multisig}}),Object.defineProperty(r,"p2ms",{enumerable:!0,get:function(){return a.p2ms}}),Object.defineProperty(r,"p2pk",{enumerable:!0,get:function(){return a.p2pk}}),Object.defineProperty(r,"p2pkh",{enumerable:!0,get:function(){return a.p2pkh}}),Object.defineProperty(r,"p2sh",{enumerable:!0,get:function(){return a.p2sh}}),Object.defineProperty(r,"p2tr",{enumerable:!0,get:function(){return a.p2tr}}),Object.defineProperty(r,"p2tr_ms",{enumerable:!0,get:function(){return a.p2tr_ms}}),Object.defineProperty(r,"p2tr_ns",{enumerable:!0,get:function(){return a.p2tr_ns}}),Object.defineProperty(r,"p2tr_pk",{enumerable:!0,get:function(){return a.p2tr_pk}}),Object.defineProperty(r,"p2wpkh",{enumerable:!0,get:function(){return a.p2wpkh}}),Object.defineProperty(r,"p2wsh",{enumerable:!0,get:function(){return a.p2wsh}});var i=e.r(716004);Object.defineProperty(r,"CompactSize",{enumerable:!0,get:function(){return i.CompactSize}}),Object.defineProperty(r,"MAX_SCRIPT_BYTE_LENGTH",{enumerable:!0,get:function(){return i.MAX_SCRIPT_BYTE_LENGTH}}),Object.defineProperty(r,"OP",{enumerable:!0,get:function(){return i.OP}}),Object.defineProperty(r,"RawTx",{enumerable:!0,get:function(){return i.RawTx}}),Object.defineProperty(r,"RawWitness",{enumerable:!0,get:function(){return i.RawWitness}}),Object.defineProperty(r,"Script",{enumerable:!0,get:function(){return i.Script}}),Object.defineProperty(r,"ScriptNum",{enumerable:!0,get:function(){return i.ScriptNum}});var o=e.r(552535);Object.defineProperty(r,"Transaction",{enumerable:!0,get:function(){return o.Transaction}});var s=e.r(446598);Object.defineProperty(r,"NETWORK",{enumerable:!0,get:function(){return s.NETWORK}}),Object.defineProperty(r,"TAPROOT_UNSPENDABLE_KEY",{enumerable:!0,get:function(){return s.TAPROOT_UNSPENDABLE_KEY}}),Object.defineProperty(r,"TEST_NETWORK",{enumerable:!0,get:function(){return s.TEST_NETWORK}});var c=e.r(223838);Object.defineProperty(r,"getInputType",{enumerable:!0,get:function(){return c.getInputType}}),Object.defineProperty(r,"selectUTXO",{enumerable:!0,get:function(){return c.selectUTXO}}),r.utils={isBytes:n.isBytes,concatBytes:n.concatBytes,compareBytes:n.compareBytes,pubSchnorr:n.pubSchnorr,randomPrivateKeyBytes:n.randomPrivateKeyBytes,taprootTweakPubkey:n.taprootTweakPubkey};var l=e.r(460058);Object.defineProperty(r,"_sortPubkeys",{enumerable:!0,get:function(){return l._sortPubkeys}}),Object.defineProperty(r,"Address",{enumerable:!0,get:function(){return l.Address}}),Object.defineProperty(r,"combinations",{enumerable:!0,get:function(){return l.combinations}}),Object.defineProperty(r,"getAddress",{enumerable:!0,get:function(){return l.getAddress}}),Object.defineProperty(r,"OutScript",{enumerable:!0,get:function(){return l.OutScript}}),Object.defineProperty(r,"sortedMultisig",{enumerable:!0,get:function(){return l.sortedMultisig}}),Object.defineProperty(r,"taprootListToTree",{enumerable:!0,get:function(){return l.taprootListToTree}}),Object.defineProperty(r,"WIF",{enumerable:!0,get:function(){return l.WIF}});var u=e.r(427102);Object.defineProperty(r,"_DebugPSBT",{enumerable:!0,get:function(){return u._DebugPSBT}}),Object.defineProperty(r,"TaprootControlBlock",{enumerable:!0,get:function(){return u.TaprootControlBlock}});var d=e.r(552535);Object.defineProperty(r,"bip32Path",{enumerable:!0,get:function(){return d.bip32Path}}),Object.defineProperty(r,"Decimal",{enumerable:!0,get:function(){return d.Decimal}}),Object.defineProperty(r,"DEFAULT_SEQUENCE",{enumerable:!0,get:function(){return d.DEFAULT_SEQUENCE}}),Object.defineProperty(r,"PSBTCombine",{enumerable:!0,get:function(){return d.PSBTCombine}}),Object.defineProperty(r,"SigHash",{enumerable:!0,get:function(){return d.SigHash}});var h=e.r(223838);Object.defineProperty(r,"_cmpBig",{enumerable:!0,get:function(){return h._cmpBig}}),Object.defineProperty(r,"_Estimator",{enumerable:!0,get:function(){return h._Estimator}})},388125,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BitcoinOutputClaimHandler=void 0;let n=e.r(991989),a=e.r(288128),i=e.r(441484),o=e.r(879509),s=e.r(960474),c=e.r(843943);(0,i.getLogger)("BitcoinOutputClaimHandler: ");class l extends o.IBitcoinClaimHandler{serializeCommitment(e){return[a.hash.computePoseidonHashOnElements([(0,i.toBigInt)(e.amount),(0,i.poseidonHashRange)(e.output)]),...super.serializeCommitment(e)]}async getWitness(e,t,r,n){if(!t.isClaimHandler(this.address))throw Error("Invalid claim handler");let a=s.Transaction.fromRaw(c.Buffer.from(r.tx.hex,"hex")).getOutput(r.vout),{initialTxns:o,witness:l}=await this._getWitness(e,t,r,{output:c.Buffer.from(a.script),amount:a.amount});return l.push(...(0,i.bufferToByteArray)(c.Buffer.from(r.tx.hex,"hex"))),l.push(BigInt(r.vout)),{initialTxns:o,witness:l}}getGas(e){return l.gas}getType(){return l.type}}r.BitcoinOutputClaimHandler=l,l.type=n.ChainSwapType.CHAIN,l.gas={l1DataGas:0,l2Gas:4e8,l1Gas:0}},467436,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BitcoinNoncedOutputClaimHandler=void 0;let n=e.r(991989),a=e.r(288128),i=e.r(441484),o=e.r(879509),s=e.r(960474),c=e.r(843943);(0,i.getLogger)("BitcoinNoncedOutputClaimHandler: ");class l extends o.IBitcoinClaimHandler{serializeCommitment(e){return[a.hash.computePoseidonHashOnElements([(0,i.toBigInt)(e.nonce),(0,i.toBigInt)(e.amount),(0,i.poseidonHashRange)(e.output)]),...super.serializeCommitment(e)]}async getWitness(e,t,r,n){if(!t.isClaimHandler(this.address))throw Error("Invalid claim handler");let a=s.Transaction.fromRaw(c.Buffer.from(r.tx.hex,"hex")),o=a.getOutput(r.vout),{initialTxns:l,witness:u}=await this._getWitness(e,t,r,{output:c.Buffer.from(o.script),amount:o.amount,nonce:function(e){let t=BigInt(e.lockTime-5e8);if(t<0n)throw Error("Locktime too low!");return t<<24n|16777215n&BigInt(e.getInput(0).sequence)}(a)});return u.push(...(0,i.bufferToByteArray)(c.Buffer.from(r.tx.hex,"hex"))),u.push(BigInt(r.vout)),{initialTxns:l,witness:u}}getGas(e){return l.gas}getType(){return l.type}}r.BitcoinNoncedOutputClaimHandler=l,l.type=n.ChainSwapType.CHAIN_NONCED,l.gas={l1DataGas:0,l2Gas:4e8,l1Gas:0}},3875,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.claimHandlersList=void 0;let n=e.r(949330),a=e.r(770686),i=e.r(388125),o=e.r(467436);r.claimHandlersList=[n.HashlockClaimHandler,a.BitcoinTxIdClaimHandler,i.BitcoinOutputClaimHandler,o.BitcoinNoncedOutputClaimHandler]},537259,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetSwapClaim=void 0;let n=e.r(991989),a=e.r(441484),i=e.r(300019),o=e.r(604616),s=e.r(880747);class c extends i.StarknetSwapModule{Claim(e,t,r,n){return new o.StarknetAction(e,this.root,this.swapContract.populateTransaction.claim(t.toEscrowStruct(),r),(0,s.starknetGasAdd)(t.payOut?c.GasCosts.CLAIM_PAY_OUT:c.GasCosts.CLAIM,n))}async txsClaimWithSecret(e,t,r,i,o){if(i&&await this.contract.isExpired(t.claimer.toString(),t))throw new n.SwapDataVerificationError("Not enough time to reliably pay the invoice");let s=this.contract.claimHandlersByAddress[(0,a.toHex)(t.claimHandler)];if(null==s)throw new n.SwapDataVerificationError("Unknown claim handler!");if(s.getType()!==n.ChainSwapType.HTLC)throw new n.SwapDataVerificationError("Invalid claim handler!");null!=o||(o=await this.root.Fees.getFeeRate());let{initialTxns:c,witness:l}=await s.getWitness(e,t,r,o),u=this.Claim(e,t,l,s.getGas(t));return await u.addToTxs(c,o),this.logger.debug("txsClaimWithSecret(): creating claim transaction, swap: "+t.getClaimHash()+" witness: ",l.map(a.toHex)),c}async txsClaimWithTxData(e,t,r,i,o,s,c,l){let u=this.contract.claimHandlersByAddress[(0,a.toHex)(t.claimHandler)];if(null==u)throw new n.SwapDataVerificationError("Unknown claim handler!");if(u.getType()!==n.ChainSwapType.CHAIN_NONCED&&u.getType()!==n.ChainSwapType.CHAIN_TXID&&u.getType()!==n.ChainSwapType.CHAIN)throw new n.SwapDataVerificationError("Invalid claim handler!");null!=l||(l=await this.root.Fees.getFeeRate());let{initialTxns:d,witness:h}=await u.getWitness(e,t,{tx:r,vout:o,requiredConfirmations:i,commitedHeader:s,btcRelay:this.contract.btcRelay,synchronizer:c},l),f=this.Claim(e,t,h,u.getGas(t));return await f.addToTxs(d,l),d}async getClaimFee(e,t){null!=t||(t=await this.root.Fees.getFeeRate());let r=e.payOut?c.GasCosts.CLAIM_PAY_OUT:c.GasCosts.CLAIM,n=this.contract.claimHandlersByAddress[(0,a.toHex)(e.claimHandler)];return null!=n&&(r=(0,s.starknetGasAdd)(r,n.getGas(e))),s.StarknetFees.getGasFee(r,t)}}r.StarknetSwapClaim=c,c.GasCosts={CLAIM:{l1DataGas:750,l2Gas:4e6,l1Gas:0},CLAIM_PAY_OUT:{l1DataGas:900,l2Gas:6e6,l1Gas:0}}},563641,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetSwapContract=void 0;let n=e.r(991989),a=e.r(843943),i=e.r(847748),o=e.r(338777),s=e.r(288128),c=e.r(54614),l=e.r(441484),u=e.r(162773),d=e.r(166269),h=e.r(177650),f=e.r(557011),p=e.r(3875),g=e.r(537259),m=e.r(14582),y={[s.constants.StarknetChainId.SN_SEPOLIA]:"0x017bf50dd28b6d823a231355bb25813d4396c8e19d2df03026038714a22f0413",[s.constants.StarknetChainId.SN_MAIN]:"0x04f278e1f19e495c3b1dd35ef307c4f7510768ed95481958fbae588bd173f79a"},b={[s.constants.StarknetChainId.SN_SEPOLIA]:{[n.ChainSwapType.HTLC]:"0x04a57ea54d4637c352aad1bbee046868926a11702216a0aaf7eeec1568be2d7b",[n.ChainSwapType.CHAIN_TXID]:"0x04c7cde88359e14b6f6f779f8b9d8310cee37e91a6f143f855ae29fab33c396e",[n.ChainSwapType.CHAIN]:"0x051bef6f5fd12e2832a7d38653bdfc8eb84ba7eb7a4aada5b87ef38a9999cf17",[n.ChainSwapType.CHAIN_NONCED]:"0x050e50eacd16da414f2c3a7c3570fd5e248974c6fe757d41acbf72d2836fa0a1"},[s.constants.StarknetChainId.SN_MAIN]:{[n.ChainSwapType.HTLC]:"0x07b74b50a883ebee262b6db0e3c0c697670c6f30e3d610e75faf33a89c46aa2a",[n.ChainSwapType.CHAIN_TXID]:"0x016c2db2b03f39cf4fd7f871035000f66b62307d9983056e33a38315da8a44dc",[n.ChainSwapType.CHAIN]:"0x02c45a81c4a48d0645a0a199e620061e8a55dcc9c2b5946d050eaeeddba64e9a",[n.ChainSwapType.CHAIN_NONCED]:"0x0019b5480dd7ed8ded10a09437b0a7a30b8997b4ef139deb24ff8c86f995d84f"}},w={[s.constants.StarknetChainId.SN_SEPOLIA]:{timelock:"0x034b8f28b3ca979036cb2849cfa3af7f67207459224b6ca5ce2474aa398ec3e7"},[s.constants.StarknetChainId.SN_MAIN]:{timelock:"0x06a59659990c2aefbf7239f6d911617b3ae60b79cb3364f3bd242a6ca8f4f4f7"}};class _ extends o.StarknetContractBase{async start(){}preFetchForInitSignatureVerification(){return this.Init.preFetchForInitSignatureVerification()}getInitSignature(e,t,r,n,a){return this.Init.signSwapInitialization(e,t,r)}isValidInitAuthorization(e,t,r,n,a){let{timeout:i,prefix:o,signature:s}=r;return this.Init.isSignatureValid(e,t,i,o,s,a)}getInitAuthorizationExpiry(e,t,r){let{timeout:n,prefix:a,signature:i}=t;return this.Init.getSignatureExpiry(n)}isInitAuthorizationExpired(e,t){let{timeout:r,prefix:n,signature:a}=t;return this.Init.isSignatureExpired(r)}getRefundSignature(e,t,r){return this.Refund.signSwapRefund(e,t,r)}isValidRefundAuthorization(e,t){let{timeout:r,prefix:n,signature:a}=t;return this.Refund.isSignatureValid(e,r,n,a)}getDataSignature(e,t){return this.Chain.Signatures.getDataSignature(e,t)}isValidDataSignature(e,t,r){return this.Chain.Signatures.isValidDataSignature(e,t,r)}async isClaimable(e,t){return!(!t.isClaimer(e)||await this.isExpired(e,t))&&await this.isCommited(t)}async isCommited(e){return 1===Number((await this.contract.get_hash_state("0x"+e.getEscrowHash())).state)}isExpired(e,t){let r=BigInt(Math.floor(Date.now()/1e3));return t.isClaimer(e)&&(r+=BigInt(this.claimGracePeriod)),t.isOfferer(e)&&(r-=BigInt(this.refundGracePeriod)),Promise.resolve(t.getExpiry()<r)}async isRequestRefundable(e,t){return!!t.isOfferer(e)&&!!await this.isExpired(e,t)&&await this.isCommited(t)}getHashForTxId(e,t){return(0,l.bigNumberishToBuffer)(this.claimHandlersBySwapType[n.ChainSwapType.CHAIN_TXID].getCommitment({txId:e,confirmations:t,btcRelay:this.btcRelay}),32)}getHashForOnchain(e,t,r,a){let i;return i=null==a||0n===a?this.claimHandlersBySwapType[n.ChainSwapType.CHAIN].getCommitment({output:e,amount:t,confirmations:r,btcRelay:this.btcRelay}):this.claimHandlersBySwapType[n.ChainSwapType.CHAIN_NONCED].getCommitment({output:e,amount:t,nonce:a,confirmations:r,btcRelay:this.btcRelay}),(0,l.bigNumberishToBuffer)(i,32)}getHashForHtlc(e){return(0,l.bigNumberishToBuffer)(this.claimHandlersBySwapType[n.ChainSwapType.HTLC].getCommitment(e),32)}getExtraData(e,t,r,i){null==i&&(i=0n);let o=a.Buffer.from((0,m.sha256)(a.Buffer.concat([n.BigIntBufferUtils.toBuffer(t,"le",8),e])));return a.Buffer.concat([o,n.BigIntBufferUtils.toBuffer(i,"be",8),n.BigIntBufferUtils.toBuffer(BigInt(r),"be",2)])}async getCommitStatus(e,t){let r=t.getEscrowHash(),a=await this.contract.get_hash_state("0x"+r),i=Number(a.state),o=Number(a.finish_blockheight);switch(i){case 1:if(t.isOfferer(e)&&await this.isExpired(e,t))return{type:n.SwapCommitStateType.REFUNDABLE};return{type:n.SwapCommitStateType.COMMITED};case 2:return{type:n.SwapCommitStateType.PAID,getTxBlock:async()=>({blockTime:await this.Chain.Blocks.getBlockTime(o),blockHeight:o}),getClaimTxId:async()=>{let e=await this.Events.getContractBlockEvents(["escrow_manager::events::Claim"],[null,null,null,"0x"+r],o,o);return 0===e.length?null:e[0].txHash},getClaimResult:async()=>{let e=await this.Events.getContractBlockEvents(["escrow_manager::events::Claim"],[null,null,null,"0x"+r],o,o);if(0===e.length)return null;let t=e[0],n=(0,l.toHex)(t.params.claim_handler),a=this.claimHandlersByAddress[n];return null==a?(s.logger.warn("getCommitStatus(): getClaimResult("+r+"): Unknown claim handler with claim: "+n),null):a.parseWitnessResult(t.params.witness_result)}};default:return{type:await this.isExpired(e,t)?n.SwapCommitStateType.EXPIRED:n.SwapCommitStateType.NOT_COMMITED,getTxBlock:async()=>({blockTime:await this.Chain.Blocks.getBlockTime(o),blockHeight:o}),getClaimTxId:async()=>{let e=await this.Events.getContractBlockEvents(["escrow_manager::events::Refund"],[null,null,null,"0x"+r],o,o);return 0===e.length?null:e[0].txHash}}}}async getCommitedData(e){return null}createSwapData(e,t,r,n,a,i,o,s,u,d,h,f){var p,g;let m=arguments.length>12&&void 0!==arguments[12]?arguments[12]:this.Chain.Tokens.getNativeCurrencyAddress();return Promise.resolve(new c.StarknetSwapData(t,r,n,this.timelockRefundHandler.address,null==(g=this.claimHandlersBySwapType)||null==(p=g[e])?void 0:p.address,d,u,u,o,"0x"+i,(0,l.toHex)(s),a,m,h,f,e,null))}async getBalance(e,t,r){return r?await this.getIntermediaryBalance(e,t):await this.Chain.getBalance(e,t)}getIntermediaryData(e,t){return this.LpVault.getIntermediaryData(e,t)}getIntermediaryReputation(e,t){return this.LpVault.getIntermediaryReputation(e,t)}getIntermediaryBalance(e,t){return this.LpVault.getIntermediaryBalance(e,t)}async txsClaimWithSecret(e,t,r,n,a,i,o){return this.Claim.txsClaimWithSecret("string"==typeof e?e:e.getAddress(),t,r,n,i)}async txsClaimWithTxData(e,t,r,n,a,i,o,s,c){return this.Claim.txsClaimWithTxData("string"==typeof e?e:e.getAddress(),t,r,n,a,i,o,c)}txsRefund(e,t,r,n,a){return this.Refund.txsRefund(e,t,r,a)}txsRefundWithAuthorization(e,t,r,n,a,i){let{timeout:o,prefix:s,signature:c}=r;return this.Refund.txsRefundWithAuthorization(e,t,o,s,c,n,i)}txsInit(e,t,r,n,a){let{timeout:i,prefix:o,signature:s}=r;return this.Init.txsInit(e,t,i,o,s,n,a)}txsWithdraw(e,t,r,n){return this.LpVault.txsWithdraw(e,t,r,n)}txsDeposit(e,t,r,n){return this.LpVault.txsDeposit(e,t,r,n)}async claimWithSecret(e,t,r,n,a,i){let o=await this.Claim.txsClaimWithSecret(e.getAddress(),t,r,n,null==i?void 0:i.feeRate),[s]=await this.Chain.sendAndConfirm(e,o,null==i?void 0:i.waitForConfirmation,null==i?void 0:i.abortSignal);return s}async claimWithTxData(e,t,r,n,a,i,o,s,c){let l=await this.Claim.txsClaimWithTxData(e.getAddress(),t,r,n,a,i,o,null==c?void 0:c.feeRate);if(null===l)throw Error("Btc relay not synchronized to required blockheight!");let[u]=await this.Chain.sendAndConfirm(e,l,null==c?void 0:c.waitForConfirmation,null==c?void 0:c.abortSignal);return u}async refund(e,t,r,n,a){let i=await this.txsRefund(e.getAddress(),t,r,n,null==a?void 0:a.feeRate),[o]=await this.Chain.sendAndConfirm(e,i,null==a?void 0:a.waitForConfirmation,null==a?void 0:a.abortSignal);return o}async refundWithAuthorization(e,t,r,n,a,i){let o=await this.txsRefundWithAuthorization(e.getAddress(),t,r,n,a,null==i?void 0:i.feeRate),[s]=await this.Chain.sendAndConfirm(e,o,null==i?void 0:i.waitForConfirmation,null==i?void 0:i.abortSignal);return s}async init(e,t,r,n,a){if(t.isPayIn()){if(!t.isOfferer(e.getAddress()))throw Error("Invalid signer provided!")}else if(!t.isClaimer(e.getAddress()))throw Error("Invalid signer provided!");let i=await this.txsInit(e.getAddress(),t,r,n,null==a?void 0:a.feeRate),[o]=await this.Chain.sendAndConfirm(e,i,null==a?void 0:a.waitForConfirmation,null==a?void 0:a.abortSignal);return o}async withdraw(e,t,r,n){let a=await this.LpVault.txsWithdraw(e.getAddress(),t,r,null==n?void 0:n.feeRate),[i]=await this.Chain.sendAndConfirm(e,a,null==n?void 0:n.waitForConfirmation,null==n?void 0:n.abortSignal,!1);return i}async deposit(e,t,r,n){let a=await this.LpVault.txsDeposit(e.getAddress(),t,r,null==n?void 0:n.feeRate),[i]=await this.Chain.sendAndConfirm(e,a,null==n?void 0:n.waitForConfirmation,null==n?void 0:n.abortSignal,!1);return i}getInitPayInFeeRate(e,t,r,n){return this.Chain.Fees.getFeeRate()}getInitFeeRate(e,t,r,n){return this.Chain.Fees.getFeeRate()}getRefundFeeRate(e){return this.Chain.Fees.getFeeRate()}getClaimFeeRate(e,t){return this.Chain.Fees.getFeeRate()}getClaimFee(e,t,r){return this.Claim.getClaimFee(t,r)}getCommitFee(e,t){return this.Init.getInitFee(e,t)}getRefundFee(e,t){return this.Refund.getRefundFee(e,t)}constructor(e,t,r=y[e.starknetChainId],n){super(e,r,i.EscrowManagerAbi),this.chainId="STARKNET",this.claimWithSecretTimeout=180,this.claimWithTxDataTimeout=180,this.refundTimeout=180,this.claimGracePeriod=600,this.refundGracePeriod=600,this.authGracePeriod=30,this.claimHandlersByAddress={},this.claimHandlersBySwapType={},this.refundHandlersByAddress={},this.Init=new h.StarknetSwapInit(e,this),this.Refund=new f.StarknetSwapRefund(e,this),this.Claim=new g.StarknetSwapClaim(e,this),this.LpVault=new d.StarknetLpVault(e,this),this.btcRelay=t,null!=n||(n={}),null!=n.refund||(n.refund={}),n.refund={...w[e.starknetChainId],...n.refund},null!=n.claim||(n.claim={}),n.claim={...b[e.starknetChainId],...n.claim},p.claimHandlersList.forEach(e=>{let t=new e(n.claim[e.type]);this.claimHandlersByAddress[(0,l.toHex)(t.address)]=t,this.claimHandlersBySwapType[e.type]=t}),this.timelockRefundHandler=new u.TimelockRefundHandler(n.refund.timelock),this.refundHandlersByAddress[this.timelockRefundHandler.address]=this.timelockRefundHandler}}r.StarknetSwapContract=_},542308,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},275768,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetChainEventsBrowser=void 0;let n=e.r(991989),a=e.r(441484),i=e.r(288128);r.StarknetChainEventsBrowser=class{findInitSwapData(e,t,r){if(BigInt(e.contract_address)===BigInt(this.starknetSwapContract.contract.address)&&BigInt(e.entry_point_selector)===this.initEntryPointSelector){let{escrow:n,extraData:i}=(0,a.parseInitFunctionCalldata)(e.calldata,r);if("0x"+n.getEscrowHash()===(0,a.toHex)(t))return 0!==i.length&&n.setExtraData((0,a.bytes31SpanToBuffer)(i,42).toString("hex")),n}for(let n of e.calls){let e=this.findInitSwapData(n,t,r);if(null!=e)return e}return null}getSwapDataGetter(e,t){return async()=>{let r;try{r=await this.provider.getTransactionTrace(e.txHash)}catch(n){this.logger.warn("getSwapDataGetter(): getter: starknet_traceTransaction not supported by the RPC: ",n);let t=(await this.provider.getBlockTransactionsTraces(e.blockHash)).find(t=>(0,a.toHex)(t.transaction_hash)===(0,a.toHex)(e.txHash));if(null==t)throw Error("Cannot find ".concat(e.txHash," in the block traces, block: ").concat(e.blockHash));r=t.trace_root}return null==r||null!=r.execute_invocation.revert_reason?null:this.findInitSwapData(r.execute_invocation,e.params.escrow_hash,t)}}parseInitializeEvent(e){let t=(0,a.bigNumberishToBuffer)(e.params.escrow_hash,32).toString("hex"),r=(0,a.toHex)(e.params.claim_handler),i=this.starknetSwapContract.claimHandlersByAddress[r];if(null==i)return this.logger.warn("parseInitializeEvent("+t+"): Unknown claim handler with claim: "+r),null;let o=i.getType();return this.logger.debug("InitializeEvent claimHash: "+(0,a.toHex)(e.params.claim_data)+" escrowHash: "+t),new n.InitializeEvent(t,o,(0,a.onceAsync)(this.getSwapDataGetter(e,i)))}parseRefundEvent(e){let t=(0,a.bigNumberishToBuffer)(e.params.escrow_hash,32).toString("hex");return this.logger.debug("RefundEvent claimHash: "+(0,a.toHex)(e.params.claim_data)+" escrowHash: "+t),new n.RefundEvent(t)}parseClaimEvent(e){let t=(0,a.bigNumberishToBuffer)(e.params.escrow_hash,32).toString("hex"),r=(0,a.toHex)(e.params.claim_handler),i=this.starknetSwapContract.claimHandlersByAddress[r];if(null==i)return this.logger.warn("parseClaimEvent("+t+"): Unknown claim handler with claim: "+r),null;let o=i.parseWitnessResult(e.params.witness_result);return this.logger.debug("ClaimEvent claimHash: "+(0,a.toHex)(e.params.claim_data)+" witnessResult: "+o+" escrowHash: "+t),new n.ClaimEvent(t,o)}parseSpvOpenEvent(e){let t=(0,a.toHex)(e.params.owner),r=(0,a.toBigInt)(e.params.vault_id),i=(0,a.bigNumberishToBuffer)(e.params.btc_tx_hash,32).reverse().toString("hex"),o=Number((0,a.toBigInt)(e.params.vout));return this.logger.debug("SpvOpenEvent owner: "+t+" vaultId: "+r+" utxo: "+i+":"+o),new n.SpvVaultOpenEvent(t,r,i,o)}parseSpvDepositEvent(e){let t=(0,a.toHex)(e.params.owner),r=(0,a.toBigInt)(e.params.vault_id),i=[(0,a.toBigInt)(e.params.amounts["0"]),(0,a.toBigInt)(e.params.amounts["1"])],o=Number((0,a.toBigInt)(e.params.deposit_count));return this.logger.debug("SpvDepositEvent owner: "+t+" vaultId: "+r+" depositCount: "+o+" amounts: ",i),new n.SpvVaultDepositEvent(t,r,i,o)}parseSpvFrontEvent(e){let t=(0,a.toHex)(e.params.owner),r=(0,a.toBigInt)(e.params.vault_id),i=(0,a.bigNumberishToBuffer)(e.params.btc_tx_hash,32).reverse().toString("hex"),o=(0,a.toHex)(e.params.recipient),s=(0,a.toHex)(e.params.execution_hash),c=[(0,a.toBigInt)(e.params.amounts["0"]),(0,a.toBigInt)(e.params.amounts["1"])],l=(0,a.toHex)(e.params.caller);return this.logger.debug("SpvFrontEvent owner: "+t+" vaultId: "+r+" btcTxId: "+i+" recipient: "+o+" frontedBy: "+l+" amounts: ",c),new n.SpvVaultFrontEvent(t,r,i,o,s,c,l)}parseSpvClaimEvent(e){let t=(0,a.toHex)(e.params.owner),r=(0,a.toBigInt)(e.params.vault_id),i=(0,a.bigNumberishToBuffer)(e.params.btc_tx_hash,32).reverse().toString("hex"),o=(0,a.toHex)(e.params.recipient),s=(0,a.toHex)(e.params.execution_hash),c=[(0,a.toBigInt)(e.params.amounts["0"]),(0,a.toBigInt)(e.params.amounts["1"])],l=(0,a.toHex)(e.params.caller),u=(0,a.toHex)(e.params.fronting_address),d=Number((0,a.toBigInt)(e.params.withdraw_count));return this.logger.debug("SpvClaimEvent owner: "+t+" vaultId: "+r+" btcTxId: "+i+" withdrawCount: "+d+" recipient: "+o+" frontedBy: "+u+" claimedBy: "+l+" amounts: ",c),new n.SpvVaultClaimEvent(t,r,i,o,s,c,l,u,d)}parseSpvCloseEvent(e){let t=(0,a.toHex)(e.params.owner),r=(0,a.toBigInt)(e.params.vault_id),i=(0,a.bigNumberishToBuffer)(e.params.btc_tx_hash,32).reverse().toString("hex"),o=(0,a.bigNumberishToBuffer)(e.params.error).toString();return new n.SpvVaultCloseEvent(t,r,i,o)}async processEvents(e,t,r,n){let a={},i=async e=>{if(e===t)return r;let n=e.toString();return null!=a[n]||(a[n]=(await this.provider.getBlockWithTxHashes(e)).timestamp),a[n]},o=[];for(let t of e){let e;switch(t.name){case"escrow_manager::events::Claim":e=this.parseClaimEvent(t);break;case"escrow_manager::events::Refund":e=this.parseRefundEvent(t);break;case"escrow_manager::events::Initialize":e=this.parseInitializeEvent(t);break;case"spv_swap_vault::events::Opened":e=this.parseSpvOpenEvent(t);break;case"spv_swap_vault::events::Deposited":e=this.parseSpvDepositEvent(t);break;case"spv_swap_vault::events::Fronted":e=this.parseSpvFrontEvent(t);break;case"spv_swap_vault::events::Claimed":e=this.parseSpvClaimEvent(t);break;case"spv_swap_vault::events::Closed":e=this.parseSpvCloseEvent(t)}if(null==e)continue;let r=null==t.blockNumber?n:await i(t.blockNumber);e.meta={blockTime:r,txId:t.txHash,timestamp:r},o.push(e)}for(let e of this.listeners)await e(o)}async checkEventsEcrowManager(e,t,r){let n=r.block_number;null!=t||(t=n);let i=await this.starknetSwapContract.Events.getContractBlockEvents(["escrow_manager::events::Initialize","escrow_manager::events::Claim","escrow_manager::events::Refund"],[],t,null);if(null!=e){let t=(0,a.findLastIndex)(i,t=>t.txHash===e);-1!==t&&i.splice(0,t+1)}return i.length>0&&(await this.processEvents(i,null==r?void 0:r.block_number,null==r?void 0:r.timestamp,Math.floor(Date.now()/1e3)),e=i[i.length-1].txHash),e}async checkEventsSpvVaults(e,t,r){let n=r.block_number;null!=t||(t=n);let i=await this.starknetSpvVaultContract.Events.getContractBlockEvents(["spv_swap_vault::events::Opened","spv_swap_vault::events::Deposited","spv_swap_vault::events::Closed","spv_swap_vault::events::Fronted","spv_swap_vault::events::Claimed"],[],t,null);if(null!=e){let t=(0,a.findLastIndex)(i,t=>t.txHash===e);-1!==t&&i.splice(0,t+1)}return i.length>0&&(await this.processEvents(i,null==r?void 0:r.block_number,null==r?void 0:r.timestamp,Math.floor(Date.now()/1e3)),e=i[i.length-1].txHash),e}async checkEvents(e,t){null!=t||(t=[]);let r=await this.provider.getBlockWithTxHashes("latest"),n=r.block_number;return t[0]=await this.checkEventsEcrowManager(t[0],e,r),t[1]=await this.checkEventsSpvVaults(t[1],e,r),{txHashes:t,blockNumber:n}}async setupPoll(e,t,r){let n;this.stopped=!1,n=async()=>{await this.checkEvents(e,t).then(n=>{let{blockNumber:a,txHashes:i}=n;if(e=a,t=i,null!=r)return r(a,t)}).catch(e=>{this.logger.error("setupPoll(): Failed to fetch starknet log: ",e)}),this.stopped||(this.timeout=setTimeout(n,1e3*this.pollIntervalSeconds))},await n()}init(){return this.setupPoll(),Promise.resolve()}async stop(){this.stopped=!0,null!=this.timeout&&clearTimeout(this.timeout)}registerListener(e){this.listeners.push(e)}unregisterListener(e){let t=this.listeners.indexOf(e);return t>=0&&(this.listeners.splice(t,1),!0)}constructor(e,t,r,n=5){this.listeners=[],this.logger=(0,a.getLogger)("StarknetChainEventsBrowser: "),this.initFunctionName="initialize",this.initEntryPointSelector=BigInt(i.hash.starknetKeccak(this.initFunctionName)),this.provider=e.provider,this.starknetSwapContract=t,this.starknetSpvVaultContract=r,this.pollIntervalSeconds=n}}},691730,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},194389,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpvVaultContractAbi=void 0,r.SpvVaultContractAbi=[{type:"impl",name:"SpvVaultManagerImpl",interface_name:"spv_swap_vault::ISpvVaultManager"},{type:"struct",name:"core::integer::u256",members:[{name:"low",type:"core::integer::u128"},{name:"high",type:"core::integer::u128"}]},{type:"struct",name:"spv_swap_vault::structs::BitcoinVaultTransactionData",members:[{name:"recipient",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"(core::integer::u64, core::integer::u64)"},{name:"caller_fee",type:"(core::integer::u64, core::integer::u64)"},{name:"fronting_fee",type:"(core::integer::u64, core::integer::u64)"},{name:"execution_handler_fee_amount_0",type:"core::integer::u64"},{name:"execution_hash",type:"core::felt252"},{name:"execution_expiry",type:"core::integer::u32"}]},{type:"struct",name:"core::byte_array::ByteArray",members:[{name:"data",type:"core::array::Array::<core::bytes_31::bytes31>"},{name:"pending_word",type:"core::felt252"},{name:"pending_word_len",type:"core::integer::u32"}]},{type:"struct",name:"btc_relay::structs::blockheader::BlockHeader",members:[{name:"reversed_version",type:"core::integer::u32"},{name:"previous_blockhash",type:"[core::integer::u32; 8]"},{name:"merkle_root",type:"[core::integer::u32; 8]"},{name:"reversed_timestamp",type:"core::integer::u32"},{name:"nbits",type:"core::integer::u32"},{name:"nonce",type:"core::integer::u32"}]},{type:"struct",name:"btc_relay::structs::stored_blockheader::StoredBlockHeader",members:[{name:"blockheader",type:"btc_relay::structs::blockheader::BlockHeader"},{name:"block_hash",type:"[core::integer::u32; 8]"},{name:"chain_work",type:"core::integer::u256"},{name:"block_height",type:"core::integer::u32"},{name:"last_diff_adjustment",type:"core::integer::u32"},{name:"prev_block_timestamps",type:"[core::integer::u32; 10]"}]},{type:"struct",name:"core::array::Span::<[core::integer::u32; 8]>",members:[{name:"snapshot",type:"@core::array::Array::<[core::integer::u32; 8]>"}]},{type:"interface",name:"spv_swap_vault::ISpvVaultManager",items:[{type:"function",name:"open",inputs:[{name:"vault_id",type:"core::felt252"},{name:"relay_contract",type:"core::starknet::contract_address::ContractAddress"},{name:"utxo",type:"(core::integer::u256, core::integer::u32)"},{name:"confirmations",type:"core::integer::u8"},{name:"token_0",type:"core::starknet::contract_address::ContractAddress"},{name:"token_1",type:"core::starknet::contract_address::ContractAddress"},{name:"token_0_multiplier",type:"core::felt252"},{name:"token_1_multiplier",type:"core::felt252"}],outputs:[],state_mutability:"external"},{type:"function",name:"deposit",inputs:[{name:"owner",type:"core::starknet::contract_address::ContractAddress"},{name:"vault_id",type:"core::felt252"},{name:"raw_token_0_amount",type:"core::integer::u64"},{name:"raw_token_1_amount",type:"core::integer::u64"}],outputs:[],state_mutability:"external"},{type:"function",name:"front",inputs:[{name:"owner",type:"core::starknet::contract_address::ContractAddress"},{name:"vault_id",type:"core::felt252"},{name:"withdraw_sequence",type:"core::integer::u32"},{name:"btc_tx_hash",type:"core::integer::u256"},{name:"data",type:"spv_swap_vault::structs::BitcoinVaultTransactionData"}],outputs:[],state_mutability:"external"},{type:"function",name:"claim",inputs:[{name:"owner",type:"core::starknet::contract_address::ContractAddress"},{name:"vault_id",type:"core::felt252"},{name:"transaction",type:"core::byte_array::ByteArray"},{name:"blockheader",type:"btc_relay::structs::stored_blockheader::StoredBlockHeader"},{name:"merkle_proof",type:"core::array::Span::<[core::integer::u32; 8]>"},{name:"position",type:"core::integer::u32"}],outputs:[],state_mutability:"external"}]},{type:"impl",name:"SpvVaultManagerReadOnlyImpl",interface_name:"spv_swap_vault::ISpvVaultManagerReadOnly"},{type:"struct",name:"spv_swap_vault::state::SpvVaultState",members:[{name:"relay_contract",type:"core::starknet::contract_address::ContractAddress"},{name:"token_0",type:"core::starknet::contract_address::ContractAddress"},{name:"token_1",type:"core::starknet::contract_address::ContractAddress"},{name:"token_0_multiplier",type:"core::felt252"},{name:"token_1_multiplier",type:"core::felt252"},{name:"utxo",type:"(core::integer::u256, core::integer::u32)"},{name:"confirmations",type:"core::integer::u8"},{name:"withdraw_count",type:"core::integer::u32"},{name:"deposit_count",type:"core::integer::u32"},{name:"token_0_amount",type:"core::integer::u64"},{name:"token_1_amount",type:"core::integer::u64"}]},{type:"enum",name:"core::option::Option::<spv_swap_vault::structs::BitcoinVaultTransactionData>",variants:[{name:"Some",type:"spv_swap_vault::structs::BitcoinVaultTransactionData"},{name:"None",type:"()"}]},{type:"interface",name:"spv_swap_vault::ISpvVaultManagerReadOnly",items:[{type:"function",name:"get_vault",inputs:[{name:"owner",type:"core::starknet::contract_address::ContractAddress"},{name:"vault_id",type:"core::felt252"}],outputs:[{type:"spv_swap_vault::state::SpvVaultState"}],state_mutability:"view"},{type:"function",name:"get_fronter_address",inputs:[{name:"owner",type:"core::starknet::contract_address::ContractAddress"},{name:"vault_id",type:"core::felt252"},{name:"btc_tx_hash",type:"core::integer::u256"},{name:"data",type:"spv_swap_vault::structs::BitcoinVaultTransactionData"}],outputs:[{type:"core::starknet::contract_address::ContractAddress"}],state_mutability:"view"},{type:"function",name:"get_fronter_address_by_id",inputs:[{name:"owner",type:"core::starknet::contract_address::ContractAddress"},{name:"vault_id",type:"core::felt252"},{name:"fronting_id",type:"core::felt252"}],outputs:[{type:"core::starknet::contract_address::ContractAddress"}],state_mutability:"view"},{type:"function",name:"parse_bitcoin_tx",inputs:[{name:"transaction",type:"core::byte_array::ByteArray"}],outputs:[{type:"core::option::Option::<spv_swap_vault::structs::BitcoinVaultTransactionData>"}],state_mutability:"view"}]},{type:"constructor",name:"constructor",inputs:[{name:"execution_contract",type:"core::starknet::contract_address::ContractAddress"}]},{type:"event",name:"spv_swap_vault::events::Opened",kind:"struct",members:[{name:"btc_tx_hash",type:"core::integer::u256",kind:"key"},{name:"owner",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"vault_id",type:"core::felt252",kind:"key"},{name:"vout",type:"core::integer::u32",kind:"key"}]},{type:"event",name:"spv_swap_vault::events::Deposited",kind:"struct",members:[{name:"owner",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"vault_id",type:"core::felt252",kind:"key"},{name:"amounts",type:"(core::integer::u64, core::integer::u64)",kind:"data"},{name:"deposit_count",type:"core::integer::u32",kind:"data"}]},{type:"event",name:"spv_swap_vault::events::Claimed",kind:"struct",members:[{name:"btc_tx_hash",type:"core::integer::u256",kind:"key"},{name:"owner",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"vault_id",type:"core::felt252",kind:"key"},{name:"recipient",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"execution_hash",type:"core::felt252",kind:"key"},{name:"caller",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"amounts",type:"(core::integer::u64, core::integer::u64)",kind:"data"},{name:"withdraw_count",type:"core::integer::u32",kind:"data"},{name:"fronting_address",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"spv_swap_vault::events::Fronted",kind:"struct",members:[{name:"btc_tx_hash",type:"core::integer::u256",kind:"key"},{name:"owner",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"vault_id",type:"core::felt252",kind:"key"},{name:"recipient",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"execution_hash",type:"core::felt252",kind:"key"},{name:"caller",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"amounts",type:"(core::integer::u64, core::integer::u64)",kind:"data"}]},{type:"event",name:"spv_swap_vault::events::Closed",kind:"struct",members:[{name:"btc_tx_hash",type:"core::integer::u256",kind:"key"},{name:"owner",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"vault_id",type:"core::felt252",kind:"key"},{name:"error",type:"core::felt252",kind:"data"}]},{type:"event",name:"spv_swap_vault::SpvVaultManager::Event",kind:"enum",variants:[{name:"Opened",type:"spv_swap_vault::events::Opened",kind:"nested"},{name:"Deposited",type:"spv_swap_vault::events::Deposited",kind:"nested"},{name:"Claimed",type:"spv_swap_vault::events::Claimed",kind:"nested"},{name:"Fronted",type:"spv_swap_vault::events::Fronted",kind:"nested"},{name:"Closed",type:"spv_swap_vault::events::Closed",kind:"nested"}]}]},653243,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetSpvWithdrawalData=void 0;let n=e.r(991989),a=e.r(843943),i=e.r(288128),o=e.r(441484),s=e.r(871667);class c extends n.SpvWithdrawalTransactionData{fromOpReturnData(e){return s.StarknetSpvVaultContract.fromOpReturnData(e)}isRecipient(e){return this.getRecipient().toLowerCase()===e.toLowerCase()}getTxHash(){return BigInt("0x"+a.Buffer.from(this.btcTx.txid,"hex").reverse().toString("hex"))}getFrontingAmount(){return[this.rawAmounts[0]+this.getExecutionFee()[0],this.rawAmounts[1]]}serialize(){return{type:"STARKNET",...super.serialize()}}serializeToStruct(){var e;let t=this.getCallerFee(),r=this.getFrontingFee(),n=this.getExecutionFee();return{recipient:this.recipient,amount:i.cairo.tuple(this.rawAmounts[0],this.rawAmounts[1]),caller_fee:i.cairo.tuple(t[0],t[1]),fronting_fee:i.cairo.tuple(r[0],r[1]),execution_handler_fee_amount_0:n[0],execution_hash:null!=(e=(0,o.toBigInt)(this.executionHash))?e:0n,execution_expiry:BigInt(this.executionExpiry)}}serializeToFelts(){var e;let t=this.getCallerFee(),r=this.getFrontingFee(),n=this.getExecutionFee();return[this.recipient,this.rawAmounts[0],this.rawAmounts[1],t[0],t[1],r[0],r[1],n[0],null!=(e=(0,o.toBigInt)(this.executionHash))?e:0n,BigInt(this.executionExpiry)]}}r.StarknetSpvWithdrawalData=c,n.SpvWithdrawalTransactionData.deserializers.STARKNET=c},887517,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetSpvVaultData=void 0;let n=e.r(991989),a=e.r(441484),i=e.r(843943),o=e.r(653243);class s extends n.SpvVaultData{getBalances(){return[{...this.token0,scaledAmount:this.token0.rawAmount*this.token0.multiplier},{...this.token1,scaledAmount:this.token1.rawAmount*this.token1.multiplier}]}getConfirmations(){return this.confirmations}getOwner(){return this.owner}getTokenData(){return[this.token0,this.token1]}getUtxo(){return this.isOpened()?this.utxo:this.initialUtxo}getVaultId(){return this.vaultId}getWithdrawalCount(){return this.withdrawCount}isOpened(){return"0000000000000000000000000000000000000000000000000000000000000000:0"!==this.utxo}serialize(){return{type:"STARKNET",owner:this.owner,vaultId:this.vaultId.toString(10),relayContract:this.relayContract,token0:{token:this.token0.token,multiplier:this.token0.multiplier.toString(10),rawAmount:this.token0.rawAmount.toString(10)},token1:{token:this.token1.token,multiplier:this.token1.multiplier.toString(10),rawAmount:this.token1.rawAmount.toString(10)},utxo:this.utxo,confirmations:this.confirmations,withdrawCount:this.withdrawCount,depositCount:this.depositCount,initialUtxo:this.initialUtxo}}updateState(e){if(e instanceof n.SpvVaultClaimEvent){if(e.withdrawCount<=this.withdrawCount)return;this.token0.rawAmount-=e.amounts[0],this.token1.rawAmount-=e.amounts[1],this.withdrawCount=e.withdrawCount,this.utxo=e.btcTxId+":0"}if(e instanceof n.SpvVaultCloseEvent&&(this.token0.rawAmount=0n,this.token1.rawAmount=0n,this.utxo="0000000000000000000000000000000000000000000000000000000000000000:0"),e instanceof n.SpvVaultOpenEvent){if(this.isOpened())return;this.utxo=e.btcTxId+":"+e.vout}if(e instanceof n.SpvVaultDepositEvent){if(e.depositCount<=this.depositCount)return;this.token0.rawAmount+=e.amounts[0],this.token1.rawAmount+=e.amounts[1],this.depositCount=e.depositCount}if(e instanceof o.StarknetSpvWithdrawalData){if(e.getSpentVaultUtxo()!==this.utxo)return;let t=e.getTotalOutput();this.token0.rawAmount-=t[0],this.token1.rawAmount-=t[1],this.withdrawCount++,this.utxo=e.btcTx.txid+":0"}}getDepositCount(){return this.depositCount}constructor(e,t,r,n){if(super(),"string"==typeof e){this.owner=e,this.vaultId=t,this.relayContract=(0,a.toHex)(r.relay_contract),this.token0={token:(0,a.toHex)(r.token_0),multiplier:(0,a.toBigInt)(r.token_0_multiplier),rawAmount:(0,a.toBigInt)(r.token_0_amount)},this.token1={token:(0,a.toHex)(r.token_1),multiplier:(0,a.toBigInt)(r.token_1_multiplier),rawAmount:(0,a.toBigInt)(r.token_1_amount)};let o=i.Buffer.from((0,a.toBigInt)(r.utxo["0"]).toString(16).padStart(64,"0"),"hex"),s=(0,a.toBigInt)(r.utxo["1"]);this.utxo=o.reverse().toString("hex")+":"+s.toString(10),this.confirmations=Number((0,a.toBigInt)(r.confirmations)),this.withdrawCount=Number((0,a.toBigInt)(r.withdraw_count)),this.depositCount=Number((0,a.toBigInt)(r.deposit_count)),this.initialUtxo=n}else this.owner=e.owner,this.vaultId=BigInt(e.vaultId),this.relayContract=e.relayContract,this.token0={token:e.token0.token,multiplier:BigInt(e.token0.multiplier),rawAmount:BigInt(e.token0.rawAmount)},this.token1={token:e.token1.token,multiplier:BigInt(e.token1.multiplier),rawAmount:BigInt(e.token1.rawAmount)},this.utxo=e.utxo,this.confirmations=e.confirmations,this.withdrawCount=e.withdrawCount,this.depositCount=e.depositCount,this.initialUtxo=e.initialUtxo}}r.StarknetSpvVaultData=s,n.SpvVaultData.deserializers.STARKNET=s},871667,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetSpvVaultContract=void 0;let n=e.r(991989),a=e.r(843943),i=e.r(338777),o=e.r(853796),s=e.r(288128),c=e.r(604616),l=e.r(194389),u=e.r(887517),d=e.r(653243),h=e.r(441484),f=e.r(309694),p=e.r(880747),g={[s.constants.StarknetChainId.SN_SEPOLIA]:"0x02d581ea838cd5ca46ba08660eddd064d50a0392f618e95310432147928d572e",[s.constants.StarknetChainId.SN_MAIN]:"0x01932042992647771f3d0aa6ee526e65359c891fe05a285faaf4d3ffa373e132"},m=2n**251n+17n*2n**192n+1n;class y extends i.StarknetContractBase{Open(e,t){let{txHash:r,vout:n}=function(e){let[t,r]=e.split(":");return{txHash:BigInt("0x"+a.Buffer.from(t,"hex").reverse().toString("hex")),vout:BigInt(r)}}(t.getUtxo()),i=t.getTokenData();if(2!==i.length)throw Error("Must specify exactly 2 tokens for vault!");return new c.StarknetAction(e,this.Chain,this.contract.populateTransaction.open(t.getVaultId(),this.btcRelay.contract.address,s.cairo.tuple(s.cairo.uint256(r),n),t.getConfirmations(),i[0].token,i[1].token,i[0].multiplier,i[1].multiplier),y.GasCosts.OPEN)}Deposit(e,t,r){var n;return new c.StarknetAction(e,this.Chain,this.contract.populateTransaction.deposit(t.getOwner(),t.getVaultId(),r[0],null!=(n=r[1])?n:0n),y.GasCosts.DEPOSIT)}Front(e,t,r,n){return new c.StarknetAction(e,this.Chain,this.contract.populateTransaction.front(t.getOwner(),t.getVaultId(),BigInt(n),r.getTxHash(),r.serializeToStruct()),y.GasCosts.FRONT)}Claim(e,t,r,n,i,o){return new c.StarknetAction(e,this.Chain,{contractAddress:this.contract.address,entrypoint:"claim",calldata:[t.getOwner(),t.getVaultId(),...(0,h.bufferToByteArray)(a.Buffer.from(r.btcTx.hex,"hex")),...n.serialize(),i.length,...i.map(h.bufferToU32Array).flat(),o].map(e=>(0,h.toHex)(e,0))},y.GasCosts.CLAIM)}async checkWithdrawalTx(e){if(null==await this.Chain.provider.callContract({contractAddress:this.contract.address,entrypoint:"parse_bitcoin_tx",calldata:(0,h.bufferToByteArray)(a.Buffer.from(e.btcTx.hex,"hex"))}))throw Error("Failed to parse transaction!")}createVaultData(e,t,r,n,a){if(2!==a.length)throw Error("Must specify 2 tokens in tokenData!");return Promise.resolve(new u.StarknetSpvVaultData(e,t,{relay_contract:this.btcRelay.contract.address,token_0:a[0].token,token_1:a[1].token,token_0_multiplier:a[0].multiplier,token_1_multiplier:a[1].multiplier,utxo:s.cairo.tuple(s.cairo.uint256(0),0),confirmations:n,withdraw_count:0,deposit_count:0,token_0_amount:0n,token_1_amount:0n},r))}async getVaultData(e,t){let r=await this.contract.get_vault(e,t);return(0,h.toHex)(r.relay_contract)!==(0,h.toHex)(this.btcRelay.contract.address)?null:new u.StarknetSpvVaultData(e,t,r)}async getAllVaults(e){let t=new Set;await this.Events.findInContractEventsForward(["spv_swap_vault::events::Opened","spv_swap_vault::events::Closed"],null==e?null:[null,e],e=>{let r=(0,h.toHex)(e.params.owner)+":"+(0,h.toBigInt)(e.params.vault_id).toString(10);return"spv_swap_vault::events::Opened"===e.name?t.add(r):t.delete(r),null});let r=[];for(let e of t.keys()){let[t,n]=e.split(":"),a=await this.getVaultData(t,BigInt(n));null!=a&&r.push(a)}return r}async getWithdrawalState(e){let t=a.Buffer.from(e,"hex").reverse(),r=s.cairo.uint256("0x"+t.toString("hex")),i={type:n.SpvWithdrawalStateType.NOT_FOUND};return await this.Events.findInContractEventsForward(["spv_swap_vault::events::Fronted","spv_swap_vault::events::Claimed","spv_swap_vault::events::Closed"],[(0,h.toHex)(r.low),(0,h.toHex)(r.high)],async e=>{switch(e.name){case"spv_swap_vault::events::Fronted":i={type:n.SpvWithdrawalStateType.FRONTED,txId:e.txHash,owner:(0,h.toHex)(e.params.owner),vaultId:(0,h.toBigInt)(e.params.vault_id),recipient:(0,h.toHex)(e.params.recipient),fronter:(0,h.toHex)(e.params.fronting_address)};break;case"spv_swap_vault::events::Claimed":i={type:n.SpvWithdrawalStateType.CLAIMED,txId:e.txHash,owner:(0,h.toHex)(e.params.owner),vaultId:(0,h.toBigInt)(e.params.vault_id),recipient:(0,h.toHex)(e.params.recipient),claimer:(0,h.toHex)(e.params.caller),fronter:(0,h.toHex)(e.params.fronting_address)};break;case"spv_swap_vault::events::Closed":i={type:n.SpvWithdrawalStateType.CLOSED,txId:e.txHash,owner:(0,h.toHex)(e.params.owner),vaultId:(0,h.toBigInt)(e.params.vault_id),error:(0,h.bigNumberishToBuffer)(e.params.error).toString()}}}),i}getWithdrawalData(e){return Promise.resolve(new d.StarknetSpvWithdrawalData(e))}fromOpReturnData(e){return y.fromOpReturnData(e)}static fromOpReturnData(e){let t=0n,r=0n,n=null;if(40===e.length)t=e.readBigInt64LE(32).valueOf();else if(48===e.length)t=e.readBigInt64LE(32).valueOf(),r=e.readBigInt64LE(40).valueOf();else if(72===e.length)t=e.readBigInt64LE(32).valueOf(),n=e.slice(40,72).toString("hex");else if(80===e.length)t=e.readBigInt64LE(32).valueOf(),r=e.readBigInt64LE(40).valueOf(),n=e.slice(48,80).toString("hex");else throw Error("Invalid OP_RETURN data length!");if(null!=n&&BigInt("0x"+n)>=m)throw Error("Execution hash not in range of starknet prime");let a="0x"+e.slice(0,32).toString("hex");if(!f.StarknetAddresses.isValidAddress(a))throw Error("Invalid recipient specified");return{executionHash:n,rawAmounts:[t,r],recipient:a}}toOpReturnData(e,t,r){return y.toOpReturnData(e,t,r)}static toOpReturnData(e,t,r){if(!f.StarknetAddresses.isValidAddress(e))throw Error("Invalid recipient specified");if(t.length<1)throw Error("At least 1 amount needs to be specified");if(t.length>2)throw Error("At most 2 amounts need to be specified");if(t.forEach(e=>{if(e<0n)throw Error("Negative raw amount specified");if(e>=2n**64n)throw Error("Raw amount overflow")}),null!=r){let e=(0,h.toBigInt)(r);if(e<0n)throw Error("Execution hash negative");if(e>=m)throw Error("Execution hash not in range of starknet prime")}let n=a.Buffer.from(e.substring(2).padStart(64,"0"),"hex"),i=a.Buffer.from(t[0].toString(16).padStart(16,"0"),"hex"),o=null==t[1]||0n===t[1]?a.Buffer.alloc(0):a.Buffer.from(t[1].toString(16).padStart(16,"0"),"hex"),s=null==r?a.Buffer.alloc(0):a.Buffer.from(r.substring(2).padStart(64,"0"),"hex");return a.Buffer.concat([n,i.reverse(),o.reverse(),s])}async claim(e,t,r,n,a,i){let o=await this.txsClaim(e.getAddress(),t,r,n,a,null==i?void 0:i.feeRate),[s]=await this.Chain.sendAndConfirm(e,o,null==i?void 0:i.waitForConfirmation,null==i?void 0:i.abortSignal);return s}async deposit(e,t,r,n){let a=await this.txsDeposit(e.getAddress(),t,r,null==n?void 0:n.feeRate),[i]=await this.Chain.sendAndConfirm(e,a,null==n?void 0:n.waitForConfirmation,null==n?void 0:n.abortSignal);return i}async frontLiquidity(e,t,r,n,a){let i=await this.txsFrontLiquidity(e.getAddress(),t,r,n,null==a?void 0:a.feeRate),[o]=await this.Chain.sendAndConfirm(e,i,null==a?void 0:a.waitForConfirmation,null==a?void 0:a.abortSignal);return o}async open(e,t,r){let n=await this.txsOpen(e.getAddress(),t,null==r?void 0:r.feeRate),[a]=await this.Chain.sendAndConfirm(e,n,null==r?void 0:r.waitForConfirmation,null==r?void 0:r.abortSignal);return a}async txsClaim(e,t,r,n,a,i){if(!t.isOpened())throw Error("Cannot claim from a closed vault!");null!=i||(i=await this.Chain.Fees.getFeeRate());let s=[];for(let e of r){let t=await this.bitcoinRpc.getMerkleProof(e.tx.btcTx.txid,e.tx.btcTx.blockhash);this.logger.debug("txsClaim(): merkle proof computed: ",t),s.push({...t,...e})}let l=[],u=await o.StarknetBtcRelay.getCommitedHeadersAndSynchronize(e,this.btcRelay,s.filter(e=>null==e.storedHeader).map(e=>({blockhash:e.tx.btcTx.blockhash,blockheight:e.blockheight,requiredConfirmations:t.getConfirmations()})),l,n,i);if(null==u)throw Error("Cannot fetch committed header!");let d=s.map(r=>{var n;return this.Claim(e,t,r.tx,null!=(n=r.storedHeader)?n:u[r.tx.btcTx.blockhash],r.merkle,r.pos)}),h=new c.StarknetAction(e,this.Chain);for(let t of d)h.add(t),h.ixsLength()>=this.maxClaimsPerTx&&(await h.addToTxs(l,i),h=new c.StarknetAction(e,this.Chain));return h.ixsLength()>0&&await h.addToTxs(l,i),this.logger.debug("txsClaim(): "+l.length+" claim TXs created claiming "+r.length+" txs, owner: "+t.getOwner()+" vaultId: "+t.getVaultId().toString(10)),l}async txsDeposit(e,t,r,n){var a;if(!t.isOpened())throw Error("Cannot deposit to a closed vault!");let i=t.getTokenData(),o=new c.StarknetAction(e,this.Chain),s=0n,l=0n;return null!=r[0]&&0n!==r[0]&&(s=r[0]*i[0].multiplier,o.add(this.Chain.Tokens.Approve(e,this.contract.address,i[0].token,s))),null!=r[1]&&0n!==r[1]&&(l=r[1]*i[1].multiplier,o.add(this.Chain.Tokens.Approve(e,this.contract.address,i[1].token,l))),o.add(this.Deposit(e,t,r)),null!=n||(n=await this.Chain.Fees.getFeeRate()),this.logger.debug("txsDeposit(): deposit TX created, token0: "+i[0].token+" rawAmount0: "+r[0].toString(10)+" amount0: "+s.toString(10)+" token1: "+i[1].token+" rawAmount1: "+(null!=(a=r[1])?a:0n).toString(10)+" amount1: "+l.toString(10)),[await o.tx(n)]}async txsFrontLiquidity(e,t,r,n,a){var i;if(!t.isOpened())throw Error("Cannot front on a closed vault!");let o=t.getTokenData(),s=new c.StarknetAction(e,this.Chain),l=r.getFrontingAmount(),u=0n,d=0n;return null!=l[0]&&0n!==l[0]&&(u=l[0]*o[0].multiplier,s.add(this.Chain.Tokens.Approve(e,this.contract.address,o[0].token,u))),null!=l[1]&&0n!==l[1]&&(d=l[1]*o[1].multiplier,s.add(this.Chain.Tokens.Approve(e,this.contract.address,o[1].token,d))),s.add(this.Front(e,t,r,n)),null!=a||(a=await this.Chain.Fees.getFeeRate()),this.logger.debug("txsFrontLiquidity(): front TX created, token0: "+o[0].token+" rawAmount0: "+l[0].toString(10)+" amount0: "+u.toString(10)+" token1: "+o[1].token+" rawAmount1: "+(null!=(i=l[1])?i:0n).toString(10)+" amount1: "+d.toString(10)),[await s.tx(a)]}async txsOpen(e,t,r){if(t.isOpened())throw Error("Cannot open an already opened vault!");let n=this.Open(e,t);return null!=r||(r=await this.Chain.Fees.getFeeRate()),this.logger.debug("txsOpen(): open TX created, owner: "+t.getOwner()+" vaultId: "+t.getVaultId().toString(10)),[await n.tx(r)]}async getClaimFee(e,t,r){return null!=r||(r=await this.Chain.Fees.getFeeRate()),p.StarknetFees.getGasFee(null==t?y.GasCosts.CLAIM_OPTIMISTIC_ESTIMATE:y.GasCosts.CLAIM,r)}async getFrontFee(e,t,r){return null!=r||(r=await this.Chain.Fees.getFeeRate()),p.StarknetFees.getGasFee(y.GasCosts.FRONT,r)}constructor(e,t,r,n=g[e.starknetChainId]){super(e,n,l.SpvVaultContractAbi),this.chainId="STARKNET",this.claimTimeout=180,this.maxClaimsPerTx=10,this.logger=(0,h.getLogger)("StarknetSpvVaultContract: "),this.btcRelay=t,this.bitcoinRpc=r}}r.StarknetSpvVaultContract=y,y.GasCosts={DEPOSIT:{l1DataGas:400,l2Gas:4e6,l1Gas:0},OPEN:{l1DataGas:1200,l2Gas:32e5,l1Gas:0},FRONT:{l1DataGas:800,l2Gas:12e6,l1Gas:0},CLAIM:{l1DataGas:1e3,l2Gas:4e8,l1Gas:0},CLAIM_OPTIMISTIC_ESTIMATE:{l1DataGas:1e3,l2Gas:8e7,l1Gas:0}}},547279,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RpcProviderWithRetries=r.RpcChannelWithRetries=void 0;let n=e.r(288128),a=e.r(441484);class i extends n.RpcChannel{fetchEndpoint(e,t){return(0,a.tryWithRetries)(()=>super.fetchEndpoint(e,t),this.retryPolicy,e=>{if(!e.message.startsWith("RPC: "))return!1;let t=e.message.split("\n"),r=parseInt(t[t.length-1]);return!isNaN(r)&&!(r<0)})}constructor(e,t){super(e),this.retryPolicy=t}}r.RpcChannelWithRetries=i;class o extends n.RpcProvider{constructor(e,t){super(e),this.channel=new i({...e,waitMode:!1},t)}}r.RpcProviderWithRetries=o},516755,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetInitializer=r.initializeStarknet=r.StarknetAssets=void 0;let n=e.r(288128),a=e.r(880747),i=e.r(132246),o=e.r(853796),s=e.r(563641),c=e.r(275768),l=e.r(991989),u=e.r(54614),d=e.r(871667),h=e.r(887517),f=e.r(653243),p=e.r(547279);function g(e,t,r){var g,m;let y="string"==typeof e.rpcUrl?new p.RpcProviderWithRetries({nodeUrl:e.rpcUrl}):e.rpcUrl,b=null!=(g=e.fees)?g:new a.StarknetFees(y),w=null!=(m=e.chainId)?m:r===l.BitcoinNetwork.MAINNET?n.constants.StarknetChainId.SN_MAIN:n.constants.StarknetChainId.SN_SEPOLIA,_=new i.StarknetChainInterface(w,y,e.retryPolicy,b),v=new o.StarknetBtcRelay(_,t,r,e.btcRelayContract),E=new s.StarknetSwapContract(_,v,e.swapContract,e.handlerContracts),S=new d.StarknetSpvVaultContract(_,v,t,e.spvVaultContract),x=new c.StarknetChainEventsBrowser(_,E,S);return{chainId:"STARKNET",btcRelay:v,chainInterface:_,swapContract:E,chainEvents:x,swapDataConstructor:u.StarknetSwapData,spvVaultContract:S,spvVaultDataConstructor:h.StarknetSpvVaultData,spvVaultWithdrawalDataConstructor:f.StarknetSpvWithdrawalData}}r.StarknetAssets={ETH:{address:"0x049d36570d4e46f48e99674bd3fcc84644ddd6b96f7c741b1562b82f9e004dc7",decimals:18,displayDecimals:9},STRK:{address:"0x04718f5a0fc34cc1af16a1cdee98ffb20c31f5cd61d6ab07201858f4287c938d",decimals:18,displayDecimals:9},WBTC:{address:"0x03fe2b97c1fd336e750087d68b9b867997fd64a2661ff3ca5a7c771641e8e7ac",decimals:8},TBTC:{address:"0x04daa17763b286d1e59b97c283C0b8C949994C361e426A28F743c67bDfE9a32f",decimals:18,displayDecimals:8},_TESTNET_WBTC_VESU:{address:"0x04861ba938aed21f2cd7740acd3765ac4d2974783a3218367233de0153490cb6",decimals:8}},r.initializeStarknet=g,r.StarknetInitializer={chainId:"STARKNET",chainType:null,initializer:g,tokens:r.StarknetAssets,options:null}},518299,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),a(e.r(604616),r),a(e.r(132246),r),a(e.r(978288),r),a(e.r(880747),r),a(e.r(869305),r),a(e.r(187203),r),a(e.r(309694),r),a(e.r(483771),r),a(e.r(134299),r),a(e.r(228033),r),a(e.r(958415),r),a(e.r(853796),r),a(e.r(996655),r),a(e.r(338777),r),a(e.r(563641),r),a(e.r(54614),r),a(e.r(300019),r),a(e.r(166269),r),a(e.r(537259),r),a(e.r(177650),r),a(e.r(557011),r),a(e.r(542308),r),a(e.r(162773),r),a(e.r(3875),r),a(e.r(949330),r),a(e.r(879509),r),a(e.r(770686),r),a(e.r(388125),r),a(e.r(467436),r),a(e.r(275768),r),a(e.r(138530),r),a(e.r(99192),r),a(e.r(691730),r),a(e.r(516755),r),a(e.r(871667),r),a(e.r(887517),r),a(e.r(653243),r),a(e.r(547279),r)},615245,e=>{"use strict";e.s(["getSharedSwapAccount",()=>c,"getSharedSwapAccountRaw",()=>u,"getSharedSwapAddress",()=>h,"getSharedSwapProvider",()=>l,"transferStrkFromShared",()=>f,"validateSharedSwapSigner",()=>d]);var t=e.i(301986),r=e.i(518299),n=e.i(412776),a=e.i(68043);let i=null,o=null,s=null;function c(){if(o)return o;if(!a.ENV.SHARED_SWAP_ACCOUNT_PRIVATE_KEY)return null;let e=(a.ENV.SHARED_SWAP_ACCOUNT_ADDRESS||n.SHARED_SWAP_ACCOUNT_ADDRESS).toLowerCase(),c=new t.RpcProvider({nodeUrl:(0,a.getStarknetRpc)()});s=c;try{let n=a.ENV.SHARED_SWAP_ACCOUNT_PRIVATE_KEY.startsWith("0x")?a.ENV.SHARED_SWAP_ACCOUNT_PRIVATE_KEY:"0x"+a.ENV.SHARED_SWAP_ACCOUNT_PRIVATE_KEY;/^0x[0-9a-fA-F]{64}$/.test(n)||console.warn("Shared swap account private key format unexpected");try{let e=t.ec.starkCurve.getStarkKey(n);console.log(" Shared swap account loaded (pubkey prefix):",e.slice(0,10)+"...")}catch(e){console.warn("Could not derive public key for shared swap account:",e)}return i=new t.Account(c,e,n),o=new r.StarknetSigner(i)}catch(e){return console.error("Failed to instantiate shared swap account:",e),null}}function l(){return s}function u(){return o||c(),i}async function d(){try{let t=c(),r=u(),n=s;if(!t||!r||!n)return{ok:!1,reason:"Shared swap signer not configured (missing env or provider)"};try{var e;let t=await r.getNonce();return console.log(" Shared swap account validation OK",{address:r.address,nonce:(null==t||null==(e=t.toString)?void 0:e.call(t))||String(t)}),{ok:!0,address:r.address}}catch(e){return console.warn(" Shared swap account nonce check failed",{address:r.address,error:e instanceof Error?e.message:String(e)}),{ok:!1,reason:"Account nonce fetch failed (address may be wrong or not deployed)",address:r.address}}}catch(e){return{ok:!1,reason:e instanceof Error?e.message:String(e)}}}function h(){return o||c(),(null==i?void 0:i.address)||null}async function f(e,r){let a=u();if(!a)throw Error("Shared swap account not configured");let i={contractAddress:n.PRIVACY_MIXER.STRK_TOKEN,entrypoint:"transfer",calldata:t.CallData.compile([e,t.cairo.uint256(r)])},o=await a.execute([i]),s=o.transaction_hash||o.hash||"unknown_tx";return console.log(" Shared STRK forward transfer submitted:",{to:e,amountWei:r.toString(),txHash:s}),s}}]);