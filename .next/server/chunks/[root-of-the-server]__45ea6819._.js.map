{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 3, "column": 0}, "map": {"version":3,"sources":[],"names":[],"mappings":"","debugId":null}},
    {"offset": {"line": 61, "column": 0}, "map": {"version":3,"sources":["file:///Users/mac/Desktop/CODE/SLPM-enhanced/src/app/api/fixedfloat/route.ts"],"sourcesContent":["/**\n * FixedFloat API Proxy Route\n * \n * This proxies requests to FixedFloat API to:\n * 1. Keep API credentials secure (not exposed to browser)\n * 2. Handle CORS issues\n */\n\nimport { NextRequest, NextResponse } from 'next/server';\nimport crypto from 'crypto';\n\nconst FIXEDFLOAT_API = 'https://ff.io/api/v2';\nconst API_KEY = process.env.FIXEDFLOAT_API_KEY || '';\nconst API_SECRET = process.env.FIXEDFLOAT_API_SECRET || '';\n\nfunction createSignature(body: string): string {\n    return crypto\n        .createHmac('sha256', API_SECRET)\n        .update(body)\n        .digest('hex');\n}\n\nexport async function POST(request: NextRequest) {\n    try {\n        const { endpoint, data } = await request.json();\n\n        if (!endpoint || typeof endpoint !== 'string') {\n            return NextResponse.json(\n                { success: false, error: 'Missing endpoint' },\n                { status: 400 }\n            );\n        }\n\n        // Validate endpoint to prevent abuse\n        const allowedEndpoints = ['/price', '/create', '/order', '/orders', '/ccies'];\n        if (!allowedEndpoints.includes(endpoint)) {\n            return NextResponse.json(\n                { success: false, error: 'Invalid endpoint' },\n                { status: 400 }\n            );\n        }\n\n        if (!API_KEY || !API_SECRET) {\n            return NextResponse.json(\n                { success: false, error: 'FixedFloat API not configured' },\n                { status: 500 }\n            );\n        }\n\n        const body = JSON.stringify(data || {});\n        const signature = createSignature(body);\n\n        console.log(`[FixedFloat Proxy] ${endpoint}`, data);\n\n        const response = await fetch(`${FIXEDFLOAT_API}${endpoint}`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'X-API-KEY': API_KEY,\n                'X-API-SIGN': signature,\n            },\n            body,\n        });\n\n        const result = await response.json();\n\n        // Log full response for debugging\n        if (result.code !== 0) {\n            console.log(`[FixedFloat Response] ${endpoint} FAILED:`, JSON.stringify(result, null, 2));\n        } else {\n            console.log(`[FixedFloat Response] ${endpoint}: SUCCESS`);\n            if (endpoint === '/price') {\n                console.log(`  → Output: ${result.data?.to?.amount} ${result.data?.to?.code}`);\n                console.log(`  → Min: ${result.data?.from?.min}, Max: ${result.data?.from?.max}`);\n            }\n            if (endpoint === '/create') {\n                console.log(`  → Order ID: ${result.data?.id}`);\n                console.log(`  → Deposit: ${result.data?.from?.amount} ${result.data?.from?.code} to ${result.data?.from?.address}`);\n            }\n        }\n\n        return NextResponse.json({ success: true, ...result });\n\n    } catch (error) {\n        console.error('[FixedFloat Proxy Error]', error);\n        return NextResponse.json(\n            {\n                success: false,\n                error: error instanceof Error ? error.message : 'FixedFloat API error'\n            },\n            { status: 500 }\n        );\n    }\n}\n"],"names":[],"mappings":"AAAA;;;;;;CAMC;;;;AAED;AACA;;;AAEA,MAAM,iBAAiB;AACvB,MAAM,UAAU,QAAQ,GAAG,CAAC,kBAAkB,IAAI;AAClD,MAAM,aAAa,QAAQ,GAAG,CAAC,qBAAqB,IAAI;AAExD,SAAS,gBAAgB,IAAY;IACjC,OAAO,gHAAM,CACR,UAAU,CAAC,UAAU,YACrB,MAAM,CAAC,MACP,MAAM,CAAC;AAChB;AAEO,eAAe,KAAK,OAAoB;IAC3C,IAAI;QACA,MAAM,EAAE,QAAQ,EAAE,IAAI,EAAE,GAAG,MAAM,QAAQ,IAAI;QAE7C,IAAI,CAAC,YAAY,OAAO,aAAa,UAAU;YAC3C,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,SAAS;gBAAO,OAAO;YAAmB,GAC5C;gBAAE,QAAQ;YAAI;QAEtB;QAEA,qCAAqC;QACrC,MAAM,mBAAmB;YAAC;YAAU;YAAW;YAAU;YAAW;SAAS;QAC7E,IAAI,CAAC,iBAAiB,QAAQ,CAAC,WAAW;YACtC,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,SAAS;gBAAO,OAAO;YAAmB,GAC5C;gBAAE,QAAQ;YAAI;QAEtB;QAEA,IAAI,CAAC,WAAW,CAAC,YAAY;YACzB,OAAO,gJAAY,CAAC,IAAI,CACpB;gBAAE,SAAS;gBAAO,OAAO;YAAgC,GACzD;gBAAE,QAAQ;YAAI;QAEtB;QAEA,MAAM,OAAO,KAAK,SAAS,CAAC,QAAQ,CAAC;QACrC,MAAM,YAAY,gBAAgB;QAElC,QAAQ,GAAG,CAAC,CAAC,mBAAmB,EAAE,UAAU,EAAE;QAE9C,MAAM,WAAW,MAAM,MAAM,GAAG,iBAAiB,UAAU,EAAE;YACzD,QAAQ;YACR,SAAS;gBACL,gBAAgB;gBAChB,aAAa;gBACb,cAAc;YAClB;YACA;QACJ;QAEA,MAAM,SAAS,MAAM,SAAS,IAAI;QAElC,kCAAkC;QAClC,IAAI,OAAO,IAAI,KAAK,GAAG;YACnB,QAAQ,GAAG,CAAC,CAAC,sBAAsB,EAAE,SAAS,QAAQ,CAAC,EAAE,KAAK,SAAS,CAAC,QAAQ,MAAM;QAC1F,OAAO;YACH,QAAQ,GAAG,CAAC,CAAC,sBAAsB,EAAE,SAAS,SAAS,CAAC;YACxD,IAAI,aAAa,UAAU;gBACvB,QAAQ,GAAG,CAAC,CAAC,YAAY,EAAE,OAAO,IAAI,EAAE,IAAI,OAAO,CAAC,EAAE,OAAO,IAAI,EAAE,IAAI,MAAM;gBAC7E,QAAQ,GAAG,CAAC,CAAC,SAAS,EAAE,OAAO,IAAI,EAAE,MAAM,IAAI,OAAO,EAAE,OAAO,IAAI,EAAE,MAAM,KAAK;YACpF;YACA,IAAI,aAAa,WAAW;gBACxB,QAAQ,GAAG,CAAC,CAAC,cAAc,EAAE,OAAO,IAAI,EAAE,IAAI;gBAC9C,QAAQ,GAAG,CAAC,CAAC,aAAa,EAAE,OAAO,IAAI,EAAE,MAAM,OAAO,CAAC,EAAE,OAAO,IAAI,EAAE,MAAM,KAAK,IAAI,EAAE,OAAO,IAAI,EAAE,MAAM,SAAS;YACvH;QACJ;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,SAAS;YAAM,GAAG,MAAM;QAAC;IAExD,EAAE,OAAO,OAAO;QACZ,QAAQ,KAAK,CAAC,4BAA4B;QAC1C,OAAO,gJAAY,CAAC,IAAI,CACpB;YACI,SAAS;YACT,OAAO,iBAAiB,QAAQ,MAAM,OAAO,GAAG;QACpD,GACA;YAAE,QAAQ;QAAI;IAEtB;AACJ","debugId":null}}]
}