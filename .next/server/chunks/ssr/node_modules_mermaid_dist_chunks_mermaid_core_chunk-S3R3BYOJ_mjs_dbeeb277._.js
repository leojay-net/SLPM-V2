module.exports=[199780,737645,945170,408571,701967,858008,632794,758434,193908,356983,905712,550118,48241,281235,53157,a=>{"use strict";a.s(["ZERO_WIDTH_SPACE",()=>aB,"calculateTextHeight",()=>a_,"calculateTextWidth",()=>a0,"cleanAndMerge",()=>a7,"decodeEntities",()=>ba,"encodeEntities",()=>a9,"generateId",()=>aU,"getEdgeId",()=>bb,"getStylesFromArray",()=>aS,"handleUndefinedAttr",()=>bc,"interpolateToCurve",()=>aI,"isDetailedError",()=>a4,"parseFontSize",()=>a6,"random",()=>aW,"removeDirectives",()=>aG,"utils_default",()=>a8,"wrapLabel",()=>aZ],199780);var b,c=a.i(234499),d=a.i(334603),e=a.i(670773);function f(a,b,c){a._context.bezierCurveTo((2*a._x0+a._x1)/3,(2*a._y0+a._y1)/3,(a._x0+2*a._x1)/3,(a._y0+2*a._y1)/3,(a._x0+4*a._x1+b)/6,(a._y0+4*a._y1+c)/6)}function g(a){this._context=a}function h(a){return new g(a)}function i(){}function j(a){this._context=a}function k(a){this._context=a}a.i(975930),a.s(["curveBasis",()=>h],737645),g.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:f(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){switch(a*=1,b*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:f(this,a,b)}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=b}},j.prototype={areaStart:i,areaEnd:i,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(a,b){switch(a*=1,b*=1,this._point){case 0:this._point=1,this._x2=a,this._y2=b;break;case 1:this._point=2,this._x3=a,this._y3=b;break;case 2:this._point=3,this._x4=a,this._y4=b,this._context.moveTo((this._x0+4*this._x1+a)/6,(this._y0+4*this._y1+b)/6);break;default:f(this,a,b)}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=b}},k.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){switch(a*=1,b*=1,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var c=(this._x0+4*this._x1+a)/6,d=(this._y0+4*this._y1+b)/6;this._line?this._context.lineTo(c,d):this._context.moveTo(c,d);break;case 3:this._point=4;default:f(this,a,b)}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=b}},a.s(["curveBumpX",()=>m],945170);class l{constructor(a,b){this._context=a,this._x=b}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line}point(a,b){switch(a*=1,b*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;default:this._x?this._context.bezierCurveTo(this._x0=(this._x0+a)/2,this._y0,this._x0,b,a,b):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+b)/2,a,this._y0,a,b)}this._x0=a,this._y0=b}}function m(a){return new l(a,!0)}function n(a){return new l(a,!1)}function o(a,b){this._basis=new g(a),this._beta=b}a.s(["curveBumpY",()=>n],408571),o.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var a=this._x,b=this._y,c=a.length-1;if(c>0)for(var d,e=a[0],f=b[0],g=a[c]-e,h=b[c]-f,i=-1;++i<=c;)d=i/c,this._basis.point(this._beta*a[i]+(1-this._beta)*(e+d*g),this._beta*b[i]+(1-this._beta)*(f+d*h));this._x=this._y=null,this._basis.lineEnd()},point:function(a,b){this._x.push(+a),this._y.push(+b)}};let p=function a(b){function c(a){return 1===b?new g(a):new o(a,b)}return c.beta=function(b){return a(+b)},c}(.85);function q(a,b,c){a._context.bezierCurveTo(a._x1+a._k*(a._x2-a._x0),a._y1+a._k*(a._y2-a._y0),a._x2+a._k*(a._x1-b),a._y2+a._k*(a._y1-c),a._x2,a._y2)}function r(a,b){this._context=a,this._k=(1-b)/6}r.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:q(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){switch(a*=1,b*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2,this._x1=a,this._y1=b;break;case 2:this._point=3;default:q(this,a,b)}this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=b}};let s=function a(b){function c(a){return new r(a,b)}return c.tension=function(b){return a(+b)},c}(0);function t(a,b){this._context=a,this._k=(1-b)/6}t.prototype={areaStart:i,areaEnd:i,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(a,b){switch(a*=1,b*=1,this._point){case 0:this._point=1,this._x3=a,this._y3=b;break;case 1:this._point=2,this._context.moveTo(this._x4=a,this._y4=b);break;case 2:this._point=3,this._x5=a,this._y5=b;break;default:q(this,a,b)}this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=b}};let u=function a(b){function c(a){return new t(a,b)}return c.tension=function(b){return a(+b)},c}(0);function v(a,b){this._context=a,this._k=(1-b)/6}v.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){switch(a*=1,b*=1,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:q(this,a,b)}this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=b}};let w=function a(b){function c(a){return new v(a,b)}return c.tension=function(b){return a(+b)},c}(0);a.s(["curveCardinal",()=>s],701967);var x=a.i(630714);function y(a,b,c){var d=a._x1,e=a._y1,f=a._x2,g=a._y2;if(a._l01_a>x.epsilon){var h=2*a._l01_2a+3*a._l01_a*a._l12_a+a._l12_2a,i=3*a._l01_a*(a._l01_a+a._l12_a);d=(d*h-a._x0*a._l12_2a+a._x2*a._l01_2a)/i,e=(e*h-a._y0*a._l12_2a+a._y2*a._l01_2a)/i}if(a._l23_a>x.epsilon){var j=2*a._l23_2a+3*a._l23_a*a._l12_a+a._l12_2a,k=3*a._l23_a*(a._l23_a+a._l12_a);f=(f*j+a._x1*a._l23_2a-b*a._l12_2a)/k,g=(g*j+a._y1*a._l23_2a-c*a._l12_2a)/k}a._context.bezierCurveTo(d,e,f,g,a._x2,a._y2)}function z(a,b){this._context=a,this._alpha=b}z.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){if(a*=1,b*=1,this._point){var c=this._x2-a,d=this._y2-b;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;break;case 2:this._point=3;default:y(this,a,b)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=b}};let A=function a(b){function c(a){return b?new z(a,b):new r(a,0)}return c.alpha=function(b){return a(+b)},c}(.5);function B(a,b){this._context=a,this._alpha=b}B.prototype={areaStart:i,areaEnd:i,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(a,b){if(a*=1,b*=1,this._point){var c=this._x2-a,d=this._y2-b;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=a,this._y3=b;break;case 1:this._point=2,this._context.moveTo(this._x4=a,this._y4=b);break;case 2:this._point=3,this._x5=a,this._y5=b;break;default:y(this,a,b)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=b}};let C=function a(b){function c(a){return b?new B(a,b):new t(a,0)}return c.alpha=function(b){return a(+b)},c}(.5);function D(a,b){this._context=a,this._alpha=b}D.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){if(a*=1,b*=1,this._point){var c=this._x2-a,d=this._y2-b;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(c*c+d*d,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:y(this,a,b)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=a,this._y0=this._y1,this._y1=this._y2,this._y2=b}};let E=function a(b){function c(a){return b?new D(a,b):new v(a,0)}return c.alpha=function(b){return a(+b)},c}(.5);function F(a){this._context=a}function G(a){return new F(a)}function H(a){this._context=a}a.s(["curveCatmullRom",()=>A],858008),a.s(["curveLinear",()=>G],758434),a.s(["default",()=>G],632794),F.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){switch(a*=1,b*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;default:this._context.lineTo(a,b)}}},H.prototype={areaStart:i,areaEnd:i,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(a,b){a*=1,b*=1,this._point?this._context.lineTo(a,b):(this._point=1,this._context.moveTo(a,b))}};function I(a,b,c){var d=a._x1-a._x0,e=b-a._x1,f=(a._y1-a._y0)/(d||e<0&&-0),g=(c-a._y1)/(e||d<0&&-0);return((f<0?-1:1)+(g<0?-1:1))*Math.min(Math.abs(f),Math.abs(g),.5*Math.abs((f*e+g*d)/(d+e)))||0}function J(a,b){var c=a._x1-a._x0;return c?(3*(a._y1-a._y0)/c-b)/2:b}function K(a,b,c){var d=a._x0,e=a._y0,f=a._x1,g=a._y1,h=(f-d)/3;a._context.bezierCurveTo(d+h,e+h*b,f-h,g-h*c,f,g)}function L(a){this._context=a}function M(a){this._context=new N(a)}function N(a){this._context=a}function O(a){return new L(a)}function P(a){return new M(a)}function Q(a){this._context=a}function R(a){var b,c,d=a.length-1,e=Array(d),f=Array(d),g=Array(d);for(e[0]=0,f[0]=2,g[0]=a[0]+2*a[1],b=1;b<d-1;++b)e[b]=1,f[b]=4,g[b]=4*a[b]+2*a[b+1];for(e[d-1]=2,f[d-1]=7,g[d-1]=8*a[d-1]+a[d],b=1;b<d;++b)c=e[b]/f[b-1],f[b]-=c,g[b]-=c*g[b-1];for(e[d-1]=g[d-1]/f[d-1],b=d-2;b>=0;--b)e[b]=(g[b]-e[b+1])/f[b];for(b=0,f[d-1]=(a[d]+e[d-1])/2;b<d-1;++b)f[b]=2*a[b+1]-e[b+1];return[e,f]}function S(a){return new Q(a)}function T(a,b){this._context=a,this._t=b}function U(a){return new T(a,.5)}function V(a){return new T(a,0)}function W(a){return new T(a,1)}a.s(["curveMonotoneX",()=>O],193908),L.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:K(this,this._t0,J(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(a,b){var c=NaN;if(b*=1,(a*=1)!==this._x1||b!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;break;case 2:this._point=3,K(this,J(this,c=I(this,a,b)),c);break;default:K(this,this._t0,c=I(this,a,b))}this._x0=this._x1,this._x1=a,this._y0=this._y1,this._y1=b,this._t0=c}}},(M.prototype=Object.create(L.prototype)).point=function(a,b){L.prototype.point.call(this,b,a)},N.prototype={moveTo:function(a,b){this._context.moveTo(b,a)},closePath:function(){this._context.closePath()},lineTo:function(a,b){this._context.lineTo(b,a)},bezierCurveTo:function(a,b,c,d,e,f){this._context.bezierCurveTo(b,a,d,c,f,e)}},a.s(["curveMonotoneY",()=>P],356983),a.s(["curveNatural",()=>S],905712),Q.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var a=this._x,b=this._y,c=a.length;if(c)if(this._line?this._context.lineTo(a[0],b[0]):this._context.moveTo(a[0],b[0]),2===c)this._context.lineTo(a[1],b[1]);else for(var d=R(a),e=R(b),f=0,g=1;g<c;++f,++g)this._context.bezierCurveTo(d[0][f],e[0][f],d[1][f],e[1][f],a[g],b[g]);(this._line||0!==this._line&&1===c)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(a,b){this._x.push(+a),this._y.push(+b)}},a.s(["curveStep",()=>U],550118),T.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(a,b){switch(a*=1,b*=1,this._point){case 0:this._point=1,this._line?this._context.lineTo(a,b):this._context.moveTo(a,b);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,b),this._context.lineTo(a,b);else{var c=this._x*(1-this._t)+a*this._t;this._context.lineTo(c,this._y),this._context.lineTo(c,b)}}this._x=a,this._y=b}},a.s(["curveStepAfter",()=>W],48241),a.s(["curveStepBefore",()=>V],281235);var X=a.i(671731),Y=a.i(650082);a.s(["default",()=>aA],53157);var Z=a.i(538356),$=a.i(147968),_=a.i(288724);let aa=function(a,b,c){(void 0===c||(0,_.default)(a[b],c))&&(void 0!==c||b in a)||(0,$.default)(a,b,c)};var ab=a.i(815624),ac=a.i(558649),ad=a.i(801527),ae=a.i(845473),af=a.i(673578),ag=a.i(462244),ah=a.i(666723),ai=a.i(494104),aj=a.i(612999),ak=a.i(645230),al=a.i(338225),am=a.i(35102),an=a.i(450981),ao=a.i(943475),ap=Object.prototype,aq=Function.prototype.toString,ar=ap.hasOwnProperty,as=aq.call(Object);let at=function(a){if(!(0,ao.default)(a)||"[object Object]"!=(0,am.default)(a))return!1;var b=(0,an.default)(a);if(null===b)return!0;var c=ar.call(b,"constructor")&&b.constructor;return"function"==typeof c&&c instanceof c&&aq.call(c)==as};var au=a.i(156814);let av=function(a,b){if(("constructor"!==b||"function"!=typeof a[b])&&"__proto__"!=b)return a[b]};var aw=a.i(590383),ax=a.i(17991);let ay=function(a,b,c,d,e,f,g){var h=av(a,c),i=av(b,c),j=g.get(i);if(j)return void aa(a,c,j);var k=f?f(h,i,c+"",a,b,g):void 0,l=void 0===k;if(l){var m=(0,ah.default)(i),n=!m&&(0,aj.default)(i),o=!m&&!n&&(0,au.default)(i);(k=i,m||n||o)?(0,ah.default)(h)?k=h:(0,ai.default)(h)?k=(0,ae.default)(h):n?(l=!1,k=(0,ac.default)(i,!0)):o?(l=!1,k=(0,ad.default)(i,!0)):k=[]:at(i)||(0,ag.default)(i)?(k=h,(0,ag.default)(h))?k=(0,aw.default)(h,(0,ax.default)(h)):(!(0,al.default)(h)||(0,ak.default)(h))&&(k=(0,af.default)(i)):l=!1}l&&(g.set(i,k),e(k,i,d,f,g),g.delete(i)),aa(a,c,k)},az=function a(b,c,d,e,f){b!==c&&(0,ab.default)(c,function(g,h){if(f||(f=new Z.default),(0,al.default)(g))ay(b,c,h,d,a,e,f);else{var i=e?e(av(b,h),g,h+"",b,c,f):void 0;void 0===i&&(i=g),aa(b,h,i)}},ax.default)},aA=(0,a.i(565894).default)(function(a,b,c){az(a,b,c)});var aB="​",aC={curveBasis:h,curveBasisClosed:function(a){return new j(a)},curveBasisOpen:function(a){return new k(a)},curveBumpX:m,curveBumpY:n,curveBundle:p,curveCardinalClosed:u,curveCardinalOpen:w,curveCardinal:s,curveCatmullRomClosed:C,curveCatmullRomOpen:E,curveCatmullRom:A,curveLinear:G,curveLinearClosed:function(a){return new H(a)},curveMonotoneX:O,curveMonotoneY:P,curveNatural:S,curveStep:U,curveStepAfter:W,curveStepBefore:V},aD=/\s*(?:(\w+)(?=:):|(\w+))\s*(?:(\w+)|((?:(?!}%{2}).|\r?\n)*))?\s*(?:}%{2})?/gi,aE=(0,d.__name)(function(a,b){let d=aF(a,/(?:init\b)|(?:initialize\b)/),e={};if(Array.isArray(d)){let a=d.map(a=>a.args);(0,c.sanitizeDirective)(a),e=(0,c.assignWithDepth_default)(e,[...a])}else e=d.args;if(!e)return;let f=(0,c.detectType)(a,b),g="config";return void 0!==e[g]&&("flowchart-v2"===f&&(f="flowchart"),e[f]=e[g],delete e[g]),e},"detectInit"),aF=(0,d.__name)(function(a,b=null){try{let e,f=RegExp(`[%]{2}(?![{]${aD.source})(?=[}][%]{2}).*
`,"ig");a=a.trim().replace(f,"").replace(/'/gm,'"'),d.log.debug(`Detecting diagram directive${null!==b?" type:"+b:""} based on the text:${a}`);let g=[];for(;null!==(e=c.directiveRegex.exec(a));)if(e.index===c.directiveRegex.lastIndex&&c.directiveRegex.lastIndex++,e&&!b||b&&e[1]?.match(b)||b&&e[2]?.match(b)){let a=e[1]?e[1]:e[2],b=e[3]?e[3].trim():e[4]?JSON.parse(e[4].trim()):null;g.push({type:a,args:b})}if(0===g.length)return{type:a,args:null};return 1===g.length?g[0]:g}catch(c){return d.log.error(`ERROR: ${c.message} - Unable to parse directive type: '${b}' based on the text: '${a}'`),{type:void 0,args:null}}},"detectDirective"),aG=(0,d.__name)(function(a){return a.replace(c.directiveRegex,"")},"removeDirectives"),aH=(0,d.__name)(function(a,b){for(let[c,d]of b.entries())if(d.match(a))return c;return -1},"isSubstringInArray");function aI(a,b){return a?aC[`curve${a.charAt(0).toUpperCase()+a.slice(1)}`]??b:b}function aJ(a,b){let c=a.trim();if(c)return"loose"!==b.securityLevel?(0,e.sanitizeUrl)(c):c}(0,d.__name)(aI,"interpolateToCurve"),(0,d.__name)(aJ,"formatUrl");var aK=(0,d.__name)((a,...b)=>{let c=a.split("."),e=c.length-1,f=c[e],g=window;for(let b=0;b<e;b++)if(!(g=g[c[b]]))return void d.log.error(`Function name: ${a} not found in window`);g[f](...b)},"runFunc");function aL(a,b){return a&&b?Math.sqrt(Math.pow(b.x-a.x,2)+Math.pow(b.y-a.y,2)):0}function aM(a){let b,c=0;return a.forEach(a=>{c+=aL(a,b),b=a}),aP(a,c/2)}function aN(a){return 1===a.length?a[0]:aM(a)}(0,d.__name)(aL,"distance"),(0,d.__name)(aM,"traverseEdge"),(0,d.__name)(aN,"calcLabelPosition");var aO=(0,d.__name)((a,b=2)=>{let c=Math.pow(10,b);return Math.round(a*c)/c},"roundNumber"),aP=(0,d.__name)((a,b)=>{let c,d=b;for(let b of a){if(c){let a=aL(b,c);if(0===a)return c;if(a<d)d-=a;else{let e=d/a;if(e<=0)return c;if(e>=1)return{x:b.x,y:b.y};if(e>0&&e<1)return{x:aO((1-e)*c.x+e*b.x,5),y:aO((1-e)*c.y+e*b.y,5)}}}c=b}throw Error("Could not find a suitable point for the given distance")},"calculatePoint"),aQ=(0,d.__name)((a,b,c)=>{d.log.info(`our points ${JSON.stringify(b)}`),b[0]!==c&&(b=b.reverse());let e=aP(b,25),f=a?10:5,g=Math.atan2(b[0].y-e.y,b[0].x-e.x),h={x:0,y:0};return h.x=Math.sin(g)*f+(b[0].x+e.x)/2,h.y=-Math.cos(g)*f+(b[0].y+e.y)/2,h},"calcCardinalityPosition");function aR(a,b,c){let e=structuredClone(c);d.log.info("our points",e),"start_left"!==b&&"start_right"!==b&&e.reverse();let f=aP(e,25+a),g=10+.5*a,h=Math.atan2(e[0].y-f.y,e[0].x-f.x),i={x:0,y:0};return"start_left"===b?(i.x=Math.sin(h+Math.PI)*g+(e[0].x+f.x)/2,i.y=-Math.cos(h+Math.PI)*g+(e[0].y+f.y)/2):"end_right"===b?(i.x=Math.sin(h-Math.PI)*g+(e[0].x+f.x)/2-5,i.y=-Math.cos(h-Math.PI)*g+(e[0].y+f.y)/2-5):"end_left"===b?(i.x=Math.sin(h)*g+(e[0].x+f.x)/2-5,i.y=-Math.cos(h)*g+(e[0].y+f.y)/2-5):(i.x=Math.sin(h)*g+(e[0].x+f.x)/2,i.y=-Math.cos(h)*g+(e[0].y+f.y)/2),i}function aS(a){let b="",c="";for(let d of a)void 0!==d&&(d.startsWith("color:")||d.startsWith("text-align:")?c=c+d+";":b=b+d+";");return{style:b,labelStyle:c}}(0,d.__name)(aR,"calcTerminalLabelPosition"),(0,d.__name)(aS,"getStylesFromArray");var aT=0,aU=(0,d.__name)(()=>(aT++,"id-"+Math.random().toString(36).substr(2,12)+"-"+aT),"generateId");function aV(a){let b="",c="0123456789abcdef",d=c.length;for(let e=0;e<a;e++)b+=c.charAt(Math.floor(Math.random()*d));return b}(0,d.__name)(aV,"makeRandomHex");var aW=(0,d.__name)(a=>aV(a.length),"random"),aX=(0,d.__name)(function(){return{x:0,y:0,fill:void 0,anchor:"start",style:"#666",width:100,height:100,textMargin:0,rx:0,ry:0,valign:void 0,text:""}},"getTextObj"),aY=(0,d.__name)(function(a,b){let d=b.text.replace(c.common_default.lineBreakRegex," "),[,e]=a6(b.fontSize),f=a.append("text");f.attr("x",b.x),f.attr("y",b.y),f.style("text-anchor",b.anchor),f.style("font-family",b.fontFamily),f.style("font-size",e),f.style("font-weight",b.fontWeight),f.attr("fill",b.fill),void 0!==b.class&&f.attr("class",b.class);let g=f.append("tspan");return g.attr("x",b.x+2*b.textMargin),g.attr("fill",b.fill),g.text(d),f},"drawSimpleText"),aZ=(0,Y.default)((a,b,d)=>{if(!a||(d=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",joinWith:"<br/>"},d),c.common_default.lineBreakRegex.test(a)))return a;let e=a.split(" ").filter(Boolean),f=[],g="";return e.forEach((a,c)=>{let h=a0(`${a} `,d),i=a0(g,d);if(h>b){let{hyphenatedStrings:c,remainingWord:e}=a$(a,b,"-",d);f.push(g,...c),g=e}else i+h>=b?(f.push(g),g=a):g=[g,a].filter(Boolean).join(" ");c+1===e.length&&f.push(g)}),f.filter(a=>""!==a).join(d.joinWith)},(a,b,c)=>`${a}${b}${c.fontSize}${c.fontWeight}${c.fontFamily}${c.joinWith}`),a$=(0,Y.default)((a,b,c="-",d)=>{d=Object.assign({fontSize:12,fontWeight:400,fontFamily:"Arial",margin:0},d);let e=[...a],f=[],g="";return e.forEach((a,h)=>{let i=`${g}${a}`;if(a0(i,d)>=b){let a=e.length===h+1,b=`${i}${c}`;f.push(a?i:b),g=""}else g=i}),{hyphenatedStrings:f,remainingWord:g}},(a,b,c="-",d)=>`${a}${b}${c}${d.fontSize}${d.fontWeight}${d.fontFamily}`);function a_(a,b){return a1(a,b).height}function a0(a,b){return a1(a,b).width}(0,d.__name)(a_,"calculateTextHeight"),(0,d.__name)(a0,"calculateTextWidth");var a1=(0,Y.default)((a,b)=>{let{fontSize:d=12,fontFamily:e="Arial",fontWeight:f=400}=b;if(!a)return{width:0,height:0};let[,g]=a6(d),h=a.split(c.common_default.lineBreakRegex),i=[],j=(0,X.select)("body");if(!j.remove)return{width:0,height:0,lineHeight:0};let k=j.append("svg");for(let a of["sans-serif",e]){let b=0,c={width:0,height:0,lineHeight:0};for(let d of h){let e=aX();e.text=d||aB;let h=aY(k,e).style("font-size",g).style("font-weight",f).style("font-family",a),i=(h._groups||h)[0][0].getBBox();if(0===i.width&&0===i.height)throw Error("svg element not in render tree");c.width=Math.round(Math.max(c.width,i.width)),b=Math.round(i.height),c.height+=b,c.lineHeight=Math.round(Math.max(c.lineHeight,b))}i.push(c)}k.remove();let l=isNaN(i[1].height)||isNaN(i[1].width)||isNaN(i[1].lineHeight)||i[0].height>i[1].height&&i[0].width>i[1].width&&i[0].lineHeight>i[1].lineHeight?0:1;return i[l]},(a,b)=>`${a}${b.fontSize}${b.fontWeight}${b.fontFamily}`),a2=class{constructor(a=!1,b){this.count=0,this.count=b?b.length:0,this.next=a?()=>this.count++:()=>Date.now()}static{(0,d.__name)(this,"InitIDGenerator")}},a3=(0,d.__name)(function(a){return b=b||document.createElement("div"),a=escape(a).replace(/%26/g,"&").replace(/%23/g,"#").replace(/%3B/g,";"),b.innerHTML=a,unescape(b.textContent)},"entityDecode");function a4(a){return"str"in a}(0,d.__name)(a4,"isDetailedError");var a5=(0,d.__name)((a,b,c,d)=>{if(!d)return;let e=a.node()?.getBBox();e&&a.append("text").text(d).attr("text-anchor","middle").attr("x",e.x+e.width/2).attr("y",-c).attr("class",b)},"insertTitle"),a6=(0,d.__name)(a=>{if("number"==typeof a)return[a,a+"px"];let b=parseInt(a??"",10);return Number.isNaN(b)?[void 0,void 0]:a===String(b)?[b,a+"px"]:[b,a]},"parseFontSize");function a7(a,b){return aA({},a,b)}(0,d.__name)(a7,"cleanAndMerge");var a8={assignWithDepth:c.assignWithDepth_default,wrapLabel:aZ,calculateTextHeight:a_,calculateTextWidth:a0,calculateTextDimensions:a1,cleanAndMerge:a7,detectInit:aE,detectDirective:aF,isSubstringInArray:aH,interpolateToCurve:aI,calcLabelPosition:aN,calcCardinalityPosition:aQ,calcTerminalLabelPosition:aR,formatUrl:aJ,getStylesFromArray:aS,generateId:aU,random:aW,runFunc:aK,entityDecode:a3,insertTitle:a5,isLabelCoordinateInPath:bd,parseFontSize:a6,InitIDGenerator:a2},a9=(0,d.__name)(function(a){let b=a;return(b=(b=b.replace(/style.*:\S*#.*;/g,function(a){return a.substring(0,a.length-1)})).replace(/classDef.*:\S*#.*;/g,function(a){return a.substring(0,a.length-1)})).replace(/#\w+;/g,function(a){let b=a.substring(1,a.length-1);return/^\+?\d+$/.test(b)?"ﬂ°°"+b+"¶ß":"ﬂ°"+b+"¶ß"})},"encodeEntities"),ba=(0,d.__name)(function(a){return a.replace(/ﬂ°°/g,"&#").replace(/ﬂ°/g,"&").replace(/¶ß/g,";")},"decodeEntities"),bb=(0,d.__name)((a,b,{counter:c=0,prefix:d,suffix:e},f)=>f||`${d?`${d}_`:""}${a}_${b}_${c}${e?`_${e}`:""}`,"getEdgeId");function bc(a){return a??null}function bd(a,b){let c=Math.round(a.x),d=Math.round(a.y),e=b.replace(/(\d+\.\d+)/g,a=>Math.round(parseFloat(a)).toString());return e.includes(c.toString())||e.includes(d.toString())}(0,d.__name)(bc,"handleUndefinedAttr"),(0,d.__name)(bd,"isLabelCoordinateInPath")}];

//# sourceMappingURL=node_modules_mermaid_dist_chunks_mermaid_core_chunk-S3R3BYOJ_mjs_dbeeb277._.js.map