module.exports=[753363,a=>{"use strict";a.s(["Mixin",()=>r,"decorate",()=>q,"hasMixin",()=>k,"mix",()=>t,"settings",()=>h]);let b=(a,b,c=[])=>{let d=Object.getOwnPropertyDescriptors(b);for(let a of c)delete d[a];Object.defineProperties(a,d)},c=(a,b=[a])=>{let d=Object.getPrototypeOf(a);return null===d?b:c(d,[...b,d])},d=(a,d,e=[])=>{var f;let g=null!=(f=((...a)=>{let b;if(0===a.length)return;let d=a.map(a=>c(a));for(;d.every(a=>a.length>0);){let a=d.map(a=>a.pop()),c=a[0];if(a.every(a=>a===c))b=c;else break}return b})(...a))?f:Object.prototype,h=Object.create(g),i=c(g);for(let d of a){let a=c(d);for(let c=a.length-1;c>=0;c--){let d=a[c];-1===i.indexOf(d)&&(b(h,d,["constructor",...e]),i.push(d))}}return h.constructor=d,h},e=a=>a.filter((b,c)=>a.indexOf(b)==c),f=(a,b)=>{let d=b.map(a=>c(a)),e=0,f=!0;for(;f;){f=!1;for(let c=b.length-1;c>=0;c--){let b=d[c][e];if(null!=b&&(f=!0,void 0!=Object.getOwnPropertyDescriptor(b,a)))return d[c][0]}e++}},g=(a,b=Object.prototype)=>new Proxy({},{getPrototypeOf:()=>b,setPrototypeOf(){throw Error("Cannot set prototype of Proxies created by ts-mixer")},getOwnPropertyDescriptor:(b,c)=>Object.getOwnPropertyDescriptor(f(c,a)||{},c),defineProperty(){throw Error("Cannot define new properties on Proxies created by ts-mixer")},has:(c,d)=>void 0!==f(d,a)||void 0!==b[d],get:(c,d)=>(f(d,a)||b)[d],set(b,c,d){let e=f(c,a);if(void 0===e)throw Error("Cannot set new properties on Proxies created by ts-mixer");return e[c]=d,!0},deleteProperty(){throw Error("Cannot delete properties on Proxies created by ts-mixer")},ownKeys:()=>a.map(Object.getOwnPropertyNames).reduce((a,b)=>b.concat(a.filter(a=>0>b.indexOf(a))))}),h={initFunction:null,staticsStrategy:"copy",prototypeStrategy:"copy",decoratorInheritance:"deep"},i=new WeakMap,j=a=>i.get(a),k=(a,b)=>{if(a instanceof b)return!0;let d=a.constructor,e=new Set,f=new Set;for(f.add(d);f.size>0;){if(f.has(b))return!0;f.forEach(a=>e.add(a));let a=new Set;f.forEach(b=>{var d;let g=null!=(d=i.get(b))?d:c(b.prototype).map(a=>a.constructor).filter(a=>null!==a);g&&g.forEach(b=>{e.has(b)||f.has(b)||a.add(b)})}),f=a}return!1},l=(a,b)=>{var c,d;let f=e([...Object.getOwnPropertyNames(a),...Object.getOwnPropertyNames(b)]),g={};for(let h of f)g[h]=e([...null!=(c=null==a?void 0:a[h])?c:[],...null!=(d=null==b?void 0:b[h])?d:[]]);return g},m=(a,b)=>{var c,d,e,f;return{property:l(null!=(c=null==a?void 0:a.property)?c:{},null!=(d=null==b?void 0:b.property)?d:{}),method:l(null!=(e=null==a?void 0:a.method)?e:{},null!=(f=null==b?void 0:b.method)?f:{})}},n=(a,b)=>{var c,d,f,g,h,i;return{class:e([...null!=(c=null==a?void 0:a.class)?c:[],...null!=(d=null==b?void 0:b.class)?d:[]]),static:m(null!=(f=null==a?void 0:a.static)?f:{},null!=(g=null==b?void 0:b.static)?g:{}),instance:m(null!=(h=null==a?void 0:a.instance)?h:{},null!=(i=null==b?void 0:b.instance)?i:{})}},o=new Map,p=a=>{let b=o.get(a);return b||(b={},o.set(a,b)),b},q=a=>(...b)=>1===b.length?(a=>b=>{let c=p(b),d=c.class;return d||(c.class=d=[]),d.push(a),a(b)})(a)(b[0]):(a=>(b,c,...d)=>{var e,f,g;let h="function"==typeof b?"static":"instance",i="function"==typeof b[c]?"method":"property",j=p("static"===h?b:b.constructor),k=null!=(e=null==j?void 0:j[h])?e:{};j[h]=k;let l=null!=(f=null==k?void 0:k[i])?f:{};k[i]=l;let m=null!=(g=null==l?void 0:l[c])?g:[];return l[c]=m,m.push(a),a(b,c,...d)})(a)(...b);function r(...a){var e,f,k;let l,m=a.map(a=>a.prototype),q=h.initFunction;if(null!==q){let a=m.map(a=>a[q]).filter(a=>"function"==typeof a);m.push({[q]:function(...b){for(let c of a)c.apply(this,b)}})}function t(...c){for(let d of a)b(this,new d(...c));null!==q&&"function"==typeof this[q]&&this[q].apply(this,c)}t.prototype="copy"===h.prototypeStrategy?d(m,t):g([...m,{constructor:t}]),Object.setPrototypeOf(t,"copy"===h.staticsStrategy?d(a,null,["prototype"]):g(a,Function.prototype));let u=t;if("none"!==h.decoratorInheritance){let b="deep"===h.decoratorInheritance?((...a)=>{let b=((...a)=>{var b;let d=new Set,e=new Set([...a]);for(;e.size>0;)for(let a of e){for(let f of[...c(a.prototype).map(a=>a.constructor),...null!=(b=j(a))?b:[]].filter(a=>!d.has(a)))e.add(f);d.add(a),e.delete(a)}return[...d]})(...a).map(a=>o.get(a)).filter(a=>!!a);return 0==b.length?{}:1==b.length?b[0]:b.reduce((a,b)=>n(a,b))})(...a):((...a)=>{let b=a.map(a=>p(a));return 0===b.length?{}:1===b.length?b[0]:b.reduce((a,b)=>n(a,b))})(...a);for(let a of null!=(e=null==b?void 0:b.class)?e:[]){let b=a(u);b&&(u=b)}s(null!=(f=null==b?void 0:b.static)?f:{},u),s(null!=(k=null==b?void 0:b.instance)?k:{},u.prototype)}return l=u,i.set(l,a),u}let s=(a,b)=>{let c=a.property,d=a.method;if(c)for(let a in c)for(let d of c[a])d(b,a);if(d)for(let a in d)for(let c of d[a])c(b,a,Object.getOwnPropertyDescriptor(b,a))},t=(...a)=>b=>{let c=r(...a.concat([b]));return Object.defineProperty(c,"name",{value:b.name,writable:!1}),c}},313535,805428,a=>{"use strict";let b,c,d,e,f;a.s(["Account",()=>me,"CallData",()=>jH,"Contract",()=>mv,"RpcProvider",()=>lO,"cairo",()=>iK,"ec",()=>jJ,"hash",()=>jI,"num",()=>h$,"uint256",()=>lR],313535),a.s(["API",()=>A,"EBlockTag",()=>q,"EDAMode",()=>s,"EDataAvailabilityMode",()=>r,"ESimulationFlag",()=>m,"ETransactionExecutionStatus",()=>p,"ETransactionFinalityStatus",()=>o,"ETransactionStatus",()=>n,"ETransactionType",()=>l,"ETransactionVersion",()=>t,"ETransactionVersion2",()=>u,"ETransactionVersion3",()=>v,"Errors",()=>j,"Permission",()=>x,"SPEC",()=>k,"TypedDataRevision",()=>y,"WALLET_API",()=>B],622670),a.s([],331506),a.s(["EBlockTag",()=>q,"EDAMode",()=>s,"EDataAvailabilityMode",()=>r,"ESimulationFlag",()=>m,"ETransactionExecutionStatus",()=>p,"ETransactionFinalityStatus",()=>o,"ETransactionStatus",()=>n,"ETransactionType",()=>l,"ETransactionVersion",()=>t,"ETransactionVersion2",()=>u,"ETransactionVersion3",()=>v,"Errors",()=>j,"SPEC",()=>k],402198),a.s([],269926),a.s([],521201);var g,h=a.i(521201);a.s([],912134);var i=a.i(912134);a.i(269926),a.s([],716831),a.i(716831);var j=h,k=i;a.s(["EBlockTag",()=>q,"EDAMode",()=>s,"EDataAvailabilityMode",()=>r,"ESimulationFlag",()=>m,"ETransactionExecutionStatus",()=>p,"ETransactionFinalityStatus",()=>o,"ETransactionStatus",()=>n,"ETransactionType",()=>l,"ETransactionVersion",()=>t,"ETransactionVersion2",()=>u,"ETransactionVersion3",()=>v],730222);let l={DECLARE:"DECLARE",DEPLOY:"DEPLOY",DEPLOY_ACCOUNT:"DEPLOY_ACCOUNT",INVOKE:"INVOKE",L1_HANDLER:"L1_HANDLER"},m={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},n={RECEIVED:"RECEIVED",REJECTED:"REJECTED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},o={ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},p={SUCCEEDED:"SUCCEEDED",REVERTED:"REVERTED"},q={LATEST:"latest",PENDING:"pending"},r={L1:"L1",L2:"L2"},s={L1:0,L2:1},t={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},u={V0:"0x0",V1:"0x1",V2:"0x2",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002"},v={V3:"0x3",F3:"0x100000000000000000000000000000003"};a.i(730222);var w=a.i(402198);a.s(["Permission",()=>x,"TypedDataRevision",()=>y],98583),a.s([],123675),a.i(123675),a.s(["Permission",()=>x],296774);let x={ACCOUNTS:"accounts"};a.i(296774),a.s(["TypedDataRevision",()=>y],690456);let y={ACTIVE:"1",LEGACY:"0"};a.i(690456),a.s([],105111),a.i(105111),a.s([],479095),a.i(479095),a.s([],160656),a.i(160656),a.s([],681676),a.i(681676),a.s([],325009),a.i(325009);var z=a.i(98583);a.i(331506);var A=w,B=z,C=a.i(622670);a.s(["ABI_TYPE_CONSTRUCTOR",()=>U,"ABI_TYPE_ENUM",()=>W,"ABI_TYPE_FUNCTION",()=>T,"ABI_TYPE_L1_HANDLER",()=>V,"API",()=>ar,"CALL_TYPE",()=>aa,"CONTRACT",()=>E,"EBlockTag",()=>ag,"EDAMode",()=>ai,"EDataAvailabilityMode",()=>ah,"ESimulationFlag",()=>ac,"ETransactionExecutionStatus",()=>af,"ETransactionFinalityStatus",()=>ae,"ETransactionStatus",()=>ad,"ETransactionType",()=>ab,"ETransactionVersion",()=>aj,"ETransactionVersion2",()=>ak,"ETransactionVersion3",()=>al,"EVENT_ABI_TYPE",()=>S,"L1_DA_MODE",()=>_,"PAYMASTER_API",()=>at,"PRICE_UNIT_FRI",()=>$,"PRICE_UNIT_WEI",()=>Z,"Permission",()=>an,"STATE_MUTABILITY_EXTERNAL",()=>Y,"STATE_MUTABILITY_VIEW",()=>X,"STATUS_ACCEPTED_ON_L1",()=>G,"STATUS_ACCEPTED_ON_L2",()=>F,"STATUS_PENDING",()=>J,"STATUS_RECEIVED",()=>L,"STATUS_REJECTED",()=>K,"STATUS_REVERTED",()=>I,"STATUS_SUCCEEDED",()=>H,"STRUCT_ABI_TYPE",()=>R,"TXN_TYPE_DECLARE",()=>M,"TXN_TYPE_DEPLOY",()=>N,"TXN_TYPE_DEPLOY_ACCOUNT",()=>O,"TXN_TYPE_INVOKE",()=>P,"TXN_TYPE_L1_HANDLER",()=>Q,"TypedDataRevision",()=>ao,"WALLET_API",()=>as],29752),a.s([],38820),a.s(["ABI_TYPE_CONSTRUCTOR",()=>U,"ABI_TYPE_ENUM",()=>W,"ABI_TYPE_FUNCTION",()=>T,"ABI_TYPE_L1_HANDLER",()=>V,"CALL_TYPE",()=>aa,"CONTRACT",()=>E,"EBlockTag",()=>ag,"EDAMode",()=>ai,"EDataAvailabilityMode",()=>ah,"ESimulationFlag",()=>ac,"ETransactionExecutionStatus",()=>af,"ETransactionFinalityStatus",()=>ae,"ETransactionStatus",()=>ad,"ETransactionType",()=>ab,"ETransactionVersion",()=>aj,"ETransactionVersion2",()=>ak,"ETransactionVersion3",()=>al,"EVENT_ABI_TYPE",()=>S,"L1_DA_MODE",()=>_,"PRICE_UNIT_FRI",()=>$,"PRICE_UNIT_WEI",()=>Z,"STATE_MUTABILITY_EXTERNAL",()=>Y,"STATE_MUTABILITY_VIEW",()=>X,"STATUS_ACCEPTED_ON_L1",()=>G,"STATUS_ACCEPTED_ON_L2",()=>F,"STATUS_PENDING",()=>J,"STATUS_RECEIVED",()=>L,"STATUS_REJECTED",()=>K,"STATUS_REVERTED",()=>I,"STATUS_SUCCEEDED",()=>H,"STRUCT_ABI_TYPE",()=>R,"TXN_TYPE_DECLARE",()=>M,"TXN_TYPE_DEPLOY",()=>N,"TXN_TYPE_DEPLOY_ACCOUNT",()=>O,"TXN_TYPE_INVOKE",()=>P,"TXN_TYPE_L1_HANDLER",()=>Q],872146),a.s([],14374),a.s([],862269);var D=a.i(862269);a.i(14374),a.s([],504423),a.i(504423);var E=D;a.s([],68617),a.i(68617),a.s([],512773),a.i(512773),a.s([],994063),a.i(994063),a.s(["ABI_TYPE_CONSTRUCTOR",()=>U,"ABI_TYPE_ENUM",()=>W,"ABI_TYPE_FUNCTION",()=>T,"ABI_TYPE_L1_HANDLER",()=>V,"CALL_TYPE",()=>aa,"EBlockTag",()=>ag,"EDAMode",()=>ai,"EDataAvailabilityMode",()=>ah,"ESimulationFlag",()=>ac,"ETransactionExecutionStatus",()=>af,"ETransactionFinalityStatus",()=>ae,"ETransactionStatus",()=>ad,"ETransactionType",()=>ab,"ETransactionVersion",()=>aj,"ETransactionVersion2",()=>ak,"ETransactionVersion3",()=>al,"EVENT_ABI_TYPE",()=>S,"L1_DA_MODE",()=>_,"PRICE_UNIT_FRI",()=>$,"PRICE_UNIT_WEI",()=>Z,"STATE_MUTABILITY_EXTERNAL",()=>Y,"STATE_MUTABILITY_VIEW",()=>X,"STATUS_ACCEPTED_ON_L1",()=>G,"STATUS_ACCEPTED_ON_L2",()=>F,"STATUS_PENDING",()=>J,"STATUS_RECEIVED",()=>L,"STATUS_REJECTED",()=>K,"STATUS_REVERTED",()=>I,"STATUS_SUCCEEDED",()=>H,"STRUCT_ABI_TYPE",()=>R,"TXN_TYPE_DECLARE",()=>M,"TXN_TYPE_DEPLOY",()=>N,"TXN_TYPE_DEPLOY_ACCOUNT",()=>O,"TXN_TYPE_INVOKE",()=>P,"TXN_TYPE_L1_HANDLER",()=>Q],556716);let F="ACCEPTED_ON_L2",G="ACCEPTED_ON_L1",H="SUCCEEDED",I="REVERTED",J="PENDING",K="REJECTED",L="RECEIVED",M="DECLARE",N="DEPLOY",O="DEPLOY_ACCOUNT",P="INVOKE",Q="L1_HANDLER",R="struct",S="event",T="function",U="constructor",V="l1_handler",W="enum",X="view",Y="external",Z="WEI",$="FRI",_={BLOB:"BLOB",CALLDATA:"CALLDATA"},aa={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},ab={DECLARE:M,DEPLOY:N,DEPLOY_ACCOUNT:O,INVOKE:P,L1_HANDLER:Q},ac={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},ad={RECEIVED:L,REJECTED:K,ACCEPTED_ON_L2:F,ACCEPTED_ON_L1:G},ae={ACCEPTED_ON_L2:F,ACCEPTED_ON_L1:G},af={SUCCEEDED:H,REVERTED:I},ag={LATEST:"latest",PENDING:"pending"},ah={L1:"L1",L2:"L2"},ai={L1:0,L2:1},aj={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},ak={V0:aj.V0,V1:aj.V1,V2:aj.V2,F0:aj.F0,F1:aj.F1,F2:aj.F2},al={V3:aj.V3,F3:aj.F3};a.i(556716),a.s([],989268),a.i(989268),a.s([],648390),a.i(648390);var am=a.i(872146);a.s(["Permission",()=>an,"TypedDataRevision",()=>ao],857957),a.s([],484770),a.i(484770),a.s(["Permission",()=>an],40137);let an={ACCOUNTS:"accounts"};a.i(40137),a.s(["TypedDataRevision",()=>ao],972090);let ao={ACTIVE:"1",LEGACY:"0"};a.i(972090),a.s([],125916),a.i(125916),a.s([],268525),a.i(268525),a.s([],304669),a.i(304669),a.s([],70969),a.i(70969),a.s([],193180),a.i(193180);var ap=a.i(857957);a.s([],295246),a.s([],563881),a.i(563881),a.s([],693312),a.i(693312),a.s([],94815),a.i(94815),a.s([],291118),a.i(291118),a.s([],697496),a.i(697496);var aq=a.i(295246);a.i(38820);var ar=am,as=ap,at=aq,au=a.i(29752);function av(a){return a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name}function aw(a,b){return!!Array.isArray(b)&&(0===b.length||(a?b.every(a=>"string"==typeof a):b.every(a=>Number.isSafeInteger(a))))}function ax(a,b){if("string"!=typeof b)throw Error(`${a}: string expected`);return!0}function ay(a){if(!Number.isSafeInteger(a))throw Error(`invalid integer: ${a}`)}function az(a){if(!Array.isArray(a))throw Error("array expected")}function aA(a,b){if(!aw(!0,b))throw Error(`${a}: array of strings expected`)}function aB(a,b){if(!aw(!1,b))throw Error(`${a}: array of numbers expected`)}function aC(...a){let b=a=>a,c=(a,b)=>c=>a(b(c));return{encode:a.map(a=>a.encode).reduceRight(c,b),decode:a.map(a=>a.decode).reduce(c,b)}}function aD(a){let b="string"==typeof a?a.split(""):a,c=b.length;aA("alphabet",b);let d=new Map(b.map((a,b)=>[a,b]));return{encode:d=>(az(d),d.map(d=>{if(!Number.isSafeInteger(d)||d<0||d>=c)throw Error(`alphabet.encode: digit index outside alphabet "${d}". Allowed: ${a}`);return b[d]})),decode:b=>(az(b),b.map(b=>{ax("alphabet.decode",b);let c=d.get(b);if(void 0===c)throw Error(`Unknown letter: "${b}". Allowed: ${a}`);return c}))}}function aE(a=""){return ax("join",a),{encode:b=>(aA("join.decode",b),b.join(a)),decode:b=>(ax("join.decode",b),b.split(a))}}function aF(a,b,c){if(b<2)throw Error(`convertRadix: invalid from=${b}, base cannot be less than 2`);if(c<2)throw Error(`convertRadix: invalid to=${c}, base cannot be less than 2`);if(az(a),!a.length)return[];let d=0,e=[],f=Array.from(a,a=>{if(ay(a),a<0||a>=b)throw Error(`invalid integer: ${a}`);return a}),g=f.length;for(;;){let a=0,h=!0;for(let e=d;e<g;e++){let g=f[e],i=b*a,j=i+g;if(!Number.isSafeInteger(j)||i/b!==a||j-g!==i)throw Error("convertRadix: carry overflow");let k=j/c;a=j%c;let l=Math.floor(k);if(f[e]=l,!Number.isSafeInteger(l)||l*c+a!==j)throw Error("convertRadix: carry overflow");h&&(l?h=!1:d=e)}if(e.push(a),h)break}for(let b=0;b<a.length-1&&0===a[b];b++)e.push(0);return e.reverse()}let aG=(a,b)=>0===b?a:aG(b,a%b),aH=(a,b)=>a+(b-aG(a,b)),aI=(()=>{let a=[];for(let b=0;b<40;b++)a.push(2**b);return a})();function aJ(a,b,c,d){if(az(a),b<=0||b>32)throw Error(`convertRadix2: wrong from=${b}`);if(c<=0||c>32)throw Error(`convertRadix2: wrong to=${c}`);if(aH(b,c)>32)throw Error(`convertRadix2: carry overflow from=${b} to=${c} carryBits=${aH(b,c)}`);let e=0,f=0,g=aI[b],h=aI[c]-1,i=[];for(let d of a){if(ay(d),d>=g)throw Error(`convertRadix2: invalid data word=${d} from=${b}`);if(e=e<<b|d,f+b>32)throw Error(`convertRadix2: carry overflow pos=${f} from=${b}`);for(f+=b;f>=c;f-=c)i.push((e>>f-c&h)>>>0);let a=aI[f];if(void 0===a)throw Error("invalid carry");e&=a-1}if(e=e<<c-f&h,!d&&f>=b)throw Error("Excess padding");if(!d&&e>0)throw Error(`Non-zero padding: ${e}`);return d&&f>0&&i.push(e>>>0),i}let aK=aC(function(a,b=!1){if(ay(6),a<=0||a>32)throw Error("radix2: bits should be in (0..32]");if(aH(8,a)>32||aH(a,8)>32)throw Error("radix2: carry overflow");return{encode:c=>{if(!av(c))throw Error("radix2.encode input should be Uint8Array");return aJ(Array.from(c),8,a,!b)},decode:c=>(aB("radix2.decode",c),Uint8Array.from(aJ(c,a,8,b)))}}(6),aD("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),function(a,b="="){return ay(6),ax("padding",b),{encode(c){for(aA("padding.encode",c);c.length*a%8;)c.push(b);return c},decode(c){aA("padding.decode",c);let d=c.length;if(d*a%8)throw Error("padding: invalid, string should have whole number of bytes");for(;d>0&&c[d-1]===b;d--)if((d-1)*a%8==0)throw Error("padding: invalid, string has too much padding");return c.slice(0,d)}}}(6),aE("")),aL=((g=58,ay(58)),aC(aD("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),aE("")));function aM(a){throw Error("config is deprecated, support for circularRefs is removed from the library. If you encounter circular references in your data structures, please rethink your datastructures: better prevent circular references in the first place.")}function aN(a){return aO.test(a)}a=>{if("string"!=typeof a||a.length%2!=0)throw TypeError(`hex.decode: expected string, got ${typeof a} with length ${a.length}`);return a.toLowerCase()},a.s([],637291);let aO=/^-?[0-9]+$/;function aP(a){return aQ.test(a)}let aQ=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function aR(a,b){if(aN(a))return Number.isSafeInteger(Number.parseInt(a,10));let c=String(Number.parseFloat(a));if(a===c)return!0;let d=aX(a),e=aX(c);return!!(d===e||b?.approx===!0&&!aN(a)&&e.length>=14&&d.startsWith(e.substring(0,14)))||!1}let aS=function(a){return a.underflow="underflow",a.overflow="overflow",a.truncate_integer="truncate_integer",a.truncate_float="truncate_float",a}({});function aT(a){if(aR(a,{approx:!1}))return;if(aN(a))return aS.truncate_integer;let b=Number.parseFloat(a);return Number.isFinite(b)?0===b?aS.underflow:aS.truncate_float:aS.overflow}function aU(a,b){let c=Number.parseFloat(a),d=aT(a);if(b?.approx===!0?d&&d!==aS.truncate_float:d){let b=d?.replace(/_\w+$/,"");throw Error(`Cannot safely convert to number: the value '${a}' would ${b} and become ${c}`)}return c}function aV(a){let b=a.match(/^(-?)(\d+\.?\d*)([eE]([+-]?\d+))?$/);if(!b)throw SyntaxError(`Invalid number: ${a}`);let c=b[1],d=b[2],e=void 0!==b[4]?Number.parseInt(b[4],10):0,f=d.indexOf(".");e+=-1!==f?f-1:d.length-1;let g=d.replace(".","").replace(/^0*/,a=>(e-=a.length,"")).replace(/0*$/,"");return g.length>0?{sign:c,digits:g,exponent:e}:{sign:c,digits:"0",exponent:e+1}}function aW(a,b){if(a===b)return 0;let c=aV(a),d=aV(b),e="-"===c.sign?-1:1;return c.sign!==d.sign?"0"===c.digits&&"0"===d.digits?0:e:c.exponent!==d.exponent?c.exponent>d.exponent?e:c.exponent<d.exponent?-e:0:c.digits>d.digits?e:c.digits<d.digits?-e:0}function aX(a){let{start:b,end:c}=aY(a),d=a.substring(b,c),e=d.indexOf(".");return -1===e?d:d.substring(0,e)+d.substring(e+1)}function aY(a){let b=0;for("-"===a[0]&&b++;"0"===a[b]||"."===a[b];)b++;let c=a.lastIndexOf("e");for(-1===c&&(c=a.lastIndexOf("E")),-1===c&&(c=a.length);("0"===a[c-1]||"."===a[c-1])&&c>b;)c--;return{start:b,end:c}}class aZ{isLosslessNumber=!0;constructor(a){if(!aP(a))throw Error(`Invalid number (value: "${a}")`);this.value=a}valueOf(){let a=aT(this.value);if(void 0===a||a===aS.truncate_float)return Number.parseFloat(this.value);if(aN(this.value))return BigInt(this.value);throw Error(`Cannot safely convert to number: the value '${this.value}' would ${a} and become ${Number.parseFloat(this.value)}`)}toString(){return this.value}}function a$(a){return a&&"object"==typeof a&&a.isLosslessNumber||!1}function a_(a){if(function(a){let{start:b,end:c}=aY(a),d=a.indexOf(".");return -1===d||d<b||d>c?c-b:c-b-1}(String(a))>15)throw Error(`Invalid number: contains more than 15 digits and is most likely truncated and unsafe by itself (value: ${a})`);if(Number.isNaN(a))throw Error("Invalid number: NaN");if(!Number.isFinite(a))throw Error(`Invalid number: ${a}`);return new aZ(String(a))}function a0(a,b){return aW(a.value,b.value)}function a1(a){return new aZ(a)}function a2(a){return aN(a)?BigInt(a):Number.parseFloat(a)}function a3(a,b,c){let d="function"==typeof c?{parseNumber:c}:c,e=d?.parseNumber??a1,f=d?.onDuplicateKey??function(a){let{key:b,position:c}=a;throw SyntaxError(`Duplicate key '${b}' encountered at position ${c}`)},g=0,h=function b(){j();let c=k()??function(){let b=g;if(a.charCodeAt(g)===bj&&(g++,m(b)),a.charCodeAt(g)===bk)g++;else{var c;if((c=a.charCodeAt(g))>=bl&&c<=bm)for(g++;a5(a.charCodeAt(g));)g++}if(a.charCodeAt(g)===bo)for(g++,m(b);a5(a.charCodeAt(g));)g++;if(a.charCodeAt(g)===bt||a.charCodeAt(g)===bs)for(g++,(a.charCodeAt(g)===bj||a.charCodeAt(g)===bi)&&g++,m(b);a5(a.charCodeAt(g));)g++;if(g>b)return e(a.slice(b,g))}()??function(){if(a.charCodeAt(g)===a9){g++,j();let c={},d=!0;for(;g<a.length&&a.charCodeAt(g)!==ba;){d?d=!1:(l(),j());let e=g,h=k();if(void 0===h)return void function(){throw SyntaxError(`Quoted object key expected ${o()}`)}();j(),function(){if(a.charCodeAt(g)!==bp)throw SyntaxError(`Colon ':' expected after property name ${o()}`);g++}();let i=b();if(void 0===i)return void function(){throw SyntaxError(`Object value expected after ':' ${n()}`)}();if(Object.prototype.hasOwnProperty.call(c,h)&&!function a(b,c){return b===c||(Array.isArray(b)&&Array.isArray(c)?b.length===c.length&&b.every((b,d)=>a(b,c[d])):!!(a6(b)&&a6(c))&&[...new Set([...Object.keys(b),...Object.keys(c)])].every(d=>a(b[d],c[d])))}(i,c[h])){let a=f({key:h,position:e+1,oldValue:c[h],newValue:i});void 0!==a&&(c[h]=a)}else c[h]=i}return a.charCodeAt(g)!==ba&&function(){throw SyntaxError(`Quoted object key or end of object '}' expected ${o()}`)}(),g++,c}}()??function(){if(a.charCodeAt(g)===bb){g++,j();let c=[],d=!0;for(;g<a.length&&a.charCodeAt(g)!==bc;){d?d=!1:l();let a=b();(function(a){if(void 0===a)throw SyntaxError(`Array item expected ${o()}`)})(a),c.push(a)}return a.charCodeAt(g)!==bc&&function(){throw SyntaxError(`Array item or end of array ']' expected ${o()}`)}(),g++,c}}()??i("true",!0)??i("false",!1)??i("null",null);return j(),c}();return function(a){if(void 0===a)throw SyntaxError(`JSON value expected ${o()}`)}(h),function(){if(g<a.length)throw SyntaxError(`Expected end of input ${o()}`)}(),b?function a(b,c,d,e){return Array.isArray(d)?e.call(b,c,function(b,c){for(let d=0;d<b.length;d++)b[d]=a(b,String(d),b[d],c);return b}(d,e)):d&&"object"==typeof d&&!a$(d)?e.call(b,c,function(b,c){for(let d of Object.keys(b)){let e=a(b,d,b[d],c);void 0!==e?b[d]=e:delete b[d]}return b}(d,e)):e.call(b,c,d)}({"":h},"",h,b):h;function i(b,c){if(a.slice(g,g+b.length)===b)return g+=b.length,c}function j(){for(var b;(b=a.charCodeAt(g))===bd||b===be||b===bf||b===bg;)g++}function k(){if(a.charCodeAt(g)===bh){g++;let c="";for(;g<a.length&&a.charCodeAt(g)!==bh;){if(a.charCodeAt(g)===a8){let b=a[g+1],d=a7[b];void 0!==d?(c+=d,g++):"u"===b?a4(a.charCodeAt(g+2))&&a4(a.charCodeAt(g+3))&&a4(a.charCodeAt(g+4))&&a4(a.charCodeAt(g+5))?(c+=String.fromCharCode(Number.parseInt(a.slice(g+2,g+6),16)),g+=5):function(b){let c=a.slice(b,b+6);throw SyntaxError(`Invalid unicode character '${c}' ${n()}`)}(g):function(b){let c=a.slice(b,b+2);throw SyntaxError(`Invalid escape character '${c}' ${n()}`)}(g)}else{var b;(b=a.charCodeAt(g))>=32&&b<=1114111?c+=a[g]:function(a){throw SyntaxError(`Invalid character '${a}' ${n()}`)}(a[g])}g++}return function(){if(a.charCodeAt(g)!==bh)throw SyntaxError(`End of string '"' expected ${o()}`)}(),g++,c}}function l(){if(a.charCodeAt(g)!==bn)throw SyntaxError(`Comma ',' expected after value ${o()}`);g++}function m(b){if(!a5(a.charCodeAt(g))){let c=a.slice(b,g);throw SyntaxError(`Invalid number '${c}', expecting a digit ${o()}`)}}function n(){return`at position ${g}`}function o(){return`${g<a.length?`but got '${a[g]}'`:"but reached end of input"} ${n()}`}}function a4(a){return a>=bk&&a<=bm||a>=bq&&a<=bu||a>=br&&a<=bv}function a5(a){return a>=bk&&a<=bm}function a6(a){return"object"==typeof a&&null!==a}let a7={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},a8=92,a9=123,ba=125,bb=91,bc=93,bd=32,be=10,bf=9,bg=13,bh=34,bi=43,bj=45,bk=48,bl=49,bm=57,bn=44,bo=46,bp=58,bq=65,br=97,bs=69,bt=101,bu=70,bv=102;function bw(a,b){return"string"==typeof b&&bx.test(b)?new Date(b):b}let bx=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/;function by(a,b,c,d){var e;let f="number"==typeof(e=c)?" ".repeat(e):"string"==typeof e&&""!==e?e:void 0;return function a(e,g){if(Array.isArray(d)){let a=d.find(a=>a.test(e));if(a){let b=a.stringify(e);if("string"!=typeof b||!aP(b))throw Error(`Invalid JSON number: output of a number stringifier must be a string containing a JSON number (output: ${b})`);return b}}return"boolean"==typeof e||"number"==typeof e||"string"==typeof e||null===e||e instanceof Date||e instanceof Boolean||e instanceof Number||e instanceof String?JSON.stringify(e):e?.isLosslessNumber||"bigint"==typeof e?e.toString():Array.isArray(e)?function(c,d){if(0===c.length)return"[]";let e=f?d+f:void 0,g=f?"[\n":"[";for(let d=0;d<c.length;d++){let h="function"==typeof b?b.call(c,String(d),c[d]):c[d];f&&(g+=e),void 0!==h&&"function"!=typeof h?g+=a(h,e):g+="null",d<c.length-1&&(g+=f?",\n":",")}return g+(f?`
${d}]`:"]")}(e,g):e&&"object"==typeof e?function(d,e){if("function"==typeof d.toJSON)return by(d.toJSON(),b,c,void 0);let g=Array.isArray(b)?b.map(String):Object.keys(d);if(0===g.length)return"{}";let h=f?e+f:void 0,i=!0,j=f?"{\n":"{";for(let c of g){var k;let e="function"==typeof b?b.call(d,c,d[c]):d[c];if(void 0!==(k=e)&&"function"!=typeof k&&"symbol"!=typeof k){i?i=!1:j+=f?",\n":",";let b=JSON.stringify(c);j+=f?`${h+b}: `:`${b}:`,j+=a(e,h)}}return j+(f?`
${e}}`:"}")}(e,g):void 0}("function"==typeof b?b.call({"":a},"",a):a,"")}a.s([],445226),a.s(["LosslessNumber",()=>aZ,"UnsafeNumberReason",()=>aS,"compareLosslessNumber",()=>a0,"compareNumber",()=>aW,"config",()=>aM,"getUnsafeNumberReason",()=>aT,"isInteger",()=>aN,"isLosslessNumber",()=>a$,"isNumber",()=>aP,"isSafeNumber",()=>aR,"parse",()=>a3,"parseLosslessNumber",()=>a1,"parseNumberAndBigInt",()=>a2,"reviveDate",()=>bw,"splitNumber",()=>aV,"stringify",()=>by,"toLosslessNumber",()=>a_,"toSafeNumberOrThrow",()=>aU],41961),a.i(637291),a.i(445226),a.i(41961),a.s(["aInRange",()=>bX,"abool",()=>bE,"abytes",()=>bD,"bitGet",()=>bZ,"bitLen",()=>bY,"bitMask",()=>b_,"bitSet",()=>b$,"bytesToHex",()=>bG,"bytesToNumberBE",()=>bM,"bytesToNumberLE",()=>bN,"concatBytes",()=>bS,"createHmacDrbg",()=>b2,"ensureBytes",()=>bR,"equalBytes",()=>bT,"hexToBytes",()=>bL,"hexToNumber",()=>bI,"inRange",()=>bW,"isBytes",()=>bC,"memoized",()=>b6,"notImplemented",()=>b5,"numberToBytesBE",()=>bO,"numberToBytesLE",()=>bP,"numberToHexUnpadded",()=>bH,"numberToVarBytesBE",()=>bQ,"utf8ToBytes",()=>bU,"validateObject",()=>b4],648436);let bz=BigInt(0),bA=BigInt(1),bB=BigInt(2);function bC(a){return a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name}function bD(a){if(!bC(a))throw Error("Uint8Array expected")}function bE(a,b){if("boolean"!=typeof b)throw Error(a+" boolean expected, got "+b)}let bF=Array.from({length:256},(a,b)=>b.toString(16).padStart(2,"0"));function bG(a){bD(a);let b="";for(let c=0;c<a.length;c++)b+=bF[a[c]];return b}function bH(a){let b=a.toString(16);return 1&b.length?"0"+b:b}function bI(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);return""===a?bz:BigInt("0x"+a)}let bJ={_0:48,_9:57,A:65,F:70,a:97,f:102};function bK(a){return a>=bJ._0&&a<=bJ._9?a-bJ._0:a>=bJ.A&&a<=bJ.F?a-(bJ.A-10):a>=bJ.a&&a<=bJ.f?a-(bJ.a-10):void 0}function bL(a){if("string"!=typeof a)throw Error("hex string expected, got "+typeof a);let b=a.length,c=b/2;if(b%2)throw Error("hex string expected, got unpadded hex of length "+b);let d=new Uint8Array(c);for(let b=0,e=0;b<c;b++,e+=2){let c=bK(a.charCodeAt(e)),f=bK(a.charCodeAt(e+1));if(void 0===c||void 0===f)throw Error('hex string expected, got non-hex character "'+(a[e]+a[e+1])+'" at index '+e);d[b]=16*c+f}return d}function bM(a){return bI(bG(a))}function bN(a){return bD(a),bI(bG(Uint8Array.from(a).reverse()))}function bO(a,b){return bL(a.toString(16).padStart(2*b,"0"))}function bP(a,b){return bO(a,b).reverse()}function bQ(a){return bL(bH(a))}function bR(a,b,c){let d;if("string"==typeof b)try{d=bL(b)}catch(b){throw Error(a+" must be hex string or Uint8Array, cause: "+b)}else if(bC(b))d=Uint8Array.from(b);else throw Error(a+" must be hex string or Uint8Array");let e=d.length;if("number"==typeof c&&e!==c)throw Error(a+" of length "+c+" expected, got "+e);return d}function bS(...a){let b=0;for(let c=0;c<a.length;c++){let d=a[c];bD(d),b+=d.length}let c=new Uint8Array(b);for(let b=0,d=0;b<a.length;b++){let e=a[b];c.set(e,d),d+=e.length}return c}function bT(a,b){if(a.length!==b.length)return!1;let c=0;for(let d=0;d<a.length;d++)c|=a[d]^b[d];return 0===c}function bU(a){if("string"!=typeof a)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(a))}let bV=a=>"bigint"==typeof a&&bz<=a;function bW(a,b,c){return bV(a)&&bV(b)&&bV(c)&&b<=a&&a<c}function bX(a,b,c,d){if(!bW(b,c,d))throw Error("expected valid "+a+": "+c+" <= n < "+d+", got "+b)}function bY(a){let b;for(b=0;a>bz;a>>=bA,b+=1);return b}function bZ(a,b){return a>>BigInt(b)&bA}function b$(a,b,c){return a|(c?bA:bz)<<BigInt(b)}let b_=a=>(bB<<BigInt(a-1))-bA,b0=a=>new Uint8Array(a),b1=a=>Uint8Array.from(a);function b2(a,b,c){if("number"!=typeof a||a<2)throw Error("hashLen must be a number");if("number"!=typeof b||b<2)throw Error("qByteLen must be a number");if("function"!=typeof c)throw Error("hmacFn must be a function");let d=b0(a),e=b0(a),f=0,g=()=>{d.fill(1),e.fill(0),f=0},h=(...a)=>c(e,d,...a),i=(a=b0())=>{e=h(b1([0]),a),d=h(),0!==a.length&&(e=h(b1([1]),a),d=h())},j=()=>{if(f++>=1e3)throw Error("drbg: tried 1000 values");let a=0,c=[];for(;a<b;){let b=(d=h()).slice();c.push(b),a+=d.length}return bS(...c)};return(a,b)=>{let c;for(g(),i(a);!(c=b(j()));)i();return g(),c}}let b3={bigint:a=>"bigint"==typeof a,function:a=>"function"==typeof a,boolean:a=>"boolean"==typeof a,string:a=>"string"==typeof a,stringOrUint8Array:a=>"string"==typeof a||bC(a),isSafeInteger:a=>Number.isSafeInteger(a),array:a=>Array.isArray(a),field:(a,b)=>b.Fp.isValid(a),hash:a=>"function"==typeof a&&Number.isSafeInteger(a.outputLen)};function b4(a,b,c={}){let d=(b,c,d)=>{let e=b3[c];if("function"!=typeof e)throw Error("invalid validator function");let f=a[b];if((!d||void 0!==f)&&!e(f,a))throw Error("param "+String(b)+" is invalid. Expected "+c+", got "+f)};for(let[a,c]of Object.entries(b))d(a,c,!1);for(let[a,b]of Object.entries(c))d(a,b,!0);return a}let b5=()=>{throw Error("not implemented")};function b6(a){let b=new WeakMap;return(c,...d)=>{let e=b.get(c);if(void 0!==e)return e;let f=a(c,...d);return b.set(c,f),f}}function b7(a){if(!Number.isSafeInteger(a)||a<0)throw Error("positive integer expected, got "+a)}function b8(a,...b){if(!(a instanceof Uint8Array||ArrayBuffer.isView(a)&&"Uint8Array"===a.constructor.name))throw Error("Uint8Array expected");if(b.length>0&&!b.includes(a.length))throw Error("Uint8Array expected of length "+b+", got length="+a.length)}function b9(a,b=!0){if(a.destroyed)throw Error("Hash instance has been destroyed");if(b&&a.finished)throw Error("Hash#digest() has already been called")}function ca(a,b){b8(a);let c=b.outputLen;if(a.length<c)throw Error("digestInto() expects output buffer of length at least "+c)}var cb=a.i(666680);let cc=cb&&"object"==typeof cb&&"webcrypto"in cb?cb.webcrypto:cb&&"object"==typeof cb&&"randomBytes"in cb?cb:void 0,cd=a=>new DataView(a.buffer,a.byteOffset,a.byteLength),ce=(a,b)=>a<<32-b|a>>>b,cf=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],cg=a=>a<<24&0xff000000|a<<8&0xff0000|a>>>8&65280|a>>>24&255;function ch(a){for(let b=0;b<a.length;b++)a[b]=cg(a[b])}function ci(a){if("string"!=typeof a)throw Error("utf8ToBytes expected string, got "+typeof a);return new Uint8Array(new TextEncoder().encode(a))}function cj(a){return"string"==typeof a&&(a=ci(a)),b8(a),a}class ck{clone(){return this._cloneInto()}}function cl(a){let b=b=>a().update(cj(b)).digest(),c=a();return b.outputLen=c.outputLen,b.blockLen=c.blockLen,b.create=()=>a(),b}function cm(a=32){if(cc&&"function"==typeof cc.getRandomValues)return cc.getRandomValues(new Uint8Array(a));if(cc&&"function"==typeof cc.randomBytes)return cc.randomBytes(a);throw Error("crypto.getRandomValues must be defined")}let cn=(a,b,c)=>a&b^~a&c,co=(a,b,c)=>a&b^a&c^b&c;class cp extends ck{constructor(a,b,c,d){super(),this.blockLen=a,this.outputLen=b,this.padOffset=c,this.isLE=d,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(a),this.view=cd(this.buffer)}update(a){b9(this);let{view:b,buffer:c,blockLen:d}=this,e=(a=cj(a)).length;for(let f=0;f<e;){let g=Math.min(d-this.pos,e-f);if(g===d){let b=cd(a);for(;d<=e-f;f+=d)this.process(b,f);continue}c.set(a.subarray(f,f+g),this.pos),this.pos+=g,f+=g,this.pos===d&&(this.process(b,0),this.pos=0)}return this.length+=a.length,this.roundClean(),this}digestInto(a){b9(this),ca(a,this),this.finished=!0;let{buffer:b,view:c,blockLen:d,isLE:e}=this,{pos:f}=this;b[f++]=128,this.buffer.subarray(f).fill(0),this.padOffset>d-f&&(this.process(c,0),f=0);for(let a=f;a<d;a++)b[a]=0;!function(a,b,c,d){if("function"==typeof a.setBigUint64)return a.setBigUint64(b,c,d);let e=BigInt(32),f=BigInt(0xffffffff),g=Number(c>>e&f),h=Number(c&f),i=4*!!d,j=4*!d;a.setUint32(b+i,g,d),a.setUint32(b+j,h,d)}(c,d-8,BigInt(8*this.length),e),this.process(c,0);let g=cd(a),h=this.outputLen;if(h%4)throw Error("_sha2: outputLen should be aligned to 32bit");let i=h/4,j=this.get();if(i>j.length)throw Error("_sha2: outputLen bigger than state");for(let a=0;a<i;a++)g.setUint32(4*a,j[a],e)}digest(){let{buffer:a,outputLen:b}=this;this.digestInto(a);let c=a.slice(0,b);return this.destroy(),c}_cloneInto(a){a||(a=new this.constructor),a.set(...this.get());let{blockLen:b,buffer:c,length:d,finished:e,destroyed:f,pos:g}=this;return a.length=d,a.pos=g,a.finished=e,a.destroyed=f,d%b&&a.buffer.set(c),a}}let cq=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),cr=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),cs=new Uint32Array(64);class ct extends cp{constructor(){super(64,32,8,!1),this.A=0|cr[0],this.B=0|cr[1],this.C=0|cr[2],this.D=0|cr[3],this.E=0|cr[4],this.F=0|cr[5],this.G=0|cr[6],this.H=0|cr[7]}get(){let{A:a,B:b,C:c,D:d,E:e,F:f,G:g,H:h}=this;return[a,b,c,d,e,f,g,h]}set(a,b,c,d,e,f,g,h){this.A=0|a,this.B=0|b,this.C=0|c,this.D=0|d,this.E=0|e,this.F=0|f,this.G=0|g,this.H=0|h}process(a,b){for(let c=0;c<16;c++,b+=4)cs[c]=a.getUint32(b,!1);for(let a=16;a<64;a++){let b=cs[a-15],c=cs[a-2],d=ce(b,7)^ce(b,18)^b>>>3,e=ce(c,17)^ce(c,19)^c>>>10;cs[a]=e+cs[a-7]+d+cs[a-16]|0}let{A:c,B:d,C:e,D:f,E:g,F:h,G:i,H:j}=this;for(let a=0;a<64;a++){let b=j+(ce(g,6)^ce(g,11)^ce(g,25))+cn(g,h,i)+cq[a]+cs[a]|0,k=(ce(c,2)^ce(c,13)^ce(c,22))+co(c,d,e)|0;j=i,i=h,h=g,g=f+b|0,f=e,e=d,d=c,c=b+k|0}c=c+this.A|0,d=d+this.B|0,e=e+this.C|0,f=f+this.D|0,g=g+this.E|0,h=h+this.F|0,i=i+this.G|0,j=j+this.H|0,this.set(c,d,e,f,g,h,i,j)}roundClean(){cs.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let cu=cl(()=>new ct);a.s(["CURVE",()=>dJ,"Fp251",()=>d3,"MAX_VALUE",()=>dw,"ProjectivePoint",()=>dK,"Signature",()=>dL,"_poseidonMDS",()=>d5,"_starkCurve",()=>dA,"computeHashOnElements",()=>d_,"ethSigToPrivate",()=>dR,"getAccountPath",()=>dU,"getPublicKey",()=>dD,"getSharedSecret",()=>dE,"getStarkKey",()=>dQ,"grindKey",()=>dP,"keccak",()=>d1,"normalizePrivateKey",()=>dC,"pedersen",()=>d$,"poseidonBasic",()=>d6,"poseidonCreate",()=>d7,"poseidonHash",()=>d9,"poseidonHashFunc",()=>ea,"poseidonHashMany",()=>ec,"poseidonHashSingle",()=>eb,"poseidonSmall",()=>d8,"sign",()=>dH,"utils",()=>dM,"verify",()=>dI],338909);let cv=BigInt(0x100000000-1),cw=BigInt(32),cx=[],cy=[],cz=[],cA=BigInt(0),cB=BigInt(1),cC=BigInt(2),cD=BigInt(7),cE=BigInt(256),cF=BigInt(113);for(let a=0,b=cB,c=1,d=0;a<24;a++){[c,d]=[d,(2*c+3*d)%5],cx.push(2*(5*d+c)),cy.push((a+1)*(a+2)/2%64);let e=cA;for(let a=0;a<7;a++)(b=(b<<cB^(b>>cD)*cF)%cE)&cC&&(e^=cB<<(cB<<BigInt(a))-cB);cz.push(e)}let[cG,cH]=function(a,b=!1){let c=new Uint32Array(a.length),d=new Uint32Array(a.length);for(let e=0;e<a.length;e++){let{h:f,l:g}=function(a,b=!1){return b?{h:Number(a&cv),l:Number(a>>cw&cv)}:{h:0|Number(a>>cw&cv),l:0|Number(a&cv)}}(a[e],b);[c[e],d[e]]=[f,g]}return[c,d]}(cz,!0),cI=(a,b,c)=>c>32?((a,b,c)=>b<<c-32|a>>>64-c)(a,b,c):((a,b,c)=>a<<c|b>>>32-c)(a,b,c),cJ=(a,b,c)=>c>32?((a,b,c)=>a<<c-32|b>>>64-c)(a,b,c):((a,b,c)=>b<<c|a>>>32-c)(a,b,c);class cK extends ck{constructor(a,b,c,d=!1,e=24){if(super(),this.blockLen=a,this.suffix=b,this.outputLen=c,this.enableXOF=d,this.rounds=e,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,b7(c),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(a=>new Uint32Array(a.buffer,a.byteOffset,Math.floor(a.byteLength/4)))(this.state)}keccak(){cf||ch(this.state32),function(a,b=24){let c=new Uint32Array(10);for(let d=24-b;d<24;d++){for(let b=0;b<10;b++)c[b]=a[b]^a[b+10]^a[b+20]^a[b+30]^a[b+40];for(let b=0;b<10;b+=2){let d=(b+8)%10,e=(b+2)%10,f=c[e],g=c[e+1],h=cI(f,g,1)^c[d],i=cJ(f,g,1)^c[d+1];for(let c=0;c<50;c+=10)a[b+c]^=h,a[b+c+1]^=i}let b=a[2],e=a[3];for(let c=0;c<24;c++){let d=cy[c],f=cI(b,e,d),g=cJ(b,e,d),h=cx[c];b=a[h],e=a[h+1],a[h]=f,a[h+1]=g}for(let b=0;b<50;b+=10){for(let d=0;d<10;d++)c[d]=a[b+d];for(let d=0;d<10;d++)a[b+d]^=~c[(d+2)%10]&c[(d+4)%10]}a[0]^=cG[d],a[1]^=cH[d]}c.fill(0)}(this.state32,this.rounds),cf||ch(this.state32),this.posOut=0,this.pos=0}update(a){b9(this);let{blockLen:b,state:c}=this,d=(a=cj(a)).length;for(let e=0;e<d;){let f=Math.min(b-this.pos,d-e);for(let b=0;b<f;b++)c[this.pos++]^=a[e++];this.pos===b&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:a,suffix:b,pos:c,blockLen:d}=this;a[c]^=b,(128&b)!=0&&c===d-1&&this.keccak(),a[d-1]^=128,this.keccak()}writeInto(a){b9(this,!1),b8(a),this.finish();let b=this.state,{blockLen:c}=this;for(let d=0,e=a.length;d<e;){this.posOut>=c&&this.keccak();let f=Math.min(c-this.posOut,e-d);a.set(b.subarray(this.posOut,this.posOut+f),d),this.posOut+=f,d+=f}return a}xofInto(a){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(a)}xof(a){return b7(a),this.xofInto(new Uint8Array(a))}digestInto(a){if(ca(a,this),this.finished)throw Error("digest() was already called");return this.writeInto(a),this.destroy(),a}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(a){let{blockLen:b,suffix:c,outputLen:d,rounds:e,enableXOF:f}=this;return a||(a=new cK(b,c,d,f,e)),a.state32.set(this.state32),a.pos=this.pos,a.posOut=this.posOut,a.finished=this.finished,a.rounds=e,a.suffix=c,a.outputLen=d,a.enableXOF=f,a.destroyed=this.destroyed,a}}let cL=cl(()=>new cK(136,1,32)),cM=BigInt(0),cN=BigInt(1),cO=BigInt(2),cP=BigInt(3),cQ=BigInt(4),cR=BigInt(5),cS=BigInt(8);function cT(a,b){let c=a%b;return c>=cM?c:b+c}function cU(a,b,c){let d=a;for(;b-- >cM;)d*=d,d%=c;return d}function cV(a,b){if(a===cM)throw Error("invert: expected non-zero number");if(b<=cM)throw Error("invert: expected positive modulus, got "+b);let c=cT(a,b),d=b,e=cM,f=cN,g=cN,h=cM;for(;c!==cM;){let a=d/c,b=d%c,i=e-g*a,j=f-h*a;d=c,c=b,e=g,f=h,g=i,h=j}if(d!==cN)throw Error("invert: does not exist");return cT(e,b)}let cW=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function cX(a){return b4(a,cW.reduce((a,b)=>(a[b]="function",a),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}function cY(a,b,c){if(c<cM)throw Error("invalid exponent, negatives unsupported");if(c===cM)return a.ONE;if(c===cN)return b;let d=a.ONE,e=b;for(;c>cM;)c&cN&&(d=a.mul(d,e)),e=a.sqr(e),c>>=cN;return d}function cZ(a,b){let c=void 0!==b?b:a.toString(2).length,d=Math.ceil(c/8);return{nBitLength:c,nByteLength:d}}function c$(a,b,c=!1,d={}){let e;if(a<=cM)throw Error("invalid field: expected ORDER > 0, got "+a);let{nBitLength:f,nByteLength:g}=cZ(a,b);if(g>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let h=Object.freeze({ORDER:a,BITS:f,BYTES:g,MASK:b_(f),ZERO:cM,ONE:cN,create:b=>cT(b,a),isValid:b=>{if("bigint"!=typeof b)throw Error("invalid field element: expected bigint, got "+typeof b);return cM<=b&&b<a},is0:a=>a===cM,isOdd:a=>(a&cN)===cN,neg:b=>cT(-b,a),eql:(a,b)=>a===b,sqr:b=>cT(b*b,a),add:(b,c)=>cT(b+c,a),sub:(b,c)=>cT(b-c,a),mul:(b,c)=>cT(b*c,a),pow:(a,b)=>cY(h,a,b),div:(b,c)=>cT(b*cV(c,a),a),sqrN:a=>a*a,addN:(a,b)=>a+b,subN:(a,b)=>a-b,mulN:(a,b)=>a*b,inv:b=>cV(b,a),sqrt:d.sqrt||(b=>(e||(e=function(a){if(a%cQ===cP){let b=(a+cN)/cQ;return function(a,c){let d=a.pow(c,b);if(!a.eql(a.sqr(d),c))throw Error("Cannot find square root");return d}}if(a%cS===cR){let b=(a-cR)/cS;return function(a,c){let d=a.mul(c,cO),e=a.pow(d,b),f=a.mul(c,e),g=a.mul(a.mul(f,cO),e),h=a.mul(f,a.sub(g,a.ONE));if(!a.eql(a.sqr(h),c))throw Error("Cannot find square root");return h}}return function(a){let b,c,d,e=(a-cN)/cO;for(b=a-cN,c=0;b%cO===cM;b/=cO,c++);for(d=cO;d<a&&function(a,b,c){if(b<cM)throw Error("invalid exponent, negatives unsupported");if(c<=cM)throw Error("invalid modulus");if(c===cN)return cM;let d=cN;for(;b>cM;)b&cN&&(d=d*a%c),a=a*a%c,b>>=cN;return d}(d,e,a)!==a-cN;d++)if(d>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===c){let b=(a+cN)/cQ;return function(a,c){let d=a.pow(c,b);if(!a.eql(a.sqr(d),c))throw Error("Cannot find square root");return d}}let f=(b+cN)/cO;return function(a,g){if(a.pow(g,e)===a.neg(a.ONE))throw Error("Cannot find square root");let h=c,i=a.pow(a.mul(a.ONE,d),b),j=a.pow(g,f),k=a.pow(g,b);for(;!a.eql(k,a.ONE);){if(a.eql(k,a.ZERO))return a.ZERO;let b=1;for(let c=a.sqr(k);b<h&&!a.eql(c,a.ONE);b++)c=a.sqr(c);let c=a.pow(i,cN<<BigInt(h-b-1));i=a.sqr(c),j=a.mul(j,c),k=a.mul(k,i),h=b}return j}}(a)}(a)),e(h,b))),invertBatch:a=>(function(a,b){let c=Array(b.length),d=b.reduce((b,d,e)=>a.is0(d)?b:(c[e]=b,a.mul(b,d)),a.ONE),e=a.inv(d);return b.reduceRight((b,d,e)=>a.is0(d)?b:(c[e]=a.mul(b,c[e]),a.mul(b,d)),e),c})(h,a),cmov:(a,b,c)=>c?b:a,toBytes:a=>c?bP(a,g):bO(a,g),fromBytes:a=>{if(a.length!==g)throw Error("Field.fromBytes: expected "+g+" bytes, got "+a.length);return c?bN(a):bM(a)}});return Object.freeze(h)}function c_(a){if("bigint"!=typeof a)throw Error("field order must be bigint");return Math.ceil(a.toString(2).length/8)}function c0(a){let b=c_(a);return b+Math.ceil(b/2)}function c1(a){let{Fp:b,mds:c,reversePartialPowIdx:d,roundConstants:e}=a,{roundsFull:f,roundsPartial:g,sboxPower:h,t:i}=a;for(let c of(cX(b),["t","roundsFull","roundsPartial"]))if("number"!=typeof a[c]||!Number.isSafeInteger(a[c]))throw Error("invalid number "+c);if(!Array.isArray(c)||c.length!==i)throw Error("Poseidon: invalid MDS matrix");let j=c.map(a=>{if(!Array.isArray(a)||a.length!==i)throw Error("invalid MDS matrix row: "+a);return a.map(a=>{if("bigint"!=typeof a)throw Error("invalid MDS matrix bigint: "+a);return b.create(a)})});if(void 0!==d&&"boolean"!=typeof d)throw Error("invalid param reversePartialPowIdx="+d);if(1&f)throw Error("roundsFull is not even"+f);let k=f+g;if(!Array.isArray(e)||e.length!==k)throw Error("Poseidon: invalid round constants");let l=e.map(a=>{if(!Array.isArray(a)||a.length!==i)throw Error("invalid round constants");return a.map(a=>{if("bigint"!=typeof a||!b.isValid(a))throw Error("invalid round constant");return b.create(a)})});if(!h||![3,5,7].includes(h))throw Error("invalid sboxPower");let m=BigInt(h),n=a=>cY(b,a,m);return 3===h?n=a=>b.mul(b.sqrN(a),a):5===h&&(n=a=>b.mul(b.sqrN(b.sqrN(a)),a)),Object.freeze({...a,rounds:k,sboxFn:n,roundConstants:l,mds:j})}function c2(a,b){if("number"!=typeof b)throw Error("poseidonSplitConstants: invalid t");if(!Array.isArray(a)||a.length%b)throw Error("poseidonSplitConstants: invalid rc");let c=[],d=[];for(let e=0;e<a.length;e++)d.push(a[e]),d.length===b&&(c.push(d),d=[]);return c}function c3(a){let b=c1(a),{Fp:c,mds:d,roundConstants:e,rounds:f,roundsPartial:g,sboxFn:h,t:i}=b,j=b.roundsFull/2,k=b.reversePartialPowIdx?i-1:0,l=(a,b,f)=>(a=a.map((a,b)=>c.add(a,e[f][b])),b?a=a.map(a=>h(a)):a[k]=h(a[k]),a=d.map(b=>b.reduce((b,d,e)=>c.add(b,c.mulN(d,a[e])),c.ZERO))),m=function(a){if(!Array.isArray(a)||a.length!==i)throw Error("invalid values, expected array of bigints with length "+i);a=a.map(a=>{if("bigint"!=typeof a)throw Error("invalid bigint="+a);return c.create(a)});let b=0;for(let c=0;c<j;c++)a=l(a,!0,b++);for(let c=0;c<g;c++)a=l(a,!1,b++);for(let c=0;c<j;c++)a=l(a,!0,b++);if(b!==f)throw Error("invalid number of rounds");return a};return m.roundConstants=e,m}a.s(["poseidon",()=>c3,"splitConstants",()=>c2,"validateOpts",()=>c1],525706),a.s(["DER",()=>dh,"SWUFpSqrtRatio",()=>dq,"mapToCurveSimpleSWU",()=>dr,"weierstrass",()=>dp,"weierstrassPoints",()=>dn],323936);let c4=BigInt(0),c5=BigInt(1);function c6(a,b){let c=b.negate();return a?c:b}function c7(a,b){if(!Number.isSafeInteger(a)||a<=0||a>b)throw Error("invalid window size, expected [1.."+b+"], got W="+a)}function c8(a,b){return c7(a,b),{windows:Math.ceil(b/a)+1,windowSize:2**(a-1)}}let c9=new WeakMap,da=new WeakMap;function db(a){return da.get(a)||1}function dc(a){return cX(a.Fp),b4(a,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...cZ(a.n,a.nBitLength),...a,...{p:a.Fp.ORDER}})}var dd=a.i(648436);function de(a){void 0!==a.lowS&&bE("lowS",a.lowS),void 0!==a.prehash&&bE("prehash",a.prehash)}let{bytesToNumberBE:df,hexToBytes:dg}=dd,dh={Err:class extends Error{constructor(a=""){super(a)}},_tlv:{encode:(a,b)=>{let{Err:c}=dh;if(a<0||a>256)throw new c("tlv.encode: wrong tag");if(1&b.length)throw new c("tlv.encode: unpadded data");let d=b.length/2,e=dd.numberToHexUnpadded(d);if(e.length/2&128)throw new c("tlv.encode: long form length too big");let f=d>127?dd.numberToHexUnpadded(e.length/2|128):"";return dd.numberToHexUnpadded(a)+f+e+b},decode(a,b){let{Err:c}=dh,d=0;if(a<0||a>256)throw new c("tlv.encode: wrong tag");if(b.length<2||b[d++]!==a)throw new c("tlv.decode: wrong tlv");let e=b[d++],f=0;if(128&e){let a=127&e;if(!a)throw new c("tlv.decode(long): indefinite length not supported");if(a>4)throw new c("tlv.decode(long): byte length is too big");let g=b.subarray(d,d+a);if(g.length!==a)throw new c("tlv.decode: length bytes not complete");if(0===g[0])throw new c("tlv.decode(long): zero leftmost byte");for(let a of g)f=f<<8|a;if(d+=a,f<128)throw new c("tlv.decode(long): not minimal encoding")}else f=e;let g=b.subarray(d,d+f);if(g.length!==f)throw new c("tlv.decode: wrong value length");return{v:g,l:b.subarray(d+f)}}},_int:{encode(a){let{Err:b}=dh;if(a<di)throw new b("integer: negative integers are not allowed");let c=dd.numberToHexUnpadded(a);if(8&Number.parseInt(c[0],16)&&(c="00"+c),1&c.length)throw new b("unexpected DER parsing assertion: unpadded hex");return c},decode(a){let{Err:b}=dh;if(128&a[0])throw new b("invalid signature integer: negative");if(0===a[0]&&!(128&a[1]))throw new b("invalid signature integer: unnecessary leading zero");return df(a)}},toSig(a){let{Err:b,_int:c,_tlv:d}=dh,e="string"==typeof a?dg(a):a;dd.abytes(e);let{v:f,l:g}=d.decode(48,e);if(g.length)throw new b("invalid signature: left bytes after parsing");let{v:h,l:i}=d.decode(2,f),{v:j,l:k}=d.decode(2,i);if(k.length)throw new b("invalid signature: left bytes after parsing");return{r:c.decode(h),s:c.decode(j)}},hexFromSig(a){let{_tlv:b,_int:c}=dh,d=b.encode(2,c.encode(a.r)),e=b.encode(2,c.encode(a.s));return b.encode(48,d+e)}},di=BigInt(0),dj=BigInt(1),dk=BigInt(2),dl=BigInt(3),dm=BigInt(4);function dn(a){var b;let c=function(a){let b=dc(a);dd.validateObject(b,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:c,Fp:d,a:e}=b;if(c){if(!d.eql(e,d.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof c||"bigint"!=typeof c.beta||"function"!=typeof c.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...b})}(a),{Fp:d}=c,e=c$(c.n,c.nBitLength),f=c.toBytes||((a,b,c)=>{let e=b.toAffine();return dd.concatBytes(Uint8Array.from([4]),d.toBytes(e.x),d.toBytes(e.y))}),g=c.fromBytes||(a=>{let b=a.subarray(1);return{x:d.fromBytes(b.subarray(0,d.BYTES)),y:d.fromBytes(b.subarray(d.BYTES,2*d.BYTES))}});function h(a){let{a:b,b:e}=c,f=d.sqr(a),g=d.mul(f,a);return d.add(d.add(g,d.mul(a,b)),e)}if(!d.eql(d.sqr(c.Gy),h(c.Gx)))throw Error("bad generator point: equation left != right");function i(a){let b,{allowedPrivateKeyLengths:d,nByteLength:e,wrapPrivateKey:f,n:g}=c;if(d&&"bigint"!=typeof a){if(dd.isBytes(a)&&(a=dd.bytesToHex(a)),"string"!=typeof a||!d.includes(a.length))throw Error("invalid private key");a=a.padStart(2*e,"0")}try{b="bigint"==typeof a?a:dd.bytesToNumberBE(bR("private key",a,e))}catch(b){throw Error("invalid private key, expected hex or "+e+" bytes, got "+typeof a)}return f&&(b=cT(b,g)),dd.aInRange("private key",b,dj,g),b}function j(a){if(!(a instanceof m))throw Error("ProjectivePoint expected")}let k=b6((a,b)=>{let{px:c,py:e,pz:f}=a;if(d.eql(f,d.ONE))return{x:c,y:e};let g=a.is0();null==b&&(b=g?d.ONE:d.inv(f));let h=d.mul(c,b),i=d.mul(e,b),j=d.mul(f,b);if(g)return{x:d.ZERO,y:d.ZERO};if(!d.eql(j,d.ONE))throw Error("invZ was invalid");return{x:h,y:i}}),l=b6(a=>{if(a.is0()){if(c.allowInfinityPoint&&!d.is0(a.py))return;throw Error("bad point: ZERO")}let{x:b,y:e}=a.toAffine();if(!d.isValid(b)||!d.isValid(e))throw Error("bad point: x or y not FE");let f=d.sqr(e),g=h(b);if(!d.eql(f,g))throw Error("bad point: equation left != right");if(!a.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class m{constructor(a,b,c){if(this.px=a,this.py=b,this.pz=c,null==a||!d.isValid(a))throw Error("x required");if(null==b||!d.isValid(b))throw Error("y required");if(null==c||!d.isValid(c))throw Error("z required");Object.freeze(this)}static fromAffine(a){let{x:b,y:c}=a||{};if(!a||!d.isValid(b)||!d.isValid(c))throw Error("invalid affine point");if(a instanceof m)throw Error("projective point not allowed");let e=a=>d.eql(a,d.ZERO);return e(b)&&e(c)?m.ZERO:new m(b,c,d.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(a){let b=d.invertBatch(a.map(a=>a.pz));return a.map((a,c)=>a.toAffine(b[c])).map(m.fromAffine)}static fromHex(a){let b=m.fromAffine(g(bR("pointHex",a)));return b.assertValidity(),b}static fromPrivateKey(a){return m.BASE.multiply(i(a))}static msm(a,b){return function(a,b,c,d){if(!Array.isArray(c))throw Error("array expected");c.forEach((b,c)=>{if(!(b instanceof a))throw Error("invalid point at index "+c)});if(!Array.isArray(d))throw Error("array of scalars expected");if(d.forEach((a,c)=>{if(!b.isValid(a))throw Error("invalid scalar at index "+c)}),c.length!==d.length)throw Error("arrays of points and scalars must have equal length");let e=a.ZERO,f=bY(BigInt(c.length)),g=f>12?f-3:f>4?f-2:f?2:1,h=(1<<g)-1,i=Array(h+1).fill(e),j=Math.floor((b.BITS-1)/g)*g,k=e;for(let a=j;a>=0;a-=g){i.fill(e);for(let b=0;b<d.length;b++){let e=Number(d[b]>>BigInt(a)&BigInt(h));i[e]=i[e].add(c[b])}let b=e;for(let a=i.length-1,c=e;a>0;a--)c=c.add(i[a]),b=b.add(c);if(k=k.add(b),0!==a)for(let a=0;a<g;a++)k=k.double()}return k}(m,e,a,b)}_setWindowSize(a){o.setWindowSize(this,a)}assertValidity(){l(this)}hasEvenY(){let{y:a}=this.toAffine();if(d.isOdd)return!d.isOdd(a);throw Error("Field doesn't support isOdd")}equals(a){j(a);let{px:b,py:c,pz:e}=this,{px:f,py:g,pz:h}=a,i=d.eql(d.mul(b,h),d.mul(f,e)),k=d.eql(d.mul(c,h),d.mul(g,e));return i&&k}negate(){return new m(this.px,d.neg(this.py),this.pz)}double(){let{a,b}=c,e=d.mul(b,dl),{px:f,py:g,pz:h}=this,i=d.ZERO,j=d.ZERO,k=d.ZERO,l=d.mul(f,f),n=d.mul(g,g),o=d.mul(h,h),p=d.mul(f,g);return p=d.add(p,p),k=d.mul(f,h),k=d.add(k,k),i=d.mul(a,k),j=d.mul(e,o),j=d.add(i,j),i=d.sub(n,j),j=d.add(n,j),j=d.mul(i,j),i=d.mul(p,i),k=d.mul(e,k),o=d.mul(a,o),p=d.sub(l,o),p=d.mul(a,p),p=d.add(p,k),k=d.add(l,l),l=d.add(k,l),l=d.add(l,o),l=d.mul(l,p),j=d.add(j,l),o=d.mul(g,h),o=d.add(o,o),l=d.mul(o,p),i=d.sub(i,l),k=d.mul(o,n),k=d.add(k,k),new m(i,j,k=d.add(k,k))}add(a){j(a);let{px:b,py:e,pz:f}=this,{px:g,py:h,pz:i}=a,k=d.ZERO,l=d.ZERO,n=d.ZERO,o=c.a,p=d.mul(c.b,dl),q=d.mul(b,g),r=d.mul(e,h),s=d.mul(f,i),t=d.add(b,e),u=d.add(g,h);t=d.mul(t,u),u=d.add(q,r),t=d.sub(t,u),u=d.add(b,f);let v=d.add(g,i);return u=d.mul(u,v),v=d.add(q,s),u=d.sub(u,v),v=d.add(e,f),k=d.add(h,i),v=d.mul(v,k),k=d.add(r,s),v=d.sub(v,k),n=d.mul(o,u),k=d.mul(p,s),n=d.add(k,n),k=d.sub(r,n),n=d.add(r,n),l=d.mul(k,n),r=d.add(q,q),r=d.add(r,q),s=d.mul(o,s),u=d.mul(p,u),r=d.add(r,s),s=d.sub(q,s),s=d.mul(o,s),u=d.add(u,s),q=d.mul(r,u),l=d.add(l,q),q=d.mul(v,u),k=d.mul(t,k),k=d.sub(k,q),q=d.mul(t,r),n=d.mul(v,n),new m(k,l,n=d.add(n,q))}subtract(a){return this.add(a.negate())}is0(){return this.equals(m.ZERO)}wNAF(a){return o.wNAFCached(this,a,m.normalizeZ)}multiplyUnsafe(a){let{endo:b,n:e}=c;dd.aInRange("scalar",a,di,e);let f=m.ZERO;if(a===di)return f;if(this.is0()||a===dj)return this;if(!b||o.hasPrecomputes(this))return o.wNAFCachedUnsafe(this,a,m.normalizeZ);let{k1neg:g,k1:h,k2neg:i,k2:j}=b.splitScalar(a),k=f,l=f,n=this;for(;h>di||j>di;)h&dj&&(k=k.add(n)),j&dj&&(l=l.add(n)),n=n.double(),h>>=dj,j>>=dj;return g&&(k=k.negate()),i&&(l=l.negate()),l=new m(d.mul(l.px,b.beta),l.py,l.pz),k.add(l)}multiply(a){let b,e,{endo:f,n:g}=c;if(dd.aInRange("scalar",a,dj,g),f){let{k1neg:c,k1:g,k2neg:h,k2:i}=f.splitScalar(a),{p:j,f:k}=this.wNAF(g),{p:l,f:n}=this.wNAF(i);j=o.constTimeNegate(c,j),l=o.constTimeNegate(h,l),l=new m(d.mul(l.px,f.beta),l.py,l.pz),b=j.add(l),e=k.add(n)}else{let{p:c,f:d}=this.wNAF(a);b=c,e=d}return m.normalizeZ([b,e])[0]}multiplyAndAddUnsafe(a,b,c){let d=m.BASE,e=(a,b)=>b!==di&&b!==dj&&a.equals(d)?a.multiply(b):a.multiplyUnsafe(b),f=e(this,b).add(e(a,c));return f.is0()?void 0:f}toAffine(a){return k(this,a)}isTorsionFree(){let{h:a,isTorsionFree:b}=c;if(a===dj)return!0;if(b)return b(m,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:a,clearCofactor:b}=c;return a===dj?this:b?b(m,this):this.multiplyUnsafe(c.h)}toRawBytes(a=!0){return bE("isCompressed",a),this.assertValidity(),f(m,this,a)}toHex(a=!0){return bE("isCompressed",a),dd.bytesToHex(this.toRawBytes(a))}}m.BASE=new m(c.Gx,c.Gy,d.ONE),m.ZERO=new m(d.ZERO,d.ONE,d.ZERO);let n=c.nBitLength,o=(b=c.endo?Math.ceil(n/2):n,{constTimeNegate:c6,hasPrecomputes:a=>1!==db(a),unsafeLadder(a,b,c=m.ZERO){let d=a;for(;b>c4;)b&c5&&(c=c.add(d)),d=d.double(),b>>=c5;return c},precomputeWindow(a,c){let{windows:d,windowSize:e}=c8(c,b),f=[],g=a,h=g;for(let a=0;a<d;a++){h=g,f.push(h);for(let a=1;a<e;a++)h=h.add(g),f.push(h);g=h.double()}return f},wNAF(a,c,d){let{windows:e,windowSize:f}=c8(a,b),g=m.ZERO,h=m.BASE,i=BigInt(2**a-1),j=2**a,k=BigInt(a);for(let a=0;a<e;a++){let b=a*f,e=Number(d&i);d>>=k,e>f&&(e-=j,d+=c5);let l=b+Math.abs(e)-1,m=a%2!=0,n=e<0;0===e?h=h.add(c6(m,c[b])):g=g.add(c6(n,c[l]))}return{p:g,f:h}},wNAFUnsafe(a,c,d,e=m.ZERO){let{windows:f,windowSize:g}=c8(a,b),h=BigInt(2**a-1),i=2**a,j=BigInt(a);for(let a=0;a<f;a++){let b=a*g;if(d===c4)break;let f=Number(d&h);if(d>>=j,f>g&&(f-=i,d+=c5),0===f)continue;let k=c[b+Math.abs(f)-1];f<0&&(k=k.negate()),e=e.add(k)}return e},getPrecomputes(a,b,c){let d=c9.get(b);return d||(d=this.precomputeWindow(b,a),1!==a&&c9.set(b,c(d))),d},wNAFCached(a,b,c){let d=db(a);return this.wNAF(d,this.getPrecomputes(d,a,c),b)},wNAFCachedUnsafe(a,b,c,d){let e=db(a);return 1===e?this.unsafeLadder(a,b,d):this.wNAFUnsafe(e,this.getPrecomputes(e,a,c),b,d)},setWindowSize(a,c){c7(c,b),da.set(a,c),c9.delete(a)}});return{CURVE:c,ProjectivePoint:m,normPrivateKeyToScalar:i,weierstrassEquation:h,isWithinCurveOrder:function(a){return dd.inRange(a,dj,c.n)}}}function dp(a){let b=function(a){let b=dc(a);return dd.validateObject(b,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...b})}(a),{Fp:c,n:d}=b,e=c.BYTES+1,f=2*c.BYTES+1;function g(a){return cT(a,d)}let{ProjectivePoint:h,normPrivateKeyToScalar:i,weierstrassEquation:j,isWithinCurveOrder:k}=dn({...b,toBytes(a,b,d){let e=b.toAffine(),f=c.toBytes(e.x),g=dd.concatBytes;return(bE("isCompressed",d),d)?g(Uint8Array.from([b.hasEvenY()?2:3]),f):g(Uint8Array.from([4]),f,c.toBytes(e.y))},fromBytes(a){let b=a.length,d=a[0],g=a.subarray(1);if(b===e&&(2===d||3===d)){let a,b=dd.bytesToNumberBE(g);if(!dd.inRange(b,dj,c.ORDER))throw Error("Point is not on curve");let e=j(b);try{a=c.sqrt(e)}catch(a){throw Error("Point is not on curve"+(a instanceof Error?": "+a.message:""))}return(1&d)==1!=((a&dj)===dj)&&(a=c.neg(a)),{x:b,y:a}}if(b===f&&4===d)return{x:c.fromBytes(g.subarray(0,c.BYTES)),y:c.fromBytes(g.subarray(c.BYTES,2*c.BYTES))};throw Error("invalid Point, expected length of "+e+", or uncompressed "+f+", got "+b)}}),l=a=>dd.bytesToHex(dd.numberToBytesBE(a,b.nByteLength)),m=(a,b,c)=>dd.bytesToNumberBE(a.slice(b,c));class n{constructor(a,b,c){this.r=a,this.s=b,this.recovery=c,this.assertValidity()}static fromCompact(a){let c=b.nByteLength;return new n(m(a=bR("compactSignature",a,2*c),0,c),m(a,c,2*c))}static fromDER(a){let{r:b,s:c}=dh.toSig(bR("DER",a));return new n(b,c)}assertValidity(){dd.aInRange("r",this.r,dj,d),dd.aInRange("s",this.s,dj,d)}addRecoveryBit(a){return new n(this.r,this.s,a)}recoverPublicKey(a){let{r:e,s:f,recovery:i}=this,j=q(bR("msgHash",a));if(null==i||![0,1,2,3].includes(i))throw Error("recovery id invalid");let k=2===i||3===i?e+b.n:e;if(k>=c.ORDER)throw Error("recovery id 2 or 3 invalid");let m=(1&i)==0?"02":"03",n=h.fromHex(m+l(k)),o=cV(k,d),p=g(-j*o),r=g(f*o),s=h.BASE.multiplyAndAddUnsafe(n,p,r);if(!s)throw Error("point at infinify");return s.assertValidity(),s}hasHighS(){return this.s>d>>dj}normalizeS(){return this.hasHighS()?new n(this.r,g(-this.s),this.recovery):this}toDERRawBytes(){return dd.hexToBytes(this.toDERHex())}toDERHex(){return dh.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return dd.hexToBytes(this.toCompactHex())}toCompactHex(){return l(this.r)+l(this.s)}}function o(a){let b=dd.isBytes(a),c="string"==typeof a,d=(b||c)&&a.length;return b?d===e||d===f:c?d===2*e||d===2*f:a instanceof h}let p=b.bits2int||function(a){if(a.length>8192)throw Error("input is too large");let c=dd.bytesToNumberBE(a),d=8*a.length-b.nBitLength;return d>0?c>>BigInt(d):c},q=b.bits2int_modN||function(a){return g(p(a))},r=dd.bitMask(b.nBitLength);function s(a){return dd.aInRange("num < 2^"+b.nBitLength,a,di,r),dd.numberToBytesBE(a,b.nByteLength)}let t={lowS:b.lowS,prehash:!1},u={lowS:b.lowS,prehash:!1};return h.BASE._setWindowSize(8),{CURVE:b,getPublicKey:function(a,b=!0){return h.fromPrivateKey(a).toRawBytes(b)},getSharedSecret:function(a,b,c=!0){if(o(a))throw Error("first arg must be private key");if(!o(b))throw Error("second arg must be public key");return h.fromHex(b).multiply(i(a)).toRawBytes(c)},sign:function(a,e,f=t){let{seed:j,k2sig:l}=function(a,e,f=t){if(["recovered","canonical"].some(a=>a in f))throw Error("sign() legacy options not supported");let{hash:j,randomBytes:l}=b,{lowS:m,prehash:o,extraEntropy:r}=f;null==m&&(m=!0),a=bR("msgHash",a),de(f),o&&(a=bR("prehashed msgHash",j(a)));let u=q(a),v=i(e),w=[s(v),s(u)];if(null!=r&&!1!==r){let a=!0===r?l(c.BYTES):r;w.push(bR("extraEntropy",a))}return{seed:dd.concatBytes(...w),k2sig:function(a){var b;let c=p(a);if(!k(c))return;let e=cV(c,d),f=h.BASE.multiply(c).toAffine(),i=g(f.x);if(i===di)return;let j=g(e*g(u+i*v));if(j===di)return;let l=2*(f.x!==i)|Number(f.y&dj),o=j;return m&&j>d>>dj&&(o=(b=j)>d>>dj?g(-b):b,l^=1),new n(i,o,l)}}}(a,e,f);return dd.createHmacDrbg(b.hash.outputLen,b.nByteLength,b.hmac)(j,l)},verify:function(a,c,e,f=u){let i,j;c=bR("msgHash",c),e=bR("publicKey",e);let{lowS:k,prehash:l,format:m}=f;if(de(f),"strict"in f)throw Error("options.strict was renamed to lowS");if(void 0!==m&&"compact"!==m&&"der"!==m)throw Error("format must be compact or der");let o="string"==typeof a||dd.isBytes(a),p=!o&&!m&&"object"==typeof a&&null!==a&&"bigint"==typeof a.r&&"bigint"==typeof a.s;if(!o&&!p)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(p&&(j=new n(a.r,a.s)),o){try{"compact"!==m&&(j=n.fromDER(a))}catch(a){if(!(a instanceof dh.Err))throw a}j||"der"===m||(j=n.fromCompact(a))}i=h.fromHex(e)}catch(a){return!1}if(!j||k&&j.hasHighS())return!1;l&&(c=b.hash(c));let{r,s}=j,t=q(c),v=cV(s,d),w=g(t*v),x=g(r*v),y=h.BASE.multiplyAndAddUnsafe(i,w,x)?.toAffine();return!!y&&g(y.x)===r},ProjectivePoint:h,Signature:n,utils:{isValidPrivateKey(a){try{return i(a),!0}catch(a){return!1}},normPrivateKeyToScalar:i,randomPrivateKey:()=>{let a=c0(b.n);return function(a,b,c=!1){let d=a.length,e=c_(b),f=c0(b);if(d<16||d<f||d>1024)throw Error("expected "+f+"-1024 bytes of input, got "+d);let g=cT(c?bM(a):bN(a),b-cN)+cN;return c?bP(g,e):bO(g,e)}(b.randomBytes(a),b.n)},precompute:(a=8,b=h.BASE)=>(b._setWindowSize(a),b.multiply(BigInt(3)),b)}}}function dq(a,b){let c=a.ORDER,d=di;for(let a=c-dj;a%dk===di;a/=dk)d+=dj;let e=d,f=dk<<e-dj-dj,g=f*dk,h=(c-dj)/g,i=(h-dj)/dk,j=g-dj,k=a.pow(b,h),l=a.pow(b,(h+dj)/dk),m=(b,c)=>{let d=k,g=a.pow(c,j),h=a.sqr(g);h=a.mul(h,c);let m=a.mul(b,h);m=a.pow(m,i),m=a.mul(m,g),g=a.mul(m,c),h=a.mul(m,b);let n=a.mul(h,g);m=a.pow(n,f);let o=a.eql(m,a.ONE);g=a.mul(h,l),m=a.mul(n,d),h=a.cmov(g,h,o),n=a.cmov(m,n,o);for(let b=e;b>dj;b--){let c=b-dk;c=dk<<c-dj;let e=a.pow(n,c),f=a.eql(e,a.ONE);g=a.mul(h,d),d=a.mul(d,d),e=a.mul(n,d),h=a.cmov(g,h,f),n=a.cmov(e,n,f)}return{isValid:o,value:h}};if(a.ORDER%dm===dl){let c=(a.ORDER-dl)/dm,d=a.sqrt(a.neg(b));m=(b,e)=>{let f=a.sqr(e),g=a.mul(b,e);f=a.mul(f,g);let h=a.pow(f,c);h=a.mul(h,g);let i=a.mul(h,d),j=a.mul(a.sqr(h),e),k=a.eql(j,b),l=a.cmov(i,h,k);return{isValid:k,value:l}}}return m}function dr(a,b){if(cX(a),!a.isValid(b.A)||!a.isValid(b.B)||!a.isValid(b.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let c=dq(a,b.Z);if(!a.isOdd)throw Error("Fp.isOdd is not implemented!");return d=>{let e,f,g,h,i,j,k,l;e=a.sqr(d),e=a.mul(e,b.Z),f=a.sqr(e),f=a.add(f,e),g=a.add(f,a.ONE),g=a.mul(g,b.B),h=a.cmov(b.Z,a.neg(f),!a.eql(f,a.ZERO)),h=a.mul(h,b.A),f=a.sqr(g),j=a.sqr(h),i=a.mul(j,b.A),f=a.add(f,i),f=a.mul(f,g),j=a.mul(j,h),i=a.mul(j,b.B),f=a.add(f,i),k=a.mul(e,g);let{isValid:m,value:n}=c(f,j);l=a.mul(e,d),l=a.mul(l,n),k=a.cmov(k,g,m),l=a.cmov(l,n,m);let o=a.isOdd(d)===a.isOdd(l);return l=a.cmov(a.neg(l),l,o),{x:k=a.div(k,h),y:l}}}class ds extends ck{constructor(a,b){super(),this.finished=!1,this.destroyed=!1,function(a){if("function"!=typeof a||"function"!=typeof a.create)throw Error("Hash should be wrapped by utils.wrapConstructor");b7(a.outputLen),b7(a.blockLen)}(a);let c=cj(b);if(this.iHash=a.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let d=this.blockLen,e=new Uint8Array(d);e.set(c.length>d?a.create().update(c).digest():c);for(let a=0;a<e.length;a++)e[a]^=54;this.iHash.update(e),this.oHash=a.create();for(let a=0;a<e.length;a++)e[a]^=106;this.oHash.update(e),e.fill(0)}update(a){return b9(this),this.iHash.update(a),this}digestInto(a){b9(this),b8(a,this.outputLen),this.finished=!0,this.iHash.digestInto(a),this.oHash.update(a),this.oHash.digestInto(a),this.destroy()}digest(){let a=new Uint8Array(this.oHash.outputLen);return this.digestInto(a),a}_cloneInto(a){a||(a=Object.create(Object.getPrototypeOf(this),{}));let{oHash:b,iHash:c,finished:d,destroyed:e,blockLen:f,outputLen:g}=this;return a.finished=d,a.destroyed=e,a.blockLen=f,a.outputLen=g,a.oHash=b._cloneInto(a.oHash),a.iHash=c._cloneInto(a.iHash),a}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let dt=(a,b,c)=>new ds(a,b).update(c).digest();function du(a){return{hash:a,hmac:(b,...c)=>dt(a,b,function(...a){let b=0;for(let c=0;c<a.length;c++){let d=a[c];b8(d),b+=d.length}let c=new Uint8Array(b);for(let b=0,d=0;b<a.length;b++){let e=a[b];c.set(e,d),d+=e.length}return c}(...c)),randomBytes:cm}}dt.create=(a,b)=>new ds(a,b);let dv=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583"),dw=BigInt("0x800000000000000000000000000000000000000000000000000000000000000");function dx(a){for(;0===a[0];)a=a.subarray(1);let b=8*a.length-252,c=bM(a);return b>0?c>>BigInt(b):c}function dy(a){return"string"==typeof a&&1&(a=dO(a)).length&&(a="0"+a),bL(a)}let dz=dp({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:c$(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:dv,nBitLength:252,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,...du(cu),bits2int:dx,bits2int_modN:a=>{let b=bM(a).toString(16);return 63===b.length&&(a=dy(b+"0")),cT(dx(a),dv)}}),dA=dz;function dB(a){return bR("","string"==typeof a?dy(a):a)}function dC(a){return bG(dB(a)).padStart(64,"0")}function dD(a,b=!1){return dz.getPublicKey(dC(a),b)}function dE(a,b){return dz.getSharedSecret(dC(a),b)}function dF(a){let{r:b,s:c}=a;if(b<0n||b>=dw)throw Error(`Signature.r should be [1, ${dw})`);let d=cV(c,dv);if(d<0n||d>=dw)throw Error(`inv(Signature.s) should be [1, ${dw})`)}function dG(a){let b=dB(a);if(bM(b)>=dw)throw Error(`msgHash should be [0, ${dw})`);return b}function dH(a,b,c){let d=dz.sign(dG(a),dC(b),c);return dF(d),d}function dI(a,b,c){if(!(a instanceof dL)){let b=dB(a);try{a=dL.fromDER(b)}catch(c){if(!(c instanceof dh.Err))throw c;a=dL.fromCompact(b)}}return dF(a),dz.verify(a,dG(b),dB(c))}let{CURVE:dJ,ProjectivePoint:dK,Signature:dL,utils:dM}=dz;function dN(a){let b=bG(a.subarray(1)).replace(/^0+/gm,"");return`0x${b}`}function dO(a){return a.replace(/^0x/i,"")}function dP(a){let b=dB(a),c=2n**256n,d=c-cT(c,dv);for(let a=0;;a++){let c=d2(bS(b,bQ(BigInt(a))));if(c<d)return cT(c,dv).toString(16);if(1e5===a)throw Error("grindKey is broken: tried 100k vals")}}function dQ(a){return dN(dD(a,!0))}function dR(a){if(130!==(a=dO(a)).length)throw Error("Wrong ethereum signature");return dP(a.substring(0,64))}let dS=2n**31n-1n,dT=a=>Number(a&dS);function dU(a,b,c,d){let e=dT(d2(a)),f=dT(d2(b)),g=bI(dO(c));return`m/2645'/${e}'/${f}'/${dT(g)}'/${dT(g>>31n)}'/${d}`}let dV=[new dK(0x49ee3eba8c1600700ee1b87eb599f16716b0b1022947733551fde4050ca6804n,0x3ca0cfe4b3bc6ddf346d49d06ea0ed34e621062c0e056c1d0405d266e10268an,1n),new dK(0x234287dcbaffe7f969c748655fca9e58fa8120b6d56eb0c1080d17957ebe47bn,0x3b056f100f96fb21e889527d41f4e39940135dd7a6c94cc6ed0268ee89e5615n,1n),new dK(0x4fa56f376c83db33f9dab2656558f3399099ec1de5e3018b7a6932dba8aa378n,0x3fa0984c931c9e38113e0c0e47e4401562761f92a7a23b45168f4e80ff5b54dn,1n),new dK(0x4ba4cc166be8dec764910f75b45f74b40c690c74709e90f3aa372f0bd2d6997n,0x40301cf5c1751f4b971e46c4ede85fcac5c59a5ce5ae7c48151f27b24b219cn,1n),new dK(0x54302dcb0e6cc1c6e44cca8f61a63bb2ca65048d53fb325d36ff12c49a58202n,0x1b77b3e37d13504b348046268d8ae25ce98ad783c25561a879dcc77e99c2426n,1n)];function dW(a,b){let c=[],d=a;for(let a=0;a<248;a++)c.push(d),d=d.double();d=b;for(let a=0;a<4;a++)c.push(d),d=d.double();return c}let dX=dW(dV[1],dV[2]),dY=dW(dV[3],dV[4]);function dZ(a,b,c){let d=function(a){let b;if("bigint"==typeof a)b=a;else if("number"==typeof a){if(!Number.isSafeInteger(a))throw Error(`Invalid pedersenArg: ${a}`);b=BigInt(a)}else b=bM(dB(a));if(!(0n<=b&&b<dz.CURVE.Fp.ORDER))throw Error(`PedersenArg should be 0 <= value < CURVE.P: ${b}`);return b}(b);for(let b=0;b<252;b++){let e=c[b];if(!e)throw Error("invalid constant index");if(e.equals(a))throw Error("Same point");(1n&d)!==0n&&(a=a.add(e)),d>>=1n}return a}function d$(a,b){let c=dV[0];return c=dZ(c,a,dX),dN((c=dZ(c,b,dY)).toRawBytes(!0))}let d_=(a,b=d$)=>[0,...a,a.length].reduce((a,c)=>b(a,c)),d0=b_(250),d1=a=>bM(cL(a))&d0,d2=a=>bM(cu(a)),d3=c$(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));function d4(a,b,c){let d=a.fromBytes(cu(ci(`${b}${c}`)));return a.create(d)}function d5(a,b,c,d=0){let e=[],f=[];for(let g=0;g<c;g++)e.push(d4(a,`${b}x`,d*c+g)),f.push(d4(a,`${b}y`,d*c+g));if(new Set([...e,...f]).size!==2*c)throw Error("X and Y values are not distinct");return e.map(b=>f.map(c=>a.inv(a.sub(b,c))))}function d6(a,b){if(cX(a.Fp),!Number.isSafeInteger(a.rate)||!Number.isSafeInteger(a.capacity))throw Error(`Wrong poseidon opts: ${a}`);let c=a.rate+a.capacity,d=a.roundsFull+a.roundsPartial,e=[];for(let b=0;b<d;b++){let d=[];for(let e=0;e<c;e++)d.push(d4(a.Fp,"Hades",c*b+e));e.push(d)}let f=c3({...a,t:c,sboxPower:3,reversePartialPowIdx:!0,mds:b,roundConstants:e});return f.m=c,f.rate=a.rate,f.capacity=a.capacity,f}function d7(a,b=0){let c=a.rate+a.capacity;if(!Number.isSafeInteger(b))throw Error(`Wrong mdsAttempt=${b}`);return d6(a,d5(a.Fp,"HadesMDS",c,b))}let d8=d6({Fp:d3,rate:2,capacity:1,roundsFull:8,roundsPartial:83},[[3,1,1],[1,-1,1],[1,1,-2]].map(a=>a.map(BigInt)));function d9(a,b,c=d8){return c([a,b,2n])[0]}function ea(a,b,c=d8){return bQ(d9(bM(a),bM(b),c))}function eb(a,b=d8){return b([a,0n,1n])[0]}function ec(a,b=d8){let{m:c,rate:d}=b;if(!Array.isArray(a))throw Error("bigint array expected in values");let e=Array.from(a);for(e.push(1n);e.length%d!=0;)e.push(0n);let f=Array(c).fill(0n);for(let a=0;a<e.length;a+=d){for(let b=0;b<d;b++){let c=e[a+b];if(void 0===c)throw Error("invalid index");if(void 0===f[b])throw Error("state[j] is undefined");f[b]=f[b]+c}f=b(f)}return f[0]}var ed=a.i(525706),ee=a.i(338909),ef=a.i(323936);function eg(a){let b=a.length;for(;--b>=0;)a[b]=0}let eh=573,ei=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),ej=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ek=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),el=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),em=Array(576);eg(em);let en=Array(60);eg(en);let eo=Array(512);eg(eo);let ep=Array(256);eg(ep);let eq=Array(29);eg(eq);let er=Array(30);function es(a,b,c,d,e){this.static_tree=a,this.extra_bits=b,this.extra_base=c,this.elems=d,this.max_length=e,this.has_stree=a&&a.length}function et(a,b){this.dyn_tree=a,this.max_code=0,this.stat_desc=b}eg(er);let eu=a=>a<256?eo[a]:eo[256+(a>>>7)],ev=(a,b)=>{a.pending_buf[a.pending++]=255&b,a.pending_buf[a.pending++]=b>>>8&255},ew=(a,b,c)=>{a.bi_valid>16-c?(a.bi_buf|=b<<a.bi_valid&65535,ev(a,a.bi_buf),a.bi_buf=b>>16-a.bi_valid,a.bi_valid+=c-16):(a.bi_buf|=b<<a.bi_valid&65535,a.bi_valid+=c)},ex=(a,b,c)=>{ew(a,c[2*b],c[2*b+1])},ey=(a,b)=>{let c=0;do c|=1&a,a>>>=1,c<<=1;while(--b>0)return c>>>1},ez=(a,b,c)=>{let d,e,f=Array(16),g=0;for(d=1;d<=15;d++)g=g+c[d-1]<<1,f[d]=g;for(e=0;e<=b;e++){let b=a[2*e+1];0!==b&&(a[2*e]=ey(f[b]++,b))}},eA=a=>{let b;for(b=0;b<286;b++)a.dyn_ltree[2*b]=0;for(b=0;b<30;b++)a.dyn_dtree[2*b]=0;for(b=0;b<19;b++)a.bl_tree[2*b]=0;a.dyn_ltree[512]=1,a.opt_len=a.static_len=0,a.sym_next=a.matches=0},eB=a=>{a.bi_valid>8?ev(a,a.bi_buf):a.bi_valid>0&&(a.pending_buf[a.pending++]=a.bi_buf),a.bi_buf=0,a.bi_valid=0},eC=(a,b,c,d)=>{let e=2*b,f=2*c;return a[e]<a[f]||a[e]===a[f]&&d[b]<=d[c]},eD=(a,b,c)=>{let d=a.heap[c],e=c<<1;for(;e<=a.heap_len&&(e<a.heap_len&&eC(b,a.heap[e+1],a.heap[e],a.depth)&&e++,!eC(b,d,a.heap[e],a.depth));)a.heap[c]=a.heap[e],c=e,e<<=1;a.heap[c]=d},eE=(a,b,c)=>{let d,e,f,g,h=0;if(0!==a.sym_next)do d=(255&a.pending_buf[a.sym_buf+h++])+((255&a.pending_buf[a.sym_buf+h++])<<8),e=a.pending_buf[a.sym_buf+h++],0===d?ex(a,e,b):(ex(a,(f=ep[e])+256+1,b),0!==(g=ei[f])&&ew(a,e-=eq[f],g),ex(a,f=eu(--d),c),0!==(g=ej[f])&&ew(a,d-=er[f],g));while(h<a.sym_next)ex(a,256,b)},eF=(a,b)=>{let c,d,e,f=b.dyn_tree,g=b.stat_desc.static_tree,h=b.stat_desc.has_stree,i=b.stat_desc.elems,j=-1;for(c=0,a.heap_len=0,a.heap_max=eh;c<i;c++)0!==f[2*c]?(a.heap[++a.heap_len]=j=c,a.depth[c]=0):f[2*c+1]=0;for(;a.heap_len<2;)f[2*(e=a.heap[++a.heap_len]=j<2?++j:0)]=1,a.depth[e]=0,a.opt_len--,h&&(a.static_len-=g[2*e+1]);for(b.max_code=j,c=a.heap_len>>1;c>=1;c--)eD(a,f,c);e=i;do c=a.heap[1],a.heap[1]=a.heap[a.heap_len--],eD(a,f,1),d=a.heap[1],a.heap[--a.heap_max]=c,a.heap[--a.heap_max]=d,f[2*e]=f[2*c]+f[2*d],a.depth[e]=(a.depth[c]>=a.depth[d]?a.depth[c]:a.depth[d])+1,f[2*c+1]=f[2*d+1]=e,a.heap[1]=e++,eD(a,f,1);while(a.heap_len>=2)a.heap[--a.heap_max]=a.heap[1],((a,b)=>{let c,d,e,f,g,h,i=b.dyn_tree,j=b.max_code,k=b.stat_desc.static_tree,l=b.stat_desc.has_stree,m=b.stat_desc.extra_bits,n=b.stat_desc.extra_base,o=b.stat_desc.max_length,p=0;for(f=0;f<=15;f++)a.bl_count[f]=0;for(i[2*a.heap[a.heap_max]+1]=0,c=a.heap_max+1;c<eh;c++)(f=i[2*i[2*(d=a.heap[c])+1]+1]+1)>o&&(f=o,p++),i[2*d+1]=f,!(d>j)&&(a.bl_count[f]++,g=0,d>=n&&(g=m[d-n]),h=i[2*d],a.opt_len+=h*(f+g),l&&(a.static_len+=h*(k[2*d+1]+g)));if(0!==p){do{for(f=o-1;0===a.bl_count[f];)f--;a.bl_count[f]--,a.bl_count[f+1]+=2,a.bl_count[o]--,p-=2}while(p>0)for(f=o;0!==f;f--)for(d=a.bl_count[f];0!==d;)!((e=a.heap[--c])>j)&&(i[2*e+1]!==f&&(a.opt_len+=(f-i[2*e+1])*i[2*e],i[2*e+1]=f),d--)}})(a,b),ez(f,j,a.bl_count)},eG=(a,b,c)=>{let d,e,f=-1,g=b[1],h=0,i=7,j=4;for(0===g&&(i=138,j=3),b[(c+1)*2+1]=65535,d=0;d<=c;d++)e=g,g=b[(d+1)*2+1],++h<i&&e===g||(h<j?a.bl_tree[2*e]+=h:0!==e?(e!==f&&a.bl_tree[2*e]++,a.bl_tree[32]++):h<=10?a.bl_tree[34]++:a.bl_tree[36]++,h=0,f=e,0===g?(i=138,j=3):e===g?(i=6,j=3):(i=7,j=4))},eH=(a,b,c)=>{let d,e,f=-1,g=b[1],h=0,i=7,j=4;for(0===g&&(i=138,j=3),d=0;d<=c;d++)if(e=g,g=b[(d+1)*2+1],!(++h<i)||e!==g){if(h<j)do ex(a,e,a.bl_tree);while(0!=--h)else 0!==e?(e!==f&&(ex(a,e,a.bl_tree),h--),ex(a,16,a.bl_tree),ew(a,h-3,2)):h<=10?(ex(a,17,a.bl_tree),ew(a,h-3,3)):(ex(a,18,a.bl_tree),ew(a,h-11,7));h=0,f=e,0===g?(i=138,j=3):e===g?(i=6,j=3):(i=7,j=4)}},eI=!1,eJ=(a,b,c,d)=>{ew(a,0+ +!!d,3),eB(a),ev(a,c),ev(a,~c),c&&a.pending_buf.set(a.window.subarray(b,b+c),a.pending),a.pending+=c};var eK={_tr_init:a=>{eI||((()=>{let a,e,f,g,h,i=Array(16);for(g=0,f=0;g<28;g++)for(a=0,eq[g]=f;a<1<<ei[g];a++)ep[f++]=g;for(ep[f-1]=g,h=0,g=0;g<16;g++)for(a=0,er[g]=h;a<1<<ej[g];a++)eo[h++]=g;for(h>>=7;g<30;g++)for(a=0,er[g]=h<<7;a<1<<ej[g]-7;a++)eo[256+h++]=g;for(e=0;e<=15;e++)i[e]=0;for(a=0;a<=143;)em[2*a+1]=8,a++,i[8]++;for(;a<=255;)em[2*a+1]=9,a++,i[9]++;for(;a<=279;)em[2*a+1]=7,a++,i[7]++;for(;a<=287;)em[2*a+1]=8,a++,i[8]++;for(ez(em,287,i),a=0;a<30;a++)en[2*a+1]=5,en[2*a]=ey(a,5);b=new es(em,ei,257,286,15),c=new es(en,ej,0,30,15),d=new es([],ek,0,19,7)})(),eI=!0),a.l_desc=new et(a.dyn_ltree,b),a.d_desc=new et(a.dyn_dtree,c),a.bl_desc=new et(a.bl_tree,d),a.bi_buf=0,a.bi_valid=0,eA(a)},_tr_stored_block:eJ,_tr_flush_block:(a,b,c,d)=>{let e,f,g=0;a.level>0?(2===a.strm.data_type&&(a.strm.data_type=(a=>{let b,c=0xf3ffc07f;for(b=0;b<=31;b++,c>>>=1)if(1&c&&0!==a.dyn_ltree[2*b])return 0;if(0!==a.dyn_ltree[18]||0!==a.dyn_ltree[20]||0!==a.dyn_ltree[26])return 1;for(b=32;b<256;b++)if(0!==a.dyn_ltree[2*b])return 1;return 0})(a)),eF(a,a.l_desc),eF(a,a.d_desc),g=(a=>{let b;for(eG(a,a.dyn_ltree,a.l_desc.max_code),eG(a,a.dyn_dtree,a.d_desc.max_code),eF(a,a.bl_desc),b=18;b>=3&&0===a.bl_tree[2*el[b]+1];b--);return a.opt_len+=3*(b+1)+5+5+4,b})(a),e=a.opt_len+3+7>>>3,(f=a.static_len+3+7>>>3)<=e&&(e=f)):e=f=c+5,c+4<=e&&-1!==b?eJ(a,b,c,d):4===a.strategy||f===e?(ew(a,2+ +!!d,3),eE(a,em,en)):(ew(a,4+ +!!d,3),((a,b,c,d)=>{let e;for(ew(a,b-257,5),ew(a,c-1,5),ew(a,d-4,4),e=0;e<d;e++)ew(a,a.bl_tree[2*el[e]+1],3);eH(a,a.dyn_ltree,b-1),eH(a,a.dyn_dtree,c-1)})(a,a.l_desc.max_code+1,a.d_desc.max_code+1,g+1),eE(a,a.dyn_ltree,a.dyn_dtree)),eA(a),d&&eB(a)},_tr_tally:(a,b,c)=>(a.pending_buf[a.sym_buf+a.sym_next++]=b,a.pending_buf[a.sym_buf+a.sym_next++]=b>>8,a.pending_buf[a.sym_buf+a.sym_next++]=c,0===b?a.dyn_ltree[2*c]++:(a.matches++,b--,a.dyn_ltree[(ep[c]+256+1)*2]++,a.dyn_dtree[2*eu(b)]++),a.sym_next===a.sym_end),_tr_align:a=>{ew(a,2,3),ex(a,256,em),(a=>{16===a.bi_valid?(ev(a,a.bi_buf),a.bi_buf=0,a.bi_valid=0):a.bi_valid>=8&&(a.pending_buf[a.pending++]=255&a.bi_buf,a.bi_buf>>=8,a.bi_valid-=8)})(a)}},eL=(a,b,c,d)=>{let e=65535&a,f=a>>>16&65535,g=0;for(;0!==c;){g=c>2e3?2e3:c,c-=g;do f=f+(e=e+b[d++]|0)|0;while(--g)e%=65521,f%=65521}return e|f<<16};let eM=new Uint32Array((()=>{let a,b=[];for(var c=0;c<256;c++){a=c;for(var d=0;d<8;d++)a=1&a?0xedb88320^a>>>1:a>>>1;b[c]=a}return b})());var eN=(a,b,c,d)=>{let e=d+c;a^=-1;for(let c=d;c<e;c++)a=a>>>8^eM[(a^b[c])&255];return -1^a},eO={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},eP={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:eQ,_tr_stored_block:eR,_tr_flush_block:eS,_tr_tally:eT,_tr_align:eU}=eK,{Z_NO_FLUSH:eV,Z_PARTIAL_FLUSH:eW,Z_FULL_FLUSH:eX,Z_FINISH:eY,Z_BLOCK:eZ,Z_OK:e$,Z_STREAM_END:e_,Z_STREAM_ERROR:e0,Z_DATA_ERROR:e1,Z_BUF_ERROR:e2,Z_DEFAULT_COMPRESSION:e3,Z_FILTERED:e4,Z_HUFFMAN_ONLY:e5,Z_RLE:e6,Z_FIXED:e7,Z_DEFAULT_STRATEGY:e8,Z_UNKNOWN:e9,Z_DEFLATED:fa}=eP,fb=573,fc=(a,b)=>(a.msg=eO[b],b),fd=a=>2*a-9*(a>4),fe=a=>{let b=a.length;for(;--b>=0;)a[b]=0},ff=a=>{let b,c,d,e=a.w_size;d=b=a.hash_size;do c=a.head[--d],a.head[d]=c>=e?c-e:0;while(--b)d=b=e;do c=a.prev[--d],a.prev[d]=c>=e?c-e:0;while(--b)},fg=(a,b,c)=>(b<<a.hash_shift^c)&a.hash_mask,fh=a=>{let b=a.state,c=b.pending;c>a.avail_out&&(c=a.avail_out),0!==c&&(a.output.set(b.pending_buf.subarray(b.pending_out,b.pending_out+c),a.next_out),a.next_out+=c,b.pending_out+=c,a.total_out+=c,a.avail_out-=c,b.pending-=c,0===b.pending&&(b.pending_out=0))},fi=(a,b)=>{eS(a,a.block_start>=0?a.block_start:-1,a.strstart-a.block_start,b),a.block_start=a.strstart,fh(a.strm)},fj=(a,b)=>{a.pending_buf[a.pending++]=b},fk=(a,b)=>{a.pending_buf[a.pending++]=b>>>8&255,a.pending_buf[a.pending++]=255&b},fl=(a,b,c,d)=>{let e=a.avail_in;return(e>d&&(e=d),0===e)?0:(a.avail_in-=e,b.set(a.input.subarray(a.next_in,a.next_in+e),c),1===a.state.wrap?a.adler=eL(a.adler,b,e,c):2===a.state.wrap&&(a.adler=eN(a.adler,b,e,c)),a.next_in+=e,a.total_in+=e,e)},fm=(a,b)=>{let c,d,e=a.max_chain_length,f=a.strstart,g=a.prev_length,h=a.nice_match,i=a.strstart>a.w_size-262?a.strstart-(a.w_size-262):0,j=a.window,k=a.w_mask,l=a.prev,m=a.strstart+258,n=j[f+g-1],o=j[f+g];a.prev_length>=a.good_match&&(e>>=2),h>a.lookahead&&(h=a.lookahead);do{if(j[(c=b)+g]!==o||j[c+g-1]!==n||j[c]!==j[f]||j[++c]!==j[f+1])continue;f+=2,c++;do;while(j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&j[++f]===j[++c]&&f<m)if(d=258-(m-f),f=m-258,d>g){if(a.match_start=b,g=d,d>=h)break;n=j[f+g-1],o=j[f+g]}}while((b=l[b&k])>i&&0!=--e)return g<=a.lookahead?g:a.lookahead},fn=a=>{let b,c,d,e=a.w_size;do{if(c=a.window_size-a.lookahead-a.strstart,a.strstart>=e+(e-262)&&(a.window.set(a.window.subarray(e,e+e-c),0),a.match_start-=e,a.strstart-=e,a.block_start-=e,a.insert>a.strstart&&(a.insert=a.strstart),ff(a),c+=e),0===a.strm.avail_in)break;if(b=fl(a.strm,a.window,a.strstart+a.lookahead,c),a.lookahead+=b,a.lookahead+a.insert>=3)for(d=a.strstart-a.insert,a.ins_h=a.window[d],a.ins_h=fg(a,a.ins_h,a.window[d+1]);a.insert&&(a.ins_h=fg(a,a.ins_h,a.window[d+3-1]),a.prev[d&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=d,d++,a.insert--,!(a.lookahead+a.insert<3)););}while(a.lookahead<262&&0!==a.strm.avail_in)},fo=(a,b)=>{let c=a.pending_buf_size-5>a.w_size?a.w_size:a.pending_buf_size-5,d,e,f,g=0,h=a.strm.avail_in;do{if(d=65535,f=a.bi_valid+42>>3,a.strm.avail_out<f||(f=a.strm.avail_out-f,d>(e=a.strstart-a.block_start)+a.strm.avail_in&&(d=e+a.strm.avail_in),d>f&&(d=f),d<c&&(0===d&&b!==eY||b===eV||d!==e+a.strm.avail_in)))break;g=+(b===eY&&d===e+a.strm.avail_in),eR(a,0,0,g),a.pending_buf[a.pending-4]=d,a.pending_buf[a.pending-3]=d>>8,a.pending_buf[a.pending-2]=~d,a.pending_buf[a.pending-1]=~d>>8,fh(a.strm),e&&(e>d&&(e=d),a.strm.output.set(a.window.subarray(a.block_start,a.block_start+e),a.strm.next_out),a.strm.next_out+=e,a.strm.avail_out-=e,a.strm.total_out+=e,a.block_start+=e,d-=e),d&&(fl(a.strm,a.strm.output,a.strm.next_out,d),a.strm.next_out+=d,a.strm.avail_out-=d,a.strm.total_out+=d)}while(0===g)return((h-=a.strm.avail_in)&&(h>=a.w_size?(a.matches=2,a.window.set(a.strm.input.subarray(a.strm.next_in-a.w_size,a.strm.next_in),0),a.strstart=a.w_size,a.insert=a.strstart):(a.window_size-a.strstart<=h&&(a.strstart-=a.w_size,a.window.set(a.window.subarray(a.w_size,a.w_size+a.strstart),0),a.matches<2&&a.matches++,a.insert>a.strstart&&(a.insert=a.strstart)),a.window.set(a.strm.input.subarray(a.strm.next_in-h,a.strm.next_in),a.strstart),a.strstart+=h,a.insert+=h>a.w_size-a.insert?a.w_size-a.insert:h),a.block_start=a.strstart),a.high_water<a.strstart&&(a.high_water=a.strstart),g)?4:b!==eV&&b!==eY&&0===a.strm.avail_in&&a.strstart===a.block_start?2:(f=a.window_size-a.strstart,a.strm.avail_in>f&&a.block_start>=a.w_size&&(a.block_start-=a.w_size,a.strstart-=a.w_size,a.window.set(a.window.subarray(a.w_size,a.w_size+a.strstart),0),a.matches<2&&a.matches++,f+=a.w_size,a.insert>a.strstart&&(a.insert=a.strstart)),f>a.strm.avail_in&&(f=a.strm.avail_in),f&&(fl(a.strm,a.window,a.strstart,f),a.strstart+=f,a.insert+=f>a.w_size-a.insert?a.w_size-a.insert:f),a.high_water<a.strstart&&(a.high_water=a.strstart),f=a.bi_valid+42>>3,c=(f=a.pending_buf_size-f>65535?65535:a.pending_buf_size-f)>a.w_size?a.w_size:f,((e=a.strstart-a.block_start)>=c||(e||b===eY)&&b!==eV&&0===a.strm.avail_in&&e<=f)&&(d=e>f?f:e,g=+(b===eY&&0===a.strm.avail_in&&d===e),eR(a,a.block_start,d,g),a.block_start+=d,fh(a.strm)),g?3:1)},fp=(a,b)=>{let c,d;for(;;){if(a.lookahead<262){if(fn(a),a.lookahead<262&&b===eV)return 1;if(0===a.lookahead)break}if(c=0,a.lookahead>=3&&(a.ins_h=fg(a,a.ins_h,a.window[a.strstart+3-1]),c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),0!==c&&a.strstart-c<=a.w_size-262&&(a.match_length=fm(a,c)),a.match_length>=3)if(d=eT(a,a.strstart-a.match_start,a.match_length-3),a.lookahead-=a.match_length,a.match_length<=a.max_lazy_match&&a.lookahead>=3){a.match_length--;do a.strstart++,a.ins_h=fg(a,a.ins_h,a.window[a.strstart+3-1]),c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart;while(0!=--a.match_length)a.strstart++}else a.strstart+=a.match_length,a.match_length=0,a.ins_h=a.window[a.strstart],a.ins_h=fg(a,a.ins_h,a.window[a.strstart+1]);else d=eT(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++;if(d&&(fi(a,!1),0===a.strm.avail_out))return 1}return(a.insert=a.strstart<2?a.strstart:2,b===eY)?(fi(a,!0),0===a.strm.avail_out)?3:4:a.sym_next&&(fi(a,!1),0===a.strm.avail_out)?1:2},fq=(a,b)=>{let c,d,e;for(;;){if(a.lookahead<262){if(fn(a),a.lookahead<262&&b===eV)return 1;if(0===a.lookahead)break}if(c=0,a.lookahead>=3&&(a.ins_h=fg(a,a.ins_h,a.window[a.strstart+3-1]),c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart),a.prev_length=a.match_length,a.prev_match=a.match_start,a.match_length=2,0!==c&&a.prev_length<a.max_lazy_match&&a.strstart-c<=a.w_size-262&&(a.match_length=fm(a,c),a.match_length<=5&&(a.strategy===e4||3===a.match_length&&a.strstart-a.match_start>4096)&&(a.match_length=2)),a.prev_length>=3&&a.match_length<=a.prev_length){e=a.strstart+a.lookahead-3,d=eT(a,a.strstart-1-a.prev_match,a.prev_length-3),a.lookahead-=a.prev_length-1,a.prev_length-=2;do++a.strstart<=e&&(a.ins_h=fg(a,a.ins_h,a.window[a.strstart+3-1]),c=a.prev[a.strstart&a.w_mask]=a.head[a.ins_h],a.head[a.ins_h]=a.strstart);while(0!=--a.prev_length)if(a.match_available=0,a.match_length=2,a.strstart++,d&&(fi(a,!1),0===a.strm.avail_out))return 1}else if(a.match_available){if((d=eT(a,0,a.window[a.strstart-1]))&&fi(a,!1),a.strstart++,a.lookahead--,0===a.strm.avail_out)return 1}else a.match_available=1,a.strstart++,a.lookahead--}return(a.match_available&&(d=eT(a,0,a.window[a.strstart-1]),a.match_available=0),a.insert=a.strstart<2?a.strstart:2,b===eY)?(fi(a,!0),0===a.strm.avail_out)?3:4:a.sym_next&&(fi(a,!1),0===a.strm.avail_out)?1:2};function fr(a,b,c,d,e){this.good_length=a,this.max_lazy=b,this.nice_length=c,this.max_chain=d,this.func=e}let fs=[new fr(0,0,0,0,fo),new fr(4,4,8,4,fp),new fr(4,5,16,8,fp),new fr(4,6,32,32,fp),new fr(4,4,16,16,fq),new fr(8,16,32,32,fq),new fr(8,16,128,128,fq),new fr(8,32,128,256,fq),new fr(32,128,258,1024,fq),new fr(32,258,258,4096,fq)];function ft(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=fa,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*fb),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),fe(this.dyn_ltree),fe(this.dyn_dtree),fe(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),fe(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),fe(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let fu=a=>{if(!a)return 1;let b=a.state;return b&&b.strm===a&&(42===b.status||57===b.status||69===b.status||73===b.status||91===b.status||103===b.status||113===b.status||666===b.status)?0:1};var fv={deflateInit2:(a,b,c,d,e,f)=>{if(!a)return e0;let g=1;if(b===e3&&(b=6),d<0?(g=0,d=-d):d>15&&(g=2,d-=16),e<1||e>9||c!==fa||d<8||d>15||b<0||b>9||f<0||f>e7||8===d&&1!==g)return fc(a,e0);8===d&&(d=9);let h=new ft;return a.state=h,h.strm=a,h.status=42,h.wrap=g,h.gzhead=null,h.w_bits=d,h.w_size=1<<h.w_bits,h.w_mask=h.w_size-1,h.hash_bits=e+7,h.hash_size=1<<h.hash_bits,h.hash_mask=h.hash_size-1,h.hash_shift=~~((h.hash_bits+3-1)/3),h.window=new Uint8Array(2*h.w_size),h.head=new Uint16Array(h.hash_size),h.prev=new Uint16Array(h.w_size),h.lit_bufsize=1<<e+6,h.pending_buf_size=4*h.lit_bufsize,h.pending_buf=new Uint8Array(h.pending_buf_size),h.sym_buf=h.lit_bufsize,h.sym_end=(h.lit_bufsize-1)*3,h.level=b,h.strategy=f,h.method=c,(a=>{let b=(a=>{if(fu(a))return fc(a,e0);a.total_in=a.total_out=0,a.data_type=e9;let b=a.state;return b.pending=0,b.pending_out=0,b.wrap<0&&(b.wrap=-b.wrap),b.status=2===b.wrap?57:b.wrap?42:113,a.adler=+(2!==b.wrap),b.last_flush=-2,eQ(b),e$})(a);return b===e$&&(a=>{a.window_size=2*a.w_size,fe(a.head),a.max_lazy_match=fs[a.level].max_lazy,a.good_match=fs[a.level].good_length,a.nice_match=fs[a.level].nice_length,a.max_chain_length=fs[a.level].max_chain,a.strstart=0,a.block_start=0,a.lookahead=0,a.insert=0,a.match_length=a.prev_length=2,a.match_available=0,a.ins_h=0})(a.state),b})(a)},deflateSetHeader:(a,b)=>fu(a)||2!==a.state.wrap?e0:(a.state.gzhead=b,e$),deflate:(a,b)=>{if(fu(a)||b>eZ||b<0)return a?fc(a,e0):e0;let c=a.state;if(!a.output||0!==a.avail_in&&!a.input||666===c.status&&b!==eY)return fc(a,0===a.avail_out?e2:e0);let d=c.last_flush;if(c.last_flush=b,0!==c.pending){if(fh(a),0===a.avail_out)return c.last_flush=-1,e$}else if(0===a.avail_in&&fd(b)<=fd(d)&&b!==eY)return fc(a,e2);if(666===c.status&&0!==a.avail_in)return fc(a,e2);if(42===c.status&&0===c.wrap&&(c.status=113),42===c.status){let b=fa+(c.w_bits-8<<4)<<8;if(b|=(c.strategy>=e5||c.level<2?0:c.level<6?1:6===c.level?2:3)<<6,0!==c.strstart&&(b|=32),fk(c,b+=31-b%31),0!==c.strstart&&(fk(c,a.adler>>>16),fk(c,65535&a.adler)),a.adler=1,c.status=113,fh(a),0!==c.pending)return c.last_flush=-1,e$}if(57===c.status){if(a.adler=0,fj(c,31),fj(c,139),fj(c,8),c.gzhead)fj(c,+!!c.gzhead.text+2*!!c.gzhead.hcrc+4*!!c.gzhead.extra+8*!!c.gzhead.name+16*!!c.gzhead.comment),fj(c,255&c.gzhead.time),fj(c,c.gzhead.time>>8&255),fj(c,c.gzhead.time>>16&255),fj(c,c.gzhead.time>>24&255),fj(c,9===c.level?2:4*(c.strategy>=e5||c.level<2)),fj(c,255&c.gzhead.os),c.gzhead.extra&&c.gzhead.extra.length&&(fj(c,255&c.gzhead.extra.length),fj(c,c.gzhead.extra.length>>8&255)),c.gzhead.hcrc&&(a.adler=eN(a.adler,c.pending_buf,c.pending,0)),c.gzindex=0,c.status=69;else if(fj(c,0),fj(c,0),fj(c,0),fj(c,0),fj(c,0),fj(c,9===c.level?2:4*(c.strategy>=e5||c.level<2)),fj(c,3),c.status=113,fh(a),0!==c.pending)return c.last_flush=-1,e$}if(69===c.status){if(c.gzhead.extra){let b=c.pending,d=(65535&c.gzhead.extra.length)-c.gzindex;for(;c.pending+d>c.pending_buf_size;){let e=c.pending_buf_size-c.pending;if(c.pending_buf.set(c.gzhead.extra.subarray(c.gzindex,c.gzindex+e),c.pending),c.pending=c.pending_buf_size,c.gzhead.hcrc&&c.pending>b&&(a.adler=eN(a.adler,c.pending_buf,c.pending-b,b)),c.gzindex+=e,fh(a),0!==c.pending)return c.last_flush=-1,e$;b=0,d-=e}let e=new Uint8Array(c.gzhead.extra);c.pending_buf.set(e.subarray(c.gzindex,c.gzindex+d),c.pending),c.pending+=d,c.gzhead.hcrc&&c.pending>b&&(a.adler=eN(a.adler,c.pending_buf,c.pending-b,b)),c.gzindex=0}c.status=73}if(73===c.status){if(c.gzhead.name){let b,d=c.pending;do{if(c.pending===c.pending_buf_size){if(c.gzhead.hcrc&&c.pending>d&&(a.adler=eN(a.adler,c.pending_buf,c.pending-d,d)),fh(a),0!==c.pending)return c.last_flush=-1,e$;d=0}b=c.gzindex<c.gzhead.name.length?255&c.gzhead.name.charCodeAt(c.gzindex++):0,fj(c,b)}while(0!==b)c.gzhead.hcrc&&c.pending>d&&(a.adler=eN(a.adler,c.pending_buf,c.pending-d,d)),c.gzindex=0}c.status=91}if(91===c.status){if(c.gzhead.comment){let b,d=c.pending;do{if(c.pending===c.pending_buf_size){if(c.gzhead.hcrc&&c.pending>d&&(a.adler=eN(a.adler,c.pending_buf,c.pending-d,d)),fh(a),0!==c.pending)return c.last_flush=-1,e$;d=0}b=c.gzindex<c.gzhead.comment.length?255&c.gzhead.comment.charCodeAt(c.gzindex++):0,fj(c,b)}while(0!==b)c.gzhead.hcrc&&c.pending>d&&(a.adler=eN(a.adler,c.pending_buf,c.pending-d,d))}c.status=103}if(103===c.status){if(c.gzhead.hcrc){if(c.pending+2>c.pending_buf_size&&(fh(a),0!==c.pending))return c.last_flush=-1,e$;fj(c,255&a.adler),fj(c,a.adler>>8&255),a.adler=0}if(c.status=113,fh(a),0!==c.pending)return c.last_flush=-1,e$}if(0!==a.avail_in||0!==c.lookahead||b!==eV&&666!==c.status){let d=0===c.level?fo(c,b):c.strategy===e5?((a,b)=>{let c;for(;;){if(0===a.lookahead&&(fn(a),0===a.lookahead)){if(b===eV)return 1;break}if(a.match_length=0,c=eT(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++,c&&(fi(a,!1),0===a.strm.avail_out))return 1}return(a.insert=0,b===eY)?(fi(a,!0),0===a.strm.avail_out)?3:4:a.sym_next&&(fi(a,!1),0===a.strm.avail_out)?1:2})(c,b):c.strategy===e6?((a,b)=>{let c,d,e,f,g=a.window;for(;;){if(a.lookahead<=258){if(fn(a),a.lookahead<=258&&b===eV)return 1;if(0===a.lookahead)break}if(a.match_length=0,a.lookahead>=3&&a.strstart>0&&(d=g[e=a.strstart-1])===g[++e]&&d===g[++e]&&d===g[++e]){f=a.strstart+258;do;while(d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&d===g[++e]&&e<f)a.match_length=258-(f-e),a.match_length>a.lookahead&&(a.match_length=a.lookahead)}if(a.match_length>=3?(c=eT(a,1,a.match_length-3),a.lookahead-=a.match_length,a.strstart+=a.match_length,a.match_length=0):(c=eT(a,0,a.window[a.strstart]),a.lookahead--,a.strstart++),c&&(fi(a,!1),0===a.strm.avail_out))return 1}return(a.insert=0,b===eY)?(fi(a,!0),0===a.strm.avail_out)?3:4:a.sym_next&&(fi(a,!1),0===a.strm.avail_out)?1:2})(c,b):fs[c.level].func(c,b);if((3===d||4===d)&&(c.status=666),1===d||3===d)return 0===a.avail_out&&(c.last_flush=-1),e$;if(2===d&&(b===eW?eU(c):b!==eZ&&(eR(c,0,0,!1),b===eX&&(fe(c.head),0===c.lookahead&&(c.strstart=0,c.block_start=0,c.insert=0))),fh(a),0===a.avail_out))return c.last_flush=-1,e$}return b!==eY?e$:c.wrap<=0?e_:(2===c.wrap?(fj(c,255&a.adler),fj(c,a.adler>>8&255),fj(c,a.adler>>16&255),fj(c,a.adler>>24&255),fj(c,255&a.total_in),fj(c,a.total_in>>8&255),fj(c,a.total_in>>16&255),fj(c,a.total_in>>24&255)):(fk(c,a.adler>>>16),fk(c,65535&a.adler)),fh(a),c.wrap>0&&(c.wrap=-c.wrap),0!==c.pending?e$:e_)},deflateEnd:a=>{if(fu(a))return e0;let b=a.state.status;return a.state=null,113===b?fc(a,e1):e$},deflateSetDictionary:(a,b)=>{let c=b.length;if(fu(a))return e0;let d=a.state,e=d.wrap;if(2===e||1===e&&42!==d.status||d.lookahead)return e0;if(1===e&&(a.adler=eL(a.adler,b,c,0)),d.wrap=0,c>=d.w_size){0===e&&(fe(d.head),d.strstart=0,d.block_start=0,d.insert=0);let a=new Uint8Array(d.w_size);a.set(b.subarray(c-d.w_size,c),0),b=a,c=d.w_size}let f=a.avail_in,g=a.next_in,h=a.input;for(a.avail_in=c,a.next_in=0,a.input=b,fn(d);d.lookahead>=3;){let a=d.strstart,b=d.lookahead-2;do d.ins_h=fg(d,d.ins_h,d.window[a+3-1]),d.prev[a&d.w_mask]=d.head[d.ins_h],d.head[d.ins_h]=a,a++;while(--b)d.strstart=a,d.lookahead=2,fn(d)}return d.strstart+=d.lookahead,d.block_start=d.strstart,d.insert=d.lookahead,d.lookahead=0,d.match_length=d.prev_length=2,d.match_available=0,a.next_in=g,a.input=h,a.avail_in=f,d.wrap=e,e$}};let fw=(a,b)=>Object.prototype.hasOwnProperty.call(a,b);var fx={assign:function(a){let b=Array.prototype.slice.call(arguments,1);for(;b.length;){let c=b.shift();if(c){if("object"!=typeof c)throw TypeError(c+"must be non-object");for(let b in c)fw(c,b)&&(a[b]=c[b])}}return a},flattenChunks:a=>{let b=0;for(let c=0,d=a.length;c<d;c++)b+=a[c].length;let c=new Uint8Array(b);for(let b=0,d=0,e=a.length;b<e;b++){let e=a[b];c.set(e,d),d+=e.length}return c}};let fy=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(a){fy=!1}let fz=new Uint8Array(256);for(let a=0;a<256;a++)fz[a]=a>=252?6:a>=248?5:a>=240?4:a>=224?3:a>=192?2:1;fz[254]=fz[254]=1;var fA={string2buf:a=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return new TextEncoder().encode(a);let b,c,d,e,f,g=a.length,h=0;for(e=0;e<g;e++)(64512&(c=a.charCodeAt(e)))==55296&&e+1<g&&(64512&(d=a.charCodeAt(e+1)))==56320&&(c=65536+(c-55296<<10)+(d-56320),e++),h+=c<128?1:c<2048?2:c<65536?3:4;for(f=0,b=new Uint8Array(h),e=0;f<h;e++)(64512&(c=a.charCodeAt(e)))==55296&&e+1<g&&(64512&(d=a.charCodeAt(e+1)))==56320&&(c=65536+(c-55296<<10)+(d-56320),e++),c<128?b[f++]=c:(c<2048?b[f++]=192|c>>>6:(c<65536?b[f++]=224|c>>>12:(b[f++]=240|c>>>18,b[f++]=128|c>>>12&63),b[f++]=128|c>>>6&63),b[f++]=128|63&c);return b},buf2string:(a,b)=>{let c,d,e=b||a.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return new TextDecoder().decode(a.subarray(0,b));let f=Array(2*e);for(d=0,c=0;c<e;){let b=a[c++];if(b<128){f[d++]=b;continue}let g=fz[b];if(g>4){f[d++]=65533,c+=g-1;continue}for(b&=2===g?31:3===g?15:7;g>1&&c<e;)b=b<<6|63&a[c++],g--;if(g>1){f[d++]=65533;continue}b<65536?f[d++]=b:(b-=65536,f[d++]=55296|b>>10&1023,f[d++]=56320|1023&b)}return((a,b)=>{if(b<65534&&a.subarray&&fy)return String.fromCharCode.apply(null,a.length===b?a:a.subarray(0,b));let c="";for(let d=0;d<b;d++)c+=String.fromCharCode(a[d]);return c})(f,d)},utf8border:(a,b)=>{(b=b||a.length)>a.length&&(b=a.length);let c=b-1;for(;c>=0&&(192&a[c])==128;)c--;return c<0||0===c?b:c+fz[a[c]]>b?c:b}},fB=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};let fC=Object.prototype.toString,{Z_NO_FLUSH:fD,Z_SYNC_FLUSH:fE,Z_FULL_FLUSH:fF,Z_FINISH:fG,Z_OK:fH,Z_STREAM_END:fI,Z_DEFAULT_COMPRESSION:fJ,Z_DEFAULT_STRATEGY:fK,Z_DEFLATED:fL}=eP;function fM(a){this.options=fx.assign({level:fJ,method:fL,chunkSize:16384,windowBits:15,memLevel:8,strategy:fK},a||{});let b=this.options;b.raw&&b.windowBits>0?b.windowBits=-b.windowBits:b.gzip&&b.windowBits>0&&b.windowBits<16&&(b.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new fB,this.strm.avail_out=0;let c=fv.deflateInit2(this.strm,b.level,b.method,b.windowBits,b.memLevel,b.strategy);if(c!==fH)throw Error(eO[c]);if(b.header&&fv.deflateSetHeader(this.strm,b.header),b.dictionary){let a;if(a="string"==typeof b.dictionary?fA.string2buf(b.dictionary):"[object ArrayBuffer]"===fC.call(b.dictionary)?new Uint8Array(b.dictionary):b.dictionary,(c=fv.deflateSetDictionary(this.strm,a))!==fH)throw Error(eO[c]);this._dict_set=!0}}function fN(a,b){let c=new fM(b);if(c.push(a,!0),c.err)throw c.msg||eO[c.err];return c.result}fM.prototype.push=function(a,b){let c,d,e=this.strm,f=this.options.chunkSize;if(this.ended)return!1;for(d=b===~~b?b:!0===b?fG:fD,"string"==typeof a?e.input=fA.string2buf(a):"[object ArrayBuffer]"===fC.call(a)?e.input=new Uint8Array(a):e.input=a,e.next_in=0,e.avail_in=e.input.length;;){if(0===e.avail_out&&(e.output=new Uint8Array(f),e.next_out=0,e.avail_out=f),(d===fE||d===fF)&&e.avail_out<=6){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if((c=fv.deflate(e,d))===fI)return e.next_out>0&&this.onData(e.output.subarray(0,e.next_out)),c=fv.deflateEnd(this.strm),this.onEnd(c),this.ended=!0,c===fH;if(0===e.avail_out){this.onData(e.output);continue}if(d>0&&e.next_out>0){this.onData(e.output.subarray(0,e.next_out)),e.avail_out=0;continue}if(0===e.avail_in)break}return!0},fM.prototype.onData=function(a){this.chunks.push(a)},fM.prototype.onEnd=function(a){a===fH&&(this.result=fx.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};var fO=function(a,b){let c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=a.state;c=a.next_in,y=a.input,d=c+(a.avail_in-5),e=a.next_out,z=a.output,f=e-(b-a.avail_out),g=e+(a.avail_out-257),h=A.dmax,i=A.wsize,j=A.whave,k=A.wnext,l=A.window,m=A.hold,n=A.bits,o=A.lencode,p=A.distcode,q=(1<<A.lenbits)-1,r=(1<<A.distbits)-1;a:do for(n<15&&(m+=y[c++]<<n,n+=8,m+=y[c++]<<n,n+=8),s=o[m&q];;){if(m>>>=t=s>>>24,n-=t,0==(t=s>>>16&255))z[e++]=65535&s;else if(16&t)for(u=65535&s,(t&=15)&&(n<t&&(m+=y[c++]<<n,n+=8),u+=m&(1<<t)-1,m>>>=t,n-=t),n<15&&(m+=y[c++]<<n,n+=8,m+=y[c++]<<n,n+=8),s=p[m&r];;){if(m>>>=t=s>>>24,n-=t,16&(t=s>>>16&255)){if(v=65535&s,n<(t&=15)&&(m+=y[c++]<<n,(n+=8)<t&&(m+=y[c++]<<n,n+=8)),(v+=m&(1<<t)-1)>h){a.msg="invalid distance too far back",A.mode=16209;break a}if(m>>>=t,n-=t,v>(t=e-f)){if((t=v-t)>j&&A.sane){a.msg="invalid distance too far back",A.mode=16209;break a}if(w=0,x=l,0===k){if(w+=i-t,t<u){u-=t;do z[e++]=l[w++];while(--t)w=e-v,x=z}}else if(k<t){if(w+=i+k-t,(t-=k)<u){u-=t;do z[e++]=l[w++];while(--t)if(w=0,k<u){u-=t=k;do z[e++]=l[w++];while(--t)w=e-v,x=z}}}else if(w+=k-t,t<u){u-=t;do z[e++]=l[w++];while(--t)w=e-v,x=z}for(;u>2;)z[e++]=x[w++],z[e++]=x[w++],z[e++]=x[w++],u-=3;u&&(z[e++]=x[w++],u>1&&(z[e++]=x[w++]))}else{w=e-v;do z[e++]=z[w++],z[e++]=z[w++],z[e++]=z[w++],u-=3;while(u>2)u&&(z[e++]=z[w++],u>1&&(z[e++]=z[w++]))}}else if((64&t)==0){s=p[(65535&s)+(m&(1<<t)-1)];continue}else{a.msg="invalid distance code",A.mode=16209;break a}break}else if((64&t)==0){s=o[(65535&s)+(m&(1<<t)-1)];continue}else if(32&t){A.mode=16191;break a}else{a.msg="invalid literal/length code",A.mode=16209;break a}break}while(c<d&&e<g)c-=u=n>>3,n-=u<<3,m&=(1<<n)-1,a.next_in=c,a.next_out=e,a.avail_in=c<d?5+(d-c):5-(c-d),a.avail_out=e<g?257+(g-e):257-(e-g),A.hold=m,A.bits=n};let fP=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),fQ=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),fR=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),fS=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var fT=(a,b,c,d,e,f,g,h)=>{let i,j,k,l,m,n,o,p,q,r=h.bits,s=0,t=0,u=0,v=0,w=0,x=0,y=0,z=0,A=0,B=0,C=null,D=new Uint16Array(16),E=new Uint16Array(16),F=null;for(s=0;s<=15;s++)D[s]=0;for(t=0;t<d;t++)D[b[c+t]]++;for(v=15,w=r;v>=1&&0===D[v];v--);if(w>v&&(w=v),0===v)return e[f++]=0x1400000,e[f++]=0x1400000,h.bits=1,0;for(u=1;u<v&&0===D[u];u++);for(w<u&&(w=u),z=1,s=1;s<=15;s++)if(z<<=1,(z-=D[s])<0)return -1;if(z>0&&(0===a||1!==v))return -1;for(s=1,E[1]=0;s<15;s++)E[s+1]=E[s]+D[s];for(t=0;t<d;t++)0!==b[c+t]&&(g[E[b[c+t]]++]=t);if(0===a?(C=F=g,n=20):1===a?(C=fP,F=fQ,n=257):(C=fR,F=fS,n=0),B=0,t=0,s=u,m=f,x=w,y=0,k=-1,l=(A=1<<w)-1,1===a&&A>852||2===a&&A>592)return 1;for(;;){o=s-y,g[t]+1<n?(p=0,q=g[t]):g[t]>=n?(p=F[g[t]-n],q=C[g[t]-n]):(p=96,q=0),i=1<<s-y,u=j=1<<x;do e[m+(B>>y)+(j-=i)]=o<<24|p<<16|q;while(0!==j)for(i=1<<s-1;B&i;)i>>=1;if(0!==i?(B&=i-1,B+=i):B=0,t++,0==--D[s]){if(s===v)break;s=b[c+g[t]]}if(s>w&&(B&l)!==k){for(0===y&&(y=w),m+=u,z=1<<(x=s-y);x+y<v&&!((z-=D[x+y])<=0);)x++,z<<=1;if(A+=1<<x,1===a&&A>852||2===a&&A>592)return 1;e[k=B&l]=w<<24|x<<16|m-f}}return 0!==B&&(e[m+B]=s-y<<24|4194304),h.bits=w,0};let{Z_FINISH:fU,Z_BLOCK:fV,Z_TREES:fW,Z_OK:fX,Z_STREAM_END:fY,Z_NEED_DICT:fZ,Z_STREAM_ERROR:f$,Z_DATA_ERROR:f_,Z_MEM_ERROR:f0,Z_BUF_ERROR:f1,Z_DEFLATED:f2}=eP,f3=a=>(a>>>24&255)+(a>>>8&65280)+((65280&a)<<8)+((255&a)<<24);function f4(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}let f5=a=>{if(!a)return 1;let b=a.state;return+(!b||b.strm!==a||b.mode<16180||b.mode>16211)},f6=a=>{if(f5(a))return f$;let b=a.state;return b.wsize=0,b.whave=0,b.wnext=0,(a=>{if(f5(a))return f$;let b=a.state;return a.total_in=a.total_out=b.total=0,a.msg="",b.wrap&&(a.adler=1&b.wrap),b.mode=16180,b.last=0,b.havedict=0,b.flags=-1,b.dmax=32768,b.head=null,b.hold=0,b.bits=0,b.lencode=b.lendyn=new Int32Array(852),b.distcode=b.distdyn=new Int32Array(592),b.sane=1,b.back=-1,fX})(a)},f7=!0,f8=a=>{if(f7){e=new Int32Array(512),f=new Int32Array(32);let b=0;for(;b<144;)a.lens[b++]=8;for(;b<256;)a.lens[b++]=9;for(;b<280;)a.lens[b++]=7;for(;b<288;)a.lens[b++]=8;for(fT(1,a.lens,0,288,e,0,a.work,{bits:9}),b=0;b<32;)a.lens[b++]=5;fT(2,a.lens,0,32,f,0,a.work,{bits:5}),f7=!1}a.lencode=e,a.lenbits=9,a.distcode=f,a.distbits=5},f9=(a,b,c,d)=>{let e,f=a.state;return null===f.window&&(f.wsize=1<<f.wbits,f.wnext=0,f.whave=0,f.window=new Uint8Array(f.wsize)),d>=f.wsize?(f.window.set(b.subarray(c-f.wsize,c),0),f.wnext=0,f.whave=f.wsize):((e=f.wsize-f.wnext)>d&&(e=d),f.window.set(b.subarray(c-d,c-d+e),f.wnext),(d-=e)?(f.window.set(b.subarray(c-d,c),0),f.wnext=d,f.whave=f.wsize):(f.wnext+=e,f.wnext===f.wsize&&(f.wnext=0),f.whave<f.wsize&&(f.whave+=e))),0};var ga={inflateReset:f6,inflateInit2:(a,b)=>{if(!a)return f$;let c=new f4;a.state=c,c.strm=a,c.window=null,c.mode=16180;let d=((a,b)=>{let c;if(f5(a))return f$;let d=a.state;return(b<0?(c=0,b=-b):(c=(b>>4)+5,b<48&&(b&=15)),b&&(b<8||b>15))?f$:(null!==d.window&&d.wbits!==b&&(d.window=null),d.wrap=c,d.wbits=b,f6(a))})(a,b);return d!==fX&&(a.state=null),d},inflate:(a,b)=>{let c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u,v,w,x,y,z,A=0,B=new Uint8Array(4),C=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(f5(a)||!a.output||!a.input&&0!==a.avail_in)return f$;16191===(c=a.state).mode&&(c.mode=16192),g=a.next_out,e=a.output,i=a.avail_out,f=a.next_in,d=a.input,h=a.avail_in,j=c.hold,k=c.bits,l=h,m=i,x=fX;b:for(;;)switch(c.mode){case 16180:if(0===c.wrap){c.mode=16192;break}for(;k<16;){if(0===h)break b;h--,j+=d[f++]<<k,k+=8}if(2&c.wrap&&35615===j){0===c.wbits&&(c.wbits=15),c.check=0,B[0]=255&j,B[1]=j>>>8&255,c.check=eN(c.check,B,2,0),j=0,k=0,c.mode=16181;break}if(c.head&&(c.head.done=!1),!(1&c.wrap)||(((255&j)<<8)+(j>>8))%31){a.msg="incorrect header check",c.mode=16209;break}if((15&j)!==f2){a.msg="unknown compression method",c.mode=16209;break}if(j>>>=4,k-=4,w=(15&j)+8,0===c.wbits&&(c.wbits=w),w>15||w>c.wbits){a.msg="invalid window size",c.mode=16209;break}c.dmax=1<<c.wbits,c.flags=0,a.adler=c.check=1,c.mode=512&j?16189:16191,j=0,k=0;break;case 16181:for(;k<16;){if(0===h)break b;h--,j+=d[f++]<<k,k+=8}if(c.flags=j,(255&c.flags)!==f2){a.msg="unknown compression method",c.mode=16209;break}if(57344&c.flags){a.msg="unknown header flags set",c.mode=16209;break}c.head&&(c.head.text=j>>8&1),512&c.flags&&4&c.wrap&&(B[0]=255&j,B[1]=j>>>8&255,c.check=eN(c.check,B,2,0)),j=0,k=0,c.mode=16182;case 16182:for(;k<32;){if(0===h)break b;h--,j+=d[f++]<<k,k+=8}c.head&&(c.head.time=j),512&c.flags&&4&c.wrap&&(B[0]=255&j,B[1]=j>>>8&255,B[2]=j>>>16&255,B[3]=j>>>24&255,c.check=eN(c.check,B,4,0)),j=0,k=0,c.mode=16183;case 16183:for(;k<16;){if(0===h)break b;h--,j+=d[f++]<<k,k+=8}c.head&&(c.head.xflags=255&j,c.head.os=j>>8),512&c.flags&&4&c.wrap&&(B[0]=255&j,B[1]=j>>>8&255,c.check=eN(c.check,B,2,0)),j=0,k=0,c.mode=16184;case 16184:if(1024&c.flags){for(;k<16;){if(0===h)break b;h--,j+=d[f++]<<k,k+=8}c.length=j,c.head&&(c.head.extra_len=j),512&c.flags&&4&c.wrap&&(B[0]=255&j,B[1]=j>>>8&255,c.check=eN(c.check,B,2,0)),j=0,k=0}else c.head&&(c.head.extra=null);c.mode=16185;case 16185:if(1024&c.flags&&((n=c.length)>h&&(n=h),n&&(c.head&&(w=c.head.extra_len-c.length,c.head.extra||(c.head.extra=new Uint8Array(c.head.extra_len)),c.head.extra.set(d.subarray(f,f+n),w)),512&c.flags&&4&c.wrap&&(c.check=eN(c.check,d,n,f)),h-=n,f+=n,c.length-=n),c.length))break b;c.length=0,c.mode=16186;case 16186:if(2048&c.flags){if(0===h)break b;n=0;do w=d[f+n++],c.head&&w&&c.length<65536&&(c.head.name+=String.fromCharCode(w));while(w&&n<h)if(512&c.flags&&4&c.wrap&&(c.check=eN(c.check,d,n,f)),h-=n,f+=n,w)break b}else c.head&&(c.head.name=null);c.length=0,c.mode=16187;case 16187:if(4096&c.flags){if(0===h)break b;n=0;do w=d[f+n++],c.head&&w&&c.length<65536&&(c.head.comment+=String.fromCharCode(w));while(w&&n<h)if(512&c.flags&&4&c.wrap&&(c.check=eN(c.check,d,n,f)),h-=n,f+=n,w)break b}else c.head&&(c.head.comment=null);c.mode=16188;case 16188:if(512&c.flags){for(;k<16;){if(0===h)break b;h--,j+=d[f++]<<k,k+=8}if(4&c.wrap&&j!==(65535&c.check)){a.msg="header crc mismatch",c.mode=16209;break}j=0,k=0}c.head&&(c.head.hcrc=c.flags>>9&1,c.head.done=!0),a.adler=c.check=0,c.mode=16191;break;case 16189:for(;k<32;){if(0===h)break b;h--,j+=d[f++]<<k,k+=8}a.adler=c.check=f3(j),j=0,k=0,c.mode=16190;case 16190:if(0===c.havedict)return a.next_out=g,a.avail_out=i,a.next_in=f,a.avail_in=h,c.hold=j,c.bits=k,fZ;a.adler=c.check=1,c.mode=16191;case 16191:if(b===fV||b===fW)break b;case 16192:if(c.last){j>>>=7&k,k-=7&k,c.mode=16206;break}for(;k<3;){if(0===h)break b;h--,j+=d[f++]<<k,k+=8}switch(c.last=1&j,k-=1,3&(j>>>=1)){case 0:c.mode=16193;break;case 1:if(f8(c),c.mode=16199,b===fW){j>>>=2,k-=2;break b}break;case 2:c.mode=16196;break;case 3:a.msg="invalid block type",c.mode=16209}j>>>=2,k-=2;break;case 16193:for(j>>>=7&k,k-=7&k;k<32;){if(0===h)break b;h--,j+=d[f++]<<k,k+=8}if((65535&j)!=(j>>>16^65535)){a.msg="invalid stored block lengths",c.mode=16209;break}if(c.length=65535&j,j=0,k=0,c.mode=16194,b===fW)break b;case 16194:c.mode=16195;case 16195:if(n=c.length){if(n>h&&(n=h),n>i&&(n=i),0===n)break b;e.set(d.subarray(f,f+n),g),h-=n,f+=n,i-=n,g+=n,c.length-=n;break}c.mode=16191;break;case 16196:for(;k<14;){if(0===h)break b;h--,j+=d[f++]<<k,k+=8}if(c.nlen=(31&j)+257,k-=5,c.ndist=(31&(j>>>=5))+1,k-=5,c.ncode=(15&(j>>>=5))+4,j>>>=4,k-=4,c.nlen>286||c.ndist>30){a.msg="too many length or distance symbols",c.mode=16209;break}c.have=0,c.mode=16197;case 16197:for(;c.have<c.ncode;){for(;k<3;){if(0===h)break b;h--,j+=d[f++]<<k,k+=8}c.lens[C[c.have++]]=7&j,j>>>=3,k-=3}for(;c.have<19;)c.lens[C[c.have++]]=0;if(c.lencode=c.lendyn,c.lenbits=7,y={bits:c.lenbits},x=fT(0,c.lens,0,19,c.lencode,0,c.work,y),c.lenbits=y.bits,x){a.msg="invalid code lengths set",c.mode=16209;break}c.have=0,c.mode=16198;case 16198:for(;c.have<c.nlen+c.ndist;){for(;q=(A=c.lencode[j&(1<<c.lenbits)-1])>>>24,r=A>>>16&255,s=65535&A,!(q<=k);){if(0===h)break b;h--,j+=d[f++]<<k,k+=8}if(s<16)j>>>=q,k-=q,c.lens[c.have++]=s;else{if(16===s){for(z=q+2;k<z;){if(0===h)break b;h--,j+=d[f++]<<k,k+=8}if(j>>>=q,k-=q,0===c.have){a.msg="invalid bit length repeat",c.mode=16209;break}w=c.lens[c.have-1],n=3+(3&j),j>>>=2,k-=2}else if(17===s){for(z=q+3;k<z;){if(0===h)break b;h--,j+=d[f++]<<k,k+=8}j>>>=q,k-=q,w=0,n=3+(7&j),j>>>=3,k-=3}else{for(z=q+7;k<z;){if(0===h)break b;h--,j+=d[f++]<<k,k+=8}j>>>=q,k-=q,w=0,n=11+(127&j),j>>>=7,k-=7}if(c.have+n>c.nlen+c.ndist){a.msg="invalid bit length repeat",c.mode=16209;break}for(;n--;)c.lens[c.have++]=w}}if(16209===c.mode)break;if(0===c.lens[256]){a.msg="invalid code -- missing end-of-block",c.mode=16209;break}if(c.lenbits=9,y={bits:c.lenbits},x=fT(1,c.lens,0,c.nlen,c.lencode,0,c.work,y),c.lenbits=y.bits,x){a.msg="invalid literal/lengths set",c.mode=16209;break}if(c.distbits=6,c.distcode=c.distdyn,y={bits:c.distbits},x=fT(2,c.lens,c.nlen,c.ndist,c.distcode,0,c.work,y),c.distbits=y.bits,x){a.msg="invalid distances set",c.mode=16209;break}if(c.mode=16199,b===fW)break b;case 16199:c.mode=16200;case 16200:if(h>=6&&i>=258){a.next_out=g,a.avail_out=i,a.next_in=f,a.avail_in=h,c.hold=j,c.bits=k,fO(a,m),g=a.next_out,e=a.output,i=a.avail_out,f=a.next_in,d=a.input,h=a.avail_in,j=c.hold,k=c.bits,16191===c.mode&&(c.back=-1);break}for(c.back=0;q=(A=c.lencode[j&(1<<c.lenbits)-1])>>>24,r=A>>>16&255,s=65535&A,!(q<=k);){if(0===h)break b;h--,j+=d[f++]<<k,k+=8}if(r&&(240&r)==0){for(t=q,u=r,v=s;q=(A=c.lencode[v+((j&(1<<t+u)-1)>>t)])>>>24,r=A>>>16&255,s=65535&A,!(t+q<=k);){if(0===h)break b;h--,j+=d[f++]<<k,k+=8}j>>>=t,k-=t,c.back+=t}if(j>>>=q,k-=q,c.back+=q,c.length=s,0===r){c.mode=16205;break}if(32&r){c.back=-1,c.mode=16191;break}if(64&r){a.msg="invalid literal/length code",c.mode=16209;break}c.extra=15&r,c.mode=16201;case 16201:if(c.extra){for(z=c.extra;k<z;){if(0===h)break b;h--,j+=d[f++]<<k,k+=8}c.length+=j&(1<<c.extra)-1,j>>>=c.extra,k-=c.extra,c.back+=c.extra}c.was=c.length,c.mode=16202;case 16202:for(;q=(A=c.distcode[j&(1<<c.distbits)-1])>>>24,r=A>>>16&255,s=65535&A,!(q<=k);){if(0===h)break b;h--,j+=d[f++]<<k,k+=8}if((240&r)==0){for(t=q,u=r,v=s;q=(A=c.distcode[v+((j&(1<<t+u)-1)>>t)])>>>24,r=A>>>16&255,s=65535&A,!(t+q<=k);){if(0===h)break b;h--,j+=d[f++]<<k,k+=8}j>>>=t,k-=t,c.back+=t}if(j>>>=q,k-=q,c.back+=q,64&r){a.msg="invalid distance code",c.mode=16209;break}c.offset=s,c.extra=15&r,c.mode=16203;case 16203:if(c.extra){for(z=c.extra;k<z;){if(0===h)break b;h--,j+=d[f++]<<k,k+=8}c.offset+=j&(1<<c.extra)-1,j>>>=c.extra,k-=c.extra,c.back+=c.extra}if(c.offset>c.dmax){a.msg="invalid distance too far back",c.mode=16209;break}c.mode=16204;case 16204:if(0===i)break b;if(n=m-i,c.offset>n){if((n=c.offset-n)>c.whave&&c.sane){a.msg="invalid distance too far back",c.mode=16209;break}n>c.wnext?(n-=c.wnext,o=c.wsize-n):o=c.wnext-n,n>c.length&&(n=c.length),p=c.window}else p=e,o=g-c.offset,n=c.length;n>i&&(n=i),i-=n,c.length-=n;do e[g++]=p[o++];while(--n)0===c.length&&(c.mode=16200);break;case 16205:if(0===i)break b;e[g++]=c.length,i--,c.mode=16200;break;case 16206:if(c.wrap){for(;k<32;){if(0===h)break b;h--,j|=d[f++]<<k,k+=8}if(m-=i,a.total_out+=m,c.total+=m,4&c.wrap&&m&&(a.adler=c.check=c.flags?eN(c.check,e,m,g-m):eL(c.check,e,m,g-m)),m=i,4&c.wrap&&(c.flags?j:f3(j))!==c.check){a.msg="incorrect data check",c.mode=16209;break}j=0,k=0}c.mode=16207;case 16207:if(c.wrap&&c.flags){for(;k<32;){if(0===h)break b;h--,j+=d[f++]<<k,k+=8}if(4&c.wrap&&j!==(0|c.total)){a.msg="incorrect length check",c.mode=16209;break}j=0,k=0}c.mode=16208;case 16208:x=fY;break b;case 16209:x=f_;break b;case 16210:return f0;default:return f$}return a.next_out=g,a.avail_out=i,a.next_in=f,a.avail_in=h,c.hold=j,c.bits=k,(c.wsize||m!==a.avail_out&&c.mode<16209&&(c.mode<16206||b!==fU))&&f9(a,a.output,a.next_out,m-a.avail_out),l-=a.avail_in,m-=a.avail_out,a.total_in+=l,a.total_out+=m,c.total+=m,4&c.wrap&&m&&(a.adler=c.check=c.flags?eN(c.check,e,m,a.next_out-m):eL(c.check,e,m,a.next_out-m)),a.data_type=c.bits+64*!!c.last+128*(16191===c.mode)+256*(16199===c.mode||16194===c.mode),(0===l&&0===m||b===fU)&&x===fX&&(x=f1),x},inflateEnd:a=>{if(f5(a))return f$;let b=a.state;return b.window&&(b.window=null),a.state=null,fX},inflateGetHeader:(a,b)=>{if(f5(a))return f$;let c=a.state;return(2&c.wrap)==0?f$:(c.head=b,b.done=!1,fX)},inflateSetDictionary:(a,b)=>{let c,d=b.length;return f5(a)||0!==(c=a.state).wrap&&16190!==c.mode?f$:16190===c.mode&&eL(1,b,d,0)!==c.check?f_:f9(a,b,d,d)?(c.mode=16210,f0):(c.havedict=1,fX)}},gb=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};let gc=Object.prototype.toString,{Z_NO_FLUSH:gd,Z_FINISH:ge,Z_OK:gf,Z_STREAM_END:gg,Z_NEED_DICT:gh,Z_STREAM_ERROR:gi,Z_DATA_ERROR:gj,Z_MEM_ERROR:gk}=eP;function gl(a){this.options=fx.assign({chunkSize:65536,windowBits:15,to:""},a||{});let b=this.options;b.raw&&b.windowBits>=0&&b.windowBits<16&&(b.windowBits=-b.windowBits,0===b.windowBits&&(b.windowBits=-15)),b.windowBits>=0&&b.windowBits<16&&!(a&&a.windowBits)&&(b.windowBits+=32),b.windowBits>15&&b.windowBits<48&&(15&b.windowBits)==0&&(b.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new fB,this.strm.avail_out=0;let c=ga.inflateInit2(this.strm,b.windowBits);if(c!==gf||(this.header=new gb,ga.inflateGetHeader(this.strm,this.header),b.dictionary&&("string"==typeof b.dictionary?b.dictionary=fA.string2buf(b.dictionary):"[object ArrayBuffer]"===gc.call(b.dictionary)&&(b.dictionary=new Uint8Array(b.dictionary)),b.raw)&&(c=ga.inflateSetDictionary(this.strm,b.dictionary))!==gf))throw Error(eO[c])}function gm(a,b){let c=new gl(b);if(c.push(a),c.err)throw c.msg||eO[c.err];return c.result}gl.prototype.push=function(a,b){let c,d,e,f=this.strm,g=this.options.chunkSize,h=this.options.dictionary;if(this.ended)return!1;for(d=b===~~b?b:!0===b?ge:gd,"[object ArrayBuffer]"===gc.call(a)?f.input=new Uint8Array(a):f.input=a,f.next_in=0,f.avail_in=f.input.length;;){for(0===f.avail_out&&(f.output=new Uint8Array(g),f.next_out=0,f.avail_out=g),(c=ga.inflate(f,d))===gh&&h&&((c=ga.inflateSetDictionary(f,h))===gf?c=ga.inflate(f,d):c===gj&&(c=gh));f.avail_in>0&&c===gg&&f.state.wrap>0&&0!==a[f.next_in];)ga.inflateReset(f),c=ga.inflate(f,d);switch(c){case gi:case gj:case gh:case gk:return this.onEnd(c),this.ended=!0,!1}if(e=f.avail_out,f.next_out&&(0===f.avail_out||c===gg))if("string"===this.options.to){let a=fA.utf8border(f.output,f.next_out),b=f.next_out-a,c=fA.buf2string(f.output,a);f.next_out=b,f.avail_out=g-b,b&&f.output.set(f.output.subarray(a,a+b),0),this.onData(c)}else this.onData(f.output.length===f.next_out?f.output:f.output.subarray(0,f.next_out));if(c!==gf||0!==e){if(c===gg)return c=ga.inflateEnd(this.strm),this.onEnd(c),this.ended=!0,!0;if(0===f.avail_in)break}}return!0},gl.prototype.onData=function(a){this.chunks.push(a)},gl.prototype.onEnd=function(a){a===gf&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=fx.flattenChunks(this.chunks)),this.chunks=[],this.err=a,this.msg=this.strm.msg};let{Deflate:gn,deflate:go,deflateRaw:gp,gzip:gq}={Deflate:fM,deflate:fN,deflateRaw:function(a,b){return(b=b||{}).raw=!0,fN(a,b)},gzip:function(a,b){return(b=b||{}).gzip=!0,fN(a,b)},constants:eP},{Inflate:gr,inflate:gs,inflateRaw:gt,ungzip:gu}={Inflate:gl,inflate:gm,inflateRaw:function(a,b){return(b=b||{}).raw=!0,gm(a,b)},ungzip:gm,constants:eP},gv=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),gw=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),gx=BigInt(1),gy=BigInt(2),gz=(a,b)=>(a+b/gy)/b,gA=c$(gv,void 0,void 0,{sqrt:function(a){let b=BigInt(3),c=BigInt(6),d=BigInt(11),e=BigInt(22),f=BigInt(23),g=BigInt(44),h=BigInt(88),i=a*a*a%gv,j=i*i*a%gv,k=cU(j,b,gv)*j%gv,l=cU(k,b,gv)*j%gv,m=cU(l,gy,gv)*i%gv,n=cU(m,d,gv)*m%gv,o=cU(n,e,gv)*n%gv,p=cU(o,g,gv)*o%gv,q=cU(p,h,gv)*p%gv,r=cU(q,g,gv)*o%gv,s=cU(r,b,gv)*j%gv,t=cU(s,f,gv)*n%gv,u=cU(t,c,gv)*i%gv,v=cU(u,gy,gv);if(!gA.eql(gA.sqr(v),a))throw Error("Cannot find square root");return v}}),gB=function(a,b){let c=b=>dp({...a,...du(b)});return Object.freeze({...c(b),create:c})}({a:BigInt(0),b:BigInt(7),Fp:gA,n:gw,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:a=>{let b=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),c=-gx*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),d=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),e=BigInt("0x100000000000000000000000000000000"),f=gz(b*a,gw),g=gz(-c*a,gw),h=cT(a-f*b-g*d,gw),i=cT(-f*c-g*b,gw),j=h>e,k=i>e;if(j&&(h=gw-h),k&&(i=gw-i),h>e||i>e)throw Error("splitScalar: Endomorphism failed, k="+a);return{k1neg:j,k1:h,k2neg:k,k2:i}}}},cu),gC=(BigInt(0),{});gB.ProjectivePoint;let gD=function(a,b){let c=b.map(a=>Array.from(a).reverse());return(b,d)=>{let[e,f,g,h]=c.map(c=>c.reduce((c,d)=>a.add(a.mul(c,b),d)));return b=a.div(e,f),d=a.mul(d,a.div(g,h)),{x:b,y:d}}}(gA,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(a=>a.map(a=>BigInt(a)))),gE=dr(gA,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:gA.create(BigInt("-11"))});!function(a,b,c){if("function"!=typeof b)throw Error("mapToCurve() must be defined")}(gB.ProjectivePoint,a=>{let{x:b,y:c}=gE(gA.create(a[0]));return gD(b,c)},gA.ORDER);var gF=a.i(753363),gG=Object.defineProperty,gH=Object.getOwnPropertyDescriptor,gI=Object.getOwnPropertyNames,gJ=Object.prototype.hasOwnProperty,gK=(a,b)=>{for(var c in b)gG(a,c,{get:b[c],enumerable:!0})},gL=(a,b,c,d)=>{if(b&&"object"==typeof b||"function"==typeof b)for(let e of gI(b))gJ.call(a,e)||e===c||gG(a,e,{get:()=>b[e],enumerable:!(d=gH(b,e))||d.enumerable});return a};gK({},{ADDR_BOUND:()=>g8,API_VERSION:()=>g5,BaseUrl:()=>hj,DEFAULT_GLOBAL_CONFIG:()=>ho,HARDENING_4BYTES:()=>hi,HARDENING_BYTE:()=>hh,IS_BROWSER:()=>gO,MASK_250:()=>g3,MASK_31:()=>g4,MAX_STORAGE_ITEM_SIZE:()=>g7,NetworkName:()=>hk,OutsideExecutionCallerAny:()=>he,PAYMASTER_RPC_NODES:()=>hq,PRIME:()=>g6,RANGE_FELT:()=>ha,RANGE_I128:()=>hb,RANGE_U128:()=>hc,RPC_DEFAULT_NODES:()=>hp,SNIP9_V1_INTERFACE_ID:()=>hf,SNIP9_V2_INTERFACE_ID:()=>hg,SYSTEM_MESSAGES:()=>hr,StarknetChainId:()=>hl,SupportedRpcVersion:()=>hn,TEXT_TO_FELT_MAX_LEN:()=>g0,TRANSACTION_VERSION:()=>g1,TransactionHashPrefix:()=>hm,UDC:()=>hd,ZERO:()=>g2});var gM={};gK(gM,{JRPC:()=>gN,PAYMASTER_API:()=>aq,RPCSPEC07:()=>C,RPCSPEC08:()=>au});var gN={};((a,b,c)=>(gL(a,b,"default"),c&&gL(c,b,"default")))(gM,au),gK({},{IS_BROWSER:()=>gO,addHexPrefix:()=>gV,arrayBufferToString:()=>gP,atobUniversal:()=>gR,btoaUniversal:()=>gS,buf2hex:()=>gT,calcByteLength:()=>gX,concatenateArrayBuffer:()=>g_,padLeft:()=>gW,pascalToSnake:()=>g$,removeHexPrefix:()=>gU,sanitizeBytes:()=>gY,sanitizeHex:()=>gZ,utf8ToArray:()=>gQ});var gO=!1;function gP(a){return new Uint8Array(a).reduce((a,b)=>a+String.fromCharCode(b),"")}function gQ(a){return new TextEncoder().encode(a)}function gR(a){return aK.decode(a)}function gS(a){return aK.encode(new Uint8Array(a))}function gT(a){return a.reduce((a,b)=>a+b.toString(16).padStart(2,"0"),"")}function gU(a){return a.replace(/^0x/i,"")}function gV(a){return`0x${gU(a)}`}function gW(a,b,c="0"){return function(a,b,c,d="0"){let e=b-a.length,f=a;if(e>0){let b=d.repeat(e);f=c?b+a:a+b}return f}(a,b,!0,c)}function gX(a,b=8){let{length:c}=a,d=c%b;return d?(c-d)/b*b+b:c}function gY(a,b=8,c="0"){return gW(a,gX(a,b),c)}function gZ(a){let b=gY(gU(a),2);return b?gV(b):b}var g$=a=>/[a-z]/.test(a)?a.split(/(?=[A-Z])/).join("_").toUpperCase():a;function g_(a){let b=new Uint8Array(a.reduce((a,b)=>a+b.byteLength,0)),c=0;return a.forEach(a=>{b.set(a,c),c+=a.byteLength}),b}var g0=31,{ETransactionVersion:g1}=au,g2=0n,g3=2n**250n-1n,g4=2n**31n-1n,g5=g2,g6=2n**251n+17n*2n**192n+1n,g7=256n,g8=2n**251n-g7,g9=(a,b)=>({min:a,max:b}),ha=g9(g2,g6-1n),hb=g9(-(2n**127n),2n**127n-1n),hc=g9(g2,2n**128n-1n),hd={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},he="0x414e595f43414c4c4552",hf="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",hg="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",hh=128,hi=2147483648n,hj={SN_MAIN:"https://alpha-mainnet.starknet.io",SN_SEPOLIA:"https://alpha-sepolia.starknet.io"},hk={SN_MAIN:"SN_MAIN",SN_SEPOLIA:"SN_SEPOLIA"},hl={SN_MAIN:"0x534e5f4d41494e",SN_SEPOLIA:"0x534e5f5345504f4c4941"},hm={DECLARE:"0x6465636c617265",DEPLOY:"0x6465706c6f79",DEPLOY_ACCOUNT:"0x6465706c6f795f6163636f756e74",INVOKE:"0x696e766f6b65",L1_HANDLER:"0x6c315f68616e646c6572"},hn={"0.7.1":"0.7.1","0.8.1":"0.8.1",v0_7_1:"0.7.1",v0_8_1:"0.8.1"},ho={legacyMode:!1,rpcVersion:"0.8.1",transactionVersion:gM.ETransactionVersion.V3,logLevel:"INFO",feeMarginPercentage:{bounds:{l1_gas:{max_amount:50,max_price_per_unit:50},l1_data_gas:{max_amount:50,max_price_per_unit:50},l2_gas:{max_amount:50,max_price_per_unit:50}},maxFee:50},fetch:void 0,websocket:void 0},hp={SN_MAIN:["https://starknet-mainnet.public.blastapi.io/rpc/"],SN_SEPOLIA:["https://starknet-sepolia.public.blastapi.io/rpc/"]},hq={SN_MAIN:["https://starknet.paymaster.avnu.fi"],SN_SEPOLIA:["https://sepolia.paymaster.avnu.fi"]},hr={legacyTxWarningMessage:"You are using a deprecated transaction version (V0,V1,V2)!\nUpdate to the latest V3 transactions!",legacyTxRPC08Message:"RPC 0.8 do not support legacy transactions",SWOldV3:"RPC 0.7 V3 tx (improper resource bounds) not supported in RPC 0.8",channelVersionMismatch:"Channel specification version is not compatible with the connected node Specification Version",unsupportedSpecVersion:"The connected node specification version is not supported by this library",maxFeeInV3:"maxFee is not supported in V3 transactions, use resourceBounds instead"},hs=(class a{static instance;config;constructor(){this.initialize()}initialize(){this.config={...ho}}static getInstance(){return a.instance||(a.instance=new a),a.instance}get(a,b){return this.config[a]??b}set(a,b){this.config[a]=b}update(a){this.config={...this.config,...a}}getAll(){return{...this.config}}reset(){this.initialize()}delete(a){delete this.config[a]}hasKey(a){return a in this.config}}).getInstance(),ht={DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,OFF:0},hu=(class a{static instance;config;constructor(){this.config=hs}static getInstance(){return a.instance||(a.instance=new a),a.instance}getTimestamp(){return new Date().toISOString()}shouldLog(a){return a<=ht[this.config.get("logLevel","INFO")]}formatMessage(a){let{level:b,message:c,timestamp:d,data:e}=a,f=`[${d}] ${b}: ${c}`;if(e)try{f+=`
${JSON.stringify(e,null,2)}`}catch(a){f+=`
[JSON.stringify Error/Circular]: ${a}`}return f}log(a,b,c){if(!this.shouldLog(ht[a]))return;let d={level:a,message:b,timestamp:this.getTimestamp(),data:c},e=this.formatMessage(d);switch(a){case"DEBUG":console.debug(e);break;case"INFO":console.info(e);break;case"WARN":console.warn(e);break;case"ERROR":case"FATAL":console.error(e);break;case"OFF":break;default:console.log(e)}}debug(a,b){this.log("DEBUG",a,b)}info(a,b){this.log("INFO",a,b)}warn(a,b){this.log("WARN",a,b)}error(a,b){this.log("ERROR",a,b)}fatal(a,b){this.log("FATAL",a,b)}setLogLevel(a){this.config.set("logLevel",a)}getLogLevel(){return this.config.get("logLevel","INFO")}getEnabledLogLevels(){return Object.keys(ht).filter(a=>this.shouldLog(ht[a])&&"OFF"!==a)}}).getInstance(),hv={};gK(hv,{RpcChannel:()=>k0}),gK({},{BlockStatus:()=>hA,BlockTag:()=>hB,EDAMode:()=>hG,EDataAvailabilityMode:()=>hF,ETH_ADDRESS:()=>hO,ETransactionExecutionStatus:()=>hK,ETransactionStatus:()=>hJ,ETransactionVersion:()=>hC,ETransactionVersion2:()=>hD,ETransactionVersion3:()=>hE,EntryPointType:()=>hw,Literal:()=>hN,NON_ZERO_PREFIX:()=>hP,OutsideExecutionTypesV1:()=>hQ,OutsideExecutionTypesV2:()=>hR,OutsideExecutionVersion:()=>hS,RPC:()=>gM,TransactionExecutionStatus:()=>hz,TransactionFinalityStatus:()=>hy,TransactionType:()=>hx,TypedDataRevision:()=>y,Uint:()=>hM,ValidateType:()=>hL,isRPC08_FeeEstimate:()=>hH,isRPC08_ResourceBounds:()=>hI});var hw={EXTERNAL:"EXTERNAL",L1_HANDLER:"L1_HANDLER",CONSTRUCTOR:"CONSTRUCTOR"},hx={DECLARE:"DECLARE",DEPLOY:"DEPLOY",DEPLOY_ACCOUNT:"DEPLOY_ACCOUNT",INVOKE:"INVOKE_FUNCTION"},hy={NOT_RECEIVED:"NOT_RECEIVED",RECEIVED:"RECEIVED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},hz={REJECTED:"REJECTED",REVERTED:"REVERTED",SUCCEEDED:"SUCCEEDED"},hA={PENDING:"PENDING",ACCEPTED_ON_L1:"ACCEPTED_ON_L1",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",REJECTED:"REJECTED"},hB={PENDING:"pending",LATEST:"latest"},{ETransactionVersion:hC}=au,{ETransactionVersion2:hD}=au,{ETransactionVersion3:hE}=au,{EDataAvailabilityMode:hF}=au,{EDAMode:hG}=au;function hH(a){return"l1_data_gas_consumed"in a}function hI(a){return"l1_data_gas"in a}var{ETransactionStatus:hJ}=au,{ETransactionExecutionStatus:hK}=au,hL={DEPLOY:"DEPLOY",CALL:"CALL",INVOKE:"INVOKE"},hM={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},hN={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},hO="core::starknet::eth_address::EthAddress",hP="core::zeroable::NonZero::",hQ={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},hR={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]},hS={UNSUPPORTED:"0",V1:"1",V2:"2"};gK({},{parse:()=>hU,parseAlwaysAsBig:()=>hV,stringify:()=>hW});var hT=a=>{if(!aN(a))return parseFloat(a);let b=parseInt(a,10);return Number.isSafeInteger(b)?b:BigInt(a)},hU=a=>a3(String(a),void 0,hT),hV=a=>a3(String(a),void 0,a2),hW=(a,b,c,d)=>by(a,b,c,d),hX=class{nodeUrl;headers;interval;requestId=0;pendingRequests={};batchPromises={};delayTimer;delayPromise;delayPromiseResolve;baseFetch;constructor(a){this.nodeUrl=a.nodeUrl,this.headers=a.headers,this.interval=a.interval,this.baseFetch=a.baseFetch}async wait(){return this.delayPromise&&this.delayPromiseResolve||(this.delayPromise=new Promise(a=>{this.delayPromiseResolve=a})),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout(()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)},this.interval),this.delayPromise}addPendingRequest(a,b,c){let d={id:c??`batched_${this.requestId+=1}`,jsonrpc:"2.0",method:a,params:b??void 0};return this.pendingRequests[d.id]=d,d.id}async sendBatch(a){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:hW(a),headers:this.headers})).json()}async fetch(a,b,c){let d=this.addPendingRequest(a,b,c);await this.wait();let e=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[d]){let a=this.sendBatch(Object.values(e));Object.keys(e).forEach(b=>{this.batchPromises[b]=a})}let f=await this.batchPromises[d];delete this.batchPromises[d];let g=f.find(a=>a.id===d);if(!g)throw Error(`Couldn't find the result for the request. Method: ${a}`);return g}};function hY(a,b){if(!a)throw Error(b||"Assertion failure")}function hZ(a,b){if(!a)if(0===b.length)b();else throw Error("AssertionX failure: message function should not require arguments")}var h$={};gK(h$,{addPercent:()=>ip,assertInRange:()=>ie,bigNumberishArrayToDecimalStringArray:()=>ig,bigNumberishArrayToHexadecimalStringArray:()=>ih,cleanHex:()=>id,getDecimalString:()=>ij,getHexString:()=>ik,getHexStringArray:()=>il,hexToBytes:()=>io,hexToDecimalString:()=>ic,isBigNumberish:()=>ir,isHex:()=>h5,isStringWholeNumber:()=>ii,stringToSha256ToArrayBuff4:()=>iq,toBigInt:()=>h6,toCairoBool:()=>im,toHex:()=>h8,toHex64:()=>ib,toHexString:()=>h9,toStorageKey:()=>ia,tryToBigInt:()=>h7});var h_=a=>void 0===a||void 0===a;function h0(a){return"number"==typeof a}function h1(a){return"boolean"==typeof a}function h2(a){return"bigint"==typeof a}function h3(a){return"string"==typeof a}function h4(a){return!!a&&"object"==typeof a&&!Array.isArray(a)}function h5(a){return/^0x[0-9a-f]*$/i.test(a)}function h6(a){return BigInt(a)}function h7(a){return a?BigInt(a):void 0}function h8(a){return gV(h6(a).toString(16))}var h9=h8;function ia(a){return gV(h6(a).toString(16).padStart(64,"0"))}function ib(a){let b=gV(h6(a).toString(16).padStart(64,"0"));if(66!==b.length)throw TypeError("number is too big for hex 0x(64) representation");return b}function ic(a){return BigInt(gV(a)).toString(10)}function id(a){return a.toLowerCase().replace(/^(0x)0+/,"$1")}function ie(a,b,c,d=""){let e=""===d?"invalid length":`invalid ${d} length`,f=BigInt(a),g=BigInt(b),h=BigInt(c);hY(f>=g&&f<=h,`Message not signable, ${e}.`)}function ig(a){return a.map(a=>h6(a).toString(10))}function ih(a){return a.map(a=>h8(a))}function ii(a){return/^\d+$/.test(a)}function ij(a){if(h5(a))return ic(a);if(ii(a))return a;throw Error(`${a} needs to be a hex-string or whole-number-string`)}function ik(a){if(h5(a))return a;if(ii(a))return h9(a);throw Error(`${a} needs to be a hex-string or whole-number-string`)}function il(a){return a.map(ik)}function im(a){return(+a).toString()}function io(a){if(!h5(a))throw Error(`${a} needs to be a hex-string`);let b=gU(a);return b.length%2!=0&&(b=`0${b}`),bL(b)}function ip(a,b){let c=BigInt(a);return c+c*BigInt(b)/100n}function iq(a){return io(h8(Number(BigInt(gV(gT(cu(a))))&g4)))}function ir(a){return h0(a)||h2(a)||h3(a)&&(h5(a)||ii(a))}function is(a){let b=gU(h8(BigInt(a)));return gV(d1(io(gV(b.length%2==0?b:`0${b}`))).toString(16))}function it(a){return BigInt(gV(d1(gQ(a)).toString(16)))&g3}function iu(a){return h8(it(a))}function iv(a){return h0(a)||h2(a)?h8(a):h5(a)?a:ii(a)?h8(a):iu(a)}function iw(a){let b=gV(a.reduce((a,b)=>a+gU(h8(b)).padStart(64,"0"),""));return gV(bG(cL(io(b))))}function ix(a,b,c,d,e){return iw([a,b,e,c,d.length,...d])}function iy(a,b,c){return iw([a,b,c.length,...c])}function iz(a){return/^[\x00-\x7F]*$/.test(a)}function iA(a){return a.length<=g0}function iB(a){return/^[0-9]*$/i.test(a)}function iC(a){return h3(a)&&!h5(a)&&!ii(a)}gK({},{getL1MessageHash:()=>iy,getL2MessageHash:()=>ix,getSelector:()=>iv,getSelectorFromName:()=>iu,keccakBn:()=>is,solidityUint256PackedKeccak256:()=>iw,starknetKeccak:()=>it}),gK({},{decodeShortString:()=>iH,encodeShortString:()=>iG,isASCII:()=>iz,isDecimalString:()=>iB,isLongText:()=>iE,isShortString:()=>iA,isShortText:()=>iD,isText:()=>iC,splitLongString:()=>iF});var iD=a=>iC(a)&&iA(a),iE=a=>iC(a)&&!iA(a);function iF(a){let b=RegExp(`[^]{1,${g0}}`,"g");return a.match(b)||[]}function iG(a){if(!iz(a))throw Error(`${a} is not an ASCII string`);if(!iA(a))throw Error(`${a} is too long`);return gV(a.replace(/./g,a=>a.charCodeAt(0).toString(16)))}function iH(a){if(!iz(a))throw Error(`${a} is not an ASCII string`);if(h5(a))return gU(a).replace(/.{2}/g,a=>String.fromCharCode(parseInt(a,16)));if(iB(a))return iH("0X".concat(BigInt(a).toString(16)));throw Error(`${a} is not Hex or decimal`)}function iI(a){let b=0n===BigInt(a.pending_word)?"":iH(h8(a.pending_word));return a.data.reduce((a,b)=>a+(0n===BigInt(b)?"":iH(h8(b))),"")+b}function iJ(a){let b=iF(a),c=b[b.length-1],d=b.map(iG),[e,f]=void 0===c||31===c.length?["0x00",0]:[d.pop(),c.length];return{data:0===d.length?[]:d,pending_word:e,pending_word_len:f}}gK({},{byteArrayFromString:()=>iJ,stringFromByteArray:()=>iI});var iK={};function iL(a){if(h2(a)||Number.isInteger(a))return a.toString();if(h3(a)){if(h5(a))return BigInt(a).toString();if(iC(a)){if(!iA(a))throw Error(`${a} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(iG(a)).toString()}if(ii(a))return a}if(h1(a))return`${+a}`;throw Error(`${a} can't be computed by felt()`)}gK(iK,{felt:()=>jg,getAbiContractVersion:()=>jc,getArrayType:()=>i9,isCairo1Abi:()=>ja,isCairo1Type:()=>i8,isLen:()=>iR,isTypeArray:()=>iT,isTypeBool:()=>i1,isTypeByteArray:()=>i5,isTypeBytes31:()=>i4,isTypeContractAddress:()=>i2,isTypeEnum:()=>iX,isTypeEthAddress:()=>i3,isTypeFelt:()=>iS,isTypeLiteral:()=>i0,isTypeNamedTuple:()=>iV,isTypeNonZero:()=>jb,isTypeOption:()=>iY,isTypeResult:()=>iZ,isTypeSecp256k1Point:()=>i7,isTypeStruct:()=>iW,isTypeTuple:()=>iU,isTypeU96:()=>i6,isTypeUint:()=>i$,isTypeUint256:()=>i_,tuple:()=>jf,uint256:()=>jd,uint512:()=>je});var iM=(1n<<128n)-1n,iN=(1n<<256n)-1n,iO=class a{low;high;static abiSelector="core::integer::u256";constructor(...b){if("object"==typeof b[0]&&1===b.length&&"low"in b[0]&&"high"in b[0]){let c=a.validateProps(b[0].low,b[0].high);this.low=c.low,this.high=c.high}else if(1===b.length){let c=a.validate(b[0]);this.low=c&iM,this.high=c>>128n}else if(2===b.length){let c=a.validateProps(b[0],b[1]);this.low=c.low,this.high=c.high}else throw Error("Incorrect constructor parameters")}static validate(a){let b=BigInt(a);if(b<0n)throw Error("bigNumberish is smaller than UINT_256_MIN");if(b>iN)throw Error("bigNumberish is bigger than UINT_256_MAX");return b}static validateProps(a,b){let c=BigInt(a),d=BigInt(b);if(c<0n||c>0xffffffffffffffffffffffffffffffffn)throw Error("low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX");if(d<0n||d>0xffffffffffffffffffffffffffffffffn)throw Error("high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX");return{low:c,high:d}}static is(b){try{a.validate(b)}catch(a){return!1}return!0}static isAbiType(b){return b===a.abiSelector}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:gV(this.low.toString(16)),high:gV(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[iL(this.low),iL(this.high)]}},iP=(1n<<512n)-1n,iQ=class a{limb0;limb1;limb2;limb3;static abiSelector="core::integer::u512";constructor(...b){if("object"==typeof b[0]&&1===b.length&&"limb0"in b[0]&&"limb1"in b[0]&&"limb2"in b[0]&&"limb3"in b[0]){let c=a.validateProps(b[0].limb0,b[0].limb1,b[0].limb2,b[0].limb3);this.limb0=c.limb0,this.limb1=c.limb1,this.limb2=c.limb2,this.limb3=c.limb3}else if(1===b.length){let c=a.validate(b[0]);this.limb0=c&iM,this.limb1=(c&iM<<128n)>>128n,this.limb2=(c&iM<<256n)>>256n,this.limb3=c>>384n}else if(4===b.length){let c=a.validateProps(b[0],b[1],b[2],b[3]);this.limb0=c.limb0,this.limb1=c.limb1,this.limb2=c.limb2,this.limb3=c.limb3}else throw Error("Incorrect Uint512 constructor parameters")}static validate(a){let b=BigInt(a);if(b<0n)throw Error("bigNumberish is smaller than UINT_512_MIN.");if(b>iP)throw Error("bigNumberish is bigger than UINT_512_MAX.");return b}static validateProps(a,b,c,d){let e=BigInt(a),f=BigInt(b),g=BigInt(c),h=BigInt(d);return[e,f,g,h].forEach((a,b)=>{if(a<0n||a>iM)throw Error(`limb${b} is not in the range of a u128 number`)}),{limb0:e,limb1:f,limb2:g,limb3:h}}static is(b){try{a.validate(b)}catch(a){return!1}return!0}static isAbiType(b){return b===a.abiSelector}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:gV(this.limb0.toString(16)),limb1:gV(this.limb1.toString(16)),limb2:gV(this.limb2.toString(16)),limb3:gV(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[iL(this.limb0),iL(this.limb1),iL(this.limb2),iL(this.limb3)]}},iR=a=>/_len$/.test(a),iS=a=>"felt"===a||"core::felt252"===a,iT=a=>/\*/.test(a)||a.startsWith("core::array::Array::")||a.startsWith("core::array::Span::"),iU=a=>/^\(.*\)$/i.test(a),iV=a=>/\(.*\)/i.test(a)&&a.includes(":"),iW=(a,b)=>a in b,iX=(a,b)=>a in b,iY=a=>a.startsWith("core::option::Option::"),iZ=a=>a.startsWith("core::result::Result::"),i$=a=>Object.values(hM).includes(a),i_=a=>iO.isAbiType(a),i0=a=>Object.values(hN).includes(a),i1=a=>"core::bool"===a,i2=a=>a===hN.ContractAddress,i3=a=>a===hO,i4=a=>"core::bytes_31::bytes31"===a,i5=a=>"core::byte_array::ByteArray"===a,i6=a=>"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"===a,i7=a=>a===hN.Secp256k1Point,i8=a=>a.includes("::"),i9=a=>i8(a)?a.substring(a.indexOf("<")+1,a.lastIndexOf(">")):a.replace("*","");function ja(a){let{cairo:b}=jc(a);if(void 0===b)throw Error("Unable to determine Cairo version");return"1"===b}function jb(a){return a.startsWith(hP)}function jc(a){if(a.find(a=>"interface"===a.type))return{cairo:"1",compiler:"2"};let b=a.find(a=>("function"===a.type||"constructor"===a.type)&&(a.inputs.length||a.outputs.length));return b?i8((b.inputs.length?b.inputs:b.outputs)[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}:{cairo:void 0,compiler:void 0}}var jd=a=>new iO(a).toUint256DecimalString(),je=a=>new iQ(a).toUint512DecimalString(),jf=(...a)=>({...a});function jg(a){return iL(a)}var jh=class{variant;constructor(a){let b=Object.values(a);if(0===b.length)throw Error("This Enum must have at least 1 variant");if(1!==b.filter(a=>!h_(a)).length)throw Error("This Enum must have exactly one active variant");this.variant=a}unwrap(){return Object.values(this.variant).find(a=>!h_(a))}activeVariant(){let a=Object.entries(this.variant).find(a=>!h_(a[1]));return h_(a)?"":a[0]}},ji={Some:0,None:1},jj=class{Some;None;constructor(a,b){if(!(a in Object.values(ji)))throw Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(a===ji.Some){if(h_(b))throw Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=b,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){return this.None?void 0:this.Some}isSome(){return!h_(this.Some)}isNone(){return!0===this.None}},jk={Ok:0,Err:1},jl=class{Ok;Err;constructor(a,b){if(!(a in Object.values(jk)))throw Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");a===jk.Ok?(this.Ok=b,this.Err=void 0):(this.Ok=void 0,this.Err=b)}unwrap(){if(!h_(this.Ok))return this.Ok;if(!h_(this.Err))return this.Err;throw Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!h_(this.Ok)}isErr(){return!h_(this.Err)}},jm={isBN:(a,b,c)=>{if(!h2(a[c]))throw Error(`Data and formatter mismatch on ${c}:${b[c]}, expected response data ${c}:${a[c]} to be BN instead it is ${typeof a[c]}`)},unknown:(a,b,c)=>{throw Error(`Unhandled formatter type on ${c}:${b[c]} for data ${c}:${a[c]}`)}},jn=class{abi;constructor(a){this.abi=a}methodInputsLength(a){return a.inputs.reduce((a,b)=>iR(b.name)?a:a+1,0)}getMethod(a){return this.abi.find(b=>b.name===a)}getLegacyFormat(){return this.abi}},jo=class{abi;constructor(a){this.abi=a}methodInputsLength(a){return a.inputs.length}getMethod(a){let b=this.abi.find(a=>"interface"===a.type);return b?.items?.find(b=>b.name===a)}getLegacyFormat(){return this.abi.flatMap(a=>"interface"===a.type?a.items:a)}};function jp(a){var b;let c=(b=a).find(a=>"interface"===a.type)?2:+!!ja(b);if(0===c||1===c)return new jn(a);if(2===c)return new jo(a);throw Error(`Unsupported ABI version ${c}`)}function jq(a,b,c){return"constructor"===a&&!c&&!b.length}function jr(a,b,c){for(let d=0,e=0;d<a.length;d++)if(a[d]===b)e++;else if(a[d]===c&&0==--e)return d;return 1/0}function js(a){return i8(a)?function(a){let b,c=a.slice(1,-1),d=[],e=0;for(;e<c.length;){switch(!0){case"("===c[e]:b=e+jr(c.slice(e),"(",")")+1;break;case c.startsWith("core::result::Result::<",e)||c.startsWith("core::array::Array::<",e)||c.startsWith("core::option::Option::<",e):b=e+jr(c.slice(e),"<",">")+1;break;default:{let a=c.indexOf(",",e);b=-1!==a?a:1/0}}d.push(c.slice(e,b)),e=b+2}return d}(a):function(a){let{subTuple:b,result:c}=function(a){if(!a.includes("("))return{subTuple:[],result:a};let b=[],c="",d=0;for(;d<a.length;){if("("===a[d]){let e=1,f=d;for(d++;e;)")"===a[d]&&e--,"("===a[d]&&e++,d++;b.push(a.substring(f,d)),c+=" ",d--}else c+=a[d];d++}return{subTuple:b,result:c}}(a.replace(/\s/g,"").slice(1,-1)),d=c.split(",").map(a=>b.length?a.replace(" ",b.shift()):a);return iV(a)&&(d=d.reduce((a,b)=>a.concat(function(a){let b=a.substring(0,a.indexOf(":")),c=a.substring(b.length+1);return{name:b,type:c}}(b)),[])),d}(a)}var jt=class a{content;arrayType;constructor(b,c){hY(a.isTypeFixedArray(c),`The type ${c} is not a Cairo fixed array. Needs [type; length].`);try{a.getFixedArrayType(c)}catch{throw Error(`The type ${c} do not includes any content type. Needs [type; length].`)}try{a.getFixedArraySize(c)}catch{throw Error(`The type ${c} type do not includes any length. Needs [type; length].`)}hY(a.getFixedArraySize(c)===b.length,`The ABI type ${c} is expecting ${a.getFixedArraySize(c)} items. ${b.length} items provided.`),this.content=b,this.arrayType=c}static getFixedArraySize(a){let b=a.match(/(?<=; )\d+(?=\])/);if(null===b)throw Error(`ABI type ${a} do not includes a valid number after ';' character.`);return Number(b[0])}getFixedArraySize(){return a.getFixedArraySize(this.arrayType)}static getFixedArrayType=a=>{let b=a.match(/(?<=\[).+(?=;)/);if(null===b)throw Error(`ABI type ${a} do not includes a valid type of data.`);return b[0]};getFixedArrayType(){return a.getFixedArrayType(this.arrayType)}static compile(a){return a.reduce((a,b,c)=>(a[c]=b,a),{})}compile(){return a.compile(this.content)}static isTypeFixedArray(a){return/^\[.*;\s.*\]$/.test(a)&&/(?<=\[).+(?=;)/.test(a)&&/(?<=; )\d+(?=\])/.test(a)}};function ju(a,b){switch(!0){case iO.isAbiType(a):return new iO(b).toApiRequest();case iQ.isAbiType(a):return new iQ(b).toApiRequest();case i4(a):return iG(b.toString());case i7(a):{let a=gU(h8(b)).padStart(128,"0"),c=jd(gV(a.slice(-64))),d=jd(gV(a.slice(0,-64)));return[iL(d.low),iL(d.high),iL(c.low),iL(c.high)]}default:return iL(b)}}function jv(a,b,c,d){if(void 0===a)throw Error(`Missing parameter for type ${b}`);if(jt.isTypeFixedArray(b)){let e=jt.getFixedArrayType(b),f=[];if(Array.isArray(a))f=new jt(a,b).content;else if("object"==typeof a)hY((f=Object.values(a)).length===jt.getFixedArraySize(b),`ABI type ${b}: object provided do not includes  ${jt.getFixedArraySize(b)} items. ${f.length} items provided.`);else throw Error(`ABI type ${b}: not an Array representing a cairo.fixedArray() provided.`);return f.reduce((a,b)=>a.concat(jv(b,e,c,d)),[])}if(Array.isArray(a)){let e=[];e.push(iL(a.length));let f=i9(b);return a.reduce((a,b)=>a.concat(jv(b,f,c,d)),e)}if(c[b]&&c[b].members.length){if(iO.isAbiType(b))return new iO(a).toApiRequest();if(iQ.isAbiType(b))return new iQ(a).toApiRequest();if(i3(b))return ju(b,a);if(i5(b)){let b=iJ(a);return[b.data.length.toString(),...b.data.map(a=>a.toString()),b.pending_word.toString(),b.pending_word_len.toString()]}let{members:e}=c[b];return e.reduce((b,e)=>b.concat(jv(a[e.name],e.type,c,d)),[])}if(iU(b))return(function(a,b){let c=js(b),d=Object.values(a);if(d.length!==c.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.
      provided: ${d}
      expected: ${c}`);return c.map((a,b)=>({element:d[b],type:a.type??a}))})(a,b).reduce((a,b)=>{let e=jv(b.element,b.type,c,d);return a.concat(e)},[]);if(iO.isAbiType(b))return new iO(a).toApiRequest();if(iQ.isAbiType(b))return new iQ(a).toApiRequest();if(iX(b,d)){let{variants:e}=d[b];if(iY(b)){if(a.isSome()){let b=e.find(a=>"Some"===a.name);if(h_(b))throw Error("Error in abi : Option has no 'Some' variant.");let f=b.type;if("()"===f)return ji.Some.toString();let g=jv(a.unwrap(),f,c,d);return Array.isArray(g)?[ji.Some.toString(),...g]:[ji.Some.toString(),g]}return ji.None.toString()}if(iZ(b)){if(a.isOk()){let b=e.find(a=>"Ok"===a.name);if(h_(b))throw Error("Error in abi : Result has no 'Ok' variant.");let f=b.type;if("()"===f)return jk.Ok.toString();let g=jv(a.unwrap(),f,c,d);return Array.isArray(g)?[jk.Ok.toString(),...g]:[jk.Ok.toString(),g]}let b=e.find(a=>"Err"===a.name);if(h_(b))throw Error("Error in abi : Result has no 'Err' variant.");let f=b.type;if("()"===f)return jk.Err.toString();let g=jv(a.unwrap(),f,c,d);return Array.isArray(g)?[jk.Err.toString(),...g]:[jk.Err.toString(),g]}let f=a.activeVariant(),g=e.find(a=>a.name===f);if(h_(g))throw Error(`Not find in abi : Enum has no '${f}' variant.`);let h=g.type,i=e.findIndex(a=>a.name===f);if("()"===h)return i.toString();let j=jv(a.unwrap(),h,c,d);return Array.isArray(j)?[i.toString(),...j]:[i.toString(),j]}if(jb(b))return ju(i9(b),a);if("object"==typeof a)throw Error(`Parameter ${a} do not align with abi parameter ${b}`);return ju(b,a)}function jw(a,b){switch(!0){case i1(a):return!!BigInt(b.next().value);case iO.isAbiType(a):return new iO(b.next().value,b.next().value).toBigInt();case iQ.isAbiType(a):let c=b.next().value,d=b.next().value;return new iQ(c,d,b.next().value,b.next().value).toBigInt();case i3(a):return BigInt(b.next().value);case i4(a):return iH(b.next().value);case i7(a):let e=gU(b.next().value).padStart(32,"0"),f=gU(b.next().value).padStart(32,"0"),g=gU(b.next().value).padStart(32,"0");return BigInt(gV(f+e+gU(b.next().value).padStart(32,"0")+g));default:return BigInt(b.next().value)}}function jx(a,b,c,d){if("()"===b.type)return{};if(iO.isAbiType(b.type))return new iO(a.next().value,a.next().value).toBigInt();if(iQ.isAbiType(b.type)){let b=a.next().value,c=a.next().value;return new iQ(b,c,a.next().value,a.next().value).toBigInt()}if(i5(b.type)){let b=[],c=BigInt(a.next().value);for(;b.length<c;)b.push(h8(a.next().value));let d=h8(a.next().value);return iI({data:b,pending_word:d,pending_word_len:BigInt(a.next().value)})}if(jt.isTypeFixedArray(b.type)){let e=[],f={name:"",type:jt.getFixedArrayType(b.type)},g=jt.getFixedArraySize(b.type);for(;e.length<g;)e.push(jx(a,f,c,d));return e}if(iT(b.type)){let e=[],f={name:"",type:i9(b.type)},g=BigInt(a.next().value);for(;e.length<g;)e.push(jx(a,f,c,d));return e}if(jb(b.type))return jx(a,{name:"",type:i9(b.type)},c,d);if(c&&b.type in c&&c[b.type])return i3(b.type)?jw(b.type,a):c[b.type].members.reduce((b,e)=>(b[e.name]=jx(a,e,c,d),b),{});if(d&&b.type in d&&d[b.type]){let e=Number(a.next().value),f=d[b.type].variants.reduce((b,f,g)=>(g===e?b[f.name]=jx(a,{name:"",type:f.type},c,d):b[f.name]=void 0,b),{});if(b.type.startsWith("core::option::Option")){let a=e===ji.Some?f.Some:void 0;return new jj(e,a)}if(b.type.startsWith("core::result::Result")){let a;return a=e===jk.Ok?f.Ok:f.Err,new jl(e,a)}return new jh(f)}if(iU(b.type))return js(b.type).reduce((b,e,f)=>{let g=e?.name?e.name:f,h=e?.type?e.type:e;return b[g]=jx(a,{name:g,type:h},c,d),b},{});if(iT(b.type)){let e=[],f={name:"",type:i9(b.type)},g=BigInt(a.next().value);for(;e.length<g;)e.push(jx(a,f,c,d));return e}return jw(b.type,a)}function jy(a,b,c,d,e){let{name:f,type:g}=b;switch(!0){case iR(f):return BigInt(a.next().value);case c&&g in c||iU(g):case d&&iX(g,d):case jt.isTypeFixedArray(g):return jx(a,b,c,d);case iT(g):if(i8(g))return jx(a,b,c,d);let h=[];if(e&&e[`${f}_len`]){let g=e[`${f}_len`];for(;h.length<g;)h.push(jx(a,{name:f,type:b.type.replace("*","")},c,d))}return h;case jb(g):return jx(a,b,c,d);default:return jw(g,a)}}var jz=(a,b)=>{if(hY(h3(a)||h0(a)||h2(a),`Validate: arg ${b.name} should be a felt typed as (String, Number or BigInt)`),h3(a)&&!h5(a))return;let c=BigInt(a.toString(10));hY(c>=0n&&c<=2n**252n-1n,`Validate: arg ${b.name} cairo typed ${b.type} should be in range [0, 2^252-1]`)},jA=(a,b)=>{let c;switch(h0(a)&&hY(a<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),hY(h3(a)||h0(a)||h2(a)||h4(a)&&"low"in a&&"high"in a||h4(a)&&["limb0","limb1","limb2","limb3"].every(b=>b in a),`Validate: arg ${b.name} of cairo type ${b.type} should be type (String, Number or BigInt), but is ${typeof a} ${a}.`),b.type){case hM.u256:c=new iO(a).toBigInt();break;case hM.u512:c=new iQ(a).toBigInt();break;default:c=h6(a)}switch(b.type){case hM.u8:hY(c>=0n&&c<=255n,`Validate: arg ${b.name} cairo typed ${b.type} should be in range [0 - 255]`);break;case hM.u16:hY(c>=0n&&c<=65535n,`Validate: arg ${b.name} cairo typed ${b.type} should be in range [0, 65535]`);break;case hM.u32:hY(c>=0n&&c<=4294967295n,`Validate: arg ${b.name} cairo typed ${b.type} should be in range [0, 4294967295]`);break;case hM.u64:hY(c>=0n&&c<=2n**64n-1n,`Validate: arg ${b.name} cairo typed ${b.type} should be in range [0, 2^64-1]`);break;case hM.u128:hY(c>=0n&&c<=2n**128n-1n,`Validate: arg ${b.name} cairo typed ${b.type} should be in range [0, 2^128-1]`);break;case hM.u256:hY(c>=0n&&c<=2n**256n-1n,`Validate: arg ${b.name} is ${b.type} should be in range 0 - 2^256-1`);break;case hM.u512:hY(iQ.is(c),`Validate: arg ${b.name} is ${b.type} should be in range 0 - 2^512-1`);break;case hN.ClassHash:case hN.ContractAddress:hY(c>=0n&&c<=2n**252n-1n,`Validate: arg ${b.name} cairo typed ${b.type} should be in range [0, 2^252-1]`);break;case hN.Secp256k1Point:hY(c>=0n&&c<=2n**512n-1n,`Validate: arg ${b.name} must be ${b.type} : a 512 bits number.`);break;case hN.U96:hY(c>=0n&&c<=2n**96n-1n,`Validate: arg ${b.name} must be ${b.type} : a 96 bits number.`)}},jB=(a,b)=>{hY(h1(a),`Validate: arg ${b.name} of cairo type ${b.type} should be type (Boolean)`)},jC=(a,b,c)=>{if(b.type===hM.u256||b.type===hM.u512)return void jA(a,b);if(i3(b.type)){hY(!h4(a),`EthAddress type is waiting a BigNumberish. Got "${a}"`);let c=BigInt(a.toString(10));hY(c>=0n&&c<=2n**160n-1n,`Validate: arg ${b.name} cairo typed ${b.type} should be in range [0, 2^160-1]`);return}hY(h4(a),`Validate: arg ${b.name} is cairo type struct (${b.type}), and should be defined as a js object (not array)`),c[b.type].members.forEach(({name:c})=>{hY(Object.keys(a).includes(c),`Validate: arg ${b.name} should have a property ${c}`)})},jD=(a,b)=>{hY(h4(a),`Validate: arg ${b.name} is cairo type Enum (${b.type}), and should be defined as a js object (not array)`);let c=Object.getOwnPropertyNames(Object.getPrototypeOf(a)),d=[...Object.getOwnPropertyNames(a),...c];if(!(iY(b.type)&&d.includes("isSome")&&d.includes("isNone")||iZ(b.type)&&d.includes("isOk")&&d.includes("isErr"))&&!(d.includes("variant")&&d.includes("activeVariant")))throw Error(`Validate Enum: argument ${b.name}, type ${b.type}, value received "${a}", is not an Enum.`)},jE=(a,b)=>{hY(h4(a),`Validate: arg ${b.name} should be a tuple (defined as object)`)},jF=(a,b,c,d)=>{let e=iT(b.type),f=e?i9(b.type):jt.getFixedArrayType(b.type);if(e&&iS(f)&&iE(a))return;let g=[];if(e)hY(Array.isArray(a),`Validate: arg ${b.name} should be an Array`),g=a;else switch(!0){case Array.isArray(a):g=a;break;case"object"==typeof a:g=Object.values(a);break;default:throw Error(`Validate: arg ${b.name} should be an Array or an object.`)}switch(!0){case iS(f):g.forEach(a=>jz(a,b));break;case iU(f):g.forEach(a=>jE(a,{name:b.name,type:f}));break;case iT(f):g.forEach(a=>jF(a,{name:"",type:f},c,d));break;case iW(f,c):g.forEach(a=>jC(a,{name:b.name,type:f},c));break;case iX(f,d):g.forEach(a=>jD(a,{name:b.name,type:f}));break;case i$(f)||i0(f):g.forEach(a=>jA(a,{name:"",type:f}));break;case i1(f):g.forEach(a=>jB(a,b));break;default:throw Error(`Validate Unhandled: argument ${b.name}, type ${b.type}, value ${g}`)}};function jG(a,b,c,d){a.inputs.reduce((a,e)=>{let f=b[a];switch(!0){case iR(e.name):return a;case iS(e.type):jz(f,e);break;case i4(e.type):hY(h3(f),`Validate: arg ${e.name} should be a string.`),hY(f.length<32,`Validate: arg ${e.name} cairo typed ${e.type} should be a string of less than 32 characters.`);break;case i$(e.type)||i0(e.type):jA(f,e);break;case i1(e.type):jB(f,e);break;case i5(e.type):hY(h3(f),`Validate: arg ${e.name} should be a string.`);break;case iT(e.type)||jt.isTypeFixedArray(e.type):jF(f,e,c,d);break;case iW(e.type,c):jC(f,e,c);break;case iX(e.type,d):jD(f,e);break;case iU(e.type):jE(f,e);break;case jb(e.type):let g=i9(e.type);switch(hY(i$(g)&&g!==iQ.abiSelector||iS(g),`Validate: ${e.name} type is not authorized for NonZero type.`),!0){case iS(g):jz(f,e),hY(BigInt(f.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case i$(g):jA(f,{name:"",type:g}),g===hM.u256?hY(new iO(f).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):hY(h6(f)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw Error(`Validate Unhandled: argument ${e.name}, type ${e.type}, value "${f}"`)}break;default:throw Error(`Validate Unhandled: argument ${e.name}, type ${e.type}, value ${f}`)}return a+1},0)}var jH=class a{abi;parser;structs;enums;constructor(b){this.structs=a.getAbiStruct(b),this.enums=a.getAbiEnum(b),this.parser=jp(b),this.abi=this.parser.getLegacyFormat()}validate(a,b,c=[]){a!==hL.DEPLOY&&hY(this.abi.filter(b=>{if("function"!==b.type)return!1;let c="view"===b.stateMutability||"view"===b.state_mutability;return a===hL.INVOKE?!c:c}).map(a=>a.name).includes(b),`${a===hL.INVOKE?"invocable":"viewable"} method not found in abi`);let d=this.abi.find(c=>a===hL.DEPLOY?c.name===b&&"constructor"===c.type:c.name===b&&"function"===c.type);if(jq(b,c,d))return;let e=this.parser.methodInputsLength(d);if(c.length!==e)throw Error(`Invalid number of arguments, expected ${e} arguments, but got ${c.length}`);jG(d,c,this.structs,this.enums)}compile(a,b){let c,d=this.abi.find(b=>b.name===a);if(jq(a,b,d))return[];Array.isArray(b)?c=b:(c=Object.values(function(a,b,c,d){let e=(a,b)=>{if(jt.isTypeFixedArray(b)){var h,i=a,j=b;let c=jt.getFixedArrayType(j),d=jt.getFixedArraySize(j);if(Array.isArray(i)){if(d!==i.length)throw Error(`ABI type ${j}: array provided do not includes  ${d} items. ${i.length} items provided.`);return i.map(a=>e(a,c))}if(d!==Object.keys(i).length)throw Error(`ABI type ${j}: object provided do not includes  ${d} properties. ${Object.keys(i).length} items provided.`);return e(i,c)}if(iT(b)){var k=a,l=b;let c=i9(l);return h3(k)?k:k.map(a=>e(a,c))}if(iX(b,d))return g(a,d[b]);if(iU(b)){return h=a,js(b).reduce((a,b,c)=>{let d,f=Object.keys(h),g=b?.type?b.type:b;return d=e(h[f[c]],g),Object.defineProperty(a,c.toString(),{enumerable:!0,value:d??h[f[c]]}),a},{})}if(i3(b)||jb(b)||i5(b)||i6(b)||i7(b))return a;if(iO.isAbiType(b)){if("object"!=typeof a)return a;if(!("low"in a&&"high"in a))throw Error(`Your object includes the property : ${b}, containing an Uint256 object without the 'low' and 'high' keys.`);return{low:a.low,high:a.high}}if(iQ.isAbiType(b)){if("object"!=typeof a)return a;if(!["limb0","limb1","limb2","limb3"].every(b=>b in a))throw Error(`Your object includes the property : ${b}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`);return{limb0:a.limb0,limb1:a.limb1,limb2:a.limb2,limb3:a.limb3}}return iW(b,c)?f(a,c[b].members):a},f=(a,b)=>b.reduce((b,c)=>{let d;if("undefined"===a[c.name]&&(i8(c.type)||!iR(c.name)))throw Error(`Your object needs a property with key : ${c.name} .`);return d=e(a[c.name],c.type),Object.defineProperty(b,c.name,{enumerable:!0,value:d??a[c.name]}),b},{}),g=(a,b)=>{if(iZ(b.name)){let c=b.name.substring(b.name.indexOf("<")+1,b.name.lastIndexOf(",")),d=b.name.substring(b.name.indexOf(",")+1,b.name.lastIndexOf(">"));return a.isOk()?new jl(jk.Ok,e(a.unwrap(),c)):new jl(jk.Err,e(a.unwrap(),d))}if(iY(b.name)){let c=b.name.substring(b.name.indexOf("<")+1,b.name.lastIndexOf(">"));return a.isSome()?new jj(ji.Some,e(a.unwrap(),c)):new jj(ji.None,{})}return new jh(Object.fromEntries(Object.entries(a.variant).map(c=>{if(h_(c[1]))return c;let d=b.type.substring(b.type.lastIndexOf("<")+1,b.type.lastIndexOf(">"));return"()"===d?c:[c[0],e(a.unwrap(),d)]})))};return b.reduce((b,c)=>{let d;return iR(c.name)&&!i8(c.type)?b:(d=e(a[c.name],c.type),Object.defineProperty(b,c.name,{enumerable:!0,value:d}),b)},{})}(b,d.inputs,this.structs,this.enums)),jG(d,c,this.structs,this.enums));let e=c[Symbol.iterator](),f=d.inputs.reduce((a,b)=>iR(b.name)&&!i8(b.type)?a:a.concat(function(a,b,c,d){let{name:e,type:f}=b,{value:g}=a.next();switch(!0){case jt.isTypeFixedArray(f):if(!Array.isArray(g)&&"object"!=typeof g)throw Error(`ABI expected parameter ${e} to be an array or an object, got ${g}`);return jv(g,b.type,c,d);case iT(f):if(!Array.isArray(g)&&!iC(g))throw Error(`ABI expected parameter ${e} to be array or long string, got ${g}`);return h3(g)&&(g=iF(g)),jv(g,b.type,c,d);case jb(f):return ju(i9(f),g);case i3(f):return ju(f,g);case iW(f,c)||iU(f)||iO.isAbiType(f):case iX(f,d):return jv(g,f,c,d);default:return ju(f,g)}}(e,b,this.structs,this.enums)),[]);return Object.defineProperty(f,"__compiled__",{enumerable:!1,writable:!1,value:!0}),f}static compile(a){let b,c=a=>{let b=(a,c=".")=>{let d=Array.isArray(a)?[a.length.toString(),...a]:a;return Object.entries(d).flatMap(([a,e])=>{let f=e;"entrypoint"===a?f=iu(f):iE(f)&&(f=iJ(f));let g=Array.isArray(d)&&"0"===a?"$$len":a;if(h2(f))return[[`${c}${g}`,iL(f)]];if(Object(f)===f){let a=Object.getOwnPropertyNames(Object.getPrototypeOf(f)),d=[...Object.getOwnPropertyNames(f),...a];if(d.includes("isSome")&&d.includes("isNone")){let a=f,d=a.isSome()?ji.Some:ji.None;return a.isSome()?b({0:d,1:a.unwrap()},`${c}${g}.`):[[`${c}${g}`,iL(d)]]}if(d.includes("isOk")&&d.includes("isErr")){let a=f;return b({0:a.isOk()?jk.Ok:jk.Err,1:a.unwrap()},`${c}${g}.`)}if(d.includes("variant")&&d.includes("activeVariant")){let a=f,d=a.activeVariant(),e=Object.keys(a.variant).findIndex(a=>a===d);return"object"==typeof a.unwrap()&&0===Object.keys(a.unwrap()).length?[[`${c}${g}`,iL(e)]]:b({0:e,1:a.unwrap()},`${c}${g}.`)}return b(f,`${c}${g}.`)}return[[`${c}${g}`,iL(f)]]})};return Object.fromEntries(b(a))};return Object.defineProperty(b=Array.isArray(a)?Object.values(c({...a})):Object.values(c(a)),"__compiled__",{enumerable:!1,writable:!1,value:!0}),b}parse(a,b){let{outputs:c}=this.abi.find(b=>b.name===a),d=b.flat()[Symbol.iterator](),e=c.flat().reduce((a,b,c)=>{let e=b.name??c;return a[e]=jy(d,b,this.structs,this.enums,a),a[e]&&a[`${e}_len`]&&delete a[`${e}_len`],a},{});return 1===Object.keys(e).length&&0 in e?e[0]:e}format(a,b,c){return function a(b,c,d){return Object.entries(b).reduce((e,[f,g])=>{let h=d??c[f];if(!(f in c)&&!d)return e[f]=g,e;if("string"===h){if(Array.isArray(b[f])){let c=a(b[f],b[f].map(a=>h));return e[f]=Object.values(c).join(""),e}return jm.isBN(b,c,f),e[f]=iH(g),e}if("number"===h)return jm.isBN(b,c,f),e[f]=Number(g),e;if("function"==typeof h)return e[f]=h(g),e;if(Array.isArray(h)){let c=a(b[f],h,h[0]);return e[f]=Object.values(c),e}return h4(h)?e[f]=a(b[f],h):jm.unknown(b,c,f),e},{})}(this.parse(a,b),c)}static getAbiStruct(a){return a.filter(a=>"struct"===a.type).reduce((a,b)=>({...a,[b.name]:b}),{})}static getAbiEnum(a){let b=a.filter(a=>"enum"===a.type).reduce((a,b)=>({...a,[b.name]:b}),{});return delete b["core::bool"],b}static toCalldata(b=[]){return a.compile(b)}static toHex(b=[]){return a.compile(b).map(a=>h8(a))}decodeParameters(a,b){let c=Array.isArray(a)?a:[a],d=b.flat()[Symbol.iterator](),e=c.map(a=>jy(d,{name:"",type:a},this.structs,this.enums));return 1===e.length?e[0]:e}},jI={};gK(jI,{calculateContractAddressFromHash:()=>kb,calculateDeclareTransactionHash:()=>j4,calculateDeployAccountTransactionHash:()=>j5,calculateInvokeTransactionHash:()=>j3,calculateL2MessageTxHash:()=>jP,computeCompiledClassHash:()=>ki,computeContractClassHash:()=>kl,computeHashOnElements:()=>j8,computeHintedClassHash:()=>ke,computeLegacyContractClassHash:()=>kf,computePedersenHash:()=>j6,computePedersenHashOnElements:()=>j9,computePoseidonHash:()=>j7,computePoseidonHashOnElements:()=>ka,computeSierraContractClassHash:()=>kk,formatSpaces:()=>kd,getL1MessageHash:()=>iy,getL2MessageHash:()=>ix,getSelector:()=>iv,getSelectorFromName:()=>iu,hashByteCodeSegments:()=>kh,keccakBn:()=>is,poseidon:()=>ed,solidityUint256PackedKeccak256:()=>iw,starknetKeccak:()=>it}),gK({},{calculateDeclareTransactionHash:()=>jM,calculateDeployAccountTransactionHash:()=>jN,calculateL2MessageTxHash:()=>jP,calculateTransactionHash:()=>jO,calculateTransactionHashCommon:()=>jL,computeHashOnElements:()=>jK});var jJ={};function jK(a){return[...a,a.length].reduce((a,b)=>ee.pedersen(h6(a),h6(b)),0).toString()}function jL(a,b,c,d,e,f,g,h=[]){let i=[a,b,c,d,jK(e),f,g,...h];return jK(i)}function jM(a,b,c,d,e,f,g){return jL(hm.DECLARE,c,b,0,[a],d,e,[f,...g?[g]:[]])}function jN(a,b,c,d,e,f,g,h){let i=[b,d,...c];return jL(hm.DEPLOY_ACCOUNT,e,a,0,i,f,g,[h])}function jO(a,b,c,d,e,f){return jL(hm.INVOKE,b,a,0,c,d,e,[f])}function jP(a,b,c,d,e,f){let g=[a,...d];return jL(hm.L1_HANDLER,0,b,iv(c),g,0,e,[f])}gK(jJ,{starkCurve:()=>ee,weierstrass:()=>ef}),gK({},{calculateDeclareTransactionHash:()=>j1,calculateDeployAccountTransactionHash:()=>j0,calculateInvokeTransactionHash:()=>j2,calculateTransactionHashCommon:()=>j_,encodeDataResourceBoundsL1:()=>jY,encodeResourceBoundsL1:()=>jW,encodeResourceBoundsL2:()=>jX,hashDAMode:()=>jV,hashFeeField:()=>jZ,hashFeeFieldV3B3:()=>j$});var jQ=a=>a.map(a=>BigInt(a)),jR=64n+128n,jS=BigInt(iG("L1_GAS")),jT=BigInt(iG("L2_GAS")),jU=BigInt(iG("L1_DATA"));function jV(a,b){return(BigInt(a)<<32n)+BigInt(b)}function jW(a){return(jS<<jR)+(BigInt(a.l1_gas.max_amount)<<128n)+BigInt(a.l1_gas.max_price_per_unit)}function jX(a){return(jT<<jR)+(BigInt(a.l2_gas.max_amount)<<128n)+BigInt(a.l2_gas.max_price_per_unit)}function jY(a){return(jU<<jR)+(BigInt(a.l1_data_gas.max_amount)<<128n)+BigInt(a.l1_data_gas.max_price_per_unit)}function jZ(a,b){let c=jW(b),d=jX(b);return ec([BigInt(a),c,d])}function j$(a,b){let c=jW(b),d=jX(b),e=jY(b);return ec([BigInt(a),c,d,e])}function j_(a,b,c,d,e,f,g,h,i,j,k=[]){let l=hI(j)?j$(f,j):jZ(f,j),m=jV(h,i),n=jQ([a,b,c,l,ec(jQ(g)),d,e,m,...jQ(k)]);return h8(ec(n))}function j0(a,b,c,d,e,f,g,h,i,j,k,l){return j_(hm.DEPLOY_ACCOUNT,e,a,f,g,k,l,h,i,j,[ec(jQ(c)),b,d])}function j1(a,b,c,d,e,f,g,h,i,j,k,l){return j_(hm.DECLARE,d,c,e,f,k,jQ(l),h,i,j,[ec(jQ(g)),a,b])}function j2(a,b,c,d,e,f,g,h,i,j,k){return j_(hm.INVOKE,b,a,d,e,j,k,g,h,i,[ec(jQ(f)),ec(jQ(c))])}function j3(a){return[gM.ETransactionVersion.V3,gM.ETransactionVersion.F3].includes(a.version)?j2(a.senderAddress,a.version,a.compiledCalldata,a.chainId,a.nonce,a.accountDeploymentData,a.nonceDataAvailabilityMode,a.feeDataAvailabilityMode,a.resourceBounds,a.tip,a.paymasterData):jO(a.senderAddress,a.version,a.compiledCalldata,a.maxFee,a.chainId,a.nonce)}function j4(a){return[gM.ETransactionVersion.V3,gM.ETransactionVersion.F3].includes(a.version)?j1(a.classHash,a.compiledClassHash,a.senderAddress,a.version,a.chainId,a.nonce,a.accountDeploymentData,a.nonceDataAvailabilityMode,a.feeDataAvailabilityMode,a.resourceBounds,a.tip,a.paymasterData):jM(a.classHash,a.senderAddress,a.version,a.maxFee,a.chainId,a.nonce,a.compiledClassHash)}function j5(a){return[gM.ETransactionVersion.V3,gM.ETransactionVersion.F3].includes(a.version)?j0(a.contractAddress,a.classHash,a.compiledConstructorCalldata,a.salt,a.version,a.chainId,a.nonce,a.nonceDataAvailabilityMode,a.feeDataAvailabilityMode,a.resourceBounds,a.tip,a.paymasterData):jN(a.contractAddress,a.classHash,a.constructorCalldata,a.salt,a.version,a.maxFee,a.chainId,a.nonce)}function j6(a,b){return ee.pedersen(BigInt(a),BigInt(b))}function j7(a,b){return h8(ee.poseidonHash(BigInt(a),BigInt(b)))}function j8(a){return[...a,a.length].reduce((a,b)=>ee.pedersen(BigInt(a),BigInt(b)),0).toString()}var j9=j8;function ka(a){return h8(ec(a.map(a=>BigInt(a))))}function kb(a,b,c,d){let e=j8(jH.compile(c));return h8(BigInt(j8([iL("0x535441524b4e45545f434f4e54524143545f41444452455353"),d,a,b,e]))%g8)}function kc(a,b){return"attributes"===a||"accessible_scopes"===a?Array.isArray(b)&&0===b.length?void 0:b:"debug_info"===a?null:null===b?void 0:b}function kd(a){let b=!1,c=[];for(let d of a)'"'===d&&!1==(c.length>0&&"\\"===c.slice(-1)[0])&&(b=!b),b?c.push(d):c.push(":"===d?": ":","===d?", ":d);return c.join("")}function ke(a){let{abi:b,program:c}=a,d=kd(hW({abi:b,program:c},kc));return gV(ee.keccak(gQ(d)).toString(16))}function kf(a){let b=h3(a)?hU(a):a,c=h8(g5),d=j8(b.entry_points_by_type.EXTERNAL.flatMap(a=>[a.selector,a.offset])),e=j8(b.entry_points_by_type.L1_HANDLER.flatMap(a=>[a.selector,a.offset])),f=j8(b.entry_points_by_type.CONSTRUCTOR.flatMap(a=>[a.selector,a.offset])),g=j8(b.program.builtins.map(a=>iG(a))),h=ke(b),i=j8(b.program.data);return j8([c,d,e,f,g,h,i])}function kg(a){let b=a.flatMap(a=>[BigInt(a.selector),BigInt(a.offset),ec(a.builtins.flatMap(a=>BigInt(iG(a))))]);return ec(b)}function kh(a){let b=a.bytecode.map(a=>BigInt(a)),c=a.bytecode_segment_lengths??[],d=0,e=c.flatMap(a=>{let c=b.slice(d,d+=a);return[BigInt(a),ec(c)]});return 1n+ec(e)}function ki(a){let b=BigInt(iG("COMPILED_CLASS_V1")),c=kg(a.entry_points_by_type.EXTERNAL),d=kg(a.entry_points_by_type.L1_HANDLER),e=kg(a.entry_points_by_type.CONSTRUCTOR),f=a.bytecode_segment_lengths?kh(a):ec(a.bytecode.map(a=>BigInt(a)));return h8(ec([b,c,d,e,f]))}function kj(a){return ec(a.flatMap(a=>[BigInt(a.selector),BigInt(a.function_idx)]))}function kk(a){let b=BigInt(iG("CONTRACT_CLASS_V0.1.0")),c=kj(a.entry_points_by_type.EXTERNAL),d=kj(a.entry_points_by_type.L1_HANDLER),e=kj(a.entry_points_by_type.CONSTRUCTOR),f=function(a){let b=kd(hW(a.abi,null));return BigInt(gV(ee.keccak(gQ(b)).toString(16)))}(a),g=ec(a.sierra_program.map(a=>BigInt(a)));return h8(ec([b,c,d,e,f,g]))}function kl(a){let b=h3(a)?hU(a):a;return"sierra_program"in b?kk(b):kf(b)}function km(a){let b=a.version?h8(a.version):hC.V3;return b===hC.V3||b===hC.F3}function kn(a,b){let c=a.split("."),d=b.split(".");return c.every((a,b)=>"*"===a||a===d[b])}function ko(a,b={allowAnyPatchVersion:!1}){return Object.values(hn).some(c=>kn(b.allowAnyPatchVersion?function(a){let b=a.split(".");return b.length<3?a:`${b[0]}.${b[1]}.*`}(c):c,a))}function kp(a){return gS(gq(h3(a)?a:hW(a)))}function kq(a){return Array.isArray(a)?a:hU(gP(gu(gR(a))))}function kr(){return dQ(dM.randomPrivateKey())}function ks(a){if(!a)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(a))return a.map(a=>h8(a));try{let{r:b,s:c}=a;return[h8(b),h8(c)]}catch(a){throw Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function kt(a){return ig(ks(a))}function ku(a){return ih(ks(a))}function kv(a,b=hs.get("feeMarginPercentage").maxFee){return ip(a,b)}function kw(a,b=hs.get("feeMarginPercentage").bounds,c){if(h2(a))return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},...c&&kn("0.8",c)&&{l1_data_gas:{max_amount:"0x0",max_price_per_unit:"0x0"}}};if(hH(a))return{l2_gas:{max_amount:h8(ip(a.l2_gas_consumed,b.l2_gas.max_amount)),max_price_per_unit:h8(ip(a.l2_gas_price,b.l2_gas.max_price_per_unit))},l1_gas:{max_amount:h8(ip(a.l1_gas_consumed,b.l1_gas.max_amount)),max_price_per_unit:h8(ip(a.l1_gas_price,b.l1_gas.max_price_per_unit))},l1_data_gas:{max_amount:h8(ip(a.l1_data_gas_consumed,b.l1_data_gas.max_amount)),max_price_per_unit:h8(ip(a.l1_data_gas_price,b.l1_data_gas.max_price_per_unit))}};return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:void 0!==a.data_gas_consumed&&void 0!==a.data_gas_price?h8(ip(BigInt(a.overall_fee)/BigInt(a.gas_price),b.l1_gas.max_amount)):h8(ip(a.gas_consumed,b.l1_gas.max_amount)),max_price_per_unit:h8(ip(a.gas_price,b.l1_gas.max_price_per_unit))}}}function kx(a){return{l1_gas_consumed:0n,l1_gas_price:0n,l1_data_gas_consumed:0n,l1_data_gas_price:0n,l2_gas_consumed:0n,l2_gas_price:0n,overall_fee:g2,unit:"FRI",suggestedMaxFee:g2,resourceBounds:kw(g2,void 0,a)}}function ky(a){if(a===hF.L1)return hG.L1;if(a===hF.L2)return hG.L2;throw Error("EDAM conversion")}function kz(a,b){let c=b?h8(b):void 0,d=h8(a);if(b&&!Object.values(hC).includes(c))throw Error(`providedVersion ${b} is not ETransactionVersion`);if(!Object.values(hC).includes(d))throw Error(`defaultVersion ${a} is not ETransactionVersion`);return b?c:d}function kA(a){if(!a)return;let b=h8(a);if(b===hC.V0)return hC.F0;if(b===hC.V1)return hC.F1;if(b===hC.V2)return hC.F2;if(b===hC.V3)return hC.F3;throw Error(`toFeeVersion: ${b} is not supported`)}function kB(a,b){return{tip:a.tip||0,paymasterData:a.paymasterData||[],accountDeploymentData:a.accountDeploymentData||[],nonceDataAvailabilityMode:a.nonceDataAvailabilityMode||hF.L1,feeDataAvailabilityMode:a.feeDataAvailabilityMode||hF.L1,resourceBounds:a.resourceBounds??kw(g2,void 0,b)}}function kC(a){return a===hC.F2?hC.F1:a===hC.V2?hC.V1:a}function kD(a){return gV(gT(dD(h8(a),!1)))}function kE(a){return"sierra_program"in(h3(a)?hU(a):a)}function kF(a){let b={...a};if(kE(a.contract)&&(!a.compiledClassHash&&a.casm&&(b.compiledClassHash=ki(a.casm)),!b.compiledClassHash))throw Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(b.classHash=a.classHash??kl(a.contract),!b.classHash)throw Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return b}gK({},{ZEROFee:()=>kx,compressProgram:()=>kp,decompressProgram:()=>kq,estimateFeeToBounds:()=>kw,estimatedFeeToMaxFee:()=>kv,formatSignature:()=>ks,getFullPublicKey:()=>kD,intDAM:()=>ky,randomAddress:()=>kr,reduceV2:()=>kC,signatureToDecimalArray:()=>kt,signatureToHexArray:()=>ku,toFeeVersion:()=>kA,toTransactionVersion:()=>kz,v3Details:()=>kB});var kG={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,ENTRYPOINT_NOT_FOUND:21,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,STORAGE_PROOF_NOT_SUPPORTED:42,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_RESOURCES_FOR_VALIDATE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63,INVALID_SUBSCRIPTION_ID:66,TOO_MANY_ADDRESSES_IN_FILTER:67,TOO_MANY_BLOCKS_BACK:68,COMPILATION_ERROR:100,INVALID_ADDRESS:150,TOKEN_NOT_SUPPORTED:151,INVALID_SIGNATURE:153,MAX_AMOUNT_TOO_LOW:154,CLASS_HASH_NOT_SUPPORTED:155,PAYMASTER_TRANSACTION_EXECUTION_ERROR:156,INVALID_TIME_BOUNDS:157,INVALID_DEPLOYMENT_DATA:158,INVALID_CLASS_HASH:159,INVALID_ID:160,UNKNOWN_ERROR:163},kH=class extends Error{name;constructor(a){super(a),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(a,b){let{setPrototypeOf:c}=Object;c?c(a,b):a.__proto__=b}(this,new.target.prototype),function(a,b=a.constructor){let{captureStackTrace:c}=Error;c&&c(a,b)}(this)}},kI=class extends kH{},kJ=class extends kI{constructor(a,b,c){super(`RPC: ${b} with params ${hW(c,null,2)}

      ${a.code}: ${a.message}: ${hW(a.data)}`),this.baseError=a,this.request={method:b,params:c}}request;get code(){return this.baseError.code}isType(a){return kG[a]===this.code}};function kK(){return gZ(gT(gB.utils.randomPrivateKey()))}function kL(a){ie(a,g2,2n**160n-1n,"Ethereum Address ");let b=gV(gU(h8(a)).padStart(40,"0"));return hY(!!b.match(/^(0x)?[0-9a-f]{40}$/),"Invalid Ethereum Address Format"),b}gK({},{ethRandomPrivateKey:()=>kK,validateAndParseEthAddress:()=>kL});var kM="undefined"!=typeof globalThis&&globalThis.fetch.bind(globalThis)||a.g.fetch.bind(a.g)||(()=>{throw new kI("'fetch()' not detected, use the 'baseFetch' constructor parameter to set it")});function kN(a){return new Promise(b=>{setTimeout(b,a)})}function kO(a){let b={...a};return delete b.sierra_program_debug_info,b.abi=kd(hW(a.abi)),b.sierra_program=kd(hW(a.sierra_program)),b.sierra_program=kp(b.sierra_program),b}function kP(a){let b=h3(a)?hU(a):a;return kE(a)?kO(b):{...b,..."program"in b&&{program:kp(b.program)}}}gK({},{Block:()=>kU,createSierraContractClass:()=>kO,getDefaultNodeUrl:()=>kQ,getDefaultNodes:()=>kR,getSupportedRpcVersions:()=>kS,parseContract:()=>kP,validBlockTags:()=>kT,wait:()=>kN});var kQ=(a,b=!1,c)=>{b||hu.info("Using default public node url, please provide nodeUrl in provider options!");let d=kR(c??hs.get("rpcVersion"))[a??hk.SN_SEPOLIA],e=Math.floor(Math.random()*d.length);return d[e]};function kR(a){let b={...hp};return Object.keys(b).forEach(function(c,d){b[c]=b[c].map(b=>`${b}${function(a){let[b,c]=a.replace(/^v/,"").split(".");return`v${b}_${c}`}(a)}`)}),b}function kS(){return[...new Set(Object.values(hn))]}var kT=Object.values(hB),kU=class{hash=null;number=null;tag=null;setIdentifier(a){if(h3(a))if(iB(a))this.number=parseInt(a,10);else if(h5(a))this.hash=a;else if(kT.includes(a))this.tag=a;else throw TypeError(`Block identifier unmanaged: ${a}`);else h2(a)?this.hash=h8(a):h0(a)?this.number=a:this.tag=hB.PENDING;if(h0(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}constructor(a){this.setIdentifier(a)}get queryIdentifier(){return null!==this.number?`blockNumber=${this.number}`:null!==this.hash?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(a){this.setIdentifier(a)}valueOf=()=>this.number;toString=()=>this.hash};gK({},{buildUDCCall:()=>kZ,fromCallsToExecuteCalldata:()=>kW,fromCallsToExecuteCalldata_cairo1:()=>kX,getExecuteCalldata:()=>kY,getVersionsByType:()=>k$,transformCallsToMulticallArrays:()=>kV});var kV=a=>{let b=[],c=[];return a.forEach(a=>{let d=jH.compile(a.calldata||[]);b.push({to:h6(a.contractAddress).toString(10),selector:h6(iu(a.entrypoint)).toString(10),data_offset:c.length.toString(),data_len:d.length.toString()}),c.push(...d)}),{callArray:b,calldata:jH.compile({calldata:c})}},kW=a=>{let{callArray:b,calldata:c}=kV(a);return[...jH.compile({callArray:b}),...c]},kX=a=>{let b=a.map(a=>({contractAddress:a.contractAddress,entrypoint:a.entrypoint,calldata:Array.isArray(a.calldata)&&"__compiled__"in a.calldata?a.calldata:jH.compile(a.calldata)}));return jH.compile({orderCalls:b})},kY=(a,b="0")=>"1"===b?kX(a):kW(a);function kZ(a,b){let c=[].concat(a).map(a=>{let{classHash:c,salt:d,unique:e=!0,constructorCalldata:f=[]}=a,g=jH.compile(f),h=d??kr();return{call:{contractAddress:hd.ADDRESS,entrypoint:hd.ENTRYPOINT,calldata:[c,h,im(e),g.length,...g]},address:kb(e?ee.pedersen(b,h):h,c,g,e?hd.ADDRESS:0)}});return{calls:c.map(a=>a.call),addresses:c.map(a=>a.address)}}function k$(a){return"fee"===a?{v1:hC.F1,v2:hC.F2,v3:hC.F3}:{v1:hC.V1,v2:hC.V2,v3:hC.V3}}var k_={headers:{"Content-Type":"application/json"},blockIdentifier:hB.PENDING,retries:200},k0=class{id="RPC071";channelSpecVersion=hn.v0_7_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(a){let{baseFetch:b,batch:c,blockIdentifier:d,chainId:e,headers:f,nodeUrl:g,retries:h,specVersion:i,transactionRetryIntervalFallback:j,waitMode:k}=a||{};Object.values(hk).includes(g)?this.nodeUrl=kQ(g,a?.default,this.channelSpecVersion):g?this.nodeUrl=g:this.nodeUrl=kQ(void 0,a?.default,this.channelSpecVersion),this.baseFetch=b||hs.get("fetch")||kM,this.blockIdentifier=d??k_.blockIdentifier,this.chainId=e,this.headers={...k_.headers,...f},this.retries=h??k_.retries,this.specVersion=i,this.transactionRetryIntervalFallback=j,this.waitMode=k??!1,this.requestId=0,"number"==typeof c&&(this.batchClient=new hX({nodeUrl:this.nodeUrl,headers:this.headers,interval:c,baseFetch:this.baseFetch})),hu.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(a){this.chainId=a}fetch(a,b,c=0){let d={id:c,jsonrpc:"2.0",method:a,...b&&{params:b}};return this.baseFetch(this.nodeUrl,{method:"POST",body:hW(d),headers:this.headers})}errorHandler(a,b,c,d){if(c)throw new kJ(c,a,b);if(d instanceof kI)throw d;if(d)throw Error(d.message)}async fetchEndpoint(a,b){try{if(this.batchClient){let{error:c,result:d}=await this.batchClient.fetch(a,b,this.requestId+=1);return this.errorHandler(a,b,c),d}let c=await this.fetch(a,b,this.requestId+=1),{error:d,result:e}=await c.json();return this.errorHandler(a,b,d),e}catch(c){throw this.errorHandler(a,b,c?.response?.data,c),c}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){let a=await this.fetchEndpoint("starknet_specVersion");if(kn(this.channelSpecVersion,a)||hu.error(hr.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!ko(a))throw new kI(`${hr.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=a}return this.specVersion}getNonceForAddress(a,b=this.blockIdentifier){let c=h8(a),d=new kU(b).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:c,block_id:d})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(a=this.blockIdentifier){let b=new kU(a).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:b})}getBlockWithTxs(a=this.blockIdentifier){let b=new kU(a).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:b})}getBlockWithReceipts(a=this.blockIdentifier){let b=new kU(a).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:b})}getBlockStateUpdate(a=this.blockIdentifier){let b=new kU(a).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:b})}getBlockTransactionsTraces(a=this.blockIdentifier){let b=new kU(a).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:b})}getBlockTransactionCount(a=this.blockIdentifier){let b=new kU(a).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:b})}getTransactionByHash(a){let b=h8(a);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:b})}getTransactionByBlockIdAndIndex(a,b){let c=new kU(a).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:c,index:b})}getTransactionReceipt(a){let b=h8(a);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:b})}getTransactionTrace(a){let b=h8(a);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:b})}getTransactionStatus(a){let b=h8(a);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:b})}simulateTransaction(a,b={}){let{blockIdentifier:c=this.blockIdentifier,skipValidate:d=!0,skipFeeCharge:e=!0}=b,f=new kU(c).identifier,g=[];return d&&g.push(C.ESimulationFlag.SKIP_VALIDATE),e&&g.push(C.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:f,transactions:a.map(a=>this.buildTransaction(a)),simulation_flags:g})}async waitForTransaction(a,b){let c,d=h8(a),{retries:e}=this,f=!1,g=!1,h=b?.retryInterval??this.transactionRetryIntervalDefault,i=b?.errorStates??[C.ETransactionStatus.REJECTED],j=b?.successStates??[C.ETransactionExecutionStatus.SUCCEEDED,C.ETransactionStatus.ACCEPTED_ON_L2,C.ETransactionStatus.ACCEPTED_ON_L1];for(;!f;){await kN(h);try{let a=(c=await this.getTransactionStatus(d)).execution_status,b=c.finality_status;if(!b)throw Error("waiting for transaction status");if(i.includes(a)||i.includes(b)){let d=`${a}: ${b}`,e=Error(d);throw e.response=c,g=!0,e}(j.includes(a)||j.includes(b))&&(f=!0)}catch(a){if(a instanceof Error&&g)throw a;if(e<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}e-=1}let k=null;for(;null===k;){try{k=await this.getTransactionReceipt(d)}catch(a){if(e<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}e-=1,await kN(h)}return k}getStorageAt(a,b,c=this.blockIdentifier){let d=h8(a),e=ia(b),f=new kU(c).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:d,key:e,block_id:f})}getClassHashAt(a,b=this.blockIdentifier){let c=h8(a),d=new kU(b).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:d,contract_address:c})}getClass(a,b=this.blockIdentifier){let c=h8(a),d=new kU(b).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:c,block_id:d})}getClassAt(a,b=this.blockIdentifier){let c=h8(a),d=new kU(b).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:d,contract_address:c})}async getEstimateFee(a,{blockIdentifier:b=this.blockIdentifier,skipValidate:c=!0}){let d=new kU(b).identifier,e={simulation_flags:c?[C.ESimulationFlag.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:a.map(a=>this.buildTransaction(a,"fee")),block_id:d,...e})}async invoke(a,b){let c;return km(b)?(c=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:C.ETransactionType.INVOKE,sender_address:a.contractAddress,calldata:jH.toHex(a.calldata),version:C.ETransactionVersion.V3,signature:ku(a.signature),nonce:h8(b.nonce),resource_bounds:b.resourceBounds,tip:h8(b.tip),paymaster_data:b.paymasterData.map(a=>h8(a)),account_deployment_data:b.accountDeploymentData.map(a=>h8(a)),nonce_data_availability_mode:b.nonceDataAvailabilityMode,fee_data_availability_mode:b.feeDataAvailabilityMode}}),hZ(!b.maxFee,()=>{hu.warn(hr.maxFeeInV3,{type:C.ETransactionType.INVOKE})})):(c=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:a.contractAddress,calldata:jH.toHex(a.calldata),type:C.ETransactionType.INVOKE,max_fee:h8(b.maxFee||0),version:C.ETransactionVersion.V1,signature:ku(a.signature),nonce:h8(b.nonce)}}),hu.warn(hr.legacyTxWarningMessage,{version:C.ETransactionVersion.V1,type:C.ETransactionType.INVOKE})),this.waitMode?this.waitForTransaction((await c).transaction_hash):c}async declare({contract:a,signature:b,senderAddress:c,compiledClassHash:d},e){let f;if(kE(a)||km(e))if(kE(a)&&!km(e))f=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:C.ETransactionType.DECLARE,contract_class:{sierra_program:kq(a.sierra_program),contract_class_version:a.contract_class_version,entry_points_by_type:a.entry_points_by_type,abi:a.abi},compiled_class_hash:d||"",version:C.ETransactionVersion.V2,max_fee:h8(e.maxFee||0),signature:ku(b),sender_address:c,nonce:h8(e.nonce)}}),hu.warn(hr.legacyTxWarningMessage,{version:C.ETransactionVersion.V2,type:C.ETransactionType.DECLARE});else if(kE(a)&&km(e))f=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:C.ETransactionType.DECLARE,sender_address:c,compiled_class_hash:d||"",version:C.ETransactionVersion.V3,signature:ku(b),nonce:h8(e.nonce),contract_class:{sierra_program:kq(a.sierra_program),contract_class_version:a.contract_class_version,entry_points_by_type:a.entry_points_by_type,abi:a.abi},resource_bounds:e.resourceBounds,tip:h8(e.tip),paymaster_data:e.paymasterData.map(a=>h8(a)),account_deployment_data:e.accountDeploymentData.map(a=>h8(a)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode}}),hZ(!e.maxFee,()=>{hu.warn(hr.maxFeeInV3,{type:C.ETransactionType.DECLARE})});else throw Error("declare unspotted parameters");else f=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:C.ETransactionType.DECLARE,contract_class:{program:a.program,entry_points_by_type:a.entry_points_by_type,abi:a.abi},version:C.ETransactionVersion.V1,max_fee:h8(e.maxFee||0),signature:ku(b),sender_address:c,nonce:h8(e.nonce)}}),hu.warn(hr.legacyTxWarningMessage,{version:C.ETransactionVersion.V1,type:C.ETransactionType.DECLARE});return this.waitMode?this.waitForTransaction((await f).transaction_hash):f}async deployAccount({classHash:a,constructorCalldata:b,addressSalt:c,signature:d},e){let f;return km(e)?(f=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:C.ETransactionType.DEPLOY_ACCOUNT,version:C.ETransactionVersion.V3,signature:ku(d),nonce:h8(e.nonce),contract_address_salt:h8(c||0),constructor_calldata:jH.toHex(b||[]),class_hash:h8(a),resource_bounds:e.resourceBounds,tip:h8(e.tip),paymaster_data:e.paymasterData.map(a=>h8(a)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode}}),hZ(!e.maxFee,()=>{hu.warn(hr.maxFeeInV3,{type:C.ETransactionType.DEPLOY_ACCOUNT})})):(f=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:jH.toHex(b||[]),class_hash:h8(a),contract_address_salt:h8(c||0),type:C.ETransactionType.DEPLOY_ACCOUNT,max_fee:h8(e.maxFee||0),version:C.ETransactionVersion.V1,signature:ku(d),nonce:h8(e.nonce)}}),hu.warn(hr.legacyTxWarningMessage,{version:C.ETransactionVersion.V1,type:C.ETransactionType.DEPLOY_ACCOUNT})),this.waitMode?this.waitForTransaction((await f).transaction_hash):f}callContract(a,b=this.blockIdentifier){let c=new kU(b).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:a.contractAddress,entry_point_selector:iu(a.entrypoint),calldata:jH.toHex(a.calldata)},block_id:c})}estimateMessageFee(a,b=this.blockIdentifier){let{from_address:c,to_address:d,entry_point_selector:e,payload:f}=a,g={from_address:kL(c),to_address:h8(d),entry_point_selector:iv(e),payload:il(f)},h=new kU(b).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:g,block_id:h})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(a){return this.fetchEndpoint("starknet_getEvents",{filter:a})}buildTransaction(a,b){let c,d=k$(b);if(km(a)?(c={signature:ku(a.signature),nonce:h8(a.nonce),resource_bounds:a.resourceBounds,tip:h8(a.tip),paymaster_data:a.paymasterData.map(a=>h8(a)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode,account_deployment_data:a.accountDeploymentData.map(a=>h8(a))},hZ(!a.maxFee,()=>{hu.warn(hr.maxFeeInV3,{type:a.type,versionType:b})})):(c={signature:ku(a.signature),nonce:h8(a.nonce),max_fee:h8(a.maxFee||0)},hu.warn(hr.legacyTxWarningMessage,{version:a.version,type:a.type})),a.type===hx.INVOKE)return{type:C.ETransactionType.INVOKE,sender_address:a.contractAddress,calldata:jH.toHex(a.calldata),version:h8(a.version||d.v3),...c};if(a.type===hx.DECLARE)return kE(a.contract)?{type:a.type,contract_class:{...a.contract,sierra_program:kq(a.contract.sierra_program)},compiled_class_hash:a.compiledClassHash||"",sender_address:a.senderAddress,version:h8(a.version||d.v3),...c}:{type:a.type,contract_class:a.contract,sender_address:a.senderAddress,version:h8(a.version||d.v1),...c};if(a.type===hx.DEPLOY_ACCOUNT){let{account_deployment_data:b,...e}=c;return{type:a.type,constructor_calldata:jH.toHex(a.constructorCalldata||[]),class_hash:h8(a.classHash),contract_address_salt:h8(a.addressSalt||0),version:h8(a.version||d.v3),...e}}throw Error("RPC buildTransaction received unknown TransactionType")}},k1={};gK(k1,{RpcChannel:()=>k3});var k2={headers:{"Content-Type":"application/json"},blockIdentifier:hB.PENDING,retries:200},k3=class{id="RPC081";channelSpecVersion=hn.v0_8_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(a){let{baseFetch:b,batch:c,blockIdentifier:d,chainId:e,headers:f,nodeUrl:g,retries:h,specVersion:i,transactionRetryIntervalFallback:j,waitMode:k}=a||{};Object.values(hk).includes(g)?this.nodeUrl=kQ(g,a?.default,this.channelSpecVersion):g?this.nodeUrl=g:this.nodeUrl=kQ(void 0,a?.default,this.channelSpecVersion),this.baseFetch=b||hs.get("fetch")||kM,this.blockIdentifier=d??k2.blockIdentifier,this.chainId=e,this.headers={...k2.headers,...f},this.retries=h??k2.retries,this.specVersion=i,this.transactionRetryIntervalFallback=j,this.waitMode=k??!1,this.requestId=0,"number"==typeof c&&(this.batchClient=new hX({nodeUrl:this.nodeUrl,headers:this.headers,interval:c,baseFetch:this.baseFetch})),hu.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(a){this.chainId=a}fetch(a,b,c=0){let d={id:c,jsonrpc:"2.0",method:a,...b&&{params:b}};return this.baseFetch(this.nodeUrl,{method:"POST",body:hW(d),headers:this.headers})}errorHandler(a,b,c,d){if(c)throw new kJ(c,a,b);if(d instanceof kI)throw d;if(d)throw Error(d.message)}async fetchEndpoint(a,b){try{if(this.batchClient){let{error:c,result:d}=await this.batchClient.fetch(a,b,this.requestId+=1);return this.errorHandler(a,b,c),d}let c=await this.fetch(a,b,this.requestId+=1),{error:d,result:e}=await c.json();return this.errorHandler(a,b,d),e}catch(c){throw this.errorHandler(a,b,c?.response?.data,c),c}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){let a=await this.fetchEndpoint("starknet_specVersion");if(kn(this.channelSpecVersion,a)||hu.error(hr.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!ko(a))throw new kI(`${hr.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=a}return this.specVersion}getMessagesStatus(a){let b=h8(a);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:b})}getStorageProof(a=[],b=[],c=[],d=this.blockIdentifier){let e=new kU(d).identifier,f=ih(a),g=ih(b);return this.fetchEndpoint("starknet_getStorageProof",{block_id:e,class_hashes:f,contract_addresses:g,contracts_storage_keys:c})}getCompiledCasm(a){let b=h8(a);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:b})}getNonceForAddress(a,b=this.blockIdentifier){let c=h8(a),d=new kU(b).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:c,block_id:d})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(a=this.blockIdentifier){let b=new kU(a).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:b})}getBlockWithTxs(a=this.blockIdentifier){let b=new kU(a).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:b})}getBlockWithReceipts(a=this.blockIdentifier){let b=new kU(a).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:b})}getBlockStateUpdate(a=this.blockIdentifier){let b=new kU(a).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:b})}getBlockTransactionsTraces(a=this.blockIdentifier){let b=new kU(a).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:b})}getBlockTransactionCount(a=this.blockIdentifier){let b=new kU(a).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:b})}getTransactionByHash(a){let b=h8(a);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:b})}getTransactionByBlockIdAndIndex(a,b){let c=new kU(a).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:c,index:b})}getTransactionReceipt(a){let b=h8(a);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:b})}getTransactionTrace(a){let b=h8(a);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:b})}getTransactionStatus(a){let b=h8(a);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:b})}simulateTransaction(a,b={}){let{blockIdentifier:c=this.blockIdentifier,skipValidate:d=!0,skipFeeCharge:e=!0}=b,f=new kU(c).identifier,g=[];return d&&g.push(au.ESimulationFlag.SKIP_VALIDATE),e&&g.push(au.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:f,transactions:a.map(a=>this.buildTransaction(a)),simulation_flags:g})}async waitForTransaction(a,b){let c,d=h8(a),{retries:e}=this,f=!1,g=!1,h=b?.retryInterval??this.transactionRetryIntervalDefault,i=b?.errorStates??[au.ETransactionStatus.REJECTED],j=b?.successStates??[au.ETransactionExecutionStatus.SUCCEEDED,au.ETransactionStatus.ACCEPTED_ON_L2,au.ETransactionStatus.ACCEPTED_ON_L1];for(;!f;){await kN(h);try{let a=(c=await this.getTransactionStatus(d)).execution_status,b=c.finality_status;if(!b)throw Error("waiting for transaction status");if(i.includes(a)||i.includes(b)){let d=`${a}: ${b}`,e=Error(d);throw e.response=c,g=!0,e}(j.includes(a)||j.includes(b))&&(f=!0)}catch(a){if(a instanceof Error&&g)throw a;if(e<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}e-=1}let k=null;for(;null===k;){try{k=await this.getTransactionReceipt(d)}catch(a){if(e<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}e-=1,await kN(h)}return k}getStorageAt(a,b,c=this.blockIdentifier){let d=h8(a),e=ia(b),f=new kU(c).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:d,key:e,block_id:f})}getClassHashAt(a,b=this.blockIdentifier){let c=h8(a),d=new kU(b).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:d,contract_address:c})}getClass(a,b=this.blockIdentifier){let c=h8(a),d=new kU(b).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:c,block_id:d})}getClassAt(a,b=this.blockIdentifier){let c=h8(a),d=new kU(b).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:d,contract_address:c})}async getEstimateFee(a,{blockIdentifier:b=this.blockIdentifier,skipValidate:c=!0}){let d=new kU(b).identifier,e={simulation_flags:c?[au.ESimulationFlag.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:a.map(a=>this.buildTransaction(a,"fee")),block_id:d,...e})}async invoke(a,b){let c;if(km(b))if(hI(b.resourceBounds))c=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:au.ETransactionType.INVOKE,sender_address:a.contractAddress,calldata:jH.toHex(a.calldata),version:au.ETransactionVersion.V3,signature:ku(a.signature),nonce:h8(b.nonce),resource_bounds:b.resourceBounds,tip:h8(b.tip),paymaster_data:b.paymasterData.map(a=>h8(a)),account_deployment_data:b.accountDeploymentData.map(a=>h8(a)),nonce_data_availability_mode:b.nonceDataAvailabilityMode,fee_data_availability_mode:b.feeDataAvailabilityMode}});else throw Error(hr.SWOldV3);else throw Error(hr.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await c).transaction_hash):c}async declare({contract:a,signature:b,senderAddress:c,compiledClassHash:d},e){let f;if(kE(a)&&km(e))if(hI(e.resourceBounds))f=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:au.ETransactionType.DECLARE,sender_address:c,compiled_class_hash:d||"",version:au.ETransactionVersion.V3,signature:ku(b),nonce:h8(e.nonce),contract_class:{sierra_program:kq(a.sierra_program),contract_class_version:a.contract_class_version,entry_points_by_type:a.entry_points_by_type,abi:a.abi},resource_bounds:e.resourceBounds,tip:h8(e.tip),paymaster_data:e.paymasterData.map(a=>h8(a)),account_deployment_data:e.accountDeploymentData.map(a=>h8(a)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode}});else throw Error(hr.SWOldV3);else throw Error(hr.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await f).transaction_hash):f}async deployAccount({classHash:a,constructorCalldata:b,addressSalt:c,signature:d},e){let f;if(km(e))if(hI(e.resourceBounds))f=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:au.ETransactionType.DEPLOY_ACCOUNT,version:au.ETransactionVersion.V3,signature:ku(d),nonce:h8(e.nonce),contract_address_salt:h8(c||0),constructor_calldata:jH.toHex(b||[]),class_hash:h8(a),resource_bounds:e.resourceBounds,tip:h8(e.tip),paymaster_data:e.paymasterData.map(a=>h8(a)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode}});else throw Error(hr.SWOldV3);else throw Error(hr.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await f).transaction_hash):f}callContract(a,b=this.blockIdentifier){let c=new kU(b).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:a.contractAddress,entry_point_selector:iu(a.entrypoint),calldata:jH.toHex(a.calldata)},block_id:c})}estimateMessageFee(a,b=this.blockIdentifier){let{from_address:c,to_address:d,entry_point_selector:e,payload:f}=a,g={from_address:kL(c),to_address:h8(d),entry_point_selector:iv(e),payload:il(f)},h=new kU(b).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:g,block_id:h})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(a){return this.fetchEndpoint("starknet_getEvents",{filter:a})}buildTransaction(a,b){let c,d=k$(b);if(km(a))c={signature:ku(a.signature),nonce:h8(a.nonce),resource_bounds:a.resourceBounds,tip:h8(a.tip),paymaster_data:a.paymasterData.map(a=>h8(a)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode,account_deployment_data:a.accountDeploymentData.map(a=>h8(a))};else throw Error("v0,v1,v2 tx are not supported on RPC 0.8");if(a.type===hx.INVOKE)return{type:au.ETransactionType.INVOKE,sender_address:a.contractAddress,calldata:jH.toHex(a.calldata),version:h8(a.version||d.v3),...c};if(a.type===hx.DECLARE){if(!kE(a.contract))throw hu.error("Cairo 0 -  non Sierra v1 tx are not supported"),Error("Declaring non Sierra contract using RPC 0.8");return{type:a.type,contract_class:{...a.contract,sierra_program:kq(a.contract.sierra_program)},compiled_class_hash:a.compiledClassHash||"",sender_address:a.senderAddress,version:h8(a.version||d.v3),...c}}if(a.type===hx.DEPLOY_ACCOUNT){let{account_deployment_data:b,...e}=c;return{type:a.type,constructor_calldata:jH.toHex(a.constructorCalldata||[]),class_hash:h8(a.classHash),contract_address_salt:h8(a.addressSalt||0),version:h8(a.version||d.v3),...e}}throw Error("RPC buildTransaction received unknown TransactionType")}},k4=("undefined"!=typeof WebSocket&&WebSocket||"undefined"!=typeof globalThis&&globalThis.WebSocket||a.g.WebSocket,class{margin;constructor(a){this.margin=a}estimatedFeeToMaxFee(a){return kv(a,this.margin?.maxFee)}estimateFeeToBounds(a){return kw(a,this.margin?.bounds)}parseGetBlockResponse(a){return a}parseTransactionReceipt(a){return a}parseFeeEstimateResponse(a){let b=a[0];return{overall_fee:h6(b.overall_fee),unit:b.unit,l1_gas_consumed:h7(b.l1_gas_consumed)??h7(b.gas_consumed)??0n,l1_gas_price:h7(b.l1_gas_price)??h7(b.gas_price)??0n,l2_gas_consumed:h7(b.l2_gas_consumed)??void 0,l2_gas_price:h7(b.l2_gas_price)??void 0,l1_data_gas_consumed:h7(b.l1_data_gas_consumed)??h7(b.data_gas_consumed)??0n,l1_data_gas_price:h7(b.l1_data_gas_price)??h7(b.gas_price)??0n,suggestedMaxFee:this.estimatedFeeToMaxFee(b.overall_fee),resourceBounds:this.estimateFeeToBounds(b)}}parseFeeEstimateBulkResponse(a){return a.map(a=>({overall_fee:h6(a.overall_fee),unit:a.unit,l1_gas_consumed:h7(a.l1_gas_consumed)??h7(a.gas_consumed)??0n,l1_gas_price:h7(a.l1_gas_price)??h7(a.gas_price)??0n,l2_gas_consumed:h7(a.l2_gas_consumed)??void 0,l2_gas_price:h7(a.l2_gas_price)??void 0,l1_data_gas_consumed:h7(a.l1_data_gas_consumed)??h7(a.data_gas_consumed)??0n,l1_data_gas_price:h7(a.l1_data_gas_price)??h7(a.gas_price)??0n,suggestedMaxFee:this.estimatedFeeToMaxFee(a.overall_fee),resourceBounds:this.estimateFeeToBounds(a)}))}parseSimulateTransactionResponse(a){return a.map(a=>({...a,suggestedMaxFee:this.estimatedFeeToMaxFee(a.fee_estimation.overall_fee),resourceBounds:this.estimateFeeToBounds(a.fee_estimation)}))}parseContractClassResponse(a){return{...a,abi:h3(a.abi)?JSON.parse(a.abi):a.abi}}parseL1GasPriceResponse(a){return a.l1_gas_price.price_in_wei}}),k5=class a{statusReceipt;value;constructor(b){for(let[c]of([this.statusReceipt,this.value]=a.isSuccess(b)?["success",b]:a.isReverted(b)?["reverted",b]:["error",Error("Unknown response type")],Object.entries(this)))Object.defineProperty(this,c,{enumerable:!1});for(let[a,c]of Object.entries(b))Object.defineProperty(this,a,{enumerable:!0,writable:!1,value:c})}match(a){return this.statusReceipt in a?a[this.statusReceipt](this.value):a._()}isSuccess(){return"success"===this.statusReceipt}isReverted(){return"reverted"===this.statusReceipt}isError(){return"error"===this.statusReceipt}static isSuccess(a){return a.execution_status===hz.SUCCEEDED}static isReverted(a){return a.execution_status===hz.REVERTED}};gK({},{encodeData:()=>lj,encodeType:()=>lg,encodeValue:()=>li,getDependencies:()=>lf,getMessageHash:()=>ll,getStructHash:()=>lk,getTypeHash:()=>lh,isMerkleTreeType:()=>le,prepareSelector:()=>ld,validateTypedData:()=>lc,verifyMessage:()=>lm}),gK({},{MerkleTree:()=>k6,proofMerklePath:()=>function a(b,c,d,e=j6){if(0===d.length)return b===c;let[f,...g]=d;return a(b,k6.hash(c,f,e),g,e)}});var k6=class a{leaves;branches=[];root;hashMethod;constructor(a,b=j6){this.hashMethod=b,this.leaves=a,this.root=this.build(a)}build(b){if(1===b.length)return b[0];b.length!==this.leaves.length&&this.branches.push(b);let c=[];for(let d=0;d<b.length;d+=2)d+1===b.length?c.push(a.hash(b[d],"0x0",this.hashMethod)):c.push(a.hash(b[d],b[d+1],this.hashMethod));return this.build(c)}static hash(a,b,c=j6){let[d,e]=[BigInt(a),BigInt(b)].sort((a,b)=>a>=b?1:-1);return c(d,e)}getProof(b,c=this.leaves,d=[]){let e=c.indexOf(b);if(-1===e)throw Error("leaf not found");if(1===c.length)return d;let f=e%2==0,g=(f?c[e+1]:c[e-1])??"0x0",h=[...d,g],i=this.leaves.length===c.length?-1:this.branches.findIndex(a=>a.length===c.length),j=this.branches[i+1]??[this.root];return this.getProof(a.hash(f?b:g,f?g:b,this.hashMethod),j,h)}},k7={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},k8={[y.ACTIVE]:{domain:"StarknetDomain",hashMethod:ka,hashMerkleMethod:j7,escapeTypeString:a=>`"${a}"`,presetTypes:k7},[y.LEGACY]:{domain:"StarkNetDomain",hashMethod:j9,hashMerkleMethod:j6,escapeTypeString:a=>a,presetTypes:{}}};function k9(a,b,{min:c,max:d}){let e=BigInt(a);hY(e>=c&&e<=d,`${e} (${b}) is out of bounds [${c}, ${d}]`)}function la({types:a,domain:b}){return k8[y.ACTIVE].domain in a&&b.revision?.toString()===y.ACTIVE?y.ACTIVE:k8[y.LEGACY].domain in a&&(b.revision??y.LEGACY)===y.LEGACY?y.LEGACY:void 0}function lb(a){try{return h8(a)}catch(b){if(h3(a))return h8(iG(a));throw Error(`Invalid BigNumberish: ${a}`)}}function lc(a){return!!(a.message&&a.primaryType&&a.types&&la(a))}function ld(a){return h5(a)?a:iu(a)}function le(a){return"merkletree"===a.type}function lf(a,b,c=[],d="",e=y.LEGACY){let f=[b];return"*"===b[b.length-1]?f=[b.slice(0,-1)]:e===y.ACTIVE&&("enum"===b?f=[d]:b.match(/^\(.*\)$/)&&(f=b.slice(1,-1).split(",").map(a=>"*"===a[a.length-1]?a.slice(0,-1):a))),f.filter(b=>!c.includes(b)&&a[b]).reduce((b,c)=>[...b,...[c,...a[c].reduce((b,c)=>[...b,...lf(a,c.type,b,c.contains,e).filter(a=>!b.includes(a))],[])].filter(a=>!b.includes(a))],[])}function lg(a,b,c=y.LEGACY){let d=c===y.ACTIVE?{...a,...k8[c].presetTypes}:a,[e,...f]=lf(d,b,void 0,void 0,c),g=e?[e,...f.sort()]:[],h=k8[c].escapeTypeString;return g.map(a=>{let b=d[a].map(a=>{let b="enum"===a.type&&c===y.ACTIVE?a.contains:a.type,d=b.match(/^\(.*\)$/)?`(${b.slice(1,-1).split(",").map(a=>a?h(a):a).join(",")})`:h(b);return`${h(a.name)}:${d}`});return`${h(a)}(${b})`}).join("")}function lh(a,b,c=y.LEGACY){return iu(lg(a,b,c))}function li(a,b,c,d={},e=y.LEGACY){if(a[b])return[b,lk(a,b,c,e)];if(k8[e].presetTypes[b])return[b,lk(k8[e].presetTypes,b,c,e)];if(b.endsWith("*")){let d=c.map(c=>li(a,b.slice(0,-1),c,void 0,e)[1]);return[b,k8[e].hashMethod(d)]}switch(b){case"enum":if(e===y.ACTIVE){let[f,g]=Object.entries(c)[0],h=a[d.parent].find(a=>a.name===d.key),i=a[h.contains],j=i.find(a=>a.name===f),k=i.indexOf(j),l=j.type.slice(1,-1).split(",").map((b,c)=>b?li(a,b,g[c],void 0,e)[1]:b);return[b,k8[e].hashMethod([k,...l])]}return[b,lb(c)];case"merkletree":{let b=function(a,b){if(b.parent&&b.key){let c=a[b.parent].find(a=>a.name===b.key);if(!le(c))throw Error(`${b.key} is not a merkle tree`);if(c.contains.endsWith("*"))throw Error(`Merkle tree contain property must not be an array but was given ${b.key}`);return c.contains}return"raw"}(a,d),{root:f}=new k6(c.map(c=>li(a,b,c,void 0,e)[1]),k8[e].hashMerkleMethod);return["felt",f]}case"selector":return["felt",ld(c)];case"string":if(e===y.ACTIVE){let a=iJ(c),d=[a.data.length,...a.data,a.pending_word,a.pending_word_len];return[b,k8[e].hashMethod(d)]}return[b,lb(c)];case"i128":if(e===y.ACTIVE){let a=BigInt(c);return k9(a,b,hb),[b,lb(a<0n?g6+a:a)]}return[b,lb(c)];case"timestamp":case"u128":return e===y.ACTIVE&&k9(c,b,hc),[b,lb(c)];case"felt":case"shortstring":return e===y.ACTIVE&&k9(lb(c),b,ha),[b,lb(c)];case"ClassHash":case"ContractAddress":return e===y.ACTIVE&&k9(c,b,ha),[b,lb(c)];case"bool":return e===y.ACTIVE&&hY(h1(c),`Type mismatch for ${b} ${c}`),[b,lb(c)];default:if(e===y.ACTIVE)throw Error(`Unsupported type: ${b}`);return[b,lb(c)]}}function lj(a,b,c,d=y.LEGACY){let[e,f]=(a[b]??k8[d].presetTypes[b]).reduce(([e,f],g)=>{if(void 0===c[g.name]||null===c[g.name]&&"enum"!==g.type)throw Error(`Cannot encode data: missing data for '${g.name}'`);let h=c[g.name],i={parent:b,key:g.name},[j,k]=li(a,g.type,h,i,d);return[[...e,j],[...f,k]]},[["felt"],[lh(a,b,d)]]);return[e,f]}function lk(a,b,c,d=y.LEGACY){return k8[d].hashMethod(lj(a,b,c,d)[1])}function ll(a,b){if(!lc(a))throw Error("Typed data does not match JSON schema");let c=la(a),{domain:d,hashMethod:e}=k8[c];return e([iG("StarkNet Message"),lk(a.types,d,a.domain,c),b,lk(a.types,a.primaryType,a.message,c)])}function lm(a,b,c,d){let e=lc(a);if(!ir(a)&&!e)throw Error("message has a wrong format.");if(e&&void 0===d)throw Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(e&&!ir(d))throw Error("accountAddress shall be a BigNumberish");let f=e?ll(a,d):h8(a),g=Array.isArray(b)?new ee.Signature(BigInt(b[0]),BigInt(b[1])):b,h=h8(c);return ee.verify(g,f,h)}var ln=class{responseParser;channel;constructor(a){if(a&&"channel"in a)this.channel=a.channel,this.responseParser="responseParser"in a?a.responseParser:new k4;else{if(a&&a.specVersion)if(kn("0.8",a.specVersion))this.channel=new k1.RpcChannel({...a,waitMode:!1});else if(kn("0.7",a.specVersion))this.channel=new hv.RpcChannel({...a,waitMode:!1});else throw Error(`unsupported channel for spec version: ${a.specVersion}`);else if(kn("0.8",hs.get("rpcVersion")))this.channel=new k1.RpcChannel({...a,waitMode:!1});else if(kn("0.7",hs.get("rpcVersion")))this.channel=new hv.RpcChannel({...a,waitMode:!1});else throw Error("unable to define spec version for channel");this.responseParser=new k4(a?.feeMarginPercentage)}}static async create(a){let b=new hv.RpcChannel({...a}),c=await b.getSpecVersion();if(ko(c)||hu.warn(`Using incompatible node spec version ${c}`),kn("0.7",c))return new this({...a,specVersion:hn.v0_7_1});if(kn("0.8",c))return new this({...a,specVersion:hn.v0_8_1});throw new kI(`Provided RPC node specification version ${c} is not compatible with the SDK. SDK supported RPC versions ${Object.keys(hn).toString()}`)}fetch(a,b,c=0){return this.channel.fetch(a,b,c)}async getChainId(){return this.channel.getChainId()}readSpecVersion(){return this.channel.readSpecVersion()}async getSpecVersion(){return this.channel.getSpecVersion()}setUpSpecVersion(){return this.channel.setUpSpecVersion()}async getNonceForAddress(a,b){return this.channel.getNonceForAddress(a,b)}async getBlock(a){return this.channel.getBlockWithTxHashes(a).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(a){return this.channel.getBlockWithTxHashes(a)}async getBlockWithTxs(a){return this.channel.getBlockWithTxs(a)}async waitForBlock(a="pending",b=5e3){if(a===hB.LATEST)return;let c=await this.getBlockNumber(),d=a===hB.PENDING?c+1:Number(h8(a));if(d<=c)return;let{retries:e}=this.channel,f=e,g=!1;for(;!g;)if(await this.getBlockNumber()===d?g=!0:await kN(b),(f-=1)<=0)throw Error(`waitForBlock() timed-out after ${e} tries.`)}async getL1GasPrice(a){return this.channel.getBlockWithTxHashes(a).then(this.responseParser.parseL1GasPriceResponse)}async getL1MessageHash(a){let b=await this.channel.getTransactionByHash(a);hY("L1_HANDLER"===b.type,"This L2 transaction is not a L1 message.");let{calldata:c,contract_address:d,entry_point_selector:e,nonce:f}=b;return iw([c[0],d,f,e,c.length-1,...c.slice(1)])}async getBlockWithReceipts(a){return this.channel.getBlockWithReceipts(a)}getStateUpdate=this.getBlockStateUpdate;async getBlockStateUpdate(a){return this.channel.getBlockStateUpdate(a)}async getBlockTransactionsTraces(a){return this.channel.getBlockTransactionsTraces(a)}async getBlockTransactionCount(a){return this.channel.getBlockTransactionCount(a)}async getTransaction(a){return this.channel.getTransactionByHash(a)}async getTransactionByHash(a){return this.channel.getTransactionByHash(a)}async getTransactionByBlockIdAndIndex(a,b){return this.channel.getTransactionByBlockIdAndIndex(a,b)}async getTransactionReceipt(a){let b=await this.channel.getTransactionReceipt(a);return new k5(this.responseParser.parseTransactionReceipt(b))}async getTransactionTrace(a){return this.channel.getTransactionTrace(a)}async getTransactionStatus(a){return this.channel.getTransactionStatus(a)}async getSimulateTransaction(a,b){return this.channel.simulateTransaction(a,b).then(a=>this.responseParser.parseSimulateTransactionResponse(a))}async waitForTransaction(a,b){return new k5(await this.channel.waitForTransaction(a,b))}async getStorageAt(a,b,c){return this.channel.getStorageAt(a,b,c)}async getClassHashAt(a,b){return this.channel.getClassHashAt(a,b)}async getClassByHash(a){return this.getClass(a)}async getClass(a,b){return this.channel.getClass(a,b).then(this.responseParser.parseContractClassResponse)}async getClassAt(a,b){return this.channel.getClassAt(a,b).then(this.responseParser.parseContractClassResponse)}async getContractVersion(a,b,{blockIdentifier:c=this.channel.blockIdentifier,compiler:d=!0}={}){let e;if(a)e=await this.getClassAt(a,c);else if(b)e=await this.getClass(b,c);else throw Error("getContractVersion require contractAddress or classHash");return kE(e)?d?{cairo:"1",compiler:jc(e.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getInvokeEstimateFee(a,b,c,d){return this.channel.getEstimateFee([{type:hx.INVOKE,...a,...b}],{blockIdentifier:c,skipValidate:d}).then(a=>this.responseParser.parseFeeEstimateResponse(a))}async getDeclareEstimateFee(a,b,c,d){return this.channel.getEstimateFee([{type:hx.DECLARE,...a,...b}],{blockIdentifier:c,skipValidate:d}).then(a=>this.responseParser.parseFeeEstimateResponse(a))}async getDeployAccountEstimateFee(a,b,c,d){return this.channel.getEstimateFee([{type:hx.DEPLOY_ACCOUNT,...a,...b}],{blockIdentifier:c,skipValidate:d}).then(a=>this.responseParser.parseFeeEstimateResponse(a))}async getEstimateFeeBulk(a,b){return this.channel.getEstimateFee(a,b).then(a=>this.responseParser.parseFeeEstimateBulkResponse(a))}async invokeFunction(a,b){return this.channel.invoke(a,b)}async declareContract(a,b){return this.channel.declare(a,b)}async deployAccountContract(a,b){return this.channel.deployAccount(a,b)}async callContract(a,b){return this.channel.callContract(a,b)}async estimateMessageFee(a,b){return this.channel.estimateMessageFee(a,b)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(a){return this.channel.getEvents(a)}async verifyMessageInStarknet(a,b,c,d,e){let f,g=lc(a);if(!ir(a)&&!g)throw Error("message has a wrong format.");if(!ir(c))throw Error("accountAddress shall be a BigNumberish");let h=g?ll(a,c):h8(a),i=e||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","0x617267656e742f696e76616c69642d7369676e6174757265","is invalid, with respect to the public key","0x697320696e76616c6964","INVALID_SIG","0x494e56414c49445f534947"]};for(let a of d?[d]:["isValidSignature","is_valid_signature"])try{let d=await this.callContract({contractAddress:h8(c),entrypoint:a,calldata:jH.compile({hash:h6(h).toString(),signature:ks(b)})});if(i.nokResponse.includes(d[0].toString()))return!1;if(0===i.okResponse.length||i.okResponse.includes(d[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(a){if(i.error.some(b=>a.message.includes(b)))return!1;f=a}throw Error(`Signature verification Error: ${f}`)}async isClassDeclared(a,b){let c;if(!a.classHash&&"contract"in a)c=kF(a).classHash;else if(a.classHash)c=a.classHash;else throw Error("contractClassIdentifier type not satisfied");try{return await this.getClass(c,b) instanceof Object}catch(a){if(a instanceof kI)return!1;throw a}}async prepareInvocations(a){let b=[];for(let c of a)c.type===hx.DECLARE?await this.isClassDeclared("payload"in c?c.payload:c)||b.unshift(c):b.push(c);return b}async getL1MessagesStatus(a){if(this.channel instanceof k1.RpcChannel)return this.channel.getMessagesStatus(a);throw new kI("Unsupported method for RPC version")}async getStorageProof(a,b,c,d){if(this.channel instanceof k1.RpcChannel)return this.channel.getStorageProof(a,b,c,d);throw new kI("Unsupported method for RPC version")}async getCompiledCasm(a){if(this.channel instanceof k1.RpcChannel)return this.channel.getCompiledCasm(a);throw new kI("Unsupported method for RPC version")}};gK({},{StarknetIdContract:()=>lx,StarknetIdIdentityContract:()=>lz,StarknetIdMulticallContract:()=>lB,StarknetIdPfpContract:()=>lF,StarknetIdPopContract:()=>lH,StarknetIdVerifierContract:()=>lD,dynamicCallData:()=>lL,dynamicFelt:()=>lK,execution:()=>lJ,getStarknetIdContract:()=>ly,getStarknetIdIdentityContract:()=>lA,getStarknetIdMulticallContract:()=>lC,getStarknetIdPfpContract:()=>lG,getStarknetIdPopContract:()=>lI,getStarknetIdVerifierContract:()=>lE,isStarkDomain:()=>lM,useDecoded:()=>lv,useEncoded:()=>lw});var lo="abcdefghijklmnopqrstuvwxyz0123456789-",lp=BigInt(lo.length+1),lq="",lr=BigInt(lo.length),ls=BigInt(lq.length),lt=BigInt(lq.length+1);function lu(a){let b=0;for(;a.endsWith(lq[lq.length-1]);)a=a.substring(0,a.length-1),b+=1;return[a,b]}function lv(a){let b="";return(a.forEach(a=>{for(;a!==g2;){let c=a%lp;if(a/=lp,c===BigInt(lo.length)){let c=a/lt;if(c===g2){let d=a%lt;a=c,d===g2?b+=lo[0]:b+=lq[Number(d)-1]}else b+=lq[Number(a%ls)],a/=ls}else b+=lo[Number(c)]}let[c,d]=lu(b);d&&(b=c+(d%2==0?lq[lq.length-1].repeat(d/2-1)+lq[0]+lo[1]:lq[lq.length-1].repeat((d-1)/2+1))),b+="."}),b)?b.concat("stark"):b}function lw(a){let b=BigInt(0),c=BigInt(1);if(a.endsWith(lq[0]+lo[1])){let[b,c]=lu(a.substring(0,a.length-2));a=b+lq[lq.length-1].repeat(2*(c+1))}else{let[b,c]=lu(a);c&&(a=b+lq[lq.length-1].repeat(1+2*(c-1)))}for(let d=0;d<a.length;d+=1){let e=a[d],f=lo.indexOf(e),g=BigInt(lo.indexOf(e));-1!==f?d===a.length-1&&a[d]===lo[0]?(b+=c*lr,c*=lp*lp):(b+=c*g,c*=lp):-1!==lq.indexOf(e)&&(b+=c*lr,c*=lp,b+=c*BigInt(+(d===a.length-1)+lq.indexOf(e)),c*=ls)}return b}var lx={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function ly(a){switch(a){case hl.SN_MAIN:return lx.MAINNET;case hl.SN_SEPOLIA:return lx.TESTNET_SEPOLIA;default:throw Error("Starknet.id is not yet deployed on this network")}}var lz={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function lA(a){switch(a){case hl.SN_MAIN:return lz.MAINNET;case hl.SN_SEPOLIA:return lz.TESTNET_SEPOLIA;default:throw Error("Starknet.id verifier contract is not yet deployed on this network")}}var lB="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function lC(a){switch(a){case hl.SN_MAIN:case hl.SN_SEPOLIA:return lB;default:throw Error("Starknet.id multicall contract is not yet deployed on this network")}}var lD={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function lE(a){switch(a){case hl.SN_MAIN:return lD.MAINNET;case hl.SN_SEPOLIA:return lD.TESTNET_SEPOLIA;default:throw Error("Starknet.id verifier contract is not yet deployed on this network")}}var lF={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function lG(a){switch(a){case hl.SN_MAIN:return lF.MAINNET;case hl.SN_SEPOLIA:return lF.TESTNET_SEPOLIA;default:throw Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var lH={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function lI(a){switch(a){case hl.SN_MAIN:return lH.MAINNET;case hl.SN_SEPOLIA:return lH.TESTNET_SEPOLIA;default:throw Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function lJ(a,b,c){return new jh({Static:a,IfEqual:b?jf(b[0],b[1],b[2]):void 0,IfNotEqual:c?jf(c[0],c[1],c[2]):void 0})}function lK(a,b){return new jh({Hardcoded:a,Reference:b?jf(b[0],b[1]):void 0})}function lL(a,b,c){return new jh({Hardcoded:a,Reference:b?jf(b[0],b[1]):void 0,ArrayReference:c?jf(c[0],c[1]):void 0})}function lM(a){return/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\.)*[a-z0-9-]{1,48}\.stark$/.test(a)}var lN=class a{async getStarkName(b,c){return a.getStarkName(this,b,c)}async getAddressFromStarkName(b,c){return a.getAddressFromStarkName(this,b,c)}async getStarkProfile(b,c,d,e,f,g,h){return a.getStarkProfile(this,b,c,d,e,f,g,h)}static async getStarkName(a,b,c){let d=await a.getChainId(),e=c??ly(d);try{let c=(await a.callContract({contractAddress:e,entrypoint:"address_to_domain",calldata:jH.compile({address:b,hint:[]})})).map(a=>BigInt(a)).slice(1),d=lv(c);if(!d)throw Error("Starkname not found");return d}catch(a){if(a instanceof Error&&"Starkname not found"===a.message)throw a;throw Error("Could not get stark name")}}static async getAddressFromStarkName(a,b,c){let d=b.endsWith(".stark")?b:`${b}.stark`;if(!lM(d))throw Error("Invalid domain, must be a valid .stark domain");let e=await a.getChainId(),f=c??ly(e);try{let b=d.replace(".stark","").split(".").map(a=>lw(a).toString(10));return(await a.callContract({contractAddress:f,entrypoint:"domain_to_address",calldata:jH.compile({domain:b,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(a,b,c,d,e,f,g,h){let i=await a.getChainId(),j=c??ly(i),k=d??lA(i),l=e??lE(i),m=f??lG(i),n=g??lI(i),o=h??lC(i);try{let c=[{execution:lJ({}),to:lL(j),selector:lL(iu("address_to_domain")),calldata:[lL(b),lL("0")]},{execution:lJ({}),to:lK(j),selector:lK(iu("domain_to_id")),calldata:[lL(void 0,void 0,[0,0])]},{execution:lJ({}),to:lK(k),selector:lK(iu("get_verifier_data")),calldata:[lL(void 0,[1,0]),lL(iG("twitter")),lL(l),lL("0")]},{execution:lJ({}),to:lK(k),selector:lK(iu("get_verifier_data")),calldata:[lL(void 0,[1,0]),lL(iG("github")),lL(l),lL("0")]},{execution:lJ({}),to:lK(k),selector:lK(iu("get_verifier_data")),calldata:[lL(void 0,[1,0]),lL(iG("discord")),lL(l),lL("0")]},{execution:lJ({}),to:lK(k),selector:lK(iu("get_verifier_data")),calldata:[lL(void 0,[1,0]),lL(iG("proof_of_personhood")),lL(n),lL("0")]},{execution:lJ({}),to:lK(k),selector:lK(iu("get_verifier_data")),calldata:[lL(void 0,[1,0]),lL(iG("nft_pp_contract")),lL(m),lL("0")]},{execution:lJ({}),to:lK(k),selector:lK(iu("get_extended_verifier_data")),calldata:[lL(void 0,[1,0]),lL(iG("nft_pp_id")),lL("2"),lL(m),lL("0")]},{execution:lJ(void 0,void 0,[6,0,0]),to:lK(void 0,[6,0]),selector:lK(iu("tokenURI")),calldata:[lL(void 0,[7,1]),lL(void 0,[7,2])]}],d=await a.callContract({contractAddress:o,entrypoint:"aggregate",calldata:jH.compile({calls:c})});if(Array.isArray(d)){let a=parseInt(d[0],16),b=[],c=1;for(let e=0;e<a;e+=1)if(c<d.length){let a=parseInt(d[c],16);c+=1;let e=d.slice(c,c+a);b.push(e),c+=a}else break;let e=lv(b[0].slice(1).map(a=>BigInt(a))),f="0x0"!==b[2][0]?BigInt(b[2][0]).toString():void 0,g="0x0"!==b[3][0]?BigInt(b[3][0]).toString():void 0,h="0x0"!==b[4][0]?BigInt(b[4][0]).toString():void 0,i="0x1"===b[5][0],j=("0x9"===d[0]?b[8].slice(1).map(a=>iH(a)).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(b[1][0]).toString()}`;return{name:e,twitter:f,github:g,discord:h,proofOfPersonhood:i,profilePicture:j}}throw Error("Error while calling aggregate function")}catch(a){if(a instanceof Error)throw a;throw Error("Could not get user stark profile data from address")}}},lO=class extends(0,gF.Mixin)(ln,lN){},lP=new ln({default:!0}),lQ=class{pk;constructor(a=ee.utils.randomPrivateKey()){this.pk=a instanceof Uint8Array?gT(a):h8(a)}async getPubKey(){return ee.getStarkKey(this.pk)}async signMessage(a,b){let c=ll(a,b);return this.signRaw(c)}async signTransaction(a,b){let c,d=kY(a,b.cairoVersion);if(Object.values(gM.ETransactionVersion2).includes(b.version))c=j3({...b,senderAddress:b.walletAddress,compiledCalldata:d,version:b.version});else if(Object.values(gM.ETransactionVersion3).includes(b.version))c=j3({...b,senderAddress:b.walletAddress,compiledCalldata:d,version:b.version,nonceDataAvailabilityMode:ky(b.nonceDataAvailabilityMode),feeDataAvailabilityMode:ky(b.feeDataAvailabilityMode)});else throw Error("unsupported signTransaction version");return this.signRaw(c)}async signDeployAccountTransaction(a){let b,c=jH.compile(a.constructorCalldata);if(Object.values(gM.ETransactionVersion2).includes(a.version))b=j5({...a,salt:a.addressSalt,constructorCalldata:c,version:a.version});else if(Object.values(gM.ETransactionVersion3).includes(a.version))b=j5({...a,salt:a.addressSalt,compiledConstructorCalldata:c,version:a.version,nonceDataAvailabilityMode:ky(a.nonceDataAvailabilityMode),feeDataAvailabilityMode:ky(a.feeDataAvailabilityMode)});else throw Error("unsupported signDeployAccountTransaction version");return this.signRaw(b)}async signDeclareTransaction(a){let b;if(Object.values(gM.ETransactionVersion2).includes(a.version))b=j4({...a,version:a.version});else if(Object.values(gM.ETransactionVersion3).includes(a.version))b=j4({...a,version:a.version,nonceDataAvailabilityMode:ky(a.nonceDataAvailabilityMode),feeDataAvailabilityMode:ky(a.feeDataAvailabilityMode)});else throw Error("unsupported signDeclareTransaction version");return this.signRaw(b)}async signRaw(a){return ee.sign(a,this.pk)}},lR={};function lS(a){return new iO(a).toBigInt()}function lT(a){return iO.is(a)}function lU(a){return new iO(a).toUint256HexString()}function lV(a){return"event"===a.type}function lW(a){return ja(a)?function(a){let b=a.filter(a=>lV(a)&&"struct"===a.kind),c=a.filter(a=>lV(a)&&"enum"===a.kind);return b.reduce((a,b)=>{let d=[],{name:e}=b,f=!1,g=a=>a.type===e;for(;;){let a=c.find(a=>a.variants.some(g));if(h_(a))break;let b=a.variants.find(g);d.unshift(b.name),"flat"===b.kind&&(f=!0),e=a.name}if(0===d.length)throw Error("inconsistency in ABI events definition.");f&&(d=[d[d.length-1]]);let h=d.pop(),i={[gV(ee.keccak(gQ(h)).toString(16))]:b};for(;d.length>0;)i={[gV(ee.keccak(gQ(d.pop())).toString(16))]:i};return function a(b,c){let d={...b};return h4(b)&&h4(c)&&Object.keys(c).forEach(e=>{h4(c[e])&&e in b?d[e]=a(b[e],c[e]):Object.assign(d,{[e]:c[e]})}),d}(a,i={...i})},{})}(a):a.filter(a=>"event"===a.type).reduce((a,b)=>{let c=b.name,d={...b};return d.name=c,{...a,[gV(ee.keccak(gQ(c)).toString(16))]:d}},{})}function lX(a,b,c,d){return a.flat().reduce((a,e)=>{let f=JSON.parse(JSON.stringify(e)),g=b[f.keys.shift()??0];if(!g)return a;for(;!g.name;){let a=f.keys.shift();hY(!!a,'Not enough data in "keys" property of this event.'),g=g[a]}let h={};h[g.name]={};let i=f.keys[Symbol.iterator](),j=f.data[Symbol.iterator](),k=g.members?.filter(a=>"key"===a.kind)||g.keys,l=g.members?.filter(a=>"data"===a.kind)||g.data;return k.forEach(a=>{h[g.name][a.name]=jy(i,a,c,d,h[g.name])}),l.forEach(a=>{h[g.name][a.name]=jy(j,a,c,d,h[g.name])}),"block_hash"in f&&(h.block_hash=f.block_hash),"block_number"in f&&(h.block_number=f.block_number),"transaction_hash"in f&&(h.transaction_hash=f.transaction_hash),a.push(h),a},[])}function lY(a){if(!a.events?.length)throw Error("UDC emitted event is empty");let b=a.events.find(a=>id(a.from_address)===id(hd.ADDRESS))||{data:[]};return{transaction_hash:a.transaction_hash,contract_address:b.data[0],address:b.data[0],deployer:b.data[1],unique:b.data[2],classHash:b.data[3],calldata_len:b.data[4],calldata:b.data.slice(5,5+parseInt(b.data[4],16)),salt:b.data[b.data.length-1]}}function lZ(a){return"calldata_len"in a?{To:a.to,Selector:a.selector,Calldata:a.calldata}:a}function l$(a){let b=a.calldata??[],c=Array.isArray(b)?b:jH.compile(b);return{to:a.contractAddress,selector:iu(a.entrypoint),calldata:c}}function l_(a,b){let c=l$(a);return"1"===b?{...c,calldata_len:c.calldata.length,calldata:c.calldata}:{To:c.to,Selector:c.selector,Calldata:c.calldata}}function l0(a,b){return{name:"Account.execute_from_outside",version:b,chainId:a,..."2"===b?{revision:"1"}:{}}}function l1(a,b,c,d,e){return"1"===e?{types:hQ,primaryType:"OutsideExecution",domain:l0(a,e),message:{...b,nonce:c,calls_len:d.length,calls:d.map(a=>l_(a,e))}}:{types:hR,primaryType:"OutsideExecution",domain:l0(a,e),message:{Caller:b.caller,Nonce:c,"Execute After":b.execute_after,"Execute Before":b.execute_before,Calls:d.map(a=>l_(a,e))}}}function l2(a){let b=a.outsideExecution,c=ks(a.signature);return jH.compile({outside_execution:b,signature:c})}function l3(a){return(Array.isArray(a)?a:[a]).map(a=>{let b;if(a.version===hS.V1)b="execute_from_outside";else if(a.version===hS.V2)b="execute_from_outside_v2";else throw Error("Unsupported OutsideExecution version");return{contractAddress:h8(a.signerAddress),entrypoint:b,calldata:l2(a)}})}async function l4(a,b,c){let d={contractAddress:h8(b),entrypoint:"supports_interface",calldata:[h8(c)]};try{let b=await a.callContract(d);return 0n!==BigInt(b[0])}catch{return!1}}gK(lR,{bnToUint256:()=>lU,isUint256:()=>lT,uint256ToBN:()=>lS}),gK({},{getAbiEvents:()=>lW,isAbiEvent:()=>lV,parseEvents:()=>lX,parseUDCEvent:()=>lY}),gK({},{buildExecuteFromOutsideCall:()=>l3,buildExecuteFromOutsideCallData:()=>l2,getOutsideCall:()=>l$,getTypedData:()=>l1,toOutsideCallV2:()=>lZ}),gK({},{supportsInterface:()=>l4}),gK({},{assertCallsAreStrictlyEqual:()=>l6,assertPaymasterTransactionSafety:()=>l7,getDefaultPaymasterNodeUrl:()=>l5});var l5=(a,b=!1)=>{b||hu.info("Using default public node url, please provide nodeUrl in provider options!");let c=hq[a??hk.SN_SEPOLIA],d=Math.floor(Math.random()*c.length);return c[d]};function l6(a,b){let c="Provided calls are not strictly equal to the returned calls";hY(b.length-1===a.length,`${c}: Expected ${a.length+1} calls, got ${b.length}`);for(let d=0;d<a.length;d+=1){let e=a[d],f=lZ(b[d]),g=a=>h6(a).toString(16).toLowerCase();hY(g(e.contractAddress)===g(f.To),`${c}: Contract address mismatch at call ${d}. Expected: ${e.contractAddress}, Got: ${f.To}`),hY(iu(e.entrypoint)===f.Selector,`${c}: Entrypoint mismatch at call ${d}. Expected: ${e.entrypoint}, Got: ${f.Selector}`);let h=jH.toCalldata(e.calldata),i=jH.toCalldata(f.Calldata);hY(h.length===i.length,`${c}: Calldata length mismatch at call ${d}. Expected length: ${h.length}, Got length: ${i.length}`);for(let a=0;a<h.length;a+=1)hY(BigInt(h[a])===BigInt(i[a]),`${c}: Calldata value mismatch at call ${d}, parameter ${a}. Expected: ${h[a]}, Got: ${i[a]}`)}}var l7=(a,b,c,d)=>{if("sponsored"!==c.feeMode.mode&&("invoke"===a.type||"deploy_and_invoke"===a.type)){let e="calls"in a.typed_data.message?a.typed_data.message.calls:a.typed_data.message.Calls;l6(b,e),((a,b)=>{hY(BigInt(lZ(a[a.length-1]).To)===BigInt(b),"Gas token address is not equal to the provided gas token")})(e,c.feeMode.gasToken),d&&(hY(a.fee.suggested_max_fee_in_gas_token<=d,"Gas token price is too high"),((a,b)=>{let c=lZ(a[a.length-1]);hY(BigInt(jH.toCalldata(c.Calldata)[1])===BigInt(b),"Gas token value is not equal to the provided gas fees")})(e,a.fee.suggested_max_fee_in_gas_token))}},l8=a=>"sponsored"===a.mode?{mode:"sponsored"}:{mode:"default",gas_token:a.gasToken},l9=a=>a?{execute_after:a.executeAfter||1,execute_before:a.executeBefore}:void 0,ma=a=>({version:a.version,feeMode:(a=>"sponsored"===a.mode?{mode:"sponsored"}:{mode:"default",gasToken:a.gas_token})(a.fee_mode),timeBounds:(a=>a?{executeAfter:a.execute_after,executeBefore:a.execute_before}:void 0)(a.time_bounds)}),mb={headers:{"Content-Type":"application/json"}},mc=class a{nodeUrl;headers;baseFetch;requestId;constructor(b){if(b instanceof a){this.nodeUrl=b.nodeUrl,this.headers={...mb.headers,...b.headers},this.baseFetch=b.baseFetch,this.requestId=b.requestId;return}if(b&&"nodeUrl"in b&&"headers"in b&&"baseFetch"in b){this.nodeUrl=b.nodeUrl??l5(void 0),this.headers={...mb.headers,...b.headers},this.baseFetch=b.baseFetch??kM,this.requestId=0;return}let{nodeUrl:c,headers:d,baseFetch:e}=b||{};c&&Object.values(hk).includes(c)?this.nodeUrl=l5(c,b?.default):c?this.nodeUrl=c:this.nodeUrl=l5(void 0,b?.default),this.baseFetch=e??kM,this.headers={...mb.headers,...d},this.requestId=0}fetch(a,b,c=0){let d={id:c,jsonrpc:"2.0",method:a,...b&&{params:b}};return this.baseFetch(this.nodeUrl,{method:"POST",body:hW(d),headers:this.headers})}errorHandler(a,b,c,d){if(c)throw new kJ(c,a,b);if(d instanceof kI)throw d;if(d)throw Error(d.message)}async fetchEndpoint(a,b){try{this.requestId+=1;let c=await this.fetch(a,b,this.requestId),{error:d,result:e}=await c.json();return this.errorHandler(a,b,d),e}catch(c){throw this.errorHandler(a,b,c?.response?.data,c),c}}async isAvailable(){return this.fetchEndpoint("paymaster_isAvailable")}async buildTransaction(a,b){let c;switch(a.type){case"invoke":case"deploy_and_invoke":c={...a,invoke:{user_address:a.invoke.userAddress,calls:a.invoke.calls.map(a=>({to:a.contractAddress,selector:iu(a.entrypoint),calldata:jH.toHex(a.calldata)}))}};break;default:c=a}let d={version:b.version,fee_mode:l8(b.feeMode),time_bounds:l9(b.timeBounds)},e=await this.fetchEndpoint("paymaster_buildTransaction",{transaction:c,parameters:d}),f={gas_token_price_in_strk:BigInt(e.fee.gas_token_price_in_strk),estimated_fee_in_strk:BigInt(e.fee.estimated_fee_in_strk),estimated_fee_in_gas_token:BigInt(e.fee.estimated_fee_in_gas_token),suggested_max_fee_in_strk:BigInt(e.fee.suggested_max_fee_in_strk),suggested_max_fee_in_gas_token:BigInt(e.fee.suggested_max_fee_in_gas_token)};switch(e.type){case"invoke":return{type:"invoke",typed_data:e.typed_data,parameters:ma(e.parameters),fee:f};case"deploy_and_invoke":return{type:"deploy_and_invoke",deployment:e.deployment,typed_data:e.typed_data,parameters:ma(e.parameters),fee:f};default:return{type:"deploy",deployment:e.deployment,parameters:ma(e.parameters),fee:f}}}async executeTransaction(a,b){let c;switch(a.type){case"invoke":case"deploy_and_invoke":c={...a,invoke:{user_address:a.invoke.userAddress,typed_data:a.invoke.typedData,signature:ku(a.invoke.signature)}};break;default:c=a}let d={version:b.version,fee_mode:l8(b.feeMode),time_bounds:l9(b.timeBounds)};return this.fetchEndpoint("paymaster_executeTransaction",{transaction:c,parameters:d})}async getSupportedTokens(){return this.fetchEndpoint("paymaster_getSupportedTokens").then(a=>a.map(a=>({token_address:a.token_address,decimals:a.decimals,priceInStrk:BigInt(a.price_in_strk)})))}},md=new mc({default:!0}),me=class extends lO{signer;address;cairoVersion;transactionVersion;paymaster;constructor(a,b,c,d,e=hs.get("transactionVersion"),f){super(a),this.address=b.toLowerCase(),this.signer=h3(c)||c instanceof Uint8Array?new lQ(c):c,d&&(this.cairoVersion=d.toString()),this.transactionVersion=e,this.paymaster=f?new mc(f):md,hu.debug("Account setup",{transactionVersion:this.transactionVersion,cairoVersion:this.cairoVersion,channel:this.channel.id})}static async create(){throw new kI("Not supported")}getPreferredVersion(a,b){return this.transactionVersion===hC.V3?b:this.transactionVersion===hC.V2?a:hC.V3}async getNonce(a){return super.getNonceForAddress(this.address,a)}async getNonceSafe(a){try{return h6(a??await this.getNonce())}catch(a){return 0n}}async getCairoVersion(a){if(!this.cairoVersion){let{cairo:b}=a?await super.getContractVersion(void 0,a):await super.getContractVersion(this.address);this.cairoVersion=b}return this.cairoVersion}async estimateFee(a,b={}){return this.estimateInvokeFee(a,b)}async estimateInvokeFee(a,b={}){let{nonce:c,blockIdentifier:d,version:e,skipValidate:f=!0}=b,g=Array.isArray(a)?a:[a],h=h6(c??await this.getNonce()),i=kz(this.getPreferredVersion(hC.F1,hC.F3),kA(e)),j=await this.getChainId(),k={...kB(b,await this.channel.setUpSpecVersion()),walletAddress:this.address,nonce:h,maxFee:g2,version:i,chainId:j,cairoVersion:await this.getCairoVersion(),skipValidate:f},l=await this.buildInvocation(g,k);return super.getInvokeEstimateFee({...l},{...kB(b,await this.channel.setUpSpecVersion()),version:i,nonce:h},d,b.skipValidate)}async estimateDeclareFee(a,b={}){let{blockIdentifier:c,nonce:d,version:e,skipValidate:f=!0}=b,g=h6(d??await this.getNonce()),h=kz(kE(a.contract)?this.getPreferredVersion(hC.F2,hC.F3):hC.F1,kA(e)),i=await this.getChainId(),j=await this.buildDeclarePayload(a,{...kB(b,await this.channel.setUpSpecVersion()),nonce:g,chainId:i,version:h,walletAddress:this.address,maxFee:g2,cairoVersion:void 0,skipValidate:f});return super.getDeclareEstimateFee(j,{...kB(b,await this.channel.setUpSpecVersion()),version:h,nonce:g},c,b.skipValidate)}async estimateAccountDeployFee({classHash:a,addressSalt:b=0,constructorCalldata:c=[],contractAddress:d},e={}){let{blockIdentifier:f,version:g,skipValidate:h=!0}=e,i=kz(this.getPreferredVersion(hC.F1,hC.F3),kA(g)),j=await this.getChainId(),k=await this.buildAccountDeployPayload({classHash:a,addressSalt:b,constructorCalldata:c,contractAddress:d},{...kB(e,await this.channel.setUpSpecVersion()),nonce:g2,chainId:j,version:i,walletAddress:this.address,maxFee:g2,cairoVersion:void 0,skipValidate:h});return super.getDeployAccountEstimateFee({...k},{...kB(e,await this.channel.setUpSpecVersion()),version:i,nonce:g2},f,e.skipValidate)}async estimateDeployFee(a,b={}){let c=this.buildUDCContractPayload(a);return this.estimateInvokeFee(c,b)}async estimateFeeBulk(a,b={}){if(!a.length)throw TypeError("Invocations should be non-empty array");let{nonce:c,blockIdentifier:d,version:e,skipValidate:f}=b,g=await this.accountInvocationsFactory(a,{...kB(b,await this.channel.setUpSpecVersion()),versions:[hC.F1,kz(this.getPreferredVersion(hC.F2,hC.F3),e)],nonce:c,blockIdentifier:d,skipValidate:f});return super.getEstimateFeeBulk(g,{blockIdentifier:d,skipValidate:f})}async simulateTransaction(a,b={}){if(!a.length)throw TypeError("Invocations should be non-empty array");let{nonce:c,blockIdentifier:d,skipValidate:e=!0,skipExecute:f,version:g}=b,h=await this.accountInvocationsFactory(a,{...kB(b,await this.channel.setUpSpecVersion()),versions:[hC.V1,kz(this.getPreferredVersion(hC.V2,hC.V3),g)],nonce:c,blockIdentifier:d,skipValidate:e});return super.getSimulateTransaction(h,{blockIdentifier:d,skipValidate:e,skipExecute:f})}async execute(a,b={}){let c=Array.isArray(a)?a:[a],d=h6(b.nonce??await this.getNonce()),e=kz(this.getPreferredVersion(hC.V1,hC.V3),b.version),f=await this.getUniversalSuggestedFee(e,{type:hx.INVOKE,payload:a},{...b,version:e}),g=await this.getChainId(),h={...kB(b,await this.channel.setUpSpecVersion()),resourceBounds:f.resourceBounds,walletAddress:this.address,nonce:d,maxFee:f.maxFee,version:e,chainId:g,cairoVersion:await this.getCairoVersion()},i=await this.signer.signTransaction(c,h),j=kY(c,await this.getCairoVersion());return this.invokeFunction({contractAddress:this.address,calldata:j,signature:i},{...kB(b,await this.channel.setUpSpecVersion()),resourceBounds:f.resourceBounds,nonce:d,maxFee:f.maxFee,version:e})}async buildPaymasterTransaction(a,b){let c;if(!b.deploymentData&&await this.getSnip9Version()===hS.UNSUPPORTED)throw Error("Account is not compatible with SNIP-9");let d={version:"0x1",feeMode:b.feeMode,timeBounds:b.timeBounds};return c=b.deploymentData?a.length>0?{type:"deploy_and_invoke",invoke:{userAddress:this.address,calls:a},deployment:b.deploymentData}:{type:"deploy",deployment:b.deploymentData}:{type:"invoke",invoke:{userAddress:this.address,calls:a}},this.paymaster.buildTransaction(c,d)}async estimatePaymasterTransactionFee(a,b){return(await this.buildPaymasterTransaction(a,b)).fee}async preparePaymasterTransaction(a){let b;switch(a.type){case"deploy_and_invoke":{let c=await this.signMessage(a.typed_data);b={type:"deploy_and_invoke",invoke:{userAddress:this.address,typedData:a.typed_data,signature:ku(c)},deployment:a.deployment};break}case"invoke":{let c=await this.signMessage(a.typed_data);b={type:"invoke",invoke:{userAddress:this.address,typedData:a.typed_data,signature:ku(c)}};break}case"deploy":b={type:"deploy",deployment:a.deployment};break;default:throw Error("Invalid transaction type")}return b}async executePaymasterTransaction(a,b,c){let d=await this.buildPaymasterTransaction(a,b);l7(d,a,b,c);let e=await this.preparePaymasterTransaction(d);return this.paymaster.executeTransaction(e,d.parameters).then(a=>({transaction_hash:a.transaction_hash}))}async declareIfNot(a,b={}){let c=kF(a);try{await this.getClassByHash(c.classHash)}catch(c){return this.declare(a,b)}return{transaction_hash:"",class_hash:c.classHash}}async declare(a,b={}){let c=kF(a),{nonce:d,version:e}=b,f=kz(kE(a.contract)?this.getPreferredVersion(hC.V2,hC.V3):hC.V1,e),g=await this.getUniversalSuggestedFee(f,{type:hx.DECLARE,payload:c},{...b,version:f}),h={...kB(b,await this.channel.setUpSpecVersion()),resourceBounds:g.resourceBounds,maxFee:g.maxFee,nonce:h6(d??await this.getNonce()),version:f,chainId:await this.getChainId(),walletAddress:this.address,cairoVersion:void 0},i=await this.buildDeclarePayload(c,h);return this.declareContract(i,h)}async deploy(a,b={}){let{calls:c,addresses:d}=kZ(a,this.address);return{...await this.execute(c,b),contract_address:d}}async deployContract(a,b={}){let c=await this.deploy(a,b);return lY(await this.waitForTransaction(c.transaction_hash))}async declareAndDeploy(a,b={}){let{constructorCalldata:c,salt:d,unique:e}=a,f=await this.declareIfNot(a,b);if(""!==f.transaction_hash){let a=await this.waitForTransaction(f.transaction_hash);f={...f,...a}}let g=await this.deployContract({classHash:f.class_hash,salt:d,unique:e,constructorCalldata:c},b);return{declare:{...f},deploy:g}}deploySelf=this.deployAccount;async deployAccount({classHash:a,constructorCalldata:b=[],addressSalt:c=0,contractAddress:d},e={}){let f=kz(this.getPreferredVersion(hC.V1,hC.V3),e.version),g=await this.getChainId(),h=jH.compile(b),i=d??kb(c,a,h,0),j=await this.getUniversalSuggestedFee(f,{type:hx.DEPLOY_ACCOUNT,payload:{classHash:a,constructorCalldata:h,addressSalt:c,contractAddress:i}},e),k=await this.signer.signDeployAccountTransaction({...kB(e,await this.channel.setUpSpecVersion()),classHash:a,constructorCalldata:h,contractAddress:i,addressSalt:c,chainId:g,resourceBounds:j.resourceBounds,maxFee:j.maxFee,version:f,nonce:g2});return this.deployAccountContract({classHash:a,addressSalt:c,constructorCalldata:b,signature:k},{...kB(e,await this.channel.setUpSpecVersion()),nonce:g2,resourceBounds:j.resourceBounds,maxFee:j.maxFee,version:f})}async signMessage(a){return this.signer.signMessage(a,this.address)}async hashMessage(a){return ll(a,this.address)}async getSnip9Version(){return await l4(this,this.address,hg)?hS.V2:await l4(this,this.address,hf)?hS.V1:hS.UNSUPPORTED}async isValidSnip9Nonce(a){try{let b={contractAddress:this.address,entrypoint:"is_valid_outside_execution_nonce",calldata:[h8(a)]},c=await this.callContract(b);return 0n!==BigInt(c[0])}catch(a){throw Error(`Failed to check if nonce is valid: ${a}`)}}async getSnip9Nonce(){let a=kr();return await this.isValidSnip9Nonce(a)?a:this.getSnip9Nonce()}async getOutsideTransaction(a,b,c,d){if(!h5(a.caller)&&"ANY_CALLER"!==a.caller)throw Error(`The caller ${a.caller} is not valid.`);let e=h5(a.caller)?a.caller:he,f=Array.isArray(b)?b:[b],g=c??await this.getSnip9Version();if(!g)throw Error("This account is not handling outside transactions.");let h=d?h8(d):await this.getSnip9Nonce(),i=l1(await this.getChainId(),{caller:e,execute_after:a.execute_after,execute_before:a.execute_before},h,f,g),j=await this.signMessage(i);return{outsideExecution:{caller:e,nonce:h,execute_after:a.execute_after,execute_before:a.execute_before,calls:f.map(l$)},signature:j,signerAddress:this.address,version:g}}async executeFromOutside(a,b){let c=l3(a);return this.execute(c,b)}async getUniversalSuggestedFee(a,{type:b,payload:c},d){let e=0,f=kw(g2,void 0,await this.channel.setUpSpecVersion());return a===hC.V3?f=d.resourceBounds??(await this.getSuggestedFee({type:b,payload:c},d)).resourceBounds:e=d.maxFee??(await this.getSuggestedFee({type:b,payload:c},d)).suggestedMaxFee,{maxFee:e,resourceBounds:f}}async getSuggestedFee({type:a,payload:b},c){switch(a){case hx.INVOKE:return this.estimateInvokeFee(b,c);case hx.DECLARE:return this.estimateDeclareFee(b,c);case hx.DEPLOY_ACCOUNT:return this.estimateAccountDeployFee(b,c);case hx.DEPLOY:return this.estimateDeployFee(b,c);default:return kx(await this.channel.setUpSpecVersion())}}async buildInvocation(a,b){let c=kY(a,await this.getCairoVersion()),d=b.skipValidate?[]:await this.signer.signTransaction(a,b);return{...kB(b,await this.channel.setUpSpecVersion()),contractAddress:this.address,calldata:c,signature:d}}async buildDeclarePayload(a,b){let{classHash:c,contract:d,compiledClassHash:e}=kF(a),f=kP(d);if(h_(e)&&(b.version===hE.F3||b.version===hE.V3))throw Error("V3 Transaction work with Cairo1 Contracts and require compiledClassHash");let g=b.skipValidate?[]:await this.signer.signDeclareTransaction({...b,...kB(b,await this.channel.setUpSpecVersion()),classHash:c,compiledClassHash:e,senderAddress:b.walletAddress});return{senderAddress:b.walletAddress,signature:g,contract:f,compiledClassHash:e}}async buildAccountDeployPayload({classHash:a,addressSalt:b=0,constructorCalldata:c=[],contractAddress:d},e){let f=jH.compile(c),g=d??kb(b,a,f,0),h=e.skipValidate?[]:await this.signer.signDeployAccountTransaction({...e,...kB(e,await this.channel.setUpSpecVersion()),classHash:a,contractAddress:g,addressSalt:b,constructorCalldata:f});return{...kB(e,await this.channel.setUpSpecVersion()),classHash:a,addressSalt:b,constructorCalldata:f,signature:h}}buildUDCContractPayload(a){return[].concat(a).map(a=>{let{classHash:b,salt:c="0",unique:d=!0,constructorCalldata:e=[]}=a,f=jH.compile(e);return{contractAddress:hd.ADDRESS,entrypoint:hd.ENTRYPOINT,calldata:[b,c,im(d),f.length,...f]}})}async accountInvocationsFactory(a,b){let{nonce:c,blockIdentifier:d,skipValidate:e=!0}=b,f=await this.getNonceSafe(c),g=await this.getChainId(),h=b.versions.map(a=>kz(a)),i="payload"in a[0]?a[0].payload:a[0],j=a[0].type===hx.DEPLOY_ACCOUNT?await this.getCairoVersion(i.classHash):await this.getCairoVersion();return Promise.all([].concat(a).map(async(a,c)=>{let i="payload"in a?a.payload:a,k={...kB(b,await this.channel.setUpSpecVersion()),walletAddress:this.address,nonce:h6(Number(f)+c),maxFee:g2,chainId:g,cairoVersion:j,version:"",skipValidate:e},l={type:a.type,nonce:h6(Number(f)+c),blockIdentifier:d,version:""};if(a.type===hx.INVOKE){let a=kC(h[1]);k.version=a,l.version=a;let b=await this.buildInvocation([].concat(i),k);return{...l,...b,...k}}if(a.type===hx.DEPLOY){let a=kC(h[1]);k.version=a,l.version=a;let b=this.buildUDCContractPayload(i),c=await this.buildInvocation(b,k);return{...l,...c,...k,type:hx.INVOKE}}if(a.type===hx.DECLARE){let a=kE(i.contract)?h[1]:h[0];k.version=a,l.version=a;let b=await this.buildDeclarePayload(i,k);return{...l,...b,...k}}if(a.type===hx.DEPLOY_ACCOUNT){let a=kC(h[1]);k.version=a,l.version=a;let b=await this.buildAccountDeployPayload(i,k);return{...l,...b,...k}}throw Error(`accountInvocationsFactory: unsupported transaction type: ${a}`)}))}async getStarkName(a=this.address,b){return super.getStarkName(a,b)}};function mf(a,b=!1){return a.request({type:"wallet_requestAccounts",params:{silent_mode:b}})}function mg(a){return a.request({type:"wallet_getPermissions"})}function mh(a,b){return a.request({type:"wallet_watchAsset",params:b})}function mi(a,b){return a.request({type:"wallet_addStarknetChain",params:b})}function mj(a,b){return a.request({type:"wallet_switchStarknetChain",params:{chainId:b}})}function mk(a){return a.request({type:"wallet_requestChainId"})}function ml(a){return a.request({type:"wallet_deploymentData"})}function mm(a,b){return a.request({type:"wallet_addInvokeTransaction",params:b})}function mn(a,b){return a.request({type:"wallet_addDeclareTransaction",params:b})}function mo(a,b){return a.request({type:"wallet_signTypedData",params:b})}function mp(a){return a.request({type:"wallet_supportedSpecs"})}function mq(a,b){a.on("accountsChanged",b)}function mr(a,b){a.on("networkChanged",b)}function ms(a,b){return async function(...c){let d={...a.contractOptions};return a.contractOptions=void 0,a.call(b.name,c,{parseRequest:!0,parseResponse:!0,...d})}}function mt(a,b){return"view"===b.stateMutability||"view"===b.state_mutability?ms(a,b):async function(...c){let d={...a.contractOptions};return a.contractOptions=void 0,a.invoke(b.name,c,{parseRequest:!0,...d})}}function mu(a,b){return Array.isArray(a)&&"__compiled__"in a?a:Array.isArray(a)&&Array.isArray(a[0])&&"__compiled__"in a[0]?a[0]:b()}gK({},{addDeclareTransaction:()=>mn,addInvokeTransaction:()=>mm,addStarknetChain:()=>mi,deploymentData:()=>ml,getPermissions:()=>mg,onAccountChange:()=>mq,onNetworkChanged:()=>mr,requestAccounts:()=>mf,requestChainId:()=>mk,signMessage:()=>mo,supportedSpecs:()=>mp,switchStarknetChain:()=>mj,watchAsset:()=>mh});var mv=class{abi;address;providerOrAccount;deployTransactionHash;structs;events;functions;callStatic;populateTransaction;estimateFee;callData;contractOptions;constructor(a,b,c=lP){this.address=b&&b.toLowerCase(),this.providerOrAccount=c,this.callData=new jH(a),this.structs=jH.getAbiStruct(a),this.events=lW(a);let d=jp(a);this.abi=d.getLegacyFormat();let e={enumerable:!0,value:{},writable:!1};Object.defineProperties(this,{functions:{enumerable:!0,value:{},writable:!1},callStatic:{enumerable:!0,value:{},writable:!1},populateTransaction:{enumerable:!0,value:{},writable:!1},estimateFee:{enumerable:!0,value:{},writable:!1}}),this.abi.forEach(a=>{var b,c;if("function"!==a.type)return;let d=a.name;this[d]||Object.defineProperty(this,d,{...e,value:mt(this,a)}),this.functions[d]||Object.defineProperty(this.functions,d,{...e,value:mt(this,a)}),this.callStatic[d]||Object.defineProperty(this.callStatic,d,{...e,value:ms(this,a)}),this.populateTransaction[d]||Object.defineProperty(this.populateTransaction,d,{...e,value:(b=this,function(...c){return b.populate(a.name,c)})}),this.estimateFee[d]||Object.defineProperty(this.estimateFee,d,{...e,value:(c=this,function(...b){return c.estimate(a.name,b)})})})}withOptions(a){return this.contractOptions=a,this}attach(a){this.address=a}connect(a){this.providerOrAccount=a}async deployed(){return this.deployTransactionHash&&(await this.providerOrAccount.waitForTransaction(this.deployTransactionHash),this.deployTransactionHash=void 0),this}async call(a,b=[],{parseRequest:c=!0,parseResponse:d=!0,formatResponse:e,blockIdentifier:f}={}){hY(null!==this.address,"contract is not connected to an address");let g=mu(b,()=>c?(this.callData.validate(hL.CALL,a,b),this.callData.compile(a,b)):(hu.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),b));return this.providerOrAccount.callContract({contractAddress:this.address,calldata:g,entrypoint:a},f).then(b=>d?e?this.callData.format(a,b,e):this.callData.parse(a,b):b)}invoke(a,b=[],{parseRequest:c=!0,signature:d,...e}={}){hY(null!==this.address,"contract is not connected to an address");let f=mu(b,()=>c?(this.callData.validate(hL.INVOKE,a,b),this.callData.compile(a,b)):(hu.warn("Invoke skipped parsing but provided rawArgs, possible malfunction request"),b)),g={contractAddress:this.address,calldata:f,entrypoint:a};if("execute"in this.providerOrAccount)return this.providerOrAccount.execute(g,{...e});if(!e.nonce)throw Error("Nonce is required when invoking a function without an account");return hu.warn(`Invoking ${a} without an account. This will not work on a public node.`),this.providerOrAccount.invokeFunction({...g,signature:d},{...e,nonce:e.nonce})}async estimate(a,b=[]){hY(null!==this.address,"contract is not connected to an address"),mu(b,()=>!1)||this.callData.validate(hL.INVOKE,a,b);let c=this.populate(a,b);if("estimateInvokeFee"in this.providerOrAccount)return this.providerOrAccount.estimateInvokeFee(c);throw Error("Contract must be connected to the account contract to estimate")}populate(a,b=[]){let c=mu(b,()=>this.callData.compile(a,b));return{contractAddress:this.address,entrypoint:a,calldata:c}}parseEvents(a){let b;return a.match({success:a=>{b=lX(a.events?.map(b=>({block_hash:a.block_hash,block_number:a.block_number,transaction_hash:a.transaction_hash,...b})).filter(a=>id(a.from_address)===id(this.address),[])||[],this.events,this.structs,jH.getAbiEnum(this.abi))},_:()=>{throw Error("This transaction was not successful.")}}),b}isCairo1(){return iK.isCairo1Abi(this.abi)}async getVersion(){return this.providerOrAccount.getContractVersion(this.address)}typedv2(a){return this}};a.s(["PRIVACY_MIXER",()=>mw,"SHARED_SWAP_ACCOUNT_ADDRESS",()=>mx],805428);let mw={CONTRACT_ADDRESS:"0x05effdcfda86066c72c108e174c55a4f8d1249ba69f80e975d7fc814199a376b",CLASS_HASH:"0x00abc35fe33a082fad61df2a88160f16202d1a08cc338f1954063320063be4d5",STRK_TOKEN:"0x04718f5a0fc34cc1af16a1cdee98ffb20c31f5cd61d6ab07201858f4287c938d",DEPLOYMENT_PARAMS:{OWNER:"0x01734203d1C5B2699B3dbC50223c86EC59E2B79E2d34CBE8363F0dCCdC1E9634",MIN_DEPOSIT:0xde0b6b3a7640000n,MAX_DEPOSIT:0x3635c9adc5dea00000n,MIN_DELAY:0n,MIN_ANONYMITY:0n,FEE_RATE:10n}},mx="0x075a05264A7D0ebB864abFbE2bbFeE33D085EB77397b939bD17d55c2e69d87D3"},140678,a=>{"use strict";a.s(["ENV",()=>b,"getNetworkStatus",()=>d,"getStarknetRpc",()=>c]);let b={NETWORK:"MAINNET",STARKNET_RPC:"https://starknet-mainnet.g.alchemy.com/starknet/version/rpc/v0_8/kwgGr9GGk4YyLXuGfEvpITv1jpvn3PgP",STARKNET_PRIVATE_KEY:process.env.STARKNET_PRIVATE_KEY||"",SHARED_SWAP_ACCOUNT_PRIVATE_KEY:process.env.SHARED_SWAP_ACCOUNT_PRIVATE_KEY||"0x017e929b437eb038963df230f6dcc8002d06741107abfe22972e4532ba25ccaa",SHARED_SWAP_ACCOUNT_ADDRESS:process.env.SHARED_SWAP_ACCOUNT_ADDRESS||"",MIXER_CONTRACT_ADDRESS:"0x05effdcfda86066c72c108e174c55a4f8d1249ba69f80e975d7fc814199a376b",LND_URL:"https://slpm-node.t.voltageapp.io:8080",LND_MACAROON:"0201036c6e64025e030a103294bb4616a5eb95a9a935fd5183e1111207383635383234331a160a0761646472657373120472656164120577726974651a170a08696e766f69636573120472656164120577726974651a0f0a076f6e636861696e12047265616400000620bb9f424dcd1d871d56445eb2394e9f734a461bfbd8904538bb370965efd79643",LND_TLS:"LS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUUyRENDQkY2Z0F3SUJBZ0lTQmRPR3lzblJnUmJaR1NON3B3ZTQ2a0NrTUFvR0NDcUdTTTQ5QkFNRE1ESXgKQ3pBSkJnTlZCQVlUQWxWVE1SWXdGQVlEVlFRS0V3MU1aWFFuY3lCRmJtTnllWEIwTVFzd0NRWURWUVFERXdKRgpPREFlRncweU5UQTVNVGt5TXpRd01EZGFGdzB5TlRFeU1UZ3lNelF3TURaYU1Cb3hHREFXQmdOVkJBTU1EeW91CmRtOXNkR0ZuWldGd2NDNXBiekJaTUJNR0J5cUdTTTQ5QWdFR0NDcUdTTTQ5QXdFSEEwSUFCQ2tTZnIyTVlzWUgKN05zYUNOVVdCY1V2NmlJMGRVUkxFL0E2UEVSRjUvZkdIU1Vneldzc0o5emdqeG1uQ29JK0tzN1llcWlvMVBHWgp0dUJoVjNJVkJNV2pnZ05xTUlJRFpqQU9CZ05WSFE4QkFmOEVCQU1DQjRBd0hRWURWUjBsQkJZd0ZBWUlLd1lCCkJRVUhBd0VHQ0NzR0FRVUZCd01DTUF3R0ExVWRFd0VCL3dRQ01BQXdIUVlEVlIwT0JCWUVGTzRVNGdScjA3djIKbUUwc1dFdmdjeFpEbk84Sk1COEdBMVVkSXdRWU1CYUFGSThORTZMMkxuN1JVR3d6R0RoZFdZNGpjcEhLTURJRwpDQ3NHQVFVRkJ3RUJCQ1l3SkRBaUJnZ3JCZ0VGQlFjd0FvWVdhSFIwY0RvdkwyVTRMbWt1YkdWdVkzSXViM0puCkx6Q0NBV1VHQTFVZEVRU0NBVnd3Z2dGWWdoRXFMbUl1ZG05c2RHRm5aV0Z3Y0M1cGI0SVJLaTVrTG5admJIUmgKWjJVdVkyeHZkV1NDRVNvdVpDNTJiMngwWVdkbFlYQndMbWx2Z2hjcUxtMHVjbVZzWVhrdWRtOXNkR0ZuWlM1agpiRzkxWklJWEtpNXRMbkpsYkdGNUxuWnZiSFJoWjJWaGNIQXVhVytDRVNvdWJTNTJiMngwWVdkbExtTnNiM1ZrCmdoRXFMbTB1ZG05c2RHRm5aV0Z3Y0M1cGI0SU9LaTV1YjNOMGNpNTJiSFF1WjJXQ0Z5b3VkQzV5Wld4aGVTNTIKYjJ4MFlXZGxMbU5zYjNWa2doY3FMblF1Y21Wc1lYa3VkbTlzZEdGblpXRndjQzVwYjRJUktpNTBMblp2YkhSaApaMlV1WTJ4dmRXU0NFU291ZEM1MmIyeDBZV2RsWVhCd0xtbHZnaEVxTG5VdWRtOXNkR0ZuWldGd2NDNXBiNElQCktpNTJiMngwWVdkbExtTnNiM1ZrZ2hBcUxuWnZiSFJoWjJWaGNHa3VZMjl0Z2c4cUxuWnZiSFJoWjJWaGNIQXUKYVcrQ0JuWnNkQzVuWllJT2RtOXNkR0ZuWldGd2FTNWpiMjB3RXdZRFZSMGdCQXd3Q2pBSUJnWm5nUXdCQWdFdwpMUVlEVlIwZkJDWXdKREFpb0NDZ0hvWWNhSFIwY0RvdkwyVTRMbU11YkdWdVkzSXViM0puTHpNM0xtTnliRENDCkFRUUdDaXNHQVFRQjFua0NCQUlFZ2ZVRWdmSUE4QUIyQU4zY3lqU1YxK0VXQmVlVk12ckhuL2c5SEZEZjJ3QTYKRkJKMkNpeXN1OGdxQUFBQm1XU1BBNVlBQUFRREFFY3dSUUlnVVV0TGtNQk9oYUtDUk1odkZpa1AwUi9DUEhLdgptZHdSNGtsMWVZT3VOSklDSVFDaS8xZmVKNVBYZmMyME9FWDBnMDVZQkxEL01Ic2xzWkZ3UXF5M3BHY3h0UUIyCkFNejdEMnFGY1FsbC9wV2JVODdwc253aTZZVmNEWmVOdHFsK1ZNRCtUQTJ3QUFBQm1XU1BBNkVBQUFRREFFY3cKUlFJaEFKM0QvTFFzR0d5cFYrT2FpSWZJekQ4bFo4bEo3TnZaT2Y3QnVveStxR00xQWlCaTFxZFVwSGdNdTgzbQo5TGxTQ2k5YVo0eFN6VW93aVp6MDBkZDhlN3g5VlRBS0JnZ3Foa2pPUFFRREF3Tm9BREJsQWpFQWpyUERRM1FuClVjYTJSRng0TkhhZ1FwdWtFcTRrV2k0VkduUHIwZFplMERWc2RBM3hnSy9QTHRpcFlDODVDeUlxQWpCNjhLT2cKQzMvb05PN1ZqcmovUjFFWVd1QjZXWDJwYlMyN25PSW10V2taMm9ldWV1dUJ6Y2QyM1pKMHp6Z01UUXM9Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0KLS0tLS1CRUdJTiBDRVJUSUZJQ0FURS0tLS0tCk1JSUVWakNDQWo2Z0F3SUJBZ0lRWTVXVFk4Sk9jSUp4V1JpL3c5ZnRWakFOQmdrcWhraUc5dzBCQVFzRkFEQlAKTVFzd0NRWURWUVFHRXdKVlV6RXBNQ2NHQTFVRUNoTWdTVzUwWlhKdVpYUWdVMlZqZFhKcGRIa2dVbVZ6WldGeQpZMmdnUjNKdmRYQXhGVEFUQmdOVkJBTVRERWxUVWtjZ1VtOXZkQ0JZTVRBZUZ3MHlOREF6TVRNd01EQXdNREJhCkZ3MHlOekF6TVRJeU16VTVOVGxhTURJeEN6QUpCZ05WQkFZVEFsVlRNUll3RkFZRFZRUUtFdzFNWlhRbmN5QkYKYm1OeWVYQjBNUXN3Q1FZRFZRUURFd0pGT0RCMk1CQUdCeXFHU000OUFnRUdCU3VCQkFBaUEySUFCTkZsOGw3YwpTN1FNQXB6U3N2cnU2V3lyT3E0NG9mVFVPVEl6eFVMVXpETU1OTWNoSUpCd1hPaGlMeHh4czBMWGViNUdEY0hiClI2RVRvTWZmZ1Naak85U05IZlk5Z2pNeTl2UXI1L1dXT3JRVFp4aDdhejZOU05ucTN1MnViVDZIVEtPQitEQ0IKOVRBT0JnTlZIUThCQWY4RUJBTUNBWVl3SFFZRFZSMGxCQll3RkFZSUt3WUJCUVVIQXdJR0NDc0dBUVVGQndNQgpNQklHQTFVZEV3RUIvd1FJTUFZQkFmOENBUUF3SFFZRFZSME9CQllFRkk4TkU2TDJMbjdSVUd3ekdEaGRXWTRqCmNwSEtNQjhHQTFVZEl3UVlNQmFBRkhtMFdlWjd0dVhrQVhPQUNJaklHbGoyNlp0dU1ESUdDQ3NHQVFVRkJ3RUIKQkNZd0pEQWlCZ2dyQmdFRkJRY3dBb1lXYUhSMGNEb3ZMM2d4TG1rdWJHVnVZM0l1YjNKbkx6QVRCZ05WSFNBRQpEREFLTUFnR0JtZUJEQUVDQVRBbkJnTlZIUjhFSURBZU1CeWdHcUFZaGhab2RIUndPaTh2ZURFdVl5NXNaVzVqCmNpNXZjbWN2TUEwR0NTcUdTSWIzRFFFQkN3VUFBNElDQVFCbkUwaEdJTktzQ1lXaTBYeDF5Z3hENXFpaEVqWjAKUkkzdFRaejF3dUFUSDNad1lQSXA5N2tXRWF5YW5EMWowY0RoSVl6eTRDa0RvMmpCOEQ1dDBhNnpaV3pscjk4ZApBUUZOaDh1S0prSUhkTFNoeStuVXllWnhjNWJOZU1wMUx1MGdTekU0TWNxZm1OTXZJcGVpd1dTWU85dzgyT2I4Cm90dlhjTzJKVVlpM3N2SElXUm0zKzcwN0RVYkw1MVhNY1kyaVpkbENxNFdhOW5idWszV1RVNGdyNkxZOE16VkEKYURRRzIrNFUzZUo2cVVGMTBiQm5SMXV1VnlEWXM5Umhyd3VjUlZuZnVEajI5Q01MVHNwbE01ZjV3U1Y1aFVwbQpVd3AvdlY3TTR3NGFHdW50NzRrb1g3MW40RWRhZ0NzTC9ZazUrbUFRVTArdHVlMEpPZkFWL1I2dDFrK1hrOXMyCkhNUUZlb3hwcGZ6QVZDMDRGZEc5TStBQzJKV3htRlN0NkJDdWgzQ0VleTNmRTUyUXJqOVlNNzVydHZJanNtLzEKSGwrdS8vV3F4bnUxWlE0anBhK1ZwdVppR09sV3JxU1A5ZW9nZE9oQ0dpc255ZXdXSndSUU9xSzE2d2lHeVplUgp4cy9CZWt3NjV2d1NJYVZrQnJ1UGlUZk1PbzBaaDRnVmE4L3FKZ01iSmJ5cnd3Rzk3ei9QUmdtTEtDRGw4ejNkCnRBMFo3cXE3ZnRhMEdsMjR1eXVCMDVkcUk1SjFMdkF6S3VXZElqVDF0UDhxQ294U0UveHBpeDhoWDJkdDNoKy8KanVqVWdGUEZaMEVWWjB4U3lCTlJGM01ib0dabllYRlV4cE5qVFdQS3BhZ0RISlFtcXJBY0RtV0puTXNGWTNqUwp1MWlndjNPZWZuV2pTUT09Ci0tLS0tRU5EIENFUlRJRklDQVRFLS0tLS0K",CASHU_MINTS:"https://mint.coinos.io".split(",").map(a=>a.trim()).filter(Boolean),CASHU_DEFAULT_MINT:"https://mint.coinos.io",CASHU_SINGLE_MINT:!0,DISABLE_CASHU_SPLIT:!0,STRK_BTC_RATE:Number(process.env.NEXT_PUBLIC_STRK_BTC_RATE||process.env.STRK_BTC_RATE||"0"),STRK_SATS_RATE:(()=>{let a=process.env.NEXT_PUBLIC_STRK_SATS_RATE||process.env.STRK_SATS_RATE;if(a)return Number(a);let b=Number(process.env.NEXT_PUBLIC_STRK_BTC_RATE||process.env.STRK_BTC_RATE||"0");return b&&!isNaN(b)&&b>0?Math.floor(1e8*b):125})(),DISABLE_ATOMIQ_PRICE_FETCH:!1,ALLOW_SWAP_PRICE_FALLBACK:"true"===process.env.ALLOW_SWAP_PRICE_FALLBACK};function c(){if(b.STARKNET_RPC)return b.STARKNET_RPC;switch(b.NETWORK){case"MAINNET":default:return"https://starknet-mainnet.g.alchemy.com/starknet/version/rpc/v0_8/kwgGr9GGk4YyLXuGfEvpITv1jpvn3PgP";case"TESTNET":return"https://starknet-sepolia.public.blastapi.io/rpc/v0_7"}}function d(){let a=!!(b.LND_URL&&b.LND_MACAROON),c="MAINNET"===b.NETWORK?["MAINNET"===b.NETWORK&&b.STARKNET_RPC&&b.STARKNET_PRIVATE_KEY&&b.CASHU_DEFAULT_MINT&&b.LND_URL&&b.LND_MACAROON].every(Boolean):["TESTNET"===b.NETWORK&&b.STARKNET_RPC&&b.STARKNET_PRIVATE_KEY&&b.CASHU_DEFAULT_MINT].every(Boolean);return{network:b.NETWORK,starknetRpc:!!b.STARKNET_RPC,privateKey:!!b.STARKNET_PRIVATE_KEY,cashuMint:!!b.CASHU_DEFAULT_MINT,lightningNode:!!b.LND_URL,lightningConfigured:a,cashuMints:b.CASHU_MINTS.length,ready:c,warnings:(()=>{let a=[];return b.STARKNET_RPC||a.push("STARKNET_RPC not configured"),b.STARKNET_PRIVATE_KEY||a.push("STARKNET_PRIVATE_KEY not configured"),b.CASHU_DEFAULT_MINT||a.push("CASHU_DEFAULT_MINT not configured"),"MAINNET"===b.NETWORK&&(b.LND_URL||a.push("Lightning node (LND_URL) required for mainnet"),b.LND_MACAROON||a.push("Lightning authentication (LND_MACAROON) required for mainnet")),a})()}}!function(){let a=[],c=[];b.NETWORK&&["MAINNET","TESTNET"].includes(b.NETWORK)||a.push("Invalid network configuration"),b.CASHU_DEFAULT_MINT||a.push("No Cashu mint configured"),b.STARKNET_RPC||c.push(`Using default ${b.NETWORK} Starknet RPC - configure STARKNET_RPC for better reliability`),b.LND_URL||c.push("Lightning node URL not configured - using fallback mode"),0===b.CASHU_MINTS.length&&c.push("No multi-mint configuration - using single mint mode"),b.STARKNET_PRIVATE_KEY||c.push("No Starknet private key configured for server-side operations"),c.forEach(a=>console.warn(a))}()}];

//# sourceMappingURL=_f0b46549._.js.map