{"version":3,"sources":["turbopack:///[project]/src/app/mixer/split/page.tsx","turbopack:///[project]/src/components/mixer/split/IssueTokenTab.tsx","turbopack:///[project]/node_modules/@heroicons/react/24/outline/esm/ArrowDownTrayIcon.js","turbopack:///[project]/src/orchestrator/steps/issueCashu.ts","turbopack:///[project]/src/components/mixer/split/RedeemTokenTab.tsx"],"sourcesContent":["'use client';\n\nimport React, { useState } from 'react';\nimport { useWallet } from '@/context/WalletProvider';\nimport { ShieldCheckIcon, ArrowPathIcon } from '@heroicons/react/24/outline';\nimport WalletConnection from '@/components/WalletConnection';\nimport Notification from '@/components/Notification';\nimport Navigation from '@/components/Navigation';\nimport { type WalletType } from '@/integrations/starknet/wallet';\nimport { IssueTokenTab } from '@/components/mixer/split/IssueTokenTab';\nimport { RedeemTokenTab } from '@/components/mixer/split/RedeemTokenTab';\n\ntype ActiveTab = 'issue' | 'redeem';\n\nexport default function SplitMixPage() {\n    const wallet = useWallet();\n    const [activeTab, setActiveTab] = useState<ActiveTab>('issue');\n    const [isConnected, setIsConnected] = useState(false);\n    const [showWalletModal, setShowWalletModal] = useState(false);\n    const [isConnecting, setIsConnecting] = useState(false);\n    const [notification, setNotification] = useState<{\n        show: boolean;\n        type: 'success' | 'error' | 'warning' | 'info';\n        title: string;\n        message: string;\n    }>({ show: false, type: 'info', title: '', message: '' });\n\n    const showNotification = (type: 'success' | 'error' | 'warning' | 'info', title: string, message: string) => {\n        setNotification({ show: true, type, title, message });\n    };\n\n    const handleWalletConnect = async (walletId: string) => {\n        setIsConnecting(true);\n        try {\n            const mapId = (id: string): WalletType => {\n                if (id.toLowerCase() === 'argentx') return 'argentX';\n                if (id.toLowerCase() === 'braavos') return 'braavos';\n                if (id.toLowerCase() === 'okx') return 'okx';\n                return 'argentX';\n            };\n\n            await wallet.connect(mapId(walletId));\n            setIsConnected(true);\n            setShowWalletModal(false);\n            showNotification('success', 'Wallet Connected', `Connected to ${walletId}`);\n        } catch {\n            showNotification('error', 'Connection Failed', 'Failed to connect wallet. Please try again.');\n        } finally {\n            setIsConnecting(false);\n        }\n    };\n\n    React.useEffect(() => {\n        setIsConnected(wallet.isConnected);\n    }, [wallet.isConnected]);\n\n    return (\n        <div className=\"min-h-screen bg-gray-950 text-white flex flex-col\">\n            {/* Navigation */}\n            <Navigation />\n\n            {/* Background Grid */}\n            <div className=\"fixed inset-0 bg-gray-950 -z-10\">\n                <div className=\"absolute inset-0 opacity-70 pointer-events-none\" style={{\n                    backgroundImage: \"url('/patterns/grid.svg')\",\n                    backgroundSize: '32px 32px',\n                    backgroundRepeat: 'repeat'\n                }}></div>\n            </div>\n\n            <div className=\"relative z-10 container mx-auto px-4 py-8 flex-1\">\n                {/* Header */}\n                <div className=\"text-center mb-12\">\n                    <h1 className=\"text-4xl font-bold mb-4 text-white\">Split Mix</h1>\n                    <p className=\"text-gray-400 text-lg\">\n                        Issue ecash tokens or redeem them for STRK\n                    </p>\n\n                    <div className=\"mt-6 flex justify-center\">\n                        {!isConnected ? (\n                            <button\n                                onClick={() => setShowWalletModal(true)}\n                                className=\"inline-flex items-center space-x-2 bg-orange-500 hover:bg-orange-600 text-white px-6 py-3 rounded-lg font-semibold transition\"\n                            >\n                                <ShieldCheckIcon className=\"w-5 h-5\" />\n                                <span>Connect Wallet</span>\n                            </button>\n                        ) : (\n                            <div className=\"inline-flex items-center space-x-2 bg-green-500/20 border border-green-500 text-green-400 px-6 py-3 rounded-lg\">\n                                <div className=\"w-2 h-2 bg-green-400 rounded-full animate-pulse\"></div>\n                                <span>Wallet Connected</span>\n                            </div>\n                        )}\n                    </div>\n                </div>\n\n                {/* Tabs */}\n                <div className=\"max-w-5xl mx-auto mb-6\">\n                    <div className=\"flex border-b border-gray-700\">\n                        <button\n                            onClick={() => setActiveTab('issue')}\n                            className={`flex-1 px-6 py-4 text-center font-semibold transition ${activeTab === 'issue'\n                                ? 'border-b-2 border-orange-500 text-orange-500'\n                                : 'text-gray-400 hover:text-gray-300'\n                                }`}\n                        >\n                            <div className=\"flex items-center justify-center space-x-2\">\n                                <ShieldCheckIcon className=\"w-5 h-5\" />\n                                <span>Issue Token</span>\n                            </div>\n                        </button>\n                        <button\n                            onClick={() => setActiveTab('redeem')}\n                            className={`flex-1 px-6 py-4 text-center font-semibold transition ${activeTab === 'redeem'\n                                ? 'border-b-2 border-orange-500 text-orange-500'\n                                : 'text-gray-400 hover:text-gray-300'\n                                }`}\n                        >\n                            <div className=\"flex items-center justify-center space-x-2\">\n                                <ArrowPathIcon className=\"w-5 h-5\" />\n                                <span>Redeem Token</span>\n                            </div>\n                        </button>\n                    </div>\n                </div>\n\n                {/* Tab Content */}\n                <div className=\"max-w-5xl mx-auto\">\n                    {activeTab === 'issue' ? (\n                        <IssueTokenTab\n                            isConnected={isConnected}\n                            onConnectWallet={() => setShowWalletModal(true)}\n                            showNotification={showNotification}\n                        />\n                    ) : (\n                        <RedeemTokenTab\n                            isConnected={isConnected}\n                            onConnectWallet={() => setShowWalletModal(true)}\n                            showNotification={showNotification}\n                        />\n                    )}\n                </div>\n            </div>\n\n            {/* Modals and Notifications */}\n            <WalletConnection\n                isOpen={showWalletModal}\n                onClose={() => setShowWalletModal(false)}\n                onConnect={handleWalletConnect}\n                isConnecting={isConnecting}\n            />\n\n            <Notification\n                type={notification.type}\n                title={notification.title}\n                message={notification.message}\n                isVisible={notification.show}\n                onClose={() => setNotification(prev => ({ ...prev, show: false }))}\n            />\n        </div>\n    );\n}\n","'use client';\n\nimport React, { useState } from 'react';\nimport {\n    BanknotesIcon,\n    DocumentDuplicateIcon,\n    ArrowDownTrayIcon,\n    ExclamationTriangleIcon,\n    CheckCircleIcon\n} from '@heroicons/react/24/outline';\nimport { issueCashuToken } from '@/orchestrator/steps/issueCashu';\nimport type { OrchestratorEvent } from '@/lib/types';\n\ntype IssueStatus = 'idle' | 'depositing' | 'withdrawing' | 'estimating' | 'creating_invoice' | 'swapping' | 'minting' | 'complete' | 'error';\n\ninterface IssueTokenTabProps {\n    isConnected: boolean;\n    onConnectWallet: () => void;\n    showNotification: (type: 'success' | 'error' | 'warning' | 'info', title: string, message: string) => void;\n}\n\nexport function IssueTokenTab({ isConnected, onConnectWallet, showNotification }: IssueTokenTabProps) {\n    const [amount, setAmount] = useState('');\n    const [status, setStatus] = useState<IssueStatus>('idle');\n    const [token, setToken] = useState('');\n    const [error, setError] = useState('');\n    const [progress, setProgress] = useState(0);\n    const [currentMessage, setCurrentMessage] = useState('');\n    const [satsValue, setSatsValue] = useState(0);\n\n    const handleIssue = async () => {\n        if (!isConnected) {\n            onConnectWallet();\n            return;\n        }\n\n        const amt = parseFloat(amount);\n        if (isNaN(amt) || amt <= 0) {\n            showNotification('error', 'Invalid Amount', 'Please enter a valid amount');\n            return;\n        }\n\n        setStatus('depositing');\n        setError('');\n        setProgress(0);\n\n        try {\n            const result = await issueCashuToken(amt, (event: OrchestratorEvent) => {\n                console.log('Issue event:', event);\n\n                if (event.progress !== undefined) {\n                    setProgress(event.progress);\n                }\n\n                if (event.message) {\n                    setCurrentMessage(event.message);\n                }\n\n                // Update status based on event type\n                if (event.type === 'issue:progress') {\n                    if (event.message?.includes('Deposit')) {\n                        setStatus('depositing');\n                    } else if (event.message?.includes('Withdraw')) {\n                        setStatus('withdrawing');\n                    } else if (event.message?.includes('Estimat')) {\n                        setStatus('estimating');\n                    } else if (event.message?.includes('invoice')) {\n                        setStatus('creating_invoice');\n                    } else if (event.message?.includes('Swap')) {\n                        setStatus('swapping');\n                    } else if (event.message?.includes('Claim') || event.message?.includes('token')) {\n                        setStatus('minting');\n                    }\n                } else if (event.type === 'issue:complete') {\n                    setStatus('complete');\n                } else if (event.type === 'issue:error') {\n                    setStatus('error');\n                    setError(event.message || 'Unknown error');\n                }\n            });\n\n            setToken(result.token);\n            setSatsValue(result.satsValue);\n            setStatus('complete');\n            showNotification('success', 'Token Issued', `Your ${result.satsValue} sats ecash token is ready`);\n\n        } catch (err) {\n            setStatus('error');\n            const errorMsg = err instanceof Error ? err.message : 'Unknown error';\n            setError(errorMsg);\n            showNotification('error', 'Issue Failed', errorMsg);\n        }\n    };\n\n    const copyToken = () => {\n        navigator.clipboard.writeText(token);\n        showNotification('success', 'Copied', 'Token copied to clipboard');\n    };\n\n    const downloadToken = () => {\n        const blob = new Blob([token], { type: 'text/plain' });\n        const url = URL.createObjectURL(blob);\n        const a = document.createElement('a');\n        a.href = url;\n        a.download = `cashu-token-${Date.now()}.txt`;\n        a.click();\n        URL.revokeObjectURL(url);\n        showNotification('success', 'Downloaded', 'Token saved to file');\n    };\n\n    const reset = () => {\n        setStatus('idle');\n        setAmount('');\n        setToken('');\n        setError('');\n        setProgress(0);\n        setCurrentMessage('');\n        setSatsValue(0);\n    };\n\n    const getStatusMessage = () => {\n        switch (status) {\n            case 'depositing':\n                return 'Depositing STRK to privacy mixer...';\n            case 'withdrawing':\n                return 'Withdrawing from mixer...';\n            case 'estimating':\n                return 'Estimating conversion rate...';\n            case 'creating_invoice':\n                return 'Creating Cashu mint invoice...';\n            case 'swapping':\n                return 'Swapping STRK to Lightning...';\n            case 'minting':\n                return 'Claiming Cashu token...';\n            default:\n                return currentMessage || 'Processing...';\n        }\n    };\n\n    return (\n        <div className=\"bg-gray-900 border border-gray-700 rounded-xl p-6\">\n            {status === 'idle' && (\n                <>\n                    <h2 className=\"text-xl font-bold mb-6 flex items-center space-x-3\">\n                        <BanknotesIcon className=\"w-6 h-6 text-blue-400\" />\n                        <span>Issue Ecash Token</span>\n                    </h2>\n\n                    <div className=\"mb-6\">\n                        <label className=\"block text-sm text-gray-300 mb-2\">Amount (STRK)</label>\n                        <input\n                            type=\"text\"\n                            inputMode=\"decimal\"\n                            value={amount}\n                            onChange={(e) => setAmount(e.target.value)}\n                            placeholder=\"0.00\"\n                            className=\"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-orange-500 focus:outline-none\"\n                        />\n                        <p className=\"text-xs text-gray-500 mt-1\">Minimum: 1.0 STRK</p>\n                    </div>\n\n                    <button\n                        onClick={handleIssue}\n                        disabled={!amount || parseFloat(amount) <= 0}\n                        className=\"w-full bg-orange-500 hover:bg-orange-600 disabled:bg-gray-700 disabled:cursor-not-allowed text-white py-3 rounded-lg font-semibold transition\"\n                    >\n                        {isConnected ? 'Issue Token' : 'Connect Wallet'}\n                    </button>\n\n                    <div className=\"mt-6 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg\">\n                        <p className=\"text-sm text-blue-300\">\n                            This creates a Cashu ecash token that you can store securely and redeem later for STRK.\n                        </p>\n                    </div>\n                </>\n            )}\n\n            {(status === 'depositing' || status === 'withdrawing' || status === 'estimating' ||\n                status === 'creating_invoice' || status === 'swapping' || status === 'minting') && (\n                    <div className=\"text-center py-12\">\n                        <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mb-4\"></div>\n                        <p className=\"text-gray-300 mb-2\">{getStatusMessage()}</p>\n                        {progress > 0 && (\n                            <div className=\"w-full bg-gray-700 rounded-full h-2 mt-4\">\n                                <div\n                                    className=\"bg-orange-500 h-2 rounded-full transition-all duration-300\"\n                                    style={{ width: `${progress}%` }}\n                                ></div>\n                            </div>\n                        )}\n                        <p className=\"text-sm text-gray-500 mt-2\">{progress}%</p>\n                    </div>\n                )}\n\n            {status === 'complete' && token && (\n                <div>\n                    <h2 className=\"text-xl font-bold mb-6 flex items-center space-x-3\">\n                        <CheckCircleIcon className=\"w-6 h-6 text-green-400\" />\n                        <span>Token Issued Successfully</span>\n                    </h2>\n\n                    <div className=\"mb-6 p-4 bg-green-500/10 border border-green-500/30 rounded-lg\">\n                        <p className=\"text-sm text-green-300 font-semibold mb-2\">\n                            IMPORTANT: Store this token securely!\n                        </p>\n                        <p className=\"text-sm text-green-300 mb-2\">\n                            This token represents real value ({satsValue} sats â‰ˆ {amount} STRK) and can be redeemed for STRK. Anyone with this token can redeem it.\n                        </p>\n                    </div>\n\n                    <div className=\"mb-4\">\n                        <label className=\"block text-sm text-gray-300 mb-2\">Ecash Token</label>\n                        <textarea\n                            readOnly\n                            value={token}\n                            className=\"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white font-mono text-sm resize-none\"\n                            rows={6}\n                        />\n                    </div>\n\n                    <div className=\"grid grid-cols-2 gap-3 mb-6\">\n                        <button\n                            onClick={copyToken}\n                            className=\"flex items-center justify-center space-x-2 bg-blue-500 hover:bg-blue-600 text-white py-3 rounded-lg font-semibold transition\"\n                        >\n                            <DocumentDuplicateIcon className=\"w-5 h-5\" />\n                            <span>Copy Token</span>\n                        </button>\n                        <button\n                            onClick={downloadToken}\n                            className=\"flex items-center justify-center space-x-2 bg-purple-500 hover:bg-purple-600 text-white py-3 rounded-lg font-semibold transition\"\n                        >\n                            <ArrowDownTrayIcon className=\"w-5 h-5\" />\n                            <span>Download</span>\n                        </button>\n                    </div>\n\n                    <button\n                        onClick={reset}\n                        className=\"w-full bg-gray-700 hover:bg-gray-600 text-white py-3 rounded-lg transition\"\n                    >\n                        Issue Another Token\n                    </button>\n                </div>\n            )}\n\n            {status === 'error' && error && (\n                <div>\n                    <h2 className=\"text-xl font-bold mb-6 flex items-center space-x-3\">\n                        <ExclamationTriangleIcon className=\"w-6 h-6 text-red-400\" />\n                        <span>Error</span>\n                    </h2>\n\n                    <div className=\"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-lg\">\n                        <p className=\"text-sm text-red-300\">{error}</p>\n                    </div>\n\n                    <button\n                        onClick={reset}\n                        className=\"w-full bg-gray-700 hover:bg-gray-600 text-white py-3 rounded-lg transition\"\n                    >\n                        Try Again\n                    </button>\n                </div>\n            )}\n        </div>\n    );\n}\n","import * as React from \"react\";\nfunction ArrowDownTrayIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M3 16.5v2.25A2.25 2.25 0 0 0 5.25 21h13.5A2.25 2.25 0 0 0 21 18.75V16.5M16.5 12 12 16.5m0 0L7.5 12m4.5 4.5V3\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ArrowDownTrayIcon);\nexport default ForwardRef;","import { OrchestratorEvent } from '@/lib/types';\nimport { stepDeposit } from './deposit';\nimport { stepWithdrawForMixing } from './withdrawForMixing';\nimport { stepDynamicEstimateSats } from './dynamicEstimateSats';\nimport { stepCreateMintInvoice } from './createMintInvoice';\nimport { stepSwapToLightning } from './swapToLightning';\nimport { stepClaimCashuProofs } from './claimCashuProofs';\n\nexport interface IssueCashuResult {\n    token: string; // Serialized Cashu token\n    amount: number; // STRK amount\n    satsValue: number; // sats value of the token\n    mintUrl: string;\n    depositInfo: {\n        commitmentHash: string;\n        secret: string;\n        nullifier: string;\n        mixerContractAddress: string;\n    };\n}\n\n/**\n * Issue Token Flow:\n * 1. Deposit STRK to privacy mixer contract\n * 2. Withdraw from mixer for mixing pipeline  \n * 3. Estimate STRKâ†’sats conversion rate\n * 4. Create Cashu mint invoice\n * 5. Swap STRKâ†’Lightning via Atomiq (paying mint invoice)\n * 6. Claim Cashu proofs from mint\n * 7. Serialize proofs as bearer token\n */\nexport async function issueCashuToken(\n    amountStrk: number,\n    onEvent: (e: OrchestratorEvent) => void\n): Promise<IssueCashuResult> {\n    console.log('ðŸŽ« SLPM Issue Token: Starting issue flow for', amountStrk, 'STRK');\n\n    try {\n        // Step 1: Deposit STRK to privacy mixer contract\n        console.log('ðŸ’° SLPM Issue Token: Step 1 - Depositing STRK to privacy mixer...');\n        onEvent({\n            type: 'issue:progress',\n            message: 'Depositing STRK to privacy mixer...',\n            progress: 10\n        });\n\n        const depositResult = await stepDeposit(amountStrk, (e) => {\n            // Map deposit events to issue events\n            if (e.type === 'deposit:initiated') {\n                onEvent({ type: 'issue:progress', message: e.message, progress: 12 });\n            } else if (e.type === 'deposit:wallet_connected') {\n                onEvent({ type: 'issue:progress', message: e.message, progress: 15 });\n            } else if (e.type === 'deposit:balance_checked') {\n                onEvent({ type: 'issue:progress', message: e.message, progress: 18 });\n            } else if (e.type === 'deposit:confirmed') {\n                onEvent({ type: 'issue:progress', message: 'Deposit complete', progress: 20 });\n            }\n        });\n\n        console.log('âœ… SLPM Issue Token: Deposit complete:', {\n            commitment: depositResult.commitmentHash.slice(0, 10) + '...',\n            amount: depositResult.amount\n        });\n\n        // Step 2: Withdraw from mixer for mixing pipeline\n        console.log('ðŸ”„ SLPM Issue Token: Step 2 - Withdrawing from mixer...');\n        onEvent({\n            type: 'issue:progress',\n            message: 'Withdrawing from mixer for swap...',\n            progress: 25\n        });\n\n        const withdrawalResult = await stepWithdrawForMixing(depositResult, (e) => {\n            if (e.type === 'deposit:preparing_withdrawal') {\n                onEvent({ type: 'issue:progress', message: e.message, progress: 28 });\n            }\n        });\n\n        console.log('âœ… SLPM Issue Token: Withdrawal complete:', {\n            availableForSwap: withdrawalResult.availableForSwap,\n            amount: withdrawalResult.amount\n        });\n\n        // Step 3: Estimate STRKâ†’sats conversion\n        console.log('ðŸ’± SLPM Issue Token: Step 3 - Estimating STRKâ†’sats...');\n        onEvent({\n            type: 'issue:progress',\n            message: 'Estimating conversion rate...',\n            progress: 35\n        });\n\n        const dynamicEstimate = await stepDynamicEstimateSats(withdrawalResult.amount, onEvent);\n        console.log('ðŸ’° SLPM Issue Token: Estimated', withdrawalResult.amount, 'STRK â†’', dynamicEstimate.satsOut, 'sats');\n\n        // Step 4: Create Cashu mint invoice\n        console.log('ðŸŽŸï¸ SLPM Issue Token: Step 4 - Creating Cashu mint invoice...');\n        onEvent({\n            type: 'issue:progress',\n            message: 'Creating Cashu mint invoice...',\n            progress: 40\n        });\n\n        const mintInvoiceResult = await stepCreateMintInvoice(dynamicEstimate.satsOut, onEvent);\n        const invoicePreview = mintInvoiceResult.mintQuote.request\n            ? mintInvoiceResult.mintQuote.request.slice(0, 30) + '...'\n            : 'n/a';\n        console.log('âœ… SLPM Issue Token: Mint invoice created:', {\n            quoteId: mintInvoiceResult.mintQuote.quote,\n            amount: dynamicEstimate.satsOut,\n            invoice: invoicePreview\n        });\n\n        // Step 5: Swap STRKâ†’Lightning via Atomiq (pays the invoice)\n        console.log('âš¡ SLPM Issue Token: Step 5 - Swapping STRKâ†’Lightning...');\n        onEvent({\n            type: 'issue:progress',\n            message: 'Swapping STRK to Lightning...',\n            progress: 50\n        });\n\n        const lightningResult = await stepSwapToLightning(\n            withdrawalResult.amount,\n            {\n                walletAddress: withdrawalResult.originalDeposit.walletAddress,\n                mixerContractAddress: withdrawalResult.originalDeposit.mixerContractAddress,\n                fundsAvailable: withdrawalResult.availableForSwap\n            },\n            mintInvoiceResult,\n            onEvent\n        );\n\n        console.log('âœ… SLPM Issue Token: Lightning swap complete:', {\n            executionId: lightningResult.executionId,\n            paymentHash: lightningResult.lightningPaymentHash?.slice(0, 10) + '...'\n        });\n\n        // Step 6: Claim Cashu proofs from mint\n        console.log('ðŸŽ« SLPM Issue Token: Step 6 - Claiming Cashu proofs...');\n        onEvent({\n            type: 'issue:progress',\n            message: 'Claiming Cashu token...',\n            progress: 75\n        });\n\n        const cashuProofs = await stepClaimCashuProofs(\n            mintInvoiceResult.mintQuote,\n            mintInvoiceResult.cashu,\n            dynamicEstimate.satsOut,\n            onEvent\n        );\n\n        console.log('âœ… SLPM Issue Token: Cashu proofs claimed:', {\n            proofsCount: cashuProofs.length,\n            totalValue: cashuProofs.reduce((sum: number, p: any) => sum + Number(p.amount), 0)\n        });\n\n        // Step 7: Serialize proofs as bearer token\n        console.log('ðŸ“¦ SLPM Issue Token: Step 7 - Serializing token...');\n        onEvent({\n            type: 'issue:progress',\n            message: 'Creating bearer token...',\n            progress: 90\n        });\n\n        const serializedToken = mintInvoiceResult.cashu.createToken(cashuProofs);\n        console.log('âœ… SLPM Issue Token: Token serialized:', {\n            tokenLength: serializedToken.length,\n            tokenPreview: serializedToken.slice(0, 50) + '...'\n        });\n\n        onEvent({\n            type: 'issue:complete',\n            message: 'Token issued successfully!',\n            progress: 100\n        });\n\n        return {\n            token: serializedToken,\n            amount: amountStrk,\n            satsValue: dynamicEstimate.satsOut,\n            mintUrl: mintInvoiceResult.mintQuote.request || 'unknown',\n            depositInfo: {\n                commitmentHash: depositResult.commitmentHash,\n                secret: depositResult.secret,\n                nullifier: depositResult.nullifier,\n                mixerContractAddress: depositResult.mixerContractAddress\n            }\n        };\n\n    } catch (error: any) {\n        console.error('âŒ SLPM Issue Token: Error:', error);\n        onEvent({\n            type: 'issue:error',\n            message: error.message || 'Failed to issue token'\n        });\n        throw error;\n    }\n}\n","'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport {\n    ArrowPathIcon,\n    CheckCircleIcon,\n    ExclamationTriangleIcon,\n    BoltIcon,\n    CurrencyDollarIcon\n} from '@heroicons/react/24/outline';\n\ntype RedeemStatus = 'idle' | 'validating' | 'creating_swap' | 'melting' | 'claiming' | 'forwarding' | 'complete' | 'error';\ntype SettlementType = 'strk' | 'lightning';\n\ninterface RedeemTokenTabProps {\n    isConnected: boolean;\n    onConnectWallet: () => void;\n    showNotification: (type: 'success' | 'error' | 'warning' | 'info', title: string, message: string) => void;\n}\n\nexport function RedeemTokenTab({ isConnected, onConnectWallet, showNotification }: RedeemTokenTabProps) {\n    const [token, setToken] = useState('');\n    const [recipient, setRecipient] = useState('');\n    const [lightningInvoice, setLightningInvoice] = useState('');\n    const [settlementType, setSettlementType] = useState<SettlementType>('strk');\n    const [status, setStatus] = useState<RedeemStatus>('idle');\n    const [error, setError] = useState('');\n    const [progress, setProgress] = useState(0);\n    const [txHash, setTxHash] = useState('');\n    const [changeToken, setChangeToken] = useState('');\n    const [calculatedAmount, setCalculatedAmount] = useState<{ maxAmount: number; availableBalance: number } | null>(null);\n    const [isCalculating, setIsCalculating] = useState(false);\n\n    // Calculate max invoice amount when token changes and Lightning settlement is selected\n    useEffect(() => {\n        const calculateAmount = async () => {\n            if (!token.trim() || settlementType !== 'lightning') {\n                setCalculatedAmount(null);\n                return;\n            }\n\n            setIsCalculating(true);\n            try {\n                const { calculateMaxInvoiceAmount } = await import('@/integrations/cashu/direct');\n                const result = await calculateMaxInvoiceAmount(token);\n\n                if (result.success) {\n                    setCalculatedAmount({\n                        maxAmount: result.maxAmount,\n                        availableBalance: result.availableBalance\n                    });\n                } else {\n                    setCalculatedAmount(null);\n                    showNotification('warning', 'Invalid Token', 'Could not calculate invoice amount from token');\n                }\n            } catch (err) {\n                setCalculatedAmount(null);\n            } finally {\n                setIsCalculating(false);\n            }\n        };\n\n        // Debounce the calculation\n        const timeoutId = setTimeout(calculateAmount, 500);\n        return () => clearTimeout(timeoutId);\n    }, [token, settlementType, showNotification]);\n\n    const handleRedeem = async () => {\n        if (!isConnected && settlementType === 'strk') {\n            onConnectWallet();\n            return;\n        }\n\n        if (!token.trim()) {\n            showNotification('error', 'Missing Token', 'Please enter an ecash token');\n            return;\n        }\n\n        if (settlementType === 'strk' && !recipient.trim()) {\n            showNotification('error', 'Missing Recipient', 'Please enter a recipient address');\n            return;\n        }\n\n        if (settlementType === 'lightning' && !lightningInvoice.trim()) {\n            showNotification('error', 'Missing Invoice', 'Please enter a Lightning invoice');\n            return;\n        }\n\n        setStatus('validating');\n        setError('');\n        setProgress(10);\n\n        try {\n            if (settlementType === 'lightning') {\n                // Direct melt to Lightning invoice\n                const { redeemToLightning } = await import('@/orchestrator/steps/redeemCashu');\n\n                await redeemToLightning(token, lightningInvoice, (event: any) => {\n                    if (event.type === 'redeem:validating') {\n                        setStatus('validating');\n                        setProgress(20);\n                    }\n                    if (event.type === 'redeem:melting') {\n                        setStatus('melting');\n                        setProgress(60);\n                        showNotification('info', 'Melting Ecash', 'Converting ecash to Lightning payment');\n                    }\n                    if (event.type === 'redeem:complete') {\n                        setStatus('complete');\n                        setProgress(100);\n                        if (event.changeToken) setChangeToken(event.changeToken);\n                        showNotification('success', 'Payment Complete', 'Lightning invoice paid');\n                    }\n                    if (event.type === 'redeem:error') {\n                        setStatus('error');\n                        setError(event.message || 'Payment failed');\n                        showNotification('error', 'Payment Failed', event.message || 'Unknown error');\n                    }\n                });\n            } else {\n                // Standard flow: melt to Lightning then swap to STRK\n                const { redeemCashuToken } = await import('@/orchestrator/steps/redeemCashu');\n\n                await redeemCashuToken(token, recipient, (event: any) => {\n                    // Handle progress events\n                    if (event.type === 'redeem:validating') {\n                        setStatus('validating');\n                        setProgress(20);\n                    }\n                    if (event.type === 'redeem:creating_swap') {\n                        setStatus('creating_swap');\n                        setProgress(30);\n                        showNotification('info', 'Creating Swap', 'Preparing Lightning to STRK swap');\n                    }\n                    if (event.type === 'redeem:melting') {\n                        setStatus('melting');\n                        setProgress(50);\n                        showNotification('info', 'Melting Ecash', 'Converting ecash to Lightning payment');\n                    }\n                    if (event.type === 'redeem:claiming') {\n                        setStatus('claiming');\n                        setProgress(70);\n                        showNotification('info', 'Claiming Swap', 'Finalizing STRK transfer');\n                    }\n                    if (event.type === 'redeem:forwarding') {\n                        setStatus('forwarding');\n                        setProgress(85);\n                    }\n                    if (event.type === 'redeem:complete') {\n                        setStatus('complete');\n                        setProgress(100);\n                        if (event.txHash) setTxHash(event.txHash);\n                        if (event.changeToken) setChangeToken(event.changeToken);\n                        showNotification('success', 'Redemption Complete', 'STRK sent to recipient');\n                    }\n                    if (event.type === 'redeem:error') {\n                        setStatus('error');\n                        setError(event.message || 'Redemption failed');\n                        showNotification('error', 'Redemption Failed', event.message || 'Unknown error');\n                    }\n                });\n            }\n\n        } catch (err) {\n            setStatus('error');\n            setError(err instanceof Error ? err.message : 'Unknown error');\n            showNotification('error', 'Redemption Failed', err instanceof Error ? err.message : 'Unknown error');\n        }\n    };\n\n    const reset = () => {\n        setStatus('idle');\n        setToken('');\n        setRecipient('');\n        setLightningInvoice('');\n        setSettlementType('strk');\n        setError('');\n        setProgress(0);\n        setTxHash('');\n        setChangeToken('');\n        setCalculatedAmount(null);\n    };\n\n    const getStatusText = () => {\n        switch (status) {\n            case 'validating': return 'Validating token...';\n            case 'creating_swap': return 'Creating Lightning to STRK swap...';\n            case 'melting': return 'Melting ecash to Lightning...';\n            case 'claiming': return 'Claiming STRK on Starknet...';\n            case 'forwarding': return 'Forwarding STRK to recipient...';\n            default: return '';\n        }\n    };\n\n    return (\n        <div className=\"bg-gray-900 border border-gray-700 rounded-xl p-6\">\n            {status === 'idle' && (\n                <>\n                    <h2 className=\"text-xl font-bold mb-6 flex items-center space-x-3\">\n                        <ArrowPathIcon className=\"w-6 h-6 text-blue-400\" />\n                        <span>Redeem Ecash Token</span>\n                    </h2>\n\n                    <div className=\"mb-6\">\n                        <label className=\"block text-sm text-gray-300 mb-2\">Ecash Token</label>\n                        <textarea\n                            value={token}\n                            onChange={(e) => setToken(e.target.value)}\n                            placeholder=\"cashuAeyJ0...\"\n                            className=\"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-orange-500 focus:outline-none font-mono text-sm resize-none\"\n                            rows={4}\n                        />\n                        <p className=\"text-xs text-gray-500 mt-1\">Paste your full ecash token here</p>\n                    </div>\n\n                    {/* Settlement Type Selector */}\n                    <div className=\"mb-6\">\n                        <label className=\"block text-sm text-gray-300 mb-3\">Settlement Type</label>\n                        <div className=\"grid grid-cols-2 gap-3\">\n                            <button\n                                onClick={() => setSettlementType('strk')}\n                                className={`flex items-center justify-center space-x-2 px-4 py-3 rounded-lg border-2 transition ${settlementType === 'strk'\n                                        ? 'border-orange-500 bg-orange-500/20 text-orange-400'\n                                        : 'border-gray-600 bg-gray-800 text-gray-400 hover:border-gray-500'\n                                    }`}\n                            >\n                                <CurrencyDollarIcon className=\"w-5 h-5\" />\n                                <span className=\"font-semibold\">STRK Token</span>\n                            </button>\n                            <button\n                                onClick={() => setSettlementType('lightning')}\n                                className={`flex items-center justify-center space-x-2 px-4 py-3 rounded-lg border-2 transition ${settlementType === 'lightning'\n                                        ? 'border-orange-500 bg-orange-500/20 text-orange-400'\n                                        : 'border-gray-600 bg-gray-800 text-gray-400 hover:border-gray-500'\n                                    }`}\n                            >\n                                <BoltIcon className=\"w-5 h-5\" />\n                                <span className=\"font-semibold\">Lightning Invoice</span>\n                            </button>\n                        </div>\n                        <p className=\"text-xs text-gray-500 mt-2\">\n                            {settlementType === 'strk'\n                                ? 'Convert ecash to STRK tokens on Starknet'\n                                : 'Pay a Lightning invoice directly from ecash'}\n                        </p>\n                    </div>\n\n                    {/* Conditional Fields Based on Settlement Type */}\n                    {settlementType === 'strk' ? (\n                        <div className=\"mb-6\">\n                            <label className=\"block text-sm text-gray-300 mb-2\">Recipient Address</label>\n                            <input\n                                type=\"text\"\n                                value={recipient}\n                                onChange={(e) => setRecipient(e.target.value)}\n                                placeholder=\"0x1234567890abcdef...\"\n                                className=\"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-orange-500 focus:outline-none\"\n                            />\n                            <p className=\"text-xs text-gray-500 mt-1\">Starknet address to receive STRK</p>\n                        </div>\n                    ) : (\n                        <>\n                            <div className=\"mb-4\">\n                                <label className=\"block text-sm text-gray-300 mb-2\">Lightning Invoice</label>\n                                <textarea\n                                    value={lightningInvoice}\n                                    onChange={(e) => setLightningInvoice(e.target.value)}\n                                    placeholder=\"lnbc...\"\n                                    className=\"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-orange-500 focus:outline-none font-mono text-sm resize-none\"\n                                    rows={3}\n                                />\n                                <p className=\"text-xs text-gray-500 mt-1\">Enter the Lightning invoice to pay</p>\n                            </div>\n\n                            {/* Show calculated amount */}\n                            {isCalculating && (\n                                <div className=\"mb-6 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg\">\n                                    <p className=\"text-sm text-blue-300\">\n                                        Calculating maximum invoice amount...\n                                    </p>\n                                </div>\n                            )}\n\n                            {calculatedAmount && !isCalculating && (\n                                <div className=\"mb-6 p-4 bg-green-500/10 border border-green-500/30 rounded-lg\">\n                                    <p className=\"text-sm text-green-300 font-semibold mb-2\">\n                                        Recommended Invoice Amount\n                                    </p>\n                                    <div className=\"space-y-1\">\n                                        <p className=\"text-lg text-green-400 font-bold\">\n                                            {calculatedAmount.maxAmount} sats\n                                        </p>\n                                        <p className=\"text-xs text-green-300\">\n                                            Available balance: {calculatedAmount.availableBalance} sats\n                                        </p>\n                                        <p className=\"text-xs text-gray-400 mt-2\">\n                                            Formula: invoice_amount = balance - max(2, 0.01Ã—amount) - 1\n                                        </p>\n                                    </div>\n                                </div>\n                            )}\n                        </>\n                    )}\n\n                    <button\n                        onClick={handleRedeem}\n                        disabled={\n                            !token.trim() ||\n                            (settlementType === 'strk' && (!recipient.trim() || !isConnected)) ||\n                            (settlementType === 'lightning' && !lightningInvoice.trim())\n                        }\n                        className=\"w-full bg-orange-500 hover:bg-orange-600 disabled:bg-gray-700 disabled:cursor-not-allowed text-white py-3 rounded-lg font-semibold transition\"\n                    >\n                        {settlementType === 'strk'\n                            ? (isConnected ? 'Redeem to STRK' : 'Connect Wallet')\n                            : 'Pay Lightning Invoice'}\n                    </button>\n\n                    <div className=\"mt-6 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg\">\n                        <p className=\"text-sm text-blue-300\">\n                            {settlementType === 'strk'\n                                ? 'Your ecash token will be converted to Lightning BTC, then swapped to STRK and sent to the recipient address.'\n                                : 'Your ecash token will be melted to pay the Lightning invoice. Make sure the invoice amount matches the recommended amount above.'}\n                        </p>\n                    </div>\n                </>\n            )}\n\n            {(status === 'validating' || status === 'creating_swap' || status === 'melting' || status === 'claiming' || status === 'forwarding') && (\n                <div className=\"py-12\">\n                    <div className=\"text-center mb-8\">\n                        <div className=\"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-orange-500 mb-4\"></div>\n                        <p className=\"text-gray-300 font-semibold\">{getStatusText()}</p>\n                    </div>\n\n                    <div className=\"max-w-md mx-auto\">\n                        <div className=\"mb-2 flex justify-between text-sm text-gray-400\">\n                            <span>Progress</span>\n                            <span>{progress}%</span>\n                        </div>\n                        <div className=\"w-full bg-gray-700 rounded-full h-2\">\n                            <div\n                                className=\"bg-orange-500 h-2 rounded-full transition-all duration-300\"\n                                style={{ width: `${progress}%` }}\n                            />\n                        </div>\n                    </div>\n\n                    <div className=\"mt-8 text-center\">\n                        <p className=\"text-sm text-gray-500\">This may take a few moments...</p>\n                    </div>\n                </div>\n            )}\n\n            {status === 'complete' && (\n                <div>\n                    <h2 className=\"text-xl font-bold mb-6 flex items-center space-x-3\">\n                        <CheckCircleIcon className=\"w-6 h-6 text-green-400\" />\n                        <span>Redemption Complete</span>\n                    </h2>\n\n                    <div className=\"mb-6 p-4 bg-green-500/10 border border-green-500/30 rounded-lg\">\n                        <p className=\"text-sm text-green-300 font-semibold mb-2\">\n                            Success!\n                        </p>\n                        <p className=\"text-sm text-green-300\">\n                            STRK has been sent to the recipient address.\n                        </p>\n                    </div>\n\n                    {txHash && (\n                        <div className=\"mb-6\">\n                            <label className=\"block text-sm text-gray-300 mb-2\">Transaction Hash</label>\n                            <div className=\"bg-gray-800 border border-gray-600 rounded-lg px-4 py-3\">\n                                <p className=\"text-white font-mono text-sm break-all\">{txHash}</p>\n                            </div>\n                        </div>\n                    )}\n\n                    {changeToken && (\n                        <div className=\"mb-6 p-4 bg-blue-500/10 border border-blue-500/30 rounded-lg\">\n                            <p className=\"text-sm text-blue-300 font-semibold mb-2\">\n                                Change Token Available\n                            </p>\n                            <p className=\"text-sm text-blue-300 mb-3\">\n                                Your redemption had leftover value. Here is your change token:\n                            </p>\n                            <textarea\n                                readOnly\n                                value={changeToken}\n                                className=\"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white font-mono text-sm resize-none\"\n                                rows={4}\n                            />\n                            <button\n                                onClick={() => {\n                                    navigator.clipboard.writeText(changeToken);\n                                    showNotification('success', 'Copied', 'Change token copied to clipboard');\n                                }}\n                                className=\"mt-2 w-full bg-blue-500 hover:bg-blue-600 text-white py-2 rounded-lg transition\"\n                            >\n                                Copy Change Token\n                            </button>\n                        </div>\n                    )}\n\n                    <button\n                        onClick={reset}\n                        className=\"w-full bg-gray-700 hover:bg-gray-600 text-white py-3 rounded-lg transition\"\n                    >\n                        Redeem Another Token\n                    </button>\n                </div>\n            )}\n\n            {status === 'error' && error && (\n                <div>\n                    <h2 className=\"text-xl font-bold mb-6 flex items-center space-x-3\">\n                        <ExclamationTriangleIcon className=\"w-6 h-6 text-red-400\" />\n                        <span>Error</span>\n                    </h2>\n\n                    <div className=\"mb-6 p-4 bg-red-500/10 border border-red-500/30 rounded-lg\">\n                        <p className=\"text-sm text-red-300\">{error}</p>\n                    </div>\n\n                    <button\n                        onClick={reset}\n                        className=\"w-full bg-gray-700 hover:bg-gray-600 text-white py-3 rounded-lg transition\"\n                    >\n                        Try Again\n                    </button>\n                </div>\n            )}\n        </div>\n    );\n}\n"],"names":[],"mappings":"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","ignoreList":[2]}