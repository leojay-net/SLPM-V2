{"version":3,"sources":["turbopack:///[project]/src/components/WalletConnection.tsx","turbopack:///[project]/node_modules/@heroicons/react/24/outline/esm/CreditCardIcon.js","turbopack:///[project]/node_modules/@heroicons/react/24/outline/esm/KeyIcon.js","turbopack:///[project]/node_modules/@heroicons/react/24/outline/esm/ShieldExclamationIcon.js","turbopack:///[project]/node_modules/@heroicons/react/24/outline/esm/CircleStackIcon.js","turbopack:///[project]/src/components/Notification.tsx","turbopack:///[project]/node_modules/@heroicons/react/24/outline/esm/XCircleIcon.js","turbopack:///[project]/src/orchestrator/steps/deposit.ts","turbopack:///[project]/src/utils/zk.ts","turbopack:///[project]/src/orchestrator/steps/withdrawForMixing.ts","turbopack:///[project]/src/orchestrator/steps/dynamicEstimateSats.ts","turbopack:///[project]/src/integrations/cashu/client.ts","turbopack:///[project]/src/orchestrator/steps/createMintInvoice.ts","turbopack:///[project]/src/orchestrator/steps/swapToLightning.ts","turbopack:///[project]/src/orchestrator/steps/claimCashuProofs.ts"],"sourcesContent":["\"use client\";\nimport React, { useState } from 'react';\nimport { WalletIcon, CreditCardIcon, KeyIcon, ShieldCheckIcon, ShieldExclamationIcon, CircleStackIcon } from '@heroicons/react/24/outline';\n\ninterface WalletOption {\n    id: string;\n    name: string;\n    icon: string;\n    description: string;\n    isInstalled: boolean;\n    isPopular?: boolean;\n}\n\ninterface WalletConnectionProps {\n    isOpen: boolean;\n    onClose: () => void;\n    onConnect: (walletId: string) => void;\n    isConnecting: boolean;\n}\n\nexport default function WalletConnection({ isOpen, onClose, onConnect, isConnecting }: WalletConnectionProps) {\n    const [selectedWallet, setSelectedWallet] = useState<string>('');\n\n    const wallets: WalletOption[] = [\n        {\n            id: 'argentx',\n            name: 'ArgentX',\n            icon: 'argentx',\n            description: 'Most popular Starknet wallet with advanced features',\n            isInstalled: typeof window !== 'undefined' && !!(window as any).starknet_argentX,\n            isPopular: true\n        },\n        {\n            id: 'braavos',\n            name: 'Braavos',\n            icon: 'braavos',\n            description: 'Security-focused wallet with hardware support',\n            isInstalled: typeof window !== 'undefined' && !!(window as any).starknet_braavos\n        },\n        {\n            id: 'okx',\n            name: 'OKX Wallet',\n            icon: 'okx',\n            description: 'Multi-chain wallet with DeFi integration',\n            isInstalled: typeof window !== 'undefined' && !!(window as any).starknet_okxwallet\n        }\n    ];\n\n    const handleConnect = (walletId: string) => {\n        setSelectedWallet(walletId);\n        onConnect(walletId);\n    };\n\n    if (!isOpen) return null;\n\n    return (\n        <div className=\"fixed inset-0 bg-black/50 backdrop-blur-sm z-50 flex items-center justify-center p-4\">\n            <div className=\"bg-gray-900 border border-gray-700 rounded-xl max-w-md w-full p-6 shadow-2xl\">\n                <div className=\"flex items-center justify-between mb-6\">\n                    <div className=\"flex items-center space-x-3\">\n                        <WalletIcon className=\"w-6 h-6 text-blue-400\" />\n                        <h2 className=\"text-xl font-bold text-white\">Connect Wallet</h2>\n                    </div>\n                    <button\n                        onClick={onClose}\n                        className=\"text-gray-400 hover:text-white transition-colors\"\n                    >\n                        <svg className=\"w-6 h-6\" fill=\"none\" stroke=\"currentColor\" viewBox=\"0 0 24 24\">\n                            <path strokeLinecap=\"round\" strokeLinejoin=\"round\" strokeWidth={2} d=\"M6 18L18 6M6 6l12 12\" />\n                        </svg>\n                    </button>\n                </div>\n\n                <div className=\"space-y-3\">\n                    {wallets.map((wallet) => (\n                        <div key={wallet.id} className=\"relative\">\n                            <button\n                                onClick={() => handleConnect(wallet.id)}\n                                disabled={isConnecting || !wallet.isInstalled}\n                                className={`w-full p-4 rounded-lg border transition-all duration-200 ${wallet.isInstalled\n                                        ? 'border-gray-600 hover:border-orange-500 hover:bg-gray-800 focus:border-orange-500 focus:ring-2 focus:ring-orange-500/20'\n                                        : 'border-gray-700 bg-gray-800/50 cursor-not-allowed opacity-50'\n                                    } ${selectedWallet === wallet.id && isConnecting\n                                        ? 'border-orange-500 bg-orange-500/10'\n                                        : ''\n                                    }`}\n                            >\n                                <div className=\"flex items-center space-x-4\">\n                                    <div className=\"w-12 h-12 bg-gray-800 rounded-lg flex items-center justify-center\">\n                                        {wallet.id === 'argentx' && <ShieldCheckIcon className=\"w-6 h-6 text-blue-400\" />}\n                                        {wallet.id === 'braavos' && <ShieldExclamationIcon className=\"w-6 h-6 text-orange-400\" />}\n                                        {wallet.id === 'okx' && <CircleStackIcon className=\"w-6 h-6 text-gray-300\" />}\n                                    </div>\n                                    <div className=\"flex-1 text-left\">\n                                        <div className=\"flex items-center space-x-2\">\n                                            <h3 className=\"font-semibold text-white\">{wallet.name}</h3>\n                                            {wallet.isPopular && (\n                                                <span className=\"px-2 py-1 bg-orange-500/20 text-orange-400 text-xs rounded font-medium\">\n                                                    Popular\n                                                </span>\n                                            )}\n                                        </div>\n                                        <p className=\"text-sm text-gray-400 mt-1\">{wallet.description}</p>\n                                        {!wallet.isInstalled && (\n                                            <p className=\"text-xs text-red-400 mt-1\">Not installed</p>\n                                        )}\n                                    </div>\n                                    <div className=\"flex items-center space-x-2\">\n                                        {wallet.isInstalled ? (\n                                            <ShieldCheckIcon className=\"w-5 h-5 text-green-400\" />\n                                        ) : (\n                                            <KeyIcon className=\"w-5 h-5 text-gray-600\" />\n                                        )}\n                                        {selectedWallet === wallet.id && isConnecting && (\n                                            <div className=\"w-4 h-4 border-2 border-orange-500 border-t-transparent rounded-full animate-spin\"></div>\n                                        )}\n                                    </div>\n                                </div>\n                            </button>\n                        </div>\n                    ))}\n                </div>\n\n                <div className=\"mt-6 p-4 bg-gray-800/50 rounded-lg border border-gray-700\">\n                    <div className=\"flex items-start space-x-3\">\n                        <CreditCardIcon className=\"w-5 h-5 text-blue-400 flex-shrink-0 mt-0.5\" />\n                        <div>\n                            <h4 className=\"font-medium text-white\">Wallet Security</h4>\n                            <p className=\"text-sm text-gray-400 mt-1\">\n                                Only connect wallets you trust. The mixer requires transaction signing for privacy operations.\n                            </p>\n                        </div>\n                    </div>\n                </div>\n\n                <div className=\"mt-4 text-center\">\n                    <p className=\"text-xs text-gray-500\">\n                        Don&apos;t have a wallet?{' '}\n                        <a\n                            href=\"https://www.argent.xyz/starknet/\"\n                            target=\"_blank\"\n                            rel=\"noopener noreferrer\"\n                            className=\"text-orange-400 hover:text-orange-300 transition-colors\"\n                        >\n                            Install ArgentX\n                        </a>\n                    </p>\n                </div>\n            </div>\n        </div>\n    );\n}\n","import * as React from \"react\";\nfunction CreditCardIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M2.25 8.25h19.5M2.25 9h19.5m-16.5 5.25h6m-6 2.25h3m-3.75 3h15a2.25 2.25 0 0 0 2.25-2.25V6.75A2.25 2.25 0 0 0 19.5 4.5h-15a2.25 2.25 0 0 0-2.25 2.25v10.5A2.25 2.25 0 0 0 4.5 19.5Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CreditCardIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction KeyIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M15.75 5.25a3 3 0 0 1 3 3m3 0a6 6 0 0 1-7.029 5.912c-.563-.097-1.159.026-1.563.43L10.5 17.25H8.25v2.25H6v2.25H2.25v-2.818c0-.597.237-1.17.659-1.591l6.499-6.499c.404-.404.527-1 .43-1.563A6 6 0 1 1 21.75 8.25Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(KeyIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction ShieldExclamationIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M12 9v3.75m0-10.036A11.959 11.959 0 0 1 3.598 6 11.99 11.99 0 0 0 3 9.75c0 5.592 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.31-.21-2.57-.598-3.75h-.152c-3.196 0-6.1-1.25-8.25-3.286Zm0 13.036h.008v.008H12v-.008Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(ShieldExclamationIcon);\nexport default ForwardRef;","import * as React from \"react\";\nfunction CircleStackIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"M20.25 6.375c0 2.278-3.694 4.125-8.25 4.125S3.75 8.653 3.75 6.375m16.5 0c0-2.278-3.694-4.125-8.25-4.125S3.75 4.097 3.75 6.375m16.5 0v11.25c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125V6.375m16.5 0v3.75m-16.5-3.75v3.75m16.5 0v3.75C20.25 16.153 16.556 18 12 18s-8.25-1.847-8.25-4.125v-3.75m16.5 0c0 2.278-3.694 4.125-8.25 4.125s-8.25-1.847-8.25-4.125\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(CircleStackIcon);\nexport default ForwardRef;","import React from 'react';\nimport { CheckCircleIcon, ExclamationTriangleIcon, InformationCircleIcon, XCircleIcon } from '@heroicons/react/24/outline';\n\ninterface NotificationProps {\n    type: 'success' | 'error' | 'warning' | 'info';\n    title: string;\n    message: string;\n    isVisible: boolean;\n    onClose: () => void;\n    autoClose?: boolean;\n    duration?: number;\n}\n\nexport default function Notification({\n    type,\n    title,\n    message,\n    isVisible,\n    onClose,\n    autoClose = true,\n    duration = 5000\n}: NotificationProps) {\n    React.useEffect(() => {\n        if (isVisible && autoClose) {\n            const timer = setTimeout(onClose, duration);\n            return () => clearTimeout(timer);\n        }\n    }, [isVisible, autoClose, duration, onClose]);\n\n    if (!isVisible) return null;\n\n    const typeConfig = {\n        success: {\n            icon: CheckCircleIcon,\n            bgColor: 'bg-green-500/10',\n            borderColor: 'border-green-500/20',\n            iconColor: 'text-green-400',\n            titleColor: 'text-green-300'\n        },\n        error: {\n            icon: XCircleIcon,\n            bgColor: 'bg-red-500/10',\n            borderColor: 'border-red-500/20',\n            iconColor: 'text-red-400',\n            titleColor: 'text-red-300'\n        },\n        warning: {\n            icon: ExclamationTriangleIcon,\n            bgColor: 'bg-yellow-500/10',\n            borderColor: 'border-yellow-500/20',\n            iconColor: 'text-yellow-400',\n            titleColor: 'text-yellow-300'\n        },\n        info: {\n            icon: InformationCircleIcon,\n            bgColor: 'bg-blue-500/10',\n            borderColor: 'border-blue-500/20',\n            iconColor: 'text-blue-400',\n            titleColor: 'text-blue-300'\n        }\n    };\n\n    const config = typeConfig[type];\n    const Icon = config.icon;\n\n    return (\n        <div className=\"fixed top-4 right-4 z-50 max-w-sm w-full\">\n            <div\n                className={`${config.bgColor} ${config.borderColor} border rounded-lg p-4 shadow-lg transition-all duration-300 transform ${isVisible ? 'translate-x-0 opacity-100' : 'translate-x-full opacity-0'\n                    }`}\n            >\n                <div className=\"flex items-start space-x-3\">\n                    <Icon className={`w-6 h-6 ${config.iconColor} flex-shrink-0`} />\n                    <div className=\"flex-1 min-w-0\">\n                        <h4 className={`font-semibold ${config.titleColor}`}>{title}</h4>\n                        <p className=\"text-sm text-gray-300 mt-1\">{message}</p>\n                    </div>\n                    <button\n                        onClick={onClose}\n                        className=\"text-gray-400 hover:text-white transition-colors\"\n                    >\n                        <XCircleIcon className=\"w-5 h-5\" />\n                    </button>\n                </div>\n            </div>\n        </div>\n    );\n}\n","import * as React from \"react\";\nfunction XCircleIcon({\n  title,\n  titleId,\n  ...props\n}, svgRef) {\n  return /*#__PURE__*/React.createElement(\"svg\", Object.assign({\n    xmlns: \"http://www.w3.org/2000/svg\",\n    fill: \"none\",\n    viewBox: \"0 0 24 24\",\n    strokeWidth: 1.5,\n    stroke: \"currentColor\",\n    \"aria-hidden\": \"true\",\n    \"data-slot\": \"icon\",\n    ref: svgRef,\n    \"aria-labelledby\": titleId\n  }, props), title ? /*#__PURE__*/React.createElement(\"title\", {\n    id: titleId\n  }, title) : null, /*#__PURE__*/React.createElement(\"path\", {\n    strokeLinecap: \"round\",\n    strokeLinejoin: \"round\",\n    d: \"m9.75 9.75 4.5 4.5m0-4.5-4.5 4.5M21 12a9 9 0 1 1-18 0 9 9 0 0 1 18 0Z\"\n  }));\n}\nconst ForwardRef = /*#__PURE__*/ React.forwardRef(XCircleIcon);\nexport default ForwardRef;","import { OrchestratorEvent } from '@/lib/types';\nimport { RealStarknetWalletClient } from '@/integrations/starknet/wallet';\nimport { ENV } from '@/config/env';\nimport { PRIVACY_MIXER } from '@/config/constants';\nimport { randomHex } from '@/crypto/bdhke';\nimport { num } from 'starknet';\nimport { generateCommitmentArtifacts, generateSecret } from '@/utils/zk';\n\n// Starknet addresses (mainnet)\nconst STRK_TOKEN_ADDRESS = '0x04718f5a0fc34cc1af16a1cdee98ffb20c31f5cd61d6ab07201858f4287c938d'; // STRK on mainnet\nconst MIXER_CONTRACT_ADDRESS = ENV.MIXER_CONTRACT_ADDRESS || PRIVACY_MIXER.CONTRACT_ADDRESS; // Use environment config first\n\nexport async function stepDeposit(amountStrk: number, onEvent: (e: OrchestratorEvent) => void) {\n    console.log('üí∞ SLPM Deposit: Starting deposit step');\n    console.log('üí∞ SLPM Deposit: Amount requested:', amountStrk, 'STRK');\n\n    try {\n        // Fast sanity check: current deployed contract min deposit is 1 STRK (1e18 wei)\n        // (See PRIVACY_MIXER.DEPLOYMENT_PARAMS.MIN_DEPOSIT). If user enters < 1 it will revert\n        // on-chain with a generic Execute failed (assert Amount below minimum) which is hard\n        // to decode client-side right now.\n        const configuredMinDepositWei = PRIVACY_MIXER.DEPLOYMENT_PARAMS.MIN_DEPOSIT; // bigint (wei)\n        const configuredMinDepositStrk = Number(configuredMinDepositWei) / 1e18; // for log (only safe here since value is small: 1e18)\n        if (amountStrk < configuredMinDepositStrk) {\n            const friendlyMsg = `Requested amount ${amountStrk} STRK is below current minimum deposit (${configuredMinDepositStrk} STRK). Increase amount or redeploy with lower MIN_DEPOSIT.`;\n            console.warn('‚ö†Ô∏è SLPM Deposit: Early rejection -', friendlyMsg);\n            onEvent({ type: 'deposit:error', message: friendlyMsg });\n            throw new Error(friendlyMsg);\n        }\n\n        onEvent({ type: 'deposit:initiated', message: 'Connecting to Starknet wallet...' });\n        console.log('üí∞ SLPM Deposit: Initializing wallet client...');\n\n        // Initialize Starknet wallet client\n        const walletClient = new RealStarknetWalletClient(ENV.STARKNET_RPC);\n\n        // Connect to wallet (ArgentX/Braavos)\n        console.log('üí∞ SLPM Deposit: Connecting wallet...');\n        const connection = await walletClient.connect();\n        console.log('üí∞ SLPM Deposit: Wallet connected:', {\n            address: connection.account.address,\n            walletType: connection.walletType\n        });\n\n        onEvent({ type: 'deposit:wallet_connected', message: 'Wallet connected successfully' });\n\n        // Initialize mixer contract\n        console.log('üí∞ SLPM Deposit: Initializing privacy mixer contract...');\n        await walletClient.initMixerContract(MIXER_CONTRACT_ADDRESS);\n        console.log('üí∞ SLPM Deposit: Mixer contract initialized');\n\n        // Check STRK balance\n        console.log('üí∞ SLPM Deposit: Checking STRK balance...');\n        const balance = await walletClient.getBalance(STRK_TOKEN_ADDRESS);\n        // Use decimal math carefully ‚Äì avoid floating point drift by converting string\n        const scaled = BigInt(Math.round(Number(amountStrk) * 10 ** balance.decimals));\n        const amountWei = scaled;\n\n        // Validate amount doesn't exceed felt limit (2^251 - 1)\n        const FELT_MAX = BigInt('0x800000000000011000000000000000000000000000000000000000000000000') - BigInt(1);\n        if (amountWei > FELT_MAX) {\n            throw new Error(`Amount too large for Starknet felt: ${amountWei.toString()}`);\n        }\n\n        console.log('üí∞ SLPM Deposit: Balance check:', {\n            tokenAddress: STRK_TOKEN_ADDRESS,\n            symbol: balance.symbol,\n            onChainBalanceWei: balance.balance.toString(),\n            onChainBalanceSTRK: Number(balance.balance) / Math.pow(10, balance.decimals),\n            decimals: balance.decimals,\n            requestedAmountWei: amountWei.toString(),\n            requestedAmountSTRK: amountStrk,\n            requestedAmountHex: '0x' + amountWei.toString(16),\n            minDepositWei: configuredMinDepositWei.toString(),\n            minDepositSTRK: configuredMinDepositStrk\n        });\n\n        if (balance.balance < amountWei) {\n            throw new Error(`Insufficient STRK balance. Required: ${amountStrk} STRK, Available: ${Number(balance.balance) / Math.pow(10, balance.decimals)} STRK`);\n        }\n\n        onEvent({ type: 'deposit:balance_checked', message: `Balance confirmed: ${Number(balance.balance) / Math.pow(10, balance.decimals)} STRK available` });\n\n        // Generate correct commitment/nullifier per contract spec\n        console.log('üí∞ SLPM Deposit: Generating commitment & nullifier (contract spec)...');\n        const secretHex = generateSecret();\n        const amountBigInt = BigInt(amountWei.toString());\n        const artifacts = generateCommitmentArtifacts(secretHex, amountBigInt);\n        console.log('üí∞ SLPM Deposit: Generated artifacts:', {\n            secret: artifacts.secret.slice(0, 10) + '...',\n            commitment: artifacts.commitment,\n            nullifier: artifacts.nullifier.slice(0, 10) + '...'\n        });\n\n        onEvent({ type: 'deposit:balance_checked', message: 'Privacy commitment generated' });\n\n        // First approve STRK spending by mixer contract\n        console.log('üí∞ SLPM Deposit: Approving STRK spending by mixer contract...');\n        const approvalResult = await walletClient.approve(STRK_TOKEN_ADDRESS, MIXER_CONTRACT_ADDRESS, amountWei);\n        console.log('üí∞ SLPM Deposit: Approval transaction submitted:', approvalResult);\n\n        onEvent({ type: 'deposit:transfer_submitted', message: `Approval submitted: ${approvalResult.transactionHash}` });\n\n        // Wait for approval confirmation\n        console.log('üí∞ SLPM Deposit: Waiting for approval confirmation...');\n        const confirmedApproval = await walletClient.waitForTransaction(approvalResult.transactionHash);\n        console.log('üí∞ SLPM Deposit: Approval confirmed:', confirmedApproval);\n\n        if (confirmedApproval.status === 'REJECTED') {\n            throw new Error('Approval transaction was rejected by the network');\n        }\n\n        onEvent({ type: 'deposit:balance_checked', message: 'STRK spending approval confirmed' });\n\n        // Verify allowance was set correctly before attempting deposit\n        console.log('üí∞ SLPM Deposit: Verifying allowance was set correctly...');\n        try {\n            const allowanceResult = await walletClient.callContract(\n                STRK_TOKEN_ADDRESS,\n                'allowance',\n                [connection.account.address, MIXER_CONTRACT_ADDRESS]\n            );\n            const currentAllowance = BigInt(allowanceResult[0] || 0);\n            console.log('üí∞ SLPM Deposit: Current allowance:', {\n                allowanceWei: currentAllowance.toString(),\n                allowanceSTRK: Number(currentAllowance) / Math.pow(10, balance.decimals),\n                requiredWei: amountWei.toString(),\n                requiredSTRK: amountStrk,\n                sufficient: currentAllowance >= amountWei\n            });\n\n            if (currentAllowance < amountWei) {\n                throw new Error(`Insufficient allowance: ${Number(currentAllowance) / Math.pow(10, balance.decimals)} STRK allowed, ${amountStrk} STRK required`);\n            }\n\n            onEvent({ type: 'deposit:balance_checked', message: `Allowance verified: ${Number(currentAllowance) / Math.pow(10, balance.decimals)} STRK` });\n        } catch (allowanceError) {\n            console.error('üí∞ SLPM Deposit: Allowance check failed:', allowanceError);\n            // Continue anyway - some tokens might not support allowance query\n            onEvent({ type: 'deposit:balance_checked', message: 'Allowance check failed, proceeding with deposit...' });\n        }\n\n        // Now deposit to mixer contract with commitment\n        console.log('üí∞ SLPM Deposit: Depositing to privacy mixer contract...');\n        const depositTxHash = await walletClient.depositToMixer(artifacts.commitment, amountWei);\n        console.log('üí∞ SLPM Deposit: Deposit transaction submitted:', depositTxHash); onEvent({ type: 'deposit:transfer_submitted', message: `Deposit to mixer submitted: ${depositTxHash}` });\n\n        // Wait for deposit confirmation\n        console.log('üí∞ SLPM Deposit: Waiting for deposit confirmation...');\n        const confirmedTx = await walletClient.waitForTransaction(depositTxHash);\n        console.log('üí∞ SLPM Deposit: Deposit confirmed:', confirmedTx);\n\n        if (confirmedTx.status === 'REJECTED') {\n            throw new Error('Deposit transaction was rejected by the network');\n        }\n\n        onEvent({ type: 'deposit:confirmed', message: 'STRK deposit confirmed in privacy mixer', progress: 20 });\n        console.log('üí∞ SLPM Deposit: Step completed successfully');\n\n        console.log('üîÑ SLPM Deposit: Now preparing for immediate withdrawal to enable swapping...');\n\n        // For privacy mixing, we need to immediately withdraw the funds to a temporary address\n        // that the orchestrator controls, so it can proceed with the Lightning/Cashu mixing\n        onEvent({ type: 'deposit:preparing_withdrawal', message: 'Preparing privacy withdrawal for mixing...', progress: 22 });\n\n        // Convert BigInt to hex string for Cairo felt252 compatibility\n        const commitmentHashHex = artifacts.commitment;\n\n        return {\n            transactionHash: confirmedTx.transactionHash,\n            amount: amountStrk,\n            amountWei: amountWei.toString(),\n            walletAddress: connection.account.address,\n            commitmentHash: commitmentHashHex,\n            secret: artifacts.secret,\n            nullifier: artifacts.nullifier,\n            mixerContractAddress: MIXER_CONTRACT_ADDRESS,\n            // Add withdrawal credentials for immediate processing\n            withdrawalReady: true\n        };\n\n    } catch (error) {\n        // Attempt to refine common failure causes\n        let refined = error instanceof Error ? error.message : 'Unknown deposit error';\n        if (/Execute failed/i.test(refined)) {\n            refined = refined + ' (Possible causes: amount below MIN_DEPOSIT, insufficient allowance, or token transfer_from failure)';\n        }\n        console.error('‚ùå SLPM Deposit: Step failed:', error);\n        onEvent({ type: 'deposit:error', message: refined });\n        throw new Error(refined);\n    }\n}\n","// Shared zero-knowledge related helpers aligning EXACTLY with Cairo contract logic\n// Contract formulas (see contract/src/privacy_mixer.cairo):\n// commitment = Poseidon(secret, amount.low, amount.high)\n// nullifier  = Poseidon(secret, commitment)\n// proof      = [secret, hash(recipient), hash(amount.low, amount.high)]\n\nimport { hash, num, uint256 } from 'starknet';\n\nexport interface CommitmentArtifacts {\n    commitment: string; // hex 0x\n    nullifier: string;  // hex 0x\n    secret: string;     // hex 0x (felt)\n    amountLow: bigint;\n    amountHigh: bigint;\n}\n\nexport function generateSecret(): string {\n    // 31 random bytes -> fits in felt252\n    const bytes = crypto.getRandomValues(new Uint8Array(31));\n    return '0x' + Array.from(bytes).map(b => b.toString(16).padStart(2, '0')).join('');\n}\n\nexport function generateCommitmentArtifacts(secretHex: string, amount: bigint): CommitmentArtifacts {\n    if (!secretHex.startsWith('0x')) throw new Error('secret must be 0x-prefixed');\n    const secretBig = BigInt(secretHex);\n    const { low, high } = uint256.bnToUint256(amount);\n    const commitment = hash.computePoseidonHashOnElements([secretBig, BigInt(low), BigInt(high)]);\n    const nullifier = hash.computePoseidonHashOnElements([secretBig, BigInt(commitment)]);\n    return {\n        commitment: num.toHex(commitment),\n        nullifier: num.toHex(nullifier),\n        secret: secretHex,\n        amountLow: BigInt(low),\n        amountHigh: BigInt(high)\n    };\n}\n\nexport function generateProof(secretHex: string, amount: bigint, recipientHex: string): string[] {\n    const secretBig = BigInt(secretHex);\n    const recipientBig = BigInt(recipientHex);\n    const { low, high } = uint256.bnToUint256(amount);\n    const recipientHash = hash.computePoseidonHashOnElements([recipientBig]);\n    const amountHash = hash.computePoseidonHashOnElements([BigInt(low), BigInt(high)]);\n    return [secretHex, num.toHex(recipientHash), num.toHex(amountHash)];\n}\n\nexport function recomputeCommitment(secretHex: string, amount: bigint): string {\n    const secretBig = BigInt(secretHex);\n    const { low, high } = uint256.bnToUint256(amount);\n    const commitment = hash.computePoseidonHashOnElements([secretBig, BigInt(low), BigInt(high)]);\n    return num.toHex(commitment);\n}\n\nexport function recomputeNullifier(secretHex: string, commitmentHex: string): string {\n    const secretBig = BigInt(secretHex);\n    const commitmentBig = BigInt(commitmentHex);\n    const nullifier = hash.computePoseidonHashOnElements([secretBig, commitmentBig]);\n    return num.toHex(nullifier);\n}\n","import { OrchestratorEvent } from '@/lib/types';\nimport { RealStarknetWalletClient } from '@/integrations/starknet/wallet';\nimport { ENV } from '@/config/env';\nimport { PRIVACY_MIXER, SHARED_SWAP_ACCOUNT_ADDRESS } from '@/config/constants';\nimport { hash, uint256, num } from 'starknet';\nimport { getSharedSwapAccount, getSharedSwapProvider, getSharedSwapAccountRaw } from '@/integrations/starknet/sharedAccount';\nimport { PrivacyMixerContract } from '@/integrations/starknet/privacy-mixer-contract';\n\nexport async function stepWithdrawForMixing(\n    depositResult: {\n        commitmentHash: string;\n        secret: string;\n        nullifier: string;\n        amount: number;\n        amountWei: string;\n        mixerContractAddress: string;\n        walletAddress: string;\n    },\n    onEvent: (e: OrchestratorEvent) => void\n) {\n    console.log('üîÑ SLPM Withdraw: Starting immediate withdrawal for mixing pipeline');\n    console.log('üîÑ SLPM Withdraw: Parameters:', {\n        commitment: depositResult.commitmentHash.slice(0, 10) + '...',\n        amount: depositResult.amount,\n        nullifier: depositResult.nullifier.slice(0, 10) + '...'\n    });\n\n    try {\n        onEvent({\n            type: 'deposit:preparing_withdrawal',\n            message: 'Preparing withdrawal for privacy mixing...',\n            progress: 25\n        });\n\n        // Prefer headless shared account if configured (avoids UI popups)\n        const sharedSigner = getSharedSwapAccount();\n        const sharedAccount = getSharedSwapAccountRaw();\n        let walletClient: RealStarknetWalletClient | null = null;\n        let directMixerContract: PrivacyMixerContract | null = null;\n\n        if (sharedSigner && sharedAccount) {\n            console.log('üîÑ SLPM Withdraw: Using shared swap account for headless withdrawal');\n            // Directly construct mixer contract wrapper with shared account\n            const provider = getSharedSwapProvider();\n            if (!provider) {\n                throw new Error('Shared swap provider not initialized');\n            }\n            directMixerContract = new PrivacyMixerContract(\n                depositResult.mixerContractAddress,\n                sharedAccount,\n                provider\n            );\n        } else {\n            console.log('üîÑ SLPM Withdraw: Shared account not configured, falling back to interactive wallet connection');\n            walletClient = new RealStarknetWalletClient(ENV.STARKNET_RPC);\n            await walletClient.connect();\n            await walletClient.initMixerContract(depositResult.mixerContractAddress);\n        }\n\n        // Create a temporary hot wallet address for the orchestrator to control the funds\n        // In production, this would be a dedicated orchestrator wallet\n        // For now, we'll withdraw to the same user wallet but this enables the next steps\n        const recipientAddress = SHARED_SWAP_ACCOUNT_ADDRESS; // central swap account (prototype)\n\n        console.log('üîÑ SLPM Withdraw: Preparing withdrawal transaction...');\n        console.log('üîÑ SLPM Withdraw: Withdrawal details (shared swap account):', {\n            nullifier: depositResult.nullifier.slice(0, 10) + '...',\n            commitment: depositResult.commitmentHash.slice(0, 10) + '...',\n            recipient: recipientAddress.slice(0, 10) + '...',\n            amount: depositResult.amountWei\n        });\n\n        // Generate ZK proof (same 3-element format as main withdraw step & e2e test)\n        console.log('üîÑ SLPM Withdraw: Generating withdrawal proof (3-element format)...');\n\n        const amountBigInt = BigInt(depositResult.amountWei);\n        const recipientBigInt = BigInt(recipientAddress);\n\n        const amountUint256 = uint256.bnToUint256(amountBigInt);\n        const amountLow = BigInt(amountUint256.low);\n        const amountHigh = BigInt(amountUint256.high);\n\n        const recipientHash = hash.computePoseidonHashOnElements([recipientBigInt]);\n        const amountHash = hash.computePoseidonHashOnElements([amountLow, amountHigh]);\n\n        const proof: string[] = [\n            depositResult.secret,             // secret\n            num.toHex(recipientHash),          // recipient_hash\n            num.toHex(amountHash)              // amount_hash\n        ];\n\n        if (proof.length !== 3) {\n            throw new Error(`Generated proof length mismatch: expected 3, got ${proof.length}`);\n        }\n\n        console.log('üîÑ SLPM Withdraw: Proof generated:', {\n            proofLength: proof.length,\n            elements: proof.map(p => p.slice(0, 10) + '...')\n        });\n\n        onEvent({\n            type: 'deposit:preparing_withdrawal',\n            message: 'Checking minimum mixing delay...',\n            progress: 25\n        });\n\n        // Check if enough time has passed since deposit for privacy requirements\n        // The NEW contract enforces a 4-second delay between deposit and withdrawal for testing\n        const MINIMUM_DELAY_SECONDS = 4; // 4 seconds as per new test contract deployment\n\n        console.log('üïê SLPM Withdraw: Checking timing requirements...');\n        console.log('üïê SLPM Withdraw: Contract requires 4 second delay between deposit and withdrawal');\n\n        // Wait the required delay to satisfy contract requirements\n        console.log('‚è≥ SLPM Withdraw: Waiting 4 seconds for mixing delay...');\n        await new Promise(resolve => setTimeout(resolve, MINIMUM_DELAY_SECONDS * 1000));\n\n        console.log('‚úÖ SLPM Withdraw: Minimum delay satisfied, proceeding with withdrawal');\n\n        onEvent({\n            type: 'deposit:preparing_withdrawal',\n            message: 'Submitting withdrawal transaction...',\n            progress: 30\n        });\n\n        // Execute withdrawal from privacy mixer\n        console.log('üîÑ SLPM Withdraw: Executing withdrawal from privacy mixer...');\n        let withdrawalResult: string;\n        if (directMixerContract) {\n            const tx = await directMixerContract.withdraw(\n                depositResult.nullifier,\n                depositResult.commitmentHash,\n                recipientAddress,\n                amountBigInt,\n                proof\n            );\n            withdrawalResult = tx.transaction_hash;\n        } else if (walletClient) {\n            withdrawalResult = await walletClient.withdrawFromMixer(\n                depositResult.nullifier,\n                depositResult.commitmentHash,\n                recipientAddress,\n                amountBigInt,\n                proof\n            );\n        } else {\n            throw new Error('No withdrawal pathway available');\n        }\n\n        console.log('üîÑ SLPM Withdraw: Withdrawal transaction submitted:', withdrawalResult);\n\n        onEvent({\n            type: 'deposit:withdrawn_for_mixing',\n            message: `Withdrawal submitted: ${withdrawalResult}`,\n            progress: 35\n        });\n\n        // Wait for withdrawal confirmation\n        console.log('üîÑ SLPM Withdraw: Waiting for withdrawal confirmation...');\n        let confirmedWithdrawal: any;\n        if (walletClient) {\n            confirmedWithdrawal = await walletClient.waitForTransaction(withdrawalResult);\n        } else {\n            // Poll provider via shared account\n            const provider = getSharedSwapProvider();\n            if (!provider) {\n                throw new Error('Shared swap provider not available for confirmation');\n            }\n            confirmedWithdrawal = await provider.waitForTransaction(withdrawalResult);\n        }\n        console.log('üîÑ SLPM Withdraw: Withdrawal confirmed:', confirmedWithdrawal);\n\n        if (confirmedWithdrawal.status === 'REJECTED') {\n            throw new Error('Withdrawal transaction was rejected by the network');\n        }\n\n        onEvent({\n            type: 'deposit:withdrawn_for_mixing',\n            message: 'STRK successfully withdrawn from privacy mixer for mixing pipeline',\n            progress: 40\n        });\n\n        console.log('üîÑ SLPM Withdraw: Step completed successfully');\n        console.log('üîÑ SLPM Withdraw: Funds are now available for Lightning/Cashu mixing');\n\n        const txHash = (confirmedWithdrawal as any).transactionHash || (confirmedWithdrawal as any).transaction_hash || withdrawalResult;\n        console.log('üîÑ SLPM Withdraw: Determined withdrawal tx hash:', txHash);\n        return {\n            withdrawalTxHash: txHash,\n            availableForSwap: true,\n            controllingWallet: recipientAddress,\n            amount: depositResult.amount,\n            amountWei: depositResult.amountWei,\n            originalDeposit: depositResult\n        };\n\n    } catch (error) {\n        console.error('‚ùå SLPM Withdraw: Step failed:', error);\n        onEvent({\n            type: 'deposit:error',\n            message: error instanceof Error ? error.message : 'Unknown withdrawal error'\n        });\n        throw error;\n    }\n}\n","import { OrchestratorEvent } from '@/lib/types';\nimport { RealAtomiqSwapClient } from '@/integrations/swaps/atomiq';\nimport { ENV } from '@/config/env';\n\nexport async function stepDynamicEstimateSats(\n    amountStrk: number,\n    onEvent: (e: OrchestratorEvent) => void\n) {\n    onEvent({ type: 'mix:progress', message: 'Fetching real-time STRK‚Üísats estimate...', progress: 11 });\n    const client = new RealAtomiqSwapClient(ENV.NETWORK);\n    try {\n        const estimate = await client.estimateLightningSatsFromStrk(amountStrk);\n        console.log('üßÆ SLPM DynamicEstimate: Result', estimate);\n        return estimate; // { satsOut, rate, source, quote? }\n    } catch (e) {\n        console.warn('‚ö†Ô∏è SLPM DynamicEstimate: Falling back after failure:', e);\n        const fallback = Math.floor(amountStrk * (ENV.STRK_SATS_RATE || 700));\n        return { satsOut: fallback, rate: fallback / amountStrk, source: 'fallback' as const };\n    }\n}\n","// Real Cashu client implementation using @cashu/cashu-ts\nimport { CashuMint, CashuWallet, MintQuoteState, Proof, getEncodedTokenV4, getDecodedToken } from '@cashu/cashu-ts';\nimport { EcashProof } from '../../domain';\n\nexport interface MintQuote {\n    quote: string;\n    amount: bigint;\n    state: 'CREATED' | 'PAID' | 'ISSUED';\n    request?: string; // Lightning payment request\n}\n\nexport interface MeltQuote {\n    quote: string;\n    amount: bigint;\n    fee_reserve: bigint;\n    unit?: string;\n    expiry?: number;\n    request?: string;\n}\n\nexport interface CashuClient {\n    // Core operations\n    createMintQuote(amount: bigint): Promise<MintQuote>;\n    checkMintQuote(quote: string): Promise<MintQuote>;\n    mintProofs(amount: bigint, quote: string): Promise<EcashProof[]>;\n\n    // Lightning operations\n    createMeltQuote(invoice: string): Promise<MeltQuote>;\n    meltProofs(quote: MeltQuote, proofs: EcashProof[]): Promise<{ change: EcashProof[] }>;\n\n    // Token operations\n    createToken(proofs: EcashProof[]): string;\n    receive(token: string): Promise<EcashProof[]>;\n\n    // Privacy operations\n    send(amount: bigint, proofs: EcashProof[]): Promise<{ keep: EcashProof[], send: EcashProof[] }>;\n\n    // Multi-mint support\n    getMintInfo(): Promise<{ name?: string, description?: string, version?: string }>;\n    getBalance(proofs: EcashProof[]): bigint;\n}\n\nexport class RealCashuClient implements CashuClient {\n    private mint: CashuMint;\n    private wallet: CashuWallet;\n    private initialized = false;\n    private mintUrl: string;\n\n    constructor(mintUrl: string) {\n        this.mintUrl = mintUrl;\n        this.mint = new CashuMint(mintUrl);\n        this.wallet = new CashuWallet(this.mint);\n\n        // For Node.js environments, add better error handling\n        if (typeof window === 'undefined') {\n            console.log(`ü™ô Initializing Cashu client for testnet mint: ${mintUrl}`);\n        }\n    }\n\n    private async ensureInitialized(): Promise<void> {\n        if (!this.initialized) {\n            try {\n                console.log(`üîó Connecting to Cashu mint: ${this.mintUrl}`);\n                await this.wallet.loadMint();\n                this.initialized = true;\n                console.log(`‚úÖ Cashu mint connected successfully`);\n            } catch (error) {\n                console.warn(`‚ö†Ô∏è Failed to connect to Cashu mint: ${error instanceof Error ? error.message : String(error)}`);\n                throw new Error(`Cashu mint connection failed: ${error instanceof Error ? error.message : 'Unknown error'}`);\n            }\n        }\n    }\n\n    async createMintQuote(amount: bigint): Promise<MintQuote> {\n        await this.ensureInitialized();\n        const mintQuote = await this.wallet.createMintQuote(Number(amount));\n\n        return {\n            quote: mintQuote.quote,\n            amount: BigInt(mintQuote.amount),\n            state: mintQuote.state === MintQuoteState.PAID ? 'PAID' :\n                mintQuote.state === MintQuoteState.ISSUED ? 'ISSUED' : 'CREATED',\n            request: mintQuote.request\n        };\n    }\n\n    async checkMintQuote(quote: string): Promise<MintQuote> {\n        await this.ensureInitialized();\n        const mintQuote = await this.wallet.checkMintQuote(quote);\n\n        return {\n            quote: mintQuote.quote,\n            amount: BigInt(mintQuote.amount || 0),\n            state: mintQuote.state === MintQuoteState.PAID ? 'PAID' :\n                mintQuote.state === MintQuoteState.ISSUED ? 'ISSUED' : 'CREATED',\n            request: mintQuote.request\n        };\n    }\n\n    async mintProofs(amount: bigint, quote: string): Promise<EcashProof[]> {\n        await this.ensureInitialized();\n        const proofs = await this.wallet.mintProofs(Number(amount), quote);\n\n        return proofs.map(this.convertToEcashProof);\n    }\n\n    async createMeltQuote(invoice: string): Promise<MeltQuote> {\n        await this.ensureInitialized();\n        // If running in browser, proxy via Next API to avoid CORS\n        if (typeof window !== 'undefined') {\n            const res = await fetch('/api/cashu/melt-quote', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ invoice, mintUrl: this.mintUrl })\n            });\n            if (!res.ok) throw new Error(`melt-quote failed: ${await res.text()}`);\n            const meltQuote = await res.json();\n            return {\n                quote: meltQuote.quote,\n                amount: BigInt(meltQuote.amount),\n                fee_reserve: BigInt(meltQuote.fee_reserve),\n                unit: meltQuote.unit,\n                expiry: meltQuote.expiry,\n                request: meltQuote.request\n            };\n        }\n        const meltQuote = await this.wallet.createMeltQuote(invoice);\n\n        return {\n            quote: meltQuote.quote,\n            amount: BigInt(meltQuote.amount),\n            fee_reserve: BigInt(meltQuote.fee_reserve),\n            unit: meltQuote.unit,\n            expiry: meltQuote.expiry,\n            request: meltQuote.request\n        };\n    }\n\n    async meltProofs(quote: MeltQuote, proofs: EcashProof[]): Promise<{ change: EcashProof[] }> {\n        await this.ensureInitialized();\n        const cashuProofs = proofs.map(this.convertFromEcashProof);\n        // If running in browser, proxy via Next API to avoid CORS\n        if (typeof window !== 'undefined') {\n            console.log('üîß [Cashu Client] Browser path: preparing melt request...', {\n                quoteId: quote.quote?.substring(0, 20) + '...',\n                proofsCount: cashuProofs.length,\n                totalAmount: cashuProofs.reduce((sum, p) => sum + Number(p.amount), 0),\n                mintUrl: this.mintUrl\n            });\n\n            // Avoid BigInt serialization issues by converting to strings\n            const serializableQuote = {\n                quote: quote.quote,\n                amount: quote.amount.toString(),\n                fee_reserve: quote.fee_reserve.toString(),\n                unit: quote.unit,\n                expiry: quote.expiry,\n                request: quote.request\n            };\n\n            console.log('‚ö° [Cashu Client] Sending melt request to server proxy...', {\n                proofsFormat: cashuProofs.length > 0 ? {\n                    firstProofFields: Object.keys(cashuProofs[0]),\n                    firstProofAmount: cashuProofs[0].amount,\n                    firstProofAmountType: typeof cashuProofs[0].amount\n                } : 'no proofs'\n            });\n            const res = await fetch('/api/cashu/melt', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ quote: serializableQuote, proofs: cashuProofs, mintUrl: this.mintUrl })\n            });\n\n            if (!res.ok) {\n                const errorText = await res.text();\n                console.error('‚ùå [Cashu Client] Melt request failed:', {\n                    status: res.status,\n                    statusText: res.statusText,\n                    error: errorText\n                });\n                throw new Error(`melt failed: ${errorText}`);\n            }\n\n            const payload = await res.json();\n            console.log('‚úÖ [Cashu Client] Melt response received:', {\n                changeProofs: payload.change?.length || 0,\n                changeAmount: payload.change?.reduce((sum: number, p: any) => sum + p.amount, 0) || 0\n            });\n\n            const change = (payload.change || []).map(this.convertToEcashProof);\n            return { change };\n        }\n\n        // Node/server path: call mint directly\n        const meltQuoteResponse = {\n            quote: quote.quote,\n            amount: Number(quote.amount),\n            fee_reserve: Number(quote.fee_reserve),\n            state: 'UNPAID' as const,\n            expiry: Math.floor(Date.now() / 1000) + 3600,\n            payment_preimage: null,\n            request: '',\n            unit: 'sat'\n        };\n        const meltResponse = await this.wallet.meltProofs(meltQuoteResponse, cashuProofs);\n        return { change: meltResponse.change?.map(this.convertToEcashProof) || [] };\n    }\n\n    async send(amount: bigint, proofs: EcashProof[]): Promise<{ keep: EcashProof[], send: EcashProof[] }> {\n        await this.ensureInitialized();\n        const cashuProofs = proofs.map(this.convertFromEcashProof);\n        const { keep, send } = await this.wallet.send(Number(amount), cashuProofs);\n\n        return {\n            keep: keep.map(this.convertToEcashProof),\n            send: send.map(this.convertToEcashProof)\n        };\n    }\n\n    createToken(proofs: EcashProof[]): string {\n        const cashuProofs = proofs.map(this.convertFromEcashProof);\n        return getEncodedTokenV4({\n            mint: this.mint.mintUrl,\n            proofs: cashuProofs\n        });\n    }\n\n    async receive(token: string): Promise<EcashProof[]> {\n        await this.ensureInitialized();\n        const receiveProofs = await this.wallet.receive(token);\n        return receiveProofs.map(this.convertToEcashProof);\n    }\n\n    async getMintInfo(): Promise<{ name?: string, description?: string, version?: string }> {\n        await this.ensureInitialized();\n        const info = await this.mint.getInfo();\n        return {\n            name: info.name,\n            description: info.description,\n            version: info.version\n        };\n    }\n\n    getBalance(proofs: EcashProof[]): bigint {\n        return proofs.reduce((sum, proof) => sum + proof.amount, 0n);\n    }\n\n    // Utility methods for proof conversion\n    private convertToEcashProof(proof: Proof): EcashProof {\n        return {\n            secret: proof.secret,\n            signature: proof.C,\n            amount: BigInt(proof.amount),\n            currency: 'SAT',\n            keysetId: proof.id\n        };\n    }\n\n    private convertFromEcashProof(proof: EcashProof): Proof {\n        return {\n            secret: proof.secret,\n            C: proof.signature,\n            amount: Number(proof.amount),\n            id: proof.keysetId\n        };\n    }\n}\n\n// Multi-mint manager for routing diversification\nexport class MultiMintCashuManager {\n    private clients: Map<string, RealCashuClient> = new Map();\n    private mintUrls: string[];\n\n    constructor(mintUrls: string[]) {\n        this.mintUrls = mintUrls;\n        mintUrls.forEach(url => {\n            this.clients.set(url, new RealCashuClient(url));\n        });\n    }\n\n    // Select mint based on privacy strategy (random selection for now)\n    selectMint(): RealCashuClient {\n        const randomIndex = Math.floor(Math.random() * this.mintUrls.length);\n        const selectedUrl = this.mintUrls[randomIndex];\n        return this.clients.get(selectedUrl)!;\n    }\n\n    // Get all mints for distributed operations\n    getAllMints(): RealCashuClient[] {\n        return Array.from(this.clients.values());\n    }\n\n    // Split tokens across multiple mints for privacy\n    async distributeSend(\n        totalAmount: bigint,\n        proofs: EcashProof[],\n        numberOfMints: number = 2\n    ): Promise<{ distributions: Array<{ mint: RealCashuClient, proofs: EcashProof[] }> }> {\n        const mintsToUse = this.mintUrls.slice(0, numberOfMints);\n        const amountPerMint = totalAmount / BigInt(numberOfMints);\n        const distributions = [];\n\n        for (const mintUrl of mintsToUse) {\n            const client = this.clients.get(mintUrl)!;\n            // In real implementation, would need to convert proofs between mints\n            // For now, just distribute existing proofs\n            const relevantProofs = proofs.filter(p =>\n                this.getBalance([p]) <= amountPerMint\n            );\n            distributions.push({ mint: client, proofs: relevantProofs });\n        }\n\n        return { distributions };\n    }\n\n    private getBalance(proofs: EcashProof[]): bigint {\n        return proofs.reduce((sum, proof) => sum + proof.amount, 0n);\n    }\n}\n\n// Legacy mock client for backward compatibility\nexport class MockCashuClient implements CashuClient {\n    async createMintQuote(amount: bigint): Promise<MintQuote> {\n        return { quote: `q_${Date.now()}`, amount, state: 'CREATED' };\n    }\n    async checkMintQuote(quote: string): Promise<MintQuote> {\n        return { quote, amount: 0n, state: 'PAID' };\n    }\n    async mintProofs(amount: bigint, quote: string): Promise<EcashProof[]> {\n        const proof: EcashProof = {\n            secret: `sec_${quote}`,\n            signature: `sig_${quote}`,\n            amount,\n            currency: 'SAT',\n            keysetId: 'mock',\n        };\n        return [proof];\n    }\n    async createMeltQuote(invoice: string): Promise<MeltQuote> {\n        return { quote: `melt_${Date.now()}`, amount: 1000n, fee_reserve: 10n };\n    }\n    async meltProofs(_quote: MeltQuote, _proofs: EcashProof[]): Promise<{ change: EcashProof[] }> {\n        return { change: [] };\n    }\n    createToken(_proofs: EcashProof[]): string {\n        return 'mock_token';\n    }\n    async receive(_token: string): Promise<EcashProof[]> {\n        return [];\n    }\n    async send(amount: bigint, proofs: EcashProof[]): Promise<{ keep: EcashProof[], send: EcashProof[] }> {\n        return { keep: proofs, send: [] };\n    }\n    async getMintInfo(): Promise<{ name?: string, description?: string, version?: string }> {\n        return { name: 'Mock Mint', description: 'Test mint', version: '1.0.0' };\n    }\n    getBalance(proofs: EcashProof[]): bigint {\n        return proofs.reduce((sum, proof) => sum + proof.amount, 0n);\n    }\n}\n","import { OrchestratorEvent } from '@/lib/types';\nimport { MultiMintCashuManager, RealCashuClient } from '@/integrations/cashu/client';\nimport { ENV } from '@/config/env';\n\nexport async function stepCreateMintInvoice(\n    sats: number,\n    onEvent: (e: OrchestratorEvent) => void\n) {\n    console.log('üè¶ SLPM MintInvoice: Starting mint invoice creation');\n    console.log('üè¶ SLPM MintInvoice: Amount:', sats, 'sats');\n\n    try {\n        onEvent({\n            type: 'mix:progress',\n            message: `Creating Cashu mint invoice for ${sats} sats...`,\n            progress: 15\n        });\n\n        // Initialize Cashu manager/client\n        console.log('üè¶ SLPM MintInvoice: Initializing Cashu services...');\n        console.log('üè¶ SLPM MintInvoice: Available mints:', ENV.CASHU_MINTS.length);\n        console.log('üè¶ SLPM MintInvoice: Default mint:', ENV.CASHU_DEFAULT_MINT);\n\n        const cashuManager = ENV.CASHU_MINTS.length ? new MultiMintCashuManager(ENV.CASHU_MINTS) : null;\n        const cashu = cashuManager ? cashuManager.selectMint() : new RealCashuClient(ENV.CASHU_DEFAULT_MINT);\n\n        console.log('üè¶ SLPM MintInvoice: Cashu client type:', cashuManager ? 'Multi-mint manager' : 'Single mint');\n\n        // Create mint quote (this generates the Lightning invoice)\n        console.log('üè¶ SLPM MintInvoice: Creating mint quote...');\n        const mintQuote = await cashu.createMintQuote(BigInt(sats));\n\n        console.log('üè¶ SLPM MintInvoice: Mint quote created:', {\n            quote: mintQuote.quote,\n            amount: mintQuote.amount.toString(),\n            state: mintQuote.state,\n            invoice: mintQuote.request?.slice(0, 50) + '...'\n        });\n\n        if (!mintQuote.request) {\n            throw new Error('Cashu mint did not provide Lightning invoice');\n        }\n\n        onEvent({\n            type: 'mix:progress',\n            message: 'Cashu mint invoice created successfully',\n            progress: 20\n        });\n\n        console.log('üè¶ SLPM MintInvoice: Invoice ready for Atomiq payment');\n        console.log('üè¶ SLPM MintInvoice: Step completed successfully');\n\n        return {\n            cashu,\n            cashuManager,\n            mintQuote,\n            lightningInvoice: mintQuote.request,\n            amount: sats\n        };\n\n    } catch (error) {\n        console.error('‚ùå SLPM MintInvoice: Step failed:', error);\n        console.error('üîç SLPM MintInvoice: Error details:', {\n            message: error instanceof Error ? error.message : 'Unknown error',\n            stack: error instanceof Error ? error.stack : undefined,\n            context: {\n                sats,\n                mintUrl: ENV.CASHU_DEFAULT_MINT,\n                mintsAvailable: ENV.CASHU_MINTS.length\n            }\n        });\n\n        onEvent({\n            type: 'mix:error',\n            message: error instanceof Error ? error.message : 'Unknown mint invoice error'\n        });\n        throw error;\n    }\n}\n","import { OrchestratorEvent } from '@/lib/types';\nimport { RealAtomiqSwapClient } from '@/integrations/swaps/atomiq';\nimport { SHARED_SWAP_ACCOUNT_ADDRESS } from '@/config/constants';\nimport { ENV } from '@/config/env';\n\nexport async function stepSwapToLightning(\n    amountStrk: number,\n    depositInfo: {\n        walletAddress: string;\n        mixerContractAddress: string;\n        fundsAvailable?: boolean;\n    },\n    mintInvoiceInfo: {\n        lightningInvoice: string;\n        amount: number;\n        cashu: any;\n        mintQuote: any;\n    },\n    onEvent: (e: OrchestratorEvent) => void\n) {\n    console.log('‚ö° SLPM SwapToLN: Starting STRK ‚Üí Lightning BTC swap');\n    console.log('‚ö° SLPM SwapToLN: Parameters:', {\n        amountStrk,\n        fromWallet: depositInfo.walletAddress.slice(0, 10) + '...',\n        network: ENV.NETWORK,\n        fundsAvailable: depositInfo.fundsAvailable || false,\n        targetInvoice: mintInvoiceInfo.lightningInvoice.slice(0, 50) + '...'\n    });\n\n    // Verify funds are available for swapping\n    if (depositInfo.fundsAvailable) {\n        console.log('‚úÖ SLPM SwapToLN: Funds confirmed available after privacy mixer withdrawal');\n    } else {\n        console.log('‚ö†Ô∏è SLPM SwapToLN: Warning - funds availability not confirmed');\n    }\n\n    try {\n        onEvent({\n            type: 'mix:progress',\n            message: `Converting ${amountStrk} STRK to Lightning BTC...`,\n            progress: 25\n        });\n\n        console.log('üèóÔ∏è SLPM SwapToLN: Initializing Atomiq client...');\n        const atomiq = new RealAtomiqSwapClient(ENV.NETWORK);\n\n        // Use the Cashu mint invoice from the createMintInvoice step (original mixer flow)\n        const lightningInvoice = mintInvoiceInfo.lightningInvoice?.trim();\n        console.log('‚ö° SLPM SwapToLN: Using Cashu mint invoice for automated mixer flow...');\n\n        // Decode invoice to extract exact sats (authoritative output amount)\n        let invoiceSats: number | undefined;\n        try {\n            const { millisatoshis } = await import('bolt11').then(m => m.decode(lightningInvoice));\n            if (millisatoshis) {\n                invoiceSats = Number(BigInt(millisatoshis) / 1000n);\n            }\n        } catch (e) {\n            console.warn('‚ö†Ô∏è SLPM SwapToLN: Failed to decode invoice for sats amount, proceeding (swap call will re-validate):', e instanceof Error ? e.message : e);\n        }\n\n        // Cashu mint invoices always have preset amounts (original mixer flow)\n        if (invoiceSats == null || invoiceSats <= 0) {\n            console.warn('‚ö†Ô∏è SLPM SwapToLN: Could not decode invoice amount, using mint amount as fallback');\n            invoiceSats = mintInvoiceInfo.amount; // Use the known mint amount\n        }\n\n        console.log('‚ö° SLPM SwapToLN: Lightning invoice details:', {\n            invoice: lightningInvoice.slice(0, 50) + '...',\n            invoiceSats,\n            strkInputApprox: amountStrk,\n            note: 'invoiceSats is authoritative output; STRK input derived by SDK'\n        });\n\n        onEvent({\n            type: 'mix:progress',\n            message: `Converting ${amountStrk} STRK to Lightning BTC...`,\n            progress: 30\n        });\n\n        // Execute the simplified STRK ‚Üí Lightning swap\n        console.log('‚ö° SLPM SwapToLN: Executing STRK ‚Üí Lightning swap (exactOut via invoice)...');\n        const swapResult = await atomiq.swapStrkToLightning(\n            invoiceSats || mintInvoiceInfo.amount, // pass decoded invoice sats (exactOut target)\n            lightningInvoice,\n            SHARED_SWAP_ACCOUNT_ADDRESS\n        );\n\n        console.log('‚ö° SLPM SwapToLN: Swap result:', {\n            success: swapResult.success,\n            txId: swapResult.txId,\n            amount: swapResult.amount,\n            route: swapResult.route,\n            error: swapResult.error\n        });\n\n        // Verify swap succeeded\n        if (!swapResult.success) {\n            throw new Error(`STRK ‚Üí Lightning swap failed: ${swapResult.error || 'Unknown error'}`);\n        }\n\n        // Wait for Lightning payment confirmation\n        console.log('‚è≥ SLPM SwapToLN: Waiting for Lightning payment confirmation...');\n        onEvent({\n            type: 'mix:progress',\n            message: 'Waiting for Lightning payment confirmation...',\n            progress: 35\n        });\n\n        // In real implementation, we'd wait for actual Lightning confirmation\n        // For now, simulate the confirmation delay\n        await new Promise(resolve => setTimeout(resolve, 3000));\n\n        console.log('‚úÖ SLPM SwapToLN: Lightning payment confirmed!');\n        onEvent({\n            type: 'mix:progress',\n            message: 'STRK successfully swapped to Lightning BTC',\n            progress: 40\n        });\n\n        return {\n            executionId: swapResult.txId || `swap_${Date.now()}`,\n            lightningInvoice: lightningInvoice,\n            lightningAmount: invoiceSats || mintInvoiceInfo.amount,\n            lightningPaymentHash: swapResult.txId, // Use txId as payment reference\n            swapTxId: swapResult.txId,\n            amountIn: amountStrk,\n            amountOut: swapResult.amount,\n            fee: 0, // Fee included in swap amount for simplified interface\n            cashu: mintInvoiceInfo.cashu,\n            mintQuote: mintInvoiceInfo.mintQuote\n        };\n\n    } catch (error) {\n        console.error('‚ùå SLPM SwapToLN: Step failed:', error);\n        console.error('üîç SLPM SwapToLN: Error details:', {\n            message: error instanceof Error ? error.message : 'Unknown error',\n            stack: error instanceof Error ? error.stack : undefined,\n            context: {\n                amountStrk,\n                network: ENV.NETWORK\n            }\n        });\n\n        onEvent({\n            type: 'mix:error',\n            message: error instanceof Error ? error.message : 'Unknown swap error'\n        });\n        throw error;\n    }\n}\n","import { OrchestratorEvent } from '@/lib/types';\nimport { RealCashuClient } from '@/integrations/cashu/client';\nconst isServer = typeof window === 'undefined';\nimport { getDecodedToken } from '@cashu/cashu-ts';\n\nexport async function stepClaimCashuProofs(\n    mintQuote: any,\n    cashu: RealCashuClient,\n    targetSats: number,\n    onEvent: (e: OrchestratorEvent) => void\n) {\n    console.log('ü™ô SLPM ClaimCashu: Starting Cashu proof claiming');\n    console.log('ü™ô SLPM ClaimCashu: Parameters:', {\n        quoteId: mintQuote.quote,\n        amount: targetSats,\n        expectedState: 'PAID'\n    });\n\n    try {\n        onEvent({\n            type: 'mix:progress',\n            message: `Claiming Cashu proofs for ${targetSats} sats...`,\n            progress: 45\n        });\n\n        // Check if the Lightning invoice has been paid by Atomiq\n        console.log('üîç SLPM ClaimCashu: Checking if mint quote was paid...');\n        const quoteStatus = await cashu.checkMintQuote(mintQuote.quote);\n\n        console.log('üîç SLPM ClaimCashu: Quote status:', {\n            quote: quoteStatus.quote,\n            state: quoteStatus.state,\n            amount: quoteStatus.amount.toString()\n        });\n\n        if (quoteStatus.state !== 'PAID') {\n            // Wait a bit and check again\n            console.log('‚è≥ SLPM ClaimCashu: Payment not confirmed yet, waiting...');\n            await new Promise(resolve => setTimeout(resolve, 2000));\n\n            const retryStatus = await cashu.checkMintQuote(mintQuote.quote);\n            console.log('üîç SLPM ClaimCashu: Retry status:', retryStatus.state);\n\n            if (retryStatus.state !== 'PAID') {\n                throw new Error(`Lightning payment not confirmed. Quote state: ${retryStatus.state}`);\n            }\n        }\n\n        console.log('‚úÖ SLPM ClaimCashu: Lightning payment confirmed by Cashu mint');\n\n        // Mint the proofs now that payment is confirmed\n        console.log('üè≠ SLPM ClaimCashu: Minting Cashu proofs...');\n        const proofs = await cashu.mintProofs(BigInt(targetSats), mintQuote.quote);\n\n        console.log('üè≠ SLPM ClaimCashu: Cashu proofs minted:', {\n            count: proofs.length,\n            totalAmount: proofs.reduce((sum, p) => sum + Number(p.amount), 0),\n            proofs: proofs.map(p => ({\n                amount: Number(p.amount),\n                secret: p.secret?.slice(0, 10) + '...'\n            }))\n        });\n\n        // Create a token so user can save/redeem later\n        try {\n            const totalAmount = proofs.reduce((sum, p) => sum + Number(p.amount), 0);\n            const token = cashu.createToken(proofs);\n            // Persist server-side to avoid loss (server-only)\n            try {\n                // Extract mint URL from token for accurate recovery later\n                let mintUrl = 'unknown';\n                try {\n                    const decoded = getDecodedToken(token);\n                    mintUrl = decoded?.mint || mintUrl;\n                } catch (_) { }\n                if (isServer) {\n                    const { default: TokenVault } = await import('@/storage/tokenVault.server');\n                    await TokenVault.set({\n                        quote: mintQuote.quote,\n                        token,\n                        mintUrl,\n                        amountSats: totalAmount,\n                        proofsCount: proofs.length,\n                        createdAt: Date.now()\n                    });\n                    console.log('üíæ SLPM ClaimCashu: Saved ecash token to server vault for quote', mintQuote.quote);\n                }\n            } catch (e) {\n                console.warn('‚ö†Ô∏è SLPM ClaimCashu: Failed to save token to server vault:', e);\n            }\n            if (typeof window !== 'undefined') {\n                const key = `slpm:cashu-token:${mintQuote.quote}`;\n                window.localStorage.setItem(key, token);\n                console.log('üíæ SLPM ClaimCashu: Saved ecash token to localStorage under key', key);\n            }\n        } catch (e) {\n            console.warn('‚ö†Ô∏è SLPM ClaimCashu: Could not persist ecash token:', e);\n        }\n\n        // Verify total amount matches expectation\n        const totalAmount = proofs.reduce((sum, p) => sum + Number(p.amount), 0);\n        if (Math.abs(totalAmount - targetSats) > 1) { // Allow 1 sat tolerance\n            console.warn('‚ö†Ô∏è SLPM ClaimCashu: Amount mismatch:', {\n                expected: targetSats,\n                received: totalAmount,\n                difference: totalAmount - targetSats\n            });\n        }\n\n        onEvent({\n            type: 'mix:progress',\n            message: `Cashu proofs claimed: ${proofs.length} proofs for ${totalAmount} sats`,\n            progress: 50\n        });\n\n        console.log('ü™ô SLPM ClaimCashu: Step completed successfully');\n        return proofs;\n\n    } catch (error) {\n        console.error('‚ùå SLPM ClaimCashu: Step failed:', error);\n        console.error('üîç SLPM ClaimCashu: Error details:', {\n            message: error instanceof Error ? error.message : 'Unknown error',\n            stack: error instanceof Error ? error.stack : undefined,\n            context: {\n                quoteId: mintQuote.quote,\n                targetSats,\n                quoteState: mintQuote.state\n            }\n        });\n\n        onEvent({\n            type: 'mix:error',\n            message: error instanceof Error ? error.message : 'Unknown Cashu claiming error'\n        });\n        throw error;\n    }\n}\n"],"names":[],"mappings":"6GACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QCsBA,IAAM,EAA2B,EAAA,SAAd,CAA8B,CAvBjD,AAuBkD,SAvBzC,AAAe,AAuBM,OAtB5B,CAAK,SACL,CAAO,CACP,GAAG,EACJ,CAAE,CAAM,EACP,OAAO,AAAa,EAAA,SAAF,IAAqB,CAAC,MAAO,OAAO,MAAM,CAAC,CAC3D,MAAO,6BACP,KAAM,OACN,QAAS,YACT,YAAa,IACb,OAAQ,eACR,cAAe,OACf,YAAa,OACb,IAAK,EACL,kBAAmB,CACrB,EAAG,GAAQ,EAAqB,EAAA,IAAb,SAAgC,CAAC,CAAtB,OAA+B,CAC3D,GAAI,CACN,EAAG,GAAS,KAAmB,CAAb,CAAa,UAAF,GAAqB,CAAC,OAAQ,CACzD,cAAe,QACf,eAAgB,QAChB,EAAG,oLACL,GACF,GCCM,EAA2B,EAAA,UAAd,AAA8B,CAvBjD,AAuBkD,SAvBzC,AAAQ,CAuBa,MAtB5B,CAAK,CACL,SAAO,CACP,GAAG,EACJ,CAAE,CAAM,EACP,OAAO,AAAa,EAAA,SAAF,IAAqB,CAAC,MAAO,OAAO,MAAM,CAAC,CAC3D,MAAO,6BACP,KAAM,OACN,QAAS,YACT,YAAa,IACb,OAAQ,eACR,cAAe,OACf,YAAa,OACb,IAAK,EACL,kBAAmB,CACrB,EAAG,GAAQ,EAAqB,EAAA,IAAb,SAAgC,CAAC,CAAtB,OAA+B,CAC3D,GAAI,CACN,EAAG,GAAS,KAAmB,CAAb,CAAa,UAAF,GAAqB,CAAC,OAAQ,CACzD,cAAe,QACf,eAAgB,QAChB,EAAG,iNACL,GACF,GFrBA,IAAA,EAAA,EAAA,CAAA,CAAA,QGsBA,IAAM,EAA2B,EAAA,UAAd,AAA8B,CAvBjD,AAuBkD,SAvBzC,AAAsB,CAuBD,MAtB5B,CAAK,SACL,CAAO,CACP,GAAG,EACJ,CAAE,CAAM,EACP,OAAoB,AAAb,EAAa,SAAF,IAAqB,CAAC,MAAO,OAAO,MAAM,CAAC,CAC3D,MAAO,6BACP,KAAM,OACN,QAAS,YACT,YAAa,IACb,OAAQ,eACR,cAAe,OACf,YAAa,OACb,IAAK,EACL,kBAAmB,CACrB,EAAG,GAAQ,EAAqB,EAAA,IAAb,SAAgC,CAAC,CAAtB,OAA+B,CAC3D,GAAI,CACN,EAAG,GAAS,KAAmB,CAAb,CAAa,UAAF,GAAqB,CAAC,OAAQ,CACzD,cAAe,QACf,eAAgB,QAChB,EAAG,8NACL,GACF,GCCM,EAA2B,EAAA,UAAd,AAA8B,CAvBjD,AAuBkD,SAvBzC,AAAgB,CAuBK,MAtB5B,CAAK,SACL,CAAO,CACP,GAAG,EACJ,CAAE,CAAM,EACP,OAAO,AAAa,EAAA,SAAF,IAAqB,CAAC,MAAO,OAAO,MAAM,CAAC,CAC3D,MAAO,6BACP,KAAM,OACN,QAAS,YACT,YAAa,IACb,OAAQ,eACR,cAAe,OACf,YAAa,OACb,IAAK,EACL,kBAAmB,CACrB,EAAG,GAAQ,EAAqB,EAAA,IAAb,SAAgC,CAAC,CAAtB,OAA+B,CAC3D,GAAI,CACN,EAAG,GAAS,KAAmB,CAAb,CAAa,UAAF,GAAqB,CAAC,OAAQ,CACzD,cAAe,QACf,eAAgB,QAChB,EAAG,uWACL,GACF,GJHe,SAAS,EAAiB,CAAE,QAAM,SAAE,CAAO,WAAE,CAAS,cAAE,CAAY,CAAyB,EACxG,GAAM,CAAC,EAAgB,EAAkB,CAAG,CAAA,EAAA,EAAA,QAAA,AAAQ,EAAS,WAgC7D,AAAK,EAGD,CAAA,CAHA,CAGA,EAAA,CAHS,EAGT,EAAC,MAAA,CAAI,UAAU,gGACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,yFACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,mDACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,UAAU,CAAA,CAAC,UAAU,0BACtB,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,wCAA+B,sBAEjD,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,EACT,UAAU,4DAEV,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,UAAU,KAAK,OAAO,OAAO,eAAe,QAAQ,qBAC/D,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,cAAc,QAAQ,eAAe,QAAQ,YAAa,EAAG,EAAE,gCAKjF,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qBAlDK,AAmDf,CAlDb,CACI,GAAI,UACJ,KAAM,UACN,KAAM,UACN,YAAa,sDACb,aAAa,EACb,WAAW,CACf,EACA,AAHmC,CAI/B,GAAI,UACJ,CAL8C,CAAC,CAAC,AAAC,EAK3C,KAL0D,KAMhE,KAAM,MAN0E,IAOhF,YAAa,gDACb,aAAa,CACjB,EACA,CACI,GAAI,MACJ,GAJ+B,EAIzB,aACN,AAL8C,CAAC,CAAE,AAAD,GAK1C,IAL0D,EAMhE,YAAa,EANmE,yCAOhF,aAAa,CACjB,EACH,CA4BwB,GAAG,CAAC,AAAC,GACV,CAAA,EAAA,EA/BmB,AA+BnB,GAAA,EAAC,MAAA,CAAoB,GA/Ba,CAAC,CAAC,AAAC,KA+BN,EA/BqB,kBAgChD,AAhCkE,CAgClE,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,IAAM,OA5BvC,EADmB,EA6BkC,EAAO,EAAE,EA3B9D,EAAU,IA4Bc,EA7BN,OA6BgB,GAAgB,CAAC,EAAO,WAAW,CAC7C,UAAW,CAAC,yDAAyD,EAAE,EAAO,WAAW,CAC/E,0HACA,+DACL,CAAC,EAAE,IAAmB,EAAO,EAAE,EAAI,EAC9B,qCACA,GAAA,CACJ,UAEN,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,8EACI,YAAd,EAAO,EAAE,EAAkB,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,CAAC,UAAU,0BACxC,YAAd,EAAO,EAAE,EAAkB,CAAA,EAAA,EAAA,GAAA,EAAC,AGjEtD,EHiEsD,CAAsB,UAAU,4BAC9C,QAAd,EAAO,EAAE,EAAc,CAAA,EAAA,EAAA,GAAA,EAAC,AIlElD,EJkEkD,CAAgB,UAAU,6BAEvD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,6BACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,oCAA4B,EAAO,IAAI,GACpD,EAAO,SAAS,EACb,CAAA,EAAA,EAAA,GAAA,EAAC,OAAA,CAAK,UAAU,kFAAyE,eAKjG,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA8B,EAAO,WAAW,GAC5D,CAAC,EAAO,WAAW,EAChB,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,qCAA4B,qBAGjD,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,wCACV,EAAO,WAAW,CACf,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,eAAe,CAAA,CAAC,UAAU,2BAE3B,CAAA,EAAA,EAAA,GAAA,EAAC,AEtF9B,EFsF8B,CAAQ,UAAU,0BAEtB,IAAmB,EAAO,EAAE,EAAI,GAC7B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,+FAvCzB,EAAO,EAAE,KAgD3B,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,qEACX,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uCACX,CAAA,EAAA,EAAA,GAAA,EAAC,ACpGV,EDoGU,CAAe,UAAU,+CAC1B,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,WACG,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAU,kCAAyB,oBACvC,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA6B,2GAOtD,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,4BACX,CAAA,EAAA,EAAA,IAAA,EAAC,IAAA,CAAE,UAAU,kCAAwB,uBACP,IAC1B,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CACG,KAAK,mCACL,OAAO,SACP,IAAI,sBACJ,UAAU,mEACb,8BA1FD,IAkGxB,+BKtJA,IAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QAAA,EAAA,EAAA,CAAA,CAAA,QCuBA,IAAM,EAA2B,EAAA,UAAd,AAA8B,CAvBjD,AAuBkD,SAvBzC,AAAY,CAuBS,MAtB5B,CAAK,SACL,CAAO,CACP,GAAG,EACJ,CAAE,CAAM,EACP,OAAO,AAAa,EAAA,SAAF,IAAqB,CAAC,MAAO,OAAO,MAAM,CAAC,CAC3D,MAAO,6BACP,KAAM,OACN,QAAS,YACT,YAAa,IACb,OAAQ,eACR,cAAe,OACf,YAAa,OACb,IAAK,EACL,kBAAmB,CACrB,EAAG,GAAQ,EAAqB,EAAA,IAAb,SAAgC,CAAC,CAAtB,OAA+B,CAC3D,GAAI,CACN,EAAG,GAAS,KAAmB,CAAb,CAAa,UAAF,GAAqB,CAAC,OAAQ,CACzD,cAAe,QACf,eAAgB,QAChB,EAAG,uEACL,GACF,GDVe,SAAS,EAAa,MACjC,CAAI,OACJ,CAAK,SACL,CAAO,WACP,CAAS,SACT,CAAO,WACP,GAAY,CAAI,UAChB,EAAW,GAAI,CACC,EAQhB,GAPA,EAAA,OAAK,CAAC,SAAS,CAAC,KACZ,GAAI,GAAa,EAAW,CACxB,IAAM,EAAQ,WAAW,EAAS,GAClC,MAAO,IAAM,aAAa,EAC9B,CACJ,EAAG,CAAC,EAAW,EAAW,EAAU,EAAQ,EAExC,CAAC,EAAW,OAAO,KAiCvB,IAAM,EA/Ba,AA+BJ,CA9BX,QAAS,CACL,KAAM,EAAA,eAAe,CACrB,QAAS,kBACT,YAAa,sBACb,UAAW,iBACX,WAAY,gBAChB,EACA,MAAO,CACH,MAAM,CACN,QAAS,gBACT,YAAa,oBACb,UAAW,eACX,WAAY,cAChB,EACA,QAAS,CACL,KAAM,EAAA,uBAAuB,CAC7B,QAAS,mBACT,YAAa,uBACb,UAAW,kBACX,WAAY,iBAChB,EACA,KAAM,CACF,KAAM,EAAA,qBAAqB,CAC3B,QAAS,iBACT,YAAa,qBACb,UAAW,gBACX,WAAY,eAChB,CACJ,CAEyB,CAAC,EAAK,CACzB,EAAO,EAAO,IAAI,CAExB,MACI,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CAAI,UAAU,oDACX,CAAA,EAAA,EAAA,GAAA,EAAC,MAAA,CACG,UAAW,CAAA,EAAG,EAAO,OAAO,CAAC,CAAC,EAAE,EAAO,WAAW,CAAC,uEAAuE,EAAE,EAAY,4BAA8B,6BAAA,CAChK,UAEN,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,uCACX,CAAA,EAAA,EAAA,GAAA,EAAC,EAAA,CAAK,UAAW,CAAC,QAAQ,EAAE,EAAO,SAAS,CAAC,cAAc,CAAC,GAC5D,CAAA,EAAA,EAAA,IAAA,EAAC,MAAA,CAAI,UAAU,2BACX,CAAA,EAAA,EAAA,GAAA,EAAC,KAAA,CAAG,UAAW,CAAC,cAAc,EAAE,EAAO,UAAU,CAAA,CAAE,UAAG,IACtD,CAAA,EAAA,EAAA,GAAA,EAAC,IAAA,CAAE,UAAU,sCAA8B,OAE/C,CAAA,EAAA,EAAA,GAAA,EAAC,SAAA,CACG,QAAS,EACT,UAAU,4DAEV,CAAA,EAAA,EAAA,GAAA,EAAC,ACxDV,EDwDU,CAAY,UAAU,oBAM/C,mCEtFA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QCGA,EAAA,EAAA,CAAA,CAAA,QDGA,IAAM,EAAqB,qEACrB,CAD2F,CAClE,EAAA,GAAG,CAAC,WADgF,WAC1D,EAAI,EAAA,aAAa,CAAC,gBAAgB,CAEpF,CAFsF,cAEvE,EAAY,CAAkB,CAAE,CAAuC,EACzF,QAAQ,EAHgH,CAG7G,CAAC,0CACZ,QAAQ,GAAG,CAAC,qCAAsC,EAAY,QAE9D,GAAI,CAKA,IAAM,EAA0B,EAAA,aAAa,CAAC,iBAAiB,CAAC,WAAW,CACrE,CADuE,CAC5C,OAAO,GAA2B,IADyB,CAE5F,CADyE,EACrE,EAAa,EAA0B,CACvC,IAAM,EAAc,CAAC,iBAAiB,EAAE,EAAW,mBAFwE,qBAEhC,EAAE,EAAyB,2DAA2D,CAAC,AAGlL,OAFA,QAAQ,IAAI,CAAC,qCAAsC,GACnD,EAAQ,CAAE,KAAM,gBAAiB,QAAS,CAAY,GAC5C,AAAJ,MAAU,EACpB,CAEA,EAAQ,CAAE,KAAM,oBAAqB,QAAS,kCAAmC,GACjF,QAAQ,GAAG,CAAC,kDAGZ,IAAM,EAAe,IAAI,EAAA,wBAAwB,CAAC,EAAA,GAAG,CAAC,YAAY,EAGlE,QAAQ,GAAG,CAAC,yCACZ,IAAM,EAAa,MAAM,EAAa,OAAO,GAC7C,QAAQ,GAAG,CAAC,qCAAsC,CAC9C,QAAS,EAAW,OAAO,CAAC,OAAO,CACnC,WAAY,EAAW,UAAU,AACrC,GAEA,EAAQ,CAAE,KAAM,2BAA4B,QAAS,+BAAgC,GAGrF,QAAQ,GAAG,CAAC,2DACZ,MAAM,EAAa,iBAAiB,CAAC,GACrC,QAAQ,GAAG,CAAC,+CAGZ,QAAQ,GAAG,CAAC,6CACZ,IAAM,EAAU,MAAM,EAAa,UAAU,CAAC,GAExC,EAAS,OAAO,KAAK,KAAK,CAAC,OAAO,GAAc,IAAM,EAAQ,QAAQ,GAItE,EAAW,OAAO,qEAAuE,OAAO,GACtG,GAAI,EAAY,EACZ,MAAM,AAAI,EADY,IACN,CAAC,oCAAoC,EAAE,AALzC,EAKmD,QAAQ,GAAA,CAAI,EAgBjF,GAbA,QAAQ,GAAG,CAAC,kCAAmC,CAC3C,aAAc,EACd,OAAQ,EAAQ,MAAM,CACtB,kBAAmB,EAAQ,OAAO,CAAC,QAAQ,GAC3C,mBAAoB,OAAO,EAAQ,OAAO,EAAI,KAAK,GAAG,CAAC,GAAI,EAAQ,QAAQ,EAC3E,SAAU,EAAQ,QAAQ,CAC1B,mBAAoB,EAAU,QAAQ,GACtC,oBAAqB,EACrB,mBAAoB,KAAO,EAAU,QAAQ,CAAC,IAC9C,cAAe,EAAwB,QAAQ,GAC/C,eAAgB,CACpB,GAEI,EAAQ,OAAO,GAAG,AAClB,MAAM,AAAI,KADmB,CACb,CAAC,qCAAqC,EAAE,EAAW,kBAAkB,EAAE,OAAO,EAAQ,OAAO,EAAI,KAAK,GAAG,CAAC,GAAI,EAAQ,QAAQ,EAAE,KAAK,CAAC,EAG1J,EAAQ,CAAE,KAAM,0BAA2B,QAAS,CAAC,mBAAmB,EAAE,OAAO,EAAQ,OAAO,EAAI,KAAK,GAAG,CAAC,GAAI,EAAQ,QAAQ,EAAE,eAAe,CAAC,AAAC,GAGpJ,QAAQ,GAAG,CAAC,yEACZ,IAAM,EClEH,KAAO,KDkEQ,CClEF,IAAI,CADV,AACW,OADJ,eAAe,CAAC,IAAI,WAAW,MACpB,GAAG,CAAC,GAAK,EAAE,QAAQ,CAAC,IAAI,QAAQ,CAAC,EAAG,MAAM,IAAI,CAAC,IDmErE,EAAe,OAAO,EAAU,QAAQ,IACxC,ECjEP,ADiEmB,SCjEV,AAA4B,CAAiB,CAAE,CAAc,EACzE,GAAI,CAAC,EAAU,UAAU,CAAC,MAAO,MAAM,AAAI,MAAM,8BACjD,IAAM,EAAY,OAAO,GACnB,KAAE,CAAG,MAAE,CAAI,CAAE,CAAG,EAAA,OAAO,CAAC,WAAW,CAAC,GACpC,EAAa,EAAA,IAAI,CAAC,6BAA6B,CAAC,CAAC,EAAW,OAAO,GAAM,OAAO,GAAM,EACtF,EAAY,EAAA,IAAI,CAAC,6BAA6B,CAAC,CAAC,EAAW,OAAO,GAAY,EACpF,MAAO,CACH,WAAY,EAAA,GAAG,CAAC,KAAK,CAAC,GACtB,UAAW,EAAA,GAAG,CAAC,KAAK,CAAC,GACrB,OAAQ,EACR,UAAW,OAAO,GAClB,WAAY,OAAO,EACvB,CACJ,EDoDsD,EAAW,GACzD,QAAQ,GAAG,CAAC,wCAAyC,CACjD,OAAQ,EAAU,MAAM,CAAC,KAAK,CAAC,EAAG,IAAM,MACxC,WAAY,EAAU,UAAU,CAChC,UAAW,EAAU,SAAS,CAAC,KAAK,CAAC,EAAG,IAAM,KAClD,GAEA,EAAQ,CAAE,KAAM,0BAA2B,QAAS,8BAA+B,GAGnF,QAAQ,GAAG,CAAC,iEACZ,IAAM,EAAiB,MAAM,EAAa,OAAO,CAAC,EAAoB,KACtE,QAAQ,GAAG,CAAC,OADkF,4CAC9B,GAEhE,EAAQ,CAAE,KAAM,6BAA8B,QAAS,CAAC,oBAAoB,EAAE,EAAe,eAAe,CAAA,CAAE,AAAC,GAG/G,QAAQ,GAAG,CAAC,yDACZ,IAAM,EAAoB,MAAM,EAAa,kBAAkB,CAAC,EAAe,eAAe,EAG9F,GAFA,QAAQ,GAAG,CAAC,uCAAwC,GAEnB,YAAY,CAAzC,EAAkB,MAAM,CACxB,MAAM,AAAI,MAAM,oDAGpB,EAAQ,CAAE,KAAM,0BAA2B,QAAS,kCAAmC,GAGvF,QAAQ,GAAG,CAAC,6DACZ,GAAI,CACA,IAAM,EAAkB,MAAM,EAAa,YAAY,CACnD,EACA,YACA,CAAC,EAAW,OAAO,CAAC,OAAO,CAAE,EAAuB,EAElD,EAAmB,OAAO,CAAe,CAAC,EAAE,EAAI,GAStD,GARA,QAAQ,GAAG,CAAC,sCAAuC,CAC/C,aAAc,EAAiB,QAAQ,GACvC,cAAe,OAAO,GAAoB,KAAK,GAAG,CAAC,GAAI,EAAQ,QAAQ,EACvE,YAAa,EAAU,QAAQ,GAC/B,aAAc,EACd,WAAY,IAChB,GAEI,IACA,MAAM,AAAI,GAJsB,GAIhB,CAAC,EADE,WAAW,WACW,EAAE,OAAO,GAAoB,KAAK,GAAG,CAAC,GAAI,EAAQ,QAAQ,EAAE,eAAe,EAAE,EAAW,cAAc,CAAC,EAGpJ,EAAQ,CAAE,KAAM,0BAA2B,QAAS,CAAC,oBAAoB,EAAE,OAAO,GAAoB,KAAK,GAAG,CAAC,GAAI,EAAQ,QAAQ,EAAE,KAAK,CAAC,AAAC,EAChJ,CAAE,MAAO,EAAgB,CACrB,QAAQ,KAAK,CAAC,2CAA4C,GAE1D,EAAQ,CAAE,KAAM,0BAA2B,QAAS,oDAAqD,EAC7G,CAGA,QAAQ,GAAG,CAAC,4DACZ,IAAM,EAAgB,MAAM,EAAa,cAAc,CAAC,EAAU,UAAU,EAAE,EAC9E,QAAQ,GAAG,CAAC,kDAAmD,GAAgB,EAAQ,CAAE,KAAM,6BAA8B,QAAS,CAAC,4BAA4B,EAAE,EAAA,CAAe,AAAC,GAGrL,QAAQ,GAAG,CAAC,wDACZ,IAAM,EAAc,MAAM,EAAa,kBAAkB,CAAC,GAG1D,GAFA,QAAQ,GAAG,CAAC,sCAAuC,GAExB,YAAY,CAAnC,EAAY,MAAM,CAClB,MAAM,AAAI,MAAM,mDAGpB,EAAQ,CAAE,KAAM,oBAAqB,QAAS,0CAA2C,SAAU,EAAG,GACtG,QAAQ,GAAG,CAAC,gDAEZ,QAAQ,GAAG,CAAC,iFAIZ,EAAQ,CAAE,KAAM,+BAAgC,QAAS,6CAA8C,SAAU,EAAG,GAGpH,IAAM,EAAoB,EAAU,UAAU,CAE9C,MAAO,CACH,gBAAiB,EAAY,eAAe,CAC5C,OAAQ,EACR,UAAW,EAAU,QAAQ,GAC7B,cAAe,EAAW,OAAO,CAAC,OAAO,CACzC,eAAgB,EAChB,OAAQ,EAAU,MAAM,CACxB,UAAW,EAAU,SAAS,CAC9B,qBAAsB,EAEtB,iBAAiB,CACrB,CAEJ,CAAE,MAAO,EAAO,CAEZ,IAAI,EAAU,aAAiB,MAAQ,EAAM,OAAO,CAAG,uBAMvD,MALI,kBAAkB,IAAI,CAAC,IACvB,IAAoB,EADa,IACvB,gGAAU,EAExB,QAAQ,KAAK,CAAC,+BAAgC,GAC9C,EAAQ,CAAE,KAAM,gBAAiB,QAAS,CAAQ,GAC5C,AAAI,MAAM,EACpB,CACJ,6CE1LA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAEO,eAAe,EAClB,CAQC,CACD,CAAuC,EAEvC,QAAQ,GAAG,CAAC,uEACZ,QAAQ,GAAG,CAAC,gCAAiC,CACzC,WAAY,EAAc,cAAc,CAAC,KAAK,CAAC,EAAG,IAAM,MACxD,OAAQ,EAAc,MAAM,CAC5B,UAAW,EAAc,SAAS,CAAC,KAAK,CAAC,EAAG,IAAM,KACtD,GAEA,GAAI,KAoGI,EAgCA,EAnIJ,EAAQ,CACJ,KAAM,+BACN,QAAS,6CACT,SAAU,EACd,GAGA,IAAM,EAAe,CAAA,EAAA,EAAA,oBAAA,AAAoB,IACnC,EAAgB,CAAA,EAAA,EAAA,uBAAA,AAAuB,IACzC,EAAgD,KAChD,EAAmD,KAEvD,GAAI,GAAgB,EAAe,CAC/B,QAAQ,GAAG,CAAC,uEAEZ,IAAM,EAAW,CAAA,EAAA,EAAA,qBAAA,AAAqB,IACtC,GAAI,CAAC,EACD,MAAM,AAAI,EADC,IACK,wCAEpB,EAAsB,IAAI,EAAA,oBAAoB,CAC1C,EAAc,oBAAoB,CAClC,EACA,EAER,MACI,CADG,OACK,GAAG,CAAC,kGACZ,EAAe,IAAI,EAAA,wBAAwB,CAAC,EAAA,GAAG,CAAC,YAAY,EAC5D,MAAM,EAAa,OAAO,GAC1B,MAAM,EAAa,iBAAiB,CAAC,EAAc,oBAAoB,EAM3E,IAAM,EAAmB,EAAA,2BAA2B,CAEpD,CAFsD,OAE9C,GAAG,CAAC,wBAF6E,iCAGzF,QAAQ,GAAG,CAAC,8DAA+D,CACvE,UAAW,EAAc,SAAS,CAAC,KAAK,CAAC,EAAG,IAAM,MAClD,WAAY,EAAc,cAAc,CAAC,KAAK,CAAC,EAAG,IAAM,MACxD,UAAW,EAAiB,KAAK,CAAC,EAAG,IAAM,MAC3C,OAAQ,EAAc,SAAS,AACnC,GAGA,QAAQ,GAAG,CAAC,uEAEZ,IAAM,EAAe,OAAO,EAAc,SAAS,EAC7C,EAAkB,OAAO,GAEzB,EAAgB,EAAA,OAAO,CAAC,WAAW,CAAC,GACpC,EAAY,OAAO,EAAc,GAAG,EACpC,EAAa,OAAO,EAAc,IAAI,EAEtC,EAAgB,EAAA,IAAI,CAAC,6BAA6B,CAAC,CAAC,EAAgB,EACpE,EAAa,EAAA,IAAI,CAAC,6BAA6B,CAAC,CAAC,EAAW,EAAW,EAEvE,EAAkB,CACpB,EAAc,MAAM,CACpB,EAAA,GAAG,CAAC,KAAK,CAAC,GACV,EAAA,GAAG,CAAC,KAAK,CAAC,GACb,CAED,GAAqB,GAAG,CAApB,CAHmC,CAG7B,MAAM,CACZ,MAAM,AAAI,AAJuC,MAIjC,CAAC,iDAAiD,EAAE,EAAM,MAAM,CAAA,CAAE,EAoCtF,GAjCA,QAAQ,GAAG,CAAC,qCAAsC,CAC9C,YAAa,EAAM,MAAM,CACzB,SAAU,EAAM,GAAG,CAAC,GAAK,EAAE,KAAK,CAAC,EAAG,IAAM,MAC9C,GAEA,EAAQ,CACJ,KAAM,+BACN,QAAS,mCACT,SAAU,EACd,GAMA,QAAQ,GAAG,CAAC,qDACZ,QAAQ,GAAG,CAAC,qFAGZ,QAAQ,GAAG,CAAC,0DACZ,MAAM,IAAI,QAAQ,GAAW,WAAW,EAAS,MAEjD,QAAQ,GAAG,CAAC,MAF6D,kEAIzE,EAAQ,CACJ,KAAM,+BACN,QAAS,uCACT,SAAU,EACd,GAGA,QAAQ,GAAG,CAAC,gEAER,EAQA,EAAmB,CAPR,MAAM,EAAoB,QAAQ,AADxB,CAEjB,EAAc,SAAS,CACvB,EAAc,cAAc,CAC5B,EACA,EACA,EAAA,EAEkB,gBAAgB,MACnC,GAAI,EACP,EAAmB,MAAM,EAAa,EADjB,eACkC,CACnD,EAAc,SAAS,CACvB,EAAc,cAAc,CAC5B,EACA,EACA,QAGJ,MAAM,AAAI,MAAM,mCAcpB,GAXA,QAAQ,GAAG,CAAC,sDAAuD,GAEnE,EAAQ,CACJ,KAAM,+BACN,QAAS,CAAC,sBAAsB,EAAE,EAAA,CAAkB,CACpD,SAAU,EACd,GAGA,QAAQ,GAAG,CAAC,4DAER,EACA,EAAsB,MAAM,EAAa,EAD3B,gBAC6C,CAAC,OACzD,CAEH,IAAM,EAAW,CAAA,EAAA,EAAA,qBAAA,AAAqB,IACtC,GAAI,CAAC,EACD,MAAM,AAAI,EADC,IACK,uDAEpB,EAAsB,MAAM,EAAS,kBAAkB,CAAC,EAC5D,CAGA,GAFA,QAAQ,GAAG,CAAC,0CAA2C,GAEpB,YAAY,CAA3C,EAAoB,MAAM,CAC1B,MAAM,AAAI,MAAM,sDAGpB,EAAQ,CACJ,KAAM,+BACN,QAAS,qEACT,SAAU,EACd,GAEA,QAAQ,GAAG,CAAC,iDACZ,QAAQ,GAAG,CAAC,wEAEZ,IAAM,EAAU,EAA4B,eAAe,EAAK,EAA4B,gBAAgB,EAAI,EAEhH,OADA,QAAQ,GAAG,CAAC,mDAAoD,GACzD,CACH,iBAAkB,EAClB,kBAAkB,EAClB,kBAAmB,EACnB,OAAQ,EAAc,MAAM,CAC5B,UAAW,EAAc,SAAS,CAClC,gBAAiB,CACrB,CAEJ,CAAE,MAAO,EAAO,CAMZ,MALA,QAAQ,KAAK,CAAC,gCAAiC,GAC/C,EAAQ,CACJ,KAAM,gBACN,QAAS,aAAiB,MAAQ,EAAM,OAAO,CAAG,0BACtD,GACM,CACV,CACJ,kEC3MA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAEO,eAAe,EAClB,CAAkB,CAClB,CAAuC,EAEvC,EAAQ,CAAE,KAAM,eAAgB,QAAS,2CAA4C,SAAU,EAAG,GAClG,IAAM,EAAS,IAAI,EAAA,oBAAoB,CAAC,EAAA,GAAG,CAAC,OAAO,EACnD,GAAI,CACA,IAAM,EAAW,MAAM,EAAO,6BAA6B,CAAC,GAE5D,OADA,QAAQ,GAAG,CAAC,kCAAmC,GACxC,CACX,CAAE,MAAO,EAAG,AADS,CAEjB,QAAQ,IAAI,CAAC,sBAFwC,iCAEgB,GACrE,IAAM,EAAW,KAAK,KAAK,CAAC,GAAc,EAAA,GAAG,CAAC,IAAL,UAAmB,EAAI,GAAA,CAAG,EACnE,MAAO,CAAE,QAAS,EAAU,KAAM,EAAW,EAAY,OAAQ,UAAoB,CACzF,CACJ,uEClBA,IAAA,EAAA,EAAA,CAAA,CAAA,MAyCO,OAAM,EACD,IAAgB,CAChB,MAAoB,CACpB,aAAc,CAAM,CACpB,OAAgB,AAExB,aAAY,CAAe,CAAE,CACzB,IAAI,CAAC,OAAO,CAAG,EACf,IAAI,CAAC,IAAI,CAAG,IAAI,EAAA,SAAS,CAAC,GAC1B,IAAI,CAAC,MAAM,CAAG,IAAI,EAAA,WAAW,CAAC,IAAI,CAAC,IAAI,EAInC,QAAQ,GAAG,CAAC,CAAC,+CAA+C,EAAE,EAAA,CAAS,CAE/E,CAEA,MAAc,mBAAmC,CAC7C,GAAI,CAAC,IAAI,CAAC,WAAW,CACjB,CADmB,EACf,CACA,QAAQ,GAAG,CAAC,CAAC,6BAA6B,EAAE,IAAI,CAAC,OAAO,CAAA,CAAE,EAC1D,MAAM,IAAI,CAAC,MAAM,CAAC,QAAQ,GAC1B,IAAI,CAAC,WAAW,EAAG,EACnB,QAAQ,GAAG,CAAC,CAAC,mCAAmC,CAAC,CACrD,CAAE,MAAO,EAAO,CAEZ,MADA,QAAQ,IAAI,CAAC,CAAC,oCAAoC,EAAE,aAAiB,MAAQ,EAAM,OAAO,CAAG,OAAO,GAAA,CAAQ,EACtG,AAAI,MAAM,CAAC,8BAA8B,EAAE,aAAiB,MAAQ,EAAM,OAAO,CAAG,gBAAA,CAAiB,CAC/G,CAER,CAEA,MAAM,gBAAgB,CAAc,CAAsB,CACtD,MAAM,IAAI,CAAC,iBAAiB,GAC5B,IAAM,EAAY,MAAM,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,OAAO,IAE3D,MAAO,CACH,MAAO,EAAU,KAAK,CACtB,OAAQ,OAAO,EAAU,MAAM,EAC/B,MAAO,EAAU,KAAK,GAAK,EAAA,cAAc,CAAC,IAAI,CAAG,OAC7C,EAAU,KAAK,GAAK,EAAA,cAAc,CAAC,MAAM,CAAG,SAAW,UAC3D,QAAS,EAAU,OAAO,AAC9B,CACJ,CAEA,MAAM,eAAe,CAAa,CAAsB,CACpD,MAAM,IAAI,CAAC,iBAAiB,GAC5B,IAAM,EAAY,MAAM,IAAI,CAAC,MAAM,CAAC,cAAc,CAAC,GAEnD,MAAO,CACH,MAAO,EAAU,KAAK,CACtB,OAAQ,OAAO,EAAU,MAAM,EAAI,GACnC,MAAO,EAAU,KAAK,GAAK,EAAA,cAAc,CAAC,IAAI,CAAG,OAC7C,EAAU,KAAK,GAAK,EAAA,cAAc,CAAC,MAAM,CAAG,SAAW,UAC3D,QAAS,EAAU,OAAO,AAC9B,CACJ,CAEA,MAAM,WAAW,CAAc,CAAE,CAAa,CAAyB,CAInE,OAHA,MAAM,IAAI,CAAC,iBAAiB,GAGrB,CAFQ,MAAM,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,OAAO,GAAS,EAAA,EAE9C,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAC9C,CAEA,MAAM,gBAAgB,CAAe,CAAsB,CACvD,MAAM,IAAI,CAAC,iBAAiB,GAmB5B,IAAM,EAAY,MAAM,IAAI,CAAC,MAAM,CAAC,eAAe,CAAC,GAEpD,MAAO,CACH,MAAO,EAAU,KAAK,CACtB,OAAQ,OAAO,EAAU,MAAM,EAC/B,YAAa,OAAO,EAAU,WAAW,EACzC,KAAM,EAAU,IAAI,CACpB,OAAQ,EAAU,MAAM,CACxB,QAAS,EAAU,OAAO,AAC9B,CACJ,CAEA,MAAM,WAAW,CAAgB,CAAE,CAAoB,CAAqC,CACxF,MAAM,IAAI,CAAC,iBAAiB,GAC5B,IAAM,EAAc,EAAO,GAAG,CAAC,IAAI,CAAC,qBAAqB,EAsDnD,EAAoB,CACtB,MAAO,EAAM,KAAK,CAClB,OAAQ,OAAO,EAAM,MAAM,EAC3B,YAAa,OAAO,EAAM,WAAW,EACrC,MAAO,SACP,OAAQ,KAAK,KAAK,CAAC,KAAK,GAAG,GAAK,KAAQ,KACxC,iBAAkB,KAClB,QAAS,GACT,KAAM,KACV,EACM,EAAe,MAAM,IAAI,CAAC,MAAM,CAAC,UAAU,CAAC,EAAmB,GACrE,MAAO,CAAE,OAAQ,EAAa,MAAM,EAAE,IAAI,IAAI,CAAC,mBAAmB,GAAK,EAAE,AAAC,CAC9E,CAEA,MAAM,KAAK,CAAc,CAAE,CAAoB,CAAuD,CAClG,MAAM,IAAI,CAAC,iBAAiB,GAC5B,IAAM,EAAc,EAAO,GAAG,CAAC,IAAI,CAAC,qBAAqB,EACnD,MAAE,CAAI,CAAE,MAAI,CAAE,CAAG,MAAM,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,OAAO,GAAS,GAE9D,MAAO,CACH,KAAM,EAAK,GAAG,CAAC,IAAI,CAAC,mBAAmB,EACvC,KAAM,EAAK,GAAG,CAAC,IAAI,CAAC,mBAAmB,CAC3C,CACJ,CAEA,YAAY,CAAoB,CAAU,CACtC,IAAM,EAAc,EAAO,GAAG,CAAC,IAAI,CAAC,qBAAqB,EACzD,MAAO,CAAA,EAAA,EAAA,iBAAA,AAAiB,EAAC,CACrB,KAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CACvB,OAAQ,CACZ,EACJ,CAEA,MAAM,QAAQ,CAAa,CAAyB,CAGhD,OAFA,MAAM,IAAI,CAAC,iBAAiB,GAErB,CADe,MAAM,IAAI,CAAC,MAAM,CAAC,OAAO,CAAC,EAAA,EAC3B,GAAG,CAAC,IAAI,CAAC,mBAAmB,CACrD,CAEA,MAAM,aAAkF,CACpF,MAAM,IAAI,CAAC,iBAAiB,GAC5B,IAAM,EAAO,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,GACpC,MAAO,CACH,KAAM,EAAK,IAAI,CACf,YAAa,EAAK,WAAW,CAC7B,QAAS,EAAK,OAAO,AACzB,CACJ,CAEA,WAAW,CAAoB,CAAU,CACrC,OAAO,EAAO,MAAM,CAAC,CAAC,EAAK,IAAU,EAAM,EAAM,MAAM,EAAE,CAAE,CAC/D,CAGQ,oBAAoB,CAAY,CAAc,CAClD,MAAO,CACH,OAAQ,EAAM,MAAM,CACpB,UAAW,EAAM,CAAC,CAClB,OAAQ,OAAO,EAAM,MAAM,EAC3B,SAAU,MACV,SAAU,EAAM,EAAE,AACtB,CACJ,CAEQ,sBAAsB,CAAiB,CAAS,CACpD,MAAO,CACH,OAAQ,EAAM,MAAM,CACpB,EAAG,EAAM,SAAS,CAClB,OAAQ,OAAO,EAAM,MAAM,EAC3B,GAAI,EAAM,QAAQ,AACtB,CACJ,CACJ,CAGO,MAAM,EACD,QAAwC,IAAI,GAAM,CAClD,QAAmB,AAE3B,aAAY,CAAkB,CAAE,CAC5B,IAAI,CAAC,QAAQ,CAAG,EAChB,EAAS,OAAO,CAAC,IACb,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAAK,IAAI,EAAgB,GAC9C,EACJ,CAGA,YAA8B,CAC1B,IAAM,EAAc,KAAK,KAAK,CAAC,KAAK,MAAM,GAAK,IAAI,CAAC,QAAQ,CAAC,MAAM,EAC7D,EAAc,IAAI,CAAC,QAAQ,CAAC,EAAY,CAC9C,OAAO,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,EAC5B,CAGA,aAAiC,CAC7B,OAAO,MAAM,IAAI,CAAC,IAAI,CAAC,OAAO,CAAC,MAAM,GACzC,CAGA,MAAM,eACF,CAAmB,CACnB,CAAoB,CACpB,EAAwB,CAAC,CACyD,CAClF,IAAM,EAAa,IAAI,CAAC,QAAQ,CAAC,KAAK,CAAC,EAAG,GACpC,EAAgB,EAAc,OAAO,GACrC,EAAgB,EAAE,CAExB,IAAK,IAAM,KAAW,EAAY,CAC9B,IAAM,EAAS,IAAI,CAAC,OAAO,CAAC,GAAG,CAAC,GAG1B,EAAiB,EAAO,MAAM,CAAC,GACjC,IAAI,CAAC,UAAU,CAAC,CAAC,EAAE,GAAK,GAE5B,EAAc,IAAI,CAAC,CAAE,KAAM,EAAQ,OAAQ,CAAe,EAC9D,CAEA,MAAO,eAAE,CAAc,CAC3B,CAEQ,WAAW,CAAoB,CAAU,CAC7C,OAAO,EAAO,MAAM,CAAC,CAAC,EAAK,IAAU,EAAM,EAAM,MAAM,CAAE,CAAE,EAC/D,CACJ,CC5TA,IAAA,EAAA,EAAA,CAAA,CAAA,QAEO,eAAe,EAClB,CAAY,CACZ,CAAuC,EAEvC,QAAQ,GAAG,CAAC,uDACZ,QAAQ,GAAG,CAAC,+BAAgC,EAAM,QAElD,GAAI,CACA,EAAQ,CACJ,KAAM,eACN,QAAS,CAAC,gCAAgC,EAAE,EAAK,QAAQ,CAAC,CAC1D,SAAU,EACd,GAGA,QAAQ,GAAG,CAAC,uDACZ,QAAQ,GAAG,CAAC,wCAAyC,EAAA,GAAG,CAAC,WAAW,CAAC,MAAM,EAC3E,QAAQ,GAAG,CAAC,qCAAsC,EAAA,GAAG,CAAC,kBAAkB,EAExE,IAAM,EAAe,EAAA,GAAG,CAAC,WAAW,CAAC,MAAM,CAAG,IAAI,EAAsB,EAAA,GAAG,CAAC,WAAW,EAAI,KACrF,EAAQ,EAAe,EAAa,UAAU,GAAK,IAAI,EAAgB,EAAA,GAAG,CAAC,kBAAkB,EAEnG,QAAQ,GAAG,CAAC,0CAA2C,EAAe,qBAAuB,eAG7F,QAAQ,GAAG,CAAC,+CACZ,IAAM,EAAY,MAAM,EAAM,eAAe,CAAC,OAAO,IASrD,GAPA,QAAQ,GAAG,CAAC,2CAA4C,CACpD,MAAO,EAAU,KAAK,CACtB,OAAQ,EAAU,MAAM,CAAC,QAAQ,GACjC,MAAO,EAAU,KAAK,CACtB,QAAS,EAAU,OAAO,EAAE,MAAM,EAAG,IAAM,KAC/C,GAEI,CAAC,EAAU,OAAO,CAClB,CADoB,KACd,AAAI,MAAM,gDAYpB,OATA,EAAQ,CACJ,KAAM,eACN,QAAS,0CACT,SAAU,EACd,GAEA,QAAQ,GAAG,CAAC,yDACZ,QAAQ,GAAG,CAAC,oDAEL,OACH,eACA,YACA,EACA,iBAAkB,EAAU,OAAO,CACnC,OAAQ,CACZ,CAEJ,CAAE,MAAO,EAAO,CAgBZ,MAfA,QAAQ,KAAK,CAAC,mCAAoC,GAClD,QAAQ,KAAK,CAAC,sCAAuC,CACjD,QAAS,aAAiB,MAAQ,EAAM,OAAO,CAAG,gBAClD,MAAO,aAAiB,MAAQ,EAAM,KAAK,MAAG,EAC9C,QAAS,MACL,EACA,QAAS,EAAA,GAAG,CAAC,kBAAkB,CAC/B,eAAgB,EAAA,GAAG,CAAC,WAAW,CAAC,MACpC,AAD0C,CAE9C,GAEA,EAAQ,CACJ,KAAM,YACN,QAAS,aAAiB,MAAQ,EAAM,OAAO,CAAG,4BACtD,GACM,CACV,CACJ,0EC7EA,IAAA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QACA,EAAA,EAAA,CAAA,CAAA,QAEO,eAAe,EAClB,CAAkB,CAClB,CAIC,CACD,CAKC,CACD,CAAuC,EAEvC,QAAQ,GAAG,CAAC,uDACZ,QAAQ,GAAG,CAAC,+BAAgC,CACxC,aACA,WAAY,EAAY,aAAa,CAAC,KAAK,CAAC,EAAG,IAAM,MACrD,QAAS,EAAA,GAAG,CAAC,OAAO,CACpB,eAAgB,EAAY,cAAc,GAAI,EAC9C,cAAe,EAAgB,gBAAgB,CAAC,KAAK,CAAC,EAAG,IAAM,KACnE,GAGI,EAAY,cAAc,CAC1B,CAD4B,OACpB,GAAG,CAAC,6EAEZ,QAAQ,GAAG,CAAC,gEAGhB,GAAI,KAeI,EAdJ,EAAQ,CACJ,KAAM,eACN,QAAS,CAAC,WAAW,EAAE,EAAW,yBAAyB,CAAC,CAC5D,SAAU,EACd,GAEA,QAAQ,GAAG,CAAC,oDACZ,IAAM,EAAS,IAAI,EAAA,oBAAoB,CAAC,EAAA,GAAG,CAAC,OAAO,EAG7C,EAAmB,EAAgB,gBAAgB,EAAE,OAC3D,QAAQ,GAAG,CAAC,yEAIZ,GAAI,CACA,GAAM,eAAE,CAAa,CAAE,CAAG,MAAM,EAAA,CAAA,CAAA,QAAiB,IAAI,CAAC,GAAK,EAAE,MAAM,CAAC,IAChE,GACA,GAAc,OAAO,EADN,KACa,OAAiB,EAAK,CAE1D,CAAE,MAAO,EAAG,CACR,QAAQ,IAAI,CAAC,uGAAwG,aAAa,MAAQ,EAAE,OAAO,CAAG,EAC1J,EAGmB,MAAf,GAAuB,IAAe,GAAG,CACzC,QAAQ,IAAI,CAAC,oFACb,EAAc,EAAgB,MAAM,EAAE,AAG1C,QAAQ,GAAG,CAAC,gBAH0D,8BAGX,CACvD,QAAS,EAAiB,KAAK,CAAC,EAAG,IAAM,kBACzC,EACA,gBAAiB,EACjB,KAAM,gEACV,GAEA,EAAQ,CACJ,KAAM,eACN,QAAS,CAAC,WAAW,EAAE,EAAW,yBAAyB,CAAC,CAC5D,SAAU,EACd,GAGA,QAAQ,GAAG,CAAC,8EACZ,IAAM,EAAa,MAAM,EAAO,mBAAmB,CAC/C,GAAe,EAAgB,MAAM,CACrC,EACA,EAAA,2BAA2B,EAY/B,GATA,QAAQ,GAAG,CAAC,gCAAiC,CACzC,QAAS,EAAW,OAAO,CAC3B,KAAM,EAAW,IAAI,CACrB,OAAQ,EAAW,MAAM,CACzB,MAAO,EAAW,KAAK,CACvB,MAAO,EAAW,KACtB,AAD2B,GAIvB,CAAC,EAAW,OAAO,CACnB,CADqB,KACf,AAAI,MAAM,CAAC,8BAA8B,EAAE,EAAW,KAAK,EAAI,gBAAA,CAAiB,EAsB1F,OAlBA,QAAQ,GAAG,CAAC,kEACZ,EAAQ,CACJ,KAAM,eACN,QAAS,gDACT,SAAU,EACd,GAIA,MAAM,IAAI,QAAQ,GAAW,WAAW,EAAS,MAEjD,QAAQ,GAAG,CAAC,iDACZ,EAAQ,CACJ,KAAM,eACN,QAAS,6CACT,SAAU,EACd,GAEO,CACH,YAAa,EAAW,IAAI,EAAI,CAAC,KAAK,EAAE,KAAK,GAAG,GAAA,CAAI,CACpD,iBAAkB,EAClB,gBAAiB,GAAe,EAAgB,MAAM,CACtD,qBAAsB,EAAW,IAAI,CACrC,SAAU,EAAW,IAAI,CACzB,SAAU,EACV,UAAW,EAAW,MAAM,CAC5B,IAAK,EACL,MAAO,EAAgB,KAAK,CAC5B,UAAW,EAAgB,SAAS,AACxC,CAEJ,CAAE,MAAO,EAAO,CAeZ,MAdA,QAAQ,KAAK,CAAC,gCAAiC,GAC/C,QAAQ,KAAK,CAAC,mCAAoC,CAC9C,QAAS,aAAiB,MAAQ,EAAM,OAAO,CAAG,gBAClD,MAAO,aAAiB,MAAQ,EAAM,KAAK,MAAG,EAC9C,QAAS,YACL,EACA,QAAS,EAAA,GAAG,CAAC,OAAO,AACxB,CACJ,GAEA,EAAQ,CACJ,KAAM,YACN,QAAS,aAAiB,MAAQ,EAAM,OAAO,CAAG,oBACtD,GACM,CACV,CACJ,4CCnJA,IAAA,EAAA,EAAA,CAAA,CAAA,OAEO,eAAe,EAClB,CAAc,CACd,CAAsB,CACtB,CAAkB,CAClB,CAAuC,EAEvC,QAAQ,GAAG,CAAC,qDACZ,QAAQ,GAAG,CAAC,kCAAmC,CAC3C,QAAS,EAAU,KAAK,CACxB,OAAQ,EACR,cAAe,MACnB,GAEA,GAAI,CACA,EAAQ,CACJ,KAAM,eACN,QAAS,CAAC,0BAA0B,EAAE,EAAW,QAAQ,CAAC,CAC1D,SAAU,EACd,GAGA,QAAQ,GAAG,CAAC,0DACZ,IAAM,EAAc,MAAM,EAAM,cAAc,CAAC,EAAU,KAAK,EAQ9D,GANA,QAAQ,GAAG,CAAC,oCAAqC,CAC7C,MAAO,EAAY,KAAK,CACxB,MAAO,EAAY,KAAK,CACxB,OAAQ,EAAY,MAAM,CAAC,QAAQ,EACvC,GAE0B,SAAtB,EAAY,KAAK,CAAa,CAE9B,QAAQ,GAAG,CAAC,4DACZ,MAAM,IAAI,QAAQ,GAAW,WAAW,EAAS,MAEjD,IAAM,EAAc,MAAM,EAAM,cAAc,CAAC,EAAU,KAAK,EAG9D,GAFA,QAAQ,GAAG,CAAC,oCAAqC,EAAY,KAAK,EAExC,QAAQ,CAA9B,EAAY,KAAK,CACjB,MAAM,AAAI,MAAM,CAAC,8CAA8C,EAAE,EAAY,KAAK,CAAA,CAAE,CAE5F,CAEA,QAAQ,GAAG,CAAC,gEAGZ,QAAQ,GAAG,CAAC,+CACZ,IAAM,EAAS,MAAM,EAAM,UAAU,CAAC,OAAO,GAAa,EAAU,KAAK,EAEzE,QAAQ,GAAG,CAAC,2CAA4C,CACpD,MAAO,EAAO,MAAM,CACpB,YAAa,EAAO,MAAM,CAAC,CAAC,EAAK,IAAM,EAAM,OAAO,EAAE,MAAM,EAAG,GAC/D,OAAQ,EAAO,GAAG,CAAC,IAAK,AAAC,CACrB,OAAQ,OAAO,EAAE,MAAM,EACvB,OAAQ,EAAE,MAAM,EAAE,MAAM,EAAG,IAAM,MACrC,CAAC,CACL,GAGA,GAAI,CACA,IAAM,EAAc,EAAO,MAAM,CAAC,CAAC,EAAK,IAAM,EAAM,OAAO,EAAE,MAAM,EAAG,GAChE,EAAQ,EAAM,WAAW,CAAC,GAEhC,GAAI,CAEA,IAAI,EAAU,UACd,GAAI,CACA,IAAM,EAAU,CAAA,EAAA,EAAA,eAAA,AAAe,EAAC,GAChC,EAAU,GAAS,MAAQ,CAC/B,CAAE,MAAO,EAAG,CAAE,CACA,CACV,GAAM,CAAE,QAAS,CAAU,CAAE,CAAG,MAAA,EAAA,CAAA,CAAA,OAChC,OAAM,EAAW,GAAG,CAAC,CACjB,MAAO,EAAU,KAAK,OACtB,UACA,EACA,WAAY,EACZ,YAAa,EAAO,MAAM,CAC1B,UAAW,KAAK,GAAG,EACvB,GACA,QAAQ,GAAG,CAAC,kEAAmE,EAAU,KAAK,CAClG,CACJ,CAAE,MAAO,EAAG,CACR,QAAQ,IAAI,CAAC,4DAA6D,EAC9E,CAMJ,CAAE,MAAO,EAAG,CACR,QAAQ,IAAI,CAAC,qDAAsD,EACvE,CAGA,IAAM,EAAc,EAAO,MAAM,CAAC,CAAC,EAAK,IAAM,EAAM,OAAO,EAAE,MAAM,EAAG,GAgBtE,OAfI,KAAK,GAAG,CAAC,EAAc,GAAc,GACrC,AADwC,QAChC,IAAI,CAAC,uCAAwC,CACjD,SAAU,EACV,SAAU,EACV,WAAY,EAAc,CAC9B,GAGJ,EAAQ,CACJ,KAAM,eACN,QAAS,CAAC,sBAAsB,EAAE,EAAO,MAAM,CAAC,YAAY,EAAE,EAAY,KAAK,CAAC,CAChF,SAAU,EACd,GAEA,QAAQ,GAAG,CAAC,mDACL,CAEX,CAAE,MAAO,EAAO,CAgBZ,MAfA,QAAQ,KAAK,CAAC,kCAAmC,GACjD,QAAQ,KAAK,CAAC,qCAAsC,CAChD,QAAS,aAAiB,MAAQ,EAAM,OAAO,CAAG,gBAClD,MAAO,aAAiB,MAAQ,EAAM,KAAK,MAAG,EAC9C,QAAS,CACL,QAAS,EAAU,KAAK,YACxB,EACA,WAAY,EAAU,KAC1B,AAD+B,CAEnC,GAEA,EAAQ,CACJ,KAAM,YACN,QAAS,aAAiB,MAAQ,EAAM,OAAO,CAAG,8BACtD,GACM,CACV,CACJ","ignoreList":[1,2,3,4,6]}