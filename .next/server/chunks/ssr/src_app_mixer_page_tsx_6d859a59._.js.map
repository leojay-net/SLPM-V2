{"version":3,"sources":["turbopack:///[project]/src/app/mixer/page.tsx","turbopack:///[project]/src/components/TransactionStatus.tsx","turbopack:///[project]/src/components/mixer/Stepper.tsx","turbopack:///[project]/src/components/mixer/SetupForm.tsx","turbopack:///[project]/src/components/mixer/DepositView.tsx","turbopack:///[project]/src/components/mixer/MixingView.tsx","turbopack:///[project]/src/components/mixer/CompleteView.tsx","turbopack:///[project]/src/orchestrator/index.ts","turbopack:///[project]/src/orchestrator/steps/privacy.ts","turbopack:///[project]/src/orchestrator/steps/swapBack.ts","turbopack:///[project]/src/lib/orchestrator.ts"],"sourcesContent":["'use client';\n\nimport React, { useState, useEffect } from 'react';\nimport { WalletIcon, CheckCircleIcon } from '@heroicons/react/24/outline';\nimport Navigation from '../../components/Navigation';\nimport WalletConnection from '../../components/WalletConnection';\nimport TransactionStatus from '../../components/TransactionStatus';\nimport Notification from '../../components/Notification';\nimport { Stepper } from '../../components/mixer/Stepper';\nimport { SetupForm } from '../../components/mixer/SetupForm';\nimport { DepositView } from '../../components/mixer/DepositView';\nimport { MixingView } from '../../components/mixer/MixingView';\nimport { CompleteView } from '../../components/mixer/CompleteView';\nimport { runMix } from '../../lib/orchestrator';\nimport { MixRequest, PrivacyLevel as PLevel } from '../../lib/types';\nimport { type WalletType } from '@/integrations/starknet/wallet';\nimport { useWallet } from '@/context/WalletProvider';\n\ntype MixingStep = 'setup' | 'deposit' | 'mixing' | 'complete';\n\ninterface MixingSession {\n    step: MixingStep;\n    amount: string;\n    privacyLevel: PLevel;\n    progress: number;\n    anonymitySetSize: number;\n    estimatedTime: number;\n}\n\nexport default function MixerPage() {\n    // Use global wallet context (persistent across pages/reloads)\n    const wallet = useWallet();\n\n    const [session, setSession] = useState<MixingSession>({\n        step: 'setup',\n        amount: '',\n        privacyLevel: 'standard',\n        progress: 0,\n        anonymitySetSize: 0,\n        estimatedTime: 0\n    });\n\n    const [isConnected, setIsConnected] = useState(false);\n    const [showWalletModal, setShowWalletModal] = useState(false);\n    const [isConnecting, setIsConnecting] = useState(false);\n    const [notification, setNotification] = useState<{\n        show: boolean;\n        type: 'success' | 'error' | 'warning' | 'info';\n        title: string;\n        message: string;\n    }>({ show: false, type: 'info', title: '', message: '' });\n    // Live transaction history (no recipient addresses stored)\n    const [transactions, setTransactions] = useState<Array<{\n        id: string;\n        type: 'deposit' | 'mix' | 'withdraw';\n        amount: string;\n        status: 'pending' | 'processing' | 'completed' | 'failed';\n        timestamp: number;\n        privacyScore: number;\n        fromNetwork: string;\n        toNetwork: string;\n        anonymitySetSize?: number;\n    }>>([]);\n\n    // Privacy level presets are defined and applied within SetupForm; no local copy needed here.\n\n    // Stepper stages are fixed and handled internally; no local steps array needed.\n\n    const [mixReq, setMixReq] = useState<MixRequest>({\n        amountStrk: 0,\n        destinations: [],\n        privacyLevel: 'standard',\n        enableTimeDelays: true,\n        enableSplitOutputs: true,\n        splitCount: 2,\n        enableRandomizedMints: true,\n        enableAmountObfuscation: true,\n        enableDecoyTx: true,\n    });\n\n    const showNotification = (type: 'success' | 'error' | 'warning' | 'info', title: string, message: string) => {\n        setNotification({ show: true, type, title, message });\n    };\n\n    const handleWalletConnect = async (walletId: string) => {\n        setIsConnecting(true);\n        try {\n            // Map UI id to WalletType used by the manager\n            const mapId = (id: string): WalletType => {\n                if (id.toLowerCase() === 'argentx') return 'argentX';\n                if (id.toLowerCase() === 'braavos') return 'braavos';\n                if (id.toLowerCase() === 'okx') return 'okx';\n                return 'argentX';\n            };\n\n            await wallet.connect(mapId(walletId));\n            setIsConnected(true);\n            setShowWalletModal(false);\n            showNotification('success', 'Wallet Connected', `Connected to ${walletId}`);\n        } catch {\n            showNotification('error', 'Connection Failed', 'Failed to connect wallet. Please try again.');\n        } finally {\n            setIsConnecting(false);\n        }\n    };\n\n    // Keep isConnected in sync with context\n    useEffect(() => {\n        setIsConnected(wallet.isConnected);\n    }, [wallet.isConnected]);\n\n    // Note: amount and privacy level changes are handled within child components via props callbacks\n\n    const startMixing = async () => {\n        if (!isConnected) {\n            setShowWalletModal(true);\n            return;\n        }\n\n        const amt = parseFloat(session.amount || '0');\n        if (!amt || amt <= 0 || mixReq.destinations.length === 0 || !mixReq.destinations[0]) {\n            showNotification('warning', 'Invalid Input', 'Enter amount and destination address');\n            return;\n        }\n\n        setSession((p) => ({ ...p, step: 'deposit', progress: 0 }));\n        showNotification('info', 'Starting Mix', 'Initializing mixing pipeline...');\n\n        try {\n            const txIdBase = Date.now().toString(36);\n            // Either call the modular orchestrator directly (client-side) or via API route.\n            // Using direct call to keep interactions smooth; switch to fetch('/api/mix') if you prefer server-side orchestration.\n            await runMix(\n                { ...mixReq, amountStrk: amt, privacyLevel: session.privacyLevel },\n                (e) => {\n                    // Update session progress/metrics\n                    if (typeof e.progress === 'number') {\n                        setSession((p) => ({\n                            ...p,\n                            step: p.step === 'deposit' && (e.progress as number) > 30 ? 'mixing' : p.step,\n                            progress: (e.progress as number) ?? p.progress,\n                        }));\n                    }\n                    if (typeof e.anonymitySetSize === 'number') {\n                        setSession((p) => ({ ...p, anonymitySetSize: e.anonymitySetSize ?? p.anonymitySetSize }));\n                    }\n                    if (typeof e.estimatedTime === 'number') {\n                        setSession((p) => ({ ...p, estimatedTime: e.estimatedTime ?? p.estimatedTime }));\n                    }\n\n                    // Maintain live, address-free transaction history\n                    setTransactions((prev) => {\n                        const next = [...prev];\n                        const now = Date.now();\n                        if (e.type === 'deposit:initiated') {\n                            next.push({\n                                id: `${txIdBase}-dep`,\n                                type: 'deposit',\n                                amount: String(amt),\n                                status: 'pending',\n                                timestamp: now,\n                                privacyScore: 0,\n                                fromNetwork: 'Starknet',\n                                toNetwork: 'Lightning',\n                            });\n                        }\n                        if (e.type === 'lightning:paid') {\n                            const idx = next.findIndex(t => t.id === `${txIdBase}-dep`);\n                            if (idx >= 0) next[idx] = { ...next[idx], status: 'completed' };\n                        }\n                        if (e.type === 'cashu:minted' && !next.some(t => t.id === `${txIdBase}-mix`)) {\n                            next.push({\n                                id: `${txIdBase}-mix`,\n                                type: 'mix',\n                                amount: String(amt),\n                                status: 'processing',\n                                timestamp: now,\n                                privacyScore: 0,\n                                fromNetwork: 'Lightning',\n                                toNetwork: 'STRK',\n                            });\n                        }\n                        if (e.type === 'mix:complete') {\n                            const idx = next.findIndex(t => t.id === `${txIdBase}-mix`);\n                            if (idx >= 0) next[idx] = {\n                                ...next[idx],\n                                status: 'completed',\n                                privacyScore: e.privacyScore ?? next[idx].privacyScore,\n                                anonymitySetSize: session.anonymitySetSize || next[idx].anonymitySetSize,\n                            };\n                        }\n                        if (e.type === 'mix:error') {\n                            const idxMix = next.findIndex(t => t.id === `${txIdBase}-mix`);\n                            if (idxMix >= 0) next[idxMix] = { ...next[idxMix], status: 'failed' };\n                        }\n                        return next;\n                    });\n\n                    if (e.type === 'mix:complete') {\n                        showNotification('success', 'Mix Complete', `Privacy score ${e.privacyScore}%`);\n                        setSession((p) => ({ ...p, step: 'complete', progress: 100 }));\n                    }\n                    if (e.type === 'mix:error') {\n                        showNotification('error', 'Mix Error', e.message || 'Unknown error');\n                    }\n                }\n            );\n        } catch {\n            // error already notified\n        }\n    };\n\n    // currentStepIndex not used directly; Stepper consumes `session.step`.\n\n    return (\n        <div className=\"min-h-screen bg-gray-950 text-white\">\n            {/* Navigation */}\n            <Navigation />\n\n            {/* Background Grid */}\n            <div className=\"absolute inset-0 bg-gray-950 -z-10\">\n                <div className=\"absolute inset-0 opacity-70 pointer-events-none\" style={{\n                    backgroundImage: \"url('/patterns/grid.svg')\",\n                    backgroundSize: '32px 32px',\n                    backgroundRepeat: 'repeat'\n                }}></div>\n            </div>\n\n            <div className=\"relative z-10 container mx-auto px-4 py-8\">\n                {/* Page Header */}\n                <div className=\"text-center mb-12\">\n                    <h1 className=\"text-4xl font-bold mb-4 text-white\">Privacy Mixer</h1>\n                    <p className=\"text-gray-400 text-lg\">\n                        Enhanced privacy through advanced cryptographic mixing\n                    </p>\n\n                    {/* Wallet Status */}\n                    <div className=\"mt-6\">\n                        {isConnected ? (\n                            <div className=\"inline-flex items-center space-x-2 bg-green-500/10 border border-green-500/20 rounded-lg px-4 py-2\">\n                                <CheckCircleIcon className=\"w-5 h-5 text-green-400\" />\n                                <span className=\"text-green-400 font-medium\">Wallet Connected</span>\n                            </div>\n                        ) : (\n                            <button\n                                onClick={() => setShowWalletModal(true)}\n                                className=\"inline-flex items-center space-x-2 bg-orange-500/10 border border-orange-500/20 hover:border-orange-500 rounded-lg px-4 py-2 transition-colors\"\n                            >\n                                <WalletIcon className=\"w-5 h-5 text-orange-400\" />\n                                <span className=\"text-orange-400 font-medium\">Connect Wallet</span>\n                            </button>\n                        )}\n                    </div>\n                </div>\n\n                <div className=\"grid grid-cols-1 lg:grid-cols-3 gap-8\">\n                    {/* Main Mixer Interface */}\n                    <div className=\"lg:col-span-2\">\n                        <Stepper current={session.step} />\n\n                        {/* Main Content */}\n                        <div>\n                            {session.step === 'setup' && (\n                                <SetupForm\n                                    value={mixReq}\n                                    onChange={(v) => {\n                                        if (v.amountStrk != null) setSession((p) => ({ ...p, amount: String(v.amountStrk) }));\n                                        if (v.privacyLevel) setSession((p) => ({ ...p, privacyLevel: v.privacyLevel as PLevel }));\n                                        setMixReq((p) => ({ ...p, ...v }));\n                                    }}\n                                    onStart={startMixing}\n                                    isConnected={isConnected}\n                                />\n                            )}\n\n                            {session.step === 'deposit' && (\n                                <DepositView amount={session.amount} />\n                            )}\n\n                            {session.step === 'mixing' && (\n                                <MixingView progress={session.progress} anonymitySet={session.anonymitySetSize} eta={session.estimatedTime} />\n                            )}\n\n                            {session.step === 'complete' && (\n                                <CompleteView amount={session.amount} anonymitySet={session.anonymitySetSize} onReset={() => setSession({ step: 'setup', amount: '', privacyLevel: 'standard', progress: 0, anonymitySetSize: 0, estimatedTime: 0 })} />\n                            )}\n                        </div>\n                    </div>\n\n                    {/* Transaction Status Sidebar */}\n                    <div className=\"lg:col-span-1\">\n                        <TransactionStatus\n                            transactions={transactions}\n                            currentMixingSession={session.step === 'mixing' ? {\n                                id: 'current',\n                                phase: session.step,\n                                progress: session.progress,\n                                anonymitySetSize: session.anonymitySetSize,\n                                estimatedTime: session.estimatedTime\n                            } : undefined}\n                        />\n                    </div>\n                </div>\n            </div>\n\n            {/* Modals and Notifications */}\n            <WalletConnection\n                isOpen={showWalletModal}\n                onClose={() => setShowWalletModal(false)}\n                onConnect={handleWalletConnect}\n                isConnecting={isConnecting}\n            />\n\n            <Notification\n                type={notification.type}\n                title={notification.title}\n                message={notification.message}\n                isVisible={notification.show}\n                onClose={() => setNotification(prev => ({ ...prev, show: false }))}\n            />\n        </div>\n    );\n}\n","import React from 'react';\nimport {\n    ClockIcon,\n    CheckCircleIcon,\n    ExclamationTriangleIcon,\n    EyeSlashIcon,\n    BanknotesIcon,\n    ArrowPathIcon\n} from '@heroicons/react/24/outline';\n\ninterface Transaction {\n    id: string;\n    type: 'deposit' | 'mix' | 'withdraw';\n    amount: string;\n    status: 'pending' | 'processing' | 'completed' | 'failed';\n    timestamp: number;\n    privacyScore: number;\n    fromNetwork: string;\n    toNetwork: string;\n    anonymitySetSize?: number;\n}\n\ninterface TransactionStatusProps {\n    transactions: Transaction[];\n    currentMixingSession?: {\n        id: string;\n        phase: 'setup' | 'deposit' | 'mixing' | 'withdraw';\n        progress: number;\n        anonymitySetSize: number;\n        estimatedTime: number;\n    };\n}\n\nexport default function TransactionStatus({ transactions, currentMixingSession }: TransactionStatusProps) {\n    const getStatusIcon = (status: string) => {\n        switch (status) {\n            case 'completed':\n                return <CheckCircleIcon className=\"w-5 h-5 text-green-400\" />;\n            case 'failed':\n                return <ExclamationTriangleIcon className=\"w-5 h-5 text-red-400\" />;\n            case 'processing':\n                return <ArrowPathIcon className=\"w-5 h-5 text-orange-400 animate-spin\" />;\n            default:\n                return <ClockIcon className=\"w-5 h-5 text-gray-400\" />;\n        }\n    };\n\n    const getStatusColor = (status: string) => {\n        switch (status) {\n            case 'completed':\n                return 'text-green-400';\n            case 'failed':\n                return 'text-red-400';\n            case 'processing':\n                return 'text-orange-400';\n            default:\n                return 'text-gray-400';\n        }\n    };\n\n    const formatTimestamp = (timestamp: number) => {\n        const date = new Date(timestamp);\n        return date.toLocaleString();\n    };\n\n    const getPrivacyScoreColor = (score: number) => {\n        if (score >= 80) return 'text-green-400';\n        if (score >= 60) return 'text-yellow-400';\n        return 'text-red-400';\n    };\n\n    return (\n        <div className=\"bg-gray-900 border border-gray-700 rounded-xl p-6\">\n            <h2 className=\"text-xl font-bold text-white mb-6 flex items-center space-x-3\">\n                <EyeSlashIcon className=\"w-6 h-6 text-blue-400\" />\n                <span>Privacy Operations</span>\n            </h2>\n\n            {/* Current Mixing Session */}\n            {currentMixingSession && (\n                <div className=\"mb-8 p-6 bg-gray-900/60 border border-gray-700 rounded-lg\">\n                    <div className=\"flex items-center justify-between mb-4\">\n                        <h3 className=\"font-semibold text-white flex items-center space-x-2\">\n                            <ArrowPathIcon className=\"w-5 h-5 text-orange-400 animate-spin\" />\n                            <span>Active Mixing Session</span>\n                        </h3>\n                        <div className=\"text-sm text-gray-400\">\n                            Phase: <span className=\"text-orange-400 capitalize\">{currentMixingSession.phase}</span>\n                        </div>\n                    </div>\n\n                    {/* Progress Bar */}\n                    <div className=\"mb-4\">\n                        <div className=\"flex justify-between text-sm text-gray-400 mb-2\">\n                            <span>Progress</span>\n                            <span>{currentMixingSession.progress}%</span>\n                        </div>\n                        <div className=\"w-full bg-gray-700 rounded-full h-2\">\n                            <div className=\"bg-orange-500 h-2 rounded-full transition-all duration-1000\" style={{ width: `${currentMixingSession.progress}%` }}></div>\n                        </div>\n                    </div>\n\n                    {/* Session Stats */}\n                    <div className=\"grid grid-cols-2 gap-4 text-sm\">\n                        <div>\n                            <span className=\"text-gray-400\">Anonymity Set:</span>\n                            <span className=\"text-white ml-2 font-medium\">{currentMixingSession.anonymitySetSize}</span>\n                        </div>\n                        <div>\n                            <span className=\"text-gray-400\">Est. Time:</span>\n                            <span className=\"text-white ml-2 font-medium\">{currentMixingSession.estimatedTime}min</span>\n                        </div>\n                    </div>\n                </div>\n            )}\n\n            {/* Transaction History */}\n            <div>\n                <h3 className=\"font-semibold text-white mb-4\">Recent Transactions</h3>\n                {transactions.length === 0 ? (\n                    <div className=\"text-center py-8 text-gray-400\">\n                        <BanknotesIcon className=\"w-12 h-12 mx-auto mb-3 opacity-50\" />\n                        <p>No transactions yet</p>\n                        <p className=\"text-sm mt-1\">Start your first privacy mix to see transactions here</p>\n                    </div>\n                ) : (\n                    <div className=\"space-y-3\">\n                        {transactions.map((tx) => (\n                            <div key={tx.id} className=\"p-4 bg-gray-800 border border-gray-700 rounded-lg hover:border-gray-600 transition-colors\">\n                                <div className=\"flex items-start justify-between\">\n                                    <div className=\"flex items-start space-x-3\">\n                                        {getStatusIcon(tx.status)}\n                                        <div>\n                                            <div className=\"flex items-center space-x-2\">\n                                                <span className=\"font-medium text-white capitalize\">{tx.type}</span>\n                                                <span className=\"text-sm text-gray-400\">â€¢</span>\n                                                <span className=\"text-sm text-white font-mono\">{tx.amount} STRK</span>\n                                            </div>\n                                            <div className=\"text-sm text-gray-400 mt-1\">\n                                                {tx.fromNetwork} â†’ {tx.toNetwork}\n                                            </div>\n                                            <div className=\"text-xs text-gray-500 mt-1\">\n                                                {formatTimestamp(tx.timestamp)}\n                                            </div>\n                                        </div>\n                                    </div>\n                                    <div className=\"text-right\">\n                                        <div className={`text-sm font-medium ${getStatusColor(tx.status)} capitalize`}>\n                                            {tx.status}\n                                        </div>\n                                        <div className=\"text-xs text-gray-400 mt-1\">\n                                            Privacy Score: <span className={getPrivacyScoreColor(tx.privacyScore)}>{tx.privacyScore}%</span>\n                                        </div>\n                                        {tx.anonymitySetSize && (\n                                            <div className=\"text-xs text-gray-400 mt-1\">\n                                                Anonymity Set: {tx.anonymitySetSize}\n                                            </div>\n                                        )}\n                                    </div>\n                                </div>\n                            </div>\n                        ))}\n                    </div>\n                )}\n            </div>\n\n            {/* Privacy Metrics Summary */}\n            {transactions.length > 0 && (\n                <div className=\"mt-6 p-4 bg-gray-800/50 border border-gray-700 rounded-lg\">\n                    <h4 className=\"font-medium text-white mb-3\">Privacy Metrics</h4>\n                    <div className=\"grid grid-cols-3 gap-4 text-sm\">\n                        <div className=\"text-center\">\n                            <div className=\"text-2xl font-bold text-green-400\">\n                                {transactions.filter(tx => tx.status === 'completed').length}\n                            </div>\n                            <div className=\"text-gray-400\">Completed</div>\n                        </div>\n                        <div className=\"text-center\">\n                            <div className=\"text-2xl font-bold text-blue-400\">\n                                {Math.round(transactions.reduce((acc, tx) => acc + tx.privacyScore, 0) / transactions.length)}%\n                            </div>\n                            <div className=\"text-gray-400\">Avg Privacy</div>\n                        </div>\n                        <div className=\"text-center\">\n                            <div className=\"text-2xl font-bold text-orange-400\">\n                                {transactions.reduce((acc, tx) => acc + parseFloat(tx.amount), 0).toFixed(2)}\n                            </div>\n                            <div className=\"text-gray-400\">Total STRK</div>\n                        </div>\n                    </div>\n                </div>\n            )}\n        </div>\n    );\n}\n","import React from 'react';\nimport { BanknotesIcon, CheckCircleIcon, ArrowPathIcon, WalletIcon } from '@heroicons/react/24/outline';\nimport { MixingStep } from '../../lib/types';\n\nconst icons = {\n    setup: WalletIcon,\n    deposit: BanknotesIcon,\n    mixing: ArrowPathIcon,\n    complete: CheckCircleIcon,\n};\n\nexport function Stepper({ current }: { current: MixingStep }) {\n    const steps: { id: MixingStep; name: string }[] = [\n        { id: 'setup', name: 'Setup' },\n        { id: 'deposit', name: 'Deposit' },\n        { id: 'mixing', name: 'Mixing' },\n        { id: 'complete', name: 'Complete' },\n    ];\n    const currentIndex = steps.findIndex((s) => s.id === current);\n    return (\n        <div className=\"mb-8\">\n            <div className=\"flex items-center justify-between\">\n                {steps.map((s, idx) => {\n                    const Icon = icons[s.id];\n                    const isActive = idx <= currentIndex;\n                    const isCurrent = idx === currentIndex;\n                    return (\n                        <div key={s.id} className=\"flex flex-col items-center relative\">\n                            <div className={`w-11 h-11 rounded-full border-2 flex items-center justify-center mb-2 ${isActive ? 'border-orange-500 bg-orange-500/10' : 'border-gray-600 bg-gray-800'}`}>\n                                <Icon className={`w-6 h-6 ${isActive ? 'text-orange-400' : 'text-gray-400'}`} />\n                            </div>\n                            <span className={`text-sm ${isCurrent ? 'text-orange-400' : isActive ? 'text-white' : 'text-gray-400'}`}>{s.name}</span>\n                            {idx < steps.length - 1 && (\n                                <div className={`absolute w-full h-0.5 top-6 left-11 ${idx < currentIndex ? 'bg-orange-500' : 'bg-gray-600'}`} style={{ width: 'calc(100% + 44px)' }} />\n                            )}\n                        </div>\n                    );\n                })}\n            </div>\n        </div>\n    );\n}\n","import React, { useMemo } from 'react';\nimport { EyeSlashIcon } from '@heroicons/react/24/outline';\nimport { MixRequest, PrivacyLevel, PrivacyConfig } from '../../lib/types';\n\nconst PRIVACY_LEVELS: Record<PrivacyLevel, PrivacyConfig> = {\n    standard: { name: 'Standard', description: '10+ participants', minParticipants: 10, estimatedTime: 5, feeBps: 10 },\n    enhanced: { name: 'Enhanced', description: '50+ participants', minParticipants: 50, estimatedTime: 15, feeBps: 20 },\n    maximum: { name: 'Maximum', description: '100+ participants', minParticipants: 100, estimatedTime: 30, feeBps: 30 },\n};\n\nexport function SetupForm({\n    value,\n    onChange,\n    onStart,\n    isConnected,\n}: {\n    value: MixRequest;\n    onChange: (v: Partial<MixRequest>) => void;\n    onStart: () => void;\n    isConnected: boolean;\n}) {\n    const feePct = useMemo(() => PRIVACY_LEVELS[value.privacyLevel].feeBps / 100, [value.privacyLevel]);\n    const valid = value.amountStrk > 0 && value.destinations.length > 0 && value.destinations[0]?.length > 0;\n\n    return (\n        <div className=\"bg-gray-900 border border-gray-700 rounded-xl p-6\">\n            <h2 className=\"text-xl font-bold mb-6 flex items-center space-x-3\">\n                <EyeSlashIcon className=\"w-6 h-6 text-blue-400\" />\n                <span>Configure Privacy Mix</span>\n            </h2>\n\n            {/* Amount */}\n            <div className=\"mb-6\">\n                <label className=\"block text-sm text-gray-300 mb-2\">Amount (STRK)</label>\n                <input\n                    inputMode=\"decimal\"\n                    value={value.amountStrk || ''}\n                    onChange={(e) => onChange({ amountStrk: Number(e.target.value || 0) })}\n                    placeholder=\"0.00\"\n                    className=\"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-orange-500 focus:outline-none\"\n                />\n                <p className=\"text-xs text-gray-500 mt-1\">Min: 1 STRK â€¢ Max: 10,000 STRK</p>\n            </div>\n\n            {/* Single Destination */}\n            <div className=\"mb-6\">\n                <label className=\"block text-sm text-gray-300 mb-2\">Destination Address</label>\n                <input\n                    value={value.destinations[0] || ''}\n                    onChange={(e) => onChange({ destinations: e.target.value.trim() ? [e.target.value.trim()] : [] })}\n                    placeholder=\"0x1234567890abcdef...\"\n                    className=\"w-full bg-gray-800 border border-gray-600 rounded-lg px-4 py-3 text-white placeholder-gray-400 focus:border-orange-500 focus:outline-none\"\n                />\n                <p className=\"text-xs text-gray-500 mt-1\">The STRK address where mixed funds will be sent.</p>\n            </div>\n\n            {/* Privacy level */}\n            <div className=\"mb-6\">\n                <label className=\"block text-sm text-gray-300 mb-3\">Privacy Level</label>\n                <div className=\"grid sm:grid-cols-3 gap-3\">\n                    {(Object.keys(PRIVACY_LEVELS) as PrivacyLevel[]).map((level) => {\n                        const cfg = PRIVACY_LEVELS[level];\n                        const active = value.privacyLevel === level;\n                        return (\n                            <button\n                                type=\"button\"\n                                key={level}\n                                onClick={() => onChange({ privacyLevel: level })}\n                                className={`p-4 border rounded-lg text-left ${active ? 'border-orange-500 bg-orange-500/10' : 'border-gray-600 hover:border-gray-500'}`}\n                            >\n                                <div className=\"font-semibold\">{cfg.name}</div>\n                                <div className=\"text-sm text-gray-400\">{cfg.description}</div>\n                                <div className=\"mt-2 text-xs text-gray-500\">Fee: {(cfg.feeBps / 100).toFixed(2)}% â€¢ Est: {cfg.estimatedTime}m</div>\n                            </button>\n                        );\n                    })}\n                </div>\n            </div>\n\n            {/* Day 6: Privacy enhancements */}\n            <div className=\"mb-6\">\n                <label className=\"block text-sm text-gray-300 mb-3\">Advanced Privacy Options</label>\n                <div className=\"grid sm:grid-cols-2 gap-4\">\n                    <label className=\"flex items-center gap-3 text-gray-300\">\n                        <input type=\"checkbox\" checked={value.enableTimeDelays} onChange={(e) => onChange({ enableTimeDelays: e.target.checked })} />\n                        Time delays & randomization\n                    </label>\n                    <label className=\"flex items-center gap-3 text-gray-300\">\n                        <input type=\"checkbox\" checked={value.enableRandomizedMints} onChange={(e) => onChange({ enableRandomizedMints: e.target.checked })} />\n                        Randomized Cashu mint hops\n                    </label>\n                    <label className=\"flex items-center gap-3 text-gray-300\">\n                        <input type=\"checkbox\" checked={value.enableAmountObfuscation} onChange={(e) => onChange({ enableAmountObfuscation: e.target.checked })} />\n                        Amount obfuscation\n                    </label>\n                    <label className=\"flex items-center gap-3 text-gray-300\">\n                        <input type=\"checkbox\" checked={value.enableDecoyTx} onChange={(e) => onChange({ enableDecoyTx: e.target.checked })} />\n                        Decoy transactions\n                    </label>\n                </div>\n                <div className=\"mt-4 grid sm:grid-cols-2 gap-4\">\n                    <label className=\"block text-sm text-gray-300\">\n                        Split outputs\n                        <input\n                            type=\"number\"\n                            min={1}\n                            max={10}\n                            value={value.splitCount}\n                            onChange={(e) => onChange({ splitCount: Number(e.target.value) })}\n                            className=\"mt-1 w-full bg-gray-800 border border-gray-600 rounded-lg px-3 py-2 text-white focus:border-orange-500 focus:outline-none\"\n                        />\n                    </label>\n                    <div className=\"text-sm text-gray-400 self-end\">Fee estimate: {(feePct).toFixed(2)}%</div>\n                </div>\n            </div>\n\n            <button\n                onClick={onStart}\n                disabled={!valid}\n                className={`w-full bg-orange-600 hover:bg-orange-700 disabled:bg-gray-700 disabled:cursor-not-allowed text-white font-semibold py-3 rounded-lg`}\n            >\n                {isConnected ? 'Start Privacy Mix' : 'Connect Wallet to Continue'}\n            </button>\n        </div>\n    );\n}\n","import React from 'react';\nimport { BanknotesIcon } from '@heroicons/react/24/outline';\n\nexport function DepositView({ amount }: { amount: string }) {\n    return (\n        <div className=\"bg-gray-900 border border-gray-700 rounded-xl p-8 text-center\">\n            <BanknotesIcon className=\"w-14 h-14 text-orange-400 mx-auto mb-4\" />\n            <h2 className=\"text-2xl font-bold mb-2\">Processing Deposit</h2>\n            <p className=\"text-gray-400 mb-6\">Preparing your {amount} STRK for mixing...</p>\n            <div className=\"animate-spin w-8 h-8 border-2 border-orange-500 border-t-transparent rounded-full mx-auto\" />\n        </div>\n    );\n}\n","import React from 'react';\nimport { ArrowPathIcon } from '@heroicons/react/24/outline';\n\nexport function MixingView({ progress, anonymitySet, eta }: { progress: number; anonymitySet: number; eta: number }) {\n    return (\n        <div className=\"bg-gray-900 border border-gray-700 rounded-xl p-8\">\n            <div className=\"text-center mb-8\">\n                <ArrowPathIcon className=\"w-14 h-14 text-orange-400 mx-auto mb-4 animate-spin\" />\n                <h2 className=\"text-2xl font-bold mb-2\">Mixing in Progress</h2>\n                <p className=\"text-gray-400\">Your transaction is being mixed with {anonymitySet} participants</p>\n            </div>\n            <div className=\"mb-6\">\n                <div className=\"flex justify-between text-sm text-gray-400 mb-2\">\n                    <span>Progress</span>\n                    <span>{Math.round(progress)}%</span>\n                </div>\n                <div className=\"w-full bg-gray-700 rounded-full h-3\">\n                    <div className=\"bg-orange-500 h-3 rounded-full transition-all duration-700\" style={{ width: `${progress}%` }} />\n                </div>\n            </div>\n            <div className=\"grid grid-cols-2 gap-4 text-center\">\n                <div className=\"p-4 bg-gray-800 rounded-lg\">\n                    <div className=\"text-2xl font-bold text-blue-400\">{anonymitySet}</div>\n                    <div className=\"text-sm text-gray-400\">Anonymity Set</div>\n                </div>\n                <div className=\"p-4 bg-gray-800 rounded-lg\">\n                    <div className=\"text-2xl font-bold text-orange-400\">{eta}m</div>\n                    <div className=\"text-sm text-gray-400\">Est. Time</div>\n                </div>\n            </div>\n        </div>\n    );\n}\n","import React from 'react';\nimport { CheckCircleIcon } from '@heroicons/react/24/outline';\n\nexport function CompleteView({ amount, anonymitySet, onReset }: { amount: string; anonymitySet: number; onReset: () => void }) {\n    return (\n        <div className=\"bg-gray-900 border border-gray-700 rounded-xl p-8 text-center\">\n            <CheckCircleIcon className=\"w-14 h-14 text-green-400 mx-auto mb-4\" />\n            <h2 className=\"text-2xl font-bold mb-2 text-green-400\">Mix Complete</h2>\n            <p className=\"text-gray-400 mb-6\">Your {amount} STRK has been mixed with {anonymitySet} participants</p>\n            <button onClick={onReset} className=\"bg-orange-600 hover:bg-orange-700 text-white font-semibold py-3 px-6 rounded-lg transition-colors\">Start New Mix</button>\n        </div>\n    );\n}\n","import { MixRequest, OrchestratorEvent } from '@/lib/types';\nimport { stepDeposit } from './steps/deposit';\nimport { stepWithdrawForMixing } from './steps/withdrawForMixing';\nimport { stepCreateMintInvoice } from './steps/createMintInvoice';\nimport { stepDynamicEstimateSats } from './steps/dynamicEstimateSats';\nimport { stepSwapToLightning } from './steps/swapToLightning';\nimport { stepClaimCashuProofs } from './steps/claimCashuProofs';\nimport { stepPrivacy } from './steps/privacy';\nimport { stepSwapBack } from './steps/swapBack';\nimport { stepWithdraw } from './steps/withdraw';\nimport { getNetworkStatus, ENV } from '@/config/env';\nimport { RealAtomiqSwapClient } from '@/integrations/swaps/atomiq';\n\nexport async function startMix(req: MixRequest, onEvent: (e: OrchestratorEvent) => void) {\n    console.log('ðŸŽ¯ SLPM: Starting privacy mix operation');\n    console.log('ðŸ“‹ SLPM: Mix request:', {\n        amount: req.amountStrk,\n        destinations: req.destinations.length,\n        privacyLevel: req.privacyLevel,\n        features: {\n            timeDelays: req.enableTimeDelays,\n            splitOutputs: req.enableSplitOutputs,\n            randomizedMints: req.enableRandomizedMints,\n            amountObfuscation: req.enableAmountObfuscation,\n            decoyTx: req.enableDecoyTx\n        }\n    });\n\n    // Store deposit info for the full flow\n    let depositResult: any = null;\n    let lightningResult: any = null;\n\n    try {\n        // Validate network configuration readiness\n        console.log(`ðŸ” SLPM: Validating ${ENV.NETWORK} configuration...`);\n        const networkStatus = getNetworkStatus();\n        console.log(`âš™ï¸ SLPM: ${ENV.NETWORK} status:`, networkStatus);\n\n        if (!networkStatus.ready) {\n            console.error(`âŒ SLPM: ${ENV.NETWORK} configuration incomplete`);\n            console.error('Warnings:', networkStatus.warnings);\n            throw new Error(`${ENV.NETWORK} configuration incomplete. Check environment variables.`);\n        }\n        console.log(`âœ… SLPM: ${ENV.NETWORK} configuration validated`);\n\n        onEvent({\n            type: 'mix:progress',\n            message: `Starting privacy mix on ${ENV.NETWORK}`,\n            progress: 0\n        });\n        console.log('ðŸš€ SLPM: Privacy mix operation initiated');\n\n        // Step 1: Deposit STRK to privacy mixer contract\n        console.log('ðŸ’° SLPM: Step 1 - Depositing STRK to privacy mixer contract');\n        depositResult = await stepDeposit(req.amountStrk, onEvent);\n        console.log('âœ… SLPM: Step 1 complete - STRK deposited to privacy mixer:', {\n            commitment: depositResult.commitmentHash.slice(0, 10) + '...',\n            amount: depositResult.amount,\n            mixerContract: depositResult.mixerContractAddress\n        });\n\n        // Step 1.5: Immediately withdraw for mixing (privacy-preserving)\n        console.log('ðŸ”„ SLPM: Step 1.5 - Withdrawing from privacy mixer for mixing pipeline');\n        const withdrawalResult = await stepWithdrawForMixing(depositResult, onEvent);\n        if (!withdrawalResult || !withdrawalResult.withdrawalTxHash) {\n            throw new Error('Withdrawal step returned no transaction hash');\n        }\n        const withdrawalTxDisplay = typeof withdrawalResult.withdrawalTxHash === 'string'\n            ? withdrawalResult.withdrawalTxHash.slice(0, 10) + '...'\n            : 'n/a';\n        const controllingWalletDisplay = typeof withdrawalResult.controllingWallet === 'string'\n            ? withdrawalResult.controllingWallet.slice(0, 10) + '...'\n            : 'n/a';\n        console.log('âœ… SLPM: Step 1.5 complete - Funds withdrawn and ready for mixing:', {\n            withdrawalTx: withdrawalTxDisplay,\n            availableForSwap: withdrawalResult.availableForSwap ?? false,\n            controllingWallet: controllingWalletDisplay\n        });\n\n        // Step 2: Dynamic real-time estimation (STRK -> sats) then create Cashu mint invoice\n        console.log('ðŸŽ¯ SLPM: Step 2 - Dynamic STRK â†’ sats estimation (real-time if possible)...');\n        onEvent({ type: 'mix:progress', message: 'Estimating sats from STRK input...', progress: 15 });\n        const dynamicEstimate = await stepDynamicEstimateSats(withdrawalResult.amount, onEvent);\n        console.log('ðŸ’° SLPM: Dynamic estimation result:', dynamicEstimate);\n        console.log(`ðŸ’° SLPM: Estimated ${withdrawalResult.amount} STRK -> ${dynamicEstimate.satsOut} sats (source: ${dynamicEstimate.source}, rate: ${dynamicEstimate.rate.toFixed(2)})`);\n        onEvent({ type: 'mix:progress', message: 'Creating Cashu mint invoice...', progress: 18 });\n        const mintInvoiceResult = await stepCreateMintInvoice(dynamicEstimate.satsOut, onEvent);\n\n        // Step 3: Swap STRK to Lightning (paying the Cashu mint invoice)\n        console.log('ðŸŽ¯ SLPM: Step 3 - Swapping STRK to Lightning...');\n        onEvent({ type: 'mix:progress', message: 'Swapping STRK to Lightning BTC...', progress: 25 });\n        lightningResult = await stepSwapToLightning(withdrawalResult.amount, {\n            walletAddress: withdrawalResult.originalDeposit.walletAddress,\n            mixerContractAddress: withdrawalResult.originalDeposit.mixerContractAddress,\n            fundsAvailable: withdrawalResult.availableForSwap\n        }, mintInvoiceResult, onEvent);\n\n        // Step 4: Claim Cashu proofs (after Atomiq payment)\n        console.log('ðŸŽ¯ SLPM: Step 4 - Claiming Cashu proofs...');\n        onEvent({ type: 'mix:progress', message: 'Claiming Cashu proofs...', progress: 45 });\n        const cashuProofs = await stepClaimCashuProofs(\n            mintInvoiceResult.mintQuote,\n            mintInvoiceResult.cashu,\n            dynamicEstimate.satsOut,\n            onEvent\n        );\n\n        console.log('ðŸŽ¯ SLPM: Cashu proofs claimed:', {\n            count: cashuProofs.length,\n            totalValue: cashuProofs.reduce((sum: number, p: any) => sum + Number(p.amount), 0)\n        });\n\n        // Use the cashu client and manager from the mint invoice result\n        const cashuClient = mintInvoiceResult.cashu;\n        const cashuMgr = mintInvoiceResult.cashuManager;\n\n        // Step 5: Apply privacy techniques\n        console.log('ðŸŽ¯ SLPM: Step 5 - Applying privacy techniques...');\n        onEvent({ type: 'mix:progress', message: 'Applying privacy mixing...', progress: 60 });\n        const mixedProofs = await stepPrivacy(req, cashuProofs, cashuClient, cashuMgr, onEvent);\n\n        console.log('âœ… SLPM: Privacy mixing complete:', {\n            finalProofsCount: mixedProofs.length,\n            privacyLevel: req.privacyLevel,\n            anonymityEnhanced: true\n        });\n\n        // Step 6: Convert mixed Cashu back to Lightning and distribute\n        console.log('ðŸ”„ SLPM: Step 6 - Converting mixed tokens back and distributing...');\n        onEvent({\n            type: 'mix:progress',\n            message: 'Converting mixed e-cash back and distributing to destinations',\n            progress: 80\n        });\n\n        // Use the new swapBack that handles Cashu â†’ Lightning â†’ STRK for each destination\n        const distributionResults = await stepSwapBack(mixedProofs, req.destinations, cashuClient, onEvent, mintInvoiceResult.mintQuote.quote);\n\n        const successfulDistributions = distributionResults.filter(r => r.status === 'CLAIMED').length;\n        const totalDestinations = distributionResults.length;\n        const totalStrkDistributed = distributionResults.reduce((sum, r) => sum + r.strkSent, 0);\n\n        console.log('ðŸ“Š SLPM: Distribution results:', {\n            totalDestinations,\n            successfulDistributions,\n            totalStrkDistributed,\n            failedDistributions: totalDestinations - successfulDistributions\n        });\n\n        // Check if the distribution was actually successful\n        if (successfulDistributions === 0) {\n            throw new Error(`All ${totalDestinations} destination distributions failed - no STRK was successfully delivered`);\n        }\n\n        if (successfulDistributions < totalDestinations) {\n            console.warn(`âš ï¸ SLPM: Partial success - only ${successfulDistributions}/${totalDestinations} destinations received STRK`);\n        } else {\n            console.log('âœ… SLPM: All distributions completed successfully');\n        }\n\n        console.log('âœ… SLPM: Privacy mixing completed with distribution results');\n\n        // Calculate final privacy metrics\n        console.log('ðŸ“Š SLPM: Calculating final privacy metrics');\n        const anonymitySetSize = estimateAnonymitySetLocal(req);\n        const privacyScore = scorePrivacy(req, anonymitySetSize);\n        console.log('ðŸ“ˆ SLPM: Final privacy metrics:', {\n            anonymitySetSize,\n            privacyScore,\n            privacyLevel: req.privacyLevel,\n            mixingPath: 'STRK â†’ Lightning â†’ Cashu â†’ Lightning â†’ STRK',\n            destinationAccounts: req.destinations.length,\n            totalFees: lightningResult.fee || 0,\n            privacyGuarantees: {\n                unlinkability: 'Account linkability broken via mixer contract',\n                temporalPrivacy: 'Time delays and batching applied',\n                amountObfuscation: 'Amount split across destinations',\n                routingDiversification: 'Multiple Cashu mints used'\n            }\n        });\n\n        // Determine completion message based on actual results\n        let completionMessage: string;\n        let completionType: 'mix:complete' | 'mix:partial' | 'mix:failed';\n\n        if (successfulDistributions === totalDestinations) {\n            completionMessage = `Privacy mix complete! ${totalStrkDistributed} STRK distributed to ${successfulDistributions} destinations through ${anonymitySetSize}-member anonymity set`;\n            completionType = 'mix:complete';\n        } else if (successfulDistributions > 0) {\n            completionMessage = `Privacy mix partially complete - ${totalStrkDistributed} STRK delivered to ${successfulDistributions}/${totalDestinations} destinations`;\n            completionType = 'mix:partial';\n        } else {\n            completionMessage = `Privacy mix failed - no STRK was successfully delivered to any destination`;\n            completionType = 'mix:failed';\n        }\n\n        onEvent({\n            type: completionType,\n            message: completionMessage,\n            progress: successfulDistributions === totalDestinations ? 100 : 90\n        });\n\n        console.log(`ðŸŽ‰ SLPM: Privacy mix operation result - ${successfulDistributions}/${totalDestinations} destinations successful`);\n\n        // Return results for caller to handle\n        return {\n            success: successfulDistributions > 0,\n            totalDestinations,\n            successfulDistributions,\n            totalStrkDistributed,\n            distributionResults\n        };\n\n    } catch (error) {\n        console.error('âŒ SLPM: Privacy mix operation failed:', error);\n        console.error('ðŸ” SLPM: Error details:', {\n            message: error instanceof Error ? error.message : 'Unknown error',\n            stack: error instanceof Error ? error.stack : undefined,\n            step: 'Privacy mixing flow',\n            progress: 'Check individual step logs above'\n        });\n\n        onEvent({\n            type: 'mix:error',\n            message: error instanceof Error ? error.message : 'Privacy mix failed'\n        });\n        throw error;\n    }\n}\n\nfunction estimateAnonymitySetLocal(req: MixRequest): number {\n    const base = req.privacyLevel === 'maximum' ? 120 : req.privacyLevel === 'enhanced' ? 60 : 20;\n    const extras = (req.enableSplitOutputs ? req.splitCount : 0) + (req.enableRandomizedMints ? 10 : 0);\n    return base + extras;\n}\n\nfunction scorePrivacy(req: MixRequest, set: number) {\n    let score = 50 + Math.min(40, Math.floor(set / 4));\n    if (req.enableTimeDelays) score += 3;\n    if (req.enableSplitOutputs && req.splitCount > 1) score += 3;\n    if (req.enableRandomizedMints) score += 2;\n    if (req.enableAmountObfuscation) score += 1;\n    if (req.enableDecoyTx) score += 1;\n    return Math.min(100, score);\n}\n","import { OrchestratorEvent, MixRequest } from '@/lib/types';\nimport { MultiMintCashuManager, RealCashuClient } from '@/integrations/cashu/client';\nimport { ENV } from '@/config/env';\n\nexport async function stepPrivacy(\n    req: MixRequest,\n    proofs: any[],\n    cashu: RealCashuClient,\n    cashuManager: MultiMintCashuManager | null,\n    onEvent: (e: OrchestratorEvent) => void\n) {\n    console.log('ðŸ”’ SLPM Privacy: Starting privacy step');\n    console.log('ðŸ”’ SLPM Privacy: Configuration:', {\n        enableRandomizedMints: req.enableRandomizedMints,\n        enableSplitOutputs: req.enableSplitOutputs,\n        splitCount: req.splitCount,\n        enableTimeDelays: req.enableTimeDelays,\n        enableAmountObfuscation: req.enableAmountObfuscation,\n        enableDecoyTx: req.enableDecoyTx,\n        amountStrk: req.amountStrk\n    });\n    console.log('ðŸ”’ SLPM Privacy: Input proofs:', {\n        count: proofs.length,\n        proofs: proofs.map(p => ({ amount: p.amount, C: p.C?.slice(0, 10) + '...' }))\n    });\n\n    // Calculate actual total value from proofs\n    const totalProofValue = proofs.reduce((sum, proof) => sum + BigInt(proof.amount), 0n);\n    console.log('ðŸ”’ SLPM Privacy: Total proof value:', totalProofValue.toString(), 'sats');\n\n    try {\n        let workingProofs = proofs;\n\n        const multiMintEnabled = req.enableRandomizedMints && cashuManager && !ENV.CASHU_SINGLE_MINT;\n        if (multiMintEnabled) {\n            console.log('ðŸŒ SLPM Privacy: Distributing across multiple mints...');\n            const distributionAmount = totalProofValue;\n            console.log('ðŸŒ SLPM Privacy: Distribution amount:', distributionAmount.toString(), 'sats');\n\n            const { distributions } = await cashuManager.distributeSend(distributionAmount, proofs, 2);\n            workingProofs = distributions.flatMap((d) => d.proofs);\n\n            console.log('ðŸŒ SLPM Privacy: Distribution result:', {\n                originalProofs: proofs.length,\n                newProofs: workingProofs.length,\n                distributions: distributions.length\n            });\n\n            onEvent({ type: 'cashu:routed', message: 'Distributed across multiple mints', progress: 60 });\n            console.log('âœ… SLPM Privacy: Multi-mint distribution completed');\n        } else {\n            console.log('â­ï¸ SLPM Privacy: Skipping multi-mint distribution (disabled or no manager)');\n        }\n\n        const splitEnabled = req.enableSplitOutputs && req.splitCount > 1 && !ENV.DISABLE_CASHU_SPLIT;\n        if (splitEnabled) {\n            console.log('ðŸ”€ SLPM Privacy: Splitting outputs...');\n            const satsAvailable = Number(totalProofValue);\n            const perPart = BigInt(Math.floor(satsAvailable / Math.max(1, req.splitCount)));\n            console.log('ðŸ”€ SLPM Privacy: Split parameters:', {\n                totalSats: satsAvailable,\n                splitCount: req.splitCount,\n                perPart: perPart.toString()\n            });\n\n            const splits: typeof workingProofs = [];\n            let pool = workingProofs.slice();\n\n            for (let i = 0; i < req.splitCount; i++) {\n                console.log(`ðŸ”€ SLPM Privacy: Creating split ${i + 1}/${req.splitCount}...`);\n                const { keep, send } = await cashu.send(perPart, pool);\n                splits.push(...send);\n                pool = keep;\n                console.log(`ðŸ”€ SLPM Privacy: Split ${i + 1} created:`, {\n                    sentProofs: send.length,\n                    keepProofs: keep.length\n                });\n            }\n\n            workingProofs = splits.length ? splits : workingProofs;\n            console.log('ðŸ”€ SLPM Privacy: Split result:', {\n                finalProofs: workingProofs.length,\n                splitSuccessful: splits.length > 0\n            });\n\n            onEvent({ type: 'cashu:routed', message: `Split into ${req.splitCount} outputs`, progress: 70 });\n            console.log('âœ… SLPM Privacy: Output splitting completed');\n        } else {\n            console.log('â­ï¸ SLPM Privacy: Skipping output splitting (disabled or invalid split count)');\n        }\n\n        if (req.enableTimeDelays) {\n            console.log('â±ï¸ SLPM Privacy: Applying time delays...');\n            const delayMs = jitter(1000);\n            console.log('â±ï¸ SLPM Privacy: Delay duration:', delayMs, 'ms');\n            await delay(delayMs);\n            console.log('âœ… SLPM Privacy: Time delay applied');\n        } else {\n            console.log('â­ï¸ SLPM Privacy: Skipping time delays (disabled)');\n        }\n\n        if (req.enableAmountObfuscation) {\n            console.log('ðŸ’° SLPM Privacy: Applying amount obfuscation...');\n            await delay(200);\n            console.log('âœ… SLPM Privacy: Amount obfuscation applied');\n        } else {\n            console.log('â­ï¸ SLPM Privacy: Skipping amount obfuscation (disabled)');\n        }\n\n        if (req.enableDecoyTx) {\n            console.log('ðŸ‘» SLPM Privacy: Applying decoy transactions...');\n            await delay(200);\n            console.log('âœ… SLPM Privacy: Decoy transactions applied');\n        } else {\n            console.log('â­ï¸ SLPM Privacy: Skipping decoy transactions (disabled)');\n        }\n\n        onEvent({ type: 'mix:progress', message: 'Privacy heuristics applied', progress: 80 });\n\n        console.log('ðŸ”’ SLPM Privacy: Final result:', {\n            inputProofs: proofs.length,\n            outputProofs: workingProofs.length,\n            privacyFeaturesApplied: [\n                req.enableRandomizedMints && 'multi-mint',\n                req.enableSplitOutputs && 'split-outputs',\n                req.enableTimeDelays && 'time-delays',\n                req.enableAmountObfuscation && 'amount-obfuscation',\n                req.enableDecoyTx && 'decoy-tx'\n            ].filter(Boolean)\n        });\n        console.log('ðŸ”’ SLPM Privacy: Step completed successfully');\n\n        return workingProofs;\n\n    } catch (error) {\n        console.error('âŒ SLPM Privacy: Step failed:', error);\n        console.error('ðŸ” SLPM Privacy: Error details:', {\n            message: error instanceof Error ? error.message : 'Unknown error',\n            stack: error instanceof Error ? error.stack : undefined,\n            context: {\n                proofsCount: proofs.length,\n                hasManager: !!cashuManager,\n                configuration: {\n                    enableRandomizedMints: req.enableRandomizedMints,\n                    enableSplitOutputs: req.enableSplitOutputs,\n                    splitCount: req.splitCount\n                }\n            }\n        });\n        throw error;\n    }\n}\n\nfunction delay(ms: number) { return new Promise((res) => setTimeout(res, ms)); }\nfunction jitter(ms: number) { const v = Math.floor(ms * 0.3); return ms + Math.floor(Math.random() * v); }\n","import { OrchestratorEvent } from '@/lib/types';\nimport { RealAtomiqSwapClient } from '@/integrations/swaps/atomiq';\nimport { RealCashuClient } from '@/integrations/cashu/client';\nimport { EcashProof } from '@/domain';\nimport { ENV } from '@/config/env';\nimport { serverSideCashuMelt, getEncodedTokenFromStorage, calculateMaxInvoiceAmount } from '@/integrations/cashu/direct';\nimport { getSharedSwapAddress, transferStrkFromShared } from '@/integrations/starknet/sharedAccount';\n\nexport async function stepSwapBack(\n    cashuProofs: EcashProof[],\n    destinations: string[],\n    cashu: RealCashuClient,\n    onEvent: (e: OrchestratorEvent) => void,\n    mintQuoteId?: string // Add optional quote ID for token retrieval\n) {\n    console.log('ðŸ”„ SLPM SwapBack: Starting SIMPLIFIED Cashu redemption (no mixing/splitting/delays)');\n\n    const totalSats = cashuProofs.reduce((sum, p) => sum + Number(p.amount), 0);\n    const singleDestination = destinations[0]; // Use only the first destination\n    const sharedDest = getSharedSwapAddress();\n\n    console.log('ðŸ”„ SLPM SwapBack: SIMPLIFIED Parameters:', {\n        proofsCount: cashuProofs.length,\n        totalSats,\n        singleDestination: singleDestination?.slice(0, 10) + '...',\n        network: ENV.NETWORK,\n        mintUrl: ENV.CASHU_DEFAULT_MINT\n    });\n\n    try {\n        onEvent({ type: 'mix:progress', message: 'Converting ALL ecash to Lightning and STRK (single transaction)...', progress: 80 });\n\n        // Initialize Atomiq client for Lightning â†’ STRK swaps\n        const atomiq = new RealAtomiqSwapClient(ENV.NETWORK);\n\n        onEvent({ type: 'mix:progress', message: 'Calculating optimal invoice amount and melting ALL ecash proofs...', progress: 85 });\n\n        // Step 1: Calculate safe amount FIRST, then create properly sized Atomiq swap\n        const { finalInvoice, finalSwapId, meltResult } = await redeemAllCashuToInvoice(\n            cashuProofs,\n            totalSats,\n            // Route LNâ†’STRK swap to shared account to avoid signer mismatch, fallback to final destination if not configured\n            sharedDest || singleDestination,\n            atomiq,\n            onEvent,\n            mintQuoteId\n        );\n\n        console.log('âœ… SLPM SwapBack: ALL Cashu proofs melted:', {\n            invoiceAmount: finalInvoice.slice(0, 30) + '...',\n            changeProofs: meltResult.change?.length || 0,\n            totalRedeemed: meltResult.usedAmount\n        });\n\n        onEvent({ type: 'mix:progress', message: 'Waiting for Lightning payment to complete...', progress: 90 });\n\n        // Step 3: Wait for Lightning payment and claim STRK to single destination\n        console.log('ðŸ”„ SLPM SwapBack: Waiting for Lightning payment...');\n        const completed = await atomiq.waitLightningToStrkCompletion(finalSwapId, 300000);\n\n        let finalStatus = 'FAILED';\n        if (completed) {\n            console.log('âš¡ SLPM SwapBack: Lightning payment confirmed, claiming STRK...');\n            try {\n                await atomiq.claimLightningToStrkSwap(finalSwapId);\n                finalStatus = 'CLAIMED';\n                console.log('âœ… SLPM SwapBack: STRK claimed to single destination');\n                console.log('âœ… SLPM SwapBack: STRK claimed to swap destination');\n\n                // If we used the shared account as destination, forward to the final recipient\n                if (sharedDest && sharedDest.toLowerCase() !== singleDestination.toLowerCase()) {\n                    try {\n                        // Query the swap status to get the actual STRK amount out (Wei)\n                        const status = await atomiq.getStatus(finalSwapId);\n                        const amountWei = status.amountOut ?? 0n;\n                        console.log('ðŸšš SLPM SwapBack: Forwarding STRK from shared to final recipient...', {\n                            from: sharedDest,\n                            to: singleDestination,\n                            amountWei: amountWei.toString()\n                        });\n                        await transferStrkFromShared(singleDestination, amountWei);\n                        console.log('âœ… SLPM SwapBack: Forward transfer submitted');\n                    } catch (fwdErr) {\n                        console.error('âŒ SLPM SwapBack: Forward transfer failed:', fwdErr);\n                        finalStatus = 'PAYMENT_CONFIRMED_CLAIM_FAILED';\n                    }\n                }\n            } catch (claimError) {\n                console.error('âŒ SLPM SwapBack: Claim failed:', claimError);\n                if (claimError instanceof Error && /Invalid signer provided/i.test(claimError.message)) {\n                    console.error('ðŸ› ï¸ SLPM SwapBack: Signer invalid. Ensure SHARED_SWAP_ACCOUNT_PRIVATE_KEY and SHARED_SWAP_ACCOUNT_ADDRESS are set and correspond to a deployed Starknet account with funds for fees.');\n                }\n                finalStatus = 'PAYMENT_CONFIRMED_CLAIM_FAILED';\n            }\n        } else {\n            console.warn('âš ï¸ SLPM SwapBack: Lightning payment did not complete in time');\n        }\n\n        const results = [{\n            destination: singleDestination,\n            satsRedeemed: Number(meltResult.usedAmount || totalSats),\n            strkSent: Number(meltResult.usedAmount || totalSats),\n            txId: finalSwapId,\n            status: finalStatus\n        }];\n\n        console.log('ðŸ“Š SLPM SwapBack: SIMPLIFIED Final result:', {\n            destination: singleDestination,\n            totalSatsRedeemed: results[0].satsRedeemed,\n            totalStrkSent: results[0].strkSent,\n            status: finalStatus\n        });\n\n        onEvent({ type: 'mix:progress', message: 'Simplified swap completed', progress: 95 });\n\n        return results;\n\n    } catch (error) {\n        console.error('âŒ SLPM SwapBack: SIMPLIFIED Critical error:', error);\n        throw error;\n    }\n}\n\n// SIMPLIFIED redemption function - calculate safe amount first, then create optimized swap and melt\nasync function redeemAllCashuToInvoice(\n    allProofs: EcashProof[],\n    totalAmount: number,\n    destination: string,\n    atomiq: RealAtomiqSwapClient,\n    onEvent: (e: OrchestratorEvent) => void,\n    mintQuoteId?: string\n): Promise<{ finalInvoice: string; finalSwapId: string; meltResult: any }> {\n\n    console.log('ðŸª™ SLPM SwapBack: Starting SIMPLIFIED Cashu redemption (using encoded token like standalone)');\n\n    const totalAvailable = allProofs.reduce((sum, p) => sum + Number(p.amount), 0);\n    console.log('ðŸ’° SLPM SwapBack: ALL Available proofs:', {\n        count: allProofs.length,\n        totalAmount: totalAvailable,\n        mintUrl: ENV.CASHU_DEFAULT_MINT\n    });\n\n    try {\n        console.log('âš¡ SLPM SwapBack: Retrieving encoded token for standalone pattern...');\n\n        let encodedToken: string | null = null;\n\n        if (mintQuoteId) {\n            console.log('ðŸ” SLPM SwapBack: Looking for token with quote ID:', mintQuoteId);\n            encodedToken = await getEncodedTokenFromStorage(mintQuoteId);\n        }\n\n        if (!encodedToken) {\n            console.warn('âš ï¸ No encoded token found for quote ID, trying localStorage scan...');\n            // Fallback: scan localStorage for any cashu tokens\n            if (typeof window !== 'undefined') {\n                const keys = Object.keys(localStorage).filter(key => key.startsWith('slpm:cashu-token:'));\n                if (keys.length > 0) {\n                    const latestKey = keys[keys.length - 1]; // Get the most recent token\n                    encodedToken = localStorage.getItem(latestKey);\n                    console.log('âœ… Found encoded token in localStorage:', latestKey);\n                }\n            }\n        }\n\n        if (!encodedToken) {\n            console.warn('âš ï¸ No encoded token found anywhere, this may cause issues');\n            throw new Error('No encoded token available - cannot use standalone script pattern');\n        }\n\n        console.log('âœ… Successfully retrieved encoded token for direct melt');\n\n        // PRE-CALCULATE MAX INVOICE: Use fee formula to determine optimal invoice size\n        console.log('ðŸ§® SLPM SwapBack: Calculating maximum invoice amount from token balance...');\n        const maxCalcResult = await calculateMaxInvoiceAmount(encodedToken);\n\n        if (!maxCalcResult.success) {\n            throw new Error(`Failed to calculate max invoice amount: ${maxCalcResult.error}`);\n        }\n\n        console.log('ðŸ’° SLPM SwapBack: Token balance analysis:', {\n            availableBalance: maxCalcResult.availableBalance,\n            maxInvoiceAmount: maxCalcResult.maxAmount,\n            originalInvoiceAmount: totalAmount\n        });\n\n        // DEFAULT FLOW: Create Atomiq invoice and melt ecash to it automatically\n        console.log('ðŸ”„ SLPM SwapBack: Getting optimized Atomiq quote for max safe amount...');\n        console.log(`   Using calculated safe amount: ${maxCalcResult.maxAmount} sats (original was ${totalAmount} sats)`);\n\n        // Get new Atomiq swap with max safe amount that will definitely fit\n        const optimizedSwap = await atomiq.beginLightningToStrkSwap(maxCalcResult.maxAmount, destination);\n\n        console.log('âœ… SLPM SwapBack: Got optimized Atomiq quote:', {\n            swapId: optimizedSwap.id.slice(0, 20) + '...',\n            safeAmount: maxCalcResult.maxAmount,\n            invoicePrefix: optimizedSwap.invoice.slice(0, 30) + '...'\n        });\n\n        const finalInvoice = optimizedSwap.invoice;\n        const finalSwapId = optimizedSwap.id;\n\n        // Log full invoice for easy copy, and stash on window for devtools access\n        console.log('ðŸ“‹ SLPM SwapBack: Full Atomiq invoice (copy):', finalInvoice);\n        if (typeof window !== 'undefined') {\n            try {\n                (window as any)._slpmLastAtomiqInvoice = finalInvoice;\n                console.log('â„¹ï¸ Access invoice via window._slpmLastAtomiqInvoice');\n            } catch {/* ignore */ }\n        }\n\n        // SERVER-SIDE MELT: Receive token once and melt (with built-in retry capability)\n        console.log('ðŸ” SLPM SwapBack: Running server-side melt with built-in retry...');\n        onEvent({\n            type: 'mix:progress',\n            message: 'Melting ecash to Lightning (with retry capability)...',\n            progress: 88\n        });\n\n        const serverMeltResult = await serverSideCashuMelt(encodedToken, finalInvoice, mintQuoteId);\n\n\n        if (!serverMeltResult.success) {\n            // Handle insufficient balance case - this means we need a smaller invoice\n            if (serverMeltResult.details?.shortfall) {\n                console.log('âš ï¸ SLPM SwapBack: Invoice too large for available proofs');\n                console.log(`   Required: ${serverMeltResult.details.required} sats, Available: ${serverMeltResult.details.available} sats`);\n                throw new Error(`Invoice too large for available balance. Required: ${serverMeltResult.details.required}, Available: ${serverMeltResult.details.available}`);\n            }\n\n            throw new Error(`Server-side melt failed: ${serverMeltResult.error}`);\n        }\n\n        console.log('âœ… SLPM SwapBack: Server-side melt completed successfully');\n\n        console.log('âœ… SLPM SwapBack: Server-side melt completed successfully!', {\n            invoiceAmount: serverMeltResult.result.invoiceAmount,\n            changeAmount: serverMeltResult.result.changeAmount,\n            changeCount: serverMeltResult.result.change?.length || 0\n        });\n\n        // Convert server result change proofs to EcashProof format for compatibility\n        const changeProofs: EcashProof[] = (serverMeltResult.result.change || []).map((proof: any) => ({\n            secret: proof.secret,\n            signature: proof.C,\n            amount: BigInt(proof.amount),\n            currency: 'SAT' as const,\n            keysetId: proof.id\n        }));\n\n        return {\n            finalInvoice: finalInvoice,\n            finalSwapId: finalSwapId,\n            meltResult: {\n                change: changeProofs,\n                usedAmount: serverMeltResult.result.invoiceAmount\n            }\n        };\n\n    } catch (error) {\n        console.error('âŒ SLPM SwapBack: SIMPLIFIED melt failed:', error);\n        throw new Error(`Failed to melt ALL proofs: ${error}`);\n    }\n}\n\n/* \n// COMMENTED OUT - All the old complex logic with mixing/splitting/delays\nasync function redeemCashuToInvoice(\n    availableProofs: EcashProof[],\n    initialInvoice: string,\n    initialSwapId: string,\n    targetAmount: number,\n    destination: string,\n    atomiq: RealAtomiqSwapClient\n): Promise<{ finalInvoice: string; finalSwapId: string; meltResult: any }> {\n    \n    console.log('ðŸª™ SLPM SwapBack: Starting Cashu redemption (server-side pattern)');\n    \n    const totalAvailable = availableProofs.reduce((sum, p) => sum + Number(p.amount), 0);\n    console.log('ðŸ’° SLPM SwapBack: Available proofs:', {\n        count: availableProofs.length,\n        totalAmount: totalAvailable\n    });\n\n    // Fee-aware invoice sizing using our existing server infrastructure\n    let currentInvoice = initialInvoice;\n    let currentSwapId = initialSwapId;\n    let attempts = 0;\n    const maxAttempts = 3;\n\n    while (attempts < maxAttempts) {\n        try {\n            console.log(`ðŸ”„ SLPM SwapBack: Attempt ${attempts + 1} - creating melt quote via server...`);\n            \n            // Use server-side melt-quote API (avoids CORS)\n            const quoteResponse = await fetch('/api/cashu/melt-quote', {\n                method: 'POST',\n                headers: { 'Content-Type': 'application/json' },\n                body: JSON.stringify({ \n                    invoice: currentInvoice, \n                    mintUrl: ENV.CASHU_DEFAULT_MINT \n                })\n            });\n            \n            if (!quoteResponse.ok) {\n                throw new Error(`Melt quote failed: ${await quoteResponse.text()}`);\n            }\n            \n            const meltQuote = await quoteResponse.json();\n            const required = meltQuote.amount + meltQuote.fee_reserve;\n            \n            console.log('ðŸ“‹ SLPM SwapBack: Melt quote details:', {\n                invoiceAmount: meltQuote.amount,\n                feeReserve: meltQuote.fee_reserve,\n                totalRequired: required,\n                available: totalAvailable\n            });\n\n            if (required <= totalAvailable) {\n                // Invoice fits! Execute the melt via server\n                console.log('âœ… SLPM SwapBack: Invoice fits, executing melt via server...');\n                \n                // Select proofs for payment (convert to Cashu format for server)\n                const selectedEcashProofs = selectEcashProofsForAmount(availableProofs, required);\n                const selectedCashuProofs = selectedEcashProofs.map((proof: EcashProof) => ({\n                    secret: proof.secret,\n                    C: proof.signature,\n                    amount: Number(proof.amount),\n                    id: proof.keysetId\n                }));\n\n                // Add proof validation before melt attempt\n                console.log('ðŸ” SLPM SwapBack: Validating proof availability...');\n                try {\n                    const validationResponse = await fetch('/api/cashu/proof-states', {\n                        method: 'POST',\n                        headers: { 'Content-Type': 'application/json' },\n                        body: JSON.stringify({\n                            proofs: selectedCashuProofs,\n                            mintUrl: ENV.CASHU_DEFAULT_MINT\n                        })\n                    });\n\n                    if (validationResponse.ok) {\n                        const validation = await validationResponse.json();\n                        const spentProofs = validation.states?.filter((s: any) => s.state !== 'UNSPENT') || [];\n                        \n                        if (spentProofs.length > 0) {\n                            console.error('âš ï¸ SLPM SwapBack: Found spent/pending proofs, skipping to avoid \"proofs pending\" error');\n                            throw new Error(`${spentProofs.length} proofs are not available (${spentProofs.map((p: any) => p.state).join(', ')})`);\n                        }\n                        console.log('âœ… SLPM SwapBack: All selected proofs are available');\n                    } else {\n                        console.warn('âš ï¸ SLPM SwapBack: Could not validate proof states, proceeding anyway');\n                    }\n                } catch (validationError) {\n                    console.warn('âš ï¸ SLPM SwapBack: Proof validation failed:', validationError instanceof Error ? validationError.message : String(validationError));\n                    // Continue with melt attempt anyway\n                }\n                \n                console.log('ðŸŽ¯ SLPM SwapBack: Selected proofs:', {\n                    count: selectedCashuProofs.length,\n                    totalValue: selectedCashuProofs.reduce((sum: number, p: any) => sum + p.amount, 0)\n                });\n\n                // Execute melt via server API (avoids CORS)\n                const meltResponse = await fetch('/api/cashu/melt', {\n                    method: 'POST',\n                    headers: { 'Content-Type': 'application/json' },\n                    body: JSON.stringify({\n                        quote: {\n                            quote: meltQuote.quote,\n                            amount: meltQuote.amount.toString(),\n                            fee_reserve: meltQuote.fee_reserve.toString(),\n                            unit: meltQuote.unit,\n                            expiry: meltQuote.expiry,\n                            request: meltQuote.request\n                        },\n                        proofs: selectedCashuProofs,\n                        mintUrl: ENV.CASHU_DEFAULT_MINT\n                    })\n                });\n                \n                if (!meltResponse.ok) {\n                    const errorText = await meltResponse.text();\n                    \n                    // Special handling for \"proofs pending\" error\n                    if (errorText.includes('proofs are pending') || errorText.includes('proofs pending')) {\n                        console.error('ðŸ’” SLPM SwapBack: Proofs are pending/used - this attempt failed');\n                        throw new Error(`Proofs are already being used or spent: ${errorText}`);\n                    }\n                    \n                    throw new Error(`Melt execution failed: ${errorText}`);\n                }\n                \n                const meltResult = await meltResponse.json();\n                \n                console.log('âš¡ SLPM SwapBack: Melt executed successfully!', {\n                    changeCount: meltResult.change?.length || 0\n                });\n\n                // Convert change back to our EcashProof format\n                const changeProofs: EcashProof[] = (meltResult.change || []).map((proof: any) => ({\n                    secret: proof.secret,\n                    signature: proof.C,\n                    amount: BigInt(proof.amount),\n                    currency: 'SAT' as const,\n                    keysetId: proof.id\n                }));\n\n                return {\n                    finalInvoice: currentInvoice,\n                    finalSwapId: currentSwapId,\n                    meltResult: {\n                        change: changeProofs,\n                        usedAmount: required\n                    }\n                };\n            }\n\n            // Invoice too large, resize it\n            const buffer = 1;\n            const recommended = Math.max(10, totalAvailable - meltQuote.fee_reserve - buffer);\n            console.log(`âš ï¸ SLPM SwapBack: Invoice too large, resizing to ${recommended} sats`);\n            \n            // Create new swap with smaller amount\n            const newSwap = await atomiq.beginLightningToStrkSwap(recommended, destination);\n            currentInvoice = newSwap.invoice;\n            currentSwapId = newSwap.id;\n            \n            attempts++;\n\n        } catch (error) {\n            console.error(`âŒ SLPM SwapBack: Attempt ${attempts + 1} failed:`, error);\n            attempts++;\n            \n            if (attempts >= maxAttempts) {\n                throw new Error(`Failed to redeem Cashu after ${maxAttempts} attempts: ${error}`);\n            }\n            \n            // Wait before retry to avoid hammering the mint\n            await new Promise(resolve => setTimeout(resolve, 1000 * attempts));\n        }\n    }\n\n    throw new Error('Failed to size invoice within available proof amount');\n}\n\n// Helper to select EcashProofs for payment\nfunction selectEcashProofsForAmount(proofs: EcashProof[], targetAmount: number): EcashProof[] {\n    const selected = [];\n    let currentTotal = 0;\n\n    // Sort by amount (smallest first for better change)\n    const sortedProofs = [...proofs].sort((a, b) => Number(a.amount) - Number(b.amount));\n\n    for (const proof of sortedProofs) {\n        if (currentTotal >= targetAmount) break;\n        selected.push(proof);\n        currentTotal += Number(proof.amount);\n    }\n\n    if (currentTotal < targetAmount) {\n        throw new Error(`Insufficient proofs: need ${targetAmount}, have ${currentTotal}`);\n    }\n\n    return selected;\n}\n\n// Helper to select proofs for payment (from standalone script) - kept for compatibility\nfunction selectProofsForAmount(proofs: Proof[], targetAmount: number): Proof[] {\n    const selected = [];\n    let currentTotal = 0;\n\n    // Sort by amount (smallest first for better change)\n    const sortedProofs = [...proofs].sort((a, b) => a.amount - b.amount);\n\n    for (const proof of sortedProofs) {\n        if (currentTotal >= targetAmount) break;\n        selected.push(proof);\n        currentTotal += proof.amount;\n    }\n\n    if (currentTotal < targetAmount) {\n        throw new Error(`Insufficient proofs: need ${targetAmount}, have ${currentTotal}`);\n    }\n\n    return selected;\n}\n\n// Helper to remove used proofs from available set\nfunction removeUsedProofs(proofs: EcashProof[], usedAmount: number): EcashProof[] {\n    const sorted = [...proofs].sort((a, b) => Number(a.amount) - Number(b.amount));\n    const remaining = [];\n    let removedAmount = 0;\n\n    for (const proof of sorted) {\n        if (removedAmount < usedAmount) {\n            removedAmount += Number(proof.amount);\n        } else {\n            remaining.push(proof);\n        }\n    }\n\n    return remaining;\n}\n*/\n","import { MixRequest, OrchestratorEvent } from './types';\nimport { startMix } from '@/orchestrator';\n\nexport async function runMix(req: MixRequest, onEvent: (e: OrchestratorEvent) => void) {\n    try {\n        await startMix(req, onEvent);\n    } catch (e: any) {\n        onEvent({ type: 'mix:error', message: e?.message || 'Unknown error' });\n        throw e;\n    }\n}\n"],"names":[],"mappings":"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"}