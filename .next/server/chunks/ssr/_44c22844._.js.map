{"version":3,"sources":["turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/errors/RequestError.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/utils/Utils.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/btc/mempool/synchronizer/MempoolBtcRelaySynchronizer.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/btc/mempool/MempoolApi.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/btc/mempool/MempoolBitcoinBlock.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/btc/mempool/MempoolBitcoinRpc.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/btc/BitcoinRpcWithAddressIndex.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/btc/LightningNetworkApi.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/btc/wallet/IBitcoinWallet.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/btc/coinselect2/utils.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/btc/coinselect2/accumulative.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/btc/coinselect2/blackjack.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/btc/coinselect2/index.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/btc/wallet/BitcoinWallet.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/btc/wallet/SingleAddressBitcoinWallet.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/errors/IntermediaryError.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/errors/PaymentAuthError.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/errors/UserError.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/enums/SwapType.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/intermediaries/Intermediary.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/utils/paramcoders/SchemaVerifier.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/utils/paramcoders/ParamEncoder.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/utils/paramcoders/client/StreamParamEncoder.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/utils/paramcoders/ParamDecoder.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/utils/paramcoders/client/ResponseParamDecoder.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/utils/paramcoders/client/StreamingFetchPromise.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/intermediaries/IntermediaryAPI.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/intermediaries/IntermediaryDiscovery.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/prices/abstract/ISwapPrice.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/prices/abstract/ICachedSwapPrice.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/prices/abstract/IPriceProvider.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/prices/providers/abstract/HttpPriceProvider.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/prices/providers/abstract/ExchangePriceProvider.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/prices/providers/BinancePriceProvider.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/prices/providers/CoinGeckoPriceProvider.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/prices/providers/CoinPaprikaPriceProvider.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/prices/providers/OKXPriceProvider.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/prices/providers/CustomPriceProvider.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/prices/providers/KrakenPriceProvider.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/prices/RedundantSwapPrice.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/prices/SingleSwapPrice.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/prices/SwapPriceWithChain.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/Tokens.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/enums/SwapDirection.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/ISwap.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/IAddressSwap.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/ISwapWrapper.js","turbopack:///[project]/node_modules/lodash.clonedeep/index.js","turbopack:///[project]/node_modules/@atomiqlabs/bolt11/payreq.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/escrow_swaps/IEscrowSwap.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/fee/Fee.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/escrow_swaps/tobtc/IToBTCSwap.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/utils/LNURL.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/escrow_swaps/tobtc/ln/ToBTCLNSwap.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/escrow_swaps/IEscrowSwapWrapper.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/escrow_swaps/tobtc/IToBTCWrapper.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/escrow_swaps/tobtc/ln/ToBTCLNWrapper.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/escrow_swaps/tobtc/onchain/ToBTCSwap.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/escrow_swaps/tobtc/onchain/ToBTCWrapper.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/escrow_swaps/frombtc/IFromBTCSwap.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/escrow_swaps/frombtc/ln/FromBTCLNSwap.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/escrow_swaps/frombtc/IFromBTCWrapper.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/escrow_swaps/frombtc/ln/FromBTCLNWrapper.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/escrow_swaps/frombtc/onchain/FromBTCSwap.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/escrow_swaps/frombtc/onchain/FromBTCWrapper.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/intermediaries/TrustedIntermediaryAPI.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/trusted/ln/LnForGasSwap.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/trusted/ln/LnForGasWrapper.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/swapper/SwapWithSigner.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/swapper/SwapperWithSigner.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/swapper/SwapperWithChain.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/trusted/onchain/OnchainForGasSwap.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/trusted/onchain/OnchainForGasWrapper.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/browser-storage/IndexedDBUnifiedStorage.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/storage/UnifiedSwapStorage.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/events/UnifiedSwapEventListener.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/spv_swaps/SpvFromBTCSwap.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/spv_swaps/SpvFromBTCWrapper.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/swapper/utils/SwapperUtils.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/swaps/swapper/Swapper.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/storage/IUnifiedStorage.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk-lib/dist/index.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk/dist/SmartChainAssets.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk/dist/storage/LocalStorageManager.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk/dist/SwapperFactory.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk/dist/Utils.js","turbopack:///[project]/node_modules/@atomiqlabs/sdk/dist/index.js","turbopack:///[project]/src/integrations/swaps/atomiq.ts"],"sourcesContent":["\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.OutOfBoundsError = exports.RequestError = void 0;\r\n/**\r\n * An error returned by the intermediary in a http response\r\n */\r\nclass RequestError extends Error {\r\n    constructor(msg, httpCode) {\r\n        try {\r\n            const parsed = JSON.parse(msg);\r\n            if (parsed.msg != null)\r\n                msg = parsed.msg;\r\n        }\r\n        catch (e) { }\r\n        super(msg);\r\n        // Set the prototype explicitly.\r\n        Object.setPrototypeOf(this, RequestError.prototype);\r\n        this.httpCode = httpCode;\r\n    }\r\n    static parse(msg, httpCode) {\r\n        try {\r\n            const parsed = JSON.parse(msg);\r\n            msg = parsed.msg;\r\n            if (parsed.code === 20003 || parsed.code === 20004) {\r\n                return new OutOfBoundsError(parsed.msg, httpCode, BigInt(parsed.data.min), BigInt(parsed.data.max));\r\n            }\r\n        }\r\n        catch (e) { }\r\n        return new RequestError(msg, httpCode);\r\n    }\r\n}\r\nexports.RequestError = RequestError;\r\n/**\r\n * An error indicating out of bounds (amount too high or too low) on swap initialization\r\n */\r\nclass OutOfBoundsError extends RequestError {\r\n    constructor(msg, httpCode, min, max) {\r\n        super(msg, httpCode);\r\n        this.max = max;\r\n        this.min = min;\r\n        Object.setPrototypeOf(this, OutOfBoundsError.prototype);\r\n    }\r\n}\r\nexports.OutOfBoundsError = OutOfBoundsError;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.randomBytes = exports.toCoinselectAddressType = exports.toOutputScript = exports.bigIntCompare = exports.bigIntMax = exports.bigIntMin = exports.timeoutSignal = exports.timeoutPromise = exports.httpPost = exports.httpGet = exports.fetchWithTimeout = exports.tryWithRetries = exports.extendAbortController = exports.mapToArray = exports.objectMap = exports.promiseAny = exports.getLogger = void 0;\r\nconst RequestError_1 = require(\"../errors/RequestError\");\r\nconst buffer_1 = require(\"buffer\");\r\nconst btc_signer_1 = require(\"@scure/btc-signer\");\r\nconst utils_1 = require(\"@noble/hashes/utils\");\r\nfunction isConstructor(fn) {\r\n    return (typeof fn === 'function' &&\r\n        fn.prototype != null &&\r\n        fn.prototype.constructor === fn);\r\n}\r\nfunction isConstructorArray(fnArr) {\r\n    return Array.isArray(fnArr) && fnArr.every(isConstructor);\r\n}\r\n/**\r\n * Checks whether the passed error is allowed to pass through\r\n *\r\n * @param e Error in question\r\n * @param errorAllowed Allowed errors as defined as a callback function, specific error type, or an array of error types\r\n */\r\nfunction checkError(e, errorAllowed) {\r\n    if (isConstructorArray(errorAllowed))\r\n        return errorAllowed.find(error => e instanceof error) != null;\r\n    if (isConstructor(errorAllowed))\r\n        return e instanceof errorAllowed;\r\n    return errorAllowed(e);\r\n}\r\nfunction getLogger(prefix) {\r\n    return {\r\n        debug: (msg, ...args) => global.atomiqLogLevel >= 3 && console.debug(prefix + msg, ...args),\r\n        info: (msg, ...args) => global.atomiqLogLevel >= 2 && console.info(prefix + msg, ...args),\r\n        warn: (msg, ...args) => (global.atomiqLogLevel == null || global.atomiqLogLevel >= 1) && console.warn(prefix + msg, ...args),\r\n        error: (msg, ...args) => (global.atomiqLogLevel == null || global.atomiqLogLevel >= 0) && console.error(prefix + msg, ...args)\r\n    };\r\n}\r\nexports.getLogger = getLogger;\r\nconst logger = getLogger(\"Utils: \");\r\n/**\r\n * Returns a promise that resolves when any of the passed promises resolves, and rejects if all the underlying\r\n *  promises fail with an array of errors returned by the respective promises\r\n *\r\n * @param promises\r\n */\r\nfunction promiseAny(promises) {\r\n    return new Promise((resolve, reject) => {\r\n        let numRejected = 0;\r\n        const rejectReasons = Array(promises.length);\r\n        promises.forEach((promise, index) => {\r\n            promise.then((val) => {\r\n                if (resolve != null)\r\n                    resolve(val);\r\n                resolve = null;\r\n            }).catch(err => {\r\n                rejectReasons[index] = err;\r\n                numRejected++;\r\n                if (numRejected === promises.length) {\r\n                    reject(rejectReasons);\r\n                }\r\n            });\r\n        });\r\n    });\r\n}\r\nexports.promiseAny = promiseAny;\r\n/**\r\n * Maps a JS object to another JS object based on the translation function, the translation function is called for every\r\n *  property (value/key) of the old object and returns the new value of for this property\r\n *\r\n * @param obj\r\n * @param translator\r\n */\r\nfunction objectMap(obj, translator) {\r\n    const resp = {};\r\n    for (let key in obj) {\r\n        resp[key] = translator(obj[key], key);\r\n    }\r\n    return resp;\r\n}\r\nexports.objectMap = objectMap;\r\n/**\r\n * Maps the entries from the map to the array using the translator function\r\n *\r\n * @param map\r\n * @param translator\r\n */\r\nfunction mapToArray(map, translator) {\r\n    const arr = Array(map.size);\r\n    let pointer = 0;\r\n    for (let entry of map.entries()) {\r\n        arr[pointer++] = translator(entry[0], entry[1]);\r\n    }\r\n    return arr;\r\n}\r\nexports.mapToArray = mapToArray;\r\n/**\r\n * Creates a new abort controller that will abort if the passed abort signal aborts\r\n *\r\n * @param abortSignal\r\n */\r\nfunction extendAbortController(abortSignal) {\r\n    const _abortController = new AbortController();\r\n    if (abortSignal != null) {\r\n        abortSignal.throwIfAborted();\r\n        abortSignal.onabort = () => _abortController.abort(abortSignal.reason);\r\n    }\r\n    return _abortController;\r\n}\r\nexports.extendAbortController = extendAbortController;\r\n/**\r\n * Runs the passed function multiple times if it fails\r\n *\r\n * @param func A callback for executing the action\r\n * @param func.retryCount Count of the current retry, starting from 0 for original request and increasing\r\n * @param retryPolicy Retry policy\r\n * @param retryPolicy.maxRetries How many retries to attempt in total\r\n * @param retryPolicy.delay How long should the delay be\r\n * @param retryPolicy.exponential Whether to use exponentially increasing delays\r\n * @param errorAllowed A callback for determining whether a given error is allowed, and we should therefore not retry\r\n * @param abortSignal\r\n * @returns Result of the action executing callback\r\n */\r\nasync function tryWithRetries(func, retryPolicy, errorAllowed, abortSignal) {\r\n    retryPolicy = retryPolicy || {};\r\n    retryPolicy.maxRetries = retryPolicy.maxRetries || 5;\r\n    retryPolicy.delay = retryPolicy.delay || 500;\r\n    retryPolicy.exponential = retryPolicy.exponential == null ? true : retryPolicy.exponential;\r\n    let err = null;\r\n    for (let i = 0; i < retryPolicy.maxRetries; i++) {\r\n        try {\r\n            return await func(i);\r\n        }\r\n        catch (e) {\r\n            if (errorAllowed != null && checkError(e, errorAllowed))\r\n                throw e;\r\n            err = e;\r\n            logger.warn(\"tryWithRetries(): Error on try number: \" + i, e);\r\n        }\r\n        if (abortSignal != null && abortSignal.aborted)\r\n            throw (abortSignal.reason || new Error(\"Aborted\"));\r\n        if (i !== retryPolicy.maxRetries - 1) {\r\n            await timeoutPromise(retryPolicy.exponential ? retryPolicy.delay * Math.pow(2, i) : retryPolicy.delay, abortSignal);\r\n        }\r\n    }\r\n    throw err;\r\n}\r\nexports.tryWithRetries = tryWithRetries;\r\n/**\r\n * Mimics fetch API byt adds a timeout to the request\r\n *\r\n * @param input\r\n * @param init\r\n */\r\nfunction fetchWithTimeout(input, init) {\r\n    if (init == null)\r\n        init = {};\r\n    if (init.timeout != null)\r\n        init.signal = timeoutSignal(init.timeout, new Error(\"Network request timed out\"), init.signal);\r\n    return fetch(input, init).catch(e => {\r\n        if (e.name === \"AbortError\") {\r\n            throw init.signal.reason;\r\n        }\r\n        else {\r\n            throw e;\r\n        }\r\n    });\r\n}\r\nexports.fetchWithTimeout = fetchWithTimeout;\r\n/**\r\n * Sends an HTTP GET request through a fetch API, handles non 200 response codes as errors\r\n * @param url Send request to this URL\r\n * @param timeout Timeout (in milliseconds) for the request to conclude\r\n * @param abortSignal\r\n * @param allowNon200 Whether to allow non-200 status code HTTP responses\r\n * @throws {RequestError} if non 200 response code was returned or body cannot be parsed\r\n */\r\nasync function httpGet(url, timeout, abortSignal, allowNon200 = false) {\r\n    const init = {\r\n        method: \"GET\",\r\n        timeout,\r\n        signal: abortSignal\r\n    };\r\n    const response = await fetchWithTimeout(url, init);\r\n    if (response.status !== 200) {\r\n        let resp;\r\n        try {\r\n            resp = await response.text();\r\n        }\r\n        catch (e) {\r\n            throw new RequestError_1.RequestError(response.statusText, response.status);\r\n        }\r\n        if (allowNon200) {\r\n            try {\r\n                return JSON.parse(resp);\r\n            }\r\n            catch (e) { }\r\n        }\r\n        throw RequestError_1.RequestError.parse(resp, response.status);\r\n    }\r\n    return await response.json();\r\n}\r\nexports.httpGet = httpGet;\r\n/**\r\n * Sends an HTTP POST request through a fetch API, handles non 200 response codes as errors\r\n * @param url Send request to this URL\r\n * @param body A HTTP request body to send to the server\r\n * @param timeout Timeout (in milliseconds) for the request to conclude\r\n * @param abortSignal\r\n * @throws {RequestError} if non 200 response code was returned\r\n */\r\nasync function httpPost(url, body, timeout, abortSignal) {\r\n    const init = {\r\n        method: \"POST\",\r\n        timeout,\r\n        body: JSON.stringify(body),\r\n        headers: { 'Content-Type': 'application/json' },\r\n        signal: abortSignal\r\n    };\r\n    const response = timeout == null ? await fetch(url, init) : await fetchWithTimeout(url, init);\r\n    if (response.status !== 200) {\r\n        let resp;\r\n        try {\r\n            resp = await response.text();\r\n        }\r\n        catch (e) {\r\n            throw new RequestError_1.RequestError(response.statusText, response.status);\r\n        }\r\n        throw RequestError_1.RequestError.parse(resp, response.status);\r\n    }\r\n    return await response.json();\r\n}\r\nexports.httpPost = httpPost;\r\n/**\r\n * Returns a promise that resolves after given amount seconds\r\n *\r\n * @param timeout how many milliseconds to wait for\r\n * @param abortSignal\r\n */\r\nfunction timeoutPromise(timeout, abortSignal) {\r\n    return new Promise((resolve, reject) => {\r\n        if (abortSignal != null && abortSignal.aborted) {\r\n            reject(abortSignal.reason);\r\n            return;\r\n        }\r\n        let abortSignalListener;\r\n        let timeoutHandle = setTimeout(() => {\r\n            if (abortSignalListener != null)\r\n                abortSignal.removeEventListener(\"abort\", abortSignalListener);\r\n            resolve();\r\n        }, timeout);\r\n        if (abortSignal != null) {\r\n            abortSignal.addEventListener(\"abort\", abortSignalListener = () => {\r\n                if (timeoutHandle != null)\r\n                    clearTimeout(timeoutHandle);\r\n                timeoutHandle = null;\r\n                reject(abortSignal.reason);\r\n            });\r\n        }\r\n    });\r\n}\r\nexports.timeoutPromise = timeoutPromise;\r\n/**\r\n * Returns an abort signal that aborts after a specified timeout in milliseconds\r\n *\r\n * @param timeout Milliseconds to wait\r\n * @param abortReason Abort with this abort reason\r\n * @param abortSignal Abort signal to extend\r\n */\r\nfunction timeoutSignal(timeout, abortReason, abortSignal) {\r\n    if (timeout == null)\r\n        return abortSignal;\r\n    const abortController = new AbortController();\r\n    const timeoutHandle = setTimeout(() => abortController.abort(abortReason || new Error(\"Timed out\")), timeout);\r\n    if (abortSignal != null) {\r\n        abortSignal.addEventListener(\"abort\", () => {\r\n            clearTimeout(timeoutHandle);\r\n            abortController.abort(abortSignal.reason);\r\n        });\r\n    }\r\n    return abortController.signal;\r\n}\r\nexports.timeoutSignal = timeoutSignal;\r\nfunction bigIntMin(a, b) {\r\n    return a > b ? b : a;\r\n}\r\nexports.bigIntMin = bigIntMin;\r\nfunction bigIntMax(a, b) {\r\n    return b > a ? b : a;\r\n}\r\nexports.bigIntMax = bigIntMax;\r\nfunction bigIntCompare(a, b) {\r\n    return a > b ? 1 : a === b ? 0 : -1;\r\n}\r\nexports.bigIntCompare = bigIntCompare;\r\nfunction toOutputScript(network, address) {\r\n    const outputScript = (0, btc_signer_1.Address)(network).decode(address);\r\n    switch (outputScript.type) {\r\n        case \"pkh\":\r\n        case \"sh\":\r\n        case \"wpkh\":\r\n        case \"wsh\":\r\n            return buffer_1.Buffer.from(btc_signer_1.OutScript.encode({\r\n                type: outputScript.type,\r\n                hash: outputScript.hash\r\n            }));\r\n        case \"tr\":\r\n            return buffer_1.Buffer.from(btc_signer_1.OutScript.encode({\r\n                type: \"tr\",\r\n                pubkey: outputScript.pubkey\r\n            }));\r\n    }\r\n}\r\nexports.toOutputScript = toOutputScript;\r\nfunction toCoinselectAddressType(outputScript) {\r\n    const data = btc_signer_1.OutScript.decode(outputScript);\r\n    switch (data.type) {\r\n        case \"pkh\":\r\n            return \"p2pkh\";\r\n        case \"sh\":\r\n            return \"p2sh-p2wpkh\";\r\n        case \"wpkh\":\r\n            return \"p2wpkh\";\r\n        case \"wsh\":\r\n            return \"p2wsh\";\r\n        case \"tr\":\r\n            return \"p2tr\";\r\n    }\r\n    throw new Error(\"Unrecognized address type!\");\r\n}\r\nexports.toCoinselectAddressType = toCoinselectAddressType;\r\nfunction randomBytes(bytesLength) {\r\n    return buffer_1.Buffer.from((0, utils_1.randomBytes)(bytesLength));\r\n}\r\nexports.randomBytes = randomBytes;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MempoolBtcRelaySynchronizer = void 0;\r\nconst Utils_1 = require(\"../../../utils/Utils\");\r\nconst logger = (0, Utils_1.getLogger)(\"MempoolBtcRelaySynchronizer: \");\r\nclass MempoolBtcRelaySynchronizer {\r\n    constructor(btcRelay, bitcoinRpc) {\r\n        this.btcRelay = btcRelay;\r\n        this.bitcoinRpc = bitcoinRpc;\r\n    }\r\n    async syncToLatestTxs(signer, feeRate) {\r\n        const tipData = await this.btcRelay.getTipData();\r\n        let cacheData = {\r\n            forkId: 0,\r\n            lastStoredHeader: null,\r\n            tx: null,\r\n            computedCommitedHeaders: null\r\n        };\r\n        const { resultStoredHeader, resultBitcoinHeader } = await this.btcRelay.retrieveLatestKnownBlockLog();\r\n        cacheData.lastStoredHeader = resultStoredHeader;\r\n        if (resultStoredHeader.getBlockheight() < tipData.blockheight)\r\n            cacheData.forkId = -1; //Indicate that we will be submitting blocks to fork\r\n        let spvTipBlockHeader = resultBitcoinHeader;\r\n        const btcRelayTipBlockHash = spvTipBlockHeader.getHash();\r\n        logger.debug(\"Retrieved stored header with commitment: \", cacheData.lastStoredHeader);\r\n        logger.debug(\"SPV tip bitcoin RPC block header: \", spvTipBlockHeader);\r\n        let spvTipBlockHeight = spvTipBlockHeader.height;\r\n        const txsList = [];\r\n        const blockHeaderMap = {\r\n            [resultBitcoinHeader.getHeight()]: resultBitcoinHeader\r\n        };\r\n        const computedHeaderMap = {\r\n            [resultStoredHeader.getBlockheight()]: resultStoredHeader\r\n        };\r\n        let startForkId = null;\r\n        let forkFee = feeRate;\r\n        let mainFee = feeRate;\r\n        const saveHeaders = async (headerCache) => {\r\n            if (cacheData.forkId === -1) {\r\n                if (mainFee == null)\r\n                    mainFee = await this.btcRelay.getMainFeeRate(signer);\r\n                cacheData = await this.btcRelay.saveNewForkHeaders(signer, headerCache, cacheData.lastStoredHeader, tipData.chainWork, mainFee);\r\n            }\r\n            else if (cacheData.forkId === 0) {\r\n                if (mainFee == null)\r\n                    mainFee = await this.btcRelay.getMainFeeRate(signer);\r\n                cacheData = await this.btcRelay.saveMainHeaders(signer, headerCache, cacheData.lastStoredHeader, mainFee);\r\n            }\r\n            else {\r\n                if (forkFee == null)\r\n                    forkFee = await this.btcRelay.getForkFeeRate(signer, cacheData.forkId);\r\n                cacheData = await this.btcRelay.saveForkHeaders(signer, headerCache, cacheData.lastStoredHeader, cacheData.forkId, tipData.chainWork, forkFee);\r\n            }\r\n            if (cacheData.forkId !== -1 && cacheData.forkId !== 0)\r\n                startForkId = cacheData.forkId;\r\n            txsList.push(cacheData.tx);\r\n            for (let storedHeader of cacheData.computedCommitedHeaders) {\r\n                computedHeaderMap[storedHeader.getBlockheight()] = storedHeader;\r\n            }\r\n        };\r\n        let retrievedHeaders = null;\r\n        let headerCache = [];\r\n        while (retrievedHeaders == null || retrievedHeaders.length > 0) {\r\n            retrievedHeaders = await this.bitcoinRpc.getPast15Blocks(spvTipBlockHeight + 15);\r\n            let startIndex = retrievedHeaders.findIndex(val => val.height === spvTipBlockHeight);\r\n            if (startIndex === -1)\r\n                startIndex = retrievedHeaders.length; //Start from the last block\r\n            for (let i = startIndex - 1; i >= 0; i--) {\r\n                const header = retrievedHeaders[i];\r\n                blockHeaderMap[header.height] = header;\r\n                headerCache.push(header);\r\n                if (cacheData.forkId === 0 ?\r\n                    headerCache.length >= this.btcRelay.maxHeadersPerTx :\r\n                    headerCache.length >= this.btcRelay.maxForkHeadersPerTx) {\r\n                    await saveHeaders(headerCache);\r\n                    headerCache = [];\r\n                }\r\n            }\r\n            if (retrievedHeaders.length > 0) {\r\n                if (spvTipBlockHeight === retrievedHeaders[0].height)\r\n                    break; //Already at the tip\r\n                spvTipBlockHeight = retrievedHeaders[0].height;\r\n                await (0, Utils_1.timeoutPromise)(1000);\r\n            }\r\n        }\r\n        if (headerCache.length > 0)\r\n            await saveHeaders(headerCache);\r\n        if (cacheData.forkId !== 0) {\r\n            throw new Error(\"Unable to synchronize on-chain bitcoin light client! Not enough chainwork at connected RPC.\");\r\n        }\r\n        return {\r\n            txs: txsList,\r\n            targetCommitedHeader: cacheData.lastStoredHeader,\r\n            blockHeaderMap,\r\n            computedHeaderMap,\r\n            btcRelayTipCommitedHeader: resultStoredHeader,\r\n            btcRelayTipBlockHeader: resultBitcoinHeader,\r\n            latestBlockHeader: spvTipBlockHeader,\r\n            startForkId\r\n        };\r\n    }\r\n}\r\nexports.MempoolBtcRelaySynchronizer = MempoolBtcRelaySynchronizer;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MempoolApi = void 0;\r\nconst buffer_1 = require(\"buffer\");\r\nconst Utils_1 = require(\"../../utils/Utils\");\r\nconst RequestError_1 = require(\"../../errors/RequestError\");\r\nclass MempoolApi {\r\n    /**\r\n     * Returns api url that should be operational\r\n     *\r\n     * @private\r\n     */\r\n    getOperationalApi() {\r\n        return this.backends.find(e => e.operational === true);\r\n    }\r\n    /**\r\n     * Returns api urls that are maybe operational, in case none is considered operational returns all of the price\r\n     *  apis such that they can be tested again whether they are operational\r\n     *\r\n     * @private\r\n     */\r\n    getMaybeOperationalApis() {\r\n        let operational = this.backends.filter(e => e.operational === true || e.operational === null);\r\n        if (operational.length === 0) {\r\n            this.backends.forEach(e => e.operational = null);\r\n            operational = this.backends;\r\n        }\r\n        return operational;\r\n    }\r\n    /**\r\n     * Sends a GET or POST request to the mempool api, handling the non-200 responses as errors & throwing\r\n     *\r\n     * @param url\r\n     * @param path\r\n     * @param responseType\r\n     * @param type\r\n     * @param body\r\n     */\r\n    async _request(url, path, responseType, type = \"GET\", body) {\r\n        const response = await (0, Utils_1.fetchWithTimeout)(url + path, {\r\n            method: type,\r\n            timeout: this.timeout,\r\n            body: typeof (body) === \"string\" ? body : JSON.stringify(body)\r\n        });\r\n        if (response.status !== 200) {\r\n            let resp;\r\n            try {\r\n                resp = await response.text();\r\n            }\r\n            catch (e) {\r\n                throw new RequestError_1.RequestError(response.statusText, response.status);\r\n            }\r\n            throw RequestError_1.RequestError.parse(resp, response.status);\r\n        }\r\n        if (responseType === \"str\")\r\n            return await response.text();\r\n        return await response.json();\r\n    }\r\n    /**\r\n     * Sends request in parallel to multiple maybe operational api urls\r\n     *\r\n     * @param path\r\n     * @param responseType\r\n     * @param type\r\n     * @param body\r\n     * @private\r\n     */\r\n    async requestFromMaybeOperationalUrls(path, responseType, type = \"GET\", body) {\r\n        try {\r\n            return await (0, Utils_1.promiseAny)(this.getMaybeOperationalApis().map(obj => (async () => {\r\n                try {\r\n                    const result = await this._request(obj.url, path, responseType, type, body);\r\n                    obj.operational = true;\r\n                    return result;\r\n                }\r\n                catch (e) {\r\n                    //Only mark as non operational on 5xx server errors!\r\n                    if (e instanceof RequestError_1.RequestError && Math.floor(e.httpCode / 100) !== 5) {\r\n                        obj.operational = true;\r\n                        throw e;\r\n                    }\r\n                    else {\r\n                        obj.operational = false;\r\n                        throw e;\r\n                    }\r\n                }\r\n            })()));\r\n        }\r\n        catch (e) {\r\n            throw e.find(err => err instanceof RequestError_1.RequestError && Math.floor(err.httpCode / 100) !== 5) || e[0];\r\n        }\r\n    }\r\n    /**\r\n     * Sends a request to mempool API, first tries to use the operational API (if any) and if that fails it falls back\r\n     *  to using maybe operational price APIs\r\n     *\r\n     * @param path\r\n     * @param responseType\r\n     * @param type\r\n     * @param body\r\n     * @private\r\n     */\r\n    async request(path, responseType, type = \"GET\", body) {\r\n        return (0, Utils_1.tryWithRetries)(() => {\r\n            const operationalPriceApi = this.getOperationalApi();\r\n            if (operationalPriceApi != null) {\r\n                return this._request(operationalPriceApi.url, path, responseType, type, body).catch(err => {\r\n                    //Only retry on 5xx server errors!\r\n                    if (err instanceof RequestError_1.RequestError && Math.floor(err.httpCode / 100) !== 5)\r\n                        throw err;\r\n                    operationalPriceApi.operational = false;\r\n                    return this.requestFromMaybeOperationalUrls(path, responseType, type, body);\r\n                });\r\n            }\r\n            return this.requestFromMaybeOperationalUrls(path, responseType, type, body);\r\n        }, null, (err) => err instanceof RequestError_1.RequestError && Math.floor(err.httpCode / 100) !== 5);\r\n    }\r\n    constructor(url, timeout) {\r\n        url = url ?? \"https://mempool.space/testnet/api/\";\r\n        if (Array.isArray(url)) {\r\n            this.backends = url.map(val => {\r\n                return { url: val, operational: null };\r\n            });\r\n        }\r\n        else {\r\n            this.backends = [\r\n                { url: url, operational: null }\r\n            ];\r\n        }\r\n        this.timeout = timeout;\r\n    }\r\n    /**\r\n     * Returns information about a specific lightning network node as identified by the public key (in hex encoding)\r\n     *\r\n     * @param pubkey\r\n     */\r\n    getLNNodeInfo(pubkey) {\r\n        return this.request(\"v1/lightning/nodes/\" + pubkey, \"obj\").catch((e) => {\r\n            if (e.message === \"This node does not exist, or our node is not seeing it yet\")\r\n                return null;\r\n            throw e;\r\n        });\r\n    }\r\n    /**\r\n     * Returns on-chain transaction as identified by its txId\r\n     *\r\n     * @param txId\r\n     */\r\n    getTransaction(txId) {\r\n        return this.request(\"tx/\" + txId, \"obj\").catch((e) => {\r\n            if (e.message === \"Transaction not found\")\r\n                return null;\r\n            throw e;\r\n        });\r\n    }\r\n    /**\r\n     * Returns raw binary encoded bitcoin transaction, also strips the witness data from the transaction\r\n     *\r\n     * @param txId\r\n     */\r\n    async getRawTransaction(txId) {\r\n        const rawTransaction = await this.request(\"tx/\" + txId + \"/hex\", \"str\").catch((e) => {\r\n            if (e.message === \"Transaction not found\")\r\n                return null;\r\n            throw e;\r\n        });\r\n        return rawTransaction == null ? null : buffer_1.Buffer.from(rawTransaction, \"hex\");\r\n    }\r\n    /**\r\n     * Returns confirmed & unconfirmed balance of the specific bitcoin address\r\n     *\r\n     * @param address\r\n     */\r\n    async getAddressBalances(address) {\r\n        const jsonBody = await this.request(\"address/\" + address, \"obj\");\r\n        const confirmedInput = BigInt(jsonBody.chain_stats.funded_txo_sum);\r\n        const confirmedOutput = BigInt(jsonBody.chain_stats.spent_txo_sum);\r\n        const unconfirmedInput = BigInt(jsonBody.mempool_stats.funded_txo_sum);\r\n        const unconfirmedOutput = BigInt(jsonBody.mempool_stats.spent_txo_sum);\r\n        return {\r\n            confirmedBalance: confirmedInput - confirmedOutput,\r\n            unconfirmedBalance: unconfirmedInput - unconfirmedOutput\r\n        };\r\n    }\r\n    /**\r\n     * Returns CPFP (children pays for parent) data for a given transaction\r\n     *\r\n     * @param txId\r\n     */\r\n    getCPFPData(txId) {\r\n        return this.request(\"v1/cpfp/\" + txId, \"obj\");\r\n    }\r\n    /**\r\n     * Returns UTXOs (unspent transaction outputs) for a given address\r\n     *\r\n     * @param address\r\n     */\r\n    async getAddressUTXOs(address) {\r\n        let jsonBody = await this.request(\"address/\" + address + \"/utxo\", \"obj\");\r\n        jsonBody.forEach(e => e.value = BigInt(e.value));\r\n        return jsonBody;\r\n    }\r\n    /**\r\n     * Returns current on-chain bitcoin fees\r\n     */\r\n    getFees() {\r\n        return this.request(\"v1/fees/recommended\", \"obj\");\r\n    }\r\n    /**\r\n     * Returns all transactions for a given address\r\n     *\r\n     * @param address\r\n     */\r\n    getAddressTransactions(address) {\r\n        return this.request(\"address/\" + address + \"/txs\", \"obj\");\r\n    }\r\n    /**\r\n     * Returns expected pending (mempool) blocks\r\n     */\r\n    getPendingBlocks() {\r\n        return this.request(\"v1/fees/mempool-blocks\", \"obj\");\r\n    }\r\n    /**\r\n     * Returns the blockheight of the current bitcoin blockchain's tip\r\n     */\r\n    async getTipBlockHeight() {\r\n        const response = await this.request(\"blocks/tip/height\", \"str\");\r\n        return parseInt(response);\r\n    }\r\n    /**\r\n     * Returns the bitcoin blockheader as identified by its blockhash\r\n     *\r\n     * @param blockhash\r\n     */\r\n    getBlockHeader(blockhash) {\r\n        return this.request(\"block/\" + blockhash, \"obj\");\r\n    }\r\n    /**\r\n     * Returns the block status\r\n     *\r\n     * @param blockhash\r\n     */\r\n    getBlockStatus(blockhash) {\r\n        return this.request(\"block/\" + blockhash + \"/status\", \"obj\");\r\n    }\r\n    /**\r\n     * Returns the transaction's proof (merkle proof)\r\n     *\r\n     * @param txId\r\n     */\r\n    getTransactionProof(txId) {\r\n        return this.request(\"tx/\" + txId + \"/merkle-proof\", \"obj\");\r\n    }\r\n    /**\r\n     * Returns the transaction's proof (merkle proof)\r\n     *\r\n     * @param txId\r\n     */\r\n    getOutspends(txId) {\r\n        return this.request(\"tx/\" + txId + \"/outspends\", \"obj\");\r\n    }\r\n    /**\r\n     * Returns blockhash of a block at a specific blockheight\r\n     *\r\n     * @param height\r\n     */\r\n    getBlockHash(height) {\r\n        return this.request(\"block-height/\" + height, \"str\");\r\n    }\r\n    /**\r\n     * Returns past 15 blockheaders before (and including) the specified height\r\n     *\r\n     * @param endHeight\r\n     */\r\n    getPast15BlockHeaders(endHeight) {\r\n        return this.request(\"v1/blocks/\" + endHeight, \"obj\");\r\n    }\r\n    /**\r\n     * Sends raw hex encoded bitcoin transaction\r\n     *\r\n     * @param transactionHex\r\n     */\r\n    sendTransaction(transactionHex) {\r\n        return this.request(\"tx\", \"str\", \"POST\", transactionHex);\r\n    }\r\n}\r\nexports.MempoolApi = MempoolApi;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MempoolBitcoinBlock = void 0;\r\nclass MempoolBitcoinBlock {\r\n    constructor(obj) {\r\n        this.id = obj.id;\r\n        this.height = obj.height;\r\n        this.version = obj.version;\r\n        this.timestamp = obj.timestamp;\r\n        this.tx_count = obj.tx_count;\r\n        this.size = obj.size;\r\n        this.weight = obj.weight;\r\n        this.merkle_root = obj.merkle_root;\r\n        this.previousblockhash = obj.previousblockhash;\r\n        this.mediantime = obj.mediantime;\r\n        this.nonce = obj.nonce;\r\n        this.bits = obj.bits;\r\n        this.difficulty = obj.difficulty;\r\n    }\r\n    getHeight() {\r\n        return this.height;\r\n    }\r\n    getHash() {\r\n        return this.id;\r\n    }\r\n    getMerkleRoot() {\r\n        return this.merkle_root;\r\n    }\r\n    getNbits() {\r\n        return this.bits;\r\n    }\r\n    getNonce() {\r\n        return this.nonce;\r\n    }\r\n    getPrevBlockhash() {\r\n        return this.previousblockhash;\r\n    }\r\n    getTimestamp() {\r\n        return this.timestamp;\r\n    }\r\n    getVersion() {\r\n        return this.version;\r\n    }\r\n    getChainWork() {\r\n        throw new Error(\"Unsupported\");\r\n    }\r\n}\r\nexports.MempoolBitcoinBlock = MempoolBitcoinBlock;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.MempoolBitcoinRpc = void 0;\r\nconst base_1 = require(\"@atomiqlabs/base\");\r\nconst MempoolBitcoinBlock_1 = require(\"./MempoolBitcoinBlock\");\r\nconst MempoolApi_1 = require(\"./MempoolApi\");\r\nconst buffer_1 = require(\"buffer\");\r\nconst Utils_1 = require(\"../../utils/Utils\");\r\nconst btc_signer_1 = require(\"@scure/btc-signer\");\r\nconst sha2_1 = require(\"@noble/hashes/sha2\");\r\nconst BITCOIN_BLOCKTIME = 600 * 1000;\r\nconst BITCOIN_BLOCKSIZE = 1024 * 1024;\r\nfunction bitcoinTxToBtcTx(btcTx) {\r\n    return {\r\n        locktime: btcTx.lockTime,\r\n        version: btcTx.version,\r\n        blockhash: null,\r\n        confirmations: 0,\r\n        txid: buffer_1.Buffer.from((0, sha2_1.sha256)((0, sha2_1.sha256)(btcTx.toBytes(true, false)))).reverse().toString(\"hex\"),\r\n        hex: buffer_1.Buffer.from(btcTx.toBytes(true, false)).toString(\"hex\"),\r\n        raw: buffer_1.Buffer.from(btcTx.toBytes(true, true)).toString(\"hex\"),\r\n        vsize: btcTx.isFinal ? btcTx.vsize : null,\r\n        outs: Array.from({ length: btcTx.outputsLength }, (_, i) => i).map((index) => {\r\n            const output = btcTx.getOutput(index);\r\n            return {\r\n                value: Number(output.amount),\r\n                n: index,\r\n                scriptPubKey: {\r\n                    asm: btc_signer_1.Script.decode(output.script).map(val => typeof (val) === \"object\" ? buffer_1.Buffer.from(val).toString(\"hex\") : val.toString()).join(\" \"),\r\n                    hex: buffer_1.Buffer.from(output.script).toString(\"hex\")\r\n                }\r\n            };\r\n        }),\r\n        ins: Array.from({ length: btcTx.inputsLength }, (_, i) => i).map(index => {\r\n            const input = btcTx.getInput(index);\r\n            return {\r\n                txid: buffer_1.Buffer.from(input.txid).toString(\"hex\"),\r\n                vout: input.index,\r\n                scriptSig: {\r\n                    asm: btc_signer_1.Script.decode(input.finalScriptSig).map(val => typeof (val) === \"object\" ? buffer_1.Buffer.from(val).toString(\"hex\") : val.toString()).join(\" \"),\r\n                    hex: buffer_1.Buffer.from(input.finalScriptSig).toString(\"hex\")\r\n                },\r\n                sequence: input.sequence,\r\n                txinwitness: input.finalScriptWitness == null ? [] : input.finalScriptWitness.map(witness => buffer_1.Buffer.from(witness).toString(\"hex\"))\r\n            };\r\n        })\r\n    };\r\n}\r\nclass MempoolBitcoinRpc {\r\n    constructor(urlOrMempoolApi) {\r\n        this.api = urlOrMempoolApi instanceof MempoolApi_1.MempoolApi ? urlOrMempoolApi : new MempoolApi_1.MempoolApi(urlOrMempoolApi);\r\n    }\r\n    /**\r\n     * Returns a txo hash for a specific transaction vout\r\n     *\r\n     * @param vout\r\n     * @private\r\n     */\r\n    static getTxoHash(vout) {\r\n        return buffer_1.Buffer.from((0, sha2_1.sha256)(buffer_1.Buffer.concat([\r\n            base_1.BigIntBufferUtils.toBuffer(BigInt(vout.value), \"le\", 8),\r\n            buffer_1.Buffer.from(vout.scriptpubkey, \"hex\")\r\n        ])));\r\n    }\r\n    /**\r\n     * Returns delay in milliseconds till an unconfirmed transaction is expected to confirm, returns -1\r\n     *  if the transaction won't confirm any time soon\r\n     *\r\n     * @param feeRate\r\n     * @private\r\n     */\r\n    async getTimeTillConfirmation(feeRate) {\r\n        const mempoolBlocks = await this.api.getPendingBlocks();\r\n        const mempoolBlockIndex = mempoolBlocks.findIndex(block => block.feeRange[0] <= feeRate);\r\n        if (mempoolBlockIndex === -1)\r\n            return -1;\r\n        //Last returned block is usually an aggregate (or a stack) of multiple btc blocks, if tx falls in this block\r\n        // and the last returned block really is an aggregate one (size bigger than BITCOIN_BLOCKSIZE) we return -1\r\n        if (mempoolBlockIndex + 1 === mempoolBlocks.length &&\r\n            mempoolBlocks[mempoolBlocks.length - 1].blockVSize > BITCOIN_BLOCKSIZE)\r\n            return -1;\r\n        return (mempoolBlockIndex + 1) * BITCOIN_BLOCKTIME;\r\n    }\r\n    /**\r\n     * Returns an estimate after which time the tx will confirm with the required amount of confirmations,\r\n     *  confirmationDelay of -1 means the transaction won't confirm in the near future\r\n     *\r\n     * @param tx\r\n     * @param requiredConfirmations\r\n     * @private\r\n     *\r\n     * @returns estimated confirmation delay, -1 if the transaction won't confirm in the near future, null if the\r\n     *  transaction was replaced or was confirmed in the meantime\r\n     */\r\n    async getConfirmationDelay(tx, requiredConfirmations) {\r\n        if (tx.confirmations > requiredConfirmations)\r\n            return 0;\r\n        if (tx.confirmations === 0) {\r\n            //Get CPFP data\r\n            const cpfpData = await this.api.getCPFPData(tx.txid);\r\n            if (cpfpData.effectiveFeePerVsize == null) {\r\n                //Transaction is either confirmed in the meantime, or replaced\r\n                return null;\r\n            }\r\n            let confirmationDelay = (await this.getTimeTillConfirmation(cpfpData.effectiveFeePerVsize));\r\n            if (confirmationDelay !== -1)\r\n                confirmationDelay += (requiredConfirmations - 1) * BITCOIN_BLOCKTIME;\r\n            return confirmationDelay;\r\n        }\r\n        return ((requiredConfirmations - tx.confirmations) * BITCOIN_BLOCKTIME);\r\n    }\r\n    /**\r\n     * Converts mempool API's transaction to BtcTx object\r\n     * @param tx Transaction to convert\r\n     * @param getRaw If the raw transaction field should be filled (requires one more network request)\r\n     * @private\r\n     */\r\n    async toBtcTx(tx, getRaw = true) {\r\n        const rawTx = !getRaw ? null : await this.api.getRawTransaction(tx.txid);\r\n        let confirmations = 0;\r\n        if (tx.status != null && tx.status.confirmed) {\r\n            const blockheight = await this.api.getTipBlockHeight();\r\n            confirmations = blockheight - tx.status.block_height + 1;\r\n        }\r\n        let strippedRawTx;\r\n        if (rawTx != null) {\r\n            //Strip witness data\r\n            const btcTx = btc_signer_1.Transaction.fromRaw(rawTx, {\r\n                allowLegacyWitnessUtxo: true,\r\n                allowUnknownInputs: true,\r\n                allowUnknownOutputs: true,\r\n                disableScriptCheck: true\r\n            });\r\n            strippedRawTx = buffer_1.Buffer.from(btcTx.toBytes(true, false)).toString(\"hex\");\r\n        }\r\n        return {\r\n            locktime: tx.locktime,\r\n            version: tx.version,\r\n            blockheight: tx.status?.block_height,\r\n            blockhash: tx.status?.block_hash,\r\n            confirmations,\r\n            txid: tx.txid,\r\n            vsize: tx.weight / 4,\r\n            hex: strippedRawTx,\r\n            raw: rawTx == null ? null : rawTx.toString(\"hex\"),\r\n            outs: tx.vout.map((e, index) => {\r\n                return {\r\n                    value: e.value,\r\n                    n: index,\r\n                    scriptPubKey: {\r\n                        hex: e.scriptpubkey,\r\n                        asm: e.scriptpubkey_asm\r\n                    }\r\n                };\r\n            }),\r\n            ins: tx.vin.map(e => {\r\n                return {\r\n                    txid: e.txid,\r\n                    vout: e.vout,\r\n                    scriptSig: {\r\n                        hex: e.scriptsig,\r\n                        asm: e.scriptsig_asm\r\n                    },\r\n                    sequence: e.sequence,\r\n                    txinwitness: e.witness\r\n                };\r\n            }),\r\n        };\r\n    }\r\n    getTipHeight() {\r\n        return this.api.getTipBlockHeight();\r\n    }\r\n    async getBlockHeader(blockhash) {\r\n        return new MempoolBitcoinBlock_1.MempoolBitcoinBlock(await this.api.getBlockHeader(blockhash));\r\n    }\r\n    async getMerkleProof(txId, blockhash) {\r\n        const proof = await this.api.getTransactionProof(txId);\r\n        return {\r\n            reversedTxId: buffer_1.Buffer.from(txId, \"hex\").reverse(),\r\n            pos: proof.pos,\r\n            merkle: proof.merkle.map(e => buffer_1.Buffer.from(e, \"hex\").reverse()),\r\n            blockheight: proof.block_height\r\n        };\r\n    }\r\n    async getTransaction(txId) {\r\n        const tx = await this.api.getTransaction(txId);\r\n        if (tx == null)\r\n            return null;\r\n        return await this.toBtcTx(tx);\r\n    }\r\n    async isInMainChain(blockhash) {\r\n        const blockStatus = await this.api.getBlockStatus(blockhash);\r\n        return blockStatus.in_best_chain;\r\n    }\r\n    getBlockhash(height) {\r\n        return this.api.getBlockHash(height);\r\n    }\r\n    getBlockWithTransactions(blockhash) {\r\n        throw new Error(\"Unsupported.\");\r\n    }\r\n    async getSyncInfo() {\r\n        const tipHeight = await this.api.getTipBlockHeight();\r\n        return {\r\n            verificationProgress: 1,\r\n            blocks: tipHeight,\r\n            headers: tipHeight,\r\n            ibd: false\r\n        };\r\n    }\r\n    async getPast15Blocks(height) {\r\n        return (await this.api.getPast15BlockHeaders(height)).map(blockHeader => new MempoolBitcoinBlock_1.MempoolBitcoinBlock(blockHeader));\r\n    }\r\n    async checkAddressTxos(address, txoHash) {\r\n        const allTxs = await this.api.getAddressTransactions(address);\r\n        const relevantTxs = allTxs\r\n            .map(tx => {\r\n            return {\r\n                tx,\r\n                vout: tx.vout.findIndex(vout => MempoolBitcoinRpc.getTxoHash(vout).equals(txoHash))\r\n            };\r\n        })\r\n            .filter(obj => obj.vout >= 0)\r\n            .sort((a, b) => {\r\n            if (a.tx.status.confirmed && !b.tx.status.confirmed)\r\n                return -1;\r\n            if (!a.tx.status.confirmed && b.tx.status.confirmed)\r\n                return 1;\r\n            if (a.tx.status.confirmed && b.tx.status.confirmed)\r\n                return a.tx.status.block_height - b.tx.status.block_height;\r\n            return 0;\r\n        });\r\n        if (relevantTxs.length === 0)\r\n            return null;\r\n        return {\r\n            tx: await this.toBtcTx(relevantTxs[0].tx, false),\r\n            vout: relevantTxs[0].vout\r\n        };\r\n    }\r\n    /**\r\n     * Waits till the address receives a transaction containing a specific txoHash\r\n     *\r\n     * @param address\r\n     * @param txoHash\r\n     * @param requiredConfirmations\r\n     * @param stateUpdateCbk\r\n     * @param abortSignal\r\n     * @param intervalSeconds\r\n     */\r\n    async waitForAddressTxo(address, txoHash, requiredConfirmations, stateUpdateCbk, abortSignal, intervalSeconds) {\r\n        if (abortSignal != null)\r\n            abortSignal.throwIfAborted();\r\n        while (abortSignal == null || !abortSignal.aborted) {\r\n            await (0, Utils_1.timeoutPromise)((intervalSeconds || 5) * 1000, abortSignal);\r\n            const result = await this.checkAddressTxos(address, txoHash);\r\n            if (result == null) {\r\n                stateUpdateCbk(null, null, null, null);\r\n                continue;\r\n            }\r\n            const confirmationDelay = await this.getConfirmationDelay(result.tx, requiredConfirmations);\r\n            if (confirmationDelay == null)\r\n                continue;\r\n            if (stateUpdateCbk != null)\r\n                stateUpdateCbk(result.tx.confirmations, result.tx.txid, result.vout, confirmationDelay);\r\n            if (confirmationDelay === 0)\r\n                return result;\r\n        }\r\n        abortSignal.throwIfAborted();\r\n    }\r\n    async waitForTransaction(txId, requiredConfirmations, stateUpdateCbk, abortSignal, intervalSeconds) {\r\n        if (abortSignal != null)\r\n            abortSignal.throwIfAborted();\r\n        while (abortSignal == null || !abortSignal.aborted) {\r\n            await (0, Utils_1.timeoutPromise)((intervalSeconds || 5) * 1000, abortSignal);\r\n            const result = await this.getTransaction(txId);\r\n            if (result == null) {\r\n                stateUpdateCbk(null, null, null);\r\n                continue;\r\n            }\r\n            const confirmationDelay = await this.getConfirmationDelay(result, requiredConfirmations);\r\n            if (confirmationDelay == null)\r\n                continue;\r\n            if (stateUpdateCbk != null)\r\n                stateUpdateCbk(result.confirmations, result.txid, confirmationDelay);\r\n            if (confirmationDelay === 0)\r\n                return result;\r\n        }\r\n        abortSignal.throwIfAborted();\r\n    }\r\n    async getLNNodeLiquidity(pubkey) {\r\n        const nodeInfo = await this.api.getLNNodeInfo(pubkey);\r\n        return {\r\n            publicKey: nodeInfo.public_key,\r\n            capacity: BigInt(nodeInfo.capacity),\r\n            numChannels: nodeInfo.active_channel_count\r\n        };\r\n    }\r\n    sendRawTransaction(rawTx) {\r\n        return this.api.sendTransaction(rawTx);\r\n    }\r\n    sendRawPackage(rawTx) {\r\n        throw new Error(\"Unsupported\");\r\n    }\r\n    async isSpent(utxo, confirmed) {\r\n        const [txId, voutStr] = utxo.split(\":\");\r\n        const vout = parseInt(voutStr);\r\n        const outspends = await this.api.getOutspends(txId);\r\n        if (outspends[vout] == null)\r\n            return true;\r\n        if (confirmed) {\r\n            return outspends[vout].spent && outspends[vout].status.confirmed;\r\n        }\r\n        return outspends[vout].spent;\r\n    }\r\n    parseTransaction(rawTx) {\r\n        const btcTx = btc_signer_1.Transaction.fromRaw(buffer_1.Buffer.from(rawTx, \"hex\"), {\r\n            allowLegacyWitnessUtxo: true,\r\n            allowUnknownInputs: true,\r\n            allowUnknownOutputs: true,\r\n            disableScriptCheck: true\r\n        });\r\n        return Promise.resolve(bitcoinTxToBtcTx(btcTx));\r\n    }\r\n    getEffectiveFeeRate(btcTx) {\r\n        throw new Error(\"Unsupported.\");\r\n    }\r\n    async getFeeRate() {\r\n        return (await this.api.getFees()).fastestFee;\r\n    }\r\n    getAddressBalances(address) {\r\n        return this.api.getAddressBalances(address);\r\n    }\r\n    async getAddressUTXOs(address) {\r\n        return (await this.api.getAddressUTXOs(address)).map(val => ({\r\n            txid: val.txid,\r\n            vout: val.vout,\r\n            confirmed: val.status.confirmed,\r\n            block_height: val.status.block_height,\r\n            block_hash: val.status.block_hash,\r\n            block_time: val.status.block_time,\r\n            value: val.value\r\n        }));\r\n    }\r\n    getCPFPData(txId) {\r\n        return this.api.getCPFPData(txId);\r\n    }\r\n}\r\nexports.MempoolBitcoinRpc = MempoolBitcoinRpc;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.isIBitcoinWallet = void 0;\r\nfunction isIBitcoinWallet(val) {\r\n    return val !== null &&\r\n        typeof (val.sendTransaction) === \"function\" &&\r\n        typeof (val.fundPsbt) === \"function\" &&\r\n        typeof (val.signPsbt) === \"function\" &&\r\n        typeof (val.getFeeRate) === \"function\" &&\r\n        typeof (val.getTransactionFee) === \"function\" &&\r\n        typeof (val.getFundedPsbtFee) === \"function\" &&\r\n        typeof (val.getReceiveAddress) === \"function\" &&\r\n        typeof (val.getBalance) === \"function\" &&\r\n        typeof (val.getSpendableBalance) === \"function\";\r\n}\r\nexports.isIBitcoinWallet = isIBitcoinWallet;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.utils = exports.DUST_THRESHOLDS = void 0;\r\nconst Utils_1 = require(\"../../utils/Utils\");\r\nconst logger = (0, Utils_1.getLogger)(\"CoinSelect: \");\r\n// baseline estimates, used to improve performance\r\nconst TX_EMPTY_SIZE = 4 + 1 + 1 + 4;\r\nconst TX_INPUT_BASE = 32 + 4 + 1 + 4;\r\nconst WITNESS_OVERHEAD = 2 / 4;\r\nconst P2WPKH_WITNESS = (1 + 1 + 72 + 1 + 33) / 4;\r\nconst P2TR_WITNESS = (1 + 1 + 65) / 4;\r\nconst TX_INPUT_PUBKEYHASH = 107;\r\nconst TX_INPUT_P2SH_P2WPKH = 23 + P2WPKH_WITNESS + 1;\r\nconst TX_INPUT_P2WPKH = 0 + P2WPKH_WITNESS;\r\nconst TX_INPUT_P2WSH = 0 + (1 + 1 + 64) / 4;\r\nconst TX_INPUT_P2TR = 0 + P2TR_WITNESS;\r\nconst TX_OUTPUT_BASE = 8 + 1;\r\nconst TX_OUTPUT_PUBKEYHASH = 25;\r\nconst TX_OUTPUT_P2SH_P2WPKH = 23;\r\nconst TX_OUTPUT_P2WPKH = 22;\r\nconst TX_OUTPUT_P2WSH = 34;\r\nconst TX_OUTPUT_P2TR = 34;\r\nconst INPUT_BYTES = {\r\n    \"p2sh-p2wpkh\": TX_INPUT_P2SH_P2WPKH,\r\n    \"p2wpkh\": TX_INPUT_P2WPKH,\r\n    \"p2tr\": TX_INPUT_P2TR,\r\n    \"p2pkh\": TX_INPUT_PUBKEYHASH,\r\n    \"p2wsh\": TX_INPUT_P2WSH\r\n};\r\nfunction inputBytes(input) {\r\n    return TX_INPUT_BASE + (input.script ? input.script.length : INPUT_BYTES[input.type]);\r\n}\r\nconst OUTPUT_BYTES = {\r\n    \"p2sh-p2wpkh\": TX_OUTPUT_P2SH_P2WPKH,\r\n    \"p2wpkh\": TX_OUTPUT_P2WPKH,\r\n    \"p2tr\": TX_OUTPUT_P2TR,\r\n    \"p2pkh\": TX_OUTPUT_PUBKEYHASH,\r\n    \"p2wsh\": TX_OUTPUT_P2WSH\r\n};\r\nfunction outputBytes(output) {\r\n    return TX_OUTPUT_BASE + (output.script ? output.script.length : OUTPUT_BYTES[output.type]);\r\n}\r\nexports.DUST_THRESHOLDS = {\r\n    \"p2sh-p2wpkh\": 540,\r\n    \"p2wpkh\": 294,\r\n    \"p2tr\": 330,\r\n    \"p2pkh\": 546,\r\n    \"p2wsh\": 330\r\n};\r\nfunction dustThreshold(output) {\r\n    return exports.DUST_THRESHOLDS[output.type];\r\n}\r\nfunction transactionBytes(inputs, outputs, changeType) {\r\n    let size = TX_EMPTY_SIZE;\r\n    let isSegwit = false;\r\n    if (changeType !== \"p2pkh\") {\r\n        size += WITNESS_OVERHEAD;\r\n        let isSegwit = true;\r\n    }\r\n    for (let input of inputs) {\r\n        if (!isSegwit && (input.type !== \"p2pkh\")) {\r\n            isSegwit = true;\r\n            size += WITNESS_OVERHEAD;\r\n        }\r\n        size += inputBytes(input);\r\n    }\r\n    for (let output of outputs) {\r\n        size += outputBytes(output);\r\n    }\r\n    return Math.ceil(size);\r\n}\r\nfunction uintOrNaN(v) {\r\n    if (typeof v !== 'number')\r\n        return NaN;\r\n    if (!isFinite(v))\r\n        return NaN;\r\n    if (Math.floor(v) !== v)\r\n        return NaN;\r\n    if (v < 0)\r\n        return NaN;\r\n    return v;\r\n}\r\nfunction sumForgiving(range) {\r\n    return range.reduce((a, x) => a + (isFinite(x.value) ? x.value : 0), 0);\r\n}\r\nfunction sumOrNaN(range) {\r\n    return range.reduce((a, x) => a + uintOrNaN(x.value), 0);\r\n}\r\nfunction finalize(inputs, outputs, feeRate, changeType, cpfpAddFee = 0) {\r\n    const bytesAccum = transactionBytes(inputs, outputs, changeType);\r\n    logger.debug(\"finalize(): Transaction bytes: \", bytesAccum);\r\n    const feeAfterExtraOutput = (feeRate * (bytesAccum + outputBytes({ type: changeType }))) + cpfpAddFee;\r\n    logger.debug(\"finalize(): TX fee after adding change output: \", feeAfterExtraOutput);\r\n    const remainderAfterExtraOutput = Math.floor(sumOrNaN(inputs) - (sumOrNaN(outputs) + feeAfterExtraOutput));\r\n    logger.debug(\"finalize(): Leaves change (changeType=\" + changeType + \") value: \", remainderAfterExtraOutput);\r\n    // is it worth a change output?\r\n    if (remainderAfterExtraOutput >= dustThreshold({ type: changeType })) {\r\n        outputs = outputs.concat({ value: remainderAfterExtraOutput, type: changeType });\r\n    }\r\n    const fee = sumOrNaN(inputs) - sumOrNaN(outputs);\r\n    logger.debug(\"finalize(): Re-calculated total fee: \", fee);\r\n    if (!isFinite(fee))\r\n        return { fee: (feeRate * bytesAccum) + cpfpAddFee };\r\n    return {\r\n        inputs: inputs,\r\n        outputs: outputs,\r\n        fee: fee\r\n    };\r\n}\r\nexports.utils = {\r\n    dustThreshold: dustThreshold,\r\n    finalize: finalize,\r\n    inputBytes: inputBytes,\r\n    outputBytes: outputBytes,\r\n    sumOrNaN: sumOrNaN,\r\n    sumForgiving: sumForgiving,\r\n    transactionBytes: transactionBytes,\r\n    uintOrNaN: uintOrNaN\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.accumulative = void 0;\r\nconst utils_1 = require(\"./utils\");\r\nconst Utils_1 = require(\"../../utils/Utils\");\r\nconst logger = (0, Utils_1.getLogger)(\"CoinSelect: \");\r\n// add inputs until we reach or surpass the target value (or deplete)\r\n// worst-case: O(n)\r\nfunction accumulative(utxos, outputs, feeRate, type, requiredInputs) {\r\n    if (!isFinite(utils_1.utils.uintOrNaN(feeRate)))\r\n        return null;\r\n    const inputs = requiredInputs == null ? [] : [...requiredInputs];\r\n    let bytesAccum = utils_1.utils.transactionBytes(inputs, outputs, type);\r\n    let fee = feeRate * bytesAccum;\r\n    let cpfpAddFee = 0;\r\n    let inAccum = utils_1.utils.sumOrNaN(inputs);\r\n    const outAccum = utils_1.utils.sumOrNaN(outputs);\r\n    logger.debug(\"accumulative(): total output: \", outAccum);\r\n    for (let i = 0; i < utxos.length; ++i) {\r\n        const utxo = utxos[i];\r\n        const utxoBytes = utils_1.utils.inputBytes(utxo);\r\n        const utxoFee = feeRate * utxoBytes;\r\n        const utxoValue = utils_1.utils.uintOrNaN(utxo.value);\r\n        let cpfpFee = 0;\r\n        if (utxo.cpfp != null && utxo.cpfp.txEffectiveFeeRate < feeRate)\r\n            cpfpFee = Math.ceil(utxo.cpfp.txVsize * (feeRate - utxo.cpfp.txEffectiveFeeRate));\r\n        // skip detrimental input\r\n        if (utxoFee + cpfpFee > utxo.value) {\r\n            logger.debug(\"accumulative(\" + i + \"): Skipping detrimental output, cpfpFee: \" + cpfpFee + \" utxoFee: \" + utxoFee + \" value: \" + utxo.value);\r\n            if (i === utxos.length - 1)\r\n                return { fee: (feeRate * (bytesAccum + utxoBytes)) + cpfpAddFee + cpfpFee };\r\n            continue;\r\n        }\r\n        bytesAccum += utxoBytes;\r\n        inAccum += utxoValue;\r\n        cpfpAddFee += cpfpFee;\r\n        inputs.push(utxo);\r\n        fee = Math.ceil((feeRate * bytesAccum) + cpfpAddFee);\r\n        logger.debug(\"accumulative(\" + i + \"): total fee: \", fee);\r\n        logger.debug(\"accumulative(\" + i + \"): input value: \", inAccum);\r\n        logger.debug(\"accumulative(\" + i + \"): cpfpAddFee: \", cpfpAddFee);\r\n        // go again?\r\n        if (inAccum < outAccum + fee)\r\n            continue;\r\n        logger.debug(\"accumulative(\" + i + \"): Finalizing transaction, inputs: \", inputs);\r\n        logger.debug(\"accumulative(\" + i + \"): Finalizing transaction, outputs: \", outputs);\r\n        logger.debug(\"accumulative(\" + i + \"): Finalizing transaction, feeRate: \", feeRate);\r\n        return utils_1.utils.finalize(inputs, outputs, feeRate, type, cpfpAddFee);\r\n    }\r\n    return { fee };\r\n}\r\nexports.accumulative = accumulative;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.blackjack = void 0;\r\nconst utils_1 = require(\"./utils\");\r\n// add inputs until we reach or surpass the target value (or deplete)\r\n// worst-case: O(n)\r\nfunction blackjack(utxos, outputs, feeRate, type, requiredInputs) {\r\n    if (!isFinite(utils_1.utils.uintOrNaN(feeRate)))\r\n        return null;\r\n    const inputs = requiredInputs == null ? [] : [...requiredInputs];\r\n    let bytesAccum = utils_1.utils.transactionBytes(inputs, outputs, type);\r\n    let inAccum = utils_1.utils.sumOrNaN(inputs);\r\n    let cpfpAddFee = 0;\r\n    const outAccum = utils_1.utils.sumOrNaN(outputs);\r\n    const threshold = utils_1.utils.dustThreshold({ type });\r\n    for (let i = 0; i < utxos.length; ++i) {\r\n        const input = utxos[i];\r\n        const inputBytes = utils_1.utils.inputBytes(input);\r\n        let cpfpFee = 0;\r\n        if (input.cpfp != null && input.cpfp.txEffectiveFeeRate < feeRate)\r\n            cpfpFee = Math.ceil(input.cpfp.txVsize * (feeRate - input.cpfp.txEffectiveFeeRate));\r\n        const fee = Math.ceil((feeRate * (bytesAccum + inputBytes)) + cpfpAddFee + cpfpFee);\r\n        const inputValue = utils_1.utils.uintOrNaN(input.value);\r\n        // would it waste value?\r\n        if ((inAccum + inputValue) > (outAccum + fee + threshold))\r\n            continue;\r\n        bytesAccum += inputBytes;\r\n        inAccum += inputValue;\r\n        cpfpAddFee += cpfpFee;\r\n        inputs.push(input);\r\n        // go again?\r\n        if (inAccum < outAccum + fee)\r\n            continue;\r\n        return utils_1.utils.finalize(inputs, outputs, feeRate, type, cpfpAddFee);\r\n    }\r\n    return { fee: (feeRate * bytesAccum) + cpfpAddFee };\r\n}\r\nexports.blackjack = blackjack;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.maxSendable = exports.coinSelect = exports.DUST_THRESHOLDS = void 0;\r\nconst accumulative_1 = require(\"./accumulative\");\r\nconst blackjack_1 = require(\"./blackjack\");\r\nconst utils_1 = require(\"./utils\");\r\nObject.defineProperty(exports, \"DUST_THRESHOLDS\", { enumerable: true, get: function () { return utils_1.DUST_THRESHOLDS; } });\r\n// order by descending value, minus the inputs approximate fee\r\nfunction utxoScore(x, feeRate) {\r\n    let valueAfterFee = x.value - (feeRate * utils_1.utils.inputBytes(x));\r\n    if (x.cpfp != null && x.cpfp.txEffectiveFeeRate < feeRate)\r\n        valueAfterFee -= x.cpfp.txVsize * (feeRate - x.cpfp.txEffectiveFeeRate);\r\n    return valueAfterFee;\r\n}\r\nfunction coinSelect(utxos, outputs, feeRate, type, requiredInputs) {\r\n    // order by descending value, minus the inputs approximate fee\r\n    utxos = utxos.sort((a, b) => {\r\n        // if(a.cpfp!=null && b.cpfp==null) return 1;\r\n        // if(a.cpfp==null && b.cpfp!=null) return -1;\r\n        return utxoScore(b, feeRate) - utxoScore(a, feeRate);\r\n    });\r\n    // attempt to use the blackjack strategy first (no change output)\r\n    const base = (0, blackjack_1.blackjack)(utxos, outputs, feeRate, type, requiredInputs);\r\n    if (base.inputs)\r\n        return base;\r\n    // else, try the accumulative strategy\r\n    return (0, accumulative_1.accumulative)(utxos, outputs, feeRate, type, requiredInputs);\r\n}\r\nexports.coinSelect = coinSelect;\r\nfunction maxSendable(utxos, output, feeRate, requiredInputs, additionalOutputs) {\r\n    if (!isFinite(utils_1.utils.uintOrNaN(feeRate)))\r\n        return null;\r\n    const outputs = additionalOutputs ?? [];\r\n    const inputs = requiredInputs ?? [];\r\n    let bytesAccum = utils_1.utils.transactionBytes(inputs, outputs.concat([output]), null);\r\n    let cpfpAddFee = 0;\r\n    let inAccum = utils_1.utils.sumOrNaN(inputs);\r\n    let outAccum = utils_1.utils.sumOrNaN(outputs);\r\n    for (let i = 0; i < utxos.length; ++i) {\r\n        const utxo = utxos[i];\r\n        const utxoBytes = utils_1.utils.inputBytes(utxo);\r\n        const utxoFee = feeRate * utxoBytes;\r\n        let cpfpFee = 0;\r\n        if (utxo.cpfp != null && utxo.cpfp.txEffectiveFeeRate < feeRate)\r\n            cpfpFee = utxo.cpfp.txVsize * (feeRate - utxo.cpfp.txEffectiveFeeRate);\r\n        const utxoValue = utils_1.utils.uintOrNaN(utxo.value);\r\n        // skip detrimental input\r\n        if (utxoFee + cpfpFee > utxo.value) {\r\n            continue;\r\n        }\r\n        bytesAccum += utxoBytes;\r\n        inAccum += utxoValue;\r\n        cpfpAddFee += cpfpFee;\r\n        inputs.push(utxo);\r\n    }\r\n    const fee = (feeRate * bytesAccum) + cpfpAddFee;\r\n    const outputValue = inAccum - fee - outAccum;\r\n    const dustThreshold = utils_1.DUST_THRESHOLDS[output.type];\r\n    if (outputValue < dustThreshold)\r\n        return {\r\n            fee,\r\n            value: 0\r\n        };\r\n    return {\r\n        fee,\r\n        value: outputValue\r\n    };\r\n}\r\nexports.maxSendable = maxSendable;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BitcoinWallet = exports.identifyAddressType = void 0;\r\nconst coinselect2_1 = require(\"../coinselect2\");\r\nconst btc_signer_1 = require(\"@scure/btc-signer\");\r\nconst buffer_1 = require(\"buffer\");\r\nconst Utils_1 = require(\"../../utils/Utils\");\r\nfunction identifyAddressType(address, network) {\r\n    switch ((0, btc_signer_1.Address)(network).decode(address).type) {\r\n        case \"pkh\":\r\n            return \"p2pkh\";\r\n        case \"wpkh\":\r\n            return \"p2wpkh\";\r\n        case \"tr\":\r\n            return \"p2tr\";\r\n        case \"sh\":\r\n            return \"p2sh-p2wpkh\";\r\n        case \"wsh\":\r\n            return \"p2wsh\";\r\n        default:\r\n            return null;\r\n    }\r\n}\r\nexports.identifyAddressType = identifyAddressType;\r\nconst logger = (0, Utils_1.getLogger)(\"BitcoinWallet: \");\r\nclass BitcoinWallet {\r\n    constructor(mempoolApi, network, feeMultiplier = 1.25, feeOverride) {\r\n        this.rpc = mempoolApi;\r\n        this.network = network;\r\n        this.feeMultiplier = feeMultiplier;\r\n        this.feeOverride = feeOverride;\r\n    }\r\n    async getFeeRate() {\r\n        if (this.feeOverride != null) {\r\n            return this.feeOverride;\r\n        }\r\n        return Math.floor((await this.rpc.getFeeRate()) * this.feeMultiplier);\r\n    }\r\n    _sendTransaction(rawHex) {\r\n        return this.rpc.sendRawTransaction(rawHex);\r\n    }\r\n    _getBalance(address) {\r\n        return this.rpc.getAddressBalances(address);\r\n    }\r\n    async _getUtxoPool(sendingAddress, sendingAddressType) {\r\n        const utxos = await this.rpc.getAddressUTXOs(sendingAddress);\r\n        let totalSpendable = 0;\r\n        const outputScript = (0, Utils_1.toOutputScript)(this.network, sendingAddress);\r\n        const utxoPool = [];\r\n        for (let utxo of utxos) {\r\n            const value = Number(utxo.value);\r\n            totalSpendable += value;\r\n            utxoPool.push({\r\n                vout: utxo.vout,\r\n                txId: utxo.txid,\r\n                value: value,\r\n                type: sendingAddressType,\r\n                outputScript: outputScript,\r\n                address: sendingAddress,\r\n                cpfp: !utxo.confirmed ? await this.rpc.getCPFPData(utxo.txid).then((result) => {\r\n                    if (result.effectiveFeePerVsize == null)\r\n                        return null;\r\n                    return {\r\n                        txVsize: result.adjustedVsize,\r\n                        txEffectiveFeeRate: result.effectiveFeePerVsize\r\n                    };\r\n                }) : null,\r\n                confirmed: utxo.confirmed\r\n            });\r\n        }\r\n        logger.debug(\"_getUtxoPool(): Total spendable value: \" + totalSpendable + \" num utxos: \" + utxoPool.length);\r\n        return utxoPool;\r\n    }\r\n    async _getPsbt(sendingAccounts, recipient, amount, feeRate) {\r\n        const psbt = new btc_signer_1.Transaction({ PSBTVersion: 0 });\r\n        psbt.addOutput({\r\n            amount: BigInt(amount),\r\n            script: (0, Utils_1.toOutputScript)(this.network, recipient)\r\n        });\r\n        return this._fundPsbt(sendingAccounts, psbt, feeRate);\r\n    }\r\n    async _fundPsbt(sendingAccounts, psbt, feeRate) {\r\n        if (feeRate == null)\r\n            feeRate = await this.getFeeRate();\r\n        const utxoPool = (await Promise.all(sendingAccounts.map(acc => this._getUtxoPool(acc.address, acc.addressType)))).flat();\r\n        logger.debug(\"_fundPsbt(): fee rate: \" + feeRate + \" utxo pool: \", utxoPool);\r\n        const accountPubkeys = {};\r\n        sendingAccounts.forEach(acc => accountPubkeys[acc.address] = acc.pubkey);\r\n        const requiredInputs = [];\r\n        for (let i = 0; i < psbt.inputsLength; i++) {\r\n            const input = psbt.getInput(i);\r\n            let amount = input.witnessUtxo != null ? input.witnessUtxo.amount : input.nonWitnessUtxo.outputs[input.index].amount;\r\n            let script = input.witnessUtxo != null ? input.witnessUtxo.script : input.nonWitnessUtxo.outputs[input.index].script;\r\n            requiredInputs.push({\r\n                txId: buffer_1.Buffer.from(input.txid).toString('hex'),\r\n                vout: input.index,\r\n                value: Number(amount),\r\n                type: (0, Utils_1.toCoinselectAddressType)(script)\r\n            });\r\n        }\r\n        const targets = [];\r\n        for (let i = 0; i < psbt.outputsLength; i++) {\r\n            const output = psbt.getOutput(i);\r\n            targets.push({\r\n                value: Number(output.amount),\r\n                script: buffer_1.Buffer.from(output.script)\r\n            });\r\n        }\r\n        logger.debug(\"_fundPsbt(): Coinselect targets: \", targets);\r\n        let coinselectResult = (0, coinselect2_1.coinSelect)(utxoPool, targets, feeRate, sendingAccounts[0].addressType, requiredInputs);\r\n        logger.debug(\"_fundPsbt(): Coinselect result: \", coinselectResult);\r\n        if (coinselectResult.inputs == null || coinselectResult.outputs == null) {\r\n            return {\r\n                psbt: null,\r\n                fee: coinselectResult.fee,\r\n                inputAddressIndexes: null\r\n            };\r\n        }\r\n        // Remove in/outs that are already in the PSBT\r\n        coinselectResult.inputs.splice(0, psbt.inputsLength);\r\n        coinselectResult.outputs.splice(0, psbt.outputsLength);\r\n        const inputAddressIndexes = {};\r\n        coinselectResult.inputs.forEach((input, index) => {\r\n            inputAddressIndexes[input.address] ??= [];\r\n            inputAddressIndexes[input.address].push(index);\r\n        });\r\n        const formattedInputs = await Promise.all(coinselectResult.inputs.map(async (input) => {\r\n            switch (input.type) {\r\n                case \"p2tr\":\r\n                    const parsed = (0, btc_signer_1.p2tr)(buffer_1.Buffer.from(accountPubkeys[input.address], \"hex\"));\r\n                    return {\r\n                        txid: input.txId,\r\n                        index: input.vout,\r\n                        witnessUtxo: {\r\n                            script: input.outputScript,\r\n                            amount: BigInt(input.value)\r\n                        },\r\n                        tapInternalKey: parsed.tapInternalKey,\r\n                        tapMerkleRoot: parsed.tapMerkleRoot,\r\n                        tapLeafScript: parsed.tapLeafScript\r\n                    };\r\n                case \"p2wpkh\":\r\n                    return {\r\n                        txid: input.txId,\r\n                        index: input.vout,\r\n                        witnessUtxo: {\r\n                            script: input.outputScript,\r\n                            amount: BigInt(input.value)\r\n                        },\r\n                        sighashType: 0x01\r\n                    };\r\n                case \"p2sh-p2wpkh\":\r\n                    return {\r\n                        txid: input.txId,\r\n                        index: input.vout,\r\n                        witnessUtxo: {\r\n                            script: input.outputScript,\r\n                            amount: BigInt(input.value)\r\n                        },\r\n                        redeemScript: (0, btc_signer_1.p2wpkh)(buffer_1.Buffer.from(accountPubkeys[input.address], \"hex\"), this.network).script,\r\n                        sighashType: 0x01\r\n                    };\r\n                case \"p2pkh\":\r\n                    return {\r\n                        txid: input.txId,\r\n                        index: input.vout,\r\n                        nonWitnessUtxo: (await this.rpc.getTransaction(input.txId)).raw,\r\n                        sighashType: 0x01\r\n                    };\r\n            }\r\n        }));\r\n        formattedInputs.forEach(input => psbt.addInput(input));\r\n        coinselectResult.outputs.forEach(output => {\r\n            if (output.script == null && output.address == null) {\r\n                //Change output\r\n                psbt.addOutput({\r\n                    script: (0, Utils_1.toOutputScript)(this.network, sendingAccounts[0].address),\r\n                    amount: BigInt(Math.floor(output.value))\r\n                });\r\n            }\r\n            else {\r\n                psbt.addOutput({\r\n                    script: output.script ?? (0, Utils_1.toOutputScript)(this.network, output.address),\r\n                    amount: BigInt(output.value)\r\n                });\r\n            }\r\n        });\r\n        return {\r\n            psbt,\r\n            fee: coinselectResult.fee,\r\n            inputAddressIndexes\r\n        };\r\n    }\r\n    async _getSpendableBalance(sendingAccounts, psbt, feeRate) {\r\n        feeRate ??= await this.getFeeRate();\r\n        const utxoPool = (await Promise.all(sendingAccounts.map(acc => this._getUtxoPool(acc.address, acc.addressType)))).flat();\r\n        const requiredInputs = [];\r\n        if (psbt != null)\r\n            for (let i = 0; i < psbt.inputsLength; i++) {\r\n                const input = psbt.getInput(i);\r\n                let amount = input.witnessUtxo != null ? input.witnessUtxo.amount : input.nonWitnessUtxo.outputs[input.index].amount;\r\n                let script = input.witnessUtxo != null ? input.witnessUtxo.script : input.nonWitnessUtxo.outputs[input.index].script;\r\n                requiredInputs.push({\r\n                    txId: buffer_1.Buffer.from(input.txid).toString('hex'),\r\n                    vout: input.index,\r\n                    value: Number(amount),\r\n                    type: (0, Utils_1.toCoinselectAddressType)(script)\r\n                });\r\n            }\r\n        const additionalOutputs = [];\r\n        if (psbt != null)\r\n            for (let i = 0; i < psbt.outputsLength; i++) {\r\n                const output = psbt.getOutput(i);\r\n                additionalOutputs.push({\r\n                    value: Number(output.amount),\r\n                    script: buffer_1.Buffer.from(output.script)\r\n                });\r\n            }\r\n        const target = btc_signer_1.OutScript.encode({\r\n            type: \"wsh\",\r\n            hash: (0, Utils_1.randomBytes)(32)\r\n        });\r\n        let coinselectResult = (0, coinselect2_1.maxSendable)(utxoPool, { script: buffer_1.Buffer.from(target), type: \"p2wsh\" }, feeRate, requiredInputs, additionalOutputs);\r\n        logger.debug(\"_getSpendableBalance(): Max spendable result: \", coinselectResult);\r\n        return {\r\n            feeRate: feeRate,\r\n            balance: BigInt(Math.floor(coinselectResult.value)),\r\n            totalFee: coinselectResult.fee\r\n        };\r\n    }\r\n}\r\nexports.BitcoinWallet = BitcoinWallet;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SingleAddressBitcoinWallet = void 0;\r\nconst utils_1 = require(\"@scure/btc-signer/utils\");\r\nconst btc_signer_1 = require(\"@scure/btc-signer\");\r\nconst buffer_1 = require(\"buffer\");\r\nconst BitcoinWallet_1 = require(\"./BitcoinWallet\");\r\nclass SingleAddressBitcoinWallet extends BitcoinWallet_1.BitcoinWallet {\r\n    constructor(mempoolApi, network, addressDataOrWIF, feeMultiplier = 1.25, feeOverride) {\r\n        super(mempoolApi, network, feeMultiplier, feeOverride);\r\n        if (typeof (addressDataOrWIF) === \"string\") {\r\n            try {\r\n                this.privKey = (0, btc_signer_1.WIF)(network).decode(addressDataOrWIF);\r\n            }\r\n            catch (e) {\r\n                this.privKey = (0, btc_signer_1.WIF)().decode(addressDataOrWIF);\r\n            }\r\n            this.pubkey = (0, utils_1.pubECDSA)(this.privKey);\r\n            this.address = (0, btc_signer_1.getAddress)(\"wpkh\", this.privKey, network);\r\n        }\r\n        else {\r\n            this.address = addressDataOrWIF.address;\r\n            this.pubkey = buffer_1.Buffer.from(addressDataOrWIF.publicKey, \"hex\");\r\n        }\r\n        this.addressType = (0, BitcoinWallet_1.identifyAddressType)(this.address, network);\r\n    }\r\n    toBitcoinWalletAccounts() {\r\n        return [{\r\n                pubkey: buffer_1.Buffer.from(this.pubkey).toString(\"hex\"), address: this.address, addressType: this.addressType\r\n            }];\r\n    }\r\n    async sendTransaction(address, amount, feeRate) {\r\n        if (!this.privKey)\r\n            throw new Error(\"Not supported.\");\r\n        const { psbt } = await super._getPsbt(this.toBitcoinWalletAccounts(), address, Number(amount), feeRate);\r\n        psbt.sign(this.privKey);\r\n        psbt.finalize();\r\n        const txHex = buffer_1.Buffer.from(psbt.extract()).toString(\"hex\");\r\n        return await super._sendTransaction(txHex);\r\n    }\r\n    async fundPsbt(inputPsbt, feeRate) {\r\n        const { psbt } = await super._fundPsbt(this.toBitcoinWalletAccounts(), inputPsbt, feeRate);\r\n        if (psbt == null) {\r\n            throw new Error(\"Not enough balance!\");\r\n        }\r\n        return psbt;\r\n    }\r\n    async signPsbt(psbt, signInputs) {\r\n        if (!this.privKey)\r\n            throw new Error(\"Not supported.\");\r\n        for (let signInput of signInputs) {\r\n            psbt.signIdx(this.privKey, signInput);\r\n        }\r\n        return psbt;\r\n    }\r\n    async getTransactionFee(address, amount, feeRate) {\r\n        const { psbt, fee } = await super._getPsbt(this.toBitcoinWalletAccounts(), address, Number(amount), feeRate);\r\n        if (psbt == null)\r\n            return null;\r\n        return fee;\r\n    }\r\n    async getFundedPsbtFee(basePsbt, feeRate) {\r\n        const { psbt, fee } = await super._fundPsbt(this.toBitcoinWalletAccounts(), basePsbt, feeRate);\r\n        if (psbt == null)\r\n            return null;\r\n        return fee;\r\n    }\r\n    getReceiveAddress() {\r\n        return this.address;\r\n    }\r\n    getBalance() {\r\n        return this._getBalance(this.address);\r\n    }\r\n    getSpendableBalance(psbt, feeRate) {\r\n        return this._getSpendableBalance([{ address: this.address, addressType: this.addressType }], psbt, feeRate);\r\n    }\r\n    static generateRandomPrivateKey(network) {\r\n        return (0, btc_signer_1.WIF)(network).encode((0, utils_1.randomPrivateKeyBytes)());\r\n    }\r\n}\r\nexports.SingleAddressBitcoinWallet = SingleAddressBitcoinWallet;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IntermediaryError = void 0;\r\n/**\r\n * An error or inconsistency in the intermediary's returned data, this will blacklist the intermediary\r\n */\r\nclass IntermediaryError extends Error {\r\n    constructor(msg) {\r\n        super(msg);\r\n        // Set the prototype explicitly.\r\n        Object.setPrototypeOf(this, IntermediaryError.prototype);\r\n    }\r\n}\r\nexports.IntermediaryError = IntermediaryError;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.PaymentAuthError = void 0;\r\n/**\r\n * An error when the payment authorization returned by the intermediary is invalid\r\n */\r\nclass PaymentAuthError extends Error {\r\n    constructor(msg, code, data) {\r\n        super(msg);\r\n        this.data = data;\r\n        this.code = code;\r\n        // Set the prototype explicitly.\r\n        Object.setPrototypeOf(this, PaymentAuthError.prototype);\r\n    }\r\n    getCode() {\r\n        return this.code;\r\n    }\r\n    getData() {\r\n        return this.data;\r\n    }\r\n}\r\nexports.PaymentAuthError = PaymentAuthError;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UserError = void 0;\r\n/**\r\n * An error on the user side, such as invalid address provided\r\n */\r\nclass UserError extends Error {\r\n    constructor(msg) {\r\n        super(msg);\r\n        // Set the prototype explicitly.\r\n        Object.setPrototypeOf(this, UserError.prototype);\r\n    }\r\n}\r\nexports.UserError = UserError;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SwapType = void 0;\r\nvar SwapType;\r\n(function (SwapType) {\r\n    SwapType[SwapType[\"FROM_BTC\"] = 0] = \"FROM_BTC\";\r\n    SwapType[SwapType[\"FROM_BTCLN\"] = 1] = \"FROM_BTCLN\";\r\n    SwapType[SwapType[\"TO_BTC\"] = 2] = \"TO_BTC\";\r\n    SwapType[SwapType[\"TO_BTCLN\"] = 3] = \"TO_BTCLN\";\r\n    SwapType[SwapType[\"TRUSTED_FROM_BTC\"] = 4] = \"TRUSTED_FROM_BTC\";\r\n    SwapType[SwapType[\"TRUSTED_FROM_BTCLN\"] = 5] = \"TRUSTED_FROM_BTCLN\";\r\n    SwapType[SwapType[\"SPV_VAULT_FROM_BTC\"] = 6] = \"SPV_VAULT_FROM_BTC\";\r\n})(SwapType = exports.SwapType || (exports.SwapType = {}));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Intermediary = void 0;\r\nconst SwapType_1 = require(\"../swaps/enums/SwapType\");\r\nconst Utils_1 = require(\"../utils/Utils\");\r\nclass Intermediary {\r\n    constructor(url, addresses, services, reputation = {}) {\r\n        this.reputation = {};\r\n        this.liquidity = {};\r\n        this.url = url;\r\n        this.addresses = addresses;\r\n        this.services = services;\r\n        this.reputation = reputation;\r\n        this.swapBounds = {};\r\n        for (let _swapType in this.services) {\r\n            const swapType = parseInt(_swapType);\r\n            const serviceInfo = this.services[_swapType];\r\n            const btcBounds = { min: BigInt(serviceInfo.min), max: BigInt(serviceInfo.max) };\r\n            const isSend = swapType === SwapType_1.SwapType.TO_BTC || swapType === SwapType_1.SwapType.TO_BTCLN;\r\n            this.swapBounds[swapType] = {};\r\n            for (let chainIdentifier in serviceInfo.chainTokens) {\r\n                this.swapBounds[swapType][chainIdentifier] = {};\r\n                for (let tokenAddress of serviceInfo.chainTokens[chainIdentifier]) {\r\n                    this.swapBounds[swapType][chainIdentifier][tokenAddress] = {\r\n                        input: isSend ? { min: null, max: null } : btcBounds,\r\n                        output: !isSend ? { min: null, max: null } : btcBounds,\r\n                    };\r\n                }\r\n            }\r\n        }\r\n    }\r\n    getSwapLimits(swapType, chainId, tokenAddress) {\r\n        return this.swapBounds[swapType]?.[chainId]?.[tokenAddress];\r\n    }\r\n    /**\r\n     * Returns tokens supported by the intermediary, optionally constrained to the specific swap types\r\n     *\r\n     * @param chainIdentifier\r\n     * @param swapTypesArr\r\n     * @private\r\n     */\r\n    getSupportedTokens(chainIdentifier, swapTypesArr = [\r\n        SwapType_1.SwapType.TO_BTC,\r\n        SwapType_1.SwapType.TO_BTCLN,\r\n        SwapType_1.SwapType.FROM_BTC,\r\n        SwapType_1.SwapType.FROM_BTCLN,\r\n        SwapType_1.SwapType.SPV_VAULT_FROM_BTC\r\n    ]) {\r\n        const swapTypes = new Set(swapTypesArr);\r\n        let tokens = new Set();\r\n        swapTypes.forEach((swapType) => {\r\n            if (this.services[swapType] != null &&\r\n                this.services[swapType].chainTokens != null &&\r\n                this.services[swapType].chainTokens[chainIdentifier] != null)\r\n                this.services[swapType].chainTokens[chainIdentifier].forEach(token => tokens.add(token));\r\n        });\r\n        return tokens;\r\n    }\r\n    /**\r\n     * Fetches, returns and saves the reputation of the intermediary, either for all or just for a single token\r\n     *\r\n     * @param chainIdentifier\r\n     * @param swapContract\r\n     * @param tokens\r\n     * @param abortSignal\r\n     */\r\n    async getReputation(chainIdentifier, swapContract, tokens, abortSignal) {\r\n        const checkReputationTokens = tokens == null ?\r\n            this.getSupportedTokens(chainIdentifier, [SwapType_1.SwapType.TO_BTC, SwapType_1.SwapType.TO_BTCLN]) :\r\n            new Set(tokens);\r\n        const promises = [];\r\n        const reputation = {};\r\n        for (let token of checkReputationTokens) {\r\n            promises.push((0, Utils_1.tryWithRetries)(() => swapContract.getIntermediaryReputation(this.getAddress(chainIdentifier), token), null, null, abortSignal).then(result => {\r\n                reputation[token] = result;\r\n            }));\r\n        }\r\n        await Promise.all(promises);\r\n        this.reputation ??= {};\r\n        this.reputation[chainIdentifier] ??= {};\r\n        for (let key in reputation) {\r\n            this.reputation[chainIdentifier][key] = reputation[key];\r\n        }\r\n        return reputation;\r\n    }\r\n    /**\r\n     * Fetches, returns and saves the liquidity of the intermediaryfor a specific token\r\n     *\r\n     * @param chainIdentifier\r\n     * @param swapContract\r\n     * @param token\r\n     * @param abortSignal\r\n     */\r\n    async getLiquidity(chainIdentifier, swapContract, token, abortSignal) {\r\n        const result = await (0, Utils_1.tryWithRetries)(() => swapContract.getBalance(this.getAddress(chainIdentifier), token, true), null, null, abortSignal);\r\n        this.liquidity ??= {};\r\n        this.liquidity[chainIdentifier] ??= {};\r\n        this.liquidity[chainIdentifier][token] = result;\r\n        return result;\r\n    }\r\n    supportsChain(chainIdentifier) {\r\n        if (this.addresses[chainIdentifier] == null)\r\n            return false;\r\n        return this.getSupportedTokens(chainIdentifier).size !== 0;\r\n    }\r\n    getAddress(chainIdentifier) {\r\n        return this.addresses[chainIdentifier];\r\n    }\r\n}\r\nexports.Intermediary = Intermediary;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.verifySchema = exports.verifyField = exports.isOptionalField = exports.FieldTypeEnum = exports.parseBigInt = void 0;\r\nfunction parseBigInt(str) {\r\n    if (str == null)\r\n        return null;\r\n    if (typeof (str) !== \"string\" && typeof (str) !== \"number\")\r\n        return null;\r\n    try {\r\n        return BigInt(str);\r\n    }\r\n    catch (e) {\r\n        return null;\r\n    }\r\n}\r\nexports.parseBigInt = parseBigInt;\r\nvar FieldTypeEnum;\r\n(function (FieldTypeEnum) {\r\n    FieldTypeEnum[FieldTypeEnum[\"String\"] = 0] = \"String\";\r\n    FieldTypeEnum[FieldTypeEnum[\"Boolean\"] = 1] = \"Boolean\";\r\n    FieldTypeEnum[FieldTypeEnum[\"Number\"] = 2] = \"Number\";\r\n    FieldTypeEnum[FieldTypeEnum[\"BigInt\"] = 3] = \"BigInt\";\r\n    FieldTypeEnum[FieldTypeEnum[\"Any\"] = 4] = \"Any\";\r\n    FieldTypeEnum[FieldTypeEnum[\"StringOptional\"] = 100] = \"StringOptional\";\r\n    FieldTypeEnum[FieldTypeEnum[\"BooleanOptional\"] = 101] = \"BooleanOptional\";\r\n    FieldTypeEnum[FieldTypeEnum[\"NumberOptional\"] = 102] = \"NumberOptional\";\r\n    FieldTypeEnum[FieldTypeEnum[\"BigIntOptional\"] = 103] = \"BigIntOptional\";\r\n    FieldTypeEnum[FieldTypeEnum[\"AnyOptional\"] = 104] = \"AnyOptional\";\r\n})(FieldTypeEnum = exports.FieldTypeEnum || (exports.FieldTypeEnum = {}));\r\nfunction isAllOptional(schema) {\r\n    for (let key in schema) {\r\n        if (!isOptionalField(schema[key]))\r\n            return false;\r\n    }\r\n    return true;\r\n}\r\nfunction isOptionalField(type) {\r\n    if (typeof (type) === \"function\")\r\n        return type(undefined) != null;\r\n    if (typeof (type) === \"object\")\r\n        return isAllOptional(type);\r\n    return type >= 100;\r\n}\r\nexports.isOptionalField = isOptionalField;\r\nfunction verifyField(fieldType, val) {\r\n    const type = fieldType;\r\n    if (typeof (type) === \"function\") {\r\n        const result = type(val);\r\n        if (result == null)\r\n            return;\r\n        return result;\r\n    }\r\n    if (val == null && isOptionalField(type)) {\r\n        return null;\r\n    }\r\n    if (type === FieldTypeEnum.Any || type === FieldTypeEnum.AnyOptional) {\r\n        return val;\r\n    }\r\n    else if (type === FieldTypeEnum.Boolean || type === FieldTypeEnum.BooleanOptional) {\r\n        if (typeof (val) !== \"boolean\")\r\n            return;\r\n        return val;\r\n    }\r\n    else if (type === FieldTypeEnum.Number || type === FieldTypeEnum.NumberOptional) {\r\n        if (typeof (val) !== \"number\")\r\n            return;\r\n        if (isNaN(val))\r\n            return;\r\n        return val;\r\n    }\r\n    else if (type === FieldTypeEnum.BigInt || type === FieldTypeEnum.BigIntOptional) {\r\n        const result = parseBigInt(val);\r\n        if (result == null)\r\n            return;\r\n        return result;\r\n    }\r\n    else if (type === FieldTypeEnum.String || type === FieldTypeEnum.StringOptional) {\r\n        if (typeof (val) !== \"string\")\r\n            return;\r\n        return val;\r\n    }\r\n    else {\r\n        //Probably another request schema\r\n        const result = verifySchema(val, type);\r\n        if (result == null)\r\n            return;\r\n        return result;\r\n    }\r\n}\r\nexports.verifyField = verifyField;\r\nfunction verifySchema(req, schema) {\r\n    if (req == null)\r\n        return null;\r\n    const resultSchema = {};\r\n    for (let fieldName in schema) {\r\n        const val = req[fieldName];\r\n        const type = schema[fieldName];\r\n        if (typeof (type) === \"function\") {\r\n            const result = type(val);\r\n            if (result == null)\r\n                return null;\r\n            resultSchema[fieldName] = result;\r\n            continue;\r\n        }\r\n        if (val == null && isOptionalField(type)) {\r\n            resultSchema[fieldName] = null;\r\n            continue;\r\n        }\r\n        if (type === FieldTypeEnum.Any || type === FieldTypeEnum.AnyOptional) {\r\n            resultSchema[fieldName] = val;\r\n        }\r\n        else if (type === FieldTypeEnum.Boolean || type === FieldTypeEnum.BooleanOptional) {\r\n            if (typeof (val) !== \"boolean\")\r\n                return null;\r\n            resultSchema[fieldName] = val;\r\n        }\r\n        else if (type === FieldTypeEnum.Number || type === FieldTypeEnum.NumberOptional) {\r\n            if (typeof (val) !== \"number\")\r\n                return null;\r\n            if (isNaN(val))\r\n                return null;\r\n            resultSchema[fieldName] = val;\r\n        }\r\n        else if (type === FieldTypeEnum.BigInt || type === FieldTypeEnum.BigIntOptional) {\r\n            const result = parseBigInt(val);\r\n            if (result == null)\r\n                return null;\r\n            resultSchema[fieldName] = result;\r\n        }\r\n        else if (type === FieldTypeEnum.String || type === FieldTypeEnum.StringOptional) {\r\n            if (typeof (val) !== \"string\")\r\n                return null;\r\n            resultSchema[fieldName] = val;\r\n        }\r\n        else {\r\n            //Probably another request schema\r\n            const result = verifySchema(val, type);\r\n            if (result == null)\r\n                return null;\r\n            resultSchema[fieldName] = result;\r\n        }\r\n    }\r\n    return resultSchema;\r\n}\r\nexports.verifySchema = verifySchema;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ParamEncoder = void 0;\r\nconst buffer_1 = require(\"buffer\");\r\nclass ParamEncoder {\r\n    constructor(write, end) {\r\n        this.writeFN = write;\r\n        this.endFN = end;\r\n    }\r\n    /**\r\n     * Write a set of parameters to the underlying sink\r\n     *\r\n     * @param data\r\n     */\r\n    writeParams(data) {\r\n        const serialized = buffer_1.Buffer.from(JSON.stringify(data));\r\n        const frameLengthBuffer = buffer_1.Buffer.alloc(4);\r\n        frameLengthBuffer.writeUint32LE(serialized.length);\r\n        return this.writeFN(buffer_1.Buffer.concat([\r\n            frameLengthBuffer,\r\n            serialized\r\n        ]));\r\n    }\r\n    /**\r\n     * Cancels the underlying sink and encoder\r\n     */\r\n    end() {\r\n        return this.endFN();\r\n    }\r\n}\r\nexports.ParamEncoder = ParamEncoder;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.StreamParamEncoder = void 0;\r\nconst ParamEncoder_1 = require(\"../ParamEncoder\");\r\nclass StreamParamEncoder extends ParamEncoder_1.ParamEncoder {\r\n    constructor() {\r\n        let stream = new TransformStream();\r\n        let writeStream = stream.writable.getWriter();\r\n        writeStream.closed.then(() => this.closed = true);\r\n        super(writeStream.write.bind(writeStream), () => {\r\n            if (this.closed)\r\n                return Promise.resolve();\r\n            this.closed = true;\r\n            return writeStream.close();\r\n        });\r\n        this.closed = false;\r\n        this.stream = stream;\r\n    }\r\n    /**\r\n     * Returns the readable stream to be passed to the fetch API\r\n     */\r\n    getReadableStream() {\r\n        return this.stream.readable;\r\n    }\r\n}\r\nexports.StreamParamEncoder = StreamParamEncoder;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ParamDecoder = void 0;\r\nconst buffer_1 = require(\"buffer\");\r\nclass ParamDecoder {\r\n    constructor() {\r\n        this.frameHeader = null;\r\n        this.frameData = [];\r\n        this.frameDataLength = 0;\r\n        this.closed = false;\r\n        this.params = {};\r\n    }\r\n    /**\r\n     * Called when a frame is fully ready such that it can be parsed\r\n     *\r\n     * @param data Frame data\r\n     * @private\r\n     */\r\n    onFrameRead(data) {\r\n        const obj = JSON.parse(data.toString());\r\n        for (let key in obj) {\r\n            if (this.params[key] == null) {\r\n                this.params[key] = {\r\n                    promise: Promise.resolve(obj[key]),\r\n                    resolve: null,\r\n                    reject: null\r\n                };\r\n            }\r\n            else {\r\n                if (this.params[key].resolve != null) {\r\n                    this.params[key].resolve(obj[key]);\r\n                    this.params[key].resolve = null;\r\n                    this.params[key].reject = null;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Called when data is read from the underlying source\r\n     *\r\n     * @param data Data that has been read from the underlying source\r\n     * @protected\r\n     */\r\n    onData(data) {\r\n        let leavesBuffer = data;\r\n        while (leavesBuffer != null && leavesBuffer.length > 0) {\r\n            if (this.frameHeader == null) {\r\n                if (leavesBuffer.length <= 4) {\r\n                    this.frameHeader = leavesBuffer;\r\n                    leavesBuffer = null;\r\n                }\r\n                else {\r\n                    this.frameHeader = leavesBuffer.subarray(0, 4);\r\n                    leavesBuffer = leavesBuffer.subarray(4);\r\n                }\r\n            }\r\n            else if (this.frameHeader.length < 4) {\r\n                const requiredLen = 4 - this.frameHeader.length;\r\n                if (leavesBuffer.length <= requiredLen) {\r\n                    this.frameHeader = buffer_1.Buffer.concat([this.frameHeader, leavesBuffer]);\r\n                    leavesBuffer = null;\r\n                }\r\n                else {\r\n                    this.frameHeader = buffer_1.Buffer.concat([this.frameHeader, leavesBuffer.subarray(0, requiredLen)]);\r\n                    leavesBuffer = leavesBuffer.subarray(requiredLen);\r\n                }\r\n            }\r\n            if (leavesBuffer == null)\r\n                continue;\r\n            if (this.frameHeader == null || this.frameHeader.length < 4)\r\n                continue;\r\n            const frameLength = this.frameHeader.readUint32LE();\r\n            const requiredLen = frameLength - this.frameDataLength;\r\n            if (leavesBuffer.length <= requiredLen) {\r\n                this.frameData.push(leavesBuffer);\r\n                this.frameDataLength += leavesBuffer.length;\r\n                leavesBuffer = null;\r\n            }\r\n            else {\r\n                this.frameData.push(leavesBuffer.subarray(0, requiredLen));\r\n                this.frameDataLength += requiredLen;\r\n                leavesBuffer = leavesBuffer.subarray(requiredLen);\r\n            }\r\n            if (frameLength === this.frameDataLength) {\r\n                //Message read success\r\n                this.onFrameRead(buffer_1.Buffer.concat(this.frameData));\r\n                this.frameHeader = null;\r\n                this.frameData = [];\r\n                this.frameDataLength = 0;\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Called when the underlying source ends/closes/cancels\r\n     * @protected\r\n     */\r\n    onEnd() {\r\n        for (let key in this.params) {\r\n            if (this.params[key].reject != null) {\r\n                this.params[key].reject(new Error(\"EOF before field seen!\"));\r\n            }\r\n        }\r\n        this.closed = true;\r\n    }\r\n    /**\r\n     * Called when an error happens with the underlying stream\r\n     *\r\n     * @param e Error\r\n     * @protected\r\n     */\r\n    onError(e) {\r\n        for (let key in this.params) {\r\n            if (this.params[key].reject != null) {\r\n                this.params[key].reject(e);\r\n            }\r\n        }\r\n        this.closed = true;\r\n    }\r\n    getParam(key) {\r\n        if (this.params[key] == null) {\r\n            if (this.closed)\r\n                return Promise.reject(new Error(\"Stream already closed without param received!\"));\r\n            let resolve;\r\n            let reject;\r\n            const promise = new Promise((_resolve, _reject) => {\r\n                resolve = _resolve;\r\n                reject = _reject;\r\n            });\r\n            this.params[key] = {\r\n                resolve,\r\n                reject,\r\n                promise\r\n            };\r\n        }\r\n        return this.params[key].promise;\r\n    }\r\n}\r\nexports.ParamDecoder = ParamDecoder;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ResponseParamDecoder = void 0;\r\nconst ParamDecoder_1 = require(\"../ParamDecoder\");\r\nconst buffer_1 = require(\"buffer\");\r\nconst Utils_1 = require(\"../../Utils\");\r\nconst logger = (0, Utils_1.getLogger)(\"ResponseParamDecoder: \");\r\nclass ResponseParamDecoder extends ParamDecoder_1.ParamDecoder {\r\n    constructor(resp, abortSignal) {\r\n        super();\r\n        this.abortSignal = abortSignal;\r\n        try {\r\n            //Read from stream\r\n            this.reader = resp.body.getReader();\r\n            this.readResponse();\r\n        }\r\n        catch (e) {\r\n            //Read in one piece\r\n            resp.arrayBuffer().then(respBuffer => {\r\n                super.onData(buffer_1.Buffer.from(respBuffer));\r\n                super.onEnd();\r\n            }).catch(e => {\r\n                super.onError(e);\r\n            });\r\n        }\r\n        if (abortSignal != null)\r\n            abortSignal.addEventListener(\"abort\", () => {\r\n                super.onError(abortSignal.reason);\r\n                if (!this.reader.closed)\r\n                    this.reader.cancel(abortSignal.reason);\r\n            });\r\n    }\r\n    /**\r\n     * Keeps reading the response until the reader closes\r\n     * @private\r\n     */\r\n    async readResponse() {\r\n        while (true) {\r\n            const readResp = await this.reader.read().catch(e => {\r\n                logger.error(\"readResponse(): Error reading response: \", e);\r\n                return null;\r\n            });\r\n            if (this.abortSignal != null && this.abortSignal.aborted)\r\n                return;\r\n            if (readResp == null || readResp.done) {\r\n                super.onEnd();\r\n                return;\r\n            }\r\n            super.onData(buffer_1.Buffer.from(readResp.value));\r\n        }\r\n    }\r\n}\r\nexports.ResponseParamDecoder = ResponseParamDecoder;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.streamingFetchPromise = void 0;\r\nconst SchemaVerifier_1 = require(\"../SchemaVerifier\");\r\nconst RequestError_1 = require(\"../../../errors/RequestError\");\r\nconst Utils_1 = require(\"../../Utils\");\r\nconst StreamParamEncoder_1 = require(\"./StreamParamEncoder\");\r\nconst ResponseParamDecoder_1 = require(\"./ResponseParamDecoder\");\r\nconst logger = (0, Utils_1.getLogger)(\"StreamingFetch: \");\r\n//https://developer.chrome.com/docs/capabilities/web-apis/fetch-streaming-requests#feature_detection\r\nconst supportsRequestStreams = (() => {\r\n    try {\r\n        let duplexAccessed = false;\r\n        const request = new Request('https://example.com/', {\r\n            body: new ReadableStream(),\r\n            method: 'POST',\r\n            get duplex() {\r\n                duplexAccessed = true;\r\n                return 'half';\r\n            },\r\n        });\r\n        const hasContentType = request.headers.has('Content-Type');\r\n        return duplexAccessed && !hasContentType;\r\n    }\r\n    catch (e) {\r\n        logger.error(\"supportsRequestStreams: Error checking environment support for HTTP request stream\", e);\r\n        return false;\r\n    }\r\n})();\r\nlogger.info(\"Environment supports request stream: \" + supportsRequestStreams);\r\n/**\r\n * Sends a POST request to the specified URL in a streaming request/response mode\r\n *\r\n * @param url URL to send the request to\r\n * @param body An object containing properties that should be sent to the server, can be Promise or any\r\n * @param schema Schema of the response that should be received from the server\r\n * @param timeout Timeout in millseconds for the request to succeed & all its response properties to resolve\r\n * @param signal Abort signal\r\n * @param streamRequest Whether the request should be streamed or not\r\n * @throws {RequestError} When the response code is not 200\r\n */\r\nasync function streamingFetchPromise(url, body, schema, timeout, signal, streamRequest) {\r\n    if (streamRequest == null)\r\n        streamRequest = supportsRequestStreams;\r\n    if (timeout != null)\r\n        signal = (0, Utils_1.timeoutSignal)(timeout, new Error(\"Network request timed out\"), signal);\r\n    const init = {\r\n        method: \"POST\",\r\n        headers: {}\r\n    };\r\n    const startTime = Date.now();\r\n    const immediateValues = {};\r\n    const promises = [];\r\n    if (!streamRequest) {\r\n        for (let key in body) {\r\n            if (body[key] instanceof Promise) {\r\n                promises.push(body[key].then((val) => {\r\n                    immediateValues[key] = val;\r\n                }));\r\n            }\r\n            else {\r\n                immediateValues[key] = body[key];\r\n            }\r\n        }\r\n        try {\r\n            await Promise.all(promises);\r\n        }\r\n        catch (e) {\r\n            e._inputPromiseError = true;\r\n            throw e;\r\n        }\r\n        if (signal != null)\r\n            signal.throwIfAborted();\r\n        logger.debug(url + \": Sending request (\" + (Date.now() - startTime) + \"ms) (non-streaming): \", immediateValues);\r\n        init.body = JSON.stringify(immediateValues);\r\n        init.headers['content-type'] = \"application/json\";\r\n    }\r\n    else {\r\n        const outputStream = new StreamParamEncoder_1.StreamParamEncoder();\r\n        let hasPromiseInBody = false;\r\n        for (let key in body) {\r\n            if (body[key] instanceof Promise) {\r\n                promises.push(body[key].then((val) => {\r\n                    logger.debug(url + \": Send param (\" + (Date.now() - startTime) + \"ms) (streaming): \", { [key]: val });\r\n                    return outputStream.writeParams({\r\n                        [key]: val\r\n                    });\r\n                }));\r\n                hasPromiseInBody = true;\r\n            }\r\n            else {\r\n                immediateValues[key] = body[key];\r\n            }\r\n        }\r\n        if (hasPromiseInBody) {\r\n            init.body = outputStream.getReadableStream();\r\n            init.headers['content-type'] = \"application/x-multiple-json\";\r\n            init.duplex = \"half\";\r\n            logger.debug(url + \": Sending request (\" + (Date.now() - startTime) + \"ms) (streaming): \", immediateValues);\r\n            promises.push(outputStream.writeParams(immediateValues));\r\n            const abortController = (0, Utils_1.extendAbortController)(signal);\r\n            signal = abortController.signal;\r\n            Promise.all(promises).then(() => outputStream.end()).catch(e => {\r\n                e._inputPromiseError = true;\r\n                abortController.abort(e);\r\n            });\r\n            signal.addEventListener(\"abort\", () => outputStream.end());\r\n        }\r\n        else {\r\n            logger.debug(url + \": Sending request (\" + (Date.now() - startTime) + \"ms) (non-streaming): \", immediateValues);\r\n            init.body = JSON.stringify(immediateValues);\r\n            init.headers['content-type'] = \"application/json\";\r\n        }\r\n    }\r\n    if (signal != null)\r\n        init.signal = signal;\r\n    init.headers['accept'] = \"application/x-multiple-json\";\r\n    const resp = await fetch(url, init).catch(e => {\r\n        if (init.signal != null && e.name === \"AbortError\") {\r\n            throw init.signal.reason;\r\n        }\r\n        else {\r\n            if (e.message != null)\r\n                e.message += streamRequest ? \" (streaming req)\" : \" (non streaming req)\";\r\n            throw e;\r\n        }\r\n    });\r\n    logger.debug(url + \": Response status (\" + (Date.now() - startTime) + \"ms) \" + (streamRequest ? \"(streaming req)\" : \"(non streaming req)\") + \": \", resp.status);\r\n    if (resp.status !== 200) {\r\n        let respTxt;\r\n        try {\r\n            respTxt = await resp.text();\r\n        }\r\n        catch (e) {\r\n            throw new RequestError_1.RequestError(resp.statusText, resp.status);\r\n        }\r\n        throw new RequestError_1.RequestError(respTxt, resp.status);\r\n    }\r\n    if (resp.headers.get(\"content-type\") !== \"application/x-multiple-json\") {\r\n        const respBody = await resp.json();\r\n        logger.debug(url + \": Response read (\" + (Date.now() - startTime) + \"ms) (non streaming resp): \", respBody);\r\n        return (0, Utils_1.objectMap)(schema, (schemaValue, key) => {\r\n            const value = respBody[key];\r\n            const result = (0, SchemaVerifier_1.verifyField)(schemaValue, value);\r\n            if (result === undefined) {\r\n                return Promise.reject(new Error(\"Invalid field value\"));\r\n            }\r\n            else {\r\n                return Promise.resolve(result);\r\n            }\r\n        });\r\n    }\r\n    else {\r\n        const decoder = new ResponseParamDecoder_1.ResponseParamDecoder(resp, init.signal);\r\n        return (0, Utils_1.objectMap)(schema, (schemaValue, key) => decoder.getParam(key).catch(e => {\r\n            if ((0, SchemaVerifier_1.isOptionalField)(schemaValue))\r\n                return undefined;\r\n            throw e;\r\n        }).then(value => {\r\n            logger.debug(url + \": Response frame read (\" + (Date.now() - startTime) + \"ms) (streaming resp): \", { [key]: value });\r\n            const result = (0, SchemaVerifier_1.verifyField)(schemaValue, value);\r\n            if (result === undefined) {\r\n                return Promise.reject(new Error(\"Invalid field value\"));\r\n            }\r\n            else {\r\n                return result;\r\n            }\r\n        }));\r\n    }\r\n}\r\nexports.streamingFetchPromise = streamingFetchPromise;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IntermediaryAPI = exports.PaymentAuthorizationResponseCodes = exports.RefundAuthorizationResponseCodes = void 0;\r\nconst RequestError_1 = require(\"../errors/RequestError\");\r\nconst SchemaVerifier_1 = require(\"../utils/paramcoders/SchemaVerifier\");\r\nconst StreamingFetchPromise_1 = require(\"../utils/paramcoders/client/StreamingFetchPromise\");\r\nconst Utils_1 = require(\"../utils/Utils\");\r\nvar RefundAuthorizationResponseCodes;\r\n(function (RefundAuthorizationResponseCodes) {\r\n    RefundAuthorizationResponseCodes[RefundAuthorizationResponseCodes[\"EXPIRED\"] = 20010] = \"EXPIRED\";\r\n    RefundAuthorizationResponseCodes[RefundAuthorizationResponseCodes[\"REFUND_DATA\"] = 20000] = \"REFUND_DATA\";\r\n    RefundAuthorizationResponseCodes[RefundAuthorizationResponseCodes[\"NOT_FOUND\"] = 20007] = \"NOT_FOUND\";\r\n    RefundAuthorizationResponseCodes[RefundAuthorizationResponseCodes[\"PENDING\"] = 20008] = \"PENDING\";\r\n    RefundAuthorizationResponseCodes[RefundAuthorizationResponseCodes[\"PAID\"] = 20006] = \"PAID\";\r\n})(RefundAuthorizationResponseCodes = exports.RefundAuthorizationResponseCodes || (exports.RefundAuthorizationResponseCodes = {}));\r\nvar PaymentAuthorizationResponseCodes;\r\n(function (PaymentAuthorizationResponseCodes) {\r\n    PaymentAuthorizationResponseCodes[PaymentAuthorizationResponseCodes[\"AUTH_DATA\"] = 10000] = \"AUTH_DATA\";\r\n    PaymentAuthorizationResponseCodes[PaymentAuthorizationResponseCodes[\"EXPIRED\"] = 10001] = \"EXPIRED\";\r\n    PaymentAuthorizationResponseCodes[PaymentAuthorizationResponseCodes[\"PAID\"] = 10002] = \"PAID\";\r\n    PaymentAuthorizationResponseCodes[PaymentAuthorizationResponseCodes[\"PENDING\"] = 10003] = \"PENDING\";\r\n    PaymentAuthorizationResponseCodes[PaymentAuthorizationResponseCodes[\"ALREADY_COMMITTED\"] = 10004] = \"ALREADY_COMMITTED\";\r\n})(PaymentAuthorizationResponseCodes = exports.PaymentAuthorizationResponseCodes || (exports.PaymentAuthorizationResponseCodes = {}));\r\nconst SwapResponseSchema = {\r\n    data: SchemaVerifier_1.FieldTypeEnum.Any,\r\n    prefix: SchemaVerifier_1.FieldTypeEnum.String,\r\n    timeout: SchemaVerifier_1.FieldTypeEnum.String,\r\n    signature: SchemaVerifier_1.FieldTypeEnum.String\r\n};\r\n/////////////////////////\r\n///// To BTC\r\nconst ToBTCResponseSchema = {\r\n    amount: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    address: SchemaVerifier_1.FieldTypeEnum.String,\r\n    satsPervByte: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    networkFee: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    swapFee: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    totalFee: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    total: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    minRequiredExpiry: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    ...SwapResponseSchema\r\n};\r\n/////////////////////////\r\n///// To BTCLN\r\nconst ToBTCLNResponseSchema = {\r\n    maxFee: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    swapFee: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    total: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    confidence: SchemaVerifier_1.FieldTypeEnum.Number,\r\n    address: SchemaVerifier_1.FieldTypeEnum.String,\r\n    routingFeeSats: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    ...SwapResponseSchema\r\n};\r\nconst ToBTCLNPrepareExactInSchema = {\r\n    amount: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    reqId: SchemaVerifier_1.FieldTypeEnum.String\r\n};\r\n/////////////////////////\r\n///// From BTC\r\nconst FromBTCResponseSchema = {\r\n    amount: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    btcAddress: SchemaVerifier_1.FieldTypeEnum.String,\r\n    address: SchemaVerifier_1.FieldTypeEnum.String,\r\n    swapFee: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    total: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    confirmations: SchemaVerifier_1.FieldTypeEnum.NumberOptional,\r\n    ...SwapResponseSchema\r\n};\r\n/////////////////////////\r\n///// From BTCLN\r\nconst FromBTCLNResponseSchema = {\r\n    pr: SchemaVerifier_1.FieldTypeEnum.String,\r\n    swapFee: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    total: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    intermediaryKey: SchemaVerifier_1.FieldTypeEnum.String,\r\n    securityDeposit: SchemaVerifier_1.FieldTypeEnum.BigInt\r\n};\r\n/////////////////////////\r\n///// Spv vault from BTC\r\nconst SpvFromBTCPrepareResponseSchema = {\r\n    quoteId: SchemaVerifier_1.FieldTypeEnum.String,\r\n    expiry: SchemaVerifier_1.FieldTypeEnum.Number,\r\n    address: SchemaVerifier_1.FieldTypeEnum.String,\r\n    vaultId: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    vaultBtcAddress: SchemaVerifier_1.FieldTypeEnum.String,\r\n    btcAddress: SchemaVerifier_1.FieldTypeEnum.String,\r\n    btcUtxo: SchemaVerifier_1.FieldTypeEnum.String,\r\n    btcFeeRate: SchemaVerifier_1.FieldTypeEnum.Number,\r\n    btcAmount: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    btcAmountSwap: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    btcAmountGas: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    total: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    totalGas: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    totalFeeBtc: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    swapFeeBtc: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    swapFee: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    gasSwapFeeBtc: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    gasSwapFee: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    callerFeeShare: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    frontingFeeShare: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    executionFeeShare: SchemaVerifier_1.FieldTypeEnum.BigInt\r\n};\r\nconst SpvFromBTCInitResponseSchema = {\r\n    txId: SchemaVerifier_1.FieldTypeEnum.String\r\n};\r\nclass IntermediaryAPI {\r\n    /**\r\n     * Returns the information about a specific intermediary\r\n     *\r\n     * @param baseUrl Base URL of the intermediary\r\n     * @param timeout Timeout in milliseconds for the HTTP request\r\n     * @param abortSignal\r\n     *\r\n     * @throws {RequestError} If non-200 http response code is returned\r\n     * @throws {Error} If the supplied nonce doesn't match the response\r\n     */\r\n    static async getIntermediaryInfo(baseUrl, timeout, abortSignal) {\r\n        const nonce = (0, Utils_1.randomBytes)(32).toString(\"hex\");\r\n        const response = await (0, Utils_1.httpPost)(baseUrl + \"/info\", {\r\n            nonce,\r\n        }, timeout, abortSignal);\r\n        const info = JSON.parse(response.envelope);\r\n        if (nonce !== info.nonce)\r\n            throw new Error(\"Invalid response - nonce\");\r\n        return response;\r\n    }\r\n    /**\r\n     * Returns the information about an outcome of the To BTC swap\r\n     *\r\n     * @param url URL of the intermediary\r\n     * @param paymentHash Payment hash of the swap\r\n     * @param sequence Swap's sequence number\r\n     * @param timeout Timeout in milliseconds for the HTTP request\r\n     * @param abortSignal\r\n     *\r\n     * @throws {RequestError} If non-200 http response code is returned\r\n     */\r\n    static async getRefundAuthorization(url, paymentHash, sequence, timeout, abortSignal) {\r\n        return (0, Utils_1.tryWithRetries)(() => (0, Utils_1.httpGet)(url + \"/getRefundAuthorization\" +\r\n            \"?paymentHash=\" + encodeURIComponent(paymentHash) +\r\n            \"&sequence=\" + encodeURIComponent(sequence.toString(10)), timeout, abortSignal), null, RequestError_1.RequestError, abortSignal);\r\n    }\r\n    /**\r\n     * Returns the information about the payment of the From BTCLN swaps\r\n     *\r\n     * @param url URL of the intermediary\r\n     * @param paymentHash Payment hash of the swap\r\n     * @param timeout Timeout in milliseconds for the HTTP request\r\n     * @param abortSignal\r\n     *\r\n     * @throws {RequestError} If non-200 http response code is returned\r\n     */\r\n    static async getPaymentAuthorization(url, paymentHash, timeout, abortSignal) {\r\n        return (0, Utils_1.tryWithRetries)(() => (0, Utils_1.httpGet)(url + \"/getInvoicePaymentAuth\" +\r\n            \"?paymentHash=\" + encodeURIComponent(paymentHash), timeout, abortSignal), null, RequestError_1.RequestError, abortSignal);\r\n    }\r\n    /**\r\n     * Initiate To BTC swap with an intermediary\r\n     *\r\n     * @param chainIdentifier\r\n     * @param baseUrl Base URL of the intermediary\r\n     * @param init Swap initialization parameters\r\n     * @param timeout Timeout in milliseconds for the HTTP request\r\n     * @param abortSignal\r\n     * @param streamRequest Whether to force streaming (or not streaming) the request, default is autodetect\r\n     *\r\n     * @throws {RequestError} If non-200 http response code is returned\r\n     */\r\n    static initToBTC(chainIdentifier, baseUrl, init, timeout, abortSignal, streamRequest) {\r\n        const responseBodyPromise = (0, StreamingFetchPromise_1.streamingFetchPromise)(baseUrl + \"/tobtc/payInvoice?chain=\" + encodeURIComponent(chainIdentifier), {\r\n            ...init.additionalParams,\r\n            address: init.btcAddress,\r\n            amount: init.amount.toString(10),\r\n            exactIn: init.exactIn,\r\n            confirmationTarget: init.confirmationTarget,\r\n            confirmations: init.confirmations,\r\n            nonce: init.nonce.toString(10),\r\n            token: init.token,\r\n            offerer: init.offerer,\r\n            feeRate: init.feeRate\r\n        }, {\r\n            code: SchemaVerifier_1.FieldTypeEnum.Number,\r\n            msg: SchemaVerifier_1.FieldTypeEnum.String,\r\n            data: SchemaVerifier_1.FieldTypeEnum.AnyOptional,\r\n            signDataPrefetch: SchemaVerifier_1.FieldTypeEnum.AnyOptional\r\n        }, timeout, abortSignal, streamRequest);\r\n        return {\r\n            signDataPrefetch: responseBodyPromise.then(responseBody => responseBody.signDataPrefetch),\r\n            response: responseBodyPromise.then((responseBody) => Promise.all([\r\n                responseBody.code,\r\n                responseBody.msg,\r\n                responseBody.data,\r\n            ])).then(([code, msg, data]) => {\r\n                if (code !== 20000) {\r\n                    throw RequestError_1.RequestError.parse(JSON.stringify({ code, msg, data }), 400);\r\n                }\r\n                return (0, SchemaVerifier_1.verifySchema)(data, ToBTCResponseSchema);\r\n            })\r\n        };\r\n    }\r\n    /**\r\n     * Initiate From BTC swap with an intermediary\r\n     *\r\n     * @param chainIdentifier\r\n     * @param baseUrl Base URL of the intermediary\r\n     * @param depositToken\r\n     * @param init Swap initialization parameters\r\n     * @param timeout Timeout in milliseconds for the HTTP request\r\n     * @param abortSignal\r\n     * @param streamRequest Whether to force streaming (or not streaming) the request, default is autodetect\r\n     *\r\n     * @throws {RequestError} If non-200 http response code is returned\r\n     */\r\n    static initFromBTC(chainIdentifier, baseUrl, depositToken, init, timeout, abortSignal, streamRequest) {\r\n        const responseBodyPromise = (0, StreamingFetchPromise_1.streamingFetchPromise)(baseUrl + \"/frombtc/getAddress?chain=\" + encodeURIComponent(chainIdentifier) + \"&depositToken=\" + encodeURIComponent(depositToken), {\r\n            ...init.additionalParams,\r\n            address: init.claimer,\r\n            amount: init.amount.toString(10),\r\n            token: init.token,\r\n            exactOut: init.exactOut,\r\n            sequence: init.sequence.toString(10),\r\n            claimerBounty: init.claimerBounty.then(claimerBounty => {\r\n                return {\r\n                    feePerBlock: claimerBounty.feePerBlock.toString(10),\r\n                    safetyFactor: claimerBounty.safetyFactor,\r\n                    startTimestamp: claimerBounty.startTimestamp.toString(10),\r\n                    addBlock: claimerBounty.addBlock,\r\n                    addFee: claimerBounty.addFee.toString(10)\r\n                };\r\n            }),\r\n            feeRate: init.feeRate\r\n        }, {\r\n            code: SchemaVerifier_1.FieldTypeEnum.Number,\r\n            msg: SchemaVerifier_1.FieldTypeEnum.String,\r\n            data: SchemaVerifier_1.FieldTypeEnum.AnyOptional,\r\n            signDataPrefetch: SchemaVerifier_1.FieldTypeEnum.AnyOptional\r\n        }, timeout, abortSignal, streamRequest);\r\n        return {\r\n            signDataPrefetch: responseBodyPromise.then(responseBody => responseBody.signDataPrefetch),\r\n            response: responseBodyPromise.then((responseBody) => Promise.all([\r\n                responseBody.code,\r\n                responseBody.msg,\r\n                responseBody.data,\r\n            ])).then(([code, msg, data]) => {\r\n                if (code !== 20000) {\r\n                    throw RequestError_1.RequestError.parse(JSON.stringify({ code, msg, data }), 400);\r\n                }\r\n                return (0, SchemaVerifier_1.verifySchema)(data, FromBTCResponseSchema);\r\n            })\r\n        };\r\n    }\r\n    /**\r\n     * Initiate From BTCLN swap with an intermediary\r\n     *\r\n     * @param chainIdentifier\r\n     * @param baseUrl Base URL of the intermediary\r\n     * @param depositToken\r\n     * @param init Swap initialization parameters\r\n     * @param timeout Timeout in milliseconds for the HTTP request\r\n     * @param abortSignal\r\n     * @param streamRequest Whether to force streaming (or not streaming) the request, default is autodetect\r\n     *\r\n     * @throws {RequestError} If non-200 http response code is returned\r\n     */\r\n    static initFromBTCLN(chainIdentifier, baseUrl, depositToken, init, timeout, abortSignal, streamRequest) {\r\n        const responseBodyPromise = (0, StreamingFetchPromise_1.streamingFetchPromise)(baseUrl + \"/frombtcln/createInvoice?chain=\" + encodeURIComponent(chainIdentifier) + \"&depositToken=\" + encodeURIComponent(depositToken), {\r\n            ...init.additionalParams,\r\n            paymentHash: init.paymentHash.toString(\"hex\"),\r\n            amount: init.amount.toString(),\r\n            address: init.claimer,\r\n            token: init.token,\r\n            descriptionHash: init.descriptionHash == null ? null : init.descriptionHash.toString(\"hex\"),\r\n            exactOut: init.exactOut,\r\n            feeRate: init.feeRate\r\n        }, {\r\n            code: SchemaVerifier_1.FieldTypeEnum.Number,\r\n            msg: SchemaVerifier_1.FieldTypeEnum.String,\r\n            data: SchemaVerifier_1.FieldTypeEnum.AnyOptional,\r\n            lnPublicKey: SchemaVerifier_1.FieldTypeEnum.StringOptional\r\n        }, timeout, abortSignal, streamRequest);\r\n        return {\r\n            lnPublicKey: responseBodyPromise.then(responseBody => responseBody.lnPublicKey),\r\n            response: responseBodyPromise.then((responseBody) => Promise.all([\r\n                responseBody.code,\r\n                responseBody.msg,\r\n                responseBody.data,\r\n            ])).then(([code, msg, data]) => {\r\n                if (code !== 20000) {\r\n                    throw RequestError_1.RequestError.parse(JSON.stringify({ code, msg, data }), 400);\r\n                }\r\n                return (0, SchemaVerifier_1.verifySchema)(data, FromBTCLNResponseSchema);\r\n            })\r\n        };\r\n    }\r\n    /**\r\n     * Initiate To BTCLN swap with an intermediary\r\n     *\r\n     * @param chainIdentifier\r\n     * @param baseUrl Base URL of the intermediary\r\n     * @param init Swap initialization parameters\r\n     * @param timeout Timeout in milliseconds for the HTTP request\r\n     * @param abortSignal\r\n     * @param streamRequest Whether to force streaming (or not streaming) the request, default is autodetect\r\n     *\r\n     * @throws {RequestError} If non-200 http response code is returned\r\n     */\r\n    static initToBTCLN(chainIdentifier, baseUrl, init, timeout, abortSignal, streamRequest) {\r\n        const responseBodyPromise = (0, StreamingFetchPromise_1.streamingFetchPromise)(baseUrl + \"/tobtcln/payInvoice?chain=\" + encodeURIComponent(chainIdentifier), {\r\n            exactIn: false,\r\n            ...init.additionalParams,\r\n            pr: init.pr,\r\n            maxFee: init.maxFee.toString(10),\r\n            expiryTimestamp: init.expiryTimestamp.toString(10),\r\n            token: init.token,\r\n            offerer: init.offerer,\r\n            feeRate: init.feeRate,\r\n            amount: null\r\n        }, {\r\n            code: SchemaVerifier_1.FieldTypeEnum.Number,\r\n            msg: SchemaVerifier_1.FieldTypeEnum.String,\r\n            data: SchemaVerifier_1.FieldTypeEnum.AnyOptional,\r\n            signDataPrefetch: SchemaVerifier_1.FieldTypeEnum.AnyOptional\r\n        }, timeout, abortSignal, streamRequest);\r\n        return {\r\n            signDataPrefetch: responseBodyPromise.then(responseBody => responseBody.signDataPrefetch),\r\n            response: responseBodyPromise.then((responseBody) => Promise.all([\r\n                responseBody.code,\r\n                responseBody.msg,\r\n                responseBody.data,\r\n            ])).then(([code, msg, data]) => {\r\n                if (code !== 20000) {\r\n                    throw RequestError_1.RequestError.parse(JSON.stringify({ code, msg, data }), 400);\r\n                }\r\n                return (0, SchemaVerifier_1.verifySchema)(data, ToBTCLNResponseSchema);\r\n            })\r\n        };\r\n    }\r\n    /**\r\n     * Initiate To BTCLN exact in swap with an intermediary\r\n     *\r\n     * @param baseUrl Base URL of the intermediary\r\n     * @param init Swap initialization parameters\r\n     * @param timeout Timeout in milliseconds for the HTTP request\r\n     * @param abortSignal\r\n     * @param streamRequest Whether to force streaming (or not streaming) the request, default is autodetect\r\n     *\r\n     * @throws {RequestError} If non-200 http response code is returned\r\n     */\r\n    static async initToBTCLNExactIn(baseUrl, init, timeout, abortSignal, streamRequest) {\r\n        const responseBody = await (0, StreamingFetchPromise_1.streamingFetchPromise)(baseUrl + \"/tobtcln/payInvoiceExactIn\", {\r\n            ...init.additionalParams,\r\n            pr: init.pr,\r\n            reqId: init.reqId,\r\n            feeRate: init.feeRate\r\n        }, {\r\n            code: SchemaVerifier_1.FieldTypeEnum.Number,\r\n            msg: SchemaVerifier_1.FieldTypeEnum.String,\r\n            data: SchemaVerifier_1.FieldTypeEnum.AnyOptional\r\n        }, timeout, abortSignal, streamRequest);\r\n        const [code, msg, data] = await Promise.all([\r\n            responseBody.code,\r\n            responseBody.msg,\r\n            responseBody.data,\r\n        ]);\r\n        if (code !== 20000)\r\n            throw RequestError_1.RequestError.parse(JSON.stringify({ code, msg, data }), 400);\r\n        return (0, SchemaVerifier_1.verifySchema)(data, ToBTCLNResponseSchema);\r\n    }\r\n    /**\r\n     * Prepare To BTCLN exact in swap with an intermediary\r\n     *\r\n     * @param chainIdentifier\r\n     * @param baseUrl Base URL of the intermediary\r\n     * @param init Swap initialization parameters\r\n     * @param timeout Timeout in milliseconds for the HTTP request\r\n     * @param abortSignal\r\n     * @param streamRequest Whether to force streaming (or not streaming) the request, default is autodetect\r\n     *\r\n     * @throws {RequestError} If non-200 http response code is returned\r\n     */\r\n    static prepareToBTCLNExactIn(chainIdentifier, baseUrl, init, timeout, abortSignal, streamRequest) {\r\n        const responseBodyPromise = (0, StreamingFetchPromise_1.streamingFetchPromise)(baseUrl + \"/tobtcln/payInvoice?chain=\" + encodeURIComponent(chainIdentifier), {\r\n            exactIn: true,\r\n            ...init.additionalParams,\r\n            pr: init.pr,\r\n            maxFee: init.maxFee.toString(10),\r\n            expiryTimestamp: init.expiryTimestamp.toString(10),\r\n            token: init.token,\r\n            offerer: init.offerer,\r\n            amount: init.amount.toString(10)\r\n        }, {\r\n            code: SchemaVerifier_1.FieldTypeEnum.Number,\r\n            msg: SchemaVerifier_1.FieldTypeEnum.String,\r\n            data: SchemaVerifier_1.FieldTypeEnum.AnyOptional,\r\n            signDataPrefetch: SchemaVerifier_1.FieldTypeEnum.AnyOptional\r\n        }, timeout, abortSignal, streamRequest);\r\n        return {\r\n            signDataPrefetch: responseBodyPromise.then(responseBody => responseBody.signDataPrefetch),\r\n            response: responseBodyPromise.then((responseBody) => Promise.all([\r\n                responseBody.code,\r\n                responseBody.msg,\r\n                responseBody.data,\r\n            ])).then(([code, msg, data]) => {\r\n                if (code !== 20000) {\r\n                    throw RequestError_1.RequestError.parse(JSON.stringify({ code, msg, data }), 400);\r\n                }\r\n                return (0, SchemaVerifier_1.verifySchema)(data, ToBTCLNPrepareExactInSchema);\r\n            })\r\n        };\r\n    }\r\n    /**\r\n     * Prepare From BTC swap via new spv vault swaps with an intermediary\r\n     *\r\n     * @param chainIdentifier\r\n     * @param baseUrl Base URL of the intermediary\r\n     * @param init Swap initialization parameters\r\n     * @param timeout Timeout in milliseconds for the HTTP request\r\n     * @param abortSignal\r\n     * @param streamRequest Whether to force streaming (or not streaming) the request, default is autodetect\r\n     *\r\n     * @throws {RequestError} If non-200 http response code is returned\r\n     */\r\n    static prepareSpvFromBTC(chainIdentifier, baseUrl, init, timeout, abortSignal, streamRequest) {\r\n        const responseBodyPromise = (0, StreamingFetchPromise_1.streamingFetchPromise)(baseUrl + \"/frombtc_spv/getQuote?chain=\" + encodeURIComponent(chainIdentifier), {\r\n            exactOut: init.exactOut,\r\n            ...init.additionalParams,\r\n            address: init.address,\r\n            amount: init.amount.toString(10),\r\n            token: init.token,\r\n            gasAmount: init.gasAmount.toString(10),\r\n            gasToken: init.gasToken,\r\n            frontingFeeRate: init.frontingFeeRate.toString(10),\r\n            callerFeeRate: init.callerFeeRate.then(val => val.toString(10))\r\n        }, {\r\n            code: SchemaVerifier_1.FieldTypeEnum.Number,\r\n            msg: SchemaVerifier_1.FieldTypeEnum.String,\r\n            data: SchemaVerifier_1.FieldTypeEnum.AnyOptional\r\n        }, timeout, abortSignal, streamRequest);\r\n        return responseBodyPromise.then((responseBody) => Promise.all([\r\n            responseBody.code,\r\n            responseBody.msg,\r\n            responseBody.data,\r\n        ])).then(([code, msg, data]) => {\r\n            if (code !== 20000) {\r\n                throw RequestError_1.RequestError.parse(JSON.stringify({ code, msg, data }), 400);\r\n            }\r\n            return (0, SchemaVerifier_1.verifySchema)(data, SpvFromBTCPrepareResponseSchema);\r\n        });\r\n    }\r\n    /**\r\n     * Prepare From BTC swap via new spv vault swaps with an intermediary\r\n     *\r\n     * @param chainIdentifier\r\n     * @param url\r\n     * @param init Swap initialization parameters\r\n     * @param timeout Timeout in milliseconds for the HTTP request\r\n     * @param abortSignal\r\n     * @param streamRequest Whether to force streaming (or not streaming) the request, default is autodetect\r\n     *\r\n     * @throws {RequestError} If non-200 http response code is returned\r\n     */\r\n    static initSpvFromBTC(chainIdentifier, url, init, timeout, abortSignal, streamRequest) {\r\n        const responseBodyPromise = (0, StreamingFetchPromise_1.streamingFetchPromise)(url + \"/postQuote?chain=\" + encodeURIComponent(chainIdentifier), {\r\n            quoteId: init.quoteId,\r\n            psbtHex: init.psbtHex\r\n        }, {\r\n            code: SchemaVerifier_1.FieldTypeEnum.Number,\r\n            msg: SchemaVerifier_1.FieldTypeEnum.String,\r\n            data: SchemaVerifier_1.FieldTypeEnum.AnyOptional\r\n        }, timeout, abortSignal, streamRequest);\r\n        return responseBodyPromise.then((responseBody) => Promise.all([\r\n            responseBody.code,\r\n            responseBody.msg,\r\n            responseBody.data,\r\n        ])).then(([code, msg, data]) => {\r\n            if (code !== 20000) {\r\n                throw RequestError_1.RequestError.parse(JSON.stringify({ code, msg, data }), 400);\r\n            }\r\n            return (0, SchemaVerifier_1.verifySchema)(data, SpvFromBTCInitResponseSchema);\r\n        });\r\n    }\r\n}\r\nexports.IntermediaryAPI = IntermediaryAPI;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IntermediaryDiscovery = exports.SwapHandlerType = void 0;\r\nconst Intermediary_1 = require(\"./Intermediary\");\r\nconst SwapType_1 = require(\"../swaps/enums/SwapType\");\r\nconst base_1 = require(\"@atomiqlabs/base\");\r\nconst events_1 = require(\"events\");\r\nconst buffer_1 = require(\"buffer\");\r\nconst Utils_1 = require(\"../utils/Utils\");\r\nconst IntermediaryAPI_1 = require(\"./IntermediaryAPI\");\r\nvar SwapHandlerType;\r\n(function (SwapHandlerType) {\r\n    SwapHandlerType[\"TO_BTC\"] = \"TO_BTC\";\r\n    SwapHandlerType[\"FROM_BTC\"] = \"FROM_BTC\";\r\n    SwapHandlerType[\"TO_BTCLN\"] = \"TO_BTCLN\";\r\n    SwapHandlerType[\"FROM_BTCLN\"] = \"FROM_BTCLN\";\r\n    SwapHandlerType[\"FROM_BTC_TRUSTED\"] = \"FROM_BTC_TRUSTED\";\r\n    SwapHandlerType[\"FROM_BTCLN_TRUSTED\"] = \"FROM_BTCLN_TRUSTED\";\r\n    SwapHandlerType[\"FROM_BTC_SPV\"] = \"FROM_BTC_SPV\";\r\n})(SwapHandlerType = exports.SwapHandlerType || (exports.SwapHandlerType = {}));\r\n/**\r\n * Converts SwapHandlerType (represented as string & used in REST API communication with intermediaries) to regular\r\n *  SwapType\r\n *\r\n * @param swapHandlerType\r\n */\r\nfunction swapHandlerTypeToSwapType(swapHandlerType) {\r\n    switch (swapHandlerType) {\r\n        case SwapHandlerType.FROM_BTC:\r\n            return SwapType_1.SwapType.FROM_BTC;\r\n        case SwapHandlerType.TO_BTC:\r\n            return SwapType_1.SwapType.TO_BTC;\r\n        case SwapHandlerType.FROM_BTCLN:\r\n            return SwapType_1.SwapType.FROM_BTCLN;\r\n        case SwapHandlerType.TO_BTCLN:\r\n            return SwapType_1.SwapType.TO_BTCLN;\r\n        case SwapHandlerType.FROM_BTC_TRUSTED:\r\n            return SwapType_1.SwapType.TRUSTED_FROM_BTC;\r\n        case SwapHandlerType.FROM_BTCLN_TRUSTED:\r\n            return SwapType_1.SwapType.TRUSTED_FROM_BTCLN;\r\n        case SwapHandlerType.FROM_BTC_SPV:\r\n            return SwapType_1.SwapType.SPV_VAULT_FROM_BTC;\r\n    }\r\n}\r\n/**\r\n * A default intermediary comparator, only takes to announced fee into consideration\r\n *\r\n * @param swapType\r\n * @param tokenAddress\r\n * @param swapAmount\r\n */\r\nfunction getIntermediaryComparator(swapType, tokenAddress, swapAmount) {\r\n    if (swapType === SwapType_1.SwapType.TO_BTC) {\r\n        //TODO: Also take reputation into account\r\n    }\r\n    return (a, b) => {\r\n        if (swapAmount == null) {\r\n            return a.services[swapType].swapFeePPM - b.services[swapType].swapFeePPM;\r\n        }\r\n        else {\r\n            const feeA = BigInt(a.services[swapType].swapBaseFee) + (swapAmount * BigInt(a.services[swapType].swapFeePPM) / 1000000n);\r\n            const feeB = BigInt(b.services[swapType].swapBaseFee) + (swapAmount * BigInt(b.services[swapType].swapFeePPM) / 1000000n);\r\n            return feeA - feeB > 0n ? 1 : feeA === feeB ? 0 : -1;\r\n        }\r\n    };\r\n}\r\nconst logger = (0, Utils_1.getLogger)(\"IntermediaryDiscovery: \");\r\nconst REGISTRY_URL = \"https://api.github.com/repos/adambor/SolLightning-registry/contents/registry.json?ref=main\";\r\n//To allow for legacy responses from not-yet updated LPs\r\nconst DEFAULT_CHAIN = \"SOLANA\";\r\nclass IntermediaryDiscovery extends events_1.EventEmitter {\r\n    constructor(swapContracts, registryUrl = REGISTRY_URL, nodeUrls, httpRequestTimeout) {\r\n        super();\r\n        this.intermediaries = [];\r\n        this.swapContracts = swapContracts;\r\n        this.registryUrl = registryUrl;\r\n        this.overrideNodeUrls = nodeUrls;\r\n        this.httpRequestTimeout = httpRequestTimeout;\r\n    }\r\n    /**\r\n     * Fetches the URLs of swap intermediaries from registry or from a pre-defined array of node urls\r\n     *\r\n     * @param abortSignal\r\n     */\r\n    async getIntermediaryUrls(abortSignal) {\r\n        if (this.overrideNodeUrls != null && this.overrideNodeUrls.length > 0) {\r\n            return this.overrideNodeUrls;\r\n        }\r\n        const response = await (0, Utils_1.httpGet)(this.registryUrl, this.httpRequestTimeout, abortSignal);\r\n        const content = response.content.replace(new RegExp(\"\\\\n\", \"g\"), \"\");\r\n        return JSON.parse(buffer_1.Buffer.from(content, \"base64\").toString());\r\n    }\r\n    /**\r\n     * Returns data as reported by a specific node (as identified by its URL)\r\n     *\r\n     * @param url\r\n     * @param abortSignal\r\n     */\r\n    async getNodeInfo(url, abortSignal) {\r\n        const response = await (0, Utils_1.tryWithRetries)(() => IntermediaryAPI_1.IntermediaryAPI.getIntermediaryInfo(url, this.httpRequestTimeout, abortSignal), { maxRetries: 3, delay: 100, exponential: true }, undefined, abortSignal);\r\n        const addresses = {};\r\n        for (let chain in response.chains) {\r\n            if (this.swapContracts[chain] != null) {\r\n                const { signature, address } = response.chains[chain];\r\n                try {\r\n                    await (0, Utils_1.tryWithRetries)(() => this.swapContracts[chain].isValidDataSignature(buffer_1.Buffer.from(response.envelope), signature, address), { maxRetries: 3, delay: 100, exponential: true }, base_1.SignatureVerificationError, abortSignal);\r\n                    addresses[chain] = address;\r\n                }\r\n                catch (e) {\r\n                    logger.warn(\"Failed to verify \" + chain + \" signature for intermediary: \" + url);\r\n                }\r\n            }\r\n        }\r\n        if (abortSignal != null)\r\n            abortSignal.throwIfAborted();\r\n        //Handle legacy responses\r\n        const info = JSON.parse(response.envelope);\r\n        for (let swapType in info.services) {\r\n            const serviceData = info.services[swapType];\r\n            if (serviceData.chainTokens == null)\r\n                serviceData.chainTokens = {\r\n                    [DEFAULT_CHAIN]: serviceData.tokens\r\n                };\r\n            for (let chain in serviceData.chainTokens) {\r\n                if (addresses[chain] == null)\r\n                    delete serviceData.chainTokens[chain];\r\n            }\r\n        }\r\n        return {\r\n            addresses,\r\n            info\r\n        };\r\n    }\r\n    async loadIntermediary(url, abortSignal) {\r\n        try {\r\n            const nodeInfo = await this.getNodeInfo(url, abortSignal);\r\n            const services = {};\r\n            for (let key in nodeInfo.info.services) {\r\n                services[swapHandlerTypeToSwapType(key)] = nodeInfo.info.services[key];\r\n            }\r\n            return new Intermediary_1.Intermediary(url, nodeInfo.addresses, services);\r\n        }\r\n        catch (e) {\r\n            logger.warn(\"fetchIntermediaries(): Error contacting intermediary \" + url + \": \", e);\r\n            return null;\r\n        }\r\n    }\r\n    /**\r\n     * Fetches data about all intermediaries in the network, pinging every one of them and ensuring they are online\r\n     *\r\n     * @param abortSignal\r\n     * @private\r\n     * @throws {Error} When no online intermediary was found\r\n     */\r\n    async fetchIntermediaries(abortSignal) {\r\n        const urls = await this.getIntermediaryUrls(abortSignal);\r\n        logger.debug(\"fetchIntermediaries(): Pinging intermediaries: \", urls.join());\r\n        const promises = urls.map(url => this.loadIntermediary(url, abortSignal));\r\n        const activeNodes = (await Promise.all(promises)).filter(intermediary => intermediary != null);\r\n        if (activeNodes.length === 0)\r\n            throw new Error(\"No online intermediary found!\");\r\n        return activeNodes;\r\n    }\r\n    /**\r\n     * Returns the intermediary at the provided URL, either from the already fetched list of LPs or fetches the data on-demand\r\n     *\r\n     * @param url\r\n     */\r\n    getIntermediary(url) {\r\n        const foundLp = this.intermediaries.find(lp => lp.url === url);\r\n        if (foundLp != null)\r\n            return Promise.resolve(foundLp);\r\n        return this.loadIntermediary(url);\r\n    }\r\n    /**\r\n     * Reloads the saves a list of intermediaries\r\n     * @param abortSignal\r\n     */\r\n    async reloadIntermediaries(abortSignal) {\r\n        const fetchedIntermediaries = await (0, Utils_1.tryWithRetries)(() => this.fetchIntermediaries(abortSignal), null, null, abortSignal);\r\n        this.intermediaries = fetchedIntermediaries;\r\n        this.emit(\"added\", fetchedIntermediaries);\r\n        logger.info(\"reloadIntermediaries(): Using active intermediaries: \", fetchedIntermediaries.map(lp => lp.url).join());\r\n    }\r\n    /**\r\n     * Initializes the discovery by fetching/reloading intermediaries\r\n     *\r\n     * @param abortSignal\r\n     */\r\n    init(abortSignal) {\r\n        logger.info(\"init(): Initializing with registryUrl: \" + this.registryUrl + \" intermediary array: \" + (this.overrideNodeUrls || []).join());\r\n        return this.reloadIntermediaries(abortSignal);\r\n    }\r\n    getMultichainSwapBounds() {\r\n        const bounds = {};\r\n        this.intermediaries.forEach(intermediary => {\r\n            for (let swapType in intermediary.services) {\r\n                const swapService = intermediary.services[swapType];\r\n                bounds[swapType] ??= {};\r\n                const multichainBounds = bounds[swapType];\r\n                for (let chainId in swapService.chainTokens) {\r\n                    multichainBounds[chainId] ??= {};\r\n                    const tokenBounds = multichainBounds[chainId];\r\n                    for (let token of swapService.chainTokens[chainId]) {\r\n                        const tokenMinMax = tokenBounds[token];\r\n                        if (tokenMinMax == null) {\r\n                            tokenBounds[token] = {\r\n                                min: BigInt(swapService.min),\r\n                                max: BigInt(swapService.max)\r\n                            };\r\n                        }\r\n                        else {\r\n                            tokenMinMax.min = (0, Utils_1.bigIntMin)(tokenMinMax.min, BigInt(swapService.min));\r\n                            tokenMinMax.max = (0, Utils_1.bigIntMax)(tokenMinMax.max, BigInt(swapService.max));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        return bounds;\r\n    }\r\n    /**\r\n     * Returns aggregate swap bounds (in sats - BTC) as indicated by the intermediaries\r\n     */\r\n    getSwapBounds(chainIdentifier) {\r\n        const bounds = {};\r\n        this.intermediaries.forEach(intermediary => {\r\n            for (let swapType in intermediary.services) {\r\n                const swapService = intermediary.services[swapType];\r\n                if (bounds[swapType] == null)\r\n                    bounds[swapType] = {};\r\n                const tokenBounds = bounds[swapType];\r\n                if (swapService.chainTokens != null && swapService.chainTokens[chainIdentifier] != null) {\r\n                    for (let token of swapService.chainTokens[chainIdentifier]) {\r\n                        const tokenMinMax = tokenBounds[token];\r\n                        if (tokenMinMax == null) {\r\n                            tokenBounds[token] = {\r\n                                min: BigInt(swapService.min),\r\n                                max: BigInt(swapService.max)\r\n                            };\r\n                        }\r\n                        else {\r\n                            tokenMinMax.min = (0, Utils_1.bigIntMin)(tokenMinMax.min, BigInt(swapService.min));\r\n                            tokenMinMax.max = (0, Utils_1.bigIntMax)(tokenMinMax.max, BigInt(swapService.max));\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        return bounds;\r\n    }\r\n    /**\r\n     * Returns the aggregate swap minimum (in sats - BTC) for a specific swap type & token\r\n     *  as indicated by the intermediaries\r\n     *\r\n     * @param chainIdentifier\r\n     * @param swapType\r\n     * @param token\r\n     */\r\n    getSwapMinimum(chainIdentifier, swapType, token) {\r\n        const tokenStr = token.toString();\r\n        return this.intermediaries.reduce((prevMin, intermediary) => {\r\n            const swapService = intermediary.services[swapType];\r\n            if (swapService != null &&\r\n                swapService.chainTokens != null &&\r\n                swapService.chainTokens[chainIdentifier] != null &&\r\n                swapService.chainTokens[chainIdentifier].includes(tokenStr))\r\n                return prevMin == null ? swapService.min : Math.min(prevMin, swapService.min);\r\n            return prevMin;\r\n        }, null);\r\n    }\r\n    /**\r\n     * Returns the aggregate swap maximum (in sats - BTC) for a specific swap type & token\r\n     *  as indicated by the intermediaries\r\n     *\r\n     * @param chainIdentifier\r\n     * @param swapType\r\n     * @param token\r\n     */\r\n    getSwapMaximum(chainIdentifier, swapType, token) {\r\n        const tokenStr = token.toString();\r\n        return this.intermediaries.reduce((prevMax, intermediary) => {\r\n            const swapService = intermediary.services[swapType];\r\n            if (swapService != null &&\r\n                swapService.chainTokens != null &&\r\n                swapService.chainTokens[chainIdentifier] != null &&\r\n                swapService.chainTokens[chainIdentifier].includes(tokenStr))\r\n                return prevMax == null ? swapService.max : Math.max(prevMax, swapService.max);\r\n            return prevMax;\r\n        }, null);\r\n    }\r\n    /**\r\n     * Returns swap candidates for a specific swap type & token address\r\n     *\r\n     * @param chainIdentifier\r\n     * @param swapType\r\n     * @param tokenAddress\r\n     * @param amount Amount to be swapped in sats - BTC\r\n     * @param count How many intermediaries to return at most\r\n     */\r\n    getSwapCandidates(chainIdentifier, swapType, tokenAddress, amount, count) {\r\n        const candidates = this.intermediaries.filter(e => {\r\n            const swapService = e.services[swapType];\r\n            if (swapService == null)\r\n                return false;\r\n            if (amount != null && amount < BigInt(swapService.min))\r\n                return false;\r\n            if (amount != null && amount > BigInt(swapService.max))\r\n                return false;\r\n            if (swapService.chainTokens == null)\r\n                return false;\r\n            if (swapService.chainTokens[chainIdentifier] == null)\r\n                return false;\r\n            if (!swapService.chainTokens[chainIdentifier].includes(tokenAddress.toString()))\r\n                return false;\r\n            return true;\r\n        });\r\n        candidates.sort(getIntermediaryComparator(swapType, tokenAddress, amount));\r\n        if (count == null) {\r\n            return candidates;\r\n        }\r\n        else {\r\n            return candidates.slice(0, count);\r\n        }\r\n    }\r\n    /**\r\n     * Removes a specific intermediary from the list of active intermediaries (used for blacklisting)\r\n     *\r\n     * @param intermediary\r\n     */\r\n    removeIntermediary(intermediary) {\r\n        const index = this.intermediaries.indexOf(intermediary);\r\n        if (index >= 0) {\r\n            logger.info(\"removeIntermediary(): Removing intermediary: \" + intermediary.url);\r\n            this.intermediaries.splice(index, 1);\r\n            this.emit(\"removed\", [intermediary]);\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n}\r\nexports.IntermediaryDiscovery = IntermediaryDiscovery;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ISwapPrice = exports.isPriceInfoType = void 0;\r\nfunction isPriceInfoType(obj) {\r\n    return obj != null &&\r\n        typeof (obj.isValid) === \"boolean\" &&\r\n        typeof (obj.differencePPM) === \"bigint\" &&\r\n        typeof (obj.satsBaseFee) === \"bigint\" &&\r\n        typeof (obj.feePPM) === \"bigint\" &&\r\n        typeof (obj.realPriceUSatPerToken) === \"bigint\" &&\r\n        typeof (obj.swapPriceUSatPerToken) === \"bigint\";\r\n}\r\nexports.isPriceInfoType = isPriceInfoType;\r\nclass ISwapPrice {\r\n    constructor(maxAllowedFeeDifferencePPM) {\r\n        this.maxAllowedFeeDifferencePPM = maxAllowedFeeDifferencePPM;\r\n    }\r\n    /**\r\n     * Recomputes pricing info without fetching the current price\r\n     *\r\n     * @param chainIdentifier\r\n     * @param amountSats\r\n     * @param satsBaseFee\r\n     * @param feePPM\r\n     * @param paidToken\r\n     * @param token\r\n     */\r\n    recomputePriceInfoSend(chainIdentifier, amountSats, satsBaseFee, feePPM, paidToken, token) {\r\n        const totalSats = (amountSats * (1000000n + feePPM) / 1000000n)\r\n            + satsBaseFee;\r\n        const totalUSats = totalSats * 1000000n;\r\n        const swapPriceUSatPerToken = totalUSats * (10n ** BigInt(this.getDecimals(chainIdentifier, token))) / paidToken;\r\n        return {\r\n            isValid: true,\r\n            differencePPM: 0n,\r\n            satsBaseFee,\r\n            feePPM,\r\n            realPriceUSatPerToken: this.shouldIgnore(chainIdentifier, token) ? null : swapPriceUSatPerToken,\r\n            swapPriceUSatPerToken\r\n        };\r\n    }\r\n    /**\r\n     * Checks whether the swap amounts are valid given the current market rate for a given pair\r\n     *\r\n     * @param chainIdentifier\r\n     * @param amountSats Amount of sats (BTC) to be received from the swap\r\n     * @param satsBaseFee Base fee in sats (BTC) as reported by the intermediary\r\n     * @param feePPM PPM fee rate as reported by the intermediary\r\n     * @param paidToken Amount of token to be paid to the swap\r\n     * @param token\r\n     * @param abortSignal\r\n     * @param preFetchedPrice Already pre-fetched price\r\n     */\r\n    async isValidAmountSend(chainIdentifier, amountSats, satsBaseFee, feePPM, paidToken, token, abortSignal, preFetchedPrice) {\r\n        const totalSats = (amountSats * (1000000n + feePPM) / 1000000n)\r\n            + satsBaseFee;\r\n        const totalUSats = totalSats * 1000000n;\r\n        const swapPriceUSatPerToken = totalUSats * (10n ** BigInt(this.getDecimals(chainIdentifier, token))) / paidToken;\r\n        if (this.shouldIgnore(chainIdentifier, token))\r\n            return {\r\n                isValid: true,\r\n                differencePPM: 0n,\r\n                satsBaseFee,\r\n                feePPM,\r\n                realPriceUSatPerToken: null,\r\n                swapPriceUSatPerToken\r\n            };\r\n        const calculatedAmtInToken = await this.getFromBtcSwapAmount(chainIdentifier, totalSats, token, abortSignal, preFetchedPrice);\r\n        const realPriceUSatPerToken = totalUSats * (10n ** BigInt(this.getDecimals(chainIdentifier, token))) / calculatedAmtInToken;\r\n        const difference = paidToken - calculatedAmtInToken; //Will be >0 if we need to pay more than we should've\r\n        const differencePPM = difference * 1000000n / calculatedAmtInToken;\r\n        return {\r\n            isValid: differencePPM <= this.maxAllowedFeeDifferencePPM,\r\n            differencePPM,\r\n            satsBaseFee,\r\n            feePPM,\r\n            realPriceUSatPerToken,\r\n            swapPriceUSatPerToken\r\n        };\r\n    }\r\n    /**\r\n     * Recomputes pricing info without fetching the current price\r\n     *\r\n     * @param chainIdentifier\r\n     * @param amountSats\r\n     * @param satsBaseFee\r\n     * @param feePPM\r\n     * @param receiveToken\r\n     * @param token\r\n     */\r\n    recomputePriceInfoReceive(chainIdentifier, amountSats, satsBaseFee, feePPM, receiveToken, token) {\r\n        const totalSats = (amountSats * (1000000n - feePPM) / 1000000n)\r\n            - satsBaseFee;\r\n        const totalUSats = totalSats * 1000000n;\r\n        const swapPriceUSatPerToken = totalUSats * (10n ** BigInt(this.getDecimals(chainIdentifier, token))) / receiveToken;\r\n        return {\r\n            isValid: true,\r\n            differencePPM: 0n,\r\n            satsBaseFee,\r\n            feePPM,\r\n            realPriceUSatPerToken: this.shouldIgnore(chainIdentifier, token) ? null : swapPriceUSatPerToken,\r\n            swapPriceUSatPerToken\r\n        };\r\n    }\r\n    /**\r\n     * Checks whether the swap amounts are valid given the current market rate for a given pair\r\n     *\r\n     * @param chainIdentifier\r\n     * @param amountSats Amount of sats (BTC) to be paid to the swap\r\n     * @param satsBaseFee Base fee in sats (BTC) as reported by the intermediary\r\n     * @param feePPM PPM fee rate as reported by the intermediary\r\n     * @param receiveToken Amount of token to be received from the swap\r\n     * @param token\r\n     * @param abortSignal\r\n     * @param preFetchedPrice Already pre-fetched price\r\n     */\r\n    async isValidAmountReceive(chainIdentifier, amountSats, satsBaseFee, feePPM, receiveToken, token, abortSignal, preFetchedPrice) {\r\n        const totalSats = (amountSats * (1000000n - feePPM) / 1000000n)\r\n            - satsBaseFee;\r\n        const totalUSats = totalSats * 1000000n;\r\n        const swapPriceUSatPerToken = totalUSats * (10n ** BigInt(this.getDecimals(chainIdentifier, token))) / receiveToken;\r\n        if (this.shouldIgnore(chainIdentifier, token))\r\n            return {\r\n                isValid: true,\r\n                differencePPM: 0n,\r\n                satsBaseFee,\r\n                feePPM,\r\n                realPriceUSatPerToken: null,\r\n                swapPriceUSatPerToken\r\n            };\r\n        const calculatedAmtInToken = await this.getFromBtcSwapAmount(chainIdentifier, totalSats, token, abortSignal, preFetchedPrice);\r\n        const realPriceUSatPerToken = totalUSats * (10n ** BigInt(this.getDecimals(chainIdentifier, token))) / calculatedAmtInToken;\r\n        const difference = calculatedAmtInToken - receiveToken; //Will be >0 if we receive less than we should've\r\n        const differencePPM = difference * 100000n / calculatedAmtInToken;\r\n        return {\r\n            isValid: differencePPM <= this.maxAllowedFeeDifferencePPM,\r\n            differencePPM,\r\n            satsBaseFee,\r\n            feePPM,\r\n            realPriceUSatPerToken,\r\n            swapPriceUSatPerToken\r\n        };\r\n    }\r\n    preFetchPrice(chainIdentifier, token, abortSignal) {\r\n        return this.getPrice(chainIdentifier, token, abortSignal);\r\n    }\r\n    preFetchUsdPrice(abortSignal) {\r\n        return this.getUsdPrice(abortSignal);\r\n    }\r\n    /**\r\n     * Returns amount of {toToken} that are equivalent to {fromAmount} satoshis\r\n     *\r\n     * @param chainIdentifier\r\n     * @param fromAmount        Amount of satoshis\r\n     * @param toToken           Token\r\n     * @param abortSignal\r\n     * @param preFetchedPrice\r\n     * @throws {Error} when token is not found\r\n     */\r\n    async getFromBtcSwapAmount(chainIdentifier, fromAmount, toToken, abortSignal, preFetchedPrice) {\r\n        if (this.getDecimals(chainIdentifier, toToken.toString()) == null)\r\n            throw new Error(\"Token not found!\");\r\n        const price = preFetchedPrice || await this.getPrice(chainIdentifier, toToken, abortSignal);\r\n        return fromAmount\r\n            * (10n ** BigInt(this.getDecimals(chainIdentifier, toToken.toString())))\r\n            * (1000000n) //To usat\r\n            / (price);\r\n    }\r\n    /**\r\n     * Returns amount of satoshis that are equivalent to {fromAmount} of {fromToken}\r\n     *\r\n     * @param chainIdentifier\r\n     * @param fromAmount Amount of the token\r\n     * @param fromToken Token\r\n     * @param abortSignal\r\n     * @param preFetchedPrice Pre-fetched swap price if available\r\n     * @throws {Error} when token is not found\r\n     */\r\n    async getToBtcSwapAmount(chainIdentifier, fromAmount, fromToken, abortSignal, preFetchedPrice) {\r\n        if (this.getDecimals(chainIdentifier, fromToken.toString()) == null)\r\n            throw new Error(\"Token not found\");\r\n        const price = preFetchedPrice || await this.getPrice(chainIdentifier, fromToken, abortSignal);\r\n        return fromAmount\r\n            * price\r\n            / 1000000n\r\n            / (10n ** BigInt(this.getDecimals(chainIdentifier, fromToken.toString())));\r\n    }\r\n    /**\r\n     * Returns whether the token should be ignored and pricing for it not calculated\r\n     * @param chainIdentifier\r\n     * @param tokenAddress\r\n     * @throws {Error} if token is not found\r\n     */\r\n    shouldIgnore(chainIdentifier, tokenAddress) {\r\n        const coin = this.getDecimals(chainIdentifier, tokenAddress.toString());\r\n        if (coin == null)\r\n            throw new Error(\"Token not found\");\r\n        return coin === -1;\r\n    }\r\n    async getBtcUsdValue(btcSats, abortSignal, preFetchedPrice) {\r\n        return Number(btcSats) * (preFetchedPrice || await this.getUsdPrice(abortSignal));\r\n    }\r\n    async getTokenUsdValue(chainId, tokenAmount, token, abortSignal, preFetchedPrice) {\r\n        const [btcAmount, usdPrice] = await Promise.all([\r\n            this.getToBtcSwapAmount(chainId, tokenAmount, token, abortSignal),\r\n            preFetchedPrice == null ? this.preFetchUsdPrice(abortSignal) : Promise.resolve(preFetchedPrice)\r\n        ]);\r\n        return Number(btcAmount) * usdPrice;\r\n    }\r\n    getUsdValue(amount, token, abortSignal, preFetchedUsdPrice) {\r\n        if (token.chain === \"BTC\") {\r\n            return this.getBtcUsdValue(amount, abortSignal, preFetchedUsdPrice);\r\n        }\r\n        else {\r\n            return this.getTokenUsdValue(token.chainId, amount, token.address, abortSignal, preFetchedUsdPrice);\r\n        }\r\n    }\r\n}\r\nexports.ISwapPrice = ISwapPrice;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ICachedSwapPrice = void 0;\r\nconst ISwapPrice_1 = require(\"./ISwapPrice\");\r\nconst DEFAULT_CACHE_DURATION = 10000;\r\nclass ICachedSwapPrice extends ISwapPrice_1.ISwapPrice {\r\n    constructor(maxAllowedFeeDiffPPM, cacheTimeout) {\r\n        super(maxAllowedFeeDiffPPM);\r\n        this.cache = {};\r\n        this.cacheTimeout = cacheTimeout || DEFAULT_CACHE_DURATION;\r\n    }\r\n    getPrice(chainIdentifier, tokenAddress, abortSignal) {\r\n        const token = tokenAddress.toString();\r\n        const chainCache = this.cache[chainIdentifier];\r\n        if (chainCache != null) {\r\n            const cachedValue = chainCache[token];\r\n            if (cachedValue != null && cachedValue.expiry > Date.now()) {\r\n                //Cache still fresh\r\n                return cachedValue.price.catch(e => this.fetchPrice(chainIdentifier, token, abortSignal));\r\n            }\r\n        }\r\n        //Refresh cache\r\n        const thisFetch = this.fetchPrice(chainIdentifier, token);\r\n        this.cache[chainIdentifier] ??= {};\r\n        this.cache[chainIdentifier][token] = {\r\n            price: thisFetch,\r\n            expiry: Date.now() + this.cacheTimeout\r\n        };\r\n        thisFetch.catch(e => {\r\n            if (this.cache[chainIdentifier] != null &&\r\n                this.cache[chainIdentifier][token] != null &&\r\n                this.cache[chainIdentifier][token].price === thisFetch)\r\n                delete this.cache[token];\r\n            throw e;\r\n        });\r\n        return thisFetch;\r\n    }\r\n    /**\r\n     * Returns BTC price in USD (sats/USD)\r\n     *\r\n     * @param abortSignal\r\n     * @throws {Error} if token is not found\r\n     */\r\n    getUsdPrice(abortSignal) {\r\n        if (this.usdCache != null && this.usdCache.expiry > Date.now()) {\r\n            //Cache still fresh\r\n            return this.usdCache.price.catch(e => this.fetchUsdPrice(abortSignal));\r\n        }\r\n        //Refresh cache\r\n        const thisFetch = this.fetchUsdPrice();\r\n        this.usdCache = {\r\n            price: thisFetch,\r\n            expiry: Date.now() + this.cacheTimeout\r\n        };\r\n        thisFetch.catch(e => {\r\n            if (this.usdCache != null &&\r\n                this.usdCache.price === thisFetch)\r\n                delete this.usdCache;\r\n            throw e;\r\n        });\r\n        return thisFetch;\r\n    }\r\n}\r\nexports.ICachedSwapPrice = ICachedSwapPrice;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IPriceProvider = void 0;\r\nclass IPriceProvider {\r\n    constructor(coins) {\r\n        this.coinsMap = {};\r\n        for (let coinData of coins) {\r\n            if (coinData.coinId == null)\r\n                continue;\r\n            for (let chainId in coinData.chains) {\r\n                const { address, decimals } = coinData.chains[chainId];\r\n                this.coinsMap[chainId] ??= {};\r\n                this.coinsMap[chainId][address.toString()] = {\r\n                    coinId: coinData.coinId,\r\n                    decimals\r\n                };\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Returns coin price in uSat (microSat)\r\n     *\r\n     * @param chainIdentifier\r\n     * @param token\r\n     * @param abortSignal\r\n     * @throws {Error} if token is not found\r\n     */\r\n    getPrice(chainIdentifier, token, abortSignal) {\r\n        let tokenAddress = token.toString();\r\n        const chainTokens = this.coinsMap[chainIdentifier];\r\n        if (chainTokens == null)\r\n            throw new Error(\"Chain not found\");\r\n        const coin = chainTokens[tokenAddress];\r\n        if (coin == null)\r\n            throw new Error(\"Token not found\");\r\n        if (coin.coinId.startsWith(\"$fixed-\")) {\r\n            const amt = parseFloat(coin.coinId.substring(7));\r\n            return Promise.resolve(BigInt(Math.floor(amt * 1000000).toString(10)));\r\n        }\r\n        return this.fetchPrice(coin, abortSignal);\r\n    }\r\n    /**\r\n     * Returns coin price in uSat (microSat)\r\n     *\r\n     * @param abortSignal\r\n     * @throws {Error} if token is not found\r\n     */\r\n    getUsdPrice(abortSignal) {\r\n        return this.fetchUsdPrice(abortSignal);\r\n    }\r\n    /**\r\n     * Returns the decimal places of the specified token, or -1 if token should be ignored, returns null if\r\n     *  token is not found\r\n     *\r\n     * @param chainIdentifier\r\n     * @param token\r\n     * @protected\r\n     * @throws {Error} If token is not found\r\n     */\r\n    getDecimals(chainIdentifier, token) {\r\n        const chainTokens = this.coinsMap[chainIdentifier];\r\n        if (chainTokens == null)\r\n            throw new Error(\"Chain not found\");\r\n        const coin = chainTokens[token.toString()];\r\n        if (coin == null)\r\n            throw new Error(\"Token not found\");\r\n        return coin.coinId === \"$ignore\" ? -1 : coin.decimals;\r\n    }\r\n}\r\nexports.IPriceProvider = IPriceProvider;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.HttpPriceProvider = void 0;\r\nconst IPriceProvider_1 = require(\"../../abstract/IPriceProvider\");\r\nclass HttpPriceProvider extends IPriceProvider_1.IPriceProvider {\r\n    constructor(coinsMap, url, httpRequestTimeout) {\r\n        super(coinsMap);\r\n        this.url = url;\r\n        this.httpRequestTimeout = httpRequestTimeout;\r\n    }\r\n}\r\nexports.HttpPriceProvider = HttpPriceProvider;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ExchangePriceProvider = void 0;\r\nconst HttpPriceProvider_1 = require(\"./HttpPriceProvider\");\r\nclass ExchangePriceProvider extends HttpPriceProvider_1.HttpPriceProvider {\r\n    async fetchPrice(token, abortSignal) {\r\n        const pairs = token.coinId.split(\";\");\r\n        const prices = await Promise.all(pairs.map(pair => {\r\n            let invert = pair.startsWith(\"!\");\r\n            if (invert)\r\n                pair = pair.substring(1);\r\n            return this.fetchPair(pair, abortSignal).then(value => invert ? 1 / value : value);\r\n        }));\r\n        const price = prices.reduce((previousValue, currentValue) => previousValue * currentValue, 1);\r\n        return BigInt(Math.floor(price * 100000000000000));\r\n    }\r\n}\r\nexports.ExchangePriceProvider = ExchangePriceProvider;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.BinancePriceProvider = void 0;\r\nconst ExchangePriceProvider_1 = require(\"./abstract/ExchangePriceProvider\");\r\nconst Utils_1 = require(\"../../utils/Utils\");\r\nclass BinancePriceProvider extends ExchangePriceProvider_1.ExchangePriceProvider {\r\n    constructor(coinsMap, url = \"https://api.binance.com/api/v3\", httpRequestTimeout) {\r\n        super(coinsMap, url, httpRequestTimeout);\r\n    }\r\n    async fetchPair(pair, abortSignal) {\r\n        const response = await (0, Utils_1.httpGet)(this.url + \"/ticker/price?symbol=\" + pair, this.httpRequestTimeout, abortSignal);\r\n        return parseFloat(response.price);\r\n    }\r\n    async fetchUsdPrice(abortSignal) {\r\n        const response = await (0, Utils_1.httpGet)(this.url + \"/ticker/price?symbol=BTCUSDC\", this.httpRequestTimeout, abortSignal);\r\n        return parseFloat(response.price) / 100000000;\r\n    }\r\n}\r\nexports.BinancePriceProvider = BinancePriceProvider;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CoinGeckoPriceProvider = void 0;\r\nconst HttpPriceProvider_1 = require(\"./abstract/HttpPriceProvider\");\r\nconst Utils_1 = require(\"../../utils/Utils\");\r\nclass CoinGeckoPriceProvider extends HttpPriceProvider_1.HttpPriceProvider {\r\n    constructor(coinsMap, url = \"https://api.coingecko.com/api/v3\", httpRequestTimeout) {\r\n        super(coinsMap, url, httpRequestTimeout);\r\n    }\r\n    async fetchPrice(token, abortSignal) {\r\n        let response = await (0, Utils_1.httpGet)(this.url + \"/simple/price?ids=\" + token.coinId + \"&vs_currencies=sats&precision=6\", this.httpRequestTimeout, abortSignal);\r\n        return BigInt(response[token.coinId].sats * 1000000);\r\n    }\r\n    async fetchUsdPrice(abortSignal) {\r\n        let response = await (0, Utils_1.httpGet)(this.url + \"/simple/price?ids=bitcoin&vs_currencies=usd&precision=9\", this.httpRequestTimeout, abortSignal);\r\n        return response[\"bitcoin\"].usd / 100000000;\r\n    }\r\n}\r\nexports.CoinGeckoPriceProvider = CoinGeckoPriceProvider;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CoinPaprikaPriceProvider = void 0;\r\nconst HttpPriceProvider_1 = require(\"./abstract/HttpPriceProvider\");\r\nconst Utils_1 = require(\"../../utils/Utils\");\r\nclass CoinPaprikaPriceProvider extends HttpPriceProvider_1.HttpPriceProvider {\r\n    constructor(coinsMap, url = \"https://api.coinpaprika.com/v1\", httpRequestTimeout) {\r\n        super(coinsMap, url, httpRequestTimeout);\r\n    }\r\n    async fetchPrice(token, abortSignal) {\r\n        const response = await (0, Utils_1.httpGet)(this.url + \"/tickers/\" + token.coinId + \"?quotes=BTC\", this.httpRequestTimeout, abortSignal);\r\n        return BigInt(Math.floor(response.quotes.BTC.price * 100000000000000));\r\n    }\r\n    async fetchUsdPrice(abortSignal) {\r\n        const response = await (0, Utils_1.httpGet)(this.url + \"/tickers/btc-bitcoin?quotes=USD\", this.httpRequestTimeout, abortSignal);\r\n        return response.quotes.USD.price / 100000000;\r\n    }\r\n}\r\nexports.CoinPaprikaPriceProvider = CoinPaprikaPriceProvider;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.OKXPriceProvider = void 0;\r\nconst ExchangePriceProvider_1 = require(\"./abstract/ExchangePriceProvider\");\r\nconst Utils_1 = require(\"../../utils/Utils\");\r\nclass OKXPriceProvider extends ExchangePriceProvider_1.ExchangePriceProvider {\r\n    constructor(coinsMap, url = \"https://www.okx.com/api/v5\", httpRequestTimeout) {\r\n        super(coinsMap, url, httpRequestTimeout);\r\n    }\r\n    async fetchPair(pair, abortSignal) {\r\n        const response = await (0, Utils_1.httpGet)(this.url + \"/market/index-tickers?instId=\" + pair, this.httpRequestTimeout, abortSignal);\r\n        return parseFloat(response.data[0].idxPx);\r\n    }\r\n    async fetchUsdPrice(abortSignal) {\r\n        const response = await (0, Utils_1.httpGet)(this.url + \"/market/index-tickers?instId=BTC-USD\", this.httpRequestTimeout, abortSignal);\r\n        return parseFloat(response.data[0].idxPx) / 100000000;\r\n    }\r\n}\r\nexports.OKXPriceProvider = OKXPriceProvider;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.CustomPriceProvider = void 0;\r\nconst IPriceProvider_1 = require(\"../abstract/IPriceProvider\");\r\nclass CustomPriceProvider extends IPriceProvider_1.IPriceProvider {\r\n    constructor(coinsMap, getUsdPriceFn) {\r\n        super(coinsMap);\r\n        this.getUsdPriceFn = getUsdPriceFn;\r\n    }\r\n    async fetchPrice(token, abortSignal) {\r\n        const [btcPrice, tokenPrice] = await this.getUsdPriceFn([\"BTC\", token.coinId], abortSignal);\r\n        const priceInBtc = tokenPrice / btcPrice;\r\n        return BigInt(Math.floor(priceInBtc * 100000000 * 1000000));\r\n    }\r\n    async fetchUsdPrice(abortSignal) {\r\n        const [btcPrice] = await this.getUsdPriceFn([\"BTC\"], abortSignal);\r\n        return btcPrice / 100000000;\r\n    }\r\n}\r\nexports.CustomPriceProvider = CustomPriceProvider;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.KrakenPriceProvider = void 0;\r\nconst ExchangePriceProvider_1 = require(\"./abstract/ExchangePriceProvider\");\r\nconst Utils_1 = require(\"../../utils/Utils\");\r\nclass KrakenPriceProvider extends ExchangePriceProvider_1.ExchangePriceProvider {\r\n    constructor(coinsMap, url = \"https://api.kraken.com/0\", httpRequestTimeout) {\r\n        super(coinsMap, url, httpRequestTimeout);\r\n    }\r\n    async fetchPair(pair, abortSignal) {\r\n        const response = await (0, Utils_1.httpGet)(this.url + \"/public/Ticker?pair=\" + pair, this.httpRequestTimeout, abortSignal);\r\n        return parseFloat(response.result[pair].c[0]);\r\n    }\r\n    async fetchUsdPrice(abortSignal) {\r\n        const response = await (0, Utils_1.httpGet)(this.url + \"/public/Ticker?pair=XBTUSDC\", this.httpRequestTimeout, abortSignal);\r\n        return parseFloat(response.result[\"XBTUSDC\"].c[0]) / 100000000;\r\n    }\r\n    async fetchPrice(token, abortSignal) {\r\n        const pairs = token.coinId.split(\";\");\r\n        const response = await (0, Utils_1.httpGet)(this.url + \"/public/Ticker?pair=\" + pairs.map(val => val.startsWith(\"!\") ? val.substring(1) : val).join(\",\"), this.httpRequestTimeout, abortSignal);\r\n        const prices = pairs.map(pair => {\r\n            let invert = pair.startsWith(\"!\");\r\n            if (invert)\r\n                pair = pair.substring(1);\r\n            const value = parseFloat(response.result[pair].c[0]);\r\n            return invert ? 1 / value : value;\r\n        });\r\n        const price = prices.reduce((previousValue, currentValue) => previousValue * currentValue, 1);\r\n        return BigInt(Math.floor(price * 100000000000000));\r\n    }\r\n}\r\nexports.KrakenPriceProvider = KrakenPriceProvider;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.RedundantSwapPrice = void 0;\r\nconst BinancePriceProvider_1 = require(\"./providers/BinancePriceProvider\");\r\nconst OKXPriceProvider_1 = require(\"./providers/OKXPriceProvider\");\r\nconst CoinGeckoPriceProvider_1 = require(\"./providers/CoinGeckoPriceProvider\");\r\nconst CoinPaprikaPriceProvider_1 = require(\"./providers/CoinPaprikaPriceProvider\");\r\nconst Utils_1 = require(\"../utils/Utils\");\r\nconst ICachedSwapPrice_1 = require(\"./abstract/ICachedSwapPrice\");\r\nconst RequestError_1 = require(\"../errors/RequestError\");\r\nconst KrakenPriceProvider_1 = require(\"./providers/KrakenPriceProvider\");\r\nconst logger = (0, Utils_1.getLogger)(\"RedundantSwapPrice: \");\r\n/**\r\n * Swap price API using multiple price sources, handles errors on the APIs and automatically switches between them, such\r\n *  that there always is a functional API\r\n */\r\nclass RedundantSwapPrice extends ICachedSwapPrice_1.ICachedSwapPrice {\r\n    static createFromTokenMap(maxAllowedFeeDiffPPM, assets, cacheTimeout) {\r\n        const priceApis = [\r\n            new BinancePriceProvider_1.BinancePriceProvider(assets.map(coinData => {\r\n                return {\r\n                    coinId: coinData.binancePair,\r\n                    chains: coinData.chains\r\n                };\r\n            })),\r\n            new OKXPriceProvider_1.OKXPriceProvider(assets.map(coinData => {\r\n                return {\r\n                    coinId: coinData.okxPair,\r\n                    chains: coinData.chains\r\n                };\r\n            })),\r\n            new CoinGeckoPriceProvider_1.CoinGeckoPriceProvider(assets.map(coinData => {\r\n                return {\r\n                    coinId: coinData.coinGeckoCoinId,\r\n                    chains: coinData.chains\r\n                };\r\n            })),\r\n            new CoinPaprikaPriceProvider_1.CoinPaprikaPriceProvider(assets.map(coinData => {\r\n                return {\r\n                    coinId: coinData.coinPaprikaCoinId,\r\n                    chains: coinData.chains\r\n                };\r\n            })),\r\n            new KrakenPriceProvider_1.KrakenPriceProvider(assets.map(coinData => {\r\n                return {\r\n                    coinId: coinData.krakenPair,\r\n                    chains: coinData.chains\r\n                };\r\n            }))\r\n        ];\r\n        return new RedundantSwapPrice(maxAllowedFeeDiffPPM, assets, priceApis, cacheTimeout);\r\n    }\r\n    constructor(maxAllowedFeeDiffPPM, coinsDecimals, priceApis, cacheTimeout) {\r\n        super(maxAllowedFeeDiffPPM, cacheTimeout);\r\n        this.coinsDecimals = {};\r\n        for (let coinData of coinsDecimals) {\r\n            for (let chainId in coinData.chains) {\r\n                const { address, decimals } = coinData.chains[chainId];\r\n                this.coinsDecimals[chainId] ??= {};\r\n                this.coinsDecimals[chainId][address.toString()] = decimals;\r\n            }\r\n        }\r\n        this.priceApis = priceApis.map(api => {\r\n            return {\r\n                priceApi: api,\r\n                operational: null\r\n            };\r\n        });\r\n    }\r\n    /**\r\n     * Returns price api that should be operational\r\n     *\r\n     * @private\r\n     */\r\n    getOperationalPriceApi() {\r\n        return this.priceApis.find(e => e.operational === true);\r\n    }\r\n    /**\r\n     * Returns price apis that are maybe operational, in case none is considered operational returns all of the price\r\n     *  apis such that they can be tested again whether they are operational\r\n     *\r\n     * @private\r\n     */\r\n    getMaybeOperationalPriceApis() {\r\n        let operational = this.priceApis.filter(e => e.operational === true || e.operational === null);\r\n        if (operational.length === 0) {\r\n            this.priceApis.forEach(e => e.operational = null);\r\n            operational = this.priceApis;\r\n        }\r\n        return operational;\r\n    }\r\n    /**\r\n     * Fetches price in parallel from multiple maybe operational price APIs\r\n     *\r\n     * @param chainIdentifier\r\n     * @param token\r\n     * @param abortSignal\r\n     * @private\r\n     */\r\n    async fetchPriceFromMaybeOperationalPriceApis(chainIdentifier, token, abortSignal) {\r\n        try {\r\n            return await (0, Utils_1.promiseAny)(this.getMaybeOperationalPriceApis().map(obj => (async () => {\r\n                try {\r\n                    const price = await obj.priceApi.getPrice(chainIdentifier, token, abortSignal);\r\n                    logger.debug(\"fetchPrice(): Price from \" + obj.priceApi.constructor.name + \": \", price.toString(10));\r\n                    obj.operational = true;\r\n                    return price;\r\n                }\r\n                catch (e) {\r\n                    if (abortSignal != null)\r\n                        abortSignal.throwIfAborted();\r\n                    obj.operational = false;\r\n                    throw e;\r\n                }\r\n            })()));\r\n        }\r\n        catch (e) {\r\n            if (abortSignal != null)\r\n                abortSignal.throwIfAborted();\r\n            throw e.find(err => !(err instanceof RequestError_1.RequestError)) || e[0];\r\n        }\r\n    }\r\n    /**\r\n     * Fetches the prices, first tries to use the operational price API (if any) and if that fails it falls back\r\n     *  to using maybe operational price APIs\r\n     *\r\n     * @param chainIdentifier\r\n     * @param token\r\n     * @param abortSignal\r\n     * @private\r\n     */\r\n    fetchPrice(chainIdentifier, token, abortSignal) {\r\n        return (0, Utils_1.tryWithRetries)(async () => {\r\n            const operationalPriceApi = this.getOperationalPriceApi();\r\n            if (operationalPriceApi != null) {\r\n                try {\r\n                    return await operationalPriceApi.priceApi.getPrice(chainIdentifier, token, abortSignal);\r\n                }\r\n                catch (err) {\r\n                    if (abortSignal != null)\r\n                        abortSignal.throwIfAborted();\r\n                    operationalPriceApi.operational = false;\r\n                    return await this.fetchPriceFromMaybeOperationalPriceApis(chainIdentifier, token, abortSignal);\r\n                }\r\n            }\r\n            return await this.fetchPriceFromMaybeOperationalPriceApis(chainIdentifier, token, abortSignal);\r\n        }, null, RequestError_1.RequestError, abortSignal);\r\n    }\r\n    getDecimals(chainIdentifier, token) {\r\n        if (this.coinsDecimals[chainIdentifier] == null)\r\n            return null;\r\n        return this.coinsDecimals[chainIdentifier][token.toString()];\r\n    }\r\n    /**\r\n     * Fetches BTC price in USD in parallel from multiple maybe operational price APIs\r\n     *\r\n     * @param abortSignal\r\n     * @private\r\n     */\r\n    async fetchUsdPriceFromMaybeOperationalPriceApis(abortSignal) {\r\n        try {\r\n            return await (0, Utils_1.promiseAny)(this.getMaybeOperationalPriceApis().map(obj => (async () => {\r\n                try {\r\n                    const price = await obj.priceApi.getUsdPrice(abortSignal);\r\n                    logger.debug(\"fetchPrice(): USD price from \" + obj.priceApi.constructor.name + \": \", price.toString(10));\r\n                    obj.operational = true;\r\n                    return price;\r\n                }\r\n                catch (e) {\r\n                    if (abortSignal != null)\r\n                        abortSignal.throwIfAborted();\r\n                    obj.operational = false;\r\n                    throw e;\r\n                }\r\n            })()));\r\n        }\r\n        catch (e) {\r\n            if (abortSignal != null)\r\n                abortSignal.throwIfAborted();\r\n            throw e.find(err => !(err instanceof RequestError_1.RequestError)) || e[0];\r\n        }\r\n    }\r\n    fetchUsdPrice(abortSignal) {\r\n        return (0, Utils_1.tryWithRetries)(() => {\r\n            const operationalPriceApi = this.getOperationalPriceApi();\r\n            if (operationalPriceApi != null) {\r\n                return operationalPriceApi.priceApi.getUsdPrice(abortSignal).catch(err => {\r\n                    if (abortSignal != null)\r\n                        abortSignal.throwIfAborted();\r\n                    operationalPriceApi.operational = false;\r\n                    return this.fetchUsdPriceFromMaybeOperationalPriceApis(abortSignal);\r\n                });\r\n            }\r\n            return this.fetchUsdPriceFromMaybeOperationalPriceApis(abortSignal);\r\n        }, null, RequestError_1.RequestError, abortSignal);\r\n    }\r\n}\r\nexports.RedundantSwapPrice = RedundantSwapPrice;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SingleSwapPrice = void 0;\r\nconst ICachedSwapPrice_1 = require(\"./abstract/ICachedSwapPrice\");\r\n/**\r\n * Swap price API using single price source\r\n */\r\nclass SingleSwapPrice extends ICachedSwapPrice_1.ICachedSwapPrice {\r\n    constructor(maxAllowedFeeDiffPPM, priceProvider, cacheTimeout) {\r\n        super(maxAllowedFeeDiffPPM, cacheTimeout);\r\n        this.priceProvider = priceProvider;\r\n    }\r\n    /**\r\n     * Fetch price in uSats (micro sats) for a given token against BTC\r\n     *\r\n     * @param chainIdentifier\r\n     * @param token\r\n     * @param abortSignal\r\n     * @protected\r\n     * @returns token price in uSats (micro sats)\r\n     */\r\n    fetchPrice(chainIdentifier, token, abortSignal) {\r\n        return this.priceProvider.getPrice(chainIdentifier, token, abortSignal);\r\n    }\r\n    /**\r\n     * Returns the decimal places of the specified token, or -1 if token should be ignored, returns null if\r\n     *  token is not found\r\n     *\r\n     * @param chainIdentifier\r\n     * @param token\r\n     * @protected\r\n     */\r\n    getDecimals(chainIdentifier, token) {\r\n        return this.priceProvider.getDecimals(chainIdentifier, token.toString());\r\n    }\r\n    fetchUsdPrice(abortSignal) {\r\n        return this.priceProvider.getUsdPrice(abortSignal);\r\n    }\r\n}\r\nexports.SingleSwapPrice = SingleSwapPrice;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SwapPriceWithChain = void 0;\r\nclass SwapPriceWithChain {\r\n    constructor(swapPrice, chainIdentifier) {\r\n        this.swapPrice = swapPrice;\r\n        this.chainIdentifier = chainIdentifier;\r\n    }\r\n    /**\r\n     * Checks whether the swap amounts are valid given the current market rate for a given pair\r\n     *\r\n     * @param amountSats Amount of sats (BTC) to be received from the swap\r\n     * @param satsBaseFee Base fee in sats (BTC) as reported by the intermediary\r\n     * @param feePPM PPM fee rate as reported by the intermediary\r\n     * @param paidToken Amount of token to be paid to the swap\r\n     * @param token\r\n     * @param abortSignal\r\n     * @param preFetchedPrice Already pre-fetched price\r\n     */\r\n    async isValidAmountSend(amountSats, satsBaseFee, feePPM, paidToken, token, abortSignal, preFetchedPrice) {\r\n        return this.swapPrice.isValidAmountSend(this.chainIdentifier, amountSats, satsBaseFee, feePPM, paidToken, token, abortSignal, preFetchedPrice);\r\n    }\r\n    /**\r\n     * Checks whether the swap amounts are valid given the current market rate for a given pair\r\n     *\r\n     * @param amountSats Amount of sats (BTC) to be paid to the swap\r\n     * @param satsBaseFee Base fee in sats (BTC) as reported by the intermediary\r\n     * @param feePPM PPM fee rate as reported by the intermediary\r\n     * @param receiveToken Amount of token to be received from the swap\r\n     * @param token\r\n     * @param abortSignal\r\n     * @param preFetchedPrice Already pre-fetched price\r\n     */\r\n    async isValidAmountReceive(amountSats, satsBaseFee, feePPM, receiveToken, token, abortSignal, preFetchedPrice) {\r\n        return this.swapPrice.isValidAmountReceive(this.chainIdentifier, amountSats, satsBaseFee, feePPM, receiveToken, token, abortSignal, preFetchedPrice);\r\n    }\r\n    preFetchPrice(token, abortSignal) {\r\n        return this.swapPrice.preFetchPrice(this.chainIdentifier, token, abortSignal);\r\n    }\r\n    preFetchUsdPrice(abortSignal) {\r\n        return this.swapPrice.preFetchUsdPrice(abortSignal);\r\n    }\r\n    /**\r\n     * Returns amount of {toToken} that are equivalent to {fromAmount} satoshis\r\n     *\r\n     * @param fromAmount        Amount of satoshis\r\n     * @param toToken           Token\r\n     * @param abortSignal\r\n     * @param preFetchedPrice\r\n     * @throws {Error} when token is not found\r\n     */\r\n    async getFromBtcSwapAmount(fromAmount, toToken, abortSignal, preFetchedPrice) {\r\n        return this.swapPrice.getFromBtcSwapAmount(this.chainIdentifier, fromAmount, toToken, abortSignal, preFetchedPrice);\r\n    }\r\n    /**\r\n     * Returns amount of satoshis that are equivalent to {fromAmount} of {fromToken}\r\n     *\r\n     * @param fromAmount Amount of the token\r\n     * @param fromToken Token\r\n     * @param abortSignal\r\n     * @param preFetchedPrice Pre-fetched swap price if available\r\n     * @throws {Error} when token is not found\r\n     */\r\n    async getToBtcSwapAmount(fromAmount, fromToken, abortSignal, preFetchedPrice) {\r\n        return this.swapPrice.getToBtcSwapAmount(this.chainIdentifier, fromAmount, fromToken, abortSignal, preFetchedPrice);\r\n    }\r\n    /**\r\n     * Returns whether the token should be ignored and pricing for it not calculated\r\n     *\r\n     * @param tokenAddress\r\n     * @throws {Error} if token is not found\r\n     */\r\n    shouldIgnore(tokenAddress) {\r\n        return this.swapPrice.shouldIgnore(this.chainIdentifier, tokenAddress);\r\n    }\r\n    async getBtcUsdValue(btcSats, abortSignal, preFetchedPrice) {\r\n        return this.swapPrice.getBtcUsdValue(btcSats, abortSignal, preFetchedPrice);\r\n    }\r\n    async getTokenUsdValue(tokenAmount, token, abortSignal, preFetchedPrice) {\r\n        return this.swapPrice.getTokenUsdValue(this.chainIdentifier, tokenAmount, token, abortSignal, preFetchedPrice);\r\n    }\r\n    getUsdValue(amount, token, abortSignal, preFetchedUsdPrice) {\r\n        return this.swapPrice.getUsdValue(amount, token, abortSignal, preFetchedUsdPrice);\r\n    }\r\n}\r\nexports.SwapPriceWithChain = SwapPriceWithChain;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.toTokenAmount = exports.toDecimal = exports.fromDecimal = exports.isToken = exports.isSCToken = exports.BitcoinTokens = exports.isBtcToken = void 0;\r\nfunction isBtcToken(obj) {\r\n    return typeof (obj) === \"object\" &&\r\n        obj.chain === \"BTC\" &&\r\n        typeof (obj.lightning) === \"boolean\" &&\r\n        typeof (obj.ticker) === \"string\" &&\r\n        typeof (obj.decimals) === \"number\" &&\r\n        typeof (obj.name) === \"string\";\r\n}\r\nexports.isBtcToken = isBtcToken;\r\nexports.BitcoinTokens = {\r\n    BTC: {\r\n        chain: \"BTC\",\r\n        lightning: false,\r\n        ticker: \"BTC\",\r\n        decimals: 8,\r\n        name: \"Bitcoin (on-chain L1)\"\r\n    },\r\n    BTCLN: {\r\n        chain: \"BTC\",\r\n        lightning: true,\r\n        ticker: \"BTC\",\r\n        decimals: 8,\r\n        name: \"Bitcoin (lightning L2)\"\r\n    }\r\n};\r\nfunction isSCToken(obj) {\r\n    return typeof (obj) === \"object\" &&\r\n        obj.chain === \"SC\" &&\r\n        typeof (obj.chainId) === \"string\" &&\r\n        typeof (obj.address) === \"string\" &&\r\n        typeof (obj.ticker) === \"string\" &&\r\n        typeof (obj.decimals) === \"number\" &&\r\n        typeof (obj.name) === \"string\";\r\n}\r\nexports.isSCToken = isSCToken;\r\nfunction isToken(obj) {\r\n    return isBtcToken(obj) || isSCToken(obj);\r\n}\r\nexports.isToken = isToken;\r\nfunction fromDecimal(amount, decimalCount) {\r\n    if (amount.includes(\".\")) {\r\n        const [before, after] = amount.split(\".\");\r\n        if (decimalCount < 0) {\r\n            return BigInt(before.substring(0, before.length + decimalCount));\r\n        }\r\n        if (after.length > decimalCount) {\r\n            //Cut the last digits\r\n            return BigInt((before === \"0\" ? \"\" : before) + after.substring(0, decimalCount));\r\n        }\r\n        return BigInt((before === \"0\" ? \"\" : before) + after.padEnd(decimalCount, \"0\"));\r\n    }\r\n    else {\r\n        if (decimalCount < 0) {\r\n            return BigInt(amount.substring(0, amount.length + decimalCount));\r\n        }\r\n        else {\r\n            return BigInt(amount + \"0\".repeat(decimalCount));\r\n        }\r\n    }\r\n}\r\nexports.fromDecimal = fromDecimal;\r\nfunction toDecimal(amount, decimalCount, cut, displayDecimals) {\r\n    if (decimalCount <= 0) {\r\n        return amount.toString(10) + \"0\".repeat(-decimalCount);\r\n    }\r\n    const amountStr = amount.toString(10).padStart(decimalCount + 1, \"0\");\r\n    const splitPoint = amountStr.length - decimalCount;\r\n    const decimalPart = amountStr.substring(splitPoint, amountStr.length);\r\n    let cutTo = decimalPart.length;\r\n    if (cut && cutTo > 0) {\r\n        for (let i = decimalPart.length - 1; i--; i >= 0) {\r\n            if (decimalPart.charAt(i) === \"0\") {\r\n                cutTo = i;\r\n            }\r\n            else\r\n                break;\r\n        }\r\n        if (cutTo === 0)\r\n            cutTo = 1;\r\n    }\r\n    if (displayDecimals === 0)\r\n        return amountStr.substring(0, splitPoint);\r\n    if (displayDecimals != null && cutTo > displayDecimals)\r\n        cutTo = displayDecimals;\r\n    return amountStr.substring(0, splitPoint) + \".\" + decimalPart.substring(0, cutTo);\r\n}\r\nexports.toDecimal = toDecimal;\r\nfunction toTokenAmount(amount, token, prices) {\r\n    if (amount == null)\r\n        return null;\r\n    let amountStr = toDecimal(amount, token.decimals, undefined, token.displayDecimals);\r\n    return {\r\n        rawAmount: amount,\r\n        amount: amountStr,\r\n        _amount: parseFloat(amountStr),\r\n        token,\r\n        usdValue: (abortSignal, preFetchedUsdPrice) => prices.getUsdValue(amount, token, abortSignal, preFetchedUsdPrice),\r\n        toString: () => amountStr + \" \" + token.ticker\r\n    };\r\n}\r\nexports.toTokenAmount = toTokenAmount;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SwapDirection = void 0;\r\nvar SwapDirection;\r\n(function (SwapDirection) {\r\n    SwapDirection[SwapDirection[\"FROM_BTC\"] = 0] = \"FROM_BTC\";\r\n    SwapDirection[SwapDirection[\"TO_BTC\"] = 1] = \"TO_BTC\";\r\n})(SwapDirection = exports.SwapDirection || (exports.SwapDirection = {}));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ISwap = exports.ppmToPercentage = exports.isISwapInit = void 0;\r\nconst SwapType_1 = require(\"./enums/SwapType\");\r\nconst events_1 = require(\"events\");\r\nconst ISwapPrice_1 = require(\"../prices/abstract/ISwapPrice\");\r\nconst Utils_1 = require(\"../utils/Utils\");\r\nconst SwapDirection_1 = require(\"./enums/SwapDirection\");\r\nfunction isISwapInit(obj) {\r\n    return typeof obj === 'object' &&\r\n        obj != null &&\r\n        (0, ISwapPrice_1.isPriceInfoType)(obj.pricingInfo) &&\r\n        typeof obj.url === 'string' &&\r\n        typeof obj.expiry === 'number' &&\r\n        typeof (obj.swapFee) === \"bigint\" &&\r\n        (obj.swapFeeBtc == null || typeof (obj.swapFeeBtc) === \"bigint\") &&\r\n        (typeof obj.exactIn === 'boolean');\r\n}\r\nexports.isISwapInit = isISwapInit;\r\nfunction ppmToPercentage(ppm) {\r\n    if (ppm == null)\r\n        return null;\r\n    const percentage = Number(ppm) / 10000;\r\n    return {\r\n        ppm,\r\n        decimal: Number(ppm) / 1000000,\r\n        percentage: percentage,\r\n        toString: (decimals) => (decimals != null ? percentage.toFixed(decimals) : percentage) + \"%\"\r\n    };\r\n}\r\nexports.ppmToPercentage = ppmToPercentage;\r\nclass ISwap {\r\n    constructor(wrapper, swapInitOrObj) {\r\n        this.currentVersion = 1;\r\n        this.initiated = false;\r\n        /**\r\n         * Event emitter emitting \"swapState\" event when swap's state changes\r\n         */\r\n        this.events = new events_1.EventEmitter();\r\n        this.chainIdentifier = wrapper.chainIdentifier;\r\n        this.wrapper = wrapper;\r\n        if (isISwapInit(swapInitOrObj)) {\r\n            Object.assign(this, swapInitOrObj);\r\n            this.version = this.currentVersion;\r\n            this.createdAt = Date.now();\r\n            this.randomNonce = (0, Utils_1.randomBytes)(16).toString(\"hex\");\r\n        }\r\n        else {\r\n            this.expiry = swapInitOrObj.expiry;\r\n            this.url = swapInitOrObj.url;\r\n            this.state = swapInitOrObj.state;\r\n            this.pricingInfo = {\r\n                isValid: swapInitOrObj._isValid,\r\n                differencePPM: swapInitOrObj._differencePPM == null ? null : BigInt(swapInitOrObj._differencePPM),\r\n                satsBaseFee: swapInitOrObj._satsBaseFee == null ? null : BigInt(swapInitOrObj._satsBaseFee),\r\n                feePPM: swapInitOrObj._feePPM == null ? null : BigInt(swapInitOrObj._feePPM),\r\n                realPriceUSatPerToken: swapInitOrObj._realPriceUSatPerToken == null ? null : BigInt(swapInitOrObj._realPriceUSatPerToken),\r\n                swapPriceUSatPerToken: swapInitOrObj._swapPriceUSatPerToken == null ? null : BigInt(swapInitOrObj._swapPriceUSatPerToken),\r\n            };\r\n            this.swapFee = swapInitOrObj.swapFee == null ? null : BigInt(swapInitOrObj.swapFee);\r\n            this.swapFeeBtc = swapInitOrObj.swapFeeBtc == null ? null : BigInt(swapInitOrObj.swapFeeBtc);\r\n            this.version = swapInitOrObj.version;\r\n            this.initiated = swapInitOrObj.initiated;\r\n            this.exactIn = swapInitOrObj.exactIn;\r\n            this.createdAt = swapInitOrObj.createdAt ?? swapInitOrObj.expiry;\r\n            this.randomNonce = swapInitOrObj.randomNonce;\r\n        }\r\n        if (this.version !== this.currentVersion) {\r\n            this.upgradeVersion();\r\n        }\r\n        if (this.initiated == null)\r\n            this.initiated = true;\r\n    }\r\n    /**\r\n     * Waits till the swap reaches a specific state\r\n     *\r\n     * @param targetState The state to wait for\r\n     * @param type Whether to wait for the state exactly or also to a state with a higher number\r\n     * @param abortSignal\r\n     * @protected\r\n     */\r\n    waitTillState(targetState, type = \"eq\", abortSignal) {\r\n        return new Promise((resolve, reject) => {\r\n            let listener;\r\n            listener = (swap) => {\r\n                if (type === \"eq\" ? swap.state === targetState : type === \"gte\" ? swap.state >= targetState : swap.state != targetState) {\r\n                    resolve();\r\n                    this.events.removeListener(\"swapState\", listener);\r\n                }\r\n            };\r\n            this.events.on(\"swapState\", listener);\r\n            if (abortSignal != null)\r\n                abortSignal.addEventListener(\"abort\", () => {\r\n                    this.events.removeListener(\"swapState\", listener);\r\n                    reject(abortSignal.reason);\r\n                });\r\n        });\r\n    }\r\n    //////////////////////////////\r\n    //// Pricing\r\n    tryRecomputeSwapPrice() {\r\n        if (this.pricingInfo.swapPriceUSatPerToken == null) {\r\n            if (this.getDirection() === SwapDirection_1.SwapDirection.TO_BTC) {\r\n                const input = this.getInput();\r\n                this.pricingInfo = this.wrapper.prices.recomputePriceInfoSend(this.chainIdentifier, this.getOutput().rawAmount, this.pricingInfo.satsBaseFee, this.pricingInfo.feePPM, input.rawAmount, input.token.address);\r\n            }\r\n            else {\r\n                const output = this.getOutput();\r\n                this.pricingInfo = this.wrapper.prices.recomputePriceInfoReceive(this.chainIdentifier, this.getInput().rawAmount, this.pricingInfo.satsBaseFee, this.pricingInfo.feePPM, output.rawAmount, output.token.address);\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Re-fetches & revalidates the price data\r\n     */\r\n    async refreshPriceData() {\r\n        if (this.pricingInfo == null)\r\n            return null;\r\n        if (this.getDirection() === SwapDirection_1.SwapDirection.TO_BTC) {\r\n            const input = this.getInput();\r\n            this.pricingInfo = await this.wrapper.prices.isValidAmountSend(this.chainIdentifier, this.getOutput().rawAmount, this.pricingInfo.satsBaseFee, this.pricingInfo.feePPM, input.rawAmount, input.token.address);\r\n        }\r\n        else {\r\n            const output = this.getOutput();\r\n            this.pricingInfo = await this.wrapper.prices.isValidAmountReceive(this.chainIdentifier, this.getInput().rawAmount, this.pricingInfo.satsBaseFee, this.pricingInfo.feePPM, output.rawAmount, output.token.address);\r\n        }\r\n    }\r\n    /**\r\n     * Checks if the pricing for the swap is valid, according to max allowed price difference set in the ISwapPrice\r\n     */\r\n    hasValidPrice() {\r\n        return this.pricingInfo == null ? null : this.pricingInfo.isValid;\r\n    }\r\n    /**\r\n     * Returns pricing info about the swap\r\n     */\r\n    getPriceInfo() {\r\n        const swapPrice = this.getDirection() === SwapDirection_1.SwapDirection.TO_BTC ?\r\n            100000000000000 / Number(this.pricingInfo.swapPriceUSatPerToken) :\r\n            Number(this.pricingInfo.swapPriceUSatPerToken) / 100000000000000;\r\n        const marketPrice = this.getDirection() === SwapDirection_1.SwapDirection.TO_BTC ?\r\n            100000000000000 / Number(this.pricingInfo.realPriceUSatPerToken) :\r\n            Number(this.pricingInfo.swapPriceUSatPerToken) / 100000000000000;\r\n        return {\r\n            marketPrice,\r\n            swapPrice,\r\n            difference: ppmToPercentage(this.pricingInfo.differencePPM)\r\n        };\r\n    }\r\n    /**\r\n     * @param signer Signer to check with this swap's initiator\r\n     * @throws {Error} When signer's address doesn't match with the swap's initiator one\r\n     */\r\n    checkSigner(signer) {\r\n        if ((typeof (signer) === \"string\" ? signer : signer.getAddress()) !== this._getInitiator())\r\n            throw new Error(\"Invalid signer provided!\");\r\n    }\r\n    isInitiated() {\r\n        return this.initiated;\r\n    }\r\n    _setInitiated() {\r\n        this.initiated = true;\r\n    }\r\n    /**\r\n     * Returns quote expiry in UNIX millis\r\n     */\r\n    getQuoteExpiry() {\r\n        return this.expiry;\r\n    }\r\n    /**\r\n     * Returns the type of the swap\r\n     */\r\n    getType() {\r\n        return this.TYPE;\r\n    }\r\n    /**\r\n     * Returns the direction of the swap\r\n     */\r\n    getDirection() {\r\n        return this.TYPE === SwapType_1.SwapType.TO_BTC || this.TYPE === SwapType_1.SwapType.TO_BTCLN ? SwapDirection_1.SwapDirection.TO_BTC : SwapDirection_1.SwapDirection.FROM_BTC;\r\n    }\r\n    /**\r\n     * Returns the current state of the swap\r\n     */\r\n    getState() {\r\n        return this.state;\r\n    }\r\n    //////////////////////////////\r\n    //// Storage\r\n    serialize() {\r\n        if (this.pricingInfo == null)\r\n            return {};\r\n        return {\r\n            id: this.getId(),\r\n            type: this.getType(),\r\n            escrowHash: this._getEscrowHash(),\r\n            initiator: this._getInitiator(),\r\n            _isValid: this.pricingInfo.isValid,\r\n            _differencePPM: this.pricingInfo.differencePPM == null ? null : this.pricingInfo.differencePPM.toString(10),\r\n            _satsBaseFee: this.pricingInfo.satsBaseFee == null ? null : this.pricingInfo.satsBaseFee.toString(10),\r\n            _feePPM: this.pricingInfo.feePPM == null ? null : this.pricingInfo.feePPM.toString(10),\r\n            _realPriceUSatPerToken: this.pricingInfo.realPriceUSatPerToken == null ? null : this.pricingInfo.realPriceUSatPerToken.toString(10),\r\n            _swapPriceUSatPerToken: this.pricingInfo.swapPriceUSatPerToken == null ? null : this.pricingInfo.swapPriceUSatPerToken.toString(10),\r\n            state: this.state,\r\n            url: this.url,\r\n            swapFee: this.swapFee == null ? null : this.swapFee.toString(10),\r\n            swapFeeBtc: this.swapFeeBtc == null ? null : this.swapFeeBtc.toString(10),\r\n            expiry: this.expiry,\r\n            version: this.version,\r\n            initiated: this.initiated,\r\n            exactIn: this.exactIn,\r\n            createdAt: this.createdAt,\r\n            randomNonce: this.randomNonce\r\n        };\r\n    }\r\n    _save() {\r\n        if (this.isQuoteExpired()) {\r\n            return this.wrapper.removeSwapData(this);\r\n        }\r\n        else {\r\n            return this.wrapper.saveSwapData(this);\r\n        }\r\n    }\r\n    async _saveAndEmit(state) {\r\n        if (state != null)\r\n            this.state = state;\r\n        await this._save();\r\n        this._emitEvent();\r\n    }\r\n    //////////////////////////////\r\n    //// Events\r\n    _emitEvent() {\r\n        this.wrapper.events.emit(\"swapState\", this);\r\n        this.events.emit(\"swapState\", this);\r\n    }\r\n}\r\nexports.ISwap = ISwap;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ISwapWrapper = void 0;\r\nconst events_1 = require(\"events\");\r\nconst IntermediaryError_1 = require(\"../errors/IntermediaryError\");\r\nconst Utils_1 = require(\"../utils/Utils\");\r\nclass ISwapWrapper {\r\n    /**\r\n     * @param chainIdentifier\r\n     * @param unifiedStorage\r\n     * @param unifiedChainEvents\r\n     * @param chain\r\n     * @param contract Underlying contract handling the swaps\r\n     * @param prices Swap pricing handler\r\n     * @param tokens Chain specific token data\r\n     * @param swapDataDeserializer Deserializer for SwapData\r\n     * @param options\r\n     * @param events Instance to use for emitting events\r\n     */\r\n    constructor(chainIdentifier, unifiedStorage, unifiedChainEvents, chain, prices, tokens, options, events) {\r\n        this.logger = (0, Utils_1.getLogger)(this.constructor.name + \": \");\r\n        this.pendingSwaps = new Map();\r\n        this.isInitialized = false;\r\n        this.tickInterval = null;\r\n        this.unifiedStorage = unifiedStorage;\r\n        this.unifiedChainEvents = unifiedChainEvents;\r\n        this.chainIdentifier = chainIdentifier;\r\n        this.chain = chain;\r\n        this.prices = prices;\r\n        this.events = events || new events_1.EventEmitter();\r\n        this.options = options;\r\n        this.tokens = {};\r\n        for (let tokenData of tokens) {\r\n            const chainData = tokenData.chains[chainIdentifier];\r\n            if (chainData == null)\r\n                continue;\r\n            this.tokens[chainData.address] = {\r\n                chain: \"SC\",\r\n                chainId: this.chainIdentifier,\r\n                address: chainData.address,\r\n                decimals: chainData.decimals,\r\n                ticker: tokenData.ticker,\r\n                name: tokenData.name,\r\n                displayDecimals: chainData.displayDecimals\r\n            };\r\n        }\r\n    }\r\n    /**\r\n     * Pre-fetches swap price for a given swap\r\n     *\r\n     * @param amountData\r\n     * @param abortSignal\r\n     * @protected\r\n     * @returns Price of the token in uSats (micro sats)\r\n     */\r\n    preFetchPrice(amountData, abortSignal) {\r\n        return this.prices.preFetchPrice(this.chainIdentifier, amountData.token, abortSignal).catch(e => {\r\n            this.logger.error(\"preFetchPrice(): Error: \", e);\r\n            return null;\r\n        });\r\n    }\r\n    /**\r\n     * Verifies returned  price for swaps\r\n     *\r\n     * @param lpServiceData Service data for the service in question (TO_BTCLN, TO_BTC, etc.) of the given intermediary\r\n     * @param send Whether this is a send (SOL -> SC) or receive (BTC -> SC) swap\r\n     * @param amountSats Amount in BTC\r\n     * @param amountToken Amount in token\r\n     * @param token Token used in the swap\r\n     * @param feeData Fee data as returned by the intermediary\r\n     * @param pricePrefetchPromise Price pre-fetch promise\r\n     * @param abortSignal\r\n     * @protected\r\n     * @returns Price info object\r\n     * @throws {IntermediaryError} if the calculated fee is too high\r\n     */\r\n    async verifyReturnedPrice(lpServiceData, send, amountSats, amountToken, token, feeData, pricePrefetchPromise = Promise.resolve(null), abortSignal) {\r\n        const swapBaseFee = BigInt(lpServiceData.swapBaseFee);\r\n        const swapFeePPM = BigInt(lpServiceData.swapFeePPM);\r\n        if (send)\r\n            amountToken = amountToken - feeData.networkFee;\r\n        const isValidAmount = await (send ?\r\n            this.prices.isValidAmountSend(this.chainIdentifier, amountSats, swapBaseFee, swapFeePPM, amountToken, token, abortSignal, await pricePrefetchPromise) :\r\n            this.prices.isValidAmountReceive(this.chainIdentifier, amountSats, swapBaseFee, swapFeePPM, amountToken, token, abortSignal, await pricePrefetchPromise));\r\n        if (!isValidAmount.isValid)\r\n            throw new IntermediaryError_1.IntermediaryError(\"Fee too high\");\r\n        return isValidAmount;\r\n    }\r\n    /**\r\n     * Initializes the swap wrapper, needs to be called before any other action can be taken\r\n     */\r\n    async init(noTimers = false, noCheckPastSwaps = false) {\r\n        if (this.isInitialized)\r\n            return;\r\n        const hasEventListener = this.processEvent != null;\r\n        //Save events received in the meantime into the event queue and process them only after we've checked and\r\n        // processed all the past swaps\r\n        let eventQueue = [];\r\n        const initListener = (event, swap) => {\r\n            eventQueue.push({ event, swap });\r\n            return Promise.resolve();\r\n        };\r\n        if (hasEventListener)\r\n            this.unifiedChainEvents.registerListener(this.TYPE, initListener, this.swapDeserializer.bind(null, this));\r\n        if (!noCheckPastSwaps)\r\n            await this.checkPastSwaps();\r\n        if (hasEventListener) {\r\n            //Process accumulated event queue\r\n            for (let event of eventQueue) {\r\n                await this.processEvent(event.event, event.swap);\r\n            }\r\n            //Register the correct event handler\r\n            this.unifiedChainEvents.unregisterListener(this.TYPE);\r\n            this.unifiedChainEvents.registerListener(this.TYPE, this.processEvent.bind(this), this.swapDeserializer.bind(null, this));\r\n        }\r\n        if (!noTimers)\r\n            this.startTickInterval();\r\n        // this.logger.info(\"init(): Swap wrapper initialized\");\r\n        this.isInitialized = true;\r\n    }\r\n    startTickInterval() {\r\n        if (this.tickSwapState == null || this.tickSwapState.length === 0)\r\n            return;\r\n        this.tickInterval = setInterval(() => {\r\n            this.tick();\r\n        }, 1000);\r\n    }\r\n    async checkPastSwaps(pastSwaps) {\r\n        if (pastSwaps == null)\r\n            pastSwaps = await this.unifiedStorage.query([[{ key: \"type\", value: this.TYPE }, { key: \"state\", value: this.pendingSwapStates }]], (val) => new this.swapDeserializer(this, val));\r\n        //Check past swaps\r\n        const changedSwaps = [];\r\n        const removeSwaps = [];\r\n        await Promise.all(pastSwaps.map((swap) => swap._sync(false).then(changed => {\r\n            if (swap.isQuoteExpired()) {\r\n                removeSwaps.push(swap);\r\n                this.logger.debug(\"init(): Removing expired swap: \" + swap.getId());\r\n            }\r\n            else {\r\n                if (changed)\r\n                    changedSwaps.push(swap);\r\n            }\r\n        }).catch(e => this.logger.error(\"init(): Error when checking swap \" + swap.getId() + \": \", e))));\r\n        await this.unifiedStorage.removeAll(removeSwaps);\r\n        await this.unifiedStorage.saveAll(changedSwaps);\r\n    }\r\n    async tick(swaps) {\r\n        if (swaps == null)\r\n            swaps = await this.unifiedStorage.query([[{ key: \"type\", value: this.TYPE }, { key: \"state\", value: this.tickSwapState }]], (val) => new this.swapDeserializer(this, val));\r\n        for (let pendingSwap of this.pendingSwaps.values()) {\r\n            const value = pendingSwap.deref();\r\n            if (value != null)\r\n                value._tick(true);\r\n        }\r\n        swaps.forEach(value => {\r\n            value._tick(true);\r\n        });\r\n    }\r\n    saveSwapData(swap) {\r\n        if (!swap.isInitiated()) {\r\n            this.logger.debug(\"saveSwapData(): Swap \" + swap.getId() + \" not initiated, saving to pending swaps\");\r\n            this.pendingSwaps.set(swap.getId(), new WeakRef(swap));\r\n            return Promise.resolve();\r\n        }\r\n        else {\r\n            this.pendingSwaps.delete(swap.getId());\r\n        }\r\n        return this.unifiedStorage.save(swap);\r\n    }\r\n    removeSwapData(swap) {\r\n        this.pendingSwaps.delete(swap.getId());\r\n        if (!swap.isInitiated())\r\n            return Promise.resolve();\r\n        return this.unifiedStorage.remove(swap);\r\n    }\r\n    /**\r\n     * Un-subscribes from event listeners on Solana\r\n     */\r\n    async stop() {\r\n        this.isInitialized = false;\r\n        this.unifiedChainEvents.unregisterListener(this.TYPE);\r\n        this.logger.info(\"stop(): Swap wrapper stopped\");\r\n        if (this.tickInterval != null)\r\n            clearInterval(this.tickInterval);\r\n    }\r\n    /**\r\n     * Returns the smart chain's native token used to pay for fees\r\n     */\r\n    getNativeToken() {\r\n        return this.tokens[this.chain.getNativeCurrencyAddress()];\r\n    }\r\n}\r\nexports.ISwapWrapper = ISwapWrapper;\r\n","/**\n * lodash (Custom Build) <https://lodash.com/>\n * Build: `lodash modularize exports=\"npm\" -o ./`\n * Copyright jQuery Foundation and other contributors <https://jquery.org/>\n * Released under MIT license <https://lodash.com/license>\n * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>\n * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors\n */\n\n/** Used as the size to enable large array optimizations. */\nvar LARGE_ARRAY_SIZE = 200;\n\n/** Used to stand-in for `undefined` hash values. */\nvar HASH_UNDEFINED = '__lodash_hash_undefined__';\n\n/** Used as references for various `Number` constants. */\nvar MAX_SAFE_INTEGER = 9007199254740991;\n\n/** `Object#toString` result references. */\nvar argsTag = '[object Arguments]',\n    arrayTag = '[object Array]',\n    boolTag = '[object Boolean]',\n    dateTag = '[object Date]',\n    errorTag = '[object Error]',\n    funcTag = '[object Function]',\n    genTag = '[object GeneratorFunction]',\n    mapTag = '[object Map]',\n    numberTag = '[object Number]',\n    objectTag = '[object Object]',\n    promiseTag = '[object Promise]',\n    regexpTag = '[object RegExp]',\n    setTag = '[object Set]',\n    stringTag = '[object String]',\n    symbolTag = '[object Symbol]',\n    weakMapTag = '[object WeakMap]';\n\nvar arrayBufferTag = '[object ArrayBuffer]',\n    dataViewTag = '[object DataView]',\n    float32Tag = '[object Float32Array]',\n    float64Tag = '[object Float64Array]',\n    int8Tag = '[object Int8Array]',\n    int16Tag = '[object Int16Array]',\n    int32Tag = '[object Int32Array]',\n    uint8Tag = '[object Uint8Array]',\n    uint8ClampedTag = '[object Uint8ClampedArray]',\n    uint16Tag = '[object Uint16Array]',\n    uint32Tag = '[object Uint32Array]';\n\n/**\n * Used to match `RegExp`\n * [syntax characters](http://ecma-international.org/ecma-262/7.0/#sec-patterns).\n */\nvar reRegExpChar = /[\\\\^$.*+?()[\\]{}|]/g;\n\n/** Used to match `RegExp` flags from their coerced string values. */\nvar reFlags = /\\w*$/;\n\n/** Used to detect host constructors (Safari). */\nvar reIsHostCtor = /^\\[object .+?Constructor\\]$/;\n\n/** Used to detect unsigned integer values. */\nvar reIsUint = /^(?:0|[1-9]\\d*)$/;\n\n/** Used to identify `toStringTag` values supported by `_.clone`. */\nvar cloneableTags = {};\ncloneableTags[argsTag] = cloneableTags[arrayTag] =\ncloneableTags[arrayBufferTag] = cloneableTags[dataViewTag] =\ncloneableTags[boolTag] = cloneableTags[dateTag] =\ncloneableTags[float32Tag] = cloneableTags[float64Tag] =\ncloneableTags[int8Tag] = cloneableTags[int16Tag] =\ncloneableTags[int32Tag] = cloneableTags[mapTag] =\ncloneableTags[numberTag] = cloneableTags[objectTag] =\ncloneableTags[regexpTag] = cloneableTags[setTag] =\ncloneableTags[stringTag] = cloneableTags[symbolTag] =\ncloneableTags[uint8Tag] = cloneableTags[uint8ClampedTag] =\ncloneableTags[uint16Tag] = cloneableTags[uint32Tag] = true;\ncloneableTags[errorTag] = cloneableTags[funcTag] =\ncloneableTags[weakMapTag] = false;\n\n/** Detect free variable `global` from Node.js. */\nvar freeGlobal = typeof global == 'object' && global && global.Object === Object && global;\n\n/** Detect free variable `self`. */\nvar freeSelf = typeof self == 'object' && self && self.Object === Object && self;\n\n/** Used as a reference to the global object. */\nvar root = freeGlobal || freeSelf || Function('return this')();\n\n/** Detect free variable `exports`. */\nvar freeExports = typeof exports == 'object' && exports && !exports.nodeType && exports;\n\n/** Detect free variable `module`. */\nvar freeModule = freeExports && typeof module == 'object' && module && !module.nodeType && module;\n\n/** Detect the popular CommonJS extension `module.exports`. */\nvar moduleExports = freeModule && freeModule.exports === freeExports;\n\n/**\n * Adds the key-value `pair` to `map`.\n *\n * @private\n * @param {Object} map The map to modify.\n * @param {Array} pair The key-value pair to add.\n * @returns {Object} Returns `map`.\n */\nfunction addMapEntry(map, pair) {\n  // Don't return `map.set` because it's not chainable in IE 11.\n  map.set(pair[0], pair[1]);\n  return map;\n}\n\n/**\n * Adds `value` to `set`.\n *\n * @private\n * @param {Object} set The set to modify.\n * @param {*} value The value to add.\n * @returns {Object} Returns `set`.\n */\nfunction addSetEntry(set, value) {\n  // Don't return `set.add` because it's not chainable in IE 11.\n  set.add(value);\n  return set;\n}\n\n/**\n * A specialized version of `_.forEach` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns `array`.\n */\nfunction arrayEach(array, iteratee) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  while (++index < length) {\n    if (iteratee(array[index], index, array) === false) {\n      break;\n    }\n  }\n  return array;\n}\n\n/**\n * Appends the elements of `values` to `array`.\n *\n * @private\n * @param {Array} array The array to modify.\n * @param {Array} values The values to append.\n * @returns {Array} Returns `array`.\n */\nfunction arrayPush(array, values) {\n  var index = -1,\n      length = values.length,\n      offset = array.length;\n\n  while (++index < length) {\n    array[offset + index] = values[index];\n  }\n  return array;\n}\n\n/**\n * A specialized version of `_.reduce` for arrays without support for\n * iteratee shorthands.\n *\n * @private\n * @param {Array} [array] The array to iterate over.\n * @param {Function} iteratee The function invoked per iteration.\n * @param {*} [accumulator] The initial value.\n * @param {boolean} [initAccum] Specify using the first element of `array` as\n *  the initial value.\n * @returns {*} Returns the accumulated value.\n */\nfunction arrayReduce(array, iteratee, accumulator, initAccum) {\n  var index = -1,\n      length = array ? array.length : 0;\n\n  if (initAccum && length) {\n    accumulator = array[++index];\n  }\n  while (++index < length) {\n    accumulator = iteratee(accumulator, array[index], index, array);\n  }\n  return accumulator;\n}\n\n/**\n * The base implementation of `_.times` without support for iteratee shorthands\n * or max array length checks.\n *\n * @private\n * @param {number} n The number of times to invoke `iteratee`.\n * @param {Function} iteratee The function invoked per iteration.\n * @returns {Array} Returns the array of results.\n */\nfunction baseTimes(n, iteratee) {\n  var index = -1,\n      result = Array(n);\n\n  while (++index < n) {\n    result[index] = iteratee(index);\n  }\n  return result;\n}\n\n/**\n * Gets the value at `key` of `object`.\n *\n * @private\n * @param {Object} [object] The object to query.\n * @param {string} key The key of the property to get.\n * @returns {*} Returns the property value.\n */\nfunction getValue(object, key) {\n  return object == null ? undefined : object[key];\n}\n\n/**\n * Checks if `value` is a host object in IE < 9.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a host object, else `false`.\n */\nfunction isHostObject(value) {\n  // Many host objects are `Object` objects that can coerce to strings\n  // despite having improperly defined `toString` methods.\n  var result = false;\n  if (value != null && typeof value.toString != 'function') {\n    try {\n      result = !!(value + '');\n    } catch (e) {}\n  }\n  return result;\n}\n\n/**\n * Converts `map` to its key-value pairs.\n *\n * @private\n * @param {Object} map The map to convert.\n * @returns {Array} Returns the key-value pairs.\n */\nfunction mapToArray(map) {\n  var index = -1,\n      result = Array(map.size);\n\n  map.forEach(function(value, key) {\n    result[++index] = [key, value];\n  });\n  return result;\n}\n\n/**\n * Creates a unary function that invokes `func` with its argument transformed.\n *\n * @private\n * @param {Function} func The function to wrap.\n * @param {Function} transform The argument transform.\n * @returns {Function} Returns the new function.\n */\nfunction overArg(func, transform) {\n  return function(arg) {\n    return func(transform(arg));\n  };\n}\n\n/**\n * Converts `set` to an array of its values.\n *\n * @private\n * @param {Object} set The set to convert.\n * @returns {Array} Returns the values.\n */\nfunction setToArray(set) {\n  var index = -1,\n      result = Array(set.size);\n\n  set.forEach(function(value) {\n    result[++index] = value;\n  });\n  return result;\n}\n\n/** Used for built-in method references. */\nvar arrayProto = Array.prototype,\n    funcProto = Function.prototype,\n    objectProto = Object.prototype;\n\n/** Used to detect overreaching core-js shims. */\nvar coreJsData = root['__core-js_shared__'];\n\n/** Used to detect methods masquerading as native. */\nvar maskSrcKey = (function() {\n  var uid = /[^.]+$/.exec(coreJsData && coreJsData.keys && coreJsData.keys.IE_PROTO || '');\n  return uid ? ('Symbol(src)_1.' + uid) : '';\n}());\n\n/** Used to resolve the decompiled source of functions. */\nvar funcToString = funcProto.toString;\n\n/** Used to check objects for own properties. */\nvar hasOwnProperty = objectProto.hasOwnProperty;\n\n/**\n * Used to resolve the\n * [`toStringTag`](http://ecma-international.org/ecma-262/7.0/#sec-object.prototype.tostring)\n * of values.\n */\nvar objectToString = objectProto.toString;\n\n/** Used to detect if a method is native. */\nvar reIsNative = RegExp('^' +\n  funcToString.call(hasOwnProperty).replace(reRegExpChar, '\\\\$&')\n  .replace(/hasOwnProperty|(function).*?(?=\\\\\\()| for .+?(?=\\\\\\])/g, '$1.*?') + '$'\n);\n\n/** Built-in value references. */\nvar Buffer = moduleExports ? root.Buffer : undefined,\n    Symbol = root.Symbol,\n    Uint8Array = root.Uint8Array,\n    getPrototype = overArg(Object.getPrototypeOf, Object),\n    objectCreate = Object.create,\n    propertyIsEnumerable = objectProto.propertyIsEnumerable,\n    splice = arrayProto.splice;\n\n/* Built-in method references for those with the same name as other `lodash` methods. */\nvar nativeGetSymbols = Object.getOwnPropertySymbols,\n    nativeIsBuffer = Buffer ? Buffer.isBuffer : undefined,\n    nativeKeys = overArg(Object.keys, Object);\n\n/* Built-in method references that are verified to be native. */\nvar DataView = getNative(root, 'DataView'),\n    Map = getNative(root, 'Map'),\n    Promise = getNative(root, 'Promise'),\n    Set = getNative(root, 'Set'),\n    WeakMap = getNative(root, 'WeakMap'),\n    nativeCreate = getNative(Object, 'create');\n\n/** Used to detect maps, sets, and weakmaps. */\nvar dataViewCtorString = toSource(DataView),\n    mapCtorString = toSource(Map),\n    promiseCtorString = toSource(Promise),\n    setCtorString = toSource(Set),\n    weakMapCtorString = toSource(WeakMap);\n\n/** Used to convert symbols to primitives and strings. */\nvar symbolProto = Symbol ? Symbol.prototype : undefined,\n    symbolValueOf = symbolProto ? symbolProto.valueOf : undefined;\n\n/**\n * Creates a hash object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Hash(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the hash.\n *\n * @private\n * @name clear\n * @memberOf Hash\n */\nfunction hashClear() {\n  this.__data__ = nativeCreate ? nativeCreate(null) : {};\n}\n\n/**\n * Removes `key` and its value from the hash.\n *\n * @private\n * @name delete\n * @memberOf Hash\n * @param {Object} hash The hash to modify.\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction hashDelete(key) {\n  return this.has(key) && delete this.__data__[key];\n}\n\n/**\n * Gets the hash value for `key`.\n *\n * @private\n * @name get\n * @memberOf Hash\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction hashGet(key) {\n  var data = this.__data__;\n  if (nativeCreate) {\n    var result = data[key];\n    return result === HASH_UNDEFINED ? undefined : result;\n  }\n  return hasOwnProperty.call(data, key) ? data[key] : undefined;\n}\n\n/**\n * Checks if a hash value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Hash\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction hashHas(key) {\n  var data = this.__data__;\n  return nativeCreate ? data[key] !== undefined : hasOwnProperty.call(data, key);\n}\n\n/**\n * Sets the hash `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Hash\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the hash instance.\n */\nfunction hashSet(key, value) {\n  var data = this.__data__;\n  data[key] = (nativeCreate && value === undefined) ? HASH_UNDEFINED : value;\n  return this;\n}\n\n// Add methods to `Hash`.\nHash.prototype.clear = hashClear;\nHash.prototype['delete'] = hashDelete;\nHash.prototype.get = hashGet;\nHash.prototype.has = hashHas;\nHash.prototype.set = hashSet;\n\n/**\n * Creates an list cache object.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction ListCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the list cache.\n *\n * @private\n * @name clear\n * @memberOf ListCache\n */\nfunction listCacheClear() {\n  this.__data__ = [];\n}\n\n/**\n * Removes `key` and its value from the list cache.\n *\n * @private\n * @name delete\n * @memberOf ListCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction listCacheDelete(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    return false;\n  }\n  var lastIndex = data.length - 1;\n  if (index == lastIndex) {\n    data.pop();\n  } else {\n    splice.call(data, index, 1);\n  }\n  return true;\n}\n\n/**\n * Gets the list cache value for `key`.\n *\n * @private\n * @name get\n * @memberOf ListCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction listCacheGet(key) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  return index < 0 ? undefined : data[index][1];\n}\n\n/**\n * Checks if a list cache value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf ListCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction listCacheHas(key) {\n  return assocIndexOf(this.__data__, key) > -1;\n}\n\n/**\n * Sets the list cache `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf ListCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the list cache instance.\n */\nfunction listCacheSet(key, value) {\n  var data = this.__data__,\n      index = assocIndexOf(data, key);\n\n  if (index < 0) {\n    data.push([key, value]);\n  } else {\n    data[index][1] = value;\n  }\n  return this;\n}\n\n// Add methods to `ListCache`.\nListCache.prototype.clear = listCacheClear;\nListCache.prototype['delete'] = listCacheDelete;\nListCache.prototype.get = listCacheGet;\nListCache.prototype.has = listCacheHas;\nListCache.prototype.set = listCacheSet;\n\n/**\n * Creates a map cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction MapCache(entries) {\n  var index = -1,\n      length = entries ? entries.length : 0;\n\n  this.clear();\n  while (++index < length) {\n    var entry = entries[index];\n    this.set(entry[0], entry[1]);\n  }\n}\n\n/**\n * Removes all key-value entries from the map.\n *\n * @private\n * @name clear\n * @memberOf MapCache\n */\nfunction mapCacheClear() {\n  this.__data__ = {\n    'hash': new Hash,\n    'map': new (Map || ListCache),\n    'string': new Hash\n  };\n}\n\n/**\n * Removes `key` and its value from the map.\n *\n * @private\n * @name delete\n * @memberOf MapCache\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction mapCacheDelete(key) {\n  return getMapData(this, key)['delete'](key);\n}\n\n/**\n * Gets the map value for `key`.\n *\n * @private\n * @name get\n * @memberOf MapCache\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction mapCacheGet(key) {\n  return getMapData(this, key).get(key);\n}\n\n/**\n * Checks if a map value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf MapCache\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction mapCacheHas(key) {\n  return getMapData(this, key).has(key);\n}\n\n/**\n * Sets the map `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf MapCache\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the map cache instance.\n */\nfunction mapCacheSet(key, value) {\n  getMapData(this, key).set(key, value);\n  return this;\n}\n\n// Add methods to `MapCache`.\nMapCache.prototype.clear = mapCacheClear;\nMapCache.prototype['delete'] = mapCacheDelete;\nMapCache.prototype.get = mapCacheGet;\nMapCache.prototype.has = mapCacheHas;\nMapCache.prototype.set = mapCacheSet;\n\n/**\n * Creates a stack cache object to store key-value pairs.\n *\n * @private\n * @constructor\n * @param {Array} [entries] The key-value pairs to cache.\n */\nfunction Stack(entries) {\n  this.__data__ = new ListCache(entries);\n}\n\n/**\n * Removes all key-value entries from the stack.\n *\n * @private\n * @name clear\n * @memberOf Stack\n */\nfunction stackClear() {\n  this.__data__ = new ListCache;\n}\n\n/**\n * Removes `key` and its value from the stack.\n *\n * @private\n * @name delete\n * @memberOf Stack\n * @param {string} key The key of the value to remove.\n * @returns {boolean} Returns `true` if the entry was removed, else `false`.\n */\nfunction stackDelete(key) {\n  return this.__data__['delete'](key);\n}\n\n/**\n * Gets the stack value for `key`.\n *\n * @private\n * @name get\n * @memberOf Stack\n * @param {string} key The key of the value to get.\n * @returns {*} Returns the entry value.\n */\nfunction stackGet(key) {\n  return this.__data__.get(key);\n}\n\n/**\n * Checks if a stack value for `key` exists.\n *\n * @private\n * @name has\n * @memberOf Stack\n * @param {string} key The key of the entry to check.\n * @returns {boolean} Returns `true` if an entry for `key` exists, else `false`.\n */\nfunction stackHas(key) {\n  return this.__data__.has(key);\n}\n\n/**\n * Sets the stack `key` to `value`.\n *\n * @private\n * @name set\n * @memberOf Stack\n * @param {string} key The key of the value to set.\n * @param {*} value The value to set.\n * @returns {Object} Returns the stack cache instance.\n */\nfunction stackSet(key, value) {\n  var cache = this.__data__;\n  if (cache instanceof ListCache) {\n    var pairs = cache.__data__;\n    if (!Map || (pairs.length < LARGE_ARRAY_SIZE - 1)) {\n      pairs.push([key, value]);\n      return this;\n    }\n    cache = this.__data__ = new MapCache(pairs);\n  }\n  cache.set(key, value);\n  return this;\n}\n\n// Add methods to `Stack`.\nStack.prototype.clear = stackClear;\nStack.prototype['delete'] = stackDelete;\nStack.prototype.get = stackGet;\nStack.prototype.has = stackHas;\nStack.prototype.set = stackSet;\n\n/**\n * Creates an array of the enumerable property names of the array-like `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @param {boolean} inherited Specify returning inherited property names.\n * @returns {Array} Returns the array of property names.\n */\nfunction arrayLikeKeys(value, inherited) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  // Safari 9 makes `arguments.length` enumerable in strict mode.\n  var result = (isArray(value) || isArguments(value))\n    ? baseTimes(value.length, String)\n    : [];\n\n  var length = result.length,\n      skipIndexes = !!length;\n\n  for (var key in value) {\n    if ((inherited || hasOwnProperty.call(value, key)) &&\n        !(skipIndexes && (key == 'length' || isIndex(key, length)))) {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Assigns `value` to `key` of `object` if the existing value is not equivalent\n * using [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * for equality comparisons.\n *\n * @private\n * @param {Object} object The object to modify.\n * @param {string} key The key of the property to assign.\n * @param {*} value The value to assign.\n */\nfunction assignValue(object, key, value) {\n  var objValue = object[key];\n  if (!(hasOwnProperty.call(object, key) && eq(objValue, value)) ||\n      (value === undefined && !(key in object))) {\n    object[key] = value;\n  }\n}\n\n/**\n * Gets the index at which the `key` is found in `array` of key-value pairs.\n *\n * @private\n * @param {Array} array The array to inspect.\n * @param {*} key The key to search for.\n * @returns {number} Returns the index of the matched value, else `-1`.\n */\nfunction assocIndexOf(array, key) {\n  var length = array.length;\n  while (length--) {\n    if (eq(array[length][0], key)) {\n      return length;\n    }\n  }\n  return -1;\n}\n\n/**\n * The base implementation of `_.assign` without support for multiple sources\n * or `customizer` functions.\n *\n * @private\n * @param {Object} object The destination object.\n * @param {Object} source The source object.\n * @returns {Object} Returns `object`.\n */\nfunction baseAssign(object, source) {\n  return object && copyObject(source, keys(source), object);\n}\n\n/**\n * The base implementation of `_.clone` and `_.cloneDeep` which tracks\n * traversed objects.\n *\n * @private\n * @param {*} value The value to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @param {boolean} [isFull] Specify a clone including symbols.\n * @param {Function} [customizer] The function to customize cloning.\n * @param {string} [key] The key of `value`.\n * @param {Object} [object] The parent object of `value`.\n * @param {Object} [stack] Tracks traversed objects and their clone counterparts.\n * @returns {*} Returns the cloned value.\n */\nfunction baseClone(value, isDeep, isFull, customizer, key, object, stack) {\n  var result;\n  if (customizer) {\n    result = object ? customizer(value, key, object, stack) : customizer(value);\n  }\n  if (result !== undefined) {\n    return result;\n  }\n  if (!isObject(value)) {\n    return value;\n  }\n  var isArr = isArray(value);\n  if (isArr) {\n    result = initCloneArray(value);\n    if (!isDeep) {\n      return copyArray(value, result);\n    }\n  } else {\n    var tag = getTag(value),\n        isFunc = tag == funcTag || tag == genTag;\n\n    if (isBuffer(value)) {\n      return cloneBuffer(value, isDeep);\n    }\n    if (tag == objectTag || tag == argsTag || (isFunc && !object)) {\n      if (isHostObject(value)) {\n        return object ? value : {};\n      }\n      result = initCloneObject(isFunc ? {} : value);\n      if (!isDeep) {\n        return copySymbols(value, baseAssign(result, value));\n      }\n    } else {\n      if (!cloneableTags[tag]) {\n        return object ? value : {};\n      }\n      result = initCloneByTag(value, tag, baseClone, isDeep);\n    }\n  }\n  // Check for circular references and return its corresponding clone.\n  stack || (stack = new Stack);\n  var stacked = stack.get(value);\n  if (stacked) {\n    return stacked;\n  }\n  stack.set(value, result);\n\n  if (!isArr) {\n    var props = isFull ? getAllKeys(value) : keys(value);\n  }\n  arrayEach(props || value, function(subValue, key) {\n    if (props) {\n      key = subValue;\n      subValue = value[key];\n    }\n    // Recursively populate clone (susceptible to call stack limits).\n    assignValue(result, key, baseClone(subValue, isDeep, isFull, customizer, key, value, stack));\n  });\n  return result;\n}\n\n/**\n * The base implementation of `_.create` without support for assigning\n * properties to the created object.\n *\n * @private\n * @param {Object} prototype The object to inherit from.\n * @returns {Object} Returns the new object.\n */\nfunction baseCreate(proto) {\n  return isObject(proto) ? objectCreate(proto) : {};\n}\n\n/**\n * The base implementation of `getAllKeys` and `getAllKeysIn` which uses\n * `keysFunc` and `symbolsFunc` to get the enumerable property names and\n * symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {Function} keysFunc The function to get the keys of `object`.\n * @param {Function} symbolsFunc The function to get the symbols of `object`.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction baseGetAllKeys(object, keysFunc, symbolsFunc) {\n  var result = keysFunc(object);\n  return isArray(object) ? result : arrayPush(result, symbolsFunc(object));\n}\n\n/**\n * The base implementation of `getTag`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nfunction baseGetTag(value) {\n  return objectToString.call(value);\n}\n\n/**\n * The base implementation of `_.isNative` without bad shim checks.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a native function,\n *  else `false`.\n */\nfunction baseIsNative(value) {\n  if (!isObject(value) || isMasked(value)) {\n    return false;\n  }\n  var pattern = (isFunction(value) || isHostObject(value)) ? reIsNative : reIsHostCtor;\n  return pattern.test(toSource(value));\n}\n\n/**\n * The base implementation of `_.keys` which doesn't treat sparse arrays as dense.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n */\nfunction baseKeys(object) {\n  if (!isPrototype(object)) {\n    return nativeKeys(object);\n  }\n  var result = [];\n  for (var key in Object(object)) {\n    if (hasOwnProperty.call(object, key) && key != 'constructor') {\n      result.push(key);\n    }\n  }\n  return result;\n}\n\n/**\n * Creates a clone of  `buffer`.\n *\n * @private\n * @param {Buffer} buffer The buffer to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Buffer} Returns the cloned buffer.\n */\nfunction cloneBuffer(buffer, isDeep) {\n  if (isDeep) {\n    return buffer.slice();\n  }\n  var result = new buffer.constructor(buffer.length);\n  buffer.copy(result);\n  return result;\n}\n\n/**\n * Creates a clone of `arrayBuffer`.\n *\n * @private\n * @param {ArrayBuffer} arrayBuffer The array buffer to clone.\n * @returns {ArrayBuffer} Returns the cloned array buffer.\n */\nfunction cloneArrayBuffer(arrayBuffer) {\n  var result = new arrayBuffer.constructor(arrayBuffer.byteLength);\n  new Uint8Array(result).set(new Uint8Array(arrayBuffer));\n  return result;\n}\n\n/**\n * Creates a clone of `dataView`.\n *\n * @private\n * @param {Object} dataView The data view to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned data view.\n */\nfunction cloneDataView(dataView, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(dataView.buffer) : dataView.buffer;\n  return new dataView.constructor(buffer, dataView.byteOffset, dataView.byteLength);\n}\n\n/**\n * Creates a clone of `map`.\n *\n * @private\n * @param {Object} map The map to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned map.\n */\nfunction cloneMap(map, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(mapToArray(map), true) : mapToArray(map);\n  return arrayReduce(array, addMapEntry, new map.constructor);\n}\n\n/**\n * Creates a clone of `regexp`.\n *\n * @private\n * @param {Object} regexp The regexp to clone.\n * @returns {Object} Returns the cloned regexp.\n */\nfunction cloneRegExp(regexp) {\n  var result = new regexp.constructor(regexp.source, reFlags.exec(regexp));\n  result.lastIndex = regexp.lastIndex;\n  return result;\n}\n\n/**\n * Creates a clone of `set`.\n *\n * @private\n * @param {Object} set The set to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned set.\n */\nfunction cloneSet(set, isDeep, cloneFunc) {\n  var array = isDeep ? cloneFunc(setToArray(set), true) : setToArray(set);\n  return arrayReduce(array, addSetEntry, new set.constructor);\n}\n\n/**\n * Creates a clone of the `symbol` object.\n *\n * @private\n * @param {Object} symbol The symbol object to clone.\n * @returns {Object} Returns the cloned symbol object.\n */\nfunction cloneSymbol(symbol) {\n  return symbolValueOf ? Object(symbolValueOf.call(symbol)) : {};\n}\n\n/**\n * Creates a clone of `typedArray`.\n *\n * @private\n * @param {Object} typedArray The typed array to clone.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the cloned typed array.\n */\nfunction cloneTypedArray(typedArray, isDeep) {\n  var buffer = isDeep ? cloneArrayBuffer(typedArray.buffer) : typedArray.buffer;\n  return new typedArray.constructor(buffer, typedArray.byteOffset, typedArray.length);\n}\n\n/**\n * Copies the values of `source` to `array`.\n *\n * @private\n * @param {Array} source The array to copy values from.\n * @param {Array} [array=[]] The array to copy values to.\n * @returns {Array} Returns `array`.\n */\nfunction copyArray(source, array) {\n  var index = -1,\n      length = source.length;\n\n  array || (array = Array(length));\n  while (++index < length) {\n    array[index] = source[index];\n  }\n  return array;\n}\n\n/**\n * Copies properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy properties from.\n * @param {Array} props The property identifiers to copy.\n * @param {Object} [object={}] The object to copy properties to.\n * @param {Function} [customizer] The function to customize copied values.\n * @returns {Object} Returns `object`.\n */\nfunction copyObject(source, props, object, customizer) {\n  object || (object = {});\n\n  var index = -1,\n      length = props.length;\n\n  while (++index < length) {\n    var key = props[index];\n\n    var newValue = customizer\n      ? customizer(object[key], source[key], key, object, source)\n      : undefined;\n\n    assignValue(object, key, newValue === undefined ? source[key] : newValue);\n  }\n  return object;\n}\n\n/**\n * Copies own symbol properties of `source` to `object`.\n *\n * @private\n * @param {Object} source The object to copy symbols from.\n * @param {Object} [object={}] The object to copy symbols to.\n * @returns {Object} Returns `object`.\n */\nfunction copySymbols(source, object) {\n  return copyObject(source, getSymbols(source), object);\n}\n\n/**\n * Creates an array of own enumerable property names and symbols of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names and symbols.\n */\nfunction getAllKeys(object) {\n  return baseGetAllKeys(object, keys, getSymbols);\n}\n\n/**\n * Gets the data for `map`.\n *\n * @private\n * @param {Object} map The map to query.\n * @param {string} key The reference key.\n * @returns {*} Returns the map data.\n */\nfunction getMapData(map, key) {\n  var data = map.__data__;\n  return isKeyable(key)\n    ? data[typeof key == 'string' ? 'string' : 'hash']\n    : data.map;\n}\n\n/**\n * Gets the native function at `key` of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @param {string} key The key of the method to get.\n * @returns {*} Returns the function if it's native, else `undefined`.\n */\nfunction getNative(object, key) {\n  var value = getValue(object, key);\n  return baseIsNative(value) ? value : undefined;\n}\n\n/**\n * Creates an array of the own enumerable symbol properties of `object`.\n *\n * @private\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of symbols.\n */\nvar getSymbols = nativeGetSymbols ? overArg(nativeGetSymbols, Object) : stubArray;\n\n/**\n * Gets the `toStringTag` of `value`.\n *\n * @private\n * @param {*} value The value to query.\n * @returns {string} Returns the `toStringTag`.\n */\nvar getTag = baseGetTag;\n\n// Fallback for data views, maps, sets, and weak maps in IE 11,\n// for data views in Edge < 14, and promises in Node.js.\nif ((DataView && getTag(new DataView(new ArrayBuffer(1))) != dataViewTag) ||\n    (Map && getTag(new Map) != mapTag) ||\n    (Promise && getTag(Promise.resolve()) != promiseTag) ||\n    (Set && getTag(new Set) != setTag) ||\n    (WeakMap && getTag(new WeakMap) != weakMapTag)) {\n  getTag = function(value) {\n    var result = objectToString.call(value),\n        Ctor = result == objectTag ? value.constructor : undefined,\n        ctorString = Ctor ? toSource(Ctor) : undefined;\n\n    if (ctorString) {\n      switch (ctorString) {\n        case dataViewCtorString: return dataViewTag;\n        case mapCtorString: return mapTag;\n        case promiseCtorString: return promiseTag;\n        case setCtorString: return setTag;\n        case weakMapCtorString: return weakMapTag;\n      }\n    }\n    return result;\n  };\n}\n\n/**\n * Initializes an array clone.\n *\n * @private\n * @param {Array} array The array to clone.\n * @returns {Array} Returns the initialized clone.\n */\nfunction initCloneArray(array) {\n  var length = array.length,\n      result = array.constructor(length);\n\n  // Add properties assigned by `RegExp#exec`.\n  if (length && typeof array[0] == 'string' && hasOwnProperty.call(array, 'index')) {\n    result.index = array.index;\n    result.input = array.input;\n  }\n  return result;\n}\n\n/**\n * Initializes an object clone.\n *\n * @private\n * @param {Object} object The object to clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneObject(object) {\n  return (typeof object.constructor == 'function' && !isPrototype(object))\n    ? baseCreate(getPrototype(object))\n    : {};\n}\n\n/**\n * Initializes an object clone based on its `toStringTag`.\n *\n * **Note:** This function only supports cloning values with tags of\n * `Boolean`, `Date`, `Error`, `Number`, `RegExp`, or `String`.\n *\n * @private\n * @param {Object} object The object to clone.\n * @param {string} tag The `toStringTag` of the object to clone.\n * @param {Function} cloneFunc The function to clone values.\n * @param {boolean} [isDeep] Specify a deep clone.\n * @returns {Object} Returns the initialized clone.\n */\nfunction initCloneByTag(object, tag, cloneFunc, isDeep) {\n  var Ctor = object.constructor;\n  switch (tag) {\n    case arrayBufferTag:\n      return cloneArrayBuffer(object);\n\n    case boolTag:\n    case dateTag:\n      return new Ctor(+object);\n\n    case dataViewTag:\n      return cloneDataView(object, isDeep);\n\n    case float32Tag: case float64Tag:\n    case int8Tag: case int16Tag: case int32Tag:\n    case uint8Tag: case uint8ClampedTag: case uint16Tag: case uint32Tag:\n      return cloneTypedArray(object, isDeep);\n\n    case mapTag:\n      return cloneMap(object, isDeep, cloneFunc);\n\n    case numberTag:\n    case stringTag:\n      return new Ctor(object);\n\n    case regexpTag:\n      return cloneRegExp(object);\n\n    case setTag:\n      return cloneSet(object, isDeep, cloneFunc);\n\n    case symbolTag:\n      return cloneSymbol(object);\n  }\n}\n\n/**\n * Checks if `value` is a valid array-like index.\n *\n * @private\n * @param {*} value The value to check.\n * @param {number} [length=MAX_SAFE_INTEGER] The upper bounds of a valid index.\n * @returns {boolean} Returns `true` if `value` is a valid index, else `false`.\n */\nfunction isIndex(value, length) {\n  length = length == null ? MAX_SAFE_INTEGER : length;\n  return !!length &&\n    (typeof value == 'number' || reIsUint.test(value)) &&\n    (value > -1 && value % 1 == 0 && value < length);\n}\n\n/**\n * Checks if `value` is suitable for use as unique object key.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is suitable, else `false`.\n */\nfunction isKeyable(value) {\n  var type = typeof value;\n  return (type == 'string' || type == 'number' || type == 'symbol' || type == 'boolean')\n    ? (value !== '__proto__')\n    : (value === null);\n}\n\n/**\n * Checks if `func` has its source masked.\n *\n * @private\n * @param {Function} func The function to check.\n * @returns {boolean} Returns `true` if `func` is masked, else `false`.\n */\nfunction isMasked(func) {\n  return !!maskSrcKey && (maskSrcKey in func);\n}\n\n/**\n * Checks if `value` is likely a prototype object.\n *\n * @private\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a prototype, else `false`.\n */\nfunction isPrototype(value) {\n  var Ctor = value && value.constructor,\n      proto = (typeof Ctor == 'function' && Ctor.prototype) || objectProto;\n\n  return value === proto;\n}\n\n/**\n * Converts `func` to its source code.\n *\n * @private\n * @param {Function} func The function to process.\n * @returns {string} Returns the source code.\n */\nfunction toSource(func) {\n  if (func != null) {\n    try {\n      return funcToString.call(func);\n    } catch (e) {}\n    try {\n      return (func + '');\n    } catch (e) {}\n  }\n  return '';\n}\n\n/**\n * This method is like `_.clone` except that it recursively clones `value`.\n *\n * @static\n * @memberOf _\n * @since 1.0.0\n * @category Lang\n * @param {*} value The value to recursively clone.\n * @returns {*} Returns the deep cloned value.\n * @see _.clone\n * @example\n *\n * var objects = [{ 'a': 1 }, { 'b': 2 }];\n *\n * var deep = _.cloneDeep(objects);\n * console.log(deep[0] === objects[0]);\n * // => false\n */\nfunction cloneDeep(value) {\n  return baseClone(value, true, true);\n}\n\n/**\n * Performs a\n * [`SameValueZero`](http://ecma-international.org/ecma-262/7.0/#sec-samevaluezero)\n * comparison between two values to determine if they are equivalent.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to compare.\n * @param {*} other The other value to compare.\n * @returns {boolean} Returns `true` if the values are equivalent, else `false`.\n * @example\n *\n * var object = { 'a': 1 };\n * var other = { 'a': 1 };\n *\n * _.eq(object, object);\n * // => true\n *\n * _.eq(object, other);\n * // => false\n *\n * _.eq('a', 'a');\n * // => true\n *\n * _.eq('a', Object('a'));\n * // => false\n *\n * _.eq(NaN, NaN);\n * // => true\n */\nfunction eq(value, other) {\n  return value === other || (value !== value && other !== other);\n}\n\n/**\n * Checks if `value` is likely an `arguments` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an `arguments` object,\n *  else `false`.\n * @example\n *\n * _.isArguments(function() { return arguments; }());\n * // => true\n *\n * _.isArguments([1, 2, 3]);\n * // => false\n */\nfunction isArguments(value) {\n  // Safari 8.1 makes `arguments.callee` enumerable in strict mode.\n  return isArrayLikeObject(value) && hasOwnProperty.call(value, 'callee') &&\n    (!propertyIsEnumerable.call(value, 'callee') || objectToString.call(value) == argsTag);\n}\n\n/**\n * Checks if `value` is classified as an `Array` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array, else `false`.\n * @example\n *\n * _.isArray([1, 2, 3]);\n * // => true\n *\n * _.isArray(document.body.children);\n * // => false\n *\n * _.isArray('abc');\n * // => false\n *\n * _.isArray(_.noop);\n * // => false\n */\nvar isArray = Array.isArray;\n\n/**\n * Checks if `value` is array-like. A value is considered array-like if it's\n * not a function and has a `value.length` that's an integer greater than or\n * equal to `0` and less than or equal to `Number.MAX_SAFE_INTEGER`.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is array-like, else `false`.\n * @example\n *\n * _.isArrayLike([1, 2, 3]);\n * // => true\n *\n * _.isArrayLike(document.body.children);\n * // => true\n *\n * _.isArrayLike('abc');\n * // => true\n *\n * _.isArrayLike(_.noop);\n * // => false\n */\nfunction isArrayLike(value) {\n  return value != null && isLength(value.length) && !isFunction(value);\n}\n\n/**\n * This method is like `_.isArrayLike` except that it also checks if `value`\n * is an object.\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an array-like object,\n *  else `false`.\n * @example\n *\n * _.isArrayLikeObject([1, 2, 3]);\n * // => true\n *\n * _.isArrayLikeObject(document.body.children);\n * // => true\n *\n * _.isArrayLikeObject('abc');\n * // => false\n *\n * _.isArrayLikeObject(_.noop);\n * // => false\n */\nfunction isArrayLikeObject(value) {\n  return isObjectLike(value) && isArrayLike(value);\n}\n\n/**\n * Checks if `value` is a buffer.\n *\n * @static\n * @memberOf _\n * @since 4.3.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a buffer, else `false`.\n * @example\n *\n * _.isBuffer(new Buffer(2));\n * // => true\n *\n * _.isBuffer(new Uint8Array(2));\n * // => false\n */\nvar isBuffer = nativeIsBuffer || stubFalse;\n\n/**\n * Checks if `value` is classified as a `Function` object.\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a function, else `false`.\n * @example\n *\n * _.isFunction(_);\n * // => true\n *\n * _.isFunction(/abc/);\n * // => false\n */\nfunction isFunction(value) {\n  // The use of `Object#toString` avoids issues with the `typeof` operator\n  // in Safari 8-9 which returns 'object' for typed array and other constructors.\n  var tag = isObject(value) ? objectToString.call(value) : '';\n  return tag == funcTag || tag == genTag;\n}\n\n/**\n * Checks if `value` is a valid array-like length.\n *\n * **Note:** This method is loosely based on\n * [`ToLength`](http://ecma-international.org/ecma-262/7.0/#sec-tolength).\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is a valid length, else `false`.\n * @example\n *\n * _.isLength(3);\n * // => true\n *\n * _.isLength(Number.MIN_VALUE);\n * // => false\n *\n * _.isLength(Infinity);\n * // => false\n *\n * _.isLength('3');\n * // => false\n */\nfunction isLength(value) {\n  return typeof value == 'number' &&\n    value > -1 && value % 1 == 0 && value <= MAX_SAFE_INTEGER;\n}\n\n/**\n * Checks if `value` is the\n * [language type](http://www.ecma-international.org/ecma-262/7.0/#sec-ecmascript-language-types)\n * of `Object`. (e.g. arrays, functions, objects, regexes, `new Number(0)`, and `new String('')`)\n *\n * @static\n * @memberOf _\n * @since 0.1.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is an object, else `false`.\n * @example\n *\n * _.isObject({});\n * // => true\n *\n * _.isObject([1, 2, 3]);\n * // => true\n *\n * _.isObject(_.noop);\n * // => true\n *\n * _.isObject(null);\n * // => false\n */\nfunction isObject(value) {\n  var type = typeof value;\n  return !!value && (type == 'object' || type == 'function');\n}\n\n/**\n * Checks if `value` is object-like. A value is object-like if it's not `null`\n * and has a `typeof` result of \"object\".\n *\n * @static\n * @memberOf _\n * @since 4.0.0\n * @category Lang\n * @param {*} value The value to check.\n * @returns {boolean} Returns `true` if `value` is object-like, else `false`.\n * @example\n *\n * _.isObjectLike({});\n * // => true\n *\n * _.isObjectLike([1, 2, 3]);\n * // => true\n *\n * _.isObjectLike(_.noop);\n * // => false\n *\n * _.isObjectLike(null);\n * // => false\n */\nfunction isObjectLike(value) {\n  return !!value && typeof value == 'object';\n}\n\n/**\n * Creates an array of the own enumerable property names of `object`.\n *\n * **Note:** Non-object values are coerced to objects. See the\n * [ES spec](http://ecma-international.org/ecma-262/7.0/#sec-object.keys)\n * for more details.\n *\n * @static\n * @since 0.1.0\n * @memberOf _\n * @category Object\n * @param {Object} object The object to query.\n * @returns {Array} Returns the array of property names.\n * @example\n *\n * function Foo() {\n *   this.a = 1;\n *   this.b = 2;\n * }\n *\n * Foo.prototype.c = 3;\n *\n * _.keys(new Foo);\n * // => ['a', 'b'] (iteration order is not guaranteed)\n *\n * _.keys('hi');\n * // => ['0', '1']\n */\nfunction keys(object) {\n  return isArrayLike(object) ? arrayLikeKeys(object) : baseKeys(object);\n}\n\n/**\n * This method returns a new empty array.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {Array} Returns the new empty array.\n * @example\n *\n * var arrays = _.times(2, _.stubArray);\n *\n * console.log(arrays);\n * // => [[], []]\n *\n * console.log(arrays[0] === arrays[1]);\n * // => false\n */\nfunction stubArray() {\n  return [];\n}\n\n/**\n * This method returns `false`.\n *\n * @static\n * @memberOf _\n * @since 4.13.0\n * @category Util\n * @returns {boolean} Returns `false`.\n * @example\n *\n * _.times(2, _.stubFalse);\n * // => [false, false]\n */\nfunction stubFalse() {\n  return false;\n}\n\nmodule.exports = cloneDeep;\n","'use strict'\n\nconst nobleSha256 = require('@noble/hashes/sha256').sha256\nconst bech32 = require('bech32')\nconst Buffer = require('safe-buffer').Buffer\nconst bitcoin = require('@scure/btc-signer/payment')\nconst nobleSecp256k1 = require('@noble/curves/secp256k1').secp256k1\nconst cloneDeep = require('lodash.clonedeep')\n\n// defaults for encode; default timestamp is current time at call\nconst DEFAULTNETWORK = {\n  // default network is bitcoin\n  bech32: 'bc',\n  pubKeyHash: 0x00,\n  scriptHash: 0x05,\n  validWitnessVersions: [0, 1],\n  wif: 0x80\n}\nconst TESTNETWORK = {\n  bech32: 'tb',\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  validWitnessVersions: [0, 1],\n  wif: 0xef\n}\nconst REGTESTNETWORK = {\n  bech32: 'bcrt',\n  pubKeyHash: 0x6f,\n  scriptHash: 0xc4,\n  validWitnessVersions: [0, 1],\n  wif: 0xef\n}\nconst SIMNETWORK = {\n  bech32: 'sb',\n  pubKeyHash: 0x3f,\n  scriptHash: 0x7b,\n  validWitnessVersions: [0, 1],\n  wif: 0xef\n}\nconst DEFAULTEXPIRETIME = 3600\nconst DEFAULTCLTVEXPIRY = 9\nconst DEFAULTDESCRIPTION = ''\nconst DEFAULTFEATUREBITS = {\n  word_length: 4, // last bit set default is 15\n  var_onion_optin: {\n    required: false,\n    supported: true\n  },\n  payment_secret: {\n    required: false,\n    supported: true\n  }\n}\n\nconst FEATUREBIT_ORDER = [\n  'option_data_loss_protect',\n  'initial_routing_sync',\n  'option_upfront_shutdown_script',\n  'gossip_queries',\n  'var_onion_optin',\n  'gossip_queries_ex',\n  'option_static_remotekey',\n  'payment_secret',\n  'basic_mpp',\n  'option_support_large_channel'\n]\n\nconst DIVISORS = {\n  m: 1000n,\n  u: 1000000n,\n  n: 1000000000n,\n  p: 1000000000000n\n}\n\nconst MAX_MILLISATS = 2100000000000000000n\n\nconst MILLISATS_PER_BTC = 100000000000n\nconst MILLISATS_PER_MILLIBTC = 100000000n\nconst MILLISATS_PER_MICROBTC = 100000n\nconst MILLISATS_PER_NANOBTC = 100n\nconst PICOBTC_PER_MILLISATS = 10n\n\nconst TAGCODES = {\n  payment_hash: 1,\n  payment_secret: 16,\n  description: 13,\n  payee_node_key: 19,\n  purpose_commit_hash: 23, // commit to longer descriptions (like a website)\n  expire_time: 6, // default: 3600 (1 hour)\n  min_final_cltv_expiry: 24, // default: 9\n  fallback_address: 9,\n  routing_info: 3, // for extra routing info (private etc.)\n  feature_bits: 5,\n  blinded_payinfo: 20\n}\n\n// reverse the keys and values of TAGCODES and insert into TAGNAMES\nconst TAGNAMES = {}\nfor (let i = 0, keys = Object.keys(TAGCODES); i < keys.length; i++) {\n  const currentName = keys[i]\n  const currentCode = TAGCODES[keys[i]].toString()\n  TAGNAMES[currentCode] = currentName\n}\n\nconst TAGENCODERS = {\n  payment_hash: hexToWord, // 256 bits\n  payment_secret: hexToWord, // 256 bits\n  description: textToWord, // string variable length\n  payee_node_key: hexToWord, // 264 bits\n  purpose_commit_hash: purposeCommitEncoder, // 256 bits\n  expire_time: intBEToWords, // default: 3600 (1 hour)\n  min_final_cltv_expiry: intBEToWords, // default: 9\n  fallback_address: fallbackAddressEncoder,\n  routing_info: routingInfoEncoder, // for extra routing info (private etc.)\n  feature_bits: featureBitsEncoder\n  // TODO: Add tag encoder for blinded paths\n}\n\nconst TAGPARSERS = {\n  1: (words) => wordsToBuffer(words, true).toString('hex'), // 256 bits\n  16: (words) => wordsToBuffer(words, true).toString('hex'), // 256 bits\n  13: (words) => wordsToBuffer(words, true).toString('utf8'), // string variable length\n  19: (words) => wordsToBuffer(words, true).toString('hex'), // 264 bits\n  23: (words) => wordsToBuffer(words, true).toString('hex'), // 256 bits\n  6: wordsToIntBE, // default: 3600 (1 hour)\n  24: wordsToIntBE, // default: 9\n  9: fallbackAddressParser,\n  3: routingInfoParser, // for extra routing info (private etc.)\n  5: featureBitsParser, // keep feature bits as array of 5 bit words\n  20: blindedPathsParser\n}\n\nconst unknownTagName = 'unknownTag'\n\nfunction unknownEncoder (data) {\n  data.words = bech32.decode(data.words, Number.MAX_SAFE_INTEGER).words\n  return data\n}\n\nfunction getUnknownParser (tagCode) {\n  return (words) => ({\n    tagCode: parseInt(tagCode),\n    words: bech32.encode('unknown', words, Number.MAX_SAFE_INTEGER)\n  })\n}\n\nfunction wordsToIntBE (words) {\n  return words.reverse().reduce((total, item, index) => {\n    return total + item * Math.pow(32, index)\n  }, 0)\n}\n\nfunction intBEToWords (intBE, bits) {\n  const words = []\n  if (bits === undefined) bits = 5\n  intBE = Math.floor(intBE)\n  if (intBE === 0) return [0]\n  while (intBE > 0) {\n    words.push(intBE & (Math.pow(2, bits) - 1))\n    intBE = Math.floor(intBE / Math.pow(2, bits))\n  }\n  return words.reverse()\n}\n\nfunction sha256 (data) {\n  return Buffer.from(nobleSha256(data))\n}\n\nfunction convert (data, inBits, outBits) {\n  let value = 0\n  let bits = 0\n  const maxV = (1 << outBits) - 1\n\n  const result = []\n  for (let i = 0; i < data.length; ++i) {\n    value = (value << inBits) | data[i]\n    bits += inBits\n\n    while (bits >= outBits) {\n      bits -= outBits\n      result.push((value >> bits) & maxV)\n    }\n  }\n\n  if (bits > 0) {\n    result.push((value << (outBits - bits)) & maxV)\n  }\n\n  return result\n}\n\nfunction wordsToBuffer (words, trim) {\n  let buffer = Buffer.from(convert(words, 5, 8, true))\n  if (trim && words.length * 5 % 8 !== 0) {\n    buffer = buffer.slice(0, -1)\n  }\n  return buffer\n}\n\nfunction hexToBuffer (hex) {\n  if (hex !== undefined &&\n      (typeof hex === 'string' || hex instanceof String) &&\n      hex.match(/^([a-zA-Z0-9]{2})*$/)) {\n    return Buffer.from(hex, 'hex')\n  }\n  return hex\n}\n\nfunction textToBuffer (text) {\n  return Buffer.from(text, 'utf8')\n}\n\nfunction hexToWord (hex) {\n  const buffer = hexToBuffer(hex)\n  return bech32.toWords(buffer)\n}\n\nfunction textToWord (text) {\n  const buffer = textToBuffer(text)\n  const words = bech32.toWords(buffer)\n  return words\n}\n\n// see encoder for details\nfunction fallbackAddressParser (words, network) {\n  const version = words[0]\n  words = words.slice(1)\n\n  const addressHash = wordsToBuffer(words, true)\n\n  let address = null\n\n  switch (version) {\n    case 17:\n      address = bitcoin.Address(network).encode({ type: 'pkh', hash: addressHash })\n      break\n    case 18:\n      address = bitcoin.Address(network).encode({ type: 'sh', hash: addressHash })\n      break\n    case 0:\n      if (addressHash.length === 20) {\n        address = bitcoin.Address(network).encode({ type: 'wpkh', hash: addressHash })\n      } else {\n        address = bitcoin.Address(network).encode({ type: 'wsh', hash: addressHash })\n      }\n      break\n    case 1:\n      address = bitcoin.Address(network).encode({ type: 'tr', pubkey: addressHash })\n      break\n  }\n\n  return {\n    code: version,\n    address,\n    addressHash: addressHash.toString('hex')\n  }\n}\n\n// the code is the witness version OR 17 for P2PKH OR 18 for P2SH\n// anything besides code 17 or 18 should be bech32 or bech32m encoded address.\n// 1 word for the code, and right pad with 0 if necessary for the addressHash\n// (address parsing for encode is done in the encode function)\nfunction fallbackAddressEncoder (data, network) {\n  return [data.code].concat(hexToWord(data.addressHash))\n}\n\n// first convert from words to buffer, trimming padding where necessary\n// parse in 51 byte chunks. See encoder for details.\nfunction routingInfoParser (words) {\n  const routes = []\n  let pubkey, shortChannelId, feeBaseMSats, feeProportionalMillionths, cltvExpiryDelta\n  let routesBuffer = wordsToBuffer(words, true)\n  while (routesBuffer.length > 0) {\n    pubkey = routesBuffer.slice(0, 33).toString('hex') // 33 bytes\n    shortChannelId = routesBuffer.slice(33, 41).toString('hex') // 8 bytes\n    feeBaseMSats = parseInt(routesBuffer.slice(41, 45).toString('hex'), 16) // 4 bytes\n    feeProportionalMillionths = parseInt(routesBuffer.slice(45, 49).toString('hex'), 16) // 4 bytes\n    cltvExpiryDelta = parseInt(routesBuffer.slice(49, 51).toString('hex'), 16) // 2 bytes\n\n    routesBuffer = routesBuffer.slice(51)\n\n    routes.push({\n      pubkey,\n      short_channel_id: shortChannelId,\n      fee_base_msat: feeBaseMSats,\n      fee_proportional_millionths: feeProportionalMillionths,\n      cltv_expiry_delta: cltvExpiryDelta\n    })\n  }\n  return routes\n}\n\nfunction decodeBigSize (data, pointer) {\n  const firstByte = data.readUInt8(pointer)\n  pointer++\n  switch (firstByte) {\n    case 0xfd:\n      return [data.readUInt16BE(pointer), pointer + 2]\n    case 0xfe:\n      return [data.readUInt32BE(pointer), pointer + 4]\n    case 0xff:\n      return [parseInt(data.slice(pointer, pointer + 8).toString('hex'), 16), pointer + 8]\n    default:\n      return [firstByte, pointer]\n  }\n}\n\nfunction decodeBlindedHop (data, pointer) {\n  const blindedNodePubkey = data.slice(pointer, pointer + 33)\n  pointer += 33\n  const [cipherTextLength, _pointer] = decodeBigSize(data, pointer)\n  pointer = _pointer\n  const cipherText = data.slice(pointer, pointer + cipherTextLength)\n  pointer += cipherTextLength\n  return [{\n    blinded_node_pubkey: blindedNodePubkey.toString('hex'),\n    cipher_text: cipherText.toString('hex')\n  }, pointer]\n}\n\nfunction blindedPathsParser (words) {\n  const data = wordsToBuffer(words, true)\n  const feeBaseMsat = data.readUInt32BE(0)\n  const feeProportionalMillionths = data.readUInt32BE(4)\n  const cltvExpiryDelta = data.readUInt16BE(8)\n  const htlcMinimumMsat = BigInt('0x' + data.slice(10, 18).toString('hex'))\n  const htlcMaximumMsat = BigInt('0x' + data.slice(18, 26).toString('hex'))\n  const flen = data.readUInt16BE(26)\n  let pointer = 28\n  const features = [...data.slice(pointer, pointer + flen)]\n  pointer += flen\n  const firstEphemeralBlindingPoint = data.slice(pointer, pointer + 33).toString('hex')\n  pointer += 33\n  const numHops = data.readUInt8(pointer)\n  pointer++\n  const blindedHops = []\n  for (let hop = 0; hop < numHops; hop++) {\n    const [blindedHop, _pointer] = decodeBlindedHop(data, pointer)\n    pointer = _pointer\n    blindedHops.push(blindedHop)\n  }\n  return {\n    fee_base_msat: feeBaseMsat,\n    fee_proportional_millionths: feeProportionalMillionths,\n    cltv_expiry_delta: cltvExpiryDelta,\n    htlc_minimum_msat: htlcMinimumMsat,\n    htlc_maximum_msat: htlcMaximumMsat,\n    features,\n    first_ephemeral_blinding_point: firstEphemeralBlindingPoint,\n    blinded_hops: blindedHops,\n    introduction_node: blindedHops[0].blinded_node_pubkey\n  }\n}\n\nfunction featureBitsParser (words) {\n  const bools = words.slice().reverse().map(word =>\n    [\n      !!(word & 0b1),\n      !!(word & 0b10),\n      !!(word & 0b100),\n      !!(word & 0b1000),\n      !!(word & 0b10000)\n    ]\n  ).reduce((finalArr, itemArr) => finalArr.concat(itemArr), [])\n  while (bools.length < FEATUREBIT_ORDER.length * 2) {\n    bools.push(false)\n  }\n  const featureBits = {\n    word_length: words.length\n  }\n  FEATUREBIT_ORDER.forEach((featureName, index) => {\n    featureBits[featureName] = {\n      required: bools[index * 2],\n      supported: bools[index * 2 + 1]\n    }\n  })\n  if (bools.length > FEATUREBIT_ORDER.length * 2) {\n    const extraBits = bools.slice(FEATUREBIT_ORDER.length * 2)\n    featureBits.extra_bits = {\n      start_bit: FEATUREBIT_ORDER.length * 2,\n      bits: extraBits,\n      has_required: extraBits.reduce(\n        (result, bit, index) =>\n          index % 2 !== 0\n            ? result || false\n            : result || bit,\n        false\n      )\n    }\n  } else {\n    featureBits.extra_bits = {\n      start_bit: FEATUREBIT_ORDER.length * 2,\n      bits: [],\n      has_required: false\n    }\n  }\n  return featureBits\n}\n\nfunction featureBitsEncoder (featureBits) {\n  let wordsLength = featureBits.word_length\n  let bools = []\n  FEATUREBIT_ORDER.forEach(featureName => {\n    bools.push(!!(featureBits[featureName] || {}).required)\n    bools.push(!!(featureBits[featureName] || {}).supported)\n  })\n  // Make sure that only minimal number of bits is encoded\n  while (bools[bools.length - 1] === false) {\n    bools.pop()\n  }\n  while (bools.length % 5 !== 0) {\n    bools.push(false)\n  }\n  if (\n    featureBits.extra_bits &&\n    Array.isArray(featureBits.extra_bits.bits) &&\n    featureBits.extra_bits.bits.length > 0\n  ) {\n    while (bools.length < featureBits.extra_bits.start_bit) {\n      bools.push(false)\n    }\n    bools = bools.concat(featureBits.extra_bits.bits)\n  }\n  if (wordsLength !== undefined && bools.length / 5 > wordsLength) {\n    throw new Error('word_length is too small to contain all featureBits')\n  } else if (wordsLength === undefined) {\n    wordsLength = Math.ceil(bools.length / 5)\n  }\n  return new Array(wordsLength).fill(0).map((_, index) =>\n    bools[index * 5 + 4] << 4 |\n    bools[index * 5 + 3] << 3 |\n    bools[index * 5 + 2] << 2 |\n    bools[index * 5 + 1] << 1 |\n    bools[index * 5] << 0\n  ).reverse()\n}\n\n// routing info is encoded first as a large buffer\n// 51 bytes for each channel\n// 33 byte pubkey, 8 byte short_channel_id, 4 byte millisatoshi base fee (left padded)\n// 4 byte fee proportional millionths and a 2 byte left padded CLTV expiry delta.\n// after encoding these 51 byte chunks and concatenating them\n// convert to words right padding 0 bits.\nfunction routingInfoEncoder (datas) {\n  let buffer = Buffer.from([])\n  datas.forEach(data => {\n    buffer = Buffer.concat([buffer, hexToBuffer(data.pubkey)])\n    buffer = Buffer.concat([buffer, hexToBuffer(data.short_channel_id)])\n    buffer = Buffer.concat([buffer, Buffer.from([0, 0, 0].concat(intBEToWords(data.fee_base_msat, 8)).slice(-4))])\n    buffer = Buffer.concat([buffer, Buffer.from([0, 0, 0].concat(intBEToWords(data.fee_proportional_millionths, 8)).slice(-4))])\n    buffer = Buffer.concat([buffer, Buffer.from([0].concat(intBEToWords(data.cltv_expiry_delta, 8)).slice(-2))])\n  })\n  return hexToWord(buffer)\n}\n\n// if text, return the sha256 hash of the text as words.\n// if hex, return the words representation of that data.\nfunction purposeCommitEncoder (data) {\n  let buffer\n  if (data !== undefined && (typeof data === 'string' || data instanceof String)) {\n    if (data.match(/^([a-zA-Z0-9]{2})*$/)) {\n      buffer = Buffer.from(data, 'hex')\n    } else {\n      buffer = sha256(Buffer.from(data, 'utf8'))\n    }\n  } else {\n    throw new Error('purpose or purpose commit must be a string or hex string')\n  }\n  return bech32.toWords(buffer)\n}\n\nfunction tagsItems (tags, tagName) {\n  const tag = tags.filter(item => item.tagName === tagName)\n  const data = tag.length > 0 ? tag[0].data : null\n  return data\n}\n\nfunction tagsContainItem (tags, tagName) {\n  return tagsItems(tags, tagName) !== null\n}\n\nfunction orderKeys (unorderedObj, forDecode) {\n  const orderedObj = {}\n  Object.keys(unorderedObj).sort().forEach((key) => {\n    orderedObj[key] = unorderedObj[key]\n  })\n  if (forDecode === true) {\n    const cacheName = '__tagsObject_cache'\n    Object.defineProperty(orderedObj, 'tagsObject', {\n      get () {\n        if (!this[cacheName]) {\n          Object.defineProperty(this, cacheName, {\n            value: getTagsObject(this.tags)\n          })\n        }\n        return this[cacheName]\n      }\n    })\n  }\n  return orderedObj\n}\n\nfunction satToHrp (satoshis) {\n  if (!satoshis.toString().match(/^\\d+$/)) {\n    throw new Error('satoshis must be an integer')\n  }\n  const millisatoshisBN = BigInt(satoshis)\n  return millisatToHrp(millisatoshisBN * 1000n)\n}\n\nfunction millisatToHrp (millisatoshis) {\n  if (!millisatoshis.toString().match(/^\\d+$/)) {\n    throw new Error('millisatoshis must be an integer')\n  }\n  const millisatoshisBN = BigInt(millisatoshis)\n  const millisatoshisString = millisatoshisBN.toString(10)\n  const millisatoshisLength = millisatoshisString.length\n  let divisorString, valueString\n  if (millisatoshisLength > 11 && /0{11}$/.test(millisatoshisString)) {\n    divisorString = ''\n    valueString = (millisatoshisBN / MILLISATS_PER_BTC).toString(10)\n  } else if (millisatoshisLength > 8 && /0{8}$/.test(millisatoshisString)) {\n    divisorString = 'm'\n    valueString = (millisatoshisBN / MILLISATS_PER_MILLIBTC).toString(10)\n  } else if (millisatoshisLength > 5 && /0{5}$/.test(millisatoshisString)) {\n    divisorString = 'u'\n    valueString = (millisatoshisBN / MILLISATS_PER_MICROBTC).toString(10)\n  } else if (millisatoshisLength > 2 && /0{2}$/.test(millisatoshisString)) {\n    divisorString = 'n'\n    valueString = (millisatoshisBN / MILLISATS_PER_NANOBTC).toString(10)\n  } else {\n    divisorString = 'p'\n    valueString = (millisatoshisBN * PICOBTC_PER_MILLISATS).toString(10)\n  }\n  return valueString + divisorString\n}\n\nfunction hrpToSat (hrpString, outputString) {\n  const millisatoshisBN = hrpToMillisat(hrpString, false)\n  if ((millisatoshisBN % 1000n) !== 0n) {\n    throw new Error('Amount is outside of valid range')\n  }\n  const result = millisatoshisBN / 1000n\n  return outputString ? result.toString(10) : result\n}\n\nfunction hrpToMillisat (hrpString, outputString) {\n  let divisor, value\n  if (hrpString.slice(-1).match(/^[munp]$/)) {\n    divisor = hrpString.slice(-1)\n    value = hrpString.slice(0, -1)\n  } else if (hrpString.slice(-1).match(/^[^munp0-9]$/)) {\n    throw new Error('Not a valid multiplier for the amount')\n  } else {\n    value = hrpString\n  }\n\n  if (!value.match(/^\\d+$/)) throw new Error('Not a valid human readable amount')\n\n  const valueBN = BigInt(value)\n\n  const millisatoshisBN = divisor\n    ? (valueBN * MILLISATS_PER_BTC / DIVISORS[divisor])\n    : (valueBN * MILLISATS_PER_BTC)\n\n  if (((divisor === 'p' && (valueBN % 10n) !== 0n) ||\n      millisatoshisBN > MAX_MILLISATS)) {\n    throw new Error('Amount is outside of valid range')\n  }\n\n  return outputString ? millisatoshisBN.toString(10) : millisatoshisBN\n}\n\nfunction sign (inputPayReqObj, inputPrivateKey) {\n  const payReqObj = cloneDeep(inputPayReqObj)\n  const privateKey = hexToBuffer(inputPrivateKey)\n  if (payReqObj.complete && payReqObj.paymentRequest) return payReqObj\n\n  if (privateKey === undefined || privateKey.length !== 32 ||\n      !nobleSecp256k1.utils.isValidPrivateKey(privateKey)) {\n    throw new Error('privateKey must be a 32 byte Buffer and valid private key')\n  }\n\n  let nodePublicKey, tagNodePublicKey\n  // If there is a payee_node_key tag convert to buffer\n  if (tagsContainItem(payReqObj.tags, TAGNAMES['19'])) {\n    tagNodePublicKey = hexToBuffer(tagsItems(payReqObj.tags, TAGNAMES['19']))\n  }\n  // If there is payeeNodeKey attribute, convert to buffer\n  if (payReqObj.payeeNodeKey) {\n    nodePublicKey = hexToBuffer(payReqObj.payeeNodeKey)\n  }\n  // If they are not equal throw an error\n  if (nodePublicKey && tagNodePublicKey && !tagNodePublicKey.equals(nodePublicKey)) {\n    throw new Error('payee node key tag and payeeNodeKey attribute must match')\n  }\n\n  // make sure if either exist they are in nodePublicKey\n  nodePublicKey = tagNodePublicKey || nodePublicKey\n\n  const publicKey = Buffer.from(nobleSecp256k1.getPublicKey(privateKey, true))\n\n  // Check if pubkey matches for private key\n  if (nodePublicKey && !publicKey.equals(nodePublicKey)) {\n    throw new Error('The private key given is not the private key of the node public key given')\n  }\n\n  const words = bech32.decode(payReqObj.wordsTemp, Number.MAX_SAFE_INTEGER).words\n\n  // the preimage for the signing data is the buffer of the prefix concatenated\n  // with the buffer conversion of the data words excluding the signature\n  // (right padded with 0 bits)\n  const toSign = Buffer.concat([Buffer.from(payReqObj.prefix, 'utf8'), wordsToBuffer(words)])\n  // single SHA256 hash for the signature\n  const payReqHash = sha256(toSign)\n\n  // signature is 64 bytes (32 byte r value and 32 byte s value concatenated)\n  // PLUS one extra byte appended to the right with the recoveryID in [0,1,2,3]\n  // Then convert to 5 bit words with right padding 0 bits.\n  const sigObj = nobleSecp256k1.sign(payReqHash, privateKey, { lowS: true })\n  payReqObj.signature = Buffer.from(sigObj.toCompactRawBytes()).toString('hex')\n  const sigWords = hexToWord(payReqObj.signature + '0' + sigObj.recovery)\n\n  // append signature words to the words, mark as complete, and add the payreq\n  payReqObj.payeeNodeKey = publicKey.toString('hex')\n  payReqObj.recoveryFlag = sigObj.recovery\n  payReqObj.wordsTemp = bech32.encode('temp', words.concat(sigWords), Number.MAX_SAFE_INTEGER)\n  payReqObj.complete = true\n  payReqObj.paymentRequest = bech32.encode(payReqObj.prefix, words.concat(sigWords), Number.MAX_SAFE_INTEGER)\n\n  return orderKeys(payReqObj)\n}\n\nfunction encode (inputData, addDefaults) {\n  // we don't want to affect the data being passed in, so we copy the object\n  const data = cloneDeep(inputData)\n\n  // by default we will add default values to description, expire time, and min cltv\n  if (addDefaults === undefined) addDefaults = true\n\n  const canReconstruct = !(data.signature === undefined || data.recoveryFlag === undefined)\n\n  // if no cointype is defined, set to testnet\n  let coinTypeObj\n  if (data.network === undefined && !canReconstruct) {\n    data.network = DEFAULTNETWORK\n    coinTypeObj = DEFAULTNETWORK\n  } else if (data.network === undefined && canReconstruct) {\n    throw new Error('Need network for proper payment request reconstruction')\n  } else {\n    // if the coinType is not a valid name of a network in @scure/btc-signer, fail\n    if (\n      !data.network.bech32 ||\n      data.network.pubKeyHash === undefined ||\n      data.network.scriptHash === undefined ||\n      !Array.isArray(data.network.validWitnessVersions) ||\n      data.network.wif === undefined\n    ) throw new Error('Invalid network')\n    coinTypeObj = data.network\n  }\n\n  // use current time as default timestamp (seconds)\n  if (data.timestamp === undefined && !canReconstruct) {\n    data.timestamp = Math.floor(new Date().getTime() / 1000)\n  } else if (data.timestamp === undefined && canReconstruct) {\n    throw new Error('Need timestamp for proper payment request reconstruction')\n  }\n\n  if (data.tags === undefined) throw new Error('Payment Requests need tags array')\n\n  // If no payment hash, fail\n  if (!tagsContainItem(data.tags, TAGNAMES['1'])) {\n    throw new Error('Lightning Payment Request needs a payment hash')\n  }\n  // If no feature bits when payment secret is found, fail\n  if (tagsContainItem(data.tags, TAGNAMES['16'])) {\n    if (!tagsContainItem(data.tags, TAGNAMES['5'])) {\n      if (addDefaults) {\n        data.tags.push({\n          tagName: TAGNAMES['5'],\n          data: DEFAULTFEATUREBITS\n        })\n      } else {\n        throw new Error('Payment request requires feature bits with at least payment secret support flagged if payment secret is included')\n      }\n    } else {\n      const fB = tagsItems(data.tags, TAGNAMES['5'])\n      if (!fB.payment_secret || (!fB.payment_secret.supported && !fB.payment_secret.required)) {\n        throw new Error('Payment request requires feature bits with at least payment secret support flagged if payment secret is included')\n      }\n    }\n  }\n  // If no description or purpose commit hash/message, fail\n  if (!tagsContainItem(data.tags, TAGNAMES['13']) && !tagsContainItem(data.tags, TAGNAMES['23'])) {\n    if (addDefaults) {\n      data.tags.push({\n        tagName: TAGNAMES['13'],\n        data: DEFAULTDESCRIPTION\n      })\n    } else {\n      throw new Error('Payment request requires description or purpose commit hash')\n    }\n  }\n\n  // If a description exists, check to make sure the buffer isn't greater than\n  // 639 bytes long, since 639 * 8 / 5 = 1023 words (5 bit) when padded\n  if (tagsContainItem(data.tags, TAGNAMES['13']) &&\n      Buffer.from(tagsItems(data.tags, TAGNAMES['13']), 'utf8').length > 639) {\n    throw new Error('Description is too long: Max length 639 bytes')\n  }\n\n  // if there's no expire time, and it is not reconstructing (must have private key)\n  // default to adding a 3600 second expire time (1 hour)\n  if (!tagsContainItem(data.tags, TAGNAMES['6']) && !canReconstruct && addDefaults) {\n    data.tags.push({\n      tagName: TAGNAMES['6'],\n      data: DEFAULTEXPIRETIME\n    })\n  }\n\n  // if there's no minimum cltv time, and it is not reconstructing (must have private key)\n  // default to adding a 9 block minimum cltv time (90 minutes for bitcoin)\n  if (!tagsContainItem(data.tags, TAGNAMES['24']) && !canReconstruct && addDefaults) {\n    data.tags.push({\n      tagName: TAGNAMES['24'],\n      data: DEFAULTCLTVEXPIRY\n    })\n  }\n\n  let nodePublicKey, tagNodePublicKey\n  // If there is a payee_node_key tag convert to buffer\n  if (tagsContainItem(data.tags, TAGNAMES['19'])) tagNodePublicKey = hexToBuffer(tagsItems(data.tags, TAGNAMES['19']))\n  // If there is payeeNodeKey attribute, convert to buffer\n  if (data.payeeNodeKey) nodePublicKey = hexToBuffer(data.payeeNodeKey)\n  if (nodePublicKey && tagNodePublicKey && !tagNodePublicKey.equals(nodePublicKey)) {\n    throw new Error('payeeNodeKey and tag payee node key do not match')\n  }\n  // in case we have one or the other, make sure it's in nodePublicKey\n  nodePublicKey = nodePublicKey || tagNodePublicKey\n  if (nodePublicKey) data.payeeNodeKey = nodePublicKey.toString('hex')\n\n  let code, addressHash, address\n  // If there is a fallback address tag we must check it is valid\n  if (tagsContainItem(data.tags, TAGNAMES['9'])) {\n    const addrData = tagsItems(data.tags, TAGNAMES['9'])\n    // Most people will just provide address so Hash and code will be undefined here\n    address = addrData.address\n    addressHash = addrData.addressHash\n    code = addrData.code\n\n    if (addressHash === undefined || code === undefined) {\n      let res\n      try {\n        res = bitcoin.Address(coinTypeObj).decode(address)\n      } catch (e) {\n        throw new Error('Fallback address invalid format')\n      }\n      switch (res.type) {\n        case 'pkh':\n          addressHash = res.hash\n          code = 17\n          break\n        case 'sh':\n          addressHash = res.hash\n          code = 18\n          break\n        case 'wsh':\n          addressHash = res.hash\n          code = 0\n          break\n        case 'wpkh':\n          addressHash = res.hash\n          code = 0\n          break\n        case 'tr':\n          addressHash = res.pubkey\n          code = 1\n          break\n        default:\n          throw new Error('Fallback address format is unknown')\n      }\n\n      // FIXME: If addressHash or code is missing, add them to the original Object\n      // after parsing the address value... this changes the actual attributes of the data object.\n      // Not very clean.\n      // Without this, a person can not specify a fallback address tag with only the address key.\n      addrData.addressHash = Buffer.from(addressHash).toString('hex')\n      addrData.code = code\n    }\n  }\n\n  // If there is route info tag, check that each route has all 4 necessary info\n  if (tagsContainItem(data.tags, TAGNAMES['3'])) {\n    const routingInfo = tagsItems(data.tags, TAGNAMES['3'])\n    routingInfo.forEach(route => {\n      if (route.pubkey === undefined ||\n        route.short_channel_id === undefined ||\n        route.fee_base_msat === undefined ||\n        route.fee_proportional_millionths === undefined ||\n        route.cltv_expiry_delta === undefined) {\n        throw new Error('Routing info is incomplete')\n      }\n      try {\n        nobleSecp256k1.ProjectivePoint.fromHex(hexToBuffer(route.pubkey))\n      } catch (e) {\n        throw new Error('Routing info pubkey is not a valid pubkey')\n      }\n      const shortId = hexToBuffer(route.short_channel_id)\n      if (!(shortId instanceof Buffer) || shortId.length !== 8) {\n        throw new Error('Routing info short channel id must be 8 bytes')\n      }\n      if (typeof route.fee_base_msat !== 'number' ||\n        Math.floor(route.fee_base_msat) !== route.fee_base_msat) {\n        throw new Error('Routing info fee base msat is not an integer')\n      }\n      if (typeof route.fee_proportional_millionths !== 'number' ||\n        Math.floor(route.fee_proportional_millionths) !== route.fee_proportional_millionths) {\n        throw new Error('Routing info fee proportional millionths is not an integer')\n      }\n      if (typeof route.cltv_expiry_delta !== 'number' ||\n        Math.floor(route.cltv_expiry_delta) !== route.cltv_expiry_delta) {\n        throw new Error('Routing info cltv expiry delta is not an integer')\n      }\n    })\n  }\n\n  let prefix = 'ln'\n  prefix += coinTypeObj.bech32\n\n  let hrpString\n  // calculate the smallest possible integer (removing zeroes) and add the best\n  // divisor (m = milli, u = micro, n = nano, p = pico)\n  if (data.millisatoshis && data.satoshis) {\n    hrpString = millisatToHrp(BigInt(data.millisatoshis))\n    const hrpStringSat = satToHrp(BigInt(data.satoshis))\n    if (hrpStringSat !== hrpString) {\n      throw new Error('satoshis and millisatoshis do not match')\n    }\n  } else if (data.millisatoshis) {\n    hrpString = millisatToHrp(BigInt(data.millisatoshis))\n  } else if (data.satoshis) {\n    hrpString = satToHrp(BigInt(data.satoshis))\n  } else {\n    hrpString = ''\n  }\n\n  // bech32 human readable part is lnbc2500m (ln + coinbech32 + satoshis (optional))\n  // lnbc or lntb would be valid as well. (no value specified)\n  prefix += hrpString\n\n  // timestamp converted to 5 bit number array (left padded with 0 bits, NOT right padded)\n  const timestampWords = intBEToWords(data.timestamp)\n  while (timestampWords.length < 7) {\n    timestampWords.unshift(0)\n  }\n\n  const tags = data.tags\n  let tagWords = []\n  tags.forEach(tag => {\n    const possibleTagNames = Object.keys(TAGENCODERS)\n    if (canReconstruct) possibleTagNames.push(unknownTagName)\n    // check if the tagName exists in the encoders object, if not throw Error.\n    if (possibleTagNames.indexOf(tag.tagName) === -1) {\n      throw new Error('Unknown tag key: ' + tag.tagName)\n    }\n\n    let words\n    if (tag.tagName !== unknownTagName) {\n      // each tag starts with 1 word code for the tag\n      tagWords.push(TAGCODES[tag.tagName])\n\n      const encoder = TAGENCODERS[tag.tagName]\n      words = encoder(tag.data)\n    } else {\n      const result = unknownEncoder(tag.data)\n      tagWords.push(result.tagCode)\n      words = result.words\n    }\n    // after the tag code, 2 words are used to store the length (in 5 bit words) of the tag data\n    // (also left padded, most integers are left padded while buffers are right padded)\n    tagWords = tagWords.concat([0].concat(intBEToWords(words.length)).slice(-2))\n    // then append the tag data words\n    tagWords = tagWords.concat(words)\n  })\n\n  // the data part of the bech32 is TIMESTAMP || TAGS || SIGNATURE\n  // currently dataWords = TIMESTAMP || TAGS\n  let dataWords = timestampWords.concat(tagWords)\n\n  // the preimage for the signing data is the buffer of the prefix concatenated\n  // with the buffer conversion of the data words excluding the signature\n  // (right padded with 0 bits)\n  const toSign = Buffer.concat([Buffer.from(prefix, 'utf8'), Buffer.from(convert(dataWords, 5, 8))])\n  // single SHA256 hash for the signature\n  const payReqHash = sha256(toSign)\n\n  // signature is 64 bytes (32 byte r value and 32 byte s value concatenated)\n  // PLUS one extra byte appended to the right with the recoveryID in [0,1,2,3]\n  // Then convert to 5 bit words with right padding 0 bits.\n  let sigWords\n  if (canReconstruct) {\n    /* Since BOLT11 does not require a payee_node_key tag in the specs,\n    most parsers will have to recover the pubkey from the signature\n    To ensure the tag data has been provided in the right order etc.\n    we should check that the data we got and the node key given match when\n    reconstructing a payment request from given signature and recoveryID.\n    However, if a privatekey is given, the caller is the privkey owner.\n    Earlier we check if the private key matches the payee node key IF they\n    gave one. */\n    if (nodePublicKey) {\n      const signature = nobleSecp256k1.Signature.fromCompact(Buffer.from(data.signature, 'hex')).addRecoveryBit(data.recoveryFlag)\n      const recoveredPubkey = Buffer.from(signature.recoverPublicKey(payReqHash).toRawBytes(true))\n      if (nodePublicKey && !nodePublicKey.equals(recoveredPubkey)) {\n        throw new Error('Signature, message, and recoveryID did not produce the same pubkey as payeeNodeKey')\n      }\n      sigWords = hexToWord(data.signature + '0' + data.recoveryFlag)\n    } else {\n      throw new Error('Reconstruction with signature and recoveryID requires payeeNodeKey to verify correctness of input data.')\n    }\n  }\n\n  if (sigWords) dataWords = dataWords.concat(sigWords)\n\n  if (tagsContainItem(data.tags, TAGNAMES['6'])) {\n    data.timeExpireDate = data.timestamp + tagsItems(data.tags, TAGNAMES['6'])\n    data.timeExpireDateString = new Date(data.timeExpireDate * 1000).toISOString()\n  }\n  data.timestampString = new Date(data.timestamp * 1000).toISOString()\n  data.complete = !!sigWords\n  data.paymentRequest = data.complete ? bech32.encode(prefix, dataWords, Number.MAX_SAFE_INTEGER) : ''\n  data.prefix = prefix\n  data.wordsTemp = bech32.encode('temp', dataWords, Number.MAX_SAFE_INTEGER)\n\n  // payment requests get pretty long. Nothing in the spec says anything about length.\n  // Even though bech32 loses error correction power over 1023 characters.\n  return orderKeys(data)\n}\n\n// decode will only have extra comments that aren't covered in encode comments.\n// also if anything is hard to read I'll comment.\nfunction decode (paymentRequest, network) {\n  if (typeof paymentRequest !== 'string') throw new Error('Lightning Payment Request must be string')\n  if (paymentRequest.slice(0, 2).toLowerCase() !== 'ln') throw new Error('Not a proper lightning payment request')\n  const decoded = bech32.decode(paymentRequest, Number.MAX_SAFE_INTEGER)\n  paymentRequest = paymentRequest.toLowerCase()\n  const prefix = decoded.prefix\n  let words = decoded.words\n\n  // signature is always 104 words on the end\n  // cutting off at the beginning helps since there's no way to tell\n  // ahead of time how many tags there are.\n  const sigWords = words.slice(-104)\n  // grabbing a copy of the words for later, words will be sliced as we parse.\n  const wordsNoSig = words.slice(0, -104)\n  words = words.slice(0, -104)\n\n  let sigBuffer = wordsToBuffer(sigWords, true)\n  const recoveryFlag = sigBuffer.slice(-1)[0]\n  sigBuffer = sigBuffer.slice(0, -1)\n\n  if (!(recoveryFlag in [0, 1, 2, 3]) || sigBuffer.length !== 64) {\n    throw new Error('Signature is missing or incorrect')\n  }\n\n  // Without reverse lookups, can't say that the multipier at the end must\n  // have a number before it, so instead we parse, and if the second group\n  // doesn't have anything, there's a good chance the last letter of the\n  // coin type got captured by the third group, so just re-regex without\n  // the number.\n  let prefixMatches = prefix.match(/^ln(\\S+?)(\\d*)([a-zA-Z]?)$/)\n  if (prefixMatches && !prefixMatches[2]) prefixMatches = prefix.match(/^ln(\\S+)$/)\n  if (!prefixMatches) {\n    throw new Error('Not a proper lightning payment request')\n  }\n\n  const bech32Prefix = prefixMatches[1]\n  let coinNetwork\n  if (!network) {\n    switch (bech32Prefix) {\n      case DEFAULTNETWORK.bech32:\n        coinNetwork = DEFAULTNETWORK\n        break\n      case TESTNETWORK.bech32:\n        coinNetwork = TESTNETWORK\n        break\n      case REGTESTNETWORK.bech32:\n        coinNetwork = REGTESTNETWORK\n        break\n      case SIMNETWORK.bech32:\n        coinNetwork = SIMNETWORK\n        break\n    }\n  } else {\n    if (\n      network.bech32 === undefined ||\n      network.pubKeyHash === undefined ||\n      network.scriptHash === undefined ||\n      !Array.isArray(network.validWitnessVersions) ||\n      network.wif === undefined\n    ) throw new Error('Invalid network')\n    coinNetwork = network\n  }\n  if (!coinNetwork || coinNetwork.bech32 !== bech32Prefix) {\n    throw new Error('Unknown coin bech32 prefix')\n  }\n\n  const value = prefixMatches[2]\n  let satoshis, millisatoshis, removeSatoshis\n  if (value) {\n    const divisor = prefixMatches[3]\n    try {\n      satoshis = parseInt(hrpToSat(value + divisor, true))\n    } catch (e) {\n      satoshis = null\n      removeSatoshis = true\n    }\n    millisatoshis = hrpToMillisat(value + divisor, true)\n  } else {\n    satoshis = null\n    millisatoshis = null\n  }\n\n  // reminder: left padded 0 bits\n  const timestamp = wordsToIntBE(words.slice(0, 7))\n  const timestampString = new Date(timestamp * 1000).toISOString()\n  words = words.slice(7) // trim off the left 7 words\n\n  const tags = []\n  let tagName, parser, tagLength, tagWords\n  // we have no tag count to go on, so just keep hacking off words\n  // until we have none.\n  while (words.length > 0) {\n    const tagCode = words[0].toString()\n    tagName = TAGNAMES[tagCode] || unknownTagName\n    parser = TAGPARSERS[tagCode] || getUnknownParser(tagCode)\n    words = words.slice(1)\n\n    tagLength = wordsToIntBE(words.slice(0, 2))\n    words = words.slice(2)\n\n    tagWords = words.slice(0, tagLength)\n    words = words.slice(tagLength)\n\n    // See: parsers for more comments\n    tags.push({\n      tagName,\n      data: parser(tagWords, coinNetwork) // only fallback address needs coinNetwork\n    })\n  }\n\n  let timeExpireDate, timeExpireDateString\n  // be kind and provide an absolute expiration date.\n  // good for logs\n  if (tagsContainItem(tags, TAGNAMES['6'])) {\n    timeExpireDate = timestamp + tagsItems(tags, TAGNAMES['6'])\n    timeExpireDateString = new Date(timeExpireDate * 1000).toISOString()\n  }\n\n  const toSign = Buffer.concat([Buffer.from(prefix, 'utf8'), Buffer.from(convert(wordsNoSig, 5, 8))])\n  const payReqHash = sha256(toSign)\n\n  const signature = nobleSecp256k1.Signature.fromCompact(sigBuffer).addRecoveryBit(recoveryFlag)\n  const sigPubkey = Buffer.from(signature.recoverPublicKey(payReqHash).toRawBytes(true))\n\n  if (tagsContainItem(tags, TAGNAMES['19']) && tagsItems(tags, TAGNAMES['19']) !== sigPubkey.toString('hex')) {\n    throw new Error('Lightning Payment Request signature pubkey does not match payee pubkey')\n  }\n\n  let finalResult = {\n    paymentRequest,\n    complete: true,\n    prefix,\n    wordsTemp: bech32.encode('temp', wordsNoSig.concat(sigWords), Number.MAX_SAFE_INTEGER),\n    network: coinNetwork,\n    satoshis,\n    millisatoshis,\n    timestamp,\n    timestampString,\n    payeeNodeKey: sigPubkey.toString('hex'),\n    signature: sigBuffer.toString('hex'),\n    recoveryFlag,\n    tags\n  }\n\n  if (removeSatoshis) {\n    delete finalResult.satoshis\n  }\n\n  if (timeExpireDate) {\n    finalResult = Object.assign(finalResult, { timeExpireDate, timeExpireDateString })\n  }\n\n  return orderKeys(finalResult, true)\n}\n\nfunction getTagsObject (tags) {\n  const result = {}\n  tags.forEach(tag => {\n    if (tag.tagName === unknownTagName) {\n      if (!result.unknownTags) {\n        result.unknownTags = []\n      }\n      result.unknownTags.push(tag.data)\n    } else {\n      if (tag.tagName === 'blinded_payinfo') {\n        if (result[tag.tagName] == null) result[tag.tagName] = []\n        result[tag.tagName].push(tag.data)\n      } else {\n        result[tag.tagName] = tag.data\n      }\n    }\n  })\n\n  return result\n}\n\nmodule.exports = {\n  encode,\n  decode,\n  sign,\n  satToHrp,\n  millisatToHrp,\n  hrpToSat,\n  hrpToMillisat\n}\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IEscrowSwap = exports.isIEscrowSwapInit = void 0;\r\nconst ISwap_1 = require(\"../ISwap\");\r\nconst base_1 = require(\"@atomiqlabs/base\");\r\nconst Utils_1 = require(\"../../utils/Utils\");\r\nconst buffer_1 = require(\"buffer\");\r\nconst Tokens_1 = require(\"../../Tokens\");\r\nfunction isIEscrowSwapInit(obj) {\r\n    return typeof obj === 'object' &&\r\n        obj.feeRate != null &&\r\n        (obj.signatureData == null || (typeof (obj.signatureData) === 'object' &&\r\n            typeof (obj.signatureData.prefix) === \"string\" &&\r\n            typeof (obj.signatureData.timeout) === \"string\" &&\r\n            typeof (obj.signatureData.signature) === \"string\")) &&\r\n        (obj.data == null || typeof obj.data === 'object') &&\r\n        (0, ISwap_1.isISwapInit)(obj);\r\n}\r\nexports.isIEscrowSwapInit = isIEscrowSwapInit;\r\nclass IEscrowSwap extends ISwap_1.ISwap {\r\n    constructor(wrapper, swapInitOrObj) {\r\n        super(wrapper, swapInitOrObj);\r\n        if (!isIEscrowSwapInit(swapInitOrObj)) {\r\n            this.data = swapInitOrObj.data != null ? new wrapper.swapDataDeserializer(swapInitOrObj.data) : null;\r\n            this.signatureData = swapInitOrObj.signature == null ? null : {\r\n                prefix: swapInitOrObj.prefix,\r\n                timeout: swapInitOrObj.timeout,\r\n                signature: swapInitOrObj.signature\r\n            };\r\n            this.feeRate = swapInitOrObj.feeRate;\r\n            this.commitTxId = swapInitOrObj.commitTxId;\r\n            this.claimTxId = swapInitOrObj.claimTxId;\r\n            this.refundTxId = swapInitOrObj.refundTxId;\r\n        }\r\n    }\r\n    //////////////////////////////\r\n    //// Identifiers\r\n    /**\r\n     * Returns the identification hash of the swap, usually claim data hash, but can be overriden, e.g. for\r\n     *  lightning swaps the identifier hash is used instead of claim data hash\r\n     */\r\n    getIdentifierHash() {\r\n        const claimHashBuffer = buffer_1.Buffer.from(this.getClaimHash(), \"hex\");\r\n        if (this.randomNonce == null)\r\n            return claimHashBuffer;\r\n        return buffer_1.Buffer.concat([claimHashBuffer, buffer_1.Buffer.from(this.randomNonce, \"hex\")]);\r\n    }\r\n    /**\r\n     * Returns the identification hash of the swap, usually claim data hash, but can be overriden, e.g. for\r\n     *  lightning swaps the identifier hash is used instead of claim data hash\r\n     */\r\n    getIdentifierHashString() {\r\n        const identifierHash = this.getIdentifierHash();\r\n        if (identifierHash == null)\r\n            return null;\r\n        return identifierHash.toString(\"hex\");\r\n    }\r\n    _getEscrowHash() {\r\n        return this.data?.getEscrowHash();\r\n    }\r\n    /**\r\n     * Returns the escrow hash - i.e. hash of the escrow data\r\n     */\r\n    getEscrowHash() {\r\n        return this._getEscrowHash();\r\n    }\r\n    /**\r\n     * Returns the claim data hash - i.e. hash passed to the claim handler\r\n     */\r\n    getClaimHash() {\r\n        return this.data?.getClaimHash();\r\n    }\r\n    getId() {\r\n        return this.getIdentifierHashString();\r\n    }\r\n    //////////////////////////////\r\n    //// Watchdogs\r\n    /**\r\n     * Periodically checks for init signature's expiry\r\n     *\r\n     * @param abortSignal\r\n     * @param interval How often to check (in seconds), default to 5s\r\n     * @protected\r\n     */\r\n    async watchdogWaitTillSignatureExpiry(abortSignal, interval = 5) {\r\n        let expired = false;\r\n        while (!expired) {\r\n            await (0, Utils_1.timeoutPromise)(interval * 1000, abortSignal);\r\n            try {\r\n                expired = await this.wrapper.contract.isInitAuthorizationExpired(this.data, this.signatureData);\r\n            }\r\n            catch (e) {\r\n                this.logger.error(\"watchdogWaitTillSignatureExpiry(): Error when checking signature expiry: \", e);\r\n            }\r\n        }\r\n        if (abortSignal != null)\r\n            abortSignal.throwIfAborted();\r\n    }\r\n    /**\r\n     * Periodically checks the chain to see whether the swap is committed\r\n     *\r\n     * @param abortSignal\r\n     * @param interval How often to check (in seconds), default to 5s\r\n     * @protected\r\n     */\r\n    async watchdogWaitTillCommited(abortSignal, interval = 5) {\r\n        let status = { type: base_1.SwapCommitStateType.NOT_COMMITED };\r\n        while (status?.type === base_1.SwapCommitStateType.NOT_COMMITED) {\r\n            await (0, Utils_1.timeoutPromise)(interval * 1000, abortSignal);\r\n            try {\r\n                status = await this.wrapper.contract.getCommitStatus(this._getInitiator(), this.data);\r\n                if (status?.type === base_1.SwapCommitStateType.NOT_COMMITED &&\r\n                    await this.wrapper.contract.isInitAuthorizationExpired(this.data, this.signatureData))\r\n                    return false;\r\n            }\r\n            catch (e) {\r\n                this.logger.error(\"watchdogWaitTillCommited(): Error when fetching commit status or signature expiry: \", e);\r\n            }\r\n        }\r\n        if (abortSignal != null)\r\n            abortSignal.throwIfAborted();\r\n        return true;\r\n    }\r\n    /**\r\n     * Periodically checks the chain to see whether the swap was finished (claimed or refunded)\r\n     *\r\n     * @param abortSignal\r\n     * @param interval How often to check (in seconds), default to 5s\r\n     * @protected\r\n     */\r\n    async watchdogWaitTillResult(abortSignal, interval = 5) {\r\n        let status = { type: base_1.SwapCommitStateType.COMMITED };\r\n        while (status?.type === base_1.SwapCommitStateType.COMMITED || status?.type === base_1.SwapCommitStateType.REFUNDABLE) {\r\n            await (0, Utils_1.timeoutPromise)(interval * 1000, abortSignal);\r\n            try {\r\n                status = await this.wrapper.contract.getCommitStatus(this._getInitiator(), this.data);\r\n            }\r\n            catch (e) {\r\n                this.logger.error(\"watchdogWaitTillResult(): Error when fetching commit status: \", e);\r\n            }\r\n        }\r\n        if (abortSignal != null)\r\n            abortSignal.throwIfAborted();\r\n        return status;\r\n    }\r\n    //////////////////////////////\r\n    //// Quote verification\r\n    /**\r\n     * Checks if the swap's quote is expired for good (i.e. the swap strictly cannot be committed on-chain anymore)\r\n     */\r\n    async verifyQuoteDefinitelyExpired() {\r\n        return (0, Utils_1.tryWithRetries)(() => this.wrapper.contract.isInitAuthorizationExpired(this.data, this.signatureData));\r\n    }\r\n    /**\r\n     * Checks if the swap's quote is still valid\r\n     */\r\n    async verifyQuoteValid() {\r\n        try {\r\n            await (0, Utils_1.tryWithRetries)(() => this.wrapper.contract.isValidInitAuthorization(this._getInitiator(), this.data, this.signatureData, this.feeRate), null, base_1.SignatureVerificationError);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            if (e instanceof base_1.SignatureVerificationError) {\r\n                return false;\r\n            }\r\n        }\r\n    }\r\n    //////////////////////////////\r\n    //// Amounts & fees\r\n    /**\r\n     * Get the estimated smart chain fee of the commit transaction\r\n     */\r\n    getCommitFee() {\r\n        return this.wrapper.contract.getCommitFee(this.data, this.feeRate);\r\n    }\r\n    /**\r\n     * Returns the transaction fee paid on the smart chain\r\n     */\r\n    async getSmartChainNetworkFee() {\r\n        const swapContract = this.wrapper.contract;\r\n        return (0, Tokens_1.toTokenAmount)(await (swapContract.getRawCommitFee != null ?\r\n            swapContract.getRawCommitFee(this.data, this.feeRate) :\r\n            swapContract.getCommitFee(this.data, this.feeRate)), this.wrapper.getNativeToken(), this.wrapper.prices);\r\n    }\r\n    serialize() {\r\n        return {\r\n            ...super.serialize(),\r\n            data: this.data != null ? this.data.serialize() : null,\r\n            prefix: this.signatureData?.prefix,\r\n            timeout: this.signatureData?.timeout,\r\n            signature: this.signatureData?.signature,\r\n            feeRate: this.feeRate == null ? null : this.feeRate.toString(),\r\n            commitTxId: this.commitTxId,\r\n            claimTxId: this.claimTxId,\r\n            refundTxId: this.refundTxId\r\n        };\r\n    }\r\n    ;\r\n}\r\nexports.IEscrowSwap = IEscrowSwap;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FeeType = void 0;\r\nvar FeeType;\r\n(function (FeeType) {\r\n    FeeType[FeeType[\"SWAP\"] = 0] = \"SWAP\";\r\n    FeeType[FeeType[\"NETWORK_OUTPUT\"] = 1] = \"NETWORK_OUTPUT\";\r\n})(FeeType = exports.FeeType || (exports.FeeType = {}));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ToBTCSwapState = exports.IToBTCSwap = exports.isIToBTCSwapInit = void 0;\r\nconst base_1 = require(\"@atomiqlabs/base\");\r\nconst IntermediaryAPI_1 = require(\"../../../intermediaries/IntermediaryAPI\");\r\nconst IntermediaryError_1 = require(\"../../../errors/IntermediaryError\");\r\nconst Utils_1 = require(\"../../../utils/Utils\");\r\nconst Tokens_1 = require(\"../../../Tokens\");\r\nconst IEscrowSwap_1 = require(\"../IEscrowSwap\");\r\nconst Fee_1 = require(\"../../fee/Fee\");\r\nconst ISwap_1 = require(\"../../ISwap\");\r\nfunction isIToBTCSwapInit(obj) {\r\n    return typeof (obj.networkFee) === \"bigint\" &&\r\n        (obj.networkFeeBtc == null || typeof (obj.networkFeeBtc) === \"bigint\") &&\r\n        (0, IEscrowSwap_1.isIEscrowSwapInit)(obj);\r\n}\r\nexports.isIToBTCSwapInit = isIToBTCSwapInit;\r\nclass IToBTCSwap extends IEscrowSwap_1.IEscrowSwap {\r\n    constructor(wrapper, initOrObject) {\r\n        super(wrapper, initOrObject);\r\n        if (isIToBTCSwapInit(initOrObject)) {\r\n            this.state = ToBTCSwapState.CREATED;\r\n        }\r\n        else {\r\n            this.networkFee = initOrObject.networkFee == null ? null : BigInt(initOrObject.networkFee);\r\n            this.networkFeeBtc = initOrObject.networkFeeBtc == null ? null : BigInt(initOrObject.networkFeeBtc);\r\n        }\r\n    }\r\n    upgradeVersion() {\r\n        if (this.version == null) {\r\n            switch (this.state) {\r\n                case -2:\r\n                    this.state = ToBTCSwapState.REFUNDED;\r\n                    break;\r\n                case -1:\r\n                    this.state = ToBTCSwapState.QUOTE_EXPIRED;\r\n                    break;\r\n                case 0:\r\n                    this.state = ToBTCSwapState.CREATED;\r\n                    break;\r\n                case 1:\r\n                    this.state = ToBTCSwapState.COMMITED;\r\n                    break;\r\n                case 2:\r\n                    this.state = ToBTCSwapState.CLAIMED;\r\n                    break;\r\n                case 3:\r\n                    this.state = ToBTCSwapState.REFUNDABLE;\r\n                    break;\r\n            }\r\n            this.version = 1;\r\n        }\r\n    }\r\n    /**\r\n     * In case swapFee in BTC is not supplied it recalculates it based on swap price\r\n     * @protected\r\n     */\r\n    tryRecomputeSwapPrice() {\r\n        if (this.swapFeeBtc == null) {\r\n            this.swapFeeBtc = this.swapFee * this.getOutput().rawAmount / this.getInputWithoutFee().rawAmount;\r\n        }\r\n        if (this.networkFeeBtc == null) {\r\n            this.networkFeeBtc = this.networkFee * this.getOutput().rawAmount / this.getInputWithoutFee().rawAmount;\r\n        }\r\n        super.tryRecomputeSwapPrice();\r\n    }\r\n    /**\r\n     * Returns the payment hash identifier to be sent to the LP for getStatus and getRefund\r\n     * @protected\r\n     */\r\n    getLpIdentifier() {\r\n        return this.getClaimHash();\r\n    }\r\n    //////////////////////////////\r\n    //// Getters & utils\r\n    getInputTxId() {\r\n        return this.commitTxId;\r\n    }\r\n    requiresAction() {\r\n        return this.isRefundable();\r\n    }\r\n    /**\r\n     * Returns whether the swap is finished and in its terminal state (this can mean successful, refunded or failed)\r\n     */\r\n    isFinished() {\r\n        return this.state === ToBTCSwapState.CLAIMED || this.state === ToBTCSwapState.REFUNDED || this.state === ToBTCSwapState.QUOTE_EXPIRED;\r\n    }\r\n    isRefundable() {\r\n        return this.state === ToBTCSwapState.REFUNDABLE;\r\n    }\r\n    isQuoteExpired() {\r\n        return this.state === ToBTCSwapState.QUOTE_EXPIRED;\r\n    }\r\n    isQuoteSoftExpired() {\r\n        return this.state === ToBTCSwapState.QUOTE_EXPIRED || this.state === ToBTCSwapState.QUOTE_SOFT_EXPIRED;\r\n    }\r\n    isSuccessful() {\r\n        return this.state === ToBTCSwapState.CLAIMED;\r\n    }\r\n    isFailed() {\r\n        return this.state === ToBTCSwapState.REFUNDED;\r\n    }\r\n    _getInitiator() {\r\n        return this.data.getOfferer();\r\n    }\r\n    //////////////////////////////\r\n    //// Amounts & fees\r\n    getSwapFee() {\r\n        const feeWithoutBaseFee = this.swapFeeBtc - this.pricingInfo.satsBaseFee;\r\n        const swapFeePPM = feeWithoutBaseFee * 1000000n / this.getOutput().rawAmount;\r\n        return {\r\n            amountInSrcToken: (0, Tokens_1.toTokenAmount)(this.swapFee, this.wrapper.tokens[this.data.getToken()], this.wrapper.prices),\r\n            amountInDstToken: (0, Tokens_1.toTokenAmount)(this.swapFeeBtc, this.outputToken, this.wrapper.prices),\r\n            usdValue: (abortSignal, preFetchedUsdPrice) => this.wrapper.prices.getBtcUsdValue(this.swapFeeBtc, abortSignal, preFetchedUsdPrice),\r\n            composition: {\r\n                base: (0, Tokens_1.toTokenAmount)(this.pricingInfo.satsBaseFee, this.outputToken, this.wrapper.prices),\r\n                percentage: (0, ISwap_1.ppmToPercentage)(swapFeePPM)\r\n            }\r\n        };\r\n    }\r\n    /**\r\n     * Returns network fee for the swap, the fee is represented in source currency & destination currency, but is\r\n     *  paid only once\r\n     */\r\n    getNetworkFee() {\r\n        return {\r\n            amountInSrcToken: (0, Tokens_1.toTokenAmount)(this.networkFee, this.wrapper.tokens[this.data.getToken()], this.wrapper.prices),\r\n            amountInDstToken: (0, Tokens_1.toTokenAmount)(this.networkFeeBtc, this.outputToken, this.wrapper.prices),\r\n            usdValue: (abortSignal, preFetchedUsdPrice) => this.wrapper.prices.getBtcUsdValue(this.networkFeeBtc, abortSignal, preFetchedUsdPrice)\r\n        };\r\n    }\r\n    getFee() {\r\n        return {\r\n            amountInSrcToken: (0, Tokens_1.toTokenAmount)(this.swapFee + this.networkFee, this.wrapper.tokens[this.data.getToken()], this.wrapper.prices),\r\n            amountInDstToken: (0, Tokens_1.toTokenAmount)(this.swapFeeBtc + this.networkFeeBtc, this.outputToken, this.wrapper.prices),\r\n            usdValue: (abortSignal, preFetchedUsdPrice) => this.wrapper.prices.getBtcUsdValue(this.swapFeeBtc + this.networkFeeBtc, abortSignal, preFetchedUsdPrice)\r\n        };\r\n    }\r\n    getFeeBreakdown() {\r\n        return [\r\n            {\r\n                type: Fee_1.FeeType.SWAP,\r\n                fee: this.getSwapFee()\r\n            },\r\n            {\r\n                type: Fee_1.FeeType.NETWORK_OUTPUT,\r\n                fee: this.getNetworkFee()\r\n            }\r\n        ];\r\n    }\r\n    getInput() {\r\n        return (0, Tokens_1.toTokenAmount)(this.data.getAmount(), this.wrapper.tokens[this.data.getToken()], this.wrapper.prices);\r\n    }\r\n    getInputWithoutFee() {\r\n        return (0, Tokens_1.toTokenAmount)(this.data.getAmount() - (this.swapFee + this.networkFee), this.wrapper.tokens[this.data.getToken()], this.wrapper.prices);\r\n    }\r\n    /**\r\n     * Checks if the intiator/sender has enough balance to go through with the swap\r\n     */\r\n    async hasEnoughBalance() {\r\n        const [balance, commitFee] = await Promise.all([\r\n            this.wrapper.contract.getBalance(this._getInitiator(), this.data.getToken(), false),\r\n            this.data.getToken() === this.wrapper.chain.getNativeCurrencyAddress() ? this.getCommitFee() : Promise.resolve(null)\r\n        ]);\r\n        let required = this.data.getAmount();\r\n        if (commitFee != null)\r\n            required = required + commitFee;\r\n        return {\r\n            enoughBalance: balance >= required,\r\n            balance: (0, Tokens_1.toTokenAmount)(balance, this.wrapper.tokens[this.data.getToken()], this.wrapper.prices),\r\n            required: (0, Tokens_1.toTokenAmount)(required, this.wrapper.tokens[this.data.getToken()], this.wrapper.prices)\r\n        };\r\n    }\r\n    /**\r\n     * Check if the initiator/sender has enough balance to cover the transaction fee for processing the swap\r\n     */\r\n    async hasEnoughForTxFees() {\r\n        const [balance, commitFee] = await Promise.all([\r\n            this.wrapper.contract.getBalance(this._getInitiator(), this.wrapper.chain.getNativeCurrencyAddress(), false),\r\n            this.getCommitFee()\r\n        ]);\r\n        return {\r\n            enoughBalance: balance >= commitFee,\r\n            balance: (0, Tokens_1.toTokenAmount)(balance, this.wrapper.getNativeToken(), this.wrapper.prices),\r\n            required: (0, Tokens_1.toTokenAmount)(commitFee, this.wrapper.getNativeToken(), this.wrapper.prices)\r\n        };\r\n    }\r\n    //////////////////////////////\r\n    //// Commit\r\n    /**\r\n     * Returns transactions for committing the swap on-chain, initiating the swap\r\n     *\r\n     * @param skipChecks Skip checks like making sure init signature is still valid and swap wasn't commited yet\r\n     *  (this is handled on swap creation, if you commit right after quoting, you can use skipChecks=true)\r\n     *\r\n     * @throws {Error} When in invalid state (not PR_CREATED)\r\n     */\r\n    async txsCommit(skipChecks) {\r\n        if (this.state !== ToBTCSwapState.CREATED)\r\n            throw new Error(\"Must be in CREATED state!\");\r\n        if (!this.initiated) {\r\n            this.initiated = true;\r\n            await this._saveAndEmit();\r\n        }\r\n        return await this.wrapper.contract.txsInit(this._getInitiator(), this.data, this.signatureData, skipChecks, this.feeRate).catch(e => Promise.reject(e instanceof base_1.SignatureVerificationError ? new Error(\"Request timed out\") : e));\r\n    }\r\n    /**\r\n     * Commits the swap on-chain, initiating the swap\r\n     *\r\n     * @param signer Signer to sign the transactions with, must be the same as used in the initialization\r\n     * @param abortSignal Abort signal\r\n     * @param skipChecks Skip checks like making sure init signature is still valid and swap wasn't commited yet\r\n     *  (this is handled on swap creation, if you commit right after quoting, you can skipChecks)`\r\n     * @throws {Error} If invalid signer is provided that doesn't match the swap data\r\n     */\r\n    async commit(signer, abortSignal, skipChecks) {\r\n        this.checkSigner(signer);\r\n        const result = await this.wrapper.chain.sendAndConfirm(signer, await this.txsCommit(skipChecks), true, abortSignal);\r\n        this.commitTxId = result[result.length - 1];\r\n        if (this.state === ToBTCSwapState.CREATED || this.state === ToBTCSwapState.QUOTE_SOFT_EXPIRED || this.state === ToBTCSwapState.QUOTE_EXPIRED) {\r\n            await this._saveAndEmit(ToBTCSwapState.COMMITED);\r\n        }\r\n        return this.commitTxId;\r\n    }\r\n    /**\r\n     * Waits till a swap is committed, should be called after sending the commit transactions manually\r\n     *\r\n     * @param abortSignal   AbortSignal\r\n     * @throws {Error} If swap is not in the correct state (must be CREATED)\r\n     */\r\n    async waitTillCommited(abortSignal) {\r\n        if (this.state === ToBTCSwapState.COMMITED || this.state === ToBTCSwapState.CLAIMED)\r\n            return Promise.resolve();\r\n        if (this.state !== ToBTCSwapState.CREATED && this.state !== ToBTCSwapState.QUOTE_SOFT_EXPIRED)\r\n            throw new Error(\"Invalid state (not CREATED)\");\r\n        const abortController = (0, Utils_1.extendAbortController)(abortSignal);\r\n        const result = await Promise.race([\r\n            this.watchdogWaitTillCommited(abortController.signal),\r\n            this.waitTillState(ToBTCSwapState.COMMITED, \"gte\", abortController.signal).then(() => 0)\r\n        ]);\r\n        abortController.abort();\r\n        if (result === 0)\r\n            this.logger.debug(\"waitTillCommited(): Resolved from state change\");\r\n        if (result === true)\r\n            this.logger.debug(\"waitTillCommited(): Resolved from watchdog - commited\");\r\n        if (result === false) {\r\n            this.logger.debug(\"waitTillCommited(): Resolved from watchdog - signature expiry\");\r\n            if (this.state === ToBTCSwapState.QUOTE_SOFT_EXPIRED || this.state === ToBTCSwapState.CREATED) {\r\n                await this._saveAndEmit(ToBTCSwapState.QUOTE_EXPIRED);\r\n                throw new Error(\"Quote expired while waiting for transaction confirmation!\");\r\n            }\r\n            return;\r\n        }\r\n        if (this.state === ToBTCSwapState.QUOTE_SOFT_EXPIRED || this.state === ToBTCSwapState.CREATED || this.state === ToBTCSwapState.QUOTE_EXPIRED) {\r\n            await this._saveAndEmit(ToBTCSwapState.COMMITED);\r\n        }\r\n    }\r\n    //////////////////////////////\r\n    //// Payment\r\n    async waitTillIntermediarySwapProcessed(abortSignal, checkIntervalSeconds = 5) {\r\n        let resp = { code: IntermediaryAPI_1.RefundAuthorizationResponseCodes.PENDING, msg: \"\" };\r\n        while (!abortSignal.aborted && (resp.code === IntermediaryAPI_1.RefundAuthorizationResponseCodes.PENDING || resp.code === IntermediaryAPI_1.RefundAuthorizationResponseCodes.NOT_FOUND)) {\r\n            resp = await IntermediaryAPI_1.IntermediaryAPI.getRefundAuthorization(this.url, this.getLpIdentifier(), this.data.getSequence());\r\n            if (resp.code === IntermediaryAPI_1.RefundAuthorizationResponseCodes.PAID) {\r\n                const validResponse = await this._setPaymentResult(resp.data, true);\r\n                if (validResponse) {\r\n                    if (this.state === ToBTCSwapState.COMMITED || this.state === ToBTCSwapState.REFUNDABLE) {\r\n                        await this._saveAndEmit(ToBTCSwapState.SOFT_CLAIMED);\r\n                    }\r\n                }\r\n                else {\r\n                    resp = { code: IntermediaryAPI_1.RefundAuthorizationResponseCodes.PENDING, msg: \"\" };\r\n                }\r\n            }\r\n            if (resp.code === IntermediaryAPI_1.RefundAuthorizationResponseCodes.PENDING ||\r\n                resp.code === IntermediaryAPI_1.RefundAuthorizationResponseCodes.NOT_FOUND)\r\n                await (0, Utils_1.timeoutPromise)(checkIntervalSeconds * 1000, abortSignal);\r\n        }\r\n        return resp;\r\n    }\r\n    /**\r\n     * Checks whether the swap was already processed by the LP and is either successful (requires proof which is\r\n     *  either a HTLC pre-image for LN swaps or valid txId for on-chain swap) or failed and we can cooperatively\r\n     *  refund.\r\n     *\r\n     * @param save whether to save the data\r\n     * @returns true if swap is processed, false if the swap is still ongoing\r\n     * @private\r\n     */\r\n    async checkIntermediarySwapProcessed(save = true) {\r\n        if (this.state === ToBTCSwapState.CREATED || this.state == ToBTCSwapState.QUOTE_EXPIRED)\r\n            return false;\r\n        if (this.isFinished() || this.isRefundable())\r\n            return true;\r\n        //Check if that maybe already concluded according to the LP\r\n        const resp = await IntermediaryAPI_1.IntermediaryAPI.getRefundAuthorization(this.url, this.getLpIdentifier(), this.data.getSequence());\r\n        switch (resp.code) {\r\n            case IntermediaryAPI_1.RefundAuthorizationResponseCodes.PAID:\r\n                const processed = await this._setPaymentResult(resp.data, true);\r\n                if (processed) {\r\n                    this.state = ToBTCSwapState.SOFT_CLAIMED;\r\n                    if (save)\r\n                        await this._saveAndEmit();\r\n                }\r\n                return processed;\r\n            case IntermediaryAPI_1.RefundAuthorizationResponseCodes.REFUND_DATA:\r\n                await (0, Utils_1.tryWithRetries)(() => this.wrapper.contract.isValidRefundAuthorization(this.data, resp.data), null, base_1.SignatureVerificationError);\r\n                this.state = ToBTCSwapState.REFUNDABLE;\r\n                if (save)\r\n                    await this._saveAndEmit();\r\n                return true;\r\n            default:\r\n                return false;\r\n        }\r\n    }\r\n    /**\r\n     * A blocking promise resolving when swap was concluded by the intermediary,\r\n     *  rejecting in case of failure\r\n     *\r\n     * @param abortSignal           Abort signal\r\n     * @param checkIntervalSeconds  How often to poll the intermediary for answer\r\n     *\r\n     * @returns {Promise<boolean>}  Was the payment successful? If not we can refund.\r\n     * @throws {IntermediaryError} If a swap is determined expired by the intermediary, but it is actually still valid\r\n     * @throws {SignatureVerificationError} If the swap should be cooperatively refundable but the intermediary returned\r\n     *  invalid refund signature\r\n     * @throws {Error} When swap expires or if the swap has invalid state (must be COMMITED)\r\n     */\r\n    async waitForPayment(abortSignal, checkIntervalSeconds) {\r\n        if (this.state === ToBTCSwapState.CLAIMED)\r\n            return Promise.resolve(true);\r\n        if (this.state !== ToBTCSwapState.COMMITED && this.state !== ToBTCSwapState.SOFT_CLAIMED)\r\n            throw new Error(\"Invalid state (not COMMITED)\");\r\n        const abortController = (0, Utils_1.extendAbortController)(abortSignal);\r\n        const result = await Promise.race([\r\n            this.waitTillState(ToBTCSwapState.CLAIMED, \"gte\", abortController.signal),\r\n            this.waitTillIntermediarySwapProcessed(abortController.signal, checkIntervalSeconds)\r\n        ]);\r\n        abortController.abort();\r\n        if (typeof result !== \"object\") {\r\n            if (this.state === ToBTCSwapState.REFUNDABLE)\r\n                throw new Error(\"Swap expired\");\r\n            this.logger.debug(\"waitTillRefunded(): Resolved from state change\");\r\n            return true;\r\n        }\r\n        this.logger.debug(\"waitTillRefunded(): Resolved from intermediary response\");\r\n        switch (result.code) {\r\n            case IntermediaryAPI_1.RefundAuthorizationResponseCodes.PAID:\r\n                return true;\r\n            case IntermediaryAPI_1.RefundAuthorizationResponseCodes.REFUND_DATA:\r\n                await (0, Utils_1.tryWithRetries)(() => this.wrapper.contract.isValidRefundAuthorization(this.data, result.data), null, base_1.SignatureVerificationError, abortSignal);\r\n                await this._saveAndEmit(ToBTCSwapState.REFUNDABLE);\r\n                return false;\r\n            case IntermediaryAPI_1.RefundAuthorizationResponseCodes.EXPIRED:\r\n                if (await this.wrapper.contract.isExpired(this._getInitiator(), this.data))\r\n                    throw new Error(\"Swap expired\");\r\n                throw new IntermediaryError_1.IntermediaryError(\"Swap expired\");\r\n            case IntermediaryAPI_1.RefundAuthorizationResponseCodes.NOT_FOUND:\r\n                if (this.state === ToBTCSwapState.CLAIMED)\r\n                    return true;\r\n                throw new Error(\"Intermediary swap not found\");\r\n        }\r\n    }\r\n    //////////////////////////////\r\n    //// Refund\r\n    /**\r\n     * Get the estimated smart chain transaction fee of the refund transaction\r\n     */\r\n    getRefundFee() {\r\n        return this.wrapper.contract.getRefundFee(this.data);\r\n    }\r\n    /**\r\n     * Returns transactions for refunding the swap if the swap is in refundable state, you can check so with isRefundable()\r\n     *\r\n     * @throws {IntermediaryError} If intermediary returns invalid response in case cooperative refund should be used\r\n     * @throws {SignatureVerificationError} If intermediary returned invalid cooperative refund signature\r\n     * @throws {Error} When state is not refundable\r\n     */\r\n    async txsRefund(signer) {\r\n        if (!this.isRefundable())\r\n            throw new Error(\"Must be in REFUNDABLE state or expired!\");\r\n        signer ??= this._getInitiator();\r\n        if (await this.wrapper.contract.isExpired(this._getInitiator(), this.data)) {\r\n            return await this.wrapper.contract.txsRefund(signer, this.data, true, true);\r\n        }\r\n        else {\r\n            const res = await IntermediaryAPI_1.IntermediaryAPI.getRefundAuthorization(this.url, this.getLpIdentifier(), this.data.getSequence());\r\n            if (res.code === IntermediaryAPI_1.RefundAuthorizationResponseCodes.REFUND_DATA) {\r\n                return await this.wrapper.contract.txsRefundWithAuthorization(signer, this.data, res.data, true, true);\r\n            }\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid intermediary cooperative message returned\");\r\n        }\r\n    }\r\n    /**\r\n     * Refunds the swap if the swap is in refundable state, you can check so with isRefundable()\r\n     *\r\n     * @param signer Signer to sign the transactions with, must be the same as used in the initialization\r\n     * @param abortSignal               Abort signal\r\n     * @throws {Error} If invalid signer is provided that doesn't match the swap data\r\n     */\r\n    async refund(signer, abortSignal) {\r\n        const result = await this.wrapper.chain.sendAndConfirm(signer, await this.txsRefund(signer.getAddress()), true, abortSignal);\r\n        this.refundTxId = result[0];\r\n        if (this.state === ToBTCSwapState.COMMITED || this.state === ToBTCSwapState.REFUNDABLE || this.state === ToBTCSwapState.SOFT_CLAIMED) {\r\n            await this._saveAndEmit(ToBTCSwapState.REFUNDED);\r\n        }\r\n        return result[0];\r\n    }\r\n    /**\r\n     * Waits till a swap is refunded, should be called after sending the refund transactions manually\r\n     *\r\n     * @param abortSignal   AbortSignal\r\n     * @throws {Error} When swap is not in a valid state (must be COMMITED)\r\n     * @throws {Error} If we tried to refund but claimer was able to claim first\r\n     */\r\n    async waitTillRefunded(abortSignal) {\r\n        if (this.state === ToBTCSwapState.REFUNDED)\r\n            return Promise.resolve();\r\n        if (this.state !== ToBTCSwapState.COMMITED && this.state !== ToBTCSwapState.SOFT_CLAIMED)\r\n            throw new Error(\"Invalid state (not COMMITED)\");\r\n        const abortController = new AbortController();\r\n        if (abortSignal != null)\r\n            abortSignal.addEventListener(\"abort\", () => abortController.abort(abortSignal.reason));\r\n        const res = await Promise.race([\r\n            this.watchdogWaitTillResult(abortController.signal),\r\n            this.waitTillState(ToBTCSwapState.REFUNDED, \"eq\", abortController.signal).then(() => 0),\r\n            this.waitTillState(ToBTCSwapState.CLAIMED, \"eq\", abortController.signal).then(() => 1),\r\n        ]);\r\n        abortController.abort();\r\n        if (res === 0) {\r\n            this.logger.debug(\"waitTillRefunded(): Resolved from state change (REFUNDED)\");\r\n            return;\r\n        }\r\n        if (res === 1) {\r\n            this.logger.debug(\"waitTillRefunded(): Resolved from state change (CLAIMED)\");\r\n            throw new Error(\"Tried to refund swap, but claimer claimed it in the meantime!\");\r\n        }\r\n        this.logger.debug(\"waitTillRefunded(): Resolved from watchdog\");\r\n        if (res?.type === base_1.SwapCommitStateType.PAID) {\r\n            if (this.claimTxId == null)\r\n                this.claimTxId = await res.getClaimTxId();\r\n            await this._saveAndEmit(ToBTCSwapState.CLAIMED);\r\n            throw new Error(\"Tried to refund swap, but claimer claimed it in the meantime!\");\r\n        }\r\n        if (res?.type === base_1.SwapCommitStateType.NOT_COMMITED) {\r\n            if (this.refundTxId == null && res.getRefundTxId != null)\r\n                this.refundTxId = await res.getRefundTxId();\r\n            await this._saveAndEmit(ToBTCSwapState.REFUNDED);\r\n        }\r\n    }\r\n    //////////////////////////////\r\n    //// Storage\r\n    serialize() {\r\n        const obj = super.serialize();\r\n        return {\r\n            ...obj,\r\n            networkFee: this.networkFee == null ? null : this.networkFee.toString(10),\r\n            networkFeeBtc: this.networkFeeBtc == null ? null : this.networkFeeBtc.toString(10)\r\n        };\r\n    }\r\n    //////////////////////////////\r\n    //// Swap ticks & sync\r\n    /**\r\n     * Checks the swap's state on-chain and compares it to its internal state, updates/changes it according to on-chain\r\n     *  data\r\n     *\r\n     * @private\r\n     */\r\n    async syncStateFromChain() {\r\n        if (this.state === ToBTCSwapState.CREATED ||\r\n            this.state === ToBTCSwapState.QUOTE_SOFT_EXPIRED ||\r\n            this.state === ToBTCSwapState.COMMITED ||\r\n            this.state === ToBTCSwapState.SOFT_CLAIMED ||\r\n            this.state === ToBTCSwapState.REFUNDABLE) {\r\n            let quoteExpired = false;\r\n            if ((this.state === ToBTCSwapState.CREATED || this.state === ToBTCSwapState.QUOTE_SOFT_EXPIRED)) {\r\n                //Check if quote is still valid\r\n                quoteExpired = await this.verifyQuoteDefinitelyExpired();\r\n            }\r\n            const res = await (0, Utils_1.tryWithRetries)(() => this.wrapper.contract.getCommitStatus(this._getInitiator(), this.data));\r\n            switch (res?.type) {\r\n                case base_1.SwapCommitStateType.PAID:\r\n                    if (this.claimTxId == null)\r\n                        this.claimTxId = await res.getClaimTxId();\r\n                    this.state = ToBTCSwapState.CLAIMED;\r\n                    return true;\r\n                case base_1.SwapCommitStateType.REFUNDABLE:\r\n                    this.state = ToBTCSwapState.REFUNDABLE;\r\n                    return true;\r\n                case base_1.SwapCommitStateType.EXPIRED:\r\n                    if (this.refundTxId == null && res.getRefundTxId)\r\n                        this.refundTxId = await res.getRefundTxId();\r\n                    this.state = ToBTCSwapState.QUOTE_EXPIRED;\r\n                    return true;\r\n                case base_1.SwapCommitStateType.NOT_COMMITED:\r\n                    if (this.refundTxId == null && res.getRefundTxId)\r\n                        this.refundTxId = await res.getRefundTxId();\r\n                    if (this.state === ToBTCSwapState.COMMITED || this.state === ToBTCSwapState.REFUNDABLE) {\r\n                        this.state = ToBTCSwapState.REFUNDED;\r\n                        return true;\r\n                    }\r\n                    break;\r\n                case base_1.SwapCommitStateType.COMMITED:\r\n                    if (this.state !== ToBTCSwapState.COMMITED && this.state !== ToBTCSwapState.REFUNDABLE) {\r\n                        this.state = ToBTCSwapState.COMMITED;\r\n                        return true;\r\n                    }\r\n                    break;\r\n            }\r\n            if ((this.state === ToBTCSwapState.CREATED || this.state === ToBTCSwapState.QUOTE_SOFT_EXPIRED)) {\r\n                if (quoteExpired) {\r\n                    this.state = ToBTCSwapState.QUOTE_EXPIRED;\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n    }\r\n    async _sync(save) {\r\n        let changed = await this.syncStateFromChain();\r\n        if (this.state === ToBTCSwapState.COMMITED || this.state === ToBTCSwapState.SOFT_CLAIMED) {\r\n            //Check if that maybe already concluded\r\n            if (await this.checkIntermediarySwapProcessed(false))\r\n                changed = true;\r\n        }\r\n        if (save && changed)\r\n            await this._saveAndEmit();\r\n        return changed;\r\n    }\r\n    async _tick(save) {\r\n        switch (this.state) {\r\n            case ToBTCSwapState.CREATED:\r\n                if (this.expiry < Date.now()) {\r\n                    this.state = ToBTCSwapState.QUOTE_SOFT_EXPIRED;\r\n                    if (save)\r\n                        await this._saveAndEmit();\r\n                    return true;\r\n                }\r\n                break;\r\n            case ToBTCSwapState.COMMITED:\r\n            case ToBTCSwapState.SOFT_CLAIMED:\r\n                const expired = await this.wrapper.contract.isExpired(this._getInitiator(), this.data);\r\n                if (expired) {\r\n                    this.state = ToBTCSwapState.REFUNDABLE;\r\n                    if (save)\r\n                        await this._saveAndEmit();\r\n                    return true;\r\n                }\r\n                break;\r\n        }\r\n        return false;\r\n    }\r\n}\r\nexports.IToBTCSwap = IToBTCSwap;\r\nvar ToBTCSwapState;\r\n(function (ToBTCSwapState) {\r\n    ToBTCSwapState[ToBTCSwapState[\"REFUNDED\"] = -3] = \"REFUNDED\";\r\n    ToBTCSwapState[ToBTCSwapState[\"QUOTE_EXPIRED\"] = -2] = \"QUOTE_EXPIRED\";\r\n    ToBTCSwapState[ToBTCSwapState[\"QUOTE_SOFT_EXPIRED\"] = -1] = \"QUOTE_SOFT_EXPIRED\";\r\n    ToBTCSwapState[ToBTCSwapState[\"CREATED\"] = 0] = \"CREATED\";\r\n    ToBTCSwapState[ToBTCSwapState[\"COMMITED\"] = 1] = \"COMMITED\";\r\n    ToBTCSwapState[ToBTCSwapState[\"SOFT_CLAIMED\"] = 2] = \"SOFT_CLAIMED\";\r\n    ToBTCSwapState[ToBTCSwapState[\"CLAIMED\"] = 3] = \"CLAIMED\";\r\n    ToBTCSwapState[ToBTCSwapState[\"REFUNDABLE\"] = 4] = \"REFUNDABLE\";\r\n})(ToBTCSwapState = exports.ToBTCSwapState || (exports.ToBTCSwapState = {}));\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LNURL = exports.MAIL_REGEX = exports.BASE64_REGEX = exports.isLNURLPaySuccessAction = exports.isLNURLPayResult = exports.isLNURLWithdrawParams = exports.isLNURLPayParams = exports.isLNURLError = exports.isLNURLWithdraw = exports.isLNURLPay = void 0;\r\nconst RequestError_1 = require(\"../errors/RequestError\");\r\nconst bolt11_1 = require(\"@atomiqlabs/bolt11\");\r\nconst UserError_1 = require(\"../errors/UserError\");\r\nconst Utils_1 = require(\"./Utils\");\r\nconst base_1 = require(\"@scure/base\");\r\nconst aes_1 = require(\"@noble/ciphers/aes\");\r\nconst buffer_1 = require(\"buffer\");\r\nconst sha2_1 = require(\"@noble/hashes/sha2\");\r\nfunction isLNURLPay(value) {\r\n    return (typeof value === \"object\" &&\r\n        value != null &&\r\n        value.type === \"pay\" &&\r\n        typeof (value.min) === \"bigint\" &&\r\n        typeof (value.max) === \"bigint\" &&\r\n        typeof value.commentMaxLength === \"number\" &&\r\n        typeof value.shortDescription === \"string\" &&\r\n        (value.longDescription === undefined || typeof value.longDescription === \"string\") &&\r\n        (value.icon === undefined || typeof value.icon === \"string\") &&\r\n        isLNURLPayParams(value.params));\r\n}\r\nexports.isLNURLPay = isLNURLPay;\r\nfunction isLNURLWithdraw(value) {\r\n    return (typeof value === \"object\" &&\r\n        value != null &&\r\n        value.type === \"withdraw\" &&\r\n        typeof (value.min) === \"bigint\" &&\r\n        typeof (value.max) === \"bigint\" &&\r\n        isLNURLWithdrawParams(value.params));\r\n}\r\nexports.isLNURLWithdraw = isLNURLWithdraw;\r\nfunction isLNURLError(obj) {\r\n    return obj.status === \"ERROR\" &&\r\n        (obj.reason == null || typeof obj.reason === \"string\");\r\n}\r\nexports.isLNURLError = isLNURLError;\r\nfunction isLNURLPayParams(obj) {\r\n    return obj.tag === \"payRequest\";\r\n}\r\nexports.isLNURLPayParams = isLNURLPayParams;\r\nfunction isLNURLWithdrawParams(obj) {\r\n    return obj.tag === \"withdrawRequest\";\r\n}\r\nexports.isLNURLWithdrawParams = isLNURLWithdrawParams;\r\nfunction isLNURLPayResult(obj, domain) {\r\n    return typeof obj.pr === \"string\" &&\r\n        (obj.routes == null || Array.isArray(obj.routes)) &&\r\n        (obj.disposable === null || obj.disposable === undefined || typeof obj.disposable === \"boolean\") &&\r\n        (obj.successAction == null || isLNURLPaySuccessAction(obj.successAction, domain));\r\n}\r\nexports.isLNURLPayResult = isLNURLPayResult;\r\nfunction isLNURLPaySuccessAction(obj, domain) {\r\n    if (obj == null || typeof obj !== 'object' || typeof obj.tag !== 'string')\r\n        return false;\r\n    switch (obj.tag) {\r\n        case \"message\":\r\n            return obj.message != null && obj.message.length <= 144;\r\n        case \"url\":\r\n            return obj.description != null && obj.description.length <= 144 &&\r\n                obj.url != null &&\r\n                (domain == null || new URL(obj.url).hostname === domain);\r\n        case \"aes\":\r\n            return obj.description != null && obj.description.length <= 144 &&\r\n                obj.ciphertext != null && obj.ciphertext.length <= 4096 && exports.BASE64_REGEX.test(obj.ciphertext) &&\r\n                obj.iv != null && obj.iv.length <= 24 && exports.BASE64_REGEX.test(obj.iv);\r\n        default:\r\n            //Unsupported action\r\n            return false;\r\n    }\r\n}\r\nexports.isLNURLPaySuccessAction = isLNURLPaySuccessAction;\r\nexports.BASE64_REGEX = /^(?:[A-Za-z0-9+/]{4})*(?:[A-Za-z0-9+/]{2}==|[A-Za-z0-9+/]{3}=)?$/;\r\nexports.MAIL_REGEX = /(?:[A-z0-9!#$%&'*+/=?^_`{|}~-]+(?:\\.[A-z0-9!#$%&'*+/=?^_`{|}~-]+)*|\"(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21\\x23-\\x5b\\x5d-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])*\")@(?:(?:[A-z0-9](?:[A-z0-9-]*[A-z0-9])?\\.)+[A-z0-9](?:[A-z0-9-]*[A-z0-9])?|\\[(?:(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9]))\\.){3}(?:(2(5[0-5]|[0-4][0-9])|1[0-9][0-9]|[1-9]?[0-9])|[A-z0-9-]*[A-z0-9]:(?:[\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x21-\\x5a\\x53-\\x7f]|\\\\[\\x01-\\x09\\x0b\\x0c\\x0e-\\x7f])+)\\])/;\r\nclass LNURL {\r\n    static findBech32LNURL(str) {\r\n        const arr = /,*?((lnurl)([0-9]{1,}[a-z0-9]+){1})/.exec(str.toLowerCase());\r\n        if (arr == null)\r\n            return null;\r\n        return arr[1];\r\n    }\r\n    static isBech32LNURL(str) {\r\n        return this.findBech32LNURL(str) != null;\r\n    }\r\n    /**\r\n     * Checks whether a provided string is bare (non bech32 encoded) lnurl\r\n     * @param str\r\n     * @private\r\n     */\r\n    static isBareLNURL(str) {\r\n        try {\r\n            return str.startsWith(\"lnurlw://\") || str.startsWith(\"lnurlp://\");\r\n        }\r\n        catch (e) { }\r\n        return false;\r\n    }\r\n    /**\r\n     * Checks if the provided string is a lightning network address (e.g. satoshi@nakamoto.com)\r\n     * @param str\r\n     * @private\r\n     */\r\n    static isLightningAddress(str) {\r\n        return exports.MAIL_REGEX.test(str);\r\n    }\r\n    /**\r\n     * Checks whether a given string is a LNURL or lightning address\r\n     * @param str\r\n     */\r\n    static isLNURL(str) {\r\n        return LNURL.isBech32LNURL(str) || LNURL.isLightningAddress(str) || LNURL.isBareLNURL(str);\r\n    }\r\n    /**\r\n     * Extracts the URL that needs to be request from LNURL or lightning address\r\n     * @param str\r\n     * @private\r\n     * @returns An URL to send the request to, or null if it cannot be parsed\r\n     */\r\n    static extractCallUrl(str) {\r\n        if (exports.MAIL_REGEX.test(str)) {\r\n            //lightning e-mail like address\r\n            const arr = str.split(\"@\");\r\n            const username = arr[0];\r\n            const domain = arr[1];\r\n            let scheme = \"https\";\r\n            if (domain.endsWith(\".onion\")) {\r\n                scheme = \"http\";\r\n            }\r\n            return scheme + \"://\" + domain + \"/.well-known/lnurlp/\" + username;\r\n        }\r\n        else if (LNURL.isBareLNURL(str)) {\r\n            //non-bech32m encoded lnurl\r\n            const data = str.substring(\"lnurlw://\".length);\r\n            const httpUrl = new URL(\"http://\" + data);\r\n            let scheme = \"https\";\r\n            if (httpUrl.hostname.endsWith(\".onion\")) {\r\n                scheme = \"http\";\r\n            }\r\n            return scheme + \"://\" + data;\r\n        }\r\n        else {\r\n            const lnurl = LNURL.findBech32LNURL(str);\r\n            if (lnurl != null) {\r\n                let { prefix: hrp, words: dataPart } = base_1.bech32.decode(lnurl, 2000);\r\n                let requestByteArray = base_1.bech32.fromWords(dataPart);\r\n                return buffer_1.Buffer.from(requestByteArray).toString();\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Sends a request to obtain data about a specific LNURL or lightning address\r\n     *\r\n     * @param str A lnurl or lightning address\r\n     * @param shouldRetry Whether we should retry in case of network failure\r\n     * @param timeout Request timeout in milliseconds\r\n     * @param abortSignal\r\n     */\r\n    static async getLNURL(str, shouldRetry = true, timeout, abortSignal) {\r\n        if (shouldRetry == null)\r\n            shouldRetry = true;\r\n        const url = LNURL.extractCallUrl(str);\r\n        if (url != null) {\r\n            const sendRequest = () => (0, Utils_1.httpGet)(url, timeout, abortSignal, true);\r\n            let response = shouldRetry ?\r\n                await (0, Utils_1.tryWithRetries)(sendRequest, null, RequestError_1.RequestError, abortSignal) :\r\n                await sendRequest();\r\n            if (isLNURLError(response))\r\n                return null;\r\n            if (response.tag === \"payRequest\")\r\n                try {\r\n                    response.decodedMetadata = JSON.parse(response.metadata);\r\n                }\r\n                catch (err) {\r\n                    response.decodedMetadata = [];\r\n                }\r\n            if (!isLNURLPayParams(response) && !isLNURLWithdrawParams(response))\r\n                return null;\r\n            return {\r\n                ...response,\r\n                url: str\r\n            };\r\n        }\r\n    }\r\n    /**\r\n     * Sends a request to obtain data about a specific LNURL or lightning address\r\n     *\r\n     * @param str A lnurl or lightning address\r\n     * @param shouldRetry Whether we should retry in case of network failure\r\n     * @param timeout Request timeout in milliseconds\r\n     * @param abortSignal\r\n     */\r\n    static async getLNURLType(str, shouldRetry, timeout, abortSignal) {\r\n        let res = await LNURL.getLNURL(str, shouldRetry, timeout, abortSignal);\r\n        if (res.tag === \"payRequest\") {\r\n            const payRequest = res;\r\n            let shortDescription;\r\n            let longDescription;\r\n            let icon;\r\n            payRequest.decodedMetadata.forEach(data => {\r\n                switch (data[0]) {\r\n                    case \"text/plain\":\r\n                        shortDescription = data[1];\r\n                        break;\r\n                    case \"text/long-desc\":\r\n                        longDescription = data[1];\r\n                        break;\r\n                    case \"image/png;base64\":\r\n                        icon = \"data:\" + data[0] + \",\" + data[1];\r\n                        break;\r\n                    case \"image/jpeg;base64\":\r\n                        icon = \"data:\" + data[0] + \",\" + data[1];\r\n                        break;\r\n                }\r\n            });\r\n            return {\r\n                type: \"pay\",\r\n                min: BigInt(payRequest.minSendable) / 1000n,\r\n                max: BigInt(payRequest.maxSendable) / 1000n,\r\n                commentMaxLength: payRequest.commentAllowed || 0,\r\n                shortDescription,\r\n                longDescription,\r\n                icon,\r\n                params: payRequest\r\n            };\r\n        }\r\n        if (res.tag === \"withdrawRequest\") {\r\n            const payRequest = res;\r\n            return {\r\n                type: \"withdraw\",\r\n                min: BigInt(payRequest.minWithdrawable) / 1000n,\r\n                max: BigInt(payRequest.maxWithdrawable) / 1000n,\r\n                params: payRequest\r\n            };\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Uses a LNURL-pay request by obtaining a lightning network invoice from it\r\n     *\r\n     * @param payRequest LNURL params as returned from the getLNURL call\r\n     * @param amount Amount of sats (BTC) to pay\r\n     * @param comment Optional comment for the payment request\r\n     * @param timeout Request timeout in milliseconds\r\n     * @param abortSignal\r\n     * @throws {RequestError} If the response is non-200, status: ERROR, or invalid format\r\n     */\r\n    static async useLNURLPay(payRequest, amount, comment, timeout, abortSignal) {\r\n        const params = [\"amount=\" + (amount * 1000n).toString(10)];\r\n        if (comment != null) {\r\n            params.push(\"comment=\" + encodeURIComponent(comment));\r\n        }\r\n        const queryParams = (payRequest.callback.includes(\"?\") ? \"&\" : \"?\") + params.join(\"&\");\r\n        const response = await (0, Utils_1.tryWithRetries)(() => (0, Utils_1.httpGet)(payRequest.callback + queryParams, timeout, abortSignal, true), null, RequestError_1.RequestError, abortSignal);\r\n        if (isLNURLError(response))\r\n            throw new RequestError_1.RequestError(\"LNURL callback error: \" + response.reason, 200);\r\n        if (!isLNURLPayResult(response))\r\n            throw new RequestError_1.RequestError(\"Invalid LNURL response!\", 200);\r\n        const parsedPR = (0, bolt11_1.decode)(response.pr);\r\n        const descHash = buffer_1.Buffer.from((0, sha2_1.sha256)(payRequest.metadata)).toString(\"hex\");\r\n        if (parsedPR.tagsObject.purpose_commit_hash !== descHash)\r\n            throw new RequestError_1.RequestError(\"Invalid invoice received (description hash)!\", 200);\r\n        const invoiceMSats = BigInt(parsedPR.millisatoshis);\r\n        if (invoiceMSats !== (amount * 1000n))\r\n            throw new RequestError_1.RequestError(\"Invalid invoice received (amount)!\", 200);\r\n        return {\r\n            invoice: response.pr,\r\n            parsedInvoice: parsedPR,\r\n            successAction: response.successAction\r\n        };\r\n    }\r\n    /**\r\n     * Submits the bolt11 lightning invoice to the lnurl withdraw url\r\n     *\r\n     * @param withdrawRequest Withdraw request to use\r\n     * @param withdrawRequest.k1 K1 parameter\r\n     * @param withdrawRequest.callback A URL to call\r\n     * @param lnpr bolt11 lightning network invoice to submit to the withdrawal endpoint\r\n     * @throws {RequestError} If the response is non-200 or status: ERROR\r\n     */\r\n    static async postInvoiceToLNURLWithdraw(withdrawRequest, lnpr) {\r\n        const params = [\r\n            \"pr=\" + lnpr,\r\n            \"k1=\" + withdrawRequest.k1\r\n        ];\r\n        const queryParams = (withdrawRequest.callback.includes(\"?\") ? \"&\" : \"?\") + params.join(\"&\");\r\n        const response = await (0, Utils_1.tryWithRetries)(() => (0, Utils_1.httpGet)(withdrawRequest.callback + queryParams, null, null, true), null, RequestError_1.RequestError);\r\n        if (isLNURLError(response))\r\n            throw new RequestError_1.RequestError(\"LNURL callback error: \" + response.reason, 200);\r\n    }\r\n    /**\r\n     * Uses a LNURL-withdraw request by submitting a lightning network invoice to it\r\n     *\r\n     * @param withdrawRequest Withdrawal request as returned from getLNURL call\r\n     * @param lnpr bolt11 lightning network invoice to submit to the withdrawal endpoint\r\n     * @throws {UserError} In case the provided bolt11 lightning invoice has an amount that is out of bounds for\r\n     *  the specified LNURL-withdraw request\r\n     */\r\n    static async useLNURLWithdraw(withdrawRequest, lnpr) {\r\n        const min = BigInt(withdrawRequest.minWithdrawable) / 1000n;\r\n        const max = BigInt(withdrawRequest.maxWithdrawable) / 1000n;\r\n        const parsedPR = (0, bolt11_1.decode)(lnpr);\r\n        const amount = (BigInt(parsedPR.millisatoshis) + 999n) / 1000n;\r\n        if (amount < min)\r\n            throw new UserError_1.UserError(\"Invoice amount less than minimum LNURL-withdraw limit\");\r\n        if (amount > max)\r\n            throw new UserError_1.UserError(\"Invoice amount more than maximum LNURL-withdraw limit\");\r\n        return await LNURL.postInvoiceToLNURLWithdraw(withdrawRequest, lnpr);\r\n    }\r\n    static decodeSuccessAction(successAction, secret) {\r\n        if (secret == null)\r\n            return null;\r\n        if (successAction.tag === \"message\") {\r\n            return {\r\n                description: successAction.message\r\n            };\r\n        }\r\n        if (successAction.tag === \"url\") {\r\n            return {\r\n                description: successAction.description,\r\n                url: successAction.url\r\n            };\r\n        }\r\n        if (successAction.tag === \"aes\") {\r\n            const CBC = (0, aes_1.cbc)(buffer_1.Buffer.from(secret, \"hex\"), buffer_1.Buffer.from(successAction.iv, \"hex\"));\r\n            let plaintext = CBC.decrypt(buffer_1.Buffer.from(successAction.ciphertext, \"base64\"));\r\n            // remove padding\r\n            const size = plaintext.length;\r\n            const pad = plaintext[size - 1];\r\n            return {\r\n                description: successAction.description,\r\n                text: buffer_1.Buffer.from(plaintext).toString(\"utf8\", 0, size - pad)\r\n            };\r\n        }\r\n    }\r\n}\r\nexports.LNURL = LNURL;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ToBTCLNSwap = exports.isToBTCLNSwapInit = void 0;\r\nconst bolt11_1 = require(\"@atomiqlabs/bolt11\");\r\nconst IToBTCSwap_1 = require(\"../IToBTCSwap\");\r\nconst SwapType_1 = require(\"../../../enums/SwapType\");\r\nconst buffer_1 = require(\"buffer\");\r\nconst sha2_1 = require(\"@noble/hashes/sha2\");\r\nconst IntermediaryError_1 = require(\"../../../../errors/IntermediaryError\");\r\nconst LNURL_1 = require(\"../../../../utils/LNURL\");\r\nconst Tokens_1 = require(\"../../../../Tokens\");\r\nconst Utils_1 = require(\"../../../../utils/Utils\");\r\nfunction isToBTCLNSwapInit(obj) {\r\n    return typeof (obj.confidence) === \"number\" &&\r\n        typeof (obj.pr) === \"string\" &&\r\n        (obj.lnurl == null || typeof (obj.lnurl) === \"string\") &&\r\n        (obj.successAction == null || (0, LNURL_1.isLNURLPaySuccessAction)(obj.successAction)) &&\r\n        (0, IToBTCSwap_1.isIToBTCSwapInit)(obj);\r\n}\r\nexports.isToBTCLNSwapInit = isToBTCLNSwapInit;\r\n//Set of nodes which disallow probing, resulting in 0 confidence reported by the LP\r\nconst SNOWFLAKE_LIST = new Set([\r\n    \"038f8f113c580048d847d6949371726653e02b928196bad310e3eda39ff61723f6\",\r\n    \"03a6ce61fcaacd38d31d4e3ce2d506602818e3856b4b44faff1dde9642ba705976\"\r\n]);\r\nclass ToBTCLNSwap extends IToBTCSwap_1.IToBTCSwap {\r\n    constructor(wrapper, initOrObj) {\r\n        if (isToBTCLNSwapInit(initOrObj))\r\n            initOrObj.url += \"/tobtcln\";\r\n        super(wrapper, initOrObj);\r\n        this.outputToken = Tokens_1.BitcoinTokens.BTCLN;\r\n        this.TYPE = SwapType_1.SwapType.TO_BTCLN;\r\n        if (!isToBTCLNSwapInit(initOrObj)) {\r\n            this.confidence = initOrObj.confidence;\r\n            this.pr = initOrObj.pr;\r\n            this.lnurl = initOrObj.lnurl;\r\n            this.successAction = initOrObj.successAction;\r\n            this.secret = initOrObj.secret;\r\n        }\r\n        this.paymentHash = this.getPaymentHash().toString(\"hex\");\r\n        this.logger = (0, Utils_1.getLogger)(\"ToBTCLN(\" + this.getIdentifierHashString() + \"): \");\r\n        this.tryRecomputeSwapPrice();\r\n    }\r\n    _setPaymentResult(result, check = false) {\r\n        if (result == null)\r\n            return Promise.resolve(false);\r\n        if (result.secret == null)\r\n            throw new IntermediaryError_1.IntermediaryError(\"No payment secret returned!\");\r\n        if (check) {\r\n            const secretBuffer = buffer_1.Buffer.from(result.secret, \"hex\");\r\n            const hash = buffer_1.Buffer.from((0, sha2_1.sha256)(secretBuffer));\r\n            if (!hash.equals(this.getPaymentHash()))\r\n                throw new IntermediaryError_1.IntermediaryError(\"Invalid payment secret returned\");\r\n        }\r\n        this.secret = result.secret;\r\n        return Promise.resolve(true);\r\n    }\r\n    //////////////////////////////\r\n    //// Amounts & fees\r\n    getOutput() {\r\n        const parsedPR = (0, bolt11_1.decode)(this.pr);\r\n        const amount = (BigInt(parsedPR.millisatoshis) + 999n) / 1000n;\r\n        return (0, Tokens_1.toTokenAmount)(amount, this.outputToken, this.wrapper.prices);\r\n    }\r\n    //////////////////////////////\r\n    //// Getters & utils\r\n    getOutputTxId() {\r\n        return this.getLpIdentifier();\r\n    }\r\n    /**\r\n     * Returns the lightning BOLT11 invoice where the BTC will be sent to\r\n     */\r\n    getOutputAddress() {\r\n        return this.lnurl ?? this.pr;\r\n    }\r\n    /**\r\n     * Returns payment secret (pre-image) as a proof of payment\r\n     */\r\n    getSecret() {\r\n        return this.secret;\r\n    }\r\n    /**\r\n     * Returns the confidence of the intermediary that this payment will succeed\r\n     * Value between 0 and 1, where 0 is not likely and 1 is very likely\r\n     */\r\n    getConfidence() {\r\n        return this.confidence;\r\n    }\r\n    /**\r\n     * Checks whether a swap is likely to fail, based on the confidence as reported by the LP\r\n     */\r\n    willLikelyFail() {\r\n        const parsedRequest = (0, bolt11_1.decode)(this.pr);\r\n        if (parsedRequest.tagsObject.routing_info != null) {\r\n            for (let route of parsedRequest.tagsObject.routing_info) {\r\n                if (SNOWFLAKE_LIST.has(route.pubkey)) {\r\n                    return false;\r\n                }\r\n            }\r\n        }\r\n        return this.confidence === 0;\r\n    }\r\n    /**\r\n     * Tries to detect if the target lightning invoice is a non-custodial mobile wallet, care must be taken\r\n     *  for such a wallet to be online when attempting to make a swap\r\n     */\r\n    isPayingToNonCustodialWallet() {\r\n        const parsedRequest = (0, bolt11_1.decode)(this.pr);\r\n        if (parsedRequest.tagsObject.routing_info != null) {\r\n            return parsedRequest.tagsObject.routing_info.length > 0;\r\n        }\r\n        return false;\r\n    }\r\n    getIdentifierHash() {\r\n        const paymentHashBuffer = this.getPaymentHash();\r\n        if (this.randomNonce == null)\r\n            return paymentHashBuffer;\r\n        return buffer_1.Buffer.concat([paymentHashBuffer, buffer_1.Buffer.from(this.randomNonce, \"hex\")]);\r\n    }\r\n    getPaymentHash() {\r\n        if (this.pr == null)\r\n            return null;\r\n        const parsed = (0, bolt11_1.decode)(this.pr);\r\n        return buffer_1.Buffer.from(parsed.tagsObject.payment_hash, \"hex\");\r\n    }\r\n    getLpIdentifier() {\r\n        if (this.pr == null)\r\n            return null;\r\n        const parsed = (0, bolt11_1.decode)(this.pr);\r\n        return parsed.tagsObject.payment_hash;\r\n    }\r\n    //////////////////////////////\r\n    //// LNURL-pay\r\n    /**\r\n     * Is this an LNURL-pay swap?\r\n     */\r\n    isLNURL() {\r\n        return this.lnurl != null;\r\n    }\r\n    /**\r\n     * Gets the used LNURL or null if this is not an LNURL-pay swap\r\n     */\r\n    getLNURL() {\r\n        return this.lnurl;\r\n    }\r\n    /**\r\n     * Checks whether this LNURL payment contains a success message\r\n     */\r\n    hasSuccessAction() {\r\n        return this.successAction != null;\r\n    }\r\n    /**\r\n     * Returns the success action after a successful payment, else null\r\n     */\r\n    getSuccessAction() {\r\n        return LNURL_1.LNURL.decodeSuccessAction(this.successAction, this.secret);\r\n    }\r\n    //////////////////////////////\r\n    //// Storage\r\n    serialize() {\r\n        return {\r\n            ...super.serialize(),\r\n            paymentHash: this.getPaymentHash().toString(\"hex\"),\r\n            pr: this.pr,\r\n            confidence: this.confidence,\r\n            secret: this.secret,\r\n            lnurl: this.lnurl,\r\n            successAction: this.successAction\r\n        };\r\n    }\r\n}\r\nexports.ToBTCLNSwap = ToBTCLNSwap;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IEscrowSwapWrapper = void 0;\r\nconst ISwapWrapper_1 = require(\"../ISwapWrapper\");\r\nconst base_1 = require(\"@atomiqlabs/base\");\r\nconst Utils_1 = require(\"../../utils/Utils\");\r\nclass IEscrowSwapWrapper extends ISwapWrapper_1.ISwapWrapper {\r\n    constructor(chainIdentifier, unifiedStorage, unifiedChainEvents, chain, contract, prices, tokens, swapDataDeserializer, options, events) {\r\n        super(chainIdentifier, unifiedStorage, unifiedChainEvents, chain, prices, tokens, options, events);\r\n        this.swapDataDeserializer = swapDataDeserializer;\r\n        this.contract = contract;\r\n    }\r\n    /**\r\n     * Pre-fetches signature verification data from the server's pre-sent promise, doesn't throw, instead returns null\r\n     *\r\n     * @param signDataPrefetch Promise that resolves when we receive \"signDataPrefetch\" from the LP in streaming mode\r\n     * @protected\r\n     * @returns Pre-fetched signature verification data or null if failed\r\n     */\r\n    preFetchSignData(signDataPrefetch) {\r\n        if (this.contract.preFetchForInitSignatureVerification == null)\r\n            return Promise.resolve(null);\r\n        return signDataPrefetch.then(obj => {\r\n            if (obj == null)\r\n                return null;\r\n            return this.contract.preFetchForInitSignatureVerification(obj);\r\n        }).catch(e => {\r\n            this.logger.error(\"preFetchSignData(): Error: \", e);\r\n            return null;\r\n        });\r\n    }\r\n    /**\r\n     * Verifies swap initialization signature returned by the intermediary\r\n     *\r\n     * @param initiator A smart chain account initiating the swap\r\n     * @param data Parsed swap data from the intermediary\r\n     * @param signature Response of the intermediary\r\n     * @param feeRatePromise Pre-fetched fee rate promise\r\n     * @param preFetchSignatureVerificationData Pre-fetched signature verification data\r\n     * @param abortSignal\r\n     * @protected\r\n     * @returns Swap initialization signature expiry\r\n     * @throws {SignatureVerificationError} when swap init signature is invalid\r\n     */\r\n    async verifyReturnedSignature(initiator, data, signature, feeRatePromise, preFetchSignatureVerificationData, abortSignal) {\r\n        const [feeRate, preFetchedSignatureData] = await Promise.all([feeRatePromise, preFetchSignatureVerificationData]);\r\n        await (0, Utils_1.tryWithRetries)(() => this.contract.isValidInitAuthorization(initiator, data, signature, feeRate, preFetchedSignatureData), null, base_1.SignatureVerificationError, abortSignal);\r\n        return await (0, Utils_1.tryWithRetries)(() => this.contract.getInitAuthorizationExpiry(data, signature, preFetchedSignatureData), null, base_1.SignatureVerificationError, abortSignal);\r\n    }\r\n    /**\r\n     * Processes a single SC on-chain event\r\n     * @private\r\n     * @param event\r\n     * @param swap\r\n     */\r\n    async processEvent(event, swap) {\r\n        if (swap == null)\r\n            return;\r\n        let swapChanged = false;\r\n        if (event instanceof base_1.InitializeEvent) {\r\n            swapChanged = await this.processEventInitialize(swap, event);\r\n            if (event.meta?.txId != null && swap.commitTxId !== event.meta.txId) {\r\n                swap.commitTxId = event.meta.txId;\r\n                swapChanged ||= true;\r\n            }\r\n        }\r\n        if (event instanceof base_1.ClaimEvent) {\r\n            swapChanged = await this.processEventClaim(swap, event);\r\n            if (event.meta?.txId != null && swap.claimTxId !== event.meta.txId) {\r\n                swap.claimTxId = event.meta.txId;\r\n                swapChanged ||= true;\r\n            }\r\n        }\r\n        if (event instanceof base_1.RefundEvent) {\r\n            swapChanged = await this.processEventRefund(swap, event);\r\n            if (event.meta?.txId != null && swap.refundTxId !== event.meta.txId) {\r\n                swap.refundTxId = event.meta.txId;\r\n                swapChanged ||= true;\r\n            }\r\n        }\r\n        this.logger.info(\"processEvents(): \" + event.constructor.name + \" processed for \" + swap.getId() + \" swap: \", swap);\r\n        if (swapChanged) {\r\n            await swap._saveAndEmit();\r\n        }\r\n        return true;\r\n    }\r\n}\r\nexports.IEscrowSwapWrapper = IEscrowSwapWrapper;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IToBTCWrapper = void 0;\r\nconst IToBTCSwap_1 = require(\"./IToBTCSwap\");\r\nconst Utils_1 = require(\"../../../utils/Utils\");\r\nconst IntermediaryError_1 = require(\"../../../errors/IntermediaryError\");\r\nconst IEscrowSwapWrapper_1 = require(\"../IEscrowSwapWrapper\");\r\nclass IToBTCWrapper extends IEscrowSwapWrapper_1.IEscrowSwapWrapper {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.pendingSwapStates = [\r\n            IToBTCSwap_1.ToBTCSwapState.CREATED,\r\n            IToBTCSwap_1.ToBTCSwapState.QUOTE_SOFT_EXPIRED,\r\n            IToBTCSwap_1.ToBTCSwapState.COMMITED,\r\n            IToBTCSwap_1.ToBTCSwapState.SOFT_CLAIMED,\r\n            IToBTCSwap_1.ToBTCSwapState.REFUNDABLE\r\n        ];\r\n        this.tickSwapState = [IToBTCSwap_1.ToBTCSwapState.CREATED, IToBTCSwap_1.ToBTCSwapState.COMMITED, IToBTCSwap_1.ToBTCSwapState.SOFT_CLAIMED];\r\n        this.refundableSwapStates = [IToBTCSwap_1.ToBTCSwapState.REFUNDABLE];\r\n    }\r\n    /**\r\n     * Pre-fetches intermediary's reputation, doesn't throw, instead aborts via abortController and returns null\r\n     *\r\n     * @param amountData\r\n     * @param lp Intermediary\r\n     * @param abortController\r\n     * @protected\r\n     * @returns Intermediary's reputation or null if failed\r\n     * @throws {IntermediaryError} If the intermediary vault doesn't exist\r\n     */\r\n    preFetchIntermediaryReputation(amountData, lp, abortController) {\r\n        return lp.getReputation(this.chainIdentifier, this.contract, [amountData.token.toString()], abortController.signal).then(res => {\r\n            if (res == null)\r\n                throw new IntermediaryError_1.IntermediaryError(\"Invalid data returned - invalid LP vault\");\r\n            return res;\r\n        }).catch(e => {\r\n            this.logger.warn(\"preFetchIntermediaryReputation(): Error: \", e);\r\n            abortController.abort(e);\r\n            return null;\r\n        });\r\n    }\r\n    /**\r\n     * Pre-fetches feeRate for a given swap\r\n     *\r\n     * @param signer Address of the swap initiator\r\n     * @param amountData\r\n     * @param claimHash optional hash of the swap or null\r\n     * @param abortController\r\n     * @protected\r\n     * @returns Fee rate\r\n     */\r\n    preFetchFeeRate(signer, amountData, claimHash, abortController) {\r\n        return (0, Utils_1.tryWithRetries)(() => this.contract.getInitPayInFeeRate(signer, null, amountData.token, claimHash), null, null, abortController.signal).catch(e => {\r\n            this.logger.warn(\"preFetchFeeRate(): Error: \", e);\r\n            abortController.abort(e);\r\n            return null;\r\n        });\r\n    }\r\n    async processEventInitialize(swap, event) {\r\n        if (swap.state === IToBTCSwap_1.ToBTCSwapState.CREATED || swap.state === IToBTCSwap_1.ToBTCSwapState.QUOTE_SOFT_EXPIRED) {\r\n            const swapData = await event.swapData();\r\n            if (swap.data != null && !swap.data.equals(swapData))\r\n                return false;\r\n            if (swap.state === IToBTCSwap_1.ToBTCSwapState.CREATED || swap.state === IToBTCSwap_1.ToBTCSwapState.QUOTE_SOFT_EXPIRED)\r\n                swap.state = IToBTCSwap_1.ToBTCSwapState.COMMITED;\r\n            swap.data = swapData;\r\n            return true;\r\n        }\r\n    }\r\n    processEventClaim(swap, event) {\r\n        if (swap.state !== IToBTCSwap_1.ToBTCSwapState.REFUNDED && swap.state !== IToBTCSwap_1.ToBTCSwapState.CLAIMED) {\r\n            swap.state = IToBTCSwap_1.ToBTCSwapState.CLAIMED;\r\n            swap._setPaymentResult({ secret: event.result, txId: Buffer.from(event.result, \"hex\").reverse().toString(\"hex\") });\r\n            return Promise.resolve(true);\r\n        }\r\n        return Promise.resolve(false);\r\n    }\r\n    processEventRefund(swap, event) {\r\n        if (swap.state !== IToBTCSwap_1.ToBTCSwapState.CLAIMED && swap.state !== IToBTCSwap_1.ToBTCSwapState.REFUNDED) {\r\n            swap.state = IToBTCSwap_1.ToBTCSwapState.REFUNDED;\r\n            return Promise.resolve(true);\r\n        }\r\n        return Promise.resolve(false);\r\n    }\r\n}\r\nexports.IToBTCWrapper = IToBTCWrapper;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ToBTCLNWrapper = void 0;\r\nconst bolt11_1 = require(\"@atomiqlabs/bolt11\");\r\nconst ToBTCLNSwap_1 = require(\"./ToBTCLNSwap\");\r\nconst IToBTCWrapper_1 = require(\"../IToBTCWrapper\");\r\nconst UserError_1 = require(\"../../../../errors/UserError\");\r\nconst base_1 = require(\"@atomiqlabs/base\");\r\nconst IntermediaryError_1 = require(\"../../../../errors/IntermediaryError\");\r\nconst SwapType_1 = require(\"../../../enums/SwapType\");\r\nconst Utils_1 = require(\"../../../../utils/Utils\");\r\nconst IntermediaryAPI_1 = require(\"../../../../intermediaries/IntermediaryAPI\");\r\nconst RequestError_1 = require(\"../../../../errors/RequestError\");\r\nconst LNURL_1 = require(\"../../../../utils/LNURL\");\r\nconst IToBTCSwap_1 = require(\"../IToBTCSwap\");\r\nclass ToBTCLNWrapper extends IToBTCWrapper_1.IToBTCWrapper {\r\n    constructor(chainIdentifier, unifiedStorage, unifiedChainEvents, chain, contract, prices, tokens, swapDataDeserializer, options, events) {\r\n        if (options == null)\r\n            options = {};\r\n        options.paymentTimeoutSeconds ??= 4 * 24 * 60 * 60;\r\n        options.lightningBaseFee ??= 10;\r\n        options.lightningFeePPM ??= 2000;\r\n        super(chainIdentifier, unifiedStorage, unifiedChainEvents, chain, contract, prices, tokens, swapDataDeserializer, options, events);\r\n        this.TYPE = SwapType_1.SwapType.TO_BTCLN;\r\n        this.swapDeserializer = ToBTCLNSwap_1.ToBTCLNSwap;\r\n    }\r\n    async checkPaymentHashWasPaid(paymentHash) {\r\n        const swaps = await this.unifiedStorage.query([[{ key: \"type\", value: this.TYPE }, { key: \"paymentHash\", value: paymentHash }]], (obj) => new this.swapDeserializer(this, obj));\r\n        for (let value of swaps) {\r\n            if (value.state === IToBTCSwap_1.ToBTCSwapState.CLAIMED || value.state === IToBTCSwap_1.ToBTCSwapState.SOFT_CLAIMED)\r\n                throw new UserError_1.UserError(\"Lightning invoice was already paid!\");\r\n        }\r\n    }\r\n    /**\r\n     * Calculates maximum lightning network routing fee based on amount\r\n     *\r\n     * @param amount BTC amount of the swap in satoshis\r\n     * @param overrideBaseFee Override wrapper's default base fee\r\n     * @param overrideFeePPM Override wrapper's default PPM\r\n     * @private\r\n     * @returns Maximum lightning routing fee in sats\r\n     */\r\n    calculateFeeForAmount(amount, overrideBaseFee, overrideFeePPM) {\r\n        return BigInt(overrideBaseFee ?? this.options.lightningBaseFee)\r\n            + (amount * BigInt(overrideFeePPM ?? this.options.lightningFeePPM) / 1000000n);\r\n    }\r\n    /**\r\n     * Verifies returned LP data\r\n     *\r\n     * @param resp Response as returned by the LP\r\n     * @param parsedPr Parsed bolt11 lightning invoice\r\n     * @param token Smart chain token to be used in the swap\r\n     * @param lp\r\n     * @param options Swap options as passed to the swap create function\r\n     * @param data Parsed swap data returned by the LP\r\n     * @param requiredTotal Required total to be paid on the input (for exactIn swaps)\r\n     * @private\r\n     * @throws {IntermediaryError} In case the response is not valid\r\n     */\r\n    async verifyReturnedData(resp, parsedPr, token, lp, options, data, requiredTotal) {\r\n        if (resp.routingFeeSats > await options.maxFee)\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid max fee sats returned\");\r\n        if (requiredTotal != null && resp.total !== requiredTotal)\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid data returned - total amount\");\r\n        const claimHash = this.contract.getHashForHtlc(Buffer.from(parsedPr.tagsObject.payment_hash, \"hex\"));\r\n        if (data.getAmount() !== resp.total ||\r\n            !Buffer.from(data.getClaimHash(), \"hex\").equals(claimHash) ||\r\n            data.getExpiry() !== options.expiryTimestamp ||\r\n            data.getType() !== base_1.ChainSwapType.HTLC ||\r\n            !data.isPayIn() ||\r\n            !data.isToken(token) ||\r\n            data.getClaimer() !== lp.getAddress(this.chainIdentifier)) {\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid data returned\");\r\n        }\r\n    }\r\n    /**\r\n     * Returns the quote/swap from a given intermediary\r\n     *\r\n     * @param signer Smartchain signer initiating the swap\r\n     * @param amountData\r\n     * @param lp Intermediary\r\n     * @param pr bolt11 lightning network invoice\r\n     * @param parsedPr Parsed bolt11 lightning network invoice\r\n     * @param options Options as passed to the swap create function\r\n     * @param preFetches\r\n     * @param abort Abort signal or controller, if AbortController is passed it is used as-is, when AbortSignal is passed\r\n     *  it is extended with extendAbortController and then used\r\n     * @param additionalParams Additional params that should be sent to the LP\r\n     * @private\r\n     */\r\n    async getIntermediaryQuote(signer, amountData, lp, pr, parsedPr, options, preFetches, abort, additionalParams) {\r\n        const abortController = abort instanceof AbortController ? abort : (0, Utils_1.extendAbortController)(abort);\r\n        preFetches.reputationPromise ??= this.preFetchIntermediaryReputation(amountData, lp, abortController);\r\n        try {\r\n            const { signDataPromise, resp } = await (0, Utils_1.tryWithRetries)(async (retryCount) => {\r\n                const { signDataPrefetch, response } = IntermediaryAPI_1.IntermediaryAPI.initToBTCLN(this.chainIdentifier, lp.url, {\r\n                    offerer: signer,\r\n                    pr,\r\n                    maxFee: await options.maxFee,\r\n                    expiryTimestamp: options.expiryTimestamp,\r\n                    token: amountData.token,\r\n                    feeRate: preFetches.feeRatePromise,\r\n                    additionalParams\r\n                }, this.options.postRequestTimeout, abortController.signal, retryCount > 0 ? false : null);\r\n                return {\r\n                    signDataPromise: this.preFetchSignData(signDataPrefetch),\r\n                    resp: await response\r\n                };\r\n            }, null, e => e instanceof RequestError_1.RequestError, abortController.signal);\r\n            const amountOut = (BigInt(parsedPr.millisatoshis) + 999n) / 1000n;\r\n            const totalFee = resp.swapFee + resp.maxFee;\r\n            const data = new this.swapDataDeserializer(resp.data);\r\n            data.setOfferer(signer);\r\n            await this.verifyReturnedData(resp, parsedPr, amountData.token, lp, options, data);\r\n            const [pricingInfo, signatureExpiry, reputation] = await Promise.all([\r\n                this.verifyReturnedPrice(lp.services[SwapType_1.SwapType.TO_BTCLN], true, amountOut, data.getAmount(), amountData.token, { networkFee: resp.maxFee }, preFetches.pricePreFetchPromise, abortController.signal),\r\n                this.verifyReturnedSignature(signer, data, resp, preFetches.feeRatePromise, signDataPromise, abortController.signal),\r\n                preFetches.reputationPromise\r\n            ]);\r\n            abortController.signal.throwIfAborted();\r\n            lp.reputation[amountData.token.toString()] = reputation;\r\n            const quote = new ToBTCLNSwap_1.ToBTCLNSwap(this, {\r\n                pricingInfo,\r\n                url: lp.url,\r\n                expiry: signatureExpiry,\r\n                swapFee: resp.swapFee,\r\n                feeRate: await preFetches.feeRatePromise,\r\n                signatureData: resp,\r\n                data,\r\n                networkFee: resp.maxFee,\r\n                networkFeeBtc: resp.routingFeeSats,\r\n                confidence: resp.confidence,\r\n                pr,\r\n                exactIn: false\r\n            });\r\n            await quote._save();\r\n            return quote;\r\n        }\r\n        catch (e) {\r\n            abortController.abort(e);\r\n            throw e;\r\n        }\r\n    }\r\n    /**\r\n     * Returns a newly created swap, paying for 'bolt11PayRequest' - a bitcoin LN invoice\r\n     *\r\n     * @param signer                Smartchain signer's address initiating the swap\r\n     * @param bolt11PayRequest      BOLT11 payment request (bitcoin lightning invoice) you wish to pay\r\n     * @param amountData            Amount of token & amount to swap\r\n     * @param lps                   LPs (liquidity providers) to get the quotes from\r\n     * @param options               Quote options\r\n     * @param additionalParams      Additional parameters sent to the LP when creating the swap\r\n     * @param abortSignal           Abort signal for aborting the process\r\n     * @param preFetches            Existing pre-fetches for the swap (only used internally for LNURL swaps)\r\n     */\r\n    async create(signer, bolt11PayRequest, amountData, lps, options, additionalParams, abortSignal, preFetches) {\r\n        options ??= {};\r\n        options.expirySeconds ??= this.options.paymentTimeoutSeconds;\r\n        options.expiryTimestamp ??= BigInt(Math.floor(Date.now() / 1000) + options.expirySeconds);\r\n        const parsedPr = (0, bolt11_1.decode)(bolt11PayRequest);\r\n        if (parsedPr.millisatoshis == null)\r\n            throw new UserError_1.UserError(\"Must be an invoice with amount\");\r\n        const amountOut = (BigInt(parsedPr.millisatoshis) + 999n) / 1000n;\r\n        options.maxFee ??= this.calculateFeeForAmount(amountOut, options.maxRoutingBaseFee, options.maxRoutingPPM);\r\n        await this.checkPaymentHashWasPaid(parsedPr.tagsObject.payment_hash);\r\n        const claimHash = this.contract.getHashForHtlc(Buffer.from(parsedPr.tagsObject.payment_hash, \"hex\"));\r\n        const _abortController = (0, Utils_1.extendAbortController)(abortSignal);\r\n        if (preFetches == null)\r\n            preFetches = {\r\n                pricePreFetchPromise: this.preFetchPrice(amountData, _abortController.signal),\r\n                feeRatePromise: this.preFetchFeeRate(signer, amountData, claimHash.toString(\"hex\"), _abortController)\r\n            };\r\n        return lps.map(lp => {\r\n            return {\r\n                intermediary: lp,\r\n                quote: this.getIntermediaryQuote(signer, amountData, lp, bolt11PayRequest, parsedPr, options, preFetches, _abortController.signal, additionalParams)\r\n            };\r\n        });\r\n    }\r\n    /**\r\n     * Parses and fetches lnurl pay params from the specified lnurl\r\n     *\r\n     * @param lnurl LNURL to be parsed and fetched\r\n     * @param abortSignal\r\n     * @private\r\n     * @throws {UserError} if the LNURL is invalid or if it's not a LNURL-pay\r\n     */\r\n    async getLNURLPay(lnurl, abortSignal) {\r\n        if (typeof (lnurl) !== \"string\")\r\n            return lnurl;\r\n        const res = await LNURL_1.LNURL.getLNURL(lnurl, true, this.options.getRequestTimeout, abortSignal);\r\n        if (res == null)\r\n            throw new UserError_1.UserError(\"Invalid LNURL\");\r\n        if (res.tag !== \"payRequest\")\r\n            throw new UserError_1.UserError(\"Not a LNURL-pay\");\r\n        return res;\r\n    }\r\n    /**\r\n     * Returns the quote/swap from the given LP\r\n     *\r\n     * @param signer Smartchain signer's address initiating the swap\r\n     * @param amountData\r\n     * @param payRequest Parsed LNURL-pay params\r\n     * @param lp Intermediary\r\n     * @param dummyPr Dummy minimum value bolt11 lightning invoice returned from the LNURL-pay\r\n     * @param options Options as passed to the swap create function\r\n     * @param preFetches\r\n     * @param abortSignal\r\n     * @param additionalParams Additional params to be sent to the intermediary\r\n     * @private\r\n     */\r\n    async getIntermediaryQuoteExactIn(signer, amountData, payRequest, lp, dummyPr, options, preFetches, abortSignal, additionalParams) {\r\n        const abortController = (0, Utils_1.extendAbortController)(abortSignal);\r\n        const reputationPromise = this.preFetchIntermediaryReputation(amountData, lp, abortController);\r\n        try {\r\n            const { signDataPromise, prepareResp } = await (0, Utils_1.tryWithRetries)(async (retryCount) => {\r\n                const { signDataPrefetch, response } = IntermediaryAPI_1.IntermediaryAPI.prepareToBTCLNExactIn(this.chainIdentifier, lp.url, {\r\n                    token: amountData.token,\r\n                    offerer: signer,\r\n                    pr: dummyPr,\r\n                    amount: amountData.amount,\r\n                    maxFee: await options.maxFee,\r\n                    expiryTimestamp: options.expiryTimestamp,\r\n                    additionalParams\r\n                }, this.options.postRequestTimeout, abortController.signal, retryCount > 0 ? false : null);\r\n                return {\r\n                    signDataPromise: this.preFetchSignData(signDataPrefetch),\r\n                    prepareResp: await response\r\n                };\r\n            }, null, e => e instanceof RequestError_1.RequestError, abortController.signal);\r\n            if (prepareResp.amount <= 0n)\r\n                throw new IntermediaryError_1.IntermediaryError(\"Invalid amount returned (zero or negative)\");\r\n            const min = BigInt(payRequest.minSendable) / 1000n;\r\n            const max = BigInt(payRequest.maxSendable) / 1000n;\r\n            if (prepareResp.amount < min)\r\n                throw new UserError_1.UserError(\"Amount less than minimum\");\r\n            if (prepareResp.amount > max)\r\n                throw new UserError_1.UserError(\"Amount more than maximum\");\r\n            const { invoice, parsedInvoice, successAction } = await LNURL_1.LNURL.useLNURLPay(payRequest, prepareResp.amount, options.comment, this.options.getRequestTimeout, abortController.signal);\r\n            const resp = await (0, Utils_1.tryWithRetries)((retryCount) => IntermediaryAPI_1.IntermediaryAPI.initToBTCLNExactIn(lp.url, {\r\n                pr: invoice,\r\n                reqId: prepareResp.reqId,\r\n                feeRate: preFetches.feeRatePromise,\r\n                additionalParams\r\n            }, this.options.postRequestTimeout, abortController.signal, retryCount > 0 ? false : null), null, RequestError_1.RequestError, abortController.signal);\r\n            const totalFee = resp.swapFee + resp.maxFee;\r\n            const data = new this.swapDataDeserializer(resp.data);\r\n            data.setOfferer(signer);\r\n            await this.verifyReturnedData(resp, parsedInvoice, amountData.token, lp, options, data, amountData.amount);\r\n            const [pricingInfo, signatureExpiry, reputation] = await Promise.all([\r\n                this.verifyReturnedPrice(lp.services[SwapType_1.SwapType.TO_BTCLN], true, prepareResp.amount, data.getAmount(), amountData.token, { networkFee: resp.maxFee }, preFetches.pricePreFetchPromise, abortSignal),\r\n                this.verifyReturnedSignature(signer, data, resp, preFetches.feeRatePromise, signDataPromise, abortController.signal),\r\n                reputationPromise\r\n            ]);\r\n            abortController.signal.throwIfAborted();\r\n            lp.reputation[amountData.token.toString()] = reputation;\r\n            const quote = new ToBTCLNSwap_1.ToBTCLNSwap(this, {\r\n                pricingInfo,\r\n                url: lp.url,\r\n                expiry: signatureExpiry,\r\n                swapFee: resp.swapFee,\r\n                feeRate: await preFetches.feeRatePromise,\r\n                signatureData: resp,\r\n                data,\r\n                networkFee: resp.maxFee,\r\n                networkFeeBtc: resp.routingFeeSats,\r\n                confidence: resp.confidence,\r\n                pr: invoice,\r\n                lnurl: payRequest.url,\r\n                successAction,\r\n                exactIn: true\r\n            });\r\n            await quote._save();\r\n            return quote;\r\n        }\r\n        catch (e) {\r\n            abortController.abort(e);\r\n            throw e;\r\n        }\r\n    }\r\n    /**\r\n     * Returns a newly created swap, paying for 'lnurl' - a lightning LNURL-pay\r\n     *\r\n     * @param signer                Smartchain signer's address initiating the swap\r\n     * @param lnurl                 LMURL-pay you wish to pay\r\n     * @param amountData            Amount of token & amount to swap\r\n     * @param lps                   LPs (liquidity providers/intermediaries) to get the quotes from\r\n     * @param options               Quote options\r\n     * @param additionalParams      Additional parameters sent to the intermediary when creating the swap\r\n     * @param abortSignal           Abort signal for aborting the process\r\n     */\r\n    async createViaLNURL(signer, lnurl, amountData, lps, options, additionalParams, abortSignal) {\r\n        if (!this.isInitialized)\r\n            throw new Error(\"Not initialized, call init() first!\");\r\n        options ??= {};\r\n        options.expirySeconds ??= this.options.paymentTimeoutSeconds;\r\n        options.expiryTimestamp ??= BigInt(Math.floor(Date.now() / 1000) + options.expirySeconds);\r\n        const _abortController = (0, Utils_1.extendAbortController)(abortSignal);\r\n        const pricePreFetchPromise = this.preFetchPrice(amountData, _abortController.signal);\r\n        const feeRatePromise = this.preFetchFeeRate(signer, amountData, null, _abortController);\r\n        options.maxRoutingPPM ??= BigInt(this.options.lightningFeePPM);\r\n        options.maxRoutingBaseFee ??= BigInt(this.options.lightningBaseFee);\r\n        if (amountData.exactIn) {\r\n            options.maxFee ??= pricePreFetchPromise\r\n                .then(val => this.prices.getFromBtcSwapAmount(this.chainIdentifier, options.maxRoutingBaseFee, amountData.token, abortSignal, val))\r\n                .then(_maxBaseFee => this.calculateFeeForAmount(amountData.amount, _maxBaseFee, options.maxRoutingPPM));\r\n        }\r\n        else {\r\n            options.maxFee = this.calculateFeeForAmount(amountData.amount, options.maxRoutingBaseFee, options.maxRoutingPPM);\r\n        }\r\n        try {\r\n            let payRequest = await this.getLNURLPay(lnurl, _abortController.signal);\r\n            if (options.comment != null &&\r\n                (payRequest.commentAllowed == null || options.comment.length > payRequest.commentAllowed))\r\n                throw new UserError_1.UserError(\"Comment not allowed or too long\");\r\n            if (amountData.exactIn) {\r\n                const { invoice: dummyInvoice } = await LNURL_1.LNURL.useLNURLPay(payRequest, BigInt(payRequest.minSendable) / 1000n, null, this.options.getRequestTimeout, _abortController.signal);\r\n                return lps.map(lp => {\r\n                    return {\r\n                        quote: this.getIntermediaryQuoteExactIn(signer, amountData, payRequest, lp, dummyInvoice, options, {\r\n                            pricePreFetchPromise,\r\n                            feeRatePromise\r\n                        }, _abortController.signal, additionalParams),\r\n                        intermediary: lp\r\n                    };\r\n                });\r\n            }\r\n            else {\r\n                const min = BigInt(payRequest.minSendable) / 1000n;\r\n                const max = BigInt(payRequest.maxSendable) / 1000n;\r\n                if (amountData.amount < min)\r\n                    throw new UserError_1.UserError(\"Amount less than minimum\");\r\n                if (amountData.amount > max)\r\n                    throw new UserError_1.UserError(\"Amount more than maximum\");\r\n                const { invoice, parsedInvoice, successAction } = await LNURL_1.LNURL.useLNURLPay(payRequest, amountData.amount, options.comment, this.options.getRequestTimeout, _abortController.signal);\r\n                return (await this.create(signer, invoice, amountData, lps, options, additionalParams, _abortController.signal, {\r\n                    feeRatePromise,\r\n                    pricePreFetchPromise\r\n                })).map(data => {\r\n                    return {\r\n                        quote: data.quote.then(quote => {\r\n                            quote.lnurl = payRequest.url;\r\n                            quote.successAction = successAction;\r\n                            return quote;\r\n                        }),\r\n                        intermediary: data.intermediary\r\n                    };\r\n                });\r\n            }\r\n        }\r\n        catch (e) {\r\n            _abortController.abort(e);\r\n            throw e;\r\n        }\r\n    }\r\n}\r\nexports.ToBTCLNWrapper = ToBTCLNWrapper;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ToBTCSwap = exports.isToBTCSwapInit = void 0;\r\nconst IToBTCSwap_1 = require(\"../IToBTCSwap\");\r\nconst SwapType_1 = require(\"../../../enums/SwapType\");\r\nconst buffer_1 = require(\"buffer\");\r\nconst IntermediaryError_1 = require(\"../../../../errors/IntermediaryError\");\r\nconst Tokens_1 = require(\"../../../../Tokens\");\r\nconst Utils_1 = require(\"../../../../utils/Utils\");\r\nfunction isToBTCSwapInit(obj) {\r\n    return typeof (obj.address) === \"string\" &&\r\n        typeof (obj.amount) === \"bigint\" &&\r\n        typeof (obj.confirmationTarget) === \"number\" &&\r\n        typeof (obj.satsPerVByte) === \"number\" &&\r\n        (0, IToBTCSwap_1.isIToBTCSwapInit)(obj);\r\n}\r\nexports.isToBTCSwapInit = isToBTCSwapInit;\r\nclass ToBTCSwap extends IToBTCSwap_1.IToBTCSwap {\r\n    constructor(wrapper, initOrObject) {\r\n        if (isToBTCSwapInit(initOrObject))\r\n            initOrObject.url += \"/tobtc\";\r\n        super(wrapper, initOrObject);\r\n        this.outputToken = Tokens_1.BitcoinTokens.BTC;\r\n        this.TYPE = SwapType_1.SwapType.TO_BTC;\r\n        if (!isToBTCSwapInit(initOrObject)) {\r\n            this.address = initOrObject.address;\r\n            this.amount = BigInt(initOrObject.amount);\r\n            this.confirmationTarget = initOrObject.confirmationTarget;\r\n            this.satsPerVByte = initOrObject.satsPerVByte;\r\n            this.txId = initOrObject.txId;\r\n            this.requiredConfirmations = initOrObject.requiredConfirmations ?? this.data.getConfirmationsHint();\r\n            this.nonce = (initOrObject.nonce == null ? null : BigInt(initOrObject.nonce)) ?? this.data.getNonceHint();\r\n        }\r\n        this.logger = (0, Utils_1.getLogger)(\"ToBTC(\" + this.getIdentifierHashString() + \"): \");\r\n        this.tryRecomputeSwapPrice();\r\n    }\r\n    async _setPaymentResult(result, check = false) {\r\n        if (result == null)\r\n            return false;\r\n        if (result.txId == null)\r\n            throw new IntermediaryError_1.IntermediaryError(\"No btc txId returned!\");\r\n        if (check) {\r\n            const btcTx = await this.wrapper.btcRpc.getTransaction(result.txId);\r\n            if (btcTx == null)\r\n                return false;\r\n            const foundVout = btcTx.outs.find(vout => this.data.getClaimHash() === this.wrapper.contract.getHashForOnchain(buffer_1.Buffer.from(vout.scriptPubKey.hex, \"hex\"), BigInt(vout.value), this.requiredConfirmations, this.nonce).toString(\"hex\"));\r\n            if (foundVout == null)\r\n                throw new IntermediaryError_1.IntermediaryError(\"Invalid btc txId returned\");\r\n        }\r\n        this.txId = result.txId;\r\n        return true;\r\n    }\r\n    //////////////////////////////\r\n    //// Amounts & fees\r\n    getOutput() {\r\n        return (0, Tokens_1.toTokenAmount)(this.amount, this.outputToken, this.wrapper.prices);\r\n    }\r\n    //////////////////////////////\r\n    //// Getters & utils\r\n    /**\r\n     * Returns the bitcoin address where the BTC will be sent to\r\n     */\r\n    getOutputAddress() {\r\n        return this.address;\r\n    }\r\n    getOutputTxId() {\r\n        return this.txId;\r\n    }\r\n    /**\r\n     * Returns fee rate of the bitcoin transaction in sats/vB\r\n     */\r\n    getBitcoinFeeRate() {\r\n        return this.satsPerVByte;\r\n    }\r\n    //////////////////////////////\r\n    //// Storage\r\n    serialize() {\r\n        return {\r\n            ...super.serialize(),\r\n            address: this.address,\r\n            amount: this.amount.toString(10),\r\n            confirmationTarget: this.confirmationTarget,\r\n            satsPerVByte: this.satsPerVByte,\r\n            nonce: this.nonce == null ? null : this.nonce.toString(10),\r\n            requiredConfirmations: this.requiredConfirmations,\r\n            txId: this.txId\r\n        };\r\n    }\r\n}\r\nexports.ToBTCSwap = ToBTCSwap;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.ToBTCWrapper = void 0;\r\nconst ToBTCSwap_1 = require(\"./ToBTCSwap\");\r\nconst IToBTCWrapper_1 = require(\"../IToBTCWrapper\");\r\nconst base_1 = require(\"@atomiqlabs/base\");\r\nconst UserError_1 = require(\"../../../../errors/UserError\");\r\nconst IntermediaryError_1 = require(\"../../../../errors/IntermediaryError\");\r\nconst SwapType_1 = require(\"../../../enums/SwapType\");\r\nconst Utils_1 = require(\"../../../../utils/Utils\");\r\nconst IntermediaryAPI_1 = require(\"../../../../intermediaries/IntermediaryAPI\");\r\nconst RequestError_1 = require(\"../../../../errors/RequestError\");\r\nconst utils_1 = require(\"@scure/btc-signer/utils\");\r\nclass ToBTCWrapper extends IToBTCWrapper_1.IToBTCWrapper {\r\n    /**\r\n     * @param chainIdentifier\r\n     * @param unifiedStorage Storage interface for the current environment\r\n     * @param unifiedChainEvents Smart chain on-chain event listener\r\n     * @param chain\r\n     * @param contract Chain specific swap contract\r\n     * @param prices Swap pricing handler\r\n     * @param tokens\r\n     * @param swapDataDeserializer Deserializer for chain specific SwapData\r\n     * @param btcRpc Bitcoin RPC api\r\n     * @param options\r\n     * @param events Instance to use for emitting events\r\n     */\r\n    constructor(chainIdentifier, unifiedStorage, unifiedChainEvents, chain, contract, prices, tokens, swapDataDeserializer, btcRpc, options, events) {\r\n        if (options == null)\r\n            options = {};\r\n        options.bitcoinNetwork = options.bitcoinNetwork ?? utils_1.TEST_NETWORK;\r\n        options.safetyFactor = options.safetyFactor || 2;\r\n        options.maxConfirmations = options.maxConfirmations || 6;\r\n        options.bitcoinBlocktime = options.bitcoinBlocktime || (60 * 10);\r\n        options.maxExpectedOnchainSendSafetyFactor = options.maxExpectedOnchainSendSafetyFactor || 4;\r\n        options.maxExpectedOnchainSendGracePeriodBlocks = options.maxExpectedOnchainSendGracePeriodBlocks || 12;\r\n        super(chainIdentifier, unifiedStorage, unifiedChainEvents, chain, contract, prices, tokens, swapDataDeserializer, options, events);\r\n        this.TYPE = SwapType_1.SwapType.TO_BTC;\r\n        this.swapDeserializer = ToBTCSwap_1.ToBTCSwap;\r\n        this.btcRpc = btcRpc;\r\n    }\r\n    /**\r\n     * Returns randomly generated random escrow nonce to be used for to BTC on-chain swaps\r\n     * @private\r\n     * @returns Escrow nonce\r\n     */\r\n    getRandomNonce() {\r\n        const firstPart = BigInt(Math.floor((Date.now() / 1000)) - 700000000);\r\n        return (firstPart << 24n) | base_1.BigIntBufferUtils.fromBuffer((0, Utils_1.randomBytes)(3));\r\n    }\r\n    /**\r\n     * Converts bitcoin address to its corresponding output script\r\n     *\r\n     * @param addr Bitcoin address to get the output script for\r\n     * @private\r\n     * @returns Output script as Buffer\r\n     * @throws {UserError} if invalid address is specified\r\n     */\r\n    btcAddressToOutputScript(addr) {\r\n        try {\r\n            return (0, Utils_1.toOutputScript)(this.options.bitcoinNetwork, addr);\r\n        }\r\n        catch (e) {\r\n            throw new UserError_1.UserError(\"Invalid address specified\");\r\n        }\r\n    }\r\n    /**\r\n     * Verifies returned LP data\r\n     *\r\n     * @param resp LP's response\r\n     * @param amountData\r\n     * @param lp\r\n     * @param options Options as passed to the swap create function\r\n     * @param data LP's returned parsed swap data\r\n     * @param hash Payment hash of the swap\r\n     * @private\r\n     * @throws {IntermediaryError} if returned data are not correct\r\n     */\r\n    verifyReturnedData(resp, amountData, lp, options, data, hash) {\r\n        if (resp.totalFee !== (resp.swapFee + resp.networkFee))\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid totalFee returned\");\r\n        if (amountData.exactIn) {\r\n            if (resp.total !== amountData.amount)\r\n                throw new IntermediaryError_1.IntermediaryError(\"Invalid total returned\");\r\n        }\r\n        else {\r\n            if (resp.amount !== amountData.amount)\r\n                throw new IntermediaryError_1.IntermediaryError(\"Invalid amount returned\");\r\n        }\r\n        const maxAllowedBlockDelta = BigInt(options.confirmations +\r\n            options.confirmationTarget +\r\n            this.options.maxExpectedOnchainSendGracePeriodBlocks);\r\n        const maxAllowedExpiryDelta = maxAllowedBlockDelta\r\n            * BigInt(this.options.maxExpectedOnchainSendSafetyFactor)\r\n            * BigInt(this.options.bitcoinBlocktime);\r\n        const currentTimestamp = BigInt(Math.floor(Date.now() / 1000));\r\n        const maxAllowedExpiryTimestamp = currentTimestamp + maxAllowedExpiryDelta;\r\n        if (data.getExpiry() > maxAllowedExpiryTimestamp) {\r\n            throw new IntermediaryError_1.IntermediaryError(\"Expiry time returned too high!\");\r\n        }\r\n        if (data.getAmount() !== resp.total ||\r\n            data.getClaimHash() !== hash ||\r\n            data.getType() !== base_1.ChainSwapType.CHAIN_NONCED ||\r\n            !data.isPayIn() ||\r\n            !data.isToken(amountData.token) ||\r\n            data.getClaimer() !== lp.getAddress(this.chainIdentifier)) {\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid data returned\");\r\n        }\r\n    }\r\n    /**\r\n     * Returns quotes fetched from LPs, paying to an 'address' - a bitcoin address\r\n     *\r\n     * @param signer                Smart-chain signer address initiating the swap\r\n     * @param address               Bitcoin on-chain address you wish to pay to\r\n     * @param amountData            Amount of token & amount to swap\r\n     * @param lps                   LPs (liquidity providers) to get the quotes from\r\n     * @param options               Quote options\r\n     * @param additionalParams      Additional parameters sent to the LP when creating the swap\r\n     * @param abortSignal           Abort signal for aborting the process\r\n     */\r\n    create(signer, address, amountData, lps, options, additionalParams, abortSignal) {\r\n        if (!this.isInitialized)\r\n            throw new Error(\"Not initialized, call init() first!\");\r\n        options ??= {};\r\n        options.confirmationTarget ??= 3;\r\n        options.confirmations ??= 2;\r\n        const nonce = this.getRandomNonce();\r\n        const outputScript = this.btcAddressToOutputScript(address);\r\n        const _hash = !amountData.exactIn ?\r\n            this.contract.getHashForOnchain(outputScript, amountData.amount, options.confirmations, nonce).toString(\"hex\") :\r\n            null;\r\n        const _abortController = (0, Utils_1.extendAbortController)(abortSignal);\r\n        const pricePreFetchPromise = this.preFetchPrice(amountData, _abortController.signal);\r\n        const feeRatePromise = this.preFetchFeeRate(signer, amountData, _hash, _abortController);\r\n        return lps.map(lp => {\r\n            return {\r\n                intermediary: lp,\r\n                quote: (async () => {\r\n                    const abortController = (0, Utils_1.extendAbortController)(_abortController.signal);\r\n                    const reputationPromise = this.preFetchIntermediaryReputation(amountData, lp, abortController);\r\n                    try {\r\n                        const { signDataPromise, resp } = await (0, Utils_1.tryWithRetries)(async (retryCount) => {\r\n                            const { signDataPrefetch, response } = IntermediaryAPI_1.IntermediaryAPI.initToBTC(this.chainIdentifier, lp.url, {\r\n                                btcAddress: address,\r\n                                amount: amountData.amount,\r\n                                confirmationTarget: options.confirmationTarget,\r\n                                confirmations: options.confirmations,\r\n                                nonce: nonce,\r\n                                token: amountData.token,\r\n                                offerer: signer,\r\n                                exactIn: amountData.exactIn,\r\n                                feeRate: feeRatePromise,\r\n                                additionalParams\r\n                            }, this.options.postRequestTimeout, abortController.signal, retryCount > 0 ? false : null);\r\n                            return {\r\n                                signDataPromise: this.preFetchSignData(signDataPrefetch),\r\n                                resp: await response\r\n                            };\r\n                        }, null, RequestError_1.RequestError, abortController.signal);\r\n                        let hash = amountData.exactIn ?\r\n                            this.contract.getHashForOnchain(outputScript, resp.amount, options.confirmations, nonce).toString(\"hex\") :\r\n                            _hash;\r\n                        const data = new this.swapDataDeserializer(resp.data);\r\n                        data.setOfferer(signer);\r\n                        this.verifyReturnedData(resp, amountData, lp, options, data, hash);\r\n                        const [pricingInfo, signatureExpiry, reputation] = await Promise.all([\r\n                            this.verifyReturnedPrice(lp.services[SwapType_1.SwapType.TO_BTC], true, resp.amount, data.getAmount(), amountData.token, resp, pricePreFetchPromise, abortController.signal),\r\n                            this.verifyReturnedSignature(signer, data, resp, feeRatePromise, signDataPromise, abortController.signal),\r\n                            reputationPromise\r\n                        ]);\r\n                        abortController.signal.throwIfAborted();\r\n                        lp.reputation[amountData.token.toString()] = reputation;\r\n                        const quote = new ToBTCSwap_1.ToBTCSwap(this, {\r\n                            pricingInfo,\r\n                            url: lp.url,\r\n                            expiry: signatureExpiry,\r\n                            swapFee: resp.swapFee,\r\n                            feeRate: await feeRatePromise,\r\n                            signatureData: resp,\r\n                            data,\r\n                            networkFee: resp.networkFee,\r\n                            address,\r\n                            amount: resp.amount,\r\n                            confirmationTarget: options.confirmationTarget,\r\n                            satsPerVByte: Number(resp.satsPervByte),\r\n                            exactIn: amountData.exactIn ?? false,\r\n                            requiredConfirmations: options.confirmations,\r\n                            nonce\r\n                        });\r\n                        await quote._save();\r\n                        return quote;\r\n                    }\r\n                    catch (e) {\r\n                        abortController.abort(e);\r\n                        throw e;\r\n                    }\r\n                })()\r\n            };\r\n        });\r\n    }\r\n}\r\nexports.ToBTCWrapper = ToBTCWrapper;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IFromBTCSwap = void 0;\r\nconst ISwap_1 = require(\"../../ISwap\");\r\nconst base_1 = require(\"@atomiqlabs/base\");\r\nconst Tokens_1 = require(\"../../../Tokens\");\r\nconst IEscrowSwap_1 = require(\"../IEscrowSwap\");\r\nconst Fee_1 = require(\"../../fee/Fee\");\r\nclass IFromBTCSwap extends IEscrowSwap_1.IEscrowSwap {\r\n    constructor(wrapper, initOrObj) {\r\n        super(wrapper, initOrObj);\r\n    }\r\n    /**\r\n     * In case swapFee in BTC is not supplied it recalculates it based on swap price\r\n     * @protected\r\n     */\r\n    tryRecomputeSwapPrice() {\r\n        if (this.swapFeeBtc == null) {\r\n            this.swapFeeBtc = this.swapFee * this.getInput().rawAmount / this.getOutAmountWithoutFee();\r\n        }\r\n        super.tryRecomputeSwapPrice();\r\n    }\r\n    getSwapData() {\r\n        return this.data;\r\n    }\r\n    _getInitiator() {\r\n        return this.getSwapData().getClaimer();\r\n    }\r\n    getOutputTxId() {\r\n        return this.claimTxId;\r\n    }\r\n    getOutputAddress() {\r\n        return this._getInitiator();\r\n    }\r\n    requiresAction() {\r\n        return this.isClaimable();\r\n    }\r\n    //////////////////////////////\r\n    //// Amounts & fees\r\n    getOutAmountWithoutFee() {\r\n        return this.getSwapData().getAmount() + this.swapFee;\r\n    }\r\n    getSwapFee() {\r\n        const feeWithoutBaseFee = this.swapFeeBtc - this.pricingInfo.satsBaseFee;\r\n        const swapFeePPM = feeWithoutBaseFee * 1000000n / this.getInputWithoutFee().rawAmount;\r\n        return {\r\n            amountInSrcToken: (0, Tokens_1.toTokenAmount)(this.swapFeeBtc, this.inputToken, this.wrapper.prices),\r\n            amountInDstToken: (0, Tokens_1.toTokenAmount)(this.swapFee, this.wrapper.tokens[this.getSwapData().getToken()], this.wrapper.prices),\r\n            usdValue: (abortSignal, preFetchedUsdPrice) => this.wrapper.prices.getBtcUsdValue(this.swapFeeBtc, abortSignal, preFetchedUsdPrice),\r\n            composition: {\r\n                base: (0, Tokens_1.toTokenAmount)(this.pricingInfo.satsBaseFee, this.inputToken, this.wrapper.prices),\r\n                percentage: (0, ISwap_1.ppmToPercentage)(swapFeePPM)\r\n            }\r\n        };\r\n    }\r\n    getFee() {\r\n        return this.getSwapFee();\r\n    }\r\n    getFeeBreakdown() {\r\n        return [{\r\n                type: Fee_1.FeeType.SWAP,\r\n                fee: this.getSwapFee()\r\n            }];\r\n    }\r\n    getOutput() {\r\n        return (0, Tokens_1.toTokenAmount)(this.getSwapData().getAmount(), this.wrapper.tokens[this.getSwapData().getToken()], this.wrapper.prices);\r\n    }\r\n    getInputWithoutFee() {\r\n        return (0, Tokens_1.toTokenAmount)(this.getInput().rawAmount - this.swapFeeBtc, this.inputToken, this.wrapper.prices);\r\n    }\r\n    getSecurityDeposit() {\r\n        return (0, Tokens_1.toTokenAmount)(this.getSwapData().getSecurityDeposit(), this.wrapper.getNativeToken(), this.wrapper.prices);\r\n    }\r\n    getTotalDeposit() {\r\n        return (0, Tokens_1.toTokenAmount)(this.getSwapData().getTotalDeposit(), this.wrapper.getNativeToken(), this.wrapper.prices);\r\n    }\r\n    async hasEnoughForTxFees() {\r\n        const [balance, commitFee] = await Promise.all([\r\n            this.wrapper.contract.getBalance(this._getInitiator(), this.wrapper.chain.getNativeCurrencyAddress(), false),\r\n            this.getCommitFee()\r\n        ]);\r\n        const totalFee = commitFee + this.getSwapData().getTotalDeposit();\r\n        return {\r\n            enoughBalance: balance >= totalFee,\r\n            balance: (0, Tokens_1.toTokenAmount)(balance, this.wrapper.getNativeToken(), this.wrapper.prices),\r\n            required: (0, Tokens_1.toTokenAmount)(totalFee, this.wrapper.getNativeToken(), this.wrapper.prices)\r\n        };\r\n    }\r\n    //////////////////////////////\r\n    //// Commit\r\n    /**\r\n     * Returns the transactions required for committing the swap on-chain, locking the tokens from the intermediary\r\n     *  in an HTLC or PTLC\r\n     *\r\n     * @param skipChecks Skip checks like making sure init signature is still valid and swap wasn't commited yet\r\n     *  (this is handled when swap is created (quoted), if you commit right after quoting, you can use skipChecks=true)\r\n     * @throws {Error} When in invalid state to commit the swap\r\n     */\r\n    async txsCommit(skipChecks) {\r\n        if (!this.canCommit())\r\n            throw new Error(\"Must be in CREATED state!\");\r\n        if (!this.initiated) {\r\n            this.initiated = true;\r\n            await this._saveAndEmit();\r\n        }\r\n        return await this.wrapper.contract.txsInit(this._getInitiator(), this.data, this.signatureData, skipChecks, this.feeRate).catch(e => Promise.reject(e instanceof base_1.SignatureVerificationError ? new Error(\"Request timed out\") : e));\r\n    }\r\n    //////////////////////////////\r\n    //// Claim\r\n    getClaimFee() {\r\n        return this.wrapper.contract.getClaimFee(this._getInitiator(), this.getSwapData());\r\n    }\r\n}\r\nexports.IFromBTCSwap = IFromBTCSwap;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FromBTCLNSwap = exports.isFromBTCLNSwapInit = exports.FromBTCLNSwapState = void 0;\r\nconst bolt11_1 = require(\"@atomiqlabs/bolt11\");\r\nconst IFromBTCSwap_1 = require(\"../IFromBTCSwap\");\r\nconst SwapType_1 = require(\"../../../enums/SwapType\");\r\nconst base_1 = require(\"@atomiqlabs/base\");\r\nconst buffer_1 = require(\"buffer\");\r\nconst LNURL_1 = require(\"../../../../utils/LNURL\");\r\nconst UserError_1 = require(\"../../../../errors/UserError\");\r\nconst IntermediaryAPI_1 = require(\"../../../../intermediaries/IntermediaryAPI\");\r\nconst IntermediaryError_1 = require(\"../../../../errors/IntermediaryError\");\r\nconst Utils_1 = require(\"../../../../utils/Utils\");\r\nconst Tokens_1 = require(\"../../../../Tokens\");\r\nconst IEscrowSwap_1 = require(\"../../IEscrowSwap\");\r\nvar FromBTCLNSwapState;\r\n(function (FromBTCLNSwapState) {\r\n    FromBTCLNSwapState[FromBTCLNSwapState[\"FAILED\"] = -4] = \"FAILED\";\r\n    FromBTCLNSwapState[FromBTCLNSwapState[\"QUOTE_EXPIRED\"] = -3] = \"QUOTE_EXPIRED\";\r\n    FromBTCLNSwapState[FromBTCLNSwapState[\"QUOTE_SOFT_EXPIRED\"] = -2] = \"QUOTE_SOFT_EXPIRED\";\r\n    FromBTCLNSwapState[FromBTCLNSwapState[\"EXPIRED\"] = -1] = \"EXPIRED\";\r\n    FromBTCLNSwapState[FromBTCLNSwapState[\"PR_CREATED\"] = 0] = \"PR_CREATED\";\r\n    FromBTCLNSwapState[FromBTCLNSwapState[\"PR_PAID\"] = 1] = \"PR_PAID\";\r\n    FromBTCLNSwapState[FromBTCLNSwapState[\"CLAIM_COMMITED\"] = 2] = \"CLAIM_COMMITED\";\r\n    FromBTCLNSwapState[FromBTCLNSwapState[\"CLAIM_CLAIMED\"] = 3] = \"CLAIM_CLAIMED\";\r\n})(FromBTCLNSwapState = exports.FromBTCLNSwapState || (exports.FromBTCLNSwapState = {}));\r\nfunction isFromBTCLNSwapInit(obj) {\r\n    return typeof obj.pr === \"string\" &&\r\n        typeof obj.secret === \"string\" &&\r\n        (obj.lnurl == null || typeof (obj.lnurl) === \"string\") &&\r\n        (obj.lnurlK1 == null || typeof (obj.lnurlK1) === \"string\") &&\r\n        (obj.lnurlCallback == null || typeof (obj.lnurlCallback) === \"string\") &&\r\n        (0, IEscrowSwap_1.isIEscrowSwapInit)(obj);\r\n}\r\nexports.isFromBTCLNSwapInit = isFromBTCLNSwapInit;\r\nclass FromBTCLNSwap extends IFromBTCSwap_1.IFromBTCSwap {\r\n    getSwapData() {\r\n        return this.data ?? this.initialSwapData;\r\n    }\r\n    constructor(wrapper, initOrObject) {\r\n        if (isFromBTCLNSwapInit(initOrObject))\r\n            initOrObject.url += \"/frombtcln\";\r\n        super(wrapper, initOrObject);\r\n        this.inputToken = Tokens_1.BitcoinTokens.BTCLN;\r\n        this.TYPE = SwapType_1.SwapType.FROM_BTCLN;\r\n        this.lnurlFailSignal = new AbortController();\r\n        this.prPosted = false;\r\n        if (isFromBTCLNSwapInit(initOrObject)) {\r\n            this.state = FromBTCLNSwapState.PR_CREATED;\r\n        }\r\n        else {\r\n            this.pr = initOrObject.pr;\r\n            this.secret = initOrObject.secret;\r\n            this.initialSwapData = initOrObject.initialSwapData == null ? null : base_1.SwapData.deserialize(initOrObject.initialSwapData);\r\n            this.lnurl = initOrObject.lnurl;\r\n            this.lnurlK1 = initOrObject.lnurlK1;\r\n            this.lnurlCallback = initOrObject.lnurlCallback;\r\n            this.prPosted = initOrObject.prPosted;\r\n            if (this.state === FromBTCLNSwapState.PR_CREATED && this.data != null) {\r\n                this.initialSwapData = this.data;\r\n                delete this.data;\r\n            }\r\n        }\r\n        this.tryRecomputeSwapPrice();\r\n        this.logger = (0, Utils_1.getLogger)(\"FromBTCLN(\" + this.getIdentifierHashString() + \"): \");\r\n    }\r\n    upgradeVersion() {\r\n        if (this.version == null) {\r\n            switch (this.state) {\r\n                case -2:\r\n                    this.state = FromBTCLNSwapState.QUOTE_EXPIRED;\r\n                    break;\r\n                case -1:\r\n                    this.state = FromBTCLNSwapState.FAILED;\r\n                    break;\r\n                case 0:\r\n                    this.state = FromBTCLNSwapState.PR_CREATED;\r\n                    break;\r\n                case 1:\r\n                    this.state = FromBTCLNSwapState.PR_PAID;\r\n                    break;\r\n                case 2:\r\n                    this.state = FromBTCLNSwapState.CLAIM_COMMITED;\r\n                    break;\r\n                case 3:\r\n                    this.state = FromBTCLNSwapState.CLAIM_CLAIMED;\r\n                    break;\r\n            }\r\n            this.version = 1;\r\n        }\r\n    }\r\n    //////////////////////////////\r\n    //// Getters & utils\r\n    getIdentifierHash() {\r\n        const paymentHashBuffer = this.getPaymentHash();\r\n        if (this.randomNonce == null)\r\n            return paymentHashBuffer;\r\n        return buffer_1.Buffer.concat([paymentHashBuffer, buffer_1.Buffer.from(this.randomNonce, \"hex\")]);\r\n    }\r\n    getPaymentHash() {\r\n        if (this.pr == null)\r\n            return null;\r\n        const decodedPR = (0, bolt11_1.decode)(this.pr);\r\n        return buffer_1.Buffer.from(decodedPR.tagsObject.payment_hash, \"hex\");\r\n    }\r\n    canCommit() {\r\n        return this.state === FromBTCLNSwapState.PR_PAID;\r\n    }\r\n    getInputTxId() {\r\n        return this.getPaymentHash().toString(\"hex\");\r\n    }\r\n    /**\r\n     * Returns the lightning network BOLT11 invoice that needs to be paid as an input to the swap\r\n     */\r\n    getAddress() {\r\n        return this.pr;\r\n    }\r\n    getHyperlink() {\r\n        return \"lightning:\" + this.pr.toUpperCase();\r\n    }\r\n    /**\r\n     * Returns timeout time (in UNIX milliseconds) when the LN invoice will expire\r\n     */\r\n    getTimeoutTime() {\r\n        if (this.pr == null)\r\n            return null;\r\n        const decoded = (0, bolt11_1.decode)(this.pr);\r\n        return (decoded.timeExpireDate * 1000);\r\n    }\r\n    /**\r\n     * Returns timeout time (in UNIX milliseconds) when the swap htlc will expire\r\n     */\r\n    getHtlcTimeoutTime() {\r\n        return Number(this.wrapper.getHtlcTimeout(this.data)) * 1000;\r\n    }\r\n    isFinished() {\r\n        return this.state === FromBTCLNSwapState.CLAIM_CLAIMED || this.state === FromBTCLNSwapState.QUOTE_EXPIRED || this.state === FromBTCLNSwapState.FAILED;\r\n    }\r\n    isClaimable() {\r\n        return this.state === FromBTCLNSwapState.PR_PAID || this.state === FromBTCLNSwapState.CLAIM_COMMITED;\r\n    }\r\n    isSuccessful() {\r\n        return this.state === FromBTCLNSwapState.CLAIM_CLAIMED;\r\n    }\r\n    isFailed() {\r\n        return this.state === FromBTCLNSwapState.FAILED || this.state === FromBTCLNSwapState.EXPIRED;\r\n    }\r\n    isQuoteExpired() {\r\n        return this.state === FromBTCLNSwapState.QUOTE_EXPIRED;\r\n    }\r\n    isQuoteSoftExpired() {\r\n        return this.state === FromBTCLNSwapState.QUOTE_EXPIRED || this.state === FromBTCLNSwapState.QUOTE_SOFT_EXPIRED;\r\n    }\r\n    verifyQuoteValid() {\r\n        if (this.state === FromBTCLNSwapState.PR_CREATED ||\r\n            (this.state === FromBTCLNSwapState.QUOTE_SOFT_EXPIRED && this.signatureData == null)) {\r\n            return Promise.resolve(this.getTimeoutTime() > Date.now());\r\n        }\r\n        return super.verifyQuoteValid();\r\n    }\r\n    //////////////////////////////\r\n    //// Amounts & fees\r\n    getInput() {\r\n        const parsed = (0, bolt11_1.decode)(this.pr);\r\n        const amount = (BigInt(parsed.millisatoshis) + 999n) / 1000n;\r\n        return (0, Tokens_1.toTokenAmount)(amount, this.inputToken, this.wrapper.prices);\r\n    }\r\n    async getSmartChainNetworkFee() {\r\n        return (0, Tokens_1.toTokenAmount)(await this.getCommitAndClaimFee(), this.wrapper.getNativeToken(), this.wrapper.prices);\r\n    }\r\n    async hasEnoughForTxFees() {\r\n        const [balance, feeRate] = await Promise.all([\r\n            this.wrapper.contract.getBalance(this._getInitiator(), this.wrapper.chain.getNativeCurrencyAddress(), false),\r\n            this.feeRate != null ? Promise.resolve(this.feeRate) : this.wrapper.contract.getInitFeeRate(this.getSwapData().getOfferer(), this.getSwapData().getClaimer(), this.getSwapData().getToken(), this.getSwapData().getClaimHash())\r\n        ]);\r\n        const commitFee = await this.wrapper.contract.getCommitFee(this.getSwapData(), feeRate);\r\n        const claimFee = await this.wrapper.contract.getClaimFee(this._getInitiator(), this.getSwapData(), feeRate);\r\n        const totalFee = commitFee + claimFee + this.getSwapData().getTotalDeposit();\r\n        return {\r\n            enoughBalance: balance >= totalFee,\r\n            balance: (0, Tokens_1.toTokenAmount)(balance, this.wrapper.getNativeToken(), this.wrapper.prices),\r\n            required: (0, Tokens_1.toTokenAmount)(totalFee, this.wrapper.getNativeToken(), this.wrapper.prices)\r\n        };\r\n    }\r\n    //////////////////////////////\r\n    //// Payment\r\n    /**\r\n     * Checks whether the LP received the LN payment and we can continue by committing & claiming the HTLC on-chain\r\n     *\r\n     * @param save If the new swap state should be saved\r\n     */\r\n    async checkIntermediaryPaymentReceived(save = true) {\r\n        if (this.state === FromBTCLNSwapState.PR_PAID ||\r\n            this.state === FromBTCLNSwapState.CLAIM_COMMITED ||\r\n            this.state === FromBTCLNSwapState.CLAIM_CLAIMED ||\r\n            this.state === FromBTCLNSwapState.FAILED)\r\n            return true;\r\n        if (this.state === FromBTCLNSwapState.QUOTE_EXPIRED || (this.state === FromBTCLNSwapState.QUOTE_SOFT_EXPIRED && this.signatureData != null))\r\n            return false;\r\n        const resp = await IntermediaryAPI_1.IntermediaryAPI.getPaymentAuthorization(this.url, this.getPaymentHash().toString(\"hex\"));\r\n        switch (resp.code) {\r\n            case IntermediaryAPI_1.PaymentAuthorizationResponseCodes.AUTH_DATA:\r\n                const data = new this.wrapper.swapDataDeserializer(resp.data.data);\r\n                try {\r\n                    await this.checkIntermediaryReturnedAuthData(this._getInitiator(), data, resp.data);\r\n                    this.expiry = await (0, Utils_1.tryWithRetries)(() => this.wrapper.contract.getInitAuthorizationExpiry(data, resp.data));\r\n                    this.state = FromBTCLNSwapState.PR_PAID;\r\n                    delete this.initialSwapData;\r\n                    this.data = data;\r\n                    this.signatureData = {\r\n                        prefix: resp.data.prefix,\r\n                        timeout: resp.data.timeout,\r\n                        signature: resp.data.signature\r\n                    };\r\n                    this.initiated = true;\r\n                    if (save)\r\n                        await this._saveAndEmit();\r\n                    return true;\r\n                }\r\n                catch (e) { }\r\n                return null;\r\n            case IntermediaryAPI_1.PaymentAuthorizationResponseCodes.EXPIRED:\r\n                this.state = FromBTCLNSwapState.QUOTE_EXPIRED;\r\n                this.initiated = true;\r\n                if (save)\r\n                    await this._saveAndEmit();\r\n                return false;\r\n            default:\r\n                return null;\r\n        }\r\n    }\r\n    /**\r\n     * Checks the data returned by the intermediary in the payment auth request\r\n     *\r\n     * @param signer Smart chain signer's address initiating the swap\r\n     * @param data Parsed swap data as returned by the intermediary\r\n     * @param signature Signature data as returned by the intermediary\r\n     * @protected\r\n     * @throws {IntermediaryError} If the returned are not valid\r\n     * @throws {SignatureVerificationError} If the returned signature is not valid\r\n     * @throws {Error} If the swap is already committed on-chain\r\n     */\r\n    async checkIntermediaryReturnedAuthData(signer, data, signature) {\r\n        data.setClaimer(signer);\r\n        if (data.getOfferer() !== this.getSwapData().getOfferer())\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid offerer used\");\r\n        if (!data.isToken(this.getSwapData().getToken()))\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid token used\");\r\n        if (data.getSecurityDeposit() > this.getSwapData().getSecurityDeposit())\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid security deposit!\");\r\n        if (data.getAmount() < this.getSwapData().getAmount())\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid amount received!\");\r\n        if (data.getClaimHash() !== this.getSwapData().getClaimHash())\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid payment hash used!\");\r\n        if (!data.isDepositToken(this.getSwapData().getDepositToken()))\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid deposit token used!\");\r\n        await Promise.all([\r\n            (0, Utils_1.tryWithRetries)(() => this.wrapper.contract.isValidInitAuthorization(this._getInitiator(), data, signature, this.feeRate), null, base_1.SignatureVerificationError),\r\n            (0, Utils_1.tryWithRetries)(() => this.wrapper.contract.getCommitStatus(data.getClaimer(), data)).then(status => {\r\n                if (status?.type !== base_1.SwapCommitStateType.NOT_COMMITED)\r\n                    throw new Error(\"Swap already committed on-chain!\");\r\n            })\r\n        ]);\r\n    }\r\n    /**\r\n     * Waits till an LN payment is received by the intermediary and client can continue commiting & claiming the HTLC\r\n     *\r\n     * @param abortSignal Abort signal to stop waiting for payment\r\n     * @param checkIntervalSeconds How often to poll the intermediary for answer\r\n     */\r\n    async waitForPayment(abortSignal, checkIntervalSeconds = 5) {\r\n        if (this.state !== FromBTCLNSwapState.PR_CREATED &&\r\n            (this.state !== FromBTCLNSwapState.QUOTE_SOFT_EXPIRED || this.signatureData != null))\r\n            throw new Error(\"Must be in PR_CREATED state!\");\r\n        const abortController = new AbortController();\r\n        if (abortSignal != null)\r\n            abortSignal.addEventListener(\"abort\", () => abortController.abort(abortSignal.reason));\r\n        let save = false;\r\n        if (this.lnurl != null && !this.prPosted) {\r\n            LNURL_1.LNURL.postInvoiceToLNURLWithdraw({ k1: this.lnurlK1, callback: this.lnurlCallback }, this.pr).catch(e => {\r\n                this.lnurlFailSignal.abort(e);\r\n            });\r\n            this.prPosted = true;\r\n            save ||= true;\r\n        }\r\n        if (!this.initiated) {\r\n            this.initiated = true;\r\n            save ||= true;\r\n        }\r\n        if (save)\r\n            await this._saveAndEmit();\r\n        let lnurlFailListener = () => abortController.abort(this.lnurlFailSignal.signal.reason);\r\n        this.lnurlFailSignal.signal.addEventListener(\"abort\", lnurlFailListener);\r\n        this.lnurlFailSignal.signal.throwIfAborted();\r\n        let resp = { code: IntermediaryAPI_1.PaymentAuthorizationResponseCodes.PENDING, msg: \"\" };\r\n        while (!abortController.signal.aborted && resp.code === IntermediaryAPI_1.PaymentAuthorizationResponseCodes.PENDING) {\r\n            resp = await IntermediaryAPI_1.IntermediaryAPI.getPaymentAuthorization(this.url, this.getPaymentHash().toString(\"hex\"));\r\n            if (resp.code === IntermediaryAPI_1.PaymentAuthorizationResponseCodes.PENDING)\r\n                await (0, Utils_1.timeoutPromise)(checkIntervalSeconds * 1000, abortController.signal);\r\n        }\r\n        this.lnurlFailSignal.signal.removeEventListener(\"abort\", lnurlFailListener);\r\n        abortController.signal.throwIfAborted();\r\n        if (resp.code === IntermediaryAPI_1.PaymentAuthorizationResponseCodes.AUTH_DATA) {\r\n            const sigData = resp.data;\r\n            const swapData = new this.wrapper.swapDataDeserializer(resp.data.data);\r\n            await this.checkIntermediaryReturnedAuthData(this._getInitiator(), swapData, sigData);\r\n            this.expiry = await (0, Utils_1.tryWithRetries)(() => this.wrapper.contract.getInitAuthorizationExpiry(swapData, sigData));\r\n            if (this.state === FromBTCLNSwapState.PR_CREATED || this.state === FromBTCLNSwapState.QUOTE_SOFT_EXPIRED) {\r\n                delete this.initialSwapData;\r\n                this.data = swapData;\r\n                this.signatureData = {\r\n                    prefix: sigData.prefix,\r\n                    timeout: sigData.timeout,\r\n                    signature: sigData.signature\r\n                };\r\n                await this._saveAndEmit(FromBTCLNSwapState.PR_PAID);\r\n            }\r\n            return true;\r\n        }\r\n        if (this.state === FromBTCLNSwapState.PR_CREATED || this.state === FromBTCLNSwapState.QUOTE_SOFT_EXPIRED) {\r\n            if (resp.code === IntermediaryAPI_1.PaymentAuthorizationResponseCodes.EXPIRED) {\r\n                await this._saveAndEmit(FromBTCLNSwapState.QUOTE_EXPIRED);\r\n            }\r\n            return false;\r\n        }\r\n    }\r\n    //////////////////////////////\r\n    //// Commit\r\n    /**\r\n     * Commits the swap on-chain, locking the tokens from the intermediary in an HTLC\r\n     *\r\n     * @param signer Signer to sign the transactions with, must be the same as used in the initialization\r\n     * @param abortSignal Abort signal to stop waiting for the transaction confirmation and abort\r\n     * @param skipChecks Skip checks like making sure init signature is still valid and swap wasn't commited yet\r\n     *  (this is handled when swap is created (quoted), if you commit right after quoting, you can use skipChecks=true)\r\n     * @throws {Error} If invalid signer is provided that doesn't match the swap data\r\n     */\r\n    async commit(signer, abortSignal, skipChecks) {\r\n        this.checkSigner(signer);\r\n        const result = await this.wrapper.chain.sendAndConfirm(signer, await this.txsCommit(skipChecks), true, abortSignal);\r\n        this.commitTxId = result[0];\r\n        if (this.state === FromBTCLNSwapState.PR_PAID || this.state === FromBTCLNSwapState.QUOTE_SOFT_EXPIRED) {\r\n            await this._saveAndEmit(FromBTCLNSwapState.CLAIM_COMMITED);\r\n        }\r\n        return result[0];\r\n    }\r\n    async waitTillCommited(abortSignal) {\r\n        if (this.state === FromBTCLNSwapState.CLAIM_COMMITED || this.state === FromBTCLNSwapState.CLAIM_CLAIMED)\r\n            return Promise.resolve();\r\n        if (this.state !== FromBTCLNSwapState.PR_PAID && (this.state !== FromBTCLNSwapState.QUOTE_SOFT_EXPIRED && this.signatureData != null))\r\n            throw new Error(\"Invalid state\");\r\n        const abortController = (0, Utils_1.extendAbortController)(abortSignal);\r\n        const result = await Promise.race([\r\n            this.watchdogWaitTillCommited(abortController.signal),\r\n            this.waitTillState(FromBTCLNSwapState.CLAIM_COMMITED, \"gte\", abortController.signal).then(() => 0)\r\n        ]);\r\n        abortController.abort();\r\n        if (result === 0)\r\n            this.logger.debug(\"waitTillCommited(): Resolved from state changed\");\r\n        if (result === true)\r\n            this.logger.debug(\"waitTillCommited(): Resolved from watchdog - commited\");\r\n        if (result === false) {\r\n            this.logger.debug(\"waitTillCommited(): Resolved from watchdog - signature expired\");\r\n            if (this.state === FromBTCLNSwapState.PR_PAID ||\r\n                this.state === FromBTCLNSwapState.QUOTE_SOFT_EXPIRED) {\r\n                await this._saveAndEmit(FromBTCLNSwapState.QUOTE_EXPIRED);\r\n            }\r\n            return;\r\n        }\r\n        if (this.state === FromBTCLNSwapState.PR_PAID ||\r\n            this.state === FromBTCLNSwapState.QUOTE_SOFT_EXPIRED) {\r\n            await this._saveAndEmit(FromBTCLNSwapState.CLAIM_COMMITED);\r\n        }\r\n    }\r\n    //////////////////////////////\r\n    //// Claim\r\n    /**\r\n     * Returns transactions required for claiming the HTLC and finishing the swap by revealing the HTLC secret\r\n     *  (hash preimage)\r\n     *\r\n     * @param signer Optional signer address to use for claiming the swap, can also be different from the initializer\r\n     * @throws {Error} If in invalid state (must be CLAIM_COMMITED)\r\n     */\r\n    txsClaim(signer) {\r\n        if (this.state !== FromBTCLNSwapState.CLAIM_COMMITED)\r\n            throw new Error(\"Must be in CLAIM_COMMITED state!\");\r\n        return this.wrapper.contract.txsClaimWithSecret(signer ?? this._getInitiator(), this.data, this.secret, true, true);\r\n    }\r\n    /**\r\n     * Claims and finishes the swap\r\n     *\r\n     * @param signer Signer to sign the transactions with, can also be different to the initializer\r\n     * @param abortSignal Abort signal to stop waiting for transaction confirmation\r\n     */\r\n    async claim(signer, abortSignal) {\r\n        const result = await this.wrapper.chain.sendAndConfirm(signer, await this.txsClaim(), true, abortSignal);\r\n        this.claimTxId = result[0];\r\n        if (FromBTCLNSwapState.CLAIM_COMMITED || FromBTCLNSwapState.EXPIRED || FromBTCLNSwapState.FAILED) {\r\n            await this._saveAndEmit(FromBTCLNSwapState.CLAIM_CLAIMED);\r\n        }\r\n        return result[0];\r\n    }\r\n    /**\r\n     * Waits till the swap is successfully claimed\r\n     *\r\n     * @param abortSignal AbortSignal\r\n     * @throws {Error} If swap is in invalid state (must be BTC_TX_CONFIRMED)\r\n     * @throws {Error} If the LP refunded sooner than we were able to claim\r\n     */\r\n    async waitTillClaimed(abortSignal) {\r\n        if (this.state === FromBTCLNSwapState.CLAIM_CLAIMED)\r\n            return Promise.resolve();\r\n        if (this.state !== FromBTCLNSwapState.CLAIM_COMMITED)\r\n            throw new Error(\"Invalid state (not CLAIM_COMMITED)\");\r\n        const abortController = new AbortController();\r\n        if (abortSignal != null)\r\n            abortSignal.addEventListener(\"abort\", () => abortController.abort(abortSignal.reason));\r\n        const res = await Promise.race([\r\n            this.watchdogWaitTillResult(abortController.signal),\r\n            this.waitTillState(FromBTCLNSwapState.CLAIM_CLAIMED, \"eq\", abortController.signal).then(() => 0),\r\n            this.waitTillState(FromBTCLNSwapState.EXPIRED, \"eq\", abortController.signal).then(() => 1),\r\n        ]);\r\n        abortController.abort();\r\n        if (res === 0) {\r\n            this.logger.debug(\"waitTillClaimed(): Resolved from state change (CLAIM_CLAIMED)\");\r\n            return;\r\n        }\r\n        if (res === 1) {\r\n            this.logger.debug(\"waitTillClaimed(): Resolved from state change (EXPIRED)\");\r\n            throw new Error(\"Swap expired during claiming\");\r\n        }\r\n        this.logger.debug(\"waitTillClaimed(): Resolved from watchdog\");\r\n        if (res?.type === base_1.SwapCommitStateType.PAID) {\r\n            if (this.state !== FromBTCLNSwapState.CLAIM_CLAIMED) {\r\n                this.claimTxId = await res.getClaimTxId();\r\n                await this._saveAndEmit(FromBTCLNSwapState.CLAIM_CLAIMED);\r\n            }\r\n        }\r\n        if (res?.type === base_1.SwapCommitStateType.NOT_COMMITED || res?.type === base_1.SwapCommitStateType.EXPIRED) {\r\n            if (this.state !== FromBTCLNSwapState.CLAIM_CLAIMED &&\r\n                this.state !== FromBTCLNSwapState.FAILED) {\r\n                this.refundTxId = res.getRefundTxId == null ? null : await res.getRefundTxId();\r\n                await this._saveAndEmit(FromBTCLNSwapState.FAILED);\r\n            }\r\n        }\r\n    }\r\n    //////////////////////////////\r\n    //// Commit & claim\r\n    /**\r\n     * Estimated transaction fee for commit & claim txs combined\r\n     */\r\n    async getCommitAndClaimFee() {\r\n        const swapContract = this.wrapper.contract;\r\n        const feeRate = this.feeRate ?? await swapContract.getInitFeeRate(this.getSwapData().getOfferer(), this.getSwapData().getClaimer(), this.getSwapData().getToken(), this.getSwapData().getClaimHash());\r\n        const commitFee = await (swapContract.getRawCommitFee != null ?\r\n            swapContract.getRawCommitFee(this.getSwapData(), feeRate) :\r\n            swapContract.getCommitFee(this.getSwapData(), feeRate));\r\n        const claimFee = await (swapContract.getRawClaimFee != null ?\r\n            swapContract.getRawClaimFee(this._getInitiator(), this.getSwapData(), feeRate) :\r\n            swapContract.getClaimFee(this._getInitiator(), this.getSwapData(), feeRate));\r\n        return commitFee + claimFee;\r\n    }\r\n    canCommitAndClaimInOneShot() {\r\n        return this.wrapper.contract.initAndClaimWithSecret != null;\r\n    }\r\n    /**\r\n     * Returns transactions for both commit & claim operation together, such that they can be signed all at once by\r\n     *  the wallet. CAUTION: transactions must be sent sequentially, such that the claim (2nd) transaction is only\r\n     *  sent after the commit (1st) transaction confirms. Failure to do so can reveal the HTLC pre-image too soon,\r\n     *  opening a possibility for the LP to steal funds.\r\n     *\r\n     * @param skipChecks Skip checks like making sure init signature is still valid and swap wasn't commited yet\r\n     *  (this is handled when swap is created (quoted), if you commit right after quoting, you can use skipChecks=true)\r\n     *\r\n     * @throws {Error} If in invalid state (must be PR_PAID or CLAIM_COMMITED)\r\n     */\r\n    async txsCommitAndClaim(skipChecks) {\r\n        if (this.state === FromBTCLNSwapState.CLAIM_COMMITED)\r\n            return await this.txsClaim();\r\n        if (this.state !== FromBTCLNSwapState.PR_PAID && (this.state !== FromBTCLNSwapState.QUOTE_SOFT_EXPIRED || this.signatureData == null))\r\n            throw new Error(\"Must be in PR_PAID state!\");\r\n        const initTxs = await this.txsCommit(skipChecks);\r\n        const claimTxs = await this.wrapper.contract.txsClaimWithSecret(this._getInitiator(), this.data, this.secret, true, true, null, true);\r\n        return initTxs.concat(claimTxs);\r\n    }\r\n    /**\r\n     * Commits and claims the swap, in a way that the transactions can be signed together by the underlying provider and\r\n     *  then sent sequentially\r\n     *\r\n     * @param signer Signer to sign the transactions with, must be the same as used in the initialization\r\n     * @param abortSignal Abort signal to stop waiting for the transaction confirmation and abort\r\n     * @param skipChecks Skip checks like making sure init signature is still valid and swap wasn't commited yet\r\n     *  (this is handled when swap is created (quoted), if you commit right after quoting, you can use skipChecks=true)\r\n     * @throws {Error} If in invalid state (must be PR_PAID or CLAIM_COMMITED)\r\n     * @throws {Error} If invalid signer is provided that doesn't match the swap data\r\n     */\r\n    async commitAndClaim(signer, abortSignal, skipChecks) {\r\n        if (!this.canCommitAndClaimInOneShot())\r\n            throw new Error(\"Cannot commitAndClaim in single action, please run commit and claim separately!\");\r\n        this.checkSigner(signer);\r\n        if (this.state === FromBTCLNSwapState.CLAIM_COMMITED)\r\n            return [null, await this.claim(signer)];\r\n        const result = await this.wrapper.chain.sendAndConfirm(signer, await this.txsCommitAndClaim(skipChecks), true, abortSignal);\r\n        this.commitTxId = result[0] || this.commitTxId;\r\n        this.claimTxId = result[result.length - 1] || this.claimTxId;\r\n        if (this.state !== FromBTCLNSwapState.CLAIM_CLAIMED) {\r\n            await this._saveAndEmit(FromBTCLNSwapState.CLAIM_CLAIMED);\r\n        }\r\n        return result;\r\n    }\r\n    //////////////////////////////\r\n    //// LNURL\r\n    /**\r\n     * Is this an LNURL-withdraw swap?\r\n     */\r\n    isLNURL() {\r\n        return this.lnurl != null;\r\n    }\r\n    /**\r\n     * Gets the used LNURL or null if this is not an LNURL-withdraw swap\r\n     */\r\n    getLNURL() {\r\n        return this.lnurl;\r\n    }\r\n    /**\r\n     * Pay the generated lightning network invoice with LNURL-withdraw\r\n     */\r\n    async settleWithLNURLWithdraw(lnurl) {\r\n        if (this.lnurl != null)\r\n            throw new Error(\"Cannot settle LNURL-withdraw swap with different LNURL\");\r\n        let lnurlParams;\r\n        if (typeof (lnurl) === \"string\") {\r\n            const parsedLNURL = await LNURL_1.LNURL.getLNURL(lnurl);\r\n            if (parsedLNURL == null || parsedLNURL.tag !== \"withdrawRequest\")\r\n                throw new UserError_1.UserError(\"Invalid LNURL-withdraw to settle the swap\");\r\n            lnurlParams = parsedLNURL;\r\n        }\r\n        else {\r\n            lnurlParams = lnurl.params;\r\n        }\r\n        LNURL_1.LNURL.useLNURLWithdraw(lnurlParams, this.pr).catch(e => this.lnurlFailSignal.abort(e));\r\n        this.lnurl = lnurlParams.url;\r\n        this.lnurlCallback = lnurlParams.callback;\r\n        this.lnurlK1 = lnurlParams.k1;\r\n        this.prPosted = true;\r\n        await this._saveAndEmit();\r\n    }\r\n    //////////////////////////////\r\n    //// Storage\r\n    serialize() {\r\n        return {\r\n            ...super.serialize(),\r\n            pr: this.pr,\r\n            secret: this.secret,\r\n            lnurl: this.lnurl,\r\n            lnurlK1: this.lnurlK1,\r\n            lnurlCallback: this.lnurlCallback,\r\n            prPosted: this.prPosted,\r\n            initialSwapData: this.initialSwapData == null ? null : this.initialSwapData.serialize()\r\n        };\r\n    }\r\n    //////////////////////////////\r\n    //// Swap ticks & sync\r\n    /**\r\n     * Checks the swap's state on-chain and compares it to its internal state, updates/changes it according to on-chain\r\n     *  data\r\n     *\r\n     * @private\r\n     */\r\n    async syncStateFromChain() {\r\n        //Check for expiry before the getCommitStatus to prevent race conditions\r\n        let quoteExpired = false;\r\n        if (this.state === FromBTCLNSwapState.PR_PAID || (this.state === FromBTCLNSwapState.QUOTE_SOFT_EXPIRED && this.signatureData != null)) {\r\n            quoteExpired = await this.verifyQuoteDefinitelyExpired();\r\n        }\r\n        if (this.state === FromBTCLNSwapState.CLAIM_COMMITED || this.state === FromBTCLNSwapState.EXPIRED) {\r\n            //Check if it's already successfully paid\r\n            const commitStatus = await (0, Utils_1.tryWithRetries)(() => this.wrapper.contract.getCommitStatus(this._getInitiator(), this.data));\r\n            if (commitStatus?.type === base_1.SwapCommitStateType.PAID) {\r\n                if (this.claimTxId == null)\r\n                    this.claimTxId = await commitStatus.getClaimTxId();\r\n                this.state = FromBTCLNSwapState.CLAIM_CLAIMED;\r\n                return true;\r\n            }\r\n            if (commitStatus?.type === base_1.SwapCommitStateType.NOT_COMMITED || commitStatus?.type === base_1.SwapCommitStateType.EXPIRED) {\r\n                if (this.refundTxId == null && commitStatus.getRefundTxId)\r\n                    this.refundTxId = await commitStatus.getRefundTxId();\r\n                this.state = FromBTCLNSwapState.FAILED;\r\n                return true;\r\n            }\r\n        }\r\n        if (this.state === FromBTCLNSwapState.PR_PAID || (this.state === FromBTCLNSwapState.QUOTE_SOFT_EXPIRED && this.signatureData != null)) {\r\n            //Check if it's already committed\r\n            const status = await (0, Utils_1.tryWithRetries)(() => this.wrapper.contract.getCommitStatus(this._getInitiator(), this.data));\r\n            switch (status?.type) {\r\n                case base_1.SwapCommitStateType.COMMITED:\r\n                    this.state = FromBTCLNSwapState.CLAIM_COMMITED;\r\n                    return true;\r\n                case base_1.SwapCommitStateType.EXPIRED:\r\n                    if (this.refundTxId == null && status.getRefundTxId)\r\n                        this.refundTxId = await status.getRefundTxId();\r\n                    this.state = FromBTCLNSwapState.QUOTE_EXPIRED;\r\n                    return true;\r\n                case base_1.SwapCommitStateType.PAID:\r\n                    if (this.claimTxId == null)\r\n                        this.claimTxId = await status.getClaimTxId();\r\n                    this.state = FromBTCLNSwapState.CLAIM_CLAIMED;\r\n                    return true;\r\n            }\r\n        }\r\n        //Set the state on expiry here\r\n        if (this.state === FromBTCLNSwapState.PR_PAID || (this.state === FromBTCLNSwapState.QUOTE_SOFT_EXPIRED && this.signatureData != null)) {\r\n            if (quoteExpired) {\r\n                this.state = FromBTCLNSwapState.QUOTE_EXPIRED;\r\n                return true;\r\n            }\r\n        }\r\n    }\r\n    async _sync(save) {\r\n        let changed = false;\r\n        if (this.state === FromBTCLNSwapState.PR_CREATED || (this.state === FromBTCLNSwapState.QUOTE_SOFT_EXPIRED && this.signatureData == null)) {\r\n            if (this.getTimeoutTime() < Date.now()) {\r\n                this.state = FromBTCLNSwapState.QUOTE_SOFT_EXPIRED;\r\n                changed ||= true;\r\n            }\r\n            const result = await this.checkIntermediaryPaymentReceived(false);\r\n            if (result !== null)\r\n                changed ||= true;\r\n        }\r\n        if (await this.syncStateFromChain())\r\n            changed = true;\r\n        if (save && changed)\r\n            await this._saveAndEmit();\r\n        return changed;\r\n    }\r\n    async _tick(save) {\r\n        switch (this.state) {\r\n            case FromBTCLNSwapState.PR_CREATED:\r\n                if (this.getTimeoutTime() < Date.now()) {\r\n                    this.state = FromBTCLNSwapState.QUOTE_SOFT_EXPIRED;\r\n                    if (save)\r\n                        await this._saveAndEmit();\r\n                    return true;\r\n                }\r\n                break;\r\n            case FromBTCLNSwapState.PR_PAID:\r\n                if (this.expiry < Date.now()) {\r\n                    this.state = FromBTCLNSwapState.QUOTE_SOFT_EXPIRED;\r\n                    if (save)\r\n                        await this._saveAndEmit();\r\n                    return true;\r\n                }\r\n                break;\r\n            case FromBTCLNSwapState.CLAIM_COMMITED:\r\n                const expired = await this.wrapper.contract.isExpired(this._getInitiator(), this.data);\r\n                if (expired) {\r\n                    this.state = FromBTCLNSwapState.EXPIRED;\r\n                    if (save)\r\n                        await this._saveAndEmit();\r\n                    return true;\r\n                }\r\n                break;\r\n        }\r\n    }\r\n}\r\nexports.FromBTCLNSwap = FromBTCLNSwap;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IFromBTCWrapper = void 0;\r\nconst IntermediaryError_1 = require(\"../../../errors/IntermediaryError\");\r\nconst Utils_1 = require(\"../../../utils/Utils\");\r\nconst base_1 = require(\"@atomiqlabs/base\");\r\nconst IEscrowSwapWrapper_1 = require(\"../IEscrowSwapWrapper\");\r\nclass IFromBTCWrapper extends IEscrowSwapWrapper_1.IEscrowSwapWrapper {\r\n    /**\r\n     * Returns a random sequence to be used for swaps\r\n     *\r\n     * @protected\r\n     * @returns Random 64-bit sequence number\r\n     */\r\n    getRandomSequence() {\r\n        return base_1.BigIntBufferUtils.fromBuffer((0, Utils_1.randomBytes)(8));\r\n    }\r\n    /**\r\n     * Pre-fetches feeRate for a given swap\r\n     *\r\n     * @param signer Address initiating the swap\r\n     * @param amountData\r\n     * @param claimHash optional claim hash of the swap or null\r\n     * @param abortController\r\n     * @protected\r\n     * @returns Fee rate\r\n     */\r\n    preFetchFeeRate(signer, amountData, claimHash, abortController) {\r\n        return (0, Utils_1.tryWithRetries)(() => this.contract.getInitFeeRate(null, signer, amountData.token, claimHash), null, null, abortController.signal).catch(e => {\r\n            this.logger.warn(\"preFetchFeeRate(): Error: \", e);\r\n            abortController.abort(e);\r\n            return null;\r\n        });\r\n    }\r\n    /**\r\n     * Pre-fetches intermediary's available SC on-chain liquidity\r\n     * @param amountData\r\n     * @param lp Intermediary\r\n     * @param abortController\r\n     * @protected\r\n     * @returns Intermediary's liquidity balance\r\n     */\r\n    preFetchIntermediaryLiquidity(amountData, lp, abortController) {\r\n        return lp.getLiquidity(this.chainIdentifier, this.contract, amountData.token.toString(), abortController.signal).catch(e => {\r\n            this.logger.warn(\"preFetchIntermediaryLiquidity(): Error: \", e);\r\n            abortController.abort(e);\r\n            return null;\r\n        });\r\n    }\r\n    /**\r\n     * Verifies whether the intermediary has enough available liquidity such that we can initiate the swap\r\n     *\r\n     * @param amount Swap amount that we should receive\r\n     * @param liquidityPromise pre-fetched liquidity promise as obtained from preFetchIntermediaryLiquidity()\r\n     * @protected\r\n     * @throws {IntermediaryError} if intermediary's liquidity is lower than what's required for the swap\r\n     */\r\n    async verifyIntermediaryLiquidity(amount, liquidityPromise) {\r\n        const liquidity = await liquidityPromise;\r\n        if (liquidity < amount)\r\n            throw new IntermediaryError_1.IntermediaryError(\"Intermediary doesn't have enough liquidity\");\r\n    }\r\n}\r\nexports.IFromBTCWrapper = IFromBTCWrapper;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FromBTCLNWrapper = void 0;\r\nconst FromBTCLNSwap_1 = require(\"./FromBTCLNSwap\");\r\nconst IFromBTCWrapper_1 = require(\"../IFromBTCWrapper\");\r\nconst bolt11_1 = require(\"@atomiqlabs/bolt11\");\r\nconst base_1 = require(\"@atomiqlabs/base\");\r\nconst buffer_1 = require(\"buffer\");\r\nconst UserError_1 = require(\"../../../../errors/UserError\");\r\nconst sha2_1 = require(\"@noble/hashes/sha2\");\r\nconst IntermediaryError_1 = require(\"../../../../errors/IntermediaryError\");\r\nconst SwapType_1 = require(\"../../../enums/SwapType\");\r\nconst Utils_1 = require(\"../../../../utils/Utils\");\r\nconst IntermediaryAPI_1 = require(\"../../../../intermediaries/IntermediaryAPI\");\r\nconst RequestError_1 = require(\"../../../../errors/RequestError\");\r\nconst LNURL_1 = require(\"../../../../utils/LNURL\");\r\nclass FromBTCLNWrapper extends IFromBTCWrapper_1.IFromBTCWrapper {\r\n    /**\r\n     * @param chainIdentifier\r\n     * @param unifiedStorage Storage interface for the current environment\r\n     * @param unifiedChainEvents On-chain event listener\r\n     * @param chain\r\n     * @param contract Underlying contract handling the swaps\r\n     * @param prices Swap pricing handler\r\n     * @param tokens\r\n     * @param swapDataDeserializer Deserializer for SwapData\r\n     * @param lnApi\r\n     * @param options\r\n     * @param events Instance to use for emitting events\r\n     */\r\n    constructor(chainIdentifier, unifiedStorage, unifiedChainEvents, chain, contract, prices, tokens, swapDataDeserializer, lnApi, options, events) {\r\n        super(chainIdentifier, unifiedStorage, unifiedChainEvents, chain, contract, prices, tokens, swapDataDeserializer, options, events);\r\n        this.TYPE = SwapType_1.SwapType.FROM_BTCLN;\r\n        this.swapDeserializer = FromBTCLNSwap_1.FromBTCLNSwap;\r\n        this.pendingSwapStates = [\r\n            FromBTCLNSwap_1.FromBTCLNSwapState.PR_CREATED,\r\n            FromBTCLNSwap_1.FromBTCLNSwapState.QUOTE_SOFT_EXPIRED,\r\n            FromBTCLNSwap_1.FromBTCLNSwapState.PR_PAID,\r\n            FromBTCLNSwap_1.FromBTCLNSwapState.CLAIM_COMMITED,\r\n            FromBTCLNSwap_1.FromBTCLNSwapState.EXPIRED\r\n        ];\r\n        this.tickSwapState = [\r\n            FromBTCLNSwap_1.FromBTCLNSwapState.PR_CREATED,\r\n            FromBTCLNSwap_1.FromBTCLNSwapState.PR_PAID,\r\n            FromBTCLNSwap_1.FromBTCLNSwapState.CLAIM_COMMITED\r\n        ];\r\n        this.lnApi = lnApi;\r\n    }\r\n    processEventInitialize(swap, event) {\r\n        if (swap.state === FromBTCLNSwap_1.FromBTCLNSwapState.PR_PAID || swap.state === FromBTCLNSwap_1.FromBTCLNSwapState.QUOTE_SOFT_EXPIRED) {\r\n            swap.state = FromBTCLNSwap_1.FromBTCLNSwapState.CLAIM_COMMITED;\r\n            return Promise.resolve(true);\r\n        }\r\n        return Promise.resolve(false);\r\n    }\r\n    processEventClaim(swap, event) {\r\n        if (swap.state !== FromBTCLNSwap_1.FromBTCLNSwapState.FAILED && swap.state !== FromBTCLNSwap_1.FromBTCLNSwapState.CLAIM_CLAIMED) {\r\n            swap.state = FromBTCLNSwap_1.FromBTCLNSwapState.CLAIM_CLAIMED;\r\n            return Promise.resolve(true);\r\n        }\r\n        return Promise.resolve(false);\r\n    }\r\n    processEventRefund(swap, event) {\r\n        if (swap.state !== FromBTCLNSwap_1.FromBTCLNSwapState.CLAIM_CLAIMED && swap.state !== FromBTCLNSwap_1.FromBTCLNSwapState.FAILED) {\r\n            swap.state = FromBTCLNSwap_1.FromBTCLNSwapState.FAILED;\r\n            return Promise.resolve(true);\r\n        }\r\n        return Promise.resolve(false);\r\n    }\r\n    /**\r\n     * Returns the swap expiry, leaving enough time for the user to claim the HTLC\r\n     *\r\n     * @param data Parsed swap data\r\n     */\r\n    getHtlcTimeout(data) {\r\n        return data.getExpiry() - 600n;\r\n    }\r\n    /**\r\n     * Generates a new 32-byte secret to be used as pre-image for lightning network invoice & HTLC swap\\\r\n     *\r\n     * @private\r\n     * @returns Hash pre-image & payment hash\r\n     */\r\n    getSecretAndHash() {\r\n        const secret = (0, Utils_1.randomBytes)(32);\r\n        const paymentHash = buffer_1.Buffer.from((0, sha2_1.sha256)(secret));\r\n        return { secret, paymentHash };\r\n    }\r\n    /**\r\n     * Pre-fetches intermediary's LN node capacity, doesn't throw, instead returns null\r\n     *\r\n     * @param pubkeyPromise Promise that resolves when we receive \"lnPublicKey\" param from the intermediary thorugh\r\n     *  streaming\r\n     * @private\r\n     * @returns LN Node liquidity\r\n     */\r\n    preFetchLnCapacity(pubkeyPromise) {\r\n        return pubkeyPromise.then(pubkey => {\r\n            if (pubkey == null)\r\n                return null;\r\n            return this.lnApi.getLNNodeLiquidity(pubkey);\r\n        }).catch(e => {\r\n            this.logger.warn(\"preFetchLnCapacity(): Error: \", e);\r\n            return null;\r\n        });\r\n    }\r\n    /**\r\n     * Verifies response returned from intermediary\r\n     *\r\n     * @param resp Response as returned by the intermediary\r\n     * @param amountData\r\n     * @param lp Intermediary\r\n     * @param options Options as passed to the swap creation function\r\n     * @param decodedPr Decoded bolt11 lightning network invoice\r\n     * @param amountIn Amount in sats that will be paid for the swap\r\n     * @private\r\n     * @throws {IntermediaryError} in case the response is invalid\r\n     */\r\n    verifyReturnedData(resp, amountData, lp, options, decodedPr, amountIn) {\r\n        if (lp.getAddress(this.chainIdentifier) !== resp.intermediaryKey)\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid intermediary address/pubkey\");\r\n        if (options.descriptionHash != null && decodedPr.tagsObject.purpose_commit_hash !== options.descriptionHash.toString(\"hex\"))\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid pr returned - description hash\");\r\n        if (!amountData.exactIn) {\r\n            if (resp.total != amountData.amount)\r\n                throw new IntermediaryError_1.IntermediaryError(\"Invalid amount returned\");\r\n        }\r\n        else {\r\n            if (amountIn !== amountData.amount)\r\n                throw new IntermediaryError_1.IntermediaryError(\"Invalid payment request returned, amount mismatch\");\r\n        }\r\n    }\r\n    /**\r\n     * Verifies whether the intermediary's lightning node has enough inbound capacity to receive the LN payment\r\n     *\r\n     * @param lp Intermediary\r\n     * @param decodedPr Decoded bolt11 lightning network invoice\r\n     * @param amountIn Amount to be paid for the swap in sats\r\n     * @param lnCapacityPrefetchPromise Pre-fetch for LN node capacity, preFetchLnCapacity()\r\n     * @param abortSignal\r\n     * @private\r\n     * @throws {IntermediaryError} if the lightning network node doesn't have enough inbound liquidity\r\n     * @throws {Error} if the lightning network node's inbound liquidity might be enough, but the swap would\r\n     *  deplete more than half of the liquidity\r\n     */\r\n    async verifyLnNodeCapacity(lp, decodedPr, amountIn, lnCapacityPrefetchPromise, abortSignal) {\r\n        let result = lnCapacityPrefetchPromise == null ? null : await lnCapacityPrefetchPromise;\r\n        if (result == null)\r\n            result = await this.lnApi.getLNNodeLiquidity(decodedPr.payeeNodeKey);\r\n        if (abortSignal != null)\r\n            abortSignal.throwIfAborted();\r\n        if (result === null)\r\n            throw new IntermediaryError_1.IntermediaryError(\"LP's lightning node not found in the lightning network graph!\");\r\n        lp.lnData = result;\r\n        if (decodedPr.payeeNodeKey !== result.publicKey)\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid pr returned - payee pubkey\");\r\n        if (result.capacity < amountIn)\r\n            throw new IntermediaryError_1.IntermediaryError(\"LP's lightning node doesn't have enough inbound capacity for the swap!\");\r\n        if ((result.capacity / 2n) < amountIn)\r\n            throw new Error(\"LP's lightning node probably doesn't have enough inbound capacity for the swap!\");\r\n    }\r\n    /**\r\n     * Returns a newly created swap, receiving 'amount' on lightning network\r\n     *\r\n     * @param signer                Smart chain signer's address intiating the swap\r\n     * @param amountData            Amount of token & amount to swap\r\n     * @param lps                   LPs (liquidity providers) to get the quotes from\r\n     * @param options               Quote options\r\n     * @param additionalParams      Additional parameters sent to the LP when creating the swap\r\n     * @param abortSignal           Abort signal for aborting the process\r\n     * @param preFetches\r\n     */\r\n    create(signer, amountData, lps, options, additionalParams, abortSignal, preFetches) {\r\n        if (options == null)\r\n            options = {};\r\n        options.unsafeSkipLnNodeCheck ??= this.options.unsafeSkipLnNodeCheck;\r\n        if (preFetches == null)\r\n            preFetches = {};\r\n        if (options.descriptionHash != null && options.descriptionHash.length !== 32)\r\n            throw new UserError_1.UserError(\"Invalid description hash length\");\r\n        const { secret, paymentHash } = this.getSecretAndHash();\r\n        const claimHash = this.contract.getHashForHtlc(paymentHash);\r\n        const _abortController = (0, Utils_1.extendAbortController)(abortSignal);\r\n        preFetches.pricePrefetchPromise ??= this.preFetchPrice(amountData, _abortController.signal);\r\n        const nativeTokenAddress = this.chain.getNativeCurrencyAddress();\r\n        preFetches.feeRatePromise ??= this.preFetchFeeRate(signer, amountData, claimHash.toString(\"hex\"), _abortController);\r\n        return lps.map(lp => {\r\n            return {\r\n                intermediary: lp,\r\n                quote: (async () => {\r\n                    const abortController = (0, Utils_1.extendAbortController)(_abortController.signal);\r\n                    const liquidityPromise = this.preFetchIntermediaryLiquidity(amountData, lp, abortController);\r\n                    const { lnCapacityPromise, resp } = await (0, Utils_1.tryWithRetries)(async (retryCount) => {\r\n                        const { lnPublicKey, response } = IntermediaryAPI_1.IntermediaryAPI.initFromBTCLN(this.chainIdentifier, lp.url, nativeTokenAddress, {\r\n                            paymentHash,\r\n                            amount: amountData.amount,\r\n                            claimer: signer,\r\n                            token: amountData.token.toString(),\r\n                            descriptionHash: options.descriptionHash,\r\n                            exactOut: !amountData.exactIn,\r\n                            feeRate: preFetches.feeRatePromise,\r\n                            additionalParams\r\n                        }, this.options.postRequestTimeout, abortController.signal, retryCount > 0 ? false : null);\r\n                        return {\r\n                            lnCapacityPromise: options.unsafeSkipLnNodeCheck ? null : this.preFetchLnCapacity(lnPublicKey),\r\n                            resp: await response\r\n                        };\r\n                    }, null, RequestError_1.RequestError, abortController.signal);\r\n                    const decodedPr = (0, bolt11_1.decode)(resp.pr);\r\n                    const amountIn = (BigInt(decodedPr.millisatoshis) + 999n) / 1000n;\r\n                    try {\r\n                        this.verifyReturnedData(resp, amountData, lp, options, decodedPr, amountIn);\r\n                        const [pricingInfo] = await Promise.all([\r\n                            this.verifyReturnedPrice(lp.services[SwapType_1.SwapType.FROM_BTCLN], false, amountIn, resp.total, amountData.token, {}, preFetches.pricePrefetchPromise, abortController.signal),\r\n                            this.verifyIntermediaryLiquidity(resp.total, liquidityPromise),\r\n                            options.unsafeSkipLnNodeCheck ? Promise.resolve() : this.verifyLnNodeCapacity(lp, decodedPr, amountIn, lnCapacityPromise, abortController.signal)\r\n                        ]);\r\n                        const quote = new FromBTCLNSwap_1.FromBTCLNSwap(this, {\r\n                            pricingInfo,\r\n                            url: lp.url,\r\n                            expiry: decodedPr.timeExpireDate * 1000,\r\n                            swapFee: resp.swapFee,\r\n                            feeRate: await preFetches.feeRatePromise,\r\n                            initialSwapData: await this.contract.createSwapData(base_1.ChainSwapType.HTLC, lp.getAddress(this.chainIdentifier), signer, amountData.token, resp.total, claimHash.toString(\"hex\"), this.getRandomSequence(), BigInt(Math.floor(Date.now() / 1000)), false, true, resp.securityDeposit, 0n, nativeTokenAddress),\r\n                            pr: resp.pr,\r\n                            secret: secret.toString(\"hex\"),\r\n                            exactIn: amountData.exactIn ?? true\r\n                        });\r\n                        await quote._save();\r\n                        return quote;\r\n                    }\r\n                    catch (e) {\r\n                        abortController.abort(e);\r\n                        throw e;\r\n                    }\r\n                })()\r\n            };\r\n        });\r\n    }\r\n    /**\r\n     * Parses and fetches lnurl withdraw params from the specified lnurl\r\n     *\r\n     * @param lnurl LNURL to be parsed and fetched\r\n     * @param abortSignal\r\n     * @private\r\n     * @throws {UserError} if the LNURL is invalid or if it's not a LNURL-withdraw\r\n     */\r\n    async getLNURLWithdraw(lnurl, abortSignal) {\r\n        if (typeof (lnurl) !== \"string\")\r\n            return lnurl;\r\n        const res = await LNURL_1.LNURL.getLNURL(lnurl, true, this.options.getRequestTimeout, abortSignal);\r\n        if (res == null)\r\n            throw new UserError_1.UserError(\"Invalid LNURL\");\r\n        if (res.tag !== \"withdrawRequest\")\r\n            throw new UserError_1.UserError(\"Not a LNURL-withdrawal\");\r\n        return res;\r\n    }\r\n    /**\r\n     * Returns a newly created swap, receiving 'amount' from the lnurl-withdraw\r\n     *\r\n     * @param signer                Smart chains signer's address intiating the swap\r\n     * @param lnurl                 LNURL-withdraw to withdraw funds from\r\n     * @param amountData            Amount of token & amount to swap\r\n     * @param lps                   LPs (liquidity providers) to get the quotes from\r\n     * @param additionalParams      Additional parameters sent to the LP when creating the swap\r\n     * @param abortSignal           Abort signal for aborting the process\r\n     */\r\n    async createViaLNURL(signer, lnurl, amountData, lps, additionalParams, abortSignal) {\r\n        if (!this.isInitialized)\r\n            throw new Error(\"Not initialized, call init() first!\");\r\n        const abortController = (0, Utils_1.extendAbortController)(abortSignal);\r\n        const preFetches = {\r\n            pricePrefetchPromise: this.preFetchPrice(amountData, abortController.signal),\r\n            feeRatePromise: this.preFetchFeeRate(signer, amountData, null, abortController)\r\n        };\r\n        try {\r\n            const exactOutAmountPromise = !amountData.exactIn ? preFetches.pricePrefetchPromise.then(price => this.prices.getToBtcSwapAmount(this.chainIdentifier, amountData.amount, amountData.token, abortController.signal, price)).catch(e => {\r\n                abortController.abort(e);\r\n                return null;\r\n            }) : null;\r\n            const withdrawRequest = await this.getLNURLWithdraw(lnurl, abortController.signal);\r\n            const min = BigInt(withdrawRequest.minWithdrawable) / 1000n;\r\n            const max = BigInt(withdrawRequest.maxWithdrawable) / 1000n;\r\n            if (amountData.exactIn) {\r\n                if (amountData.amount < min)\r\n                    throw new UserError_1.UserError(\"Amount less than LNURL-withdraw minimum\");\r\n                if (amountData.amount > max)\r\n                    throw new UserError_1.UserError(\"Amount more than LNURL-withdraw maximum\");\r\n            }\r\n            else {\r\n                const amount = await exactOutAmountPromise;\r\n                abortController.signal.throwIfAborted();\r\n                if ((amount * 95n / 100n) < min)\r\n                    throw new UserError_1.UserError(\"Amount less than LNURL-withdraw minimum\");\r\n                if ((amount * 105n / 100n) > max)\r\n                    throw new UserError_1.UserError(\"Amount more than LNURL-withdraw maximum\");\r\n            }\r\n            return this.create(signer, amountData, lps, null, additionalParams, abortSignal, preFetches).map(data => {\r\n                return {\r\n                    quote: data.quote.then(quote => {\r\n                        quote.lnurl = withdrawRequest.url;\r\n                        quote.lnurlK1 = withdrawRequest.k1;\r\n                        quote.lnurlCallback = withdrawRequest.callback;\r\n                        const amountIn = quote.getInput().rawAmount;\r\n                        if (amountIn < min)\r\n                            throw new UserError_1.UserError(\"Amount less than LNURL-withdraw minimum\");\r\n                        if (amountIn > max)\r\n                            throw new UserError_1.UserError(\"Amount more than LNURL-withdraw maximum\");\r\n                        return quote;\r\n                    }),\r\n                    intermediary: data.intermediary\r\n                };\r\n            });\r\n        }\r\n        catch (e) {\r\n            abortController.abort(e);\r\n            throw e;\r\n        }\r\n    }\r\n}\r\nexports.FromBTCLNWrapper = FromBTCLNWrapper;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FromBTCSwap = exports.isFromBTCSwapInit = exports.FromBTCSwapState = void 0;\r\nconst IFromBTCSwap_1 = require(\"../IFromBTCSwap\");\r\nconst SwapType_1 = require(\"../../../enums/SwapType\");\r\nconst base_1 = require(\"@atomiqlabs/base\");\r\nconst buffer_1 = require(\"buffer\");\r\nconst Tokens_1 = require(\"../../../../Tokens\");\r\nconst Utils_1 = require(\"../../../../utils/Utils\");\r\nconst IEscrowSwap_1 = require(\"../../IEscrowSwap\");\r\nconst IBitcoinWallet_1 = require(\"../../../../btc/wallet/IBitcoinWallet\");\r\nconst btc_signer_1 = require(\"@scure/btc-signer\");\r\nconst SingleAddressBitcoinWallet_1 = require(\"../../../../btc/wallet/SingleAddressBitcoinWallet\");\r\nvar FromBTCSwapState;\r\n(function (FromBTCSwapState) {\r\n    FromBTCSwapState[FromBTCSwapState[\"FAILED\"] = -4] = \"FAILED\";\r\n    FromBTCSwapState[FromBTCSwapState[\"EXPIRED\"] = -3] = \"EXPIRED\";\r\n    FromBTCSwapState[FromBTCSwapState[\"QUOTE_EXPIRED\"] = -2] = \"QUOTE_EXPIRED\";\r\n    FromBTCSwapState[FromBTCSwapState[\"QUOTE_SOFT_EXPIRED\"] = -1] = \"QUOTE_SOFT_EXPIRED\";\r\n    FromBTCSwapState[FromBTCSwapState[\"PR_CREATED\"] = 0] = \"PR_CREATED\";\r\n    FromBTCSwapState[FromBTCSwapState[\"CLAIM_COMMITED\"] = 1] = \"CLAIM_COMMITED\";\r\n    FromBTCSwapState[FromBTCSwapState[\"BTC_TX_CONFIRMED\"] = 2] = \"BTC_TX_CONFIRMED\";\r\n    FromBTCSwapState[FromBTCSwapState[\"CLAIM_CLAIMED\"] = 3] = \"CLAIM_CLAIMED\";\r\n})(FromBTCSwapState = exports.FromBTCSwapState || (exports.FromBTCSwapState = {}));\r\nfunction isFromBTCSwapInit(obj) {\r\n    return typeof (obj.address) === \"string\" &&\r\n        typeof (obj.amount) === \"bigint\" &&\r\n        (0, IEscrowSwap_1.isIEscrowSwapInit)(obj);\r\n}\r\nexports.isFromBTCSwapInit = isFromBTCSwapInit;\r\nclass FromBTCSwap extends IFromBTCSwap_1.IFromBTCSwap {\r\n    constructor(wrapper, initOrObject) {\r\n        if (isFromBTCSwapInit(initOrObject))\r\n            initOrObject.url += \"/frombtc\";\r\n        super(wrapper, initOrObject);\r\n        this.inputToken = Tokens_1.BitcoinTokens.BTC;\r\n        this.TYPE = SwapType_1.SwapType.FROM_BTC;\r\n        if (isFromBTCSwapInit(initOrObject)) {\r\n            this.state = FromBTCSwapState.PR_CREATED;\r\n        }\r\n        else {\r\n            this.address = initOrObject.address;\r\n            this.amount = BigInt(initOrObject.amount);\r\n            this.txId = initOrObject.txId;\r\n            this.vout = initOrObject.vout;\r\n            this.requiredConfirmations = initOrObject.requiredConfirmations ?? this.data.getConfirmationsHint();\r\n        }\r\n        this.tryRecomputeSwapPrice();\r\n        this.logger = (0, Utils_1.getLogger)(\"FromBTC(\" + this.getIdentifierHashString() + \"): \");\r\n    }\r\n    upgradeVersion() {\r\n        if (this.version == null) {\r\n            switch (this.state) {\r\n                case -2:\r\n                    this.state = FromBTCSwapState.FAILED;\r\n                    break;\r\n                case -1:\r\n                    this.state = FromBTCSwapState.QUOTE_EXPIRED;\r\n                    break;\r\n                case 0:\r\n                    this.state = FromBTCSwapState.PR_CREATED;\r\n                    break;\r\n                case 1:\r\n                    this.state = FromBTCSwapState.CLAIM_COMMITED;\r\n                    break;\r\n                case 2:\r\n                    this.state = FromBTCSwapState.BTC_TX_CONFIRMED;\r\n                    break;\r\n                case 3:\r\n                    this.state = FromBTCSwapState.CLAIM_CLAIMED;\r\n                    break;\r\n            }\r\n            this.version = 1;\r\n        }\r\n    }\r\n    //////////////////////////////\r\n    //// Getters & utils\r\n    /**\r\n     * Returns bitcoin address where the on-chain BTC should be sent to\r\n     */\r\n    getAddress() {\r\n        if (this.state === FromBTCSwapState.PR_CREATED)\r\n            return null;\r\n        return this.address;\r\n    }\r\n    getHyperlink() {\r\n        if (this.state === FromBTCSwapState.PR_CREATED)\r\n            return null;\r\n        return \"bitcoin:\" + this.address + \"?amount=\" + encodeURIComponent((Number(this.amount) / 100000000).toString(10));\r\n    }\r\n    getInputTxId() {\r\n        return this.txId;\r\n    }\r\n    /**\r\n     * Returns timeout time (in UNIX milliseconds) when the on-chain address will expire and no funds should be sent\r\n     *  to that address anymore\r\n     */\r\n    getTimeoutTime() {\r\n        return Number(this.wrapper.getOnchainSendTimeout(this.data, this.requiredConfirmations)) * 1000;\r\n    }\r\n    requiresAction() {\r\n        return this.isClaimable() || (this.state === FromBTCSwapState.CLAIM_COMMITED && this.getTimeoutTime() > Date.now());\r\n    }\r\n    isFinished() {\r\n        return this.state === FromBTCSwapState.CLAIM_CLAIMED || this.state === FromBTCSwapState.QUOTE_EXPIRED || this.state === FromBTCSwapState.FAILED;\r\n    }\r\n    isClaimable() {\r\n        return this.state === FromBTCSwapState.BTC_TX_CONFIRMED;\r\n    }\r\n    isSuccessful() {\r\n        return this.state === FromBTCSwapState.CLAIM_CLAIMED;\r\n    }\r\n    isFailed() {\r\n        return this.state === FromBTCSwapState.FAILED || (this.state === FromBTCSwapState.EXPIRED && this.txId != null);\r\n    }\r\n    isQuoteExpired() {\r\n        return this.state === FromBTCSwapState.QUOTE_EXPIRED;\r\n    }\r\n    isQuoteSoftExpired() {\r\n        return this.state === FromBTCSwapState.QUOTE_EXPIRED || this.state === FromBTCSwapState.QUOTE_SOFT_EXPIRED;\r\n    }\r\n    canCommit() {\r\n        if (this.state !== FromBTCSwapState.PR_CREATED)\r\n            return false;\r\n        const expiry = this.wrapper.getOnchainSendTimeout(this.data, this.requiredConfirmations);\r\n        const currentTimestamp = BigInt(Math.floor(Date.now() / 1000));\r\n        return (expiry - currentTimestamp) >= this.wrapper.options.minSendWindow;\r\n    }\r\n    //////////////////////////////\r\n    //// Amounts & fees\r\n    getInput() {\r\n        return (0, Tokens_1.toTokenAmount)(this.amount, this.inputToken, this.wrapper.prices);\r\n    }\r\n    /**\r\n     * Returns claimer bounty, acting as a reward for watchtowers to claim the swap automatically\r\n     */\r\n    getClaimerBounty() {\r\n        return (0, Tokens_1.toTokenAmount)(this.data.getClaimerBounty(), this.wrapper.tokens[this.data.getDepositToken()], this.wrapper.prices);\r\n    }\r\n    //////////////////////////////\r\n    //// Bitcoin tx\r\n    getRequiredConfirmationsCount() {\r\n        return this.requiredConfirmations;\r\n    }\r\n    /**\r\n     * Checks whether a bitcoin payment was already made, returns the payment or null when no payment has been made.\r\n     */\r\n    async getBitcoinPayment() {\r\n        const result = await this.wrapper.btcRpc.checkAddressTxos(this.address, buffer_1.Buffer.from(this.data.getTxoHashHint(), \"hex\"));\r\n        if (result == null)\r\n            return null;\r\n        return {\r\n            txId: result.tx.txid,\r\n            vout: result.vout,\r\n            confirmations: result.tx.confirmations,\r\n            targetConfirmations: this.requiredConfirmations\r\n        };\r\n    }\r\n    /**\r\n     * Waits till the bitcoin transaction confirms and swap becomes claimable\r\n     *\r\n     * @param abortSignal Abort signal\r\n     * @param checkIntervalSeconds How often to check the bitcoin transaction\r\n     * @param updateCallback Callback called when txId is found, and also called with subsequent confirmations\r\n     * @throws {Error} if in invalid state (must be CLAIM_COMMITED)\r\n     */\r\n    async waitForBitcoinTransaction(abortSignal, checkIntervalSeconds, updateCallback) {\r\n        if (this.state !== FromBTCSwapState.CLAIM_COMMITED && this.state !== FromBTCSwapState.EXPIRED)\r\n            throw new Error(\"Must be in COMMITED state!\");\r\n        const result = await this.wrapper.btcRpc.waitForAddressTxo(this.address, buffer_1.Buffer.from(this.data.getTxoHashHint(), \"hex\"), this.requiredConfirmations, (confirmations, txId, vout, txEtaMs) => {\r\n            if (updateCallback != null)\r\n                updateCallback(txId, confirmations, this.requiredConfirmations, txEtaMs);\r\n        }, abortSignal, checkIntervalSeconds);\r\n        if (abortSignal != null)\r\n            abortSignal.throwIfAborted();\r\n        this.txId = result.tx.txid;\r\n        this.vout = result.vout;\r\n        if (this.state !== FromBTCSwapState.CLAIM_CLAIMED &&\r\n            this.state !== FromBTCSwapState.FAILED) {\r\n            this.state = FromBTCSwapState.BTC_TX_CONFIRMED;\r\n        }\r\n        await this._saveAndEmit();\r\n        return result.tx.txid;\r\n    }\r\n    async getFundedPsbt(_bitcoinWallet, feeRate) {\r\n        if (this.state !== FromBTCSwapState.CLAIM_COMMITED)\r\n            throw new Error(\"Swap not committed yet, please initiate the swap first with commit() call!\");\r\n        let bitcoinWallet;\r\n        if ((0, IBitcoinWallet_1.isIBitcoinWallet)(_bitcoinWallet)) {\r\n            bitcoinWallet = _bitcoinWallet;\r\n        }\r\n        else {\r\n            bitcoinWallet = new SingleAddressBitcoinWallet_1.SingleAddressBitcoinWallet(this.wrapper.btcRpc, this.wrapper.options.bitcoinNetwork, _bitcoinWallet);\r\n        }\r\n        //TODO: Maybe re-introduce fee rate check here if passed from the user\r\n        if (feeRate == null) {\r\n            feeRate = await bitcoinWallet.getFeeRate();\r\n        }\r\n        const basePsbt = new btc_signer_1.Transaction({\r\n            allowUnknownOutputs: true,\r\n            allowLegacyWitnessUtxo: true\r\n        });\r\n        basePsbt.addOutput({\r\n            amount: this.amount,\r\n            script: (0, Utils_1.toOutputScript)(this.wrapper.options.bitcoinNetwork, this.address)\r\n        });\r\n        const psbt = await bitcoinWallet.fundPsbt(basePsbt, feeRate);\r\n        //Sign every input\r\n        const signInputs = [];\r\n        for (let i = 0; i < psbt.inputsLength; i++) {\r\n            signInputs.push(i);\r\n        }\r\n        return { psbt, signInputs };\r\n    }\r\n    async submitPsbt(psbt) {\r\n        if (this.state !== FromBTCSwapState.CLAIM_COMMITED)\r\n            throw new Error(\"Swap not committed yet, please initiate the swap first with commit() call!\");\r\n        //Ensure not expired\r\n        if (this.getTimeoutTime() < Date.now()) {\r\n            throw new Error(\"Swap address expired!\");\r\n        }\r\n        const output0 = psbt.getOutput(0);\r\n        if (output0.amount !== this.amount)\r\n            throw new Error(\"PSBT output amount invalid, expected: \" + this.amount + \" got: \" + output0.amount);\r\n        const expectedOutputScript = (0, Utils_1.toOutputScript)(this.wrapper.options.bitcoinNetwork, this.address);\r\n        if (!expectedOutputScript.equals(output0.script))\r\n            throw new Error(\"PSBT output script invalid!\");\r\n        if (!psbt.isFinal)\r\n            psbt.finalize();\r\n        return await this.wrapper.btcRpc.sendRawTransaction(buffer_1.Buffer.from(psbt.toBytes(true, true)).toString(\"hex\"));\r\n    }\r\n    async estimateBitcoinFee(wallet, feeRate) {\r\n        const txFee = await wallet.getTransactionFee(this.address, this.amount, feeRate);\r\n        return (0, Tokens_1.toTokenAmount)(txFee == null ? null : BigInt(txFee), Tokens_1.BitcoinTokens.BTC, this.wrapper.prices);\r\n    }\r\n    async sendBitcoinTransaction(wallet, feeRate) {\r\n        if (this.state !== FromBTCSwapState.CLAIM_COMMITED)\r\n            throw new Error(\"Swap not committed yet, please initiate the swap first with commit() call!\");\r\n        return await wallet.sendTransaction(this.address, this.amount, feeRate);\r\n    }\r\n    //////////////////////////////\r\n    //// Commit\r\n    /**\r\n     * Commits the swap on-chain, locking the tokens from the intermediary in a PTLC\r\n     *\r\n     * @param signer Signer to sign the transactions with, must be the same as used in the initialization\r\n     * @param abortSignal Abort signal to stop waiting for the transaction confirmation and abort\r\n     * @param skipChecks Skip checks like making sure init signature is still valid and swap wasn't commited yet\r\n     *  (this is handled when swap is created (quoted), if you commit right after quoting, you can use skipChecks=true)\r\n     * @throws {Error} If invalid signer is provided that doesn't match the swap data\r\n     */\r\n    async commit(signer, abortSignal, skipChecks) {\r\n        this.checkSigner(signer);\r\n        const result = await this.wrapper.chain.sendAndConfirm(signer, await this.txsCommit(skipChecks), true, abortSignal);\r\n        this.commitTxId = result[0];\r\n        if (this.state === FromBTCSwapState.PR_CREATED || this.state === FromBTCSwapState.QUOTE_SOFT_EXPIRED) {\r\n            await this._saveAndEmit(FromBTCSwapState.CLAIM_COMMITED);\r\n        }\r\n        return result[0];\r\n    }\r\n    async waitTillCommited(abortSignal) {\r\n        if (this.state === FromBTCSwapState.CLAIM_COMMITED || this.state === FromBTCSwapState.CLAIM_CLAIMED)\r\n            return Promise.resolve();\r\n        if (this.state !== FromBTCSwapState.PR_CREATED && this.state !== FromBTCSwapState.QUOTE_SOFT_EXPIRED)\r\n            throw new Error(\"Invalid state\");\r\n        const abortController = (0, Utils_1.extendAbortController)(abortSignal);\r\n        const result = await Promise.race([\r\n            this.watchdogWaitTillCommited(abortController.signal),\r\n            this.waitTillState(FromBTCSwapState.CLAIM_COMMITED, \"gte\", abortController.signal).then(() => 0)\r\n        ]);\r\n        abortController.abort();\r\n        if (result === 0)\r\n            this.logger.debug(\"waitTillCommited(): Resolved from state changed\");\r\n        if (result === true)\r\n            this.logger.debug(\"waitTillCommited(): Resolved from watchdog - commited\");\r\n        if (result === false) {\r\n            this.logger.debug(\"waitTillCommited(): Resolved from watchdog - signature expired\");\r\n            if (this.state === FromBTCSwapState.PR_CREATED || this.state === FromBTCSwapState.QUOTE_SOFT_EXPIRED) {\r\n                await this._saveAndEmit(FromBTCSwapState.QUOTE_EXPIRED);\r\n            }\r\n            return;\r\n        }\r\n        if (this.state === FromBTCSwapState.PR_CREATED || this.state === FromBTCSwapState.QUOTE_SOFT_EXPIRED) {\r\n            await this._saveAndEmit(FromBTCSwapState.CLAIM_COMMITED);\r\n        }\r\n    }\r\n    //////////////////////////////\r\n    //// Claim\r\n    /**\r\n     * Returns transactions required to claim the swap on-chain (and possibly also sync the bitcoin light client)\r\n     *  after a bitcoin transaction was sent and confirmed\r\n     *\r\n     * @throws {Error} If the swap is in invalid state (must be BTC_TX_CONFIRMED)\r\n     */\r\n    async txsClaim(signer) {\r\n        if (this.state !== FromBTCSwapState.BTC_TX_CONFIRMED)\r\n            throw new Error(\"Must be in BTC_TX_CONFIRMED state!\");\r\n        const tx = await this.wrapper.btcRpc.getTransaction(this.txId);\r\n        return await this.wrapper.contract.txsClaimWithTxData(signer ?? this._getInitiator(), this.data, {\r\n            blockhash: tx.blockhash,\r\n            confirmations: tx.confirmations,\r\n            txid: tx.txid,\r\n            hex: tx.hex,\r\n            height: tx.blockheight\r\n        }, this.requiredConfirmations, this.vout, null, this.wrapper.synchronizer, true);\r\n    }\r\n    /**\r\n     * Claims and finishes the swap\r\n     *\r\n     * @param signer Signer to sign the transactions with, can also be different to the initializer\r\n     * @param abortSignal Abort signal to stop waiting for transaction confirmation\r\n     */\r\n    async claim(signer, abortSignal) {\r\n        let txIds;\r\n        try {\r\n            txIds = await this.wrapper.chain.sendAndConfirm(signer, await this.txsClaim(signer), true, abortSignal);\r\n        }\r\n        catch (e) {\r\n            this.logger.info(\"claim(): Failed to claim ourselves, checking swap claim state...\");\r\n            if (this.state === FromBTCSwapState.CLAIM_CLAIMED) {\r\n                this.logger.info(\"claim(): Transaction state is CLAIM_CLAIMED, swap was successfully claimed by the watchtower\");\r\n                return this.claimTxId;\r\n            }\r\n            const status = await this.wrapper.contract.getCommitStatus(this._getInitiator(), this.data);\r\n            if (status?.type === base_1.SwapCommitStateType.PAID) {\r\n                this.logger.info(\"claim(): Transaction commit status is PAID, swap was successfully claimed by the watchtower\");\r\n                if (this.claimTxId == null)\r\n                    this.claimTxId = await status.getClaimTxId();\r\n                await this._saveAndEmit(FromBTCSwapState.CLAIM_CLAIMED);\r\n                return this.claimTxId;\r\n            }\r\n            throw e;\r\n        }\r\n        this.claimTxId = txIds[txIds.length - 1];\r\n        if (this.state === FromBTCSwapState.CLAIM_COMMITED || this.state === FromBTCSwapState.BTC_TX_CONFIRMED ||\r\n            this.state === FromBTCSwapState.EXPIRED || this.state === FromBTCSwapState.FAILED) {\r\n            await this._saveAndEmit(FromBTCSwapState.CLAIM_CLAIMED);\r\n        }\r\n        return txIds[0];\r\n    }\r\n    /**\r\n     * Waits till the swap is successfully claimed\r\n     *\r\n     * @param abortSignal AbortSignal\r\n     * @throws {Error} If swap is in invalid state (must be BTC_TX_CONFIRMED)\r\n     * @throws {Error} If the LP refunded sooner than we were able to claim\r\n     */\r\n    async waitTillClaimed(abortSignal) {\r\n        if (this.state === FromBTCSwapState.CLAIM_CLAIMED)\r\n            return Promise.resolve();\r\n        if (this.state !== FromBTCSwapState.BTC_TX_CONFIRMED)\r\n            throw new Error(\"Invalid state (not BTC_TX_CONFIRMED)\");\r\n        const abortController = new AbortController();\r\n        if (abortSignal != null)\r\n            abortSignal.addEventListener(\"abort\", () => abortController.abort(abortSignal.reason));\r\n        const res = await Promise.race([\r\n            this.watchdogWaitTillResult(abortController.signal),\r\n            this.waitTillState(FromBTCSwapState.CLAIM_CLAIMED, \"eq\", abortController.signal).then(() => 0),\r\n            this.waitTillState(FromBTCSwapState.FAILED, \"eq\", abortController.signal).then(() => 1),\r\n        ]);\r\n        abortController.abort();\r\n        if (res === 0) {\r\n            this.logger.debug(\"waitTillClaimed(): Resolved from state change (CLAIM_CLAIMED)\");\r\n            return;\r\n        }\r\n        if (res === 1) {\r\n            this.logger.debug(\"waitTillClaimed(): Resolved from state change (FAILED)\");\r\n            throw new Error(\"Offerer refunded during claiming\");\r\n        }\r\n        this.logger.debug(\"waitTillClaimed(): Resolved from watchdog\");\r\n        if (res?.type === base_1.SwapCommitStateType.PAID) {\r\n            if (this.state !== FromBTCSwapState.CLAIM_CLAIMED) {\r\n                this.claimTxId = await res.getClaimTxId();\r\n                await this._saveAndEmit(FromBTCSwapState.CLAIM_CLAIMED);\r\n            }\r\n        }\r\n        if (res?.type === base_1.SwapCommitStateType.NOT_COMMITED || res?.type === base_1.SwapCommitStateType.EXPIRED) {\r\n            if (this.state !== FromBTCSwapState.CLAIM_CLAIMED &&\r\n                this.state !== FromBTCSwapState.FAILED) {\r\n                this.refundTxId = res.getRefundTxId == null ? null : await res.getRefundTxId();\r\n                await this._saveAndEmit(FromBTCSwapState.FAILED);\r\n            }\r\n        }\r\n    }\r\n    //////////////////////////////\r\n    //// Storage\r\n    serialize() {\r\n        return {\r\n            ...super.serialize(),\r\n            address: this.address,\r\n            amount: this.amount.toString(10),\r\n            requiredConfirmations: this.requiredConfirmations,\r\n            txId: this.txId,\r\n            vout: this.vout\r\n        };\r\n    }\r\n    //////////////////////////////\r\n    //// Swap ticks & sync\r\n    /**\r\n     * Checks the swap's state on-chain and compares it to its internal state, updates/changes it according to on-chain\r\n     *  data\r\n     *\r\n     * @private\r\n     */\r\n    async syncStateFromChain() {\r\n        if (this.state === FromBTCSwapState.PR_CREATED || this.state === FromBTCSwapState.QUOTE_SOFT_EXPIRED) {\r\n            const quoteExpired = await this.verifyQuoteDefinitelyExpired(); //Make sure we check for expiry here, to prevent race conditions\r\n            const status = await (0, Utils_1.tryWithRetries)(() => this.wrapper.contract.getCommitStatus(this._getInitiator(), this.data));\r\n            switch (status?.type) {\r\n                case base_1.SwapCommitStateType.COMMITED:\r\n                    this.state = FromBTCSwapState.CLAIM_COMMITED;\r\n                    return true;\r\n                case base_1.SwapCommitStateType.EXPIRED:\r\n                    if (this.refundTxId == null && status.getRefundTxId)\r\n                        this.refundTxId = await status.getRefundTxId();\r\n                    this.state = FromBTCSwapState.QUOTE_EXPIRED;\r\n                    return true;\r\n                case base_1.SwapCommitStateType.PAID:\r\n                    if (this.claimTxId == null)\r\n                        this.claimTxId = await status.getClaimTxId();\r\n                    this.state = FromBTCSwapState.CLAIM_CLAIMED;\r\n                    return true;\r\n            }\r\n            if (quoteExpired) {\r\n                this.state = FromBTCSwapState.QUOTE_EXPIRED;\r\n                return true;\r\n            }\r\n            return false;\r\n        }\r\n        if (this.state === FromBTCSwapState.CLAIM_COMMITED || this.state === FromBTCSwapState.BTC_TX_CONFIRMED || this.state === FromBTCSwapState.EXPIRED) {\r\n            const status = await (0, Utils_1.tryWithRetries)(() => this.wrapper.contract.getCommitStatus(this._getInitiator(), this.data));\r\n            switch (status?.type) {\r\n                case base_1.SwapCommitStateType.PAID:\r\n                    if (this.claimTxId == null)\r\n                        this.claimTxId = await status.getClaimTxId();\r\n                    this.state = FromBTCSwapState.CLAIM_CLAIMED;\r\n                    return true;\r\n                case base_1.SwapCommitStateType.NOT_COMMITED:\r\n                case base_1.SwapCommitStateType.EXPIRED:\r\n                    if (this.refundTxId == null && status.getRefundTxId)\r\n                        this.refundTxId = await status.getRefundTxId();\r\n                    this.state = FromBTCSwapState.FAILED;\r\n                    return true;\r\n                case base_1.SwapCommitStateType.COMMITED:\r\n                    const res = await this.getBitcoinPayment();\r\n                    if (res != null && res.confirmations >= this.requiredConfirmations) {\r\n                        this.txId = res.txId;\r\n                        this.vout = res.vout;\r\n                        this.state = FromBTCSwapState.BTC_TX_CONFIRMED;\r\n                        return true;\r\n                    }\r\n                    break;\r\n            }\r\n        }\r\n    }\r\n    async _sync(save) {\r\n        const changed = await this.syncStateFromChain();\r\n        if (changed && save)\r\n            await this._saveAndEmit();\r\n        return changed;\r\n    }\r\n    async _tick(save) {\r\n        switch (this.state) {\r\n            case FromBTCSwapState.PR_CREATED:\r\n                if (this.expiry < Date.now()) {\r\n                    this.state = FromBTCSwapState.QUOTE_SOFT_EXPIRED;\r\n                    if (save)\r\n                        await this._saveAndEmit();\r\n                    return true;\r\n                }\r\n                break;\r\n            case FromBTCSwapState.CLAIM_COMMITED:\r\n                if (this.getTimeoutTime() < Date.now()) {\r\n                    this.state = FromBTCSwapState.EXPIRED;\r\n                    if (save)\r\n                        await this._saveAndEmit();\r\n                    return true;\r\n                }\r\n            case FromBTCSwapState.EXPIRED:\r\n                //Check if bitcoin payment was received every 2 minutes\r\n                if (Math.floor(Date.now() / 1000) % 120 === 0) {\r\n                    try {\r\n                        const res = await this.getBitcoinPayment();\r\n                        if (res != null && res.confirmations >= this.requiredConfirmations) {\r\n                            this.txId = res.txId;\r\n                            this.vout = res.vout;\r\n                            this.state = FromBTCSwapState.BTC_TX_CONFIRMED;\r\n                            if (save)\r\n                                await this._saveAndEmit();\r\n                            return true;\r\n                        }\r\n                    }\r\n                    catch (e) {\r\n                        this.logger.warn(\"tickSwap(\" + this.getIdentifierHashString() + \"): \", e);\r\n                    }\r\n                }\r\n                break;\r\n        }\r\n    }\r\n}\r\nexports.FromBTCSwap = FromBTCSwap;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.FromBTCWrapper = void 0;\r\nconst IFromBTCWrapper_1 = require(\"../IFromBTCWrapper\");\r\nconst FromBTCSwap_1 = require(\"./FromBTCSwap\");\r\nconst base_1 = require(\"@atomiqlabs/base\");\r\nconst buffer_1 = require(\"buffer\");\r\nconst IntermediaryError_1 = require(\"../../../../errors/IntermediaryError\");\r\nconst SwapType_1 = require(\"../../../enums/SwapType\");\r\nconst Utils_1 = require(\"../../../../utils/Utils\");\r\nconst IntermediaryAPI_1 = require(\"../../../../intermediaries/IntermediaryAPI\");\r\nconst RequestError_1 = require(\"../../../../errors/RequestError\");\r\nconst utils_1 = require(\"@scure/btc-signer/utils\");\r\nclass FromBTCWrapper extends IFromBTCWrapper_1.IFromBTCWrapper {\r\n    /**\r\n     * @param chainIdentifier\r\n     * @param unifiedStorage Storage interface for the current environment\r\n     * @param unifiedChainEvents On-chain event listener\r\n     * @param chain\r\n     * @param contract Underlying contract handling the swaps\r\n     * @param prices Pricing to use\r\n     * @param tokens\r\n     * @param swapDataDeserializer Deserializer for SwapData\r\n     * @param btcRelay\r\n     * @param synchronizer Btc relay synchronizer\r\n     * @param btcRpc Bitcoin RPC which also supports getting transactions by txoHash\r\n     * @param options\r\n     * @param events Instance to use for emitting events\r\n     */\r\n    constructor(chainIdentifier, unifiedStorage, unifiedChainEvents, chain, contract, prices, tokens, swapDataDeserializer, btcRelay, synchronizer, btcRpc, options, events) {\r\n        if (options == null)\r\n            options = {};\r\n        options.bitcoinNetwork = options.bitcoinNetwork ?? utils_1.TEST_NETWORK;\r\n        options.safetyFactor = options.safetyFactor || 2;\r\n        options.blocksTillTxConfirms = options.blocksTillTxConfirms || 12;\r\n        options.maxConfirmations = options.maxConfirmations || 6;\r\n        options.minSendWindow = options.minSendWindow || 30 * 60; //Minimum time window for user to send in the on-chain funds for From BTC swap\r\n        options.bitcoinBlocktime = options.bitcoinBlocktime || 10 * 60;\r\n        super(chainIdentifier, unifiedStorage, unifiedChainEvents, chain, contract, prices, tokens, swapDataDeserializer, options, events);\r\n        this.TYPE = SwapType_1.SwapType.FROM_BTC;\r\n        this.swapDeserializer = FromBTCSwap_1.FromBTCSwap;\r\n        this.pendingSwapStates = [\r\n            FromBTCSwap_1.FromBTCSwapState.PR_CREATED,\r\n            FromBTCSwap_1.FromBTCSwapState.QUOTE_SOFT_EXPIRED,\r\n            FromBTCSwap_1.FromBTCSwapState.CLAIM_COMMITED,\r\n            FromBTCSwap_1.FromBTCSwapState.BTC_TX_CONFIRMED,\r\n            FromBTCSwap_1.FromBTCSwapState.EXPIRED\r\n        ];\r\n        this.tickSwapState = [FromBTCSwap_1.FromBTCSwapState.PR_CREATED, FromBTCSwap_1.FromBTCSwapState.CLAIM_COMMITED, FromBTCSwap_1.FromBTCSwapState.EXPIRED];\r\n        this.btcRelay = btcRelay;\r\n        this.synchronizer = synchronizer;\r\n        this.btcRpc = btcRpc;\r\n    }\r\n    processEventInitialize(swap, event) {\r\n        if (swap.state === FromBTCSwap_1.FromBTCSwapState.PR_CREATED || swap.state === FromBTCSwap_1.FromBTCSwapState.QUOTE_SOFT_EXPIRED) {\r\n            swap.state = FromBTCSwap_1.FromBTCSwapState.CLAIM_COMMITED;\r\n            return Promise.resolve(true);\r\n        }\r\n        return Promise.resolve(false);\r\n    }\r\n    processEventClaim(swap, event) {\r\n        if (swap.state !== FromBTCSwap_1.FromBTCSwapState.FAILED && swap.state !== FromBTCSwap_1.FromBTCSwapState.CLAIM_CLAIMED) {\r\n            swap.state = FromBTCSwap_1.FromBTCSwapState.CLAIM_CLAIMED;\r\n            return Promise.resolve(true);\r\n        }\r\n        return Promise.resolve(false);\r\n    }\r\n    processEventRefund(swap, event) {\r\n        if (swap.state !== FromBTCSwap_1.FromBTCSwapState.CLAIM_CLAIMED && swap.state !== FromBTCSwap_1.FromBTCSwapState.FAILED) {\r\n            swap.state = FromBTCSwap_1.FromBTCSwapState.FAILED;\r\n            return Promise.resolve(true);\r\n        }\r\n        return Promise.resolve(false);\r\n    }\r\n    /**\r\n     * Returns the swap expiry, leaving enough time for the user to send a transaction and for it to confirm\r\n     *\r\n     * @param data Parsed swap data\r\n     * @param requiredConfirmations Confirmations required to claim the tx\r\n     */\r\n    getOnchainSendTimeout(data, requiredConfirmations) {\r\n        const tsDelta = (this.options.blocksTillTxConfirms + requiredConfirmations) * this.options.bitcoinBlocktime * this.options.safetyFactor;\r\n        return data.getExpiry() - BigInt(tsDelta);\r\n    }\r\n    /**\r\n     * Pre-fetches claimer (watchtower) bounty data for the swap. Doesn't throw, instead returns null and aborts the\r\n     *  provided abortController\r\n     *\r\n     * @param signer Smartchain signer address initiating the swap\r\n     * @param amountData\r\n     * @param options Options as passed to the swap creation function\r\n     * @param abortController\r\n     * @private\r\n     */\r\n    async preFetchClaimerBounty(signer, amountData, options, abortController) {\r\n        const startTimestamp = BigInt(Math.floor(Date.now() / 1000));\r\n        if (options.unsafeZeroWatchtowerFee) {\r\n            return {\r\n                feePerBlock: 0n,\r\n                safetyFactor: options.blockSafetyFactor,\r\n                startTimestamp: startTimestamp,\r\n                addBlock: 0,\r\n                addFee: 0n\r\n            };\r\n        }\r\n        const dummyAmount = BigInt(Math.floor(Math.random() * 0x1000000));\r\n        const dummySwapData = await this.contract.createSwapData(base_1.ChainSwapType.CHAIN, signer, signer, amountData.token, dummyAmount, this.contract.getHashForOnchain((0, Utils_1.randomBytes)(20), dummyAmount, 3).toString(\"hex\"), this.getRandomSequence(), startTimestamp, false, true, BigInt(Math.floor(Math.random() * 0x10000)), BigInt(Math.floor(Math.random() * 0x10000)));\r\n        try {\r\n            const [feePerBlock, btcRelayData, currentBtcBlock, claimFeeRate] = await Promise.all([\r\n                (0, Utils_1.tryWithRetries)(() => this.btcRelay.getFeePerBlock(), null, null, abortController.signal),\r\n                (0, Utils_1.tryWithRetries)(() => this.btcRelay.getTipData(), null, null, abortController.signal),\r\n                this.btcRpc.getTipHeight(),\r\n                (0, Utils_1.tryWithRetries)(() => this.contract.getClaimFee(signer, dummySwapData), null, null, abortController.signal)\r\n            ]);\r\n            const currentBtcRelayBlock = btcRelayData.blockheight;\r\n            const addBlock = Math.max(currentBtcBlock - currentBtcRelayBlock, 0);\r\n            return {\r\n                feePerBlock: feePerBlock * options.feeSafetyFactor,\r\n                safetyFactor: options.blockSafetyFactor,\r\n                startTimestamp: startTimestamp,\r\n                addBlock,\r\n                addFee: claimFeeRate * options.feeSafetyFactor\r\n            };\r\n        }\r\n        catch (e) {\r\n            abortController.abort(e);\r\n            return null;\r\n        }\r\n    }\r\n    /**\r\n     * Returns calculated claimer bounty calculated from the claimer bounty data as fetched from preFetchClaimerBounty()\r\n     *\r\n     * @param data Parsed swap data returned from the intermediary\r\n     * @param options Options as passed to the swap creation function\r\n     * @param claimerBounty Claimer bounty data as fetched from preFetchClaimerBounty() function\r\n     * @private\r\n     */\r\n    getClaimerBounty(data, options, claimerBounty) {\r\n        const tsDelta = data.getExpiry() - claimerBounty.startTimestamp;\r\n        const blocksDelta = tsDelta / BigInt(this.options.bitcoinBlocktime) * BigInt(options.blockSafetyFactor);\r\n        const totalBlock = blocksDelta + BigInt(claimerBounty.addBlock);\r\n        return claimerBounty.addFee + (totalBlock * claimerBounty.feePerBlock);\r\n    }\r\n    /**\r\n     * Verifies response returned from intermediary\r\n     *\r\n     * @param resp Response as returned by the intermediary\r\n     * @param amountData\r\n     * @param lp Intermediary\r\n     * @param options Options as passed to the swap creation function\r\n     * @param data Parsed swap data returned by the intermediary\r\n     * @param sequence Required swap sequence\r\n     * @param claimerBounty Claimer bount data as returned from the preFetchClaimerBounty() pre-fetch promise\r\n     * @param depositToken\r\n     * @private\r\n     * @throws {IntermediaryError} in case the response is invalid\r\n     */\r\n    verifyReturnedData(resp, amountData, lp, options, data, sequence, claimerBounty, depositToken) {\r\n        if (amountData.exactIn) {\r\n            if (resp.amount !== amountData.amount)\r\n                throw new IntermediaryError_1.IntermediaryError(\"Invalid amount returned\");\r\n        }\r\n        else {\r\n            if (resp.total !== amountData.amount)\r\n                throw new IntermediaryError_1.IntermediaryError(\"Invalid total returned\");\r\n        }\r\n        const requiredConfirmations = resp.confirmations ?? lp.services[SwapType_1.SwapType.FROM_BTC].data.confirmations;\r\n        if (requiredConfirmations > this.options.maxConfirmations)\r\n            throw new IntermediaryError_1.IntermediaryError(\"Requires too many confirmations\");\r\n        const totalClaimerBounty = this.getClaimerBounty(data, options, claimerBounty);\r\n        if (data.getClaimerBounty() !== totalClaimerBounty ||\r\n            data.getType() != base_1.ChainSwapType.CHAIN ||\r\n            data.getSequence() !== sequence ||\r\n            data.getAmount() !== resp.total ||\r\n            data.isPayIn() ||\r\n            !data.isToken(amountData.token) ||\r\n            data.getOfferer() !== lp.getAddress(this.chainIdentifier) ||\r\n            !data.isDepositToken(depositToken)) {\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid data returned\");\r\n        }\r\n        //Check that we have enough time to send the TX and for it to confirm\r\n        const expiry = this.getOnchainSendTimeout(data, requiredConfirmations);\r\n        const currentTimestamp = BigInt(Math.floor(Date.now() / 1000));\r\n        if ((expiry - currentTimestamp) < BigInt(this.options.minSendWindow)) {\r\n            throw new IntermediaryError_1.IntermediaryError(\"Send window too low\");\r\n        }\r\n        const lockingScript = (0, Utils_1.toOutputScript)(this.options.bitcoinNetwork, resp.btcAddress);\r\n        const desiredExtraData = this.contract.getExtraData(lockingScript, resp.amount, requiredConfirmations);\r\n        const desiredClaimHash = this.contract.getHashForOnchain(lockingScript, resp.amount, requiredConfirmations);\r\n        if (!desiredClaimHash.equals(buffer_1.Buffer.from(data.getClaimHash(), \"hex\"))) {\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid claim hash returned!\");\r\n        }\r\n        if (!desiredExtraData.equals(buffer_1.Buffer.from(data.getExtraData(), \"hex\"))) {\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid extra data returned!\");\r\n        }\r\n    }\r\n    /**\r\n     * Returns a newly created swap, receiving 'amount' on chain\r\n     *\r\n     * @param signer                Smartchain signer's address intiating the swap\r\n     * @param amountData            Amount of token & amount to swap\r\n     * @param lps                   LPs (liquidity providers) to get the quotes from\r\n     * @param options               Quote options\r\n     * @param additionalParams      Additional parameters sent to the LP when creating the swap\r\n     * @param abortSignal           Abort signal for aborting the process\r\n     */\r\n    create(signer, amountData, lps, options, additionalParams, abortSignal) {\r\n        options ??= {};\r\n        options.blockSafetyFactor ??= 1;\r\n        options.feeSafetyFactor ??= 2n;\r\n        const sequence = this.getRandomSequence();\r\n        const _abortController = (0, Utils_1.extendAbortController)(abortSignal);\r\n        const pricePrefetchPromise = this.preFetchPrice(amountData, _abortController.signal);\r\n        const claimerBountyPrefetchPromise = this.preFetchClaimerBounty(signer, amountData, options, _abortController);\r\n        const nativeTokenAddress = this.chain.getNativeCurrencyAddress();\r\n        const feeRatePromise = this.preFetchFeeRate(signer, amountData, null, _abortController);\r\n        return lps.map(lp => {\r\n            return {\r\n                intermediary: lp,\r\n                quote: (async () => {\r\n                    const abortController = (0, Utils_1.extendAbortController)(_abortController.signal);\r\n                    const liquidityPromise = this.preFetchIntermediaryLiquidity(amountData, lp, abortController);\r\n                    try {\r\n                        const { signDataPromise, resp } = await (0, Utils_1.tryWithRetries)(async (retryCount) => {\r\n                            const { signDataPrefetch, response } = IntermediaryAPI_1.IntermediaryAPI.initFromBTC(this.chainIdentifier, lp.url, nativeTokenAddress, {\r\n                                claimer: signer,\r\n                                amount: amountData.amount,\r\n                                token: amountData.token.toString(),\r\n                                exactOut: !amountData.exactIn,\r\n                                sequence,\r\n                                claimerBounty: claimerBountyPrefetchPromise,\r\n                                feeRate: feeRatePromise,\r\n                                additionalParams\r\n                            }, this.options.postRequestTimeout, abortController.signal, retryCount > 0 ? false : null);\r\n                            return {\r\n                                signDataPromise: this.preFetchSignData(signDataPrefetch),\r\n                                resp: await response\r\n                            };\r\n                        }, null, e => e instanceof RequestError_1.RequestError, abortController.signal);\r\n                        const data = new this.swapDataDeserializer(resp.data);\r\n                        data.setClaimer(signer);\r\n                        this.verifyReturnedData(resp, amountData, lp, options, data, sequence, await claimerBountyPrefetchPromise, nativeTokenAddress);\r\n                        const [pricingInfo, signatureExpiry] = await Promise.all([\r\n                            //Get intermediary's liquidity\r\n                            this.verifyReturnedPrice(lp.services[SwapType_1.SwapType.FROM_BTC], false, resp.amount, resp.total, amountData.token, {}, pricePrefetchPromise, abortController.signal),\r\n                            this.verifyReturnedSignature(signer, data, resp, feeRatePromise, signDataPromise, abortController.signal),\r\n                            this.verifyIntermediaryLiquidity(data.getAmount(), liquidityPromise),\r\n                        ]);\r\n                        const quote = new FromBTCSwap_1.FromBTCSwap(this, {\r\n                            pricingInfo,\r\n                            url: lp.url,\r\n                            expiry: signatureExpiry,\r\n                            swapFee: resp.swapFee,\r\n                            feeRate: await feeRatePromise,\r\n                            signatureData: resp,\r\n                            data,\r\n                            address: resp.btcAddress,\r\n                            amount: resp.amount,\r\n                            exactIn: amountData.exactIn ?? true,\r\n                            requiredConfirmations: resp.confirmations ?? lp.services[SwapType_1.SwapType.FROM_BTC].data.confirmations\r\n                        });\r\n                        await quote._save();\r\n                        return quote;\r\n                    }\r\n                    catch (e) {\r\n                        abortController.abort(e);\r\n                        throw e;\r\n                    }\r\n                })()\r\n            };\r\n        });\r\n    }\r\n}\r\nexports.FromBTCWrapper = FromBTCWrapper;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.TrustedIntermediaryAPI = exports.InvoiceStatusResponseCodes = exports.AddressStatusResponseCodes = void 0;\r\nconst Utils_1 = require(\"../utils/Utils\");\r\nconst RequestError_1 = require(\"../errors/RequestError\");\r\nconst SchemaVerifier_1 = require(\"../utils/paramcoders/SchemaVerifier\");\r\nvar AddressStatusResponseCodes;\r\n(function (AddressStatusResponseCodes) {\r\n    AddressStatusResponseCodes[AddressStatusResponseCodes[\"EXPIRED\"] = 10001] = \"EXPIRED\";\r\n    AddressStatusResponseCodes[AddressStatusResponseCodes[\"PAID\"] = 10000] = \"PAID\";\r\n    AddressStatusResponseCodes[AddressStatusResponseCodes[\"AWAIT_PAYMENT\"] = 10010] = \"AWAIT_PAYMENT\";\r\n    AddressStatusResponseCodes[AddressStatusResponseCodes[\"AWAIT_CONFIRMATION\"] = 10011] = \"AWAIT_CONFIRMATION\";\r\n    AddressStatusResponseCodes[AddressStatusResponseCodes[\"PENDING\"] = 10013] = \"PENDING\";\r\n    AddressStatusResponseCodes[AddressStatusResponseCodes[\"TX_SENT\"] = 10012] = \"TX_SENT\";\r\n    AddressStatusResponseCodes[AddressStatusResponseCodes[\"REFUNDED\"] = 10014] = \"REFUNDED\";\r\n    AddressStatusResponseCodes[AddressStatusResponseCodes[\"DOUBLE_SPENT\"] = 10015] = \"DOUBLE_SPENT\";\r\n    AddressStatusResponseCodes[AddressStatusResponseCodes[\"REFUNDABLE\"] = 10016] = \"REFUNDABLE\";\r\n})(AddressStatusResponseCodes = exports.AddressStatusResponseCodes || (exports.AddressStatusResponseCodes = {}));\r\nconst TrustedFromBTCResponseSchema = {\r\n    paymentHash: SchemaVerifier_1.FieldTypeEnum.String,\r\n    sequence: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    btcAddress: SchemaVerifier_1.FieldTypeEnum.String,\r\n    amountSats: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    swapFeeSats: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    swapFee: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    total: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    intermediaryKey: SchemaVerifier_1.FieldTypeEnum.String,\r\n    recommendedFee: SchemaVerifier_1.FieldTypeEnum.Number,\r\n    expiresAt: SchemaVerifier_1.FieldTypeEnum.Number\r\n};\r\nvar InvoiceStatusResponseCodes;\r\n(function (InvoiceStatusResponseCodes) {\r\n    InvoiceStatusResponseCodes[InvoiceStatusResponseCodes[\"EXPIRED\"] = 10001] = \"EXPIRED\";\r\n    InvoiceStatusResponseCodes[InvoiceStatusResponseCodes[\"PAID\"] = 10000] = \"PAID\";\r\n    InvoiceStatusResponseCodes[InvoiceStatusResponseCodes[\"AWAIT_PAYMENT\"] = 10010] = \"AWAIT_PAYMENT\";\r\n    InvoiceStatusResponseCodes[InvoiceStatusResponseCodes[\"PENDING\"] = 10011] = \"PENDING\";\r\n    InvoiceStatusResponseCodes[InvoiceStatusResponseCodes[\"TX_SENT\"] = 10012] = \"TX_SENT\";\r\n})(InvoiceStatusResponseCodes = exports.InvoiceStatusResponseCodes || (exports.InvoiceStatusResponseCodes = {}));\r\nconst TrustedFromBTCLNResponseSchema = {\r\n    pr: SchemaVerifier_1.FieldTypeEnum.String,\r\n    swapFee: SchemaVerifier_1.FieldTypeEnum.BigInt,\r\n    total: SchemaVerifier_1.FieldTypeEnum.BigInt\r\n};\r\nclass TrustedIntermediaryAPI {\r\n    /**\r\n     * Fetches the invoice status from the intermediary node\r\n     *\r\n     * @param url Url of the trusted intermediary\r\n     * @param paymentHash Payment hash of the lightning invoice\r\n     * @param timeout Timeout in milliseconds\r\n     * @param abortSignal\r\n     * @throws {RequestError} if non-200 http response is returned\r\n     */\r\n    static async getInvoiceStatus(url, paymentHash, timeout, abortSignal) {\r\n        return (0, Utils_1.tryWithRetries)(() => (0, Utils_1.httpGet)(url + \"/getInvoiceStatus?paymentHash=\" + encodeURIComponent(paymentHash), timeout, abortSignal), null, RequestError_1.RequestError, abortSignal);\r\n    }\r\n    /**\r\n     * Initiate a trusted swap from BTCLN to SC native currency, retries!\r\n     *\r\n     * @param chainIdentifier\r\n     * @param baseUrl Base url of the trusted swap intermediary\r\n     * @param init Initialization parameters\r\n     * @param timeout Timeout in milliseconds for the request\r\n     * @param abortSignal\r\n     * @throws {RequestError} If the response is non-200\r\n     */\r\n    static async initTrustedFromBTCLN(chainIdentifier, baseUrl, init, timeout, abortSignal) {\r\n        const resp = await (0, Utils_1.tryWithRetries)(() => (0, Utils_1.httpGet)(baseUrl + \"/lnforgas/createInvoice\" +\r\n            \"?address=\" + encodeURIComponent(init.address) +\r\n            \"&amount=\" + encodeURIComponent(init.amount.toString(10)) +\r\n            \"&chain=\" + encodeURIComponent(chainIdentifier) +\r\n            \"&token=\" + encodeURIComponent(init.token), timeout, abortSignal), null, RequestError_1.RequestError, abortSignal);\r\n        if (resp.code !== 10000)\r\n            throw RequestError_1.RequestError.parse(JSON.stringify(resp), 400);\r\n        return (0, SchemaVerifier_1.verifySchema)(resp.data, TrustedFromBTCLNResponseSchema);\r\n    }\r\n    /**\r\n     * Fetches the address status from the intermediary node\r\n     *\r\n     * @param url Url of the trusted intermediary\r\n     * @param paymentHash Payment hash of the swap\r\n     * @param sequence Sequence number of the swap\r\n     * @param timeout Timeout in milliseconds\r\n     * @param abortSignal\r\n     * @throws {RequestError} if non-200 http response is returned\r\n     */\r\n    static async getAddressStatus(url, paymentHash, sequence, timeout, abortSignal) {\r\n        return (0, Utils_1.tryWithRetries)(() => (0, Utils_1.httpGet)(url + \"/getAddressStatus?paymentHash=\" + encodeURIComponent(paymentHash) + \"&sequence=\" + encodeURIComponent(sequence.toString(10)), timeout, abortSignal), null, RequestError_1.RequestError, abortSignal);\r\n    }\r\n    /**\r\n     * Sets the refund address for an on-chain gas swap\r\n     *\r\n     * @param url Url of the trusted intermediary\r\n     * @param paymentHash Payment hash of the swap\r\n     * @param sequence Sequence number of the swap\r\n     * @param refundAddress Refund address to set for the swap\r\n     * @param timeout Timeout in milliseconds\r\n     * @param abortSignal\r\n     * @throws {RequestError} if non-200 http response is returned\r\n     */\r\n    static async setRefundAddress(url, paymentHash, sequence, refundAddress, timeout, abortSignal) {\r\n        return (0, Utils_1.tryWithRetries)(() => (0, Utils_1.httpGet)(url + \"/setRefundAddress\" +\r\n            \"?paymentHash=\" + encodeURIComponent(paymentHash) +\r\n            \"&sequence=\" + encodeURIComponent(sequence.toString(10)) +\r\n            \"&refundAddress=\" + encodeURIComponent(refundAddress), timeout, abortSignal), null, RequestError_1.RequestError, abortSignal);\r\n    }\r\n    /**\r\n     * Initiate a trusted swap from BTC to SC native currency, retries!\r\n     *\r\n     * @param chainIdentifier\r\n     * @param baseUrl Base url of the trusted swap intermediary\r\n     * @param init Initialization parameters\r\n     * @param timeout Timeout in milliseconds for the request\r\n     * @param abortSignal\r\n     * @throws {RequestError} If the response is non-200\r\n     */\r\n    static async initTrustedFromBTC(chainIdentifier, baseUrl, init, timeout, abortSignal) {\r\n        const resp = await (0, Utils_1.tryWithRetries)(() => (0, Utils_1.httpGet)(baseUrl + \"/frombtc_trusted/getAddress?chain=\" + encodeURIComponent(chainIdentifier) +\r\n            \"&address=\" + encodeURIComponent(init.address) +\r\n            \"&amount=\" + encodeURIComponent(init.amount.toString(10)) +\r\n            \"&refundAddress=\" + encodeURIComponent(init.refundAddress) +\r\n            \"&exactIn=true\" +\r\n            \"&token=\" + encodeURIComponent(init.token), timeout, abortSignal), null, RequestError_1.RequestError, abortSignal);\r\n        if (resp.code !== 10000)\r\n            throw RequestError_1.RequestError.parse(JSON.stringify(resp), 400);\r\n        return (0, SchemaVerifier_1.verifySchema)(resp.data, TrustedFromBTCResponseSchema);\r\n    }\r\n}\r\nexports.TrustedIntermediaryAPI = TrustedIntermediaryAPI;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LnForGasSwap = exports.isLnForGasSwapInit = exports.LnForGasSwapState = void 0;\r\nconst bolt11_1 = require(\"@atomiqlabs/bolt11\");\r\nconst SwapType_1 = require(\"../../enums/SwapType\");\r\nconst PaymentAuthError_1 = require(\"../../../errors/PaymentAuthError\");\r\nconst Utils_1 = require(\"../../../utils/Utils\");\r\nconst ISwap_1 = require(\"../../ISwap\");\r\nconst TrustedIntermediaryAPI_1 = require(\"../../../intermediaries/TrustedIntermediaryAPI\");\r\nconst Tokens_1 = require(\"../../../Tokens\");\r\nconst Fee_1 = require(\"../../fee/Fee\");\r\nvar LnForGasSwapState;\r\n(function (LnForGasSwapState) {\r\n    LnForGasSwapState[LnForGasSwapState[\"EXPIRED\"] = -2] = \"EXPIRED\";\r\n    LnForGasSwapState[LnForGasSwapState[\"FAILED\"] = -1] = \"FAILED\";\r\n    LnForGasSwapState[LnForGasSwapState[\"PR_CREATED\"] = 0] = \"PR_CREATED\";\r\n    LnForGasSwapState[LnForGasSwapState[\"PR_PAID\"] = 1] = \"PR_PAID\";\r\n    LnForGasSwapState[LnForGasSwapState[\"FINISHED\"] = 2] = \"FINISHED\";\r\n})(LnForGasSwapState = exports.LnForGasSwapState || (exports.LnForGasSwapState = {}));\r\nfunction isLnForGasSwapInit(obj) {\r\n    return typeof (obj.pr) === \"string\" &&\r\n        typeof (obj.outputAmount) === \"bigint\" &&\r\n        typeof (obj.recipient) === \"string\" &&\r\n        typeof (obj.token) === \"string\" &&\r\n        (0, ISwap_1.isISwapInit)(obj);\r\n}\r\nexports.isLnForGasSwapInit = isLnForGasSwapInit;\r\nclass LnForGasSwap extends ISwap_1.ISwap {\r\n    constructor(wrapper, initOrObj) {\r\n        if (isLnForGasSwapInit(initOrObj))\r\n            initOrObj.url += \"/lnforgas\";\r\n        super(wrapper, initOrObj);\r\n        this.currentVersion = 2;\r\n        this.TYPE = SwapType_1.SwapType.TRUSTED_FROM_BTCLN;\r\n        if (isLnForGasSwapInit(initOrObj)) {\r\n            this.state = LnForGasSwapState.PR_CREATED;\r\n        }\r\n        else {\r\n            this.pr = initOrObj.pr;\r\n            this.outputAmount = initOrObj.outputAmount == null ? null : BigInt(initOrObj.outputAmount);\r\n            this.recipient = initOrObj.recipient;\r\n            this.token = initOrObj.token;\r\n            this.scTxId = initOrObj.scTxId;\r\n        }\r\n        this.tryRecomputeSwapPrice();\r\n        if (this.pr != null) {\r\n            const decoded = (0, bolt11_1.decode)(this.pr);\r\n            this.expiry = decoded.timeExpireDate * 1000;\r\n        }\r\n        this.logger = (0, Utils_1.getLogger)(\"LnForGas(\" + this.getId() + \"): \");\r\n    }\r\n    upgradeVersion() {\r\n        if (this.version == 1) {\r\n            if (this.state === 1)\r\n                this.state = LnForGasSwapState.FINISHED;\r\n            this.version = 2;\r\n        }\r\n        if (this.version == null) {\r\n            //Noop\r\n            this.version = 1;\r\n        }\r\n    }\r\n    /**\r\n     * In case swapFee in BTC is not supplied it recalculates it based on swap price\r\n     * @protected\r\n     */\r\n    tryRecomputeSwapPrice() {\r\n        if (this.swapFeeBtc == null) {\r\n            this.swapFeeBtc = this.swapFee * this.getInput().rawAmount / this.getOutAmountWithoutFee();\r\n        }\r\n        super.tryRecomputeSwapPrice();\r\n    }\r\n    //////////////////////////////\r\n    //// Getters & utils\r\n    _getEscrowHash() {\r\n        return this.getId();\r\n    }\r\n    getOutputAddress() {\r\n        return this.recipient;\r\n    }\r\n    getInputTxId() {\r\n        return this.getId();\r\n    }\r\n    getOutputTxId() {\r\n        return this.scTxId;\r\n    }\r\n    getId() {\r\n        if (this.pr == null)\r\n            return null;\r\n        const decodedPR = (0, bolt11_1.decode)(this.pr);\r\n        return decodedPR.tagsObject.payment_hash;\r\n    }\r\n    /**\r\n     * Returns the lightning network BOLT11 invoice that needs to be paid as an input to the swap\r\n     */\r\n    getAddress() {\r\n        return this.pr;\r\n    }\r\n    /**\r\n     * Returns a string that can be displayed as QR code representation of the lightning invoice (with lightning: prefix)\r\n     */\r\n    getHyperlink() {\r\n        return \"lightning:\" + this.pr.toUpperCase();\r\n    }\r\n    requiresAction() {\r\n        return false;\r\n    }\r\n    isFinished() {\r\n        return this.state === LnForGasSwapState.FINISHED || this.state === LnForGasSwapState.FAILED || this.state === LnForGasSwapState.EXPIRED;\r\n    }\r\n    isQuoteExpired() {\r\n        return this.state === LnForGasSwapState.EXPIRED;\r\n    }\r\n    isQuoteSoftExpired() {\r\n        return this.expiry < Date.now();\r\n    }\r\n    isFailed() {\r\n        return this.state === LnForGasSwapState.FAILED;\r\n    }\r\n    isSuccessful() {\r\n        return this.state === LnForGasSwapState.FINISHED;\r\n    }\r\n    verifyQuoteValid() {\r\n        return Promise.resolve(this.expiry > Date.now());\r\n    }\r\n    //////////////////////////////\r\n    //// Amounts & fees\r\n    getOutAmountWithoutFee() {\r\n        return this.outputAmount + this.swapFee;\r\n    }\r\n    getOutput() {\r\n        return (0, Tokens_1.toTokenAmount)(this.outputAmount, this.wrapper.tokens[this.wrapper.chain.getNativeCurrencyAddress()], this.wrapper.prices);\r\n    }\r\n    getInput() {\r\n        const parsed = (0, bolt11_1.decode)(this.pr);\r\n        const amount = (BigInt(parsed.millisatoshis) + 999n) / 1000n;\r\n        return (0, Tokens_1.toTokenAmount)(amount, Tokens_1.BitcoinTokens.BTCLN, this.wrapper.prices);\r\n    }\r\n    getInputWithoutFee() {\r\n        const parsed = (0, bolt11_1.decode)(this.pr);\r\n        const amount = (BigInt(parsed.millisatoshis) + 999n) / 1000n;\r\n        return (0, Tokens_1.toTokenAmount)(amount - this.swapFeeBtc, Tokens_1.BitcoinTokens.BTCLN, this.wrapper.prices);\r\n    }\r\n    getSwapFee() {\r\n        const feeWithoutBaseFee = this.swapFeeBtc - this.pricingInfo.satsBaseFee;\r\n        const swapFeePPM = feeWithoutBaseFee * 1000000n / this.getInputWithoutFee().rawAmount;\r\n        return {\r\n            amountInSrcToken: (0, Tokens_1.toTokenAmount)(this.swapFeeBtc, Tokens_1.BitcoinTokens.BTCLN, this.wrapper.prices),\r\n            amountInDstToken: (0, Tokens_1.toTokenAmount)(this.swapFee, this.wrapper.tokens[this.wrapper.chain.getNativeCurrencyAddress()], this.wrapper.prices),\r\n            usdValue: (abortSignal, preFetchedUsdPrice) => this.wrapper.prices.getBtcUsdValue(this.swapFeeBtc, abortSignal, preFetchedUsdPrice),\r\n            composition: {\r\n                base: (0, Tokens_1.toTokenAmount)(this.pricingInfo.satsBaseFee, Tokens_1.BitcoinTokens.BTCLN, this.wrapper.prices),\r\n                percentage: (0, ISwap_1.ppmToPercentage)(swapFeePPM)\r\n            }\r\n        };\r\n    }\r\n    getFee() {\r\n        return this.getSwapFee();\r\n    }\r\n    getFeeBreakdown() {\r\n        return [{\r\n                type: Fee_1.FeeType.SWAP,\r\n                fee: this.getSwapFee()\r\n            }];\r\n    }\r\n    //////////////////////////////\r\n    //// Payment\r\n    async checkInvoicePaid(save = true) {\r\n        if (this.state === LnForGasSwapState.FAILED || this.state === LnForGasSwapState.EXPIRED)\r\n            return false;\r\n        if (this.state === LnForGasSwapState.FINISHED)\r\n            return true;\r\n        const decodedPR = (0, bolt11_1.decode)(this.pr);\r\n        const paymentHash = decodedPR.tagsObject.payment_hash;\r\n        const response = await TrustedIntermediaryAPI_1.TrustedIntermediaryAPI.getInvoiceStatus(this.url, paymentHash, this.wrapper.options.getRequestTimeout);\r\n        this.logger.debug(\"checkInvoicePaid(): LP response: \", response);\r\n        switch (response.code) {\r\n            case TrustedIntermediaryAPI_1.InvoiceStatusResponseCodes.PAID:\r\n                this.scTxId = response.data.txId;\r\n                const txStatus = await this.wrapper.chain.getTxIdStatus(this.scTxId);\r\n                if (txStatus === \"success\") {\r\n                    this.state = LnForGasSwapState.FINISHED;\r\n                    if (save)\r\n                        await this._saveAndEmit();\r\n                    return true;\r\n                }\r\n                return null;\r\n            case TrustedIntermediaryAPI_1.InvoiceStatusResponseCodes.EXPIRED:\r\n                if (this.state === LnForGasSwapState.PR_CREATED) {\r\n                    this.state = LnForGasSwapState.EXPIRED;\r\n                }\r\n                else {\r\n                    this.state = LnForGasSwapState.FAILED;\r\n                }\r\n                if (save)\r\n                    await this._saveAndEmit();\r\n                return false;\r\n            case TrustedIntermediaryAPI_1.InvoiceStatusResponseCodes.TX_SENT:\r\n                this.scTxId = response.data.txId;\r\n                if (this.state === LnForGasSwapState.PR_CREATED) {\r\n                    this.state = LnForGasSwapState.PR_PAID;\r\n                    if (save)\r\n                        await this._saveAndEmit();\r\n                }\r\n                return null;\r\n            case TrustedIntermediaryAPI_1.InvoiceStatusResponseCodes.PENDING:\r\n                if (this.state === LnForGasSwapState.PR_CREATED) {\r\n                    this.state = LnForGasSwapState.PR_PAID;\r\n                    if (save)\r\n                        await this._saveAndEmit();\r\n                }\r\n                return null;\r\n            case TrustedIntermediaryAPI_1.InvoiceStatusResponseCodes.AWAIT_PAYMENT:\r\n                return null;\r\n            default:\r\n                this.state = LnForGasSwapState.FAILED;\r\n                if (save)\r\n                    await this._saveAndEmit();\r\n                return false;\r\n        }\r\n    }\r\n    /**\r\n     * A blocking promise resolving when payment was received by the intermediary and client can continue\r\n     * rejecting in case of failure\r\n     *\r\n     * @param abortSignal Abort signal\r\n     * @param checkIntervalSeconds How often to poll the intermediary for answer\r\n     * @throws {PaymentAuthError} If swap expired or failed\r\n     * @throws {Error} When in invalid state (not PR_CREATED)\r\n     */\r\n    async waitForPayment(abortSignal, checkIntervalSeconds = 5) {\r\n        if (this.state !== LnForGasSwapState.PR_CREATED)\r\n            throw new Error(\"Must be in PR_CREATED state!\");\r\n        if (!this.initiated) {\r\n            this.initiated = true;\r\n            await this._saveAndEmit();\r\n        }\r\n        while (!abortSignal.aborted && (this.state === LnForGasSwapState.PR_CREATED || this.state === LnForGasSwapState.PR_PAID)) {\r\n            await this.checkInvoicePaid(true);\r\n            if (this.state === LnForGasSwapState.PR_CREATED || this.state === LnForGasSwapState.PR_PAID)\r\n                await (0, Utils_1.timeoutPromise)(checkIntervalSeconds * 1000, abortSignal);\r\n        }\r\n        if (this.isFailed())\r\n            throw new PaymentAuthError_1.PaymentAuthError(\"Swap failed\");\r\n        return !this.isQuoteExpired();\r\n    }\r\n    //////////////////////////////\r\n    //// Storage\r\n    serialize() {\r\n        return {\r\n            ...super.serialize(),\r\n            pr: this.pr,\r\n            outputAmount: this.outputAmount == null ? null : this.outputAmount.toString(10),\r\n            recipient: this.recipient,\r\n            token: this.token,\r\n            scTxId: this.scTxId\r\n        };\r\n    }\r\n    _getInitiator() {\r\n        return this.recipient;\r\n    }\r\n    //////////////////////////////\r\n    //// Swap ticks & sync\r\n    async _sync(save) {\r\n        if (this.state === LnForGasSwapState.PR_CREATED) {\r\n            //Check if it's maybe already paid\r\n            const res = await this.checkInvoicePaid(false);\r\n            if (res !== null) {\r\n                if (save)\r\n                    await this._saveAndEmit();\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    _tick(save) {\r\n        return Promise.resolve(false);\r\n    }\r\n}\r\nexports.LnForGasSwap = LnForGasSwap;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LnForGasWrapper = void 0;\r\nconst LnForGasSwap_1 = require(\"./LnForGasSwap\");\r\nconst ISwapWrapper_1 = require(\"../../ISwapWrapper\");\r\nconst TrustedIntermediaryAPI_1 = require(\"../../../intermediaries/TrustedIntermediaryAPI\");\r\nconst bolt11_1 = require(\"@atomiqlabs/bolt11\");\r\nconst IntermediaryError_1 = require(\"../../../errors/IntermediaryError\");\r\nconst SwapType_1 = require(\"../../enums/SwapType\");\r\nclass LnForGasWrapper extends ISwapWrapper_1.ISwapWrapper {\r\n    constructor() {\r\n        super(...arguments);\r\n        this.TYPE = SwapType_1.SwapType.TRUSTED_FROM_BTCLN;\r\n        this.swapDeserializer = LnForGasSwap_1.LnForGasSwap;\r\n        this.pendingSwapStates = [LnForGasSwap_1.LnForGasSwapState.PR_CREATED];\r\n        this.tickSwapState = null;\r\n        this.processEvent = null;\r\n    }\r\n    /**\r\n     * Returns a newly created swap, receiving 'amount' on lightning network\r\n     *\r\n     * @param signer\r\n     * @param amount            Amount you wish to receive in base units (satoshis)\r\n     * @param lpOrUrl           Intermediary/Counterparty swap service Intermediary object or raw url\r\n     */\r\n    async create(signer, amount, lpOrUrl) {\r\n        if (!this.isInitialized)\r\n            throw new Error(\"Not initialized, call init() first!\");\r\n        const lpUrl = typeof (lpOrUrl) === \"string\" ? lpOrUrl : lpOrUrl.url;\r\n        const token = this.chain.getNativeCurrencyAddress();\r\n        const resp = await TrustedIntermediaryAPI_1.TrustedIntermediaryAPI.initTrustedFromBTCLN(this.chainIdentifier, lpUrl, {\r\n            address: signer,\r\n            amount,\r\n            token\r\n        }, this.options.getRequestTimeout);\r\n        const decodedPr = (0, bolt11_1.decode)(resp.pr);\r\n        const amountIn = (BigInt(decodedPr.millisatoshis) + 999n) / 1000n;\r\n        if (resp.total !== amount)\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid total returned\");\r\n        const pricingInfo = await this.verifyReturnedPrice(typeof (lpOrUrl) === \"string\" ?\r\n            { swapFeePPM: 10000, swapBaseFee: 10 } :\r\n            lpOrUrl.services[SwapType_1.SwapType.TRUSTED_FROM_BTCLN], false, amountIn, amount, token, {});\r\n        const quote = new LnForGasSwap_1.LnForGasSwap(this, {\r\n            pr: resp.pr,\r\n            outputAmount: resp.total,\r\n            recipient: signer,\r\n            pricingInfo,\r\n            url: lpUrl,\r\n            expiry: decodedPr.timeExpireDate * 1000,\r\n            swapFee: resp.swapFee,\r\n            token,\r\n            exactIn: false\r\n        });\r\n        await quote._save();\r\n        return quote;\r\n    }\r\n}\r\nexports.LnForGasWrapper = LnForGasWrapper;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.wrapSwapWithSigner = void 0;\r\nconst IToBTCSwap_1 = require(\"../escrow_swaps/tobtc/IToBTCSwap\");\r\nconst IFromBTCSwap_1 = require(\"../escrow_swaps/frombtc/IFromBTCSwap\");\r\nconst FromBTCLNSwap_1 = require(\"../escrow_swaps/frombtc/ln/FromBTCLNSwap\");\r\nfunction wrapSwapWithSigner(swap, signer) {\r\n    return new Proxy(swap, {\r\n        get: (target, prop, receiver) => {\r\n            // Override the \"sayGoodbye\" method\r\n            if (prop === \"commit\") {\r\n                if (swap instanceof IToBTCSwap_1.IToBTCSwap || swap instanceof IFromBTCSwap_1.IFromBTCSwap) {\r\n                    return (abortSignal, skipChecks) => swap.commit(signer, abortSignal, skipChecks);\r\n                }\r\n            }\r\n            if (prop === \"refund\") {\r\n                if (swap instanceof IToBTCSwap_1.IToBTCSwap) {\r\n                    return (abortSignal) => swap.refund(signer, abortSignal);\r\n                }\r\n            }\r\n            if (prop === \"claim\") {\r\n                if (swap instanceof IFromBTCSwap_1.IFromBTCSwap) {\r\n                    return (abortSignal) => swap.claim(signer, abortSignal);\r\n                }\r\n            }\r\n            if (prop === \"commitAndClaim\") {\r\n                if (swap instanceof FromBTCLNSwap_1.FromBTCLNSwap) {\r\n                    return (abortSignal, skipChecks) => swap.commitAndClaim(signer, abortSignal, skipChecks);\r\n                }\r\n            }\r\n            // Delegate other properties and methods to the original instance\r\n            return Reflect.get(target, prop, receiver);\r\n        }\r\n    });\r\n}\r\nexports.wrapSwapWithSigner = wrapSwapWithSigner;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SwapperWithSigner = void 0;\r\nconst SwapWithSigner_1 = require(\"./SwapWithSigner\");\r\nclass SwapperWithSigner {\r\n    get prices() {\r\n        return this.swapper.prices;\r\n    }\r\n    get intermediaryDiscovery() {\r\n        return this.swapper.intermediaryDiscovery;\r\n    }\r\n    get mempoolApi() {\r\n        return this.swapper.mempoolApi;\r\n    }\r\n    get bitcoinRpc() {\r\n        return this.swapper.bitcoinRpc;\r\n    }\r\n    get bitcoinNetwork() {\r\n        return this.swapper.bitcoinNetwork;\r\n    }\r\n    get Utils() {\r\n        return this.swapper.Utils;\r\n    }\r\n    get SwapTypeInfo() {\r\n        return this.swapper.SwapTypeInfo;\r\n    }\r\n    constructor(swapper, signer) {\r\n        this.swapper = swapper;\r\n        this.signer = signer;\r\n    }\r\n    createToBTCSwap(tokenAddress, address, amount, exactIn, additionalParams, options) {\r\n        return this.swapper.createToBTCSwap(this.signer.getAddress(), tokenAddress, address, amount, exactIn, additionalParams, options)\r\n            .then(swap => (0, SwapWithSigner_1.wrapSwapWithSigner)(swap, this.signer));\r\n    }\r\n    createToBTCLNSwap(tokenAddress, paymentRequest, additionalParams, options) {\r\n        return this.swapper.createToBTCLNSwap(this.signer.getAddress(), tokenAddress, paymentRequest, additionalParams, options)\r\n            .then(swap => (0, SwapWithSigner_1.wrapSwapWithSigner)(swap, this.signer));\r\n    }\r\n    createToBTCLNSwapViaLNURL(tokenAddress, lnurlPay, amount, exactIn, additionalParams, options) {\r\n        return this.swapper.createToBTCLNSwapViaLNURL(this.signer.getAddress(), tokenAddress, lnurlPay, amount, exactIn, additionalParams, options)\r\n            .then(swap => (0, SwapWithSigner_1.wrapSwapWithSigner)(swap, this.signer));\r\n    }\r\n    createFromBTCSwap(tokenAddress, amount, exactOut, additionalParams, options) {\r\n        return this.swapper.createFromBTCSwap(this.signer.getAddress(), tokenAddress, amount, exactOut, additionalParams, options)\r\n            .then(swap => (0, SwapWithSigner_1.wrapSwapWithSigner)(swap, this.signer));\r\n    }\r\n    createFromBTCLNSwap(tokenAddress, amount, exactOut, additionalParams, options) {\r\n        return this.swapper.createFromBTCLNSwap(this.signer.getAddress(), tokenAddress, amount, exactOut, additionalParams, options)\r\n            .then(swap => (0, SwapWithSigner_1.wrapSwapWithSigner)(swap, this.signer));\r\n    }\r\n    createFromBTCLNSwapViaLNURL(tokenAddress, lnurl, amount, exactOut, additionalParams) {\r\n        return this.swapper.createFromBTCLNSwapViaLNURL(this.signer.getAddress(), tokenAddress, lnurl, amount, exactOut, additionalParams)\r\n            .then(swap => (0, SwapWithSigner_1.wrapSwapWithSigner)(swap, this.signer));\r\n    }\r\n    createTrustedLNForGasSwap(amount, trustedIntermediaryUrl) {\r\n        return this.swapper.createTrustedLNForGasSwap(this.signer.getAddress(), amount, trustedIntermediaryUrl);\r\n    }\r\n    createTrustedOnchainForGasSwap(amount, refundAddress, trustedIntermediaryUrl) {\r\n        return this.swapper.createTrustedOnchainForGasSwap(this.signer.getAddress(), amount, refundAddress, trustedIntermediaryUrl);\r\n    }\r\n    /**\r\n     * Creates a swap from srcToken to dstToken, of a specific token amount, either specifying input amount (exactIn=true)\r\n     *  or output amount (exactIn=false), NOTE: For regular -> BTC-LN (lightning) swaps the passed amount is ignored and\r\n     *  invoice's pre-set amount is used instead.\r\n     *\r\n     * @param srcToken Source token of the swap, user pays this token\r\n     * @param dstToken Destination token of the swap, user receives this token\r\n     * @param amount Amount of the swap\r\n     * @param exactIn Whether the amount specified is an input amount (exactIn=true) or an output amount (exactIn=false)\r\n     * @param addressLnurlLightningInvoice Bitcoin on-chain address, lightning invoice, LNURL-pay to pay or\r\n     *  LNURL-withdrawal to withdraw money from\r\n     */\r\n    create(srcToken, dstToken, amount, exactIn, addressLnurlLightningInvoice) {\r\n        return this.swapper.create(this.signer.getAddress(), srcToken, dstToken, amount, exactIn, addressLnurlLightningInvoice)\r\n            .then(swap => (0, SwapWithSigner_1.wrapSwapWithSigner)(swap, this.signer));\r\n    }\r\n    /**\r\n     * Returns swaps that are in-progress and are claimable for the specific chain, optionally also for a specific signer's address\r\n     */\r\n    getAllSwaps() {\r\n        return this.swapper.getAllSwaps(this.signer.getAddress());\r\n    }\r\n    /**\r\n     * Returns swaps that are in-progress and are claimable for the specific chain, optionally also for a specific signer's address\r\n     */\r\n    getActionableSwaps() {\r\n        return this.swapper.getActionableSwaps(this.signer.getAddress());\r\n    }\r\n    /**\r\n     * Returns swaps that are refundable for the specific chain, optionally also for a specific signer's address\r\n     */\r\n    getRefundableSwaps() {\r\n        return this.swapper.getRefundableSwaps(this.signer.getAddress());\r\n    }\r\n    /**\r\n     * Returns swap with a specific id (identifier) on a specific chain and optionally with a signer\r\n     */\r\n    getSwapById(id) {\r\n        return this.swapper.getSwapById(id, this.signer.getAddress());\r\n    }\r\n    /**\r\n     * Synchronizes swaps from chain, this is usually ran when SDK is initialized, deletes expired quotes\r\n     */\r\n    async _syncSwaps() {\r\n        return this.swapper._syncSwaps(this.signer.getAddress());\r\n    }\r\n    supportsSwapType(swapType) {\r\n        return this.swapper.supportsSwapType(swapType);\r\n    }\r\n    getSwapType(srcToken, dstToken) {\r\n        return this.swapper.getSwapType(srcToken, dstToken);\r\n    }\r\n    /**\r\n     * Returns minimum/maximum limits for inputs and outputs for a swap between given tokens\r\n     *\r\n     * @param srcToken\r\n     * @param dstToken\r\n     */\r\n    getSwapLimits(srcToken, dstToken) {\r\n        return this.swapper.getSwapLimits(srcToken, dstToken);\r\n    }\r\n    /**\r\n     * Returns tokens that you can swap to (if input=true) from a given token,\r\n     *  or tokens that you can swap from (if input=false) to a given token\r\n     */\r\n    getSwapCounterTokens(token, input) {\r\n        return this.swapper.getSwapCounterTokens(token, input);\r\n    }\r\n    ///////////////////////////////////\r\n    /// Deprecated\r\n    /**\r\n     * Returns swap bounds (minimums & maximums) for different swap types & tokens\r\n     * @deprecated Use getSwapLimits() instead!\r\n     */\r\n    getSwapBounds() {\r\n        return this.swapper.getSwapBounds();\r\n    }\r\n    /**\r\n     * Returns maximum possible swap amount\r\n     * @deprecated Use getSwapLimits() instead!\r\n     *\r\n     * @param type      Type of the swap\r\n     * @param token     Token of the swap\r\n     */\r\n    getMaximum(type, token) {\r\n        return this.swapper.getMaximum(type, token);\r\n    }\r\n    /**\r\n     * Returns minimum possible swap amount\r\n     * @deprecated Use getSwapLimits() instead!\r\n     *\r\n     * @param type      Type of swap\r\n     * @param token     Token of the swap\r\n     */\r\n    getMinimum(type, token) {\r\n        return this.swapper.getMinimum(type, token);\r\n    }\r\n}\r\nexports.SwapperWithSigner = SwapperWithSigner;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SwapperWithChain = void 0;\r\nconst SwapType_1 = require(\"../enums/SwapType\");\r\nconst SwapPriceWithChain_1 = require(\"../../prices/SwapPriceWithChain\");\r\nconst Tokens_1 = require(\"../../Tokens\");\r\nconst SwapperWithSigner_1 = require(\"./SwapperWithSigner\");\r\nclass SwapperWithChain {\r\n    get intermediaryDiscovery() {\r\n        return this.swapper.intermediaryDiscovery;\r\n    }\r\n    get mempoolApi() {\r\n        return this.swapper.mempoolApi;\r\n    }\r\n    get bitcoinRpc() {\r\n        return this.swapper.bitcoinRpc;\r\n    }\r\n    get bitcoinNetwork() {\r\n        return this.swapper.bitcoinNetwork;\r\n    }\r\n    get Utils() {\r\n        return this.swapper.Utils;\r\n    }\r\n    get SwapTypeInfo() {\r\n        return this.swapper.SwapTypeInfo;\r\n    }\r\n    constructor(swapper, chainIdentifier) {\r\n        this.swapper = swapper;\r\n        this.chainIdentifier = chainIdentifier;\r\n        this.prices = new SwapPriceWithChain_1.SwapPriceWithChain(swapper.prices, chainIdentifier);\r\n    }\r\n    createToBTCSwap(signer, tokenAddress, address, amount, exactIn, additionalParams, options) {\r\n        return this.swapper.createToBTCSwap(this.chainIdentifier, signer, tokenAddress, address, amount, exactIn, additionalParams, options);\r\n    }\r\n    createToBTCLNSwap(signer, tokenAddress, paymentRequest, additionalParams, options) {\r\n        return this.swapper.createToBTCLNSwap(this.chainIdentifier, signer, tokenAddress, paymentRequest, additionalParams, options);\r\n    }\r\n    createToBTCLNSwapViaLNURL(signer, tokenAddress, lnurlPay, amount, exactIn, additionalParams, options) {\r\n        return this.swapper.createToBTCLNSwapViaLNURL(this.chainIdentifier, signer, tokenAddress, lnurlPay, amount, exactIn, additionalParams, options);\r\n    }\r\n    createFromBTCSwap(signer, tokenAddress, amount, exactOut, additionalParams, options) {\r\n        return this.swapper.createFromBTCSwap(this.chainIdentifier, signer, tokenAddress, amount, exactOut, additionalParams, options);\r\n    }\r\n    createFromBTCLNSwap(signer, tokenAddress, amount, exactOut, additionalParams, options) {\r\n        return this.swapper.createFromBTCLNSwap(this.chainIdentifier, signer, tokenAddress, amount, exactOut, additionalParams, options);\r\n    }\r\n    createFromBTCLNSwapViaLNURL(signer, tokenAddress, lnurl, amount, exactOut, additionalParams) {\r\n        return this.swapper.createFromBTCLNSwapViaLNURL(this.chainIdentifier, signer, tokenAddress, lnurl, amount, exactOut, additionalParams);\r\n    }\r\n    createTrustedLNForGasSwap(signer, amount, trustedIntermediaryUrl) {\r\n        return this.swapper.createTrustedLNForGasSwap(this.chainIdentifier, signer, amount, trustedIntermediaryUrl);\r\n    }\r\n    createTrustedOnchainForGasSwap(signer, amount, refundAddress, trustedIntermediaryUrl) {\r\n        return this.swapper.createTrustedOnchainForGasSwap(this.chainIdentifier, signer, amount, refundAddress, trustedIntermediaryUrl);\r\n    }\r\n    /**\r\n     * Creates a swap from srcToken to dstToken, of a specific token amount, either specifying input amount (exactIn=true)\r\n     *  or output amount (exactIn=false), NOTE: For regular -> BTC-LN (lightning) swaps the passed amount is ignored and\r\n     *  invoice's pre-set amount is used instead.\r\n     * @deprecated Use swap() instead\r\n     *\r\n     * @param signer Smartchain (Solana, Starknet, etc.) address of the user\r\n     * @param srcToken Source token of the swap, user pays this token\r\n     * @param dstToken Destination token of the swap, user receives this token\r\n     * @param amount Amount of the swap\r\n     * @param exactIn Whether the amount specified is an input amount (exactIn=true) or an output amount (exactIn=false)\r\n     * @param addressLnurlLightningInvoice Bitcoin on-chain address, lightning invoice, LNURL-pay to pay or\r\n     *  LNURL-withdrawal to withdraw money from\r\n     */\r\n    create(signer, srcToken, dstToken, amount, exactIn, addressLnurlLightningInvoice) {\r\n        return this.swapper.create(signer, srcToken, dstToken, amount, exactIn, addressLnurlLightningInvoice);\r\n    }\r\n    /**\r\n     * Creates a swap from srcToken to dstToken, of a specific token amount, either specifying input amount (exactIn=true)\r\n     *  or output amount (exactIn=false), NOTE: For regular SmartChain -> BTC-LN (lightning) swaps the passed amount is ignored and\r\n     *  invoice's pre-set amount is used instead, use LNURL-pay for dynamic amounts\r\n     *\r\n     * @param srcToken Source token of the swap, user pays this token\r\n     * @param dstToken Destination token of the swap, user receives this token\r\n     * @param amount Amount of the swap\r\n     * @param exactIn Whether the amount specified is an input amount (exactIn=true) or an output amount (exactIn=false)\r\n     * @param src Source wallet/lnurl-withdraw of the swap\r\n     * @param dst Destination smart chain address, bitcoin on-chain address, lightning invoice, LNURL-pay\r\n     * @param options Options for the swap\r\n     */\r\n    swap(srcToken, dstToken, amount, exactIn, src, dst, options) {\r\n        return this.swapper.swap(srcToken, dstToken, amount, exactIn, src, dst, options);\r\n    }\r\n    /**\r\n     * Returns swaps that are in-progress and are claimable for the specific chain, optionally also for a specific signer's address\r\n     */\r\n    getAllSwaps(signer) {\r\n        return this.swapper.getAllSwaps(this.chainIdentifier, signer);\r\n    }\r\n    /**\r\n     * Returns swaps that are in-progress and are claimable for the specific chain, optionally also for a specific signer's address\r\n     */\r\n    getActionableSwaps(signer) {\r\n        return this.swapper.getActionableSwaps(this.chainIdentifier, signer);\r\n    }\r\n    /**\r\n     * Returns swaps that are refundable for the specific chain, optionally also for a specific signer's address\r\n     */\r\n    getRefundableSwaps(signer) {\r\n        return this.swapper.getRefundableSwaps(this.chainIdentifier, signer);\r\n    }\r\n    /**\r\n     * Returns swap with a specific id (identifier) on a specific chain and optionally with a signer\r\n     */\r\n    getSwapById(id, signer) {\r\n        return this.swapper.getSwapById(id, this.chainIdentifier, signer);\r\n    }\r\n    /**\r\n     * Synchronizes swaps from chain, this is usually ran when SDK is initialized, deletes expired quotes\r\n     */\r\n    async _syncSwaps(signer) {\r\n        return this.swapper._syncSwaps(this.chainIdentifier, signer);\r\n    }\r\n    supportsSwapType(swapType) {\r\n        return this.swapper.supportsSwapType(this.chainIdentifier, swapType);\r\n    }\r\n    getSwapType(srcToken, dstToken) {\r\n        return this.swapper.getSwapType(srcToken, dstToken);\r\n    }\r\n    /**\r\n     * Returns minimum/maximum limits for inputs and outputs for a swap between given tokens\r\n     *\r\n     * @param srcToken\r\n     * @param dstToken\r\n     */\r\n    getSwapLimits(srcToken, dstToken) {\r\n        return this.swapper.getSwapLimits(srcToken, dstToken);\r\n    }\r\n    /**\r\n     * Returns a set of supported tokens by all the intermediaries offering a specific swap service\r\n     *\r\n     * @param _swapType Swap service type to check supported tokens for\r\n     */\r\n    getSupportedTokens(_swapType) {\r\n        const tokens = [];\r\n        this.intermediaryDiscovery.intermediaries.forEach(lp => {\r\n            let swapType = _swapType;\r\n            if (swapType === SwapType_1.SwapType.FROM_BTC && this.supportsSwapType(SwapType_1.SwapType.SPV_VAULT_FROM_BTC))\r\n                swapType = SwapType_1.SwapType.SPV_VAULT_FROM_BTC;\r\n            if (lp.services[swapType] == null)\r\n                return;\r\n            if (lp.services[swapType].chainTokens == null)\r\n                return;\r\n            for (let tokenAddress of lp.services[swapType].chainTokens[this.chainIdentifier]) {\r\n                const token = this.swapper.tokens?.[this.chainIdentifier]?.[tokenAddress];\r\n                if (token != null)\r\n                    tokens.push(token);\r\n            }\r\n        });\r\n        return tokens;\r\n    }\r\n    /**\r\n     * Returns the set of supported tokens by all the intermediaries we know of offering a specific swapType service\r\n     *\r\n     * @param swapType Specific swap type for which to obtain supported tokens\r\n     */\r\n    getSupportedTokenAddresses(swapType) {\r\n        const set = new Set();\r\n        this.intermediaryDiscovery.intermediaries.forEach(lp => {\r\n            if (lp.services[swapType] == null)\r\n                return;\r\n            if (lp.services[swapType].chainTokens == null || lp.services[swapType].chainTokens[this.chainIdentifier] == null)\r\n                return;\r\n            lp.services[swapType].chainTokens[this.chainIdentifier].forEach(token => set.add(token));\r\n        });\r\n        return set;\r\n    }\r\n    /**\r\n     * Returns tokens that you can swap to (if input=true) from a given token,\r\n     *  or tokens that you can swap from (if input=false) to a given token\r\n     */\r\n    getSwapCounterTokens(token, input) {\r\n        if ((0, Tokens_1.isSCToken)(token)) {\r\n            const result = [];\r\n            if (input) {\r\n                //TO_BTC or TO_BTCLN\r\n                if (this.getSupportedTokenAddresses(SwapType_1.SwapType.TO_BTCLN).has(token.address)) {\r\n                    result.push(Tokens_1.BitcoinTokens.BTCLN);\r\n                }\r\n                if (this.getSupportedTokenAddresses(SwapType_1.SwapType.TO_BTC).has(token.address)) {\r\n                    result.push(Tokens_1.BitcoinTokens.BTC);\r\n                }\r\n            }\r\n            else {\r\n                //FROM_BTC or FROM_BTCLN\r\n                if (this.getSupportedTokenAddresses(SwapType_1.SwapType.FROM_BTCLN).has(token.address)) {\r\n                    result.push(Tokens_1.BitcoinTokens.BTCLN);\r\n                }\r\n                const fromOnchainSwapType = this.supportsSwapType(SwapType_1.SwapType.SPV_VAULT_FROM_BTC) ? SwapType_1.SwapType.SPV_VAULT_FROM_BTC : SwapType_1.SwapType.FROM_BTC;\r\n                if (this.getSupportedTokenAddresses(fromOnchainSwapType).has(token.address)) {\r\n                    result.push(Tokens_1.BitcoinTokens.BTC);\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            if (input) {\r\n                if (token.lightning) {\r\n                    return this.getSupportedTokens(SwapType_1.SwapType.FROM_BTCLN);\r\n                }\r\n                else {\r\n                    return this.getSupportedTokens(SwapType_1.SwapType.FROM_BTC);\r\n                }\r\n            }\r\n            else {\r\n                if (token.lightning) {\r\n                    return this.getSupportedTokens(SwapType_1.SwapType.TO_BTCLN);\r\n                }\r\n                else {\r\n                    return this.getSupportedTokens(SwapType_1.SwapType.TO_BTC);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * Creates a child swapper instance with a signer\r\n     *\r\n     * @param signer Signer to use for the new swapper instance\r\n     */\r\n    withChain(signer) {\r\n        return new SwapperWithSigner_1.SwapperWithSigner(this, signer);\r\n    }\r\n    ///////////////////////////////////\r\n    /// Deprecated\r\n    /**\r\n     * Returns swap bounds (minimums & maximums) for different swap types & tokens\r\n     * @deprecated Use getSwapLimits() instead!\r\n     */\r\n    getSwapBounds() {\r\n        return this.swapper.getSwapBounds(this.chainIdentifier);\r\n    }\r\n    /**\r\n     * Returns maximum possible swap amount\r\n     * @deprecated Use getSwapLimits() instead!\r\n     *\r\n     * @param type      Type of the swap\r\n     * @param token     Token of the swap\r\n     */\r\n    getMaximum(type, token) {\r\n        return this.swapper.getMaximum(this.chainIdentifier, type, token);\r\n    }\r\n    /**\r\n     * Returns minimum possible swap amount\r\n     * @deprecated Use getSwapLimits() instead!\r\n     *\r\n     * @param type      Type of swap\r\n     * @param token     Token of the swap\r\n     */\r\n    getMinimum(type, token) {\r\n        return this.swapper.getMinimum(this.chainIdentifier, type, token);\r\n    }\r\n}\r\nexports.SwapperWithChain = SwapperWithChain;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.OnchainForGasSwap = exports.isOnchainForGasSwapInit = exports.OnchainForGasSwapState = void 0;\r\nconst SwapType_1 = require(\"../../enums/SwapType\");\r\nconst PaymentAuthError_1 = require(\"../../../errors/PaymentAuthError\");\r\nconst Utils_1 = require(\"../../../utils/Utils\");\r\nconst ISwap_1 = require(\"../../ISwap\");\r\nconst TrustedIntermediaryAPI_1 = require(\"../../../intermediaries/TrustedIntermediaryAPI\");\r\nconst Tokens_1 = require(\"../../../Tokens\");\r\nconst Fee_1 = require(\"../../fee/Fee\");\r\nconst IBitcoinWallet_1 = require(\"../../../btc/wallet/IBitcoinWallet\");\r\nconst btc_signer_1 = require(\"@scure/btc-signer\");\r\nconst SingleAddressBitcoinWallet_1 = require(\"../../../btc/wallet/SingleAddressBitcoinWallet\");\r\nconst buffer_1 = require(\"buffer\");\r\nvar OnchainForGasSwapState;\r\n(function (OnchainForGasSwapState) {\r\n    OnchainForGasSwapState[OnchainForGasSwapState[\"EXPIRED\"] = -3] = \"EXPIRED\";\r\n    OnchainForGasSwapState[OnchainForGasSwapState[\"FAILED\"] = -2] = \"FAILED\";\r\n    OnchainForGasSwapState[OnchainForGasSwapState[\"REFUNDED\"] = -1] = \"REFUNDED\";\r\n    OnchainForGasSwapState[OnchainForGasSwapState[\"PR_CREATED\"] = 0] = \"PR_CREATED\";\r\n    OnchainForGasSwapState[OnchainForGasSwapState[\"FINISHED\"] = 1] = \"FINISHED\";\r\n    OnchainForGasSwapState[OnchainForGasSwapState[\"REFUNDABLE\"] = 2] = \"REFUNDABLE\";\r\n})(OnchainForGasSwapState = exports.OnchainForGasSwapState || (exports.OnchainForGasSwapState = {}));\r\nfunction isOnchainForGasSwapInit(obj) {\r\n    return typeof (obj.paymentHash) === \"string\" &&\r\n        typeof (obj.sequence) === \"bigint\" &&\r\n        typeof (obj.address) === \"string\" &&\r\n        typeof (obj.inputAmount) === \"bigint\" &&\r\n        typeof (obj.outputAmount) === \"bigint\" &&\r\n        typeof (obj.recipient) === \"string\" &&\r\n        typeof (obj.token) === \"string\" &&\r\n        (obj.refundAddress == null || typeof (obj.refundAddress) === \"string\") &&\r\n        (0, ISwap_1.isISwapInit)(obj);\r\n}\r\nexports.isOnchainForGasSwapInit = isOnchainForGasSwapInit;\r\nclass OnchainForGasSwap extends ISwap_1.ISwap {\r\n    constructor(wrapper, initOrObj) {\r\n        if (isOnchainForGasSwapInit(initOrObj))\r\n            initOrObj.url += \"/frombtc_trusted\";\r\n        super(wrapper, initOrObj);\r\n        this.getSmartChainNetworkFee = null;\r\n        this.TYPE = SwapType_1.SwapType.TRUSTED_FROM_BTC;\r\n        if (isOnchainForGasSwapInit(initOrObj)) {\r\n            this.state = OnchainForGasSwapState.PR_CREATED;\r\n        }\r\n        else {\r\n            this.paymentHash = initOrObj.paymentHash;\r\n            this.sequence = initOrObj.sequence == null ? null : BigInt(initOrObj.sequence);\r\n            this.address = initOrObj.address;\r\n            this.inputAmount = initOrObj.inputAmount == null ? null : BigInt(initOrObj.inputAmount);\r\n            this.outputAmount = initOrObj.outputAmount == null ? null : BigInt(initOrObj.outputAmount);\r\n            this.recipient = initOrObj.recipient;\r\n            this.token = initOrObj.token;\r\n            this.refundAddress = initOrObj.refundAddress;\r\n            this.scTxId = initOrObj.scTxId;\r\n            this.txId = initOrObj.txId;\r\n            this.refundTxId = initOrObj.refundTxId;\r\n        }\r\n        this.logger = (0, Utils_1.getLogger)(\"OnchainForGas(\" + this.getId() + \"): \");\r\n        this.tryRecomputeSwapPrice();\r\n    }\r\n    upgradeVersion() {\r\n        if (this.version == null) {\r\n            //Noop\r\n            this.version = 1;\r\n        }\r\n    }\r\n    /**\r\n     * In case swapFee in BTC is not supplied it recalculates it based on swap price\r\n     * @protected\r\n     */\r\n    tryRecomputeSwapPrice() {\r\n        if (this.swapFeeBtc == null) {\r\n            this.swapFeeBtc = this.swapFee * this.getInput().rawAmount / this.getOutAmountWithoutFee();\r\n        }\r\n        super.tryRecomputeSwapPrice();\r\n    }\r\n    //////////////////////////////\r\n    //// Getters & utils\r\n    _getEscrowHash() {\r\n        return this.paymentHash;\r\n    }\r\n    getOutputAddress() {\r\n        return this.recipient;\r\n    }\r\n    getInputTxId() {\r\n        return this.txId;\r\n    }\r\n    getOutputTxId() {\r\n        return this.scTxId;\r\n    }\r\n    getId() {\r\n        return this.paymentHash;\r\n    }\r\n    getAddress() {\r\n        return this.address;\r\n    }\r\n    getHyperlink() {\r\n        return \"bitcoin:\" + this.address + \"?amount=\" + encodeURIComponent((Number(this.inputAmount) / 100000000).toString(10));\r\n    }\r\n    requiresAction() {\r\n        return this.state === OnchainForGasSwapState.REFUNDABLE;\r\n    }\r\n    isFinished() {\r\n        return this.state === OnchainForGasSwapState.FINISHED || this.state === OnchainForGasSwapState.FAILED || this.state === OnchainForGasSwapState.EXPIRED || this.state === OnchainForGasSwapState.REFUNDED;\r\n    }\r\n    isQuoteExpired() {\r\n        return this.state === OnchainForGasSwapState.EXPIRED;\r\n    }\r\n    isQuoteSoftExpired() {\r\n        return this.expiry < Date.now();\r\n    }\r\n    isFailed() {\r\n        return this.state === OnchainForGasSwapState.FAILED;\r\n    }\r\n    isSuccessful() {\r\n        return this.state === OnchainForGasSwapState.FINISHED;\r\n    }\r\n    verifyQuoteValid() {\r\n        return Promise.resolve(this.expiry > Date.now());\r\n    }\r\n    //////////////////////////////\r\n    //// Amounts & fees\r\n    getOutAmountWithoutFee() {\r\n        return this.outputAmount + this.swapFee;\r\n    }\r\n    getOutput() {\r\n        return (0, Tokens_1.toTokenAmount)(this.outputAmount, this.wrapper.tokens[this.wrapper.chain.getNativeCurrencyAddress()], this.wrapper.prices);\r\n    }\r\n    getInput() {\r\n        return (0, Tokens_1.toTokenAmount)(this.inputAmount, Tokens_1.BitcoinTokens.BTC, this.wrapper.prices);\r\n    }\r\n    getInputWithoutFee() {\r\n        return (0, Tokens_1.toTokenAmount)(this.inputAmount - this.swapFeeBtc, Tokens_1.BitcoinTokens.BTC, this.wrapper.prices);\r\n    }\r\n    getSwapFee() {\r\n        const feeWithoutBaseFee = this.swapFeeBtc - this.pricingInfo.satsBaseFee;\r\n        const swapFeePPM = feeWithoutBaseFee * 1000000n / this.getInputWithoutFee().rawAmount;\r\n        return {\r\n            amountInSrcToken: (0, Tokens_1.toTokenAmount)(this.swapFeeBtc, Tokens_1.BitcoinTokens.BTC, this.wrapper.prices),\r\n            amountInDstToken: (0, Tokens_1.toTokenAmount)(this.swapFee, this.wrapper.tokens[this.wrapper.chain.getNativeCurrencyAddress()], this.wrapper.prices),\r\n            usdValue: (abortSignal, preFetchedUsdPrice) => this.wrapper.prices.getBtcUsdValue(this.swapFeeBtc, abortSignal, preFetchedUsdPrice),\r\n            composition: {\r\n                base: (0, Tokens_1.toTokenAmount)(this.pricingInfo.satsBaseFee, Tokens_1.BitcoinTokens.BTC, this.wrapper.prices),\r\n                percentage: (0, ISwap_1.ppmToPercentage)(swapFeePPM)\r\n            }\r\n        };\r\n    }\r\n    getFee() {\r\n        return this.getSwapFee();\r\n    }\r\n    getFeeBreakdown() {\r\n        return [{\r\n                type: Fee_1.FeeType.SWAP,\r\n                fee: this.getSwapFee()\r\n            }];\r\n    }\r\n    getRequiredConfirmationsCount() {\r\n        return 1;\r\n    }\r\n    async getFundedPsbt(_bitcoinWallet, feeRate) {\r\n        if (this.state !== OnchainForGasSwapState.PR_CREATED)\r\n            throw new Error(\"Swap already paid for!\");\r\n        let bitcoinWallet;\r\n        if ((0, IBitcoinWallet_1.isIBitcoinWallet)(_bitcoinWallet)) {\r\n            bitcoinWallet = _bitcoinWallet;\r\n        }\r\n        else {\r\n            bitcoinWallet = new SingleAddressBitcoinWallet_1.SingleAddressBitcoinWallet(this.wrapper.btcRpc, this.wrapper.options.bitcoinNetwork, _bitcoinWallet);\r\n        }\r\n        //TODO: Maybe re-introduce fee rate check here if passed from the user\r\n        if (feeRate == null) {\r\n            feeRate = await bitcoinWallet.getFeeRate();\r\n        }\r\n        const basePsbt = new btc_signer_1.Transaction({\r\n            allowUnknownOutputs: true,\r\n            allowLegacyWitnessUtxo: true\r\n        });\r\n        basePsbt.addOutput({\r\n            amount: this.outputAmount,\r\n            script: (0, Utils_1.toOutputScript)(this.wrapper.options.bitcoinNetwork, this.address)\r\n        });\r\n        const psbt = await bitcoinWallet.fundPsbt(basePsbt, feeRate);\r\n        //Sign every input\r\n        const signInputs = [];\r\n        for (let i = 0; i < psbt.inputsLength; i++) {\r\n            signInputs.push(i);\r\n        }\r\n        return { psbt, signInputs };\r\n    }\r\n    async submitPsbt(psbt) {\r\n        if (this.state !== OnchainForGasSwapState.PR_CREATED)\r\n            throw new Error(\"Swap already paid for!\");\r\n        //Ensure not expired\r\n        if (this.expiry < Date.now()) {\r\n            throw new Error(\"Swap expired!\");\r\n        }\r\n        const output0 = psbt.getOutput(0);\r\n        if (output0.amount !== this.outputAmount)\r\n            throw new Error(\"PSBT output amount invalid, expected: \" + this.outputAmount + \" got: \" + output0.amount);\r\n        const expectedOutputScript = (0, Utils_1.toOutputScript)(this.wrapper.options.bitcoinNetwork, this.address);\r\n        if (!expectedOutputScript.equals(output0.script))\r\n            throw new Error(\"PSBT output script invalid!\");\r\n        if (!psbt.isFinal)\r\n            psbt.finalize();\r\n        return await this.wrapper.btcRpc.sendRawTransaction(buffer_1.Buffer.from(psbt.toBytes(true, true)).toString(\"hex\"));\r\n    }\r\n    async estimateBitcoinFee(wallet, feeRate) {\r\n        const txFee = await wallet.getTransactionFee(this.address, this.inputAmount, feeRate);\r\n        return (0, Tokens_1.toTokenAmount)(txFee == null ? null : BigInt(txFee), Tokens_1.BitcoinTokens.BTC, this.wrapper.prices);\r\n    }\r\n    async sendBitcoinTransaction(wallet, feeRate) {\r\n        if (this.state !== OnchainForGasSwapState.PR_CREATED)\r\n            throw new Error(\"Swap already paid for!\");\r\n        return await wallet.sendTransaction(this.address, this.inputAmount, feeRate);\r\n    }\r\n    //////////////////////////////\r\n    //// Payment\r\n    async checkAddress(save = true) {\r\n        if (this.state === OnchainForGasSwapState.FAILED ||\r\n            this.state === OnchainForGasSwapState.EXPIRED ||\r\n            this.state === OnchainForGasSwapState.REFUNDED)\r\n            return false;\r\n        if (this.state === OnchainForGasSwapState.FINISHED)\r\n            return false;\r\n        const response = await TrustedIntermediaryAPI_1.TrustedIntermediaryAPI.getAddressStatus(this.url, this.paymentHash, this.sequence, this.wrapper.options.getRequestTimeout);\r\n        switch (response.code) {\r\n            case TrustedIntermediaryAPI_1.AddressStatusResponseCodes.AWAIT_PAYMENT:\r\n                if (this.txId != null) {\r\n                    this.txId = null;\r\n                    if (save)\r\n                        await this._save();\r\n                    return true;\r\n                }\r\n                return false;\r\n            case TrustedIntermediaryAPI_1.AddressStatusResponseCodes.AWAIT_CONFIRMATION:\r\n            case TrustedIntermediaryAPI_1.AddressStatusResponseCodes.PENDING:\r\n            case TrustedIntermediaryAPI_1.AddressStatusResponseCodes.TX_SENT:\r\n                const inputAmount = BigInt(response.data.adjustedAmount);\r\n                const outputAmount = BigInt(response.data.adjustedTotal);\r\n                const adjustedFee = response.data.adjustedFee == null ? null : BigInt(response.data.adjustedFee);\r\n                const adjustedFeeSats = response.data.adjustedFeeSats == null ? null : BigInt(response.data.adjustedFeeSats);\r\n                const txId = response.data.txId;\r\n                if (this.txId != txId ||\r\n                    this.inputAmount !== inputAmount ||\r\n                    this.outputAmount !== outputAmount) {\r\n                    this.txId = txId;\r\n                    this.inputAmount = inputAmount;\r\n                    this.outputAmount = outputAmount;\r\n                    if (adjustedFee != null)\r\n                        this.swapFee = adjustedFee;\r\n                    if (adjustedFeeSats != null)\r\n                        this.swapFeeBtc = adjustedFeeSats;\r\n                    if (save)\r\n                        await this._save();\r\n                    return true;\r\n                }\r\n                return false;\r\n            case TrustedIntermediaryAPI_1.AddressStatusResponseCodes.PAID:\r\n                const txStatus = await this.wrapper.chain.getTxIdStatus(response.data.txId);\r\n                if (txStatus === \"success\") {\r\n                    this.state = OnchainForGasSwapState.FINISHED;\r\n                    this.scTxId = response.data.txId;\r\n                    if (save)\r\n                        await this._saveAndEmit();\r\n                    return true;\r\n                }\r\n                return false;\r\n            case TrustedIntermediaryAPI_1.AddressStatusResponseCodes.EXPIRED:\r\n                this.state = OnchainForGasSwapState.EXPIRED;\r\n                if (save)\r\n                    await this._saveAndEmit();\r\n                return true;\r\n            case TrustedIntermediaryAPI_1.AddressStatusResponseCodes.REFUNDABLE:\r\n                if (this.state === OnchainForGasSwapState.REFUNDABLE)\r\n                    return null;\r\n                this.state = OnchainForGasSwapState.REFUNDABLE;\r\n                if (save)\r\n                    await this._saveAndEmit();\r\n                return true;\r\n            case TrustedIntermediaryAPI_1.AddressStatusResponseCodes.REFUNDED:\r\n                this.state = OnchainForGasSwapState.REFUNDED;\r\n                this.refundTxId = response.data.txId;\r\n                if (save)\r\n                    await this._saveAndEmit();\r\n                return true;\r\n            default:\r\n                this.state = OnchainForGasSwapState.FAILED;\r\n                if (save)\r\n                    await this._saveAndEmit();\r\n                return true;\r\n        }\r\n    }\r\n    async setRefundAddress(refundAddress) {\r\n        if (this.refundAddress != null) {\r\n            if (this.refundAddress !== refundAddress)\r\n                throw new Error(\"Different refund address already set!\");\r\n            return;\r\n        }\r\n        await TrustedIntermediaryAPI_1.TrustedIntermediaryAPI.setRefundAddress(this.url, this.paymentHash, this.sequence, refundAddress, this.wrapper.options.getRequestTimeout);\r\n        this.refundAddress = refundAddress;\r\n    }\r\n    /**\r\n     * A blocking promise resolving when payment was received by the intermediary and client can continue\r\n     * rejecting in case of failure\r\n     *\r\n     * @param abortSignal Abort signal\r\n     * @param checkIntervalSeconds How often to poll the intermediary for answer\r\n     * @param updateCallback Callback called when txId is found, and also called with subsequent confirmations\r\n     * @throws {PaymentAuthError} If swap expired or failed\r\n     * @throws {Error} When in invalid state (not PR_CREATED)\r\n     */\r\n    async waitForBitcoinTransaction(abortSignal, checkIntervalSeconds = 5, updateCallback) {\r\n        if (this.state !== OnchainForGasSwapState.PR_CREATED)\r\n            throw new Error(\"Must be in PR_CREATED state!\");\r\n        if (!this.initiated) {\r\n            this.initiated = true;\r\n            await this._saveAndEmit();\r\n        }\r\n        while (!abortSignal.aborted &&\r\n            this.state === OnchainForGasSwapState.PR_CREATED) {\r\n            await this.checkAddress(true);\r\n            if (this.txId != null && updateCallback != null) {\r\n                const res = await this.wrapper.btcRpc.getTransaction(this.txId);\r\n                if (res == null) {\r\n                    updateCallback(null, null, 1, null);\r\n                }\r\n                else if (res.confirmations > 0) {\r\n                    updateCallback(res.txid, res.confirmations, 1, 0);\r\n                }\r\n                else {\r\n                    const delay = await this.wrapper.btcRpc.getConfirmationDelay(res, 1);\r\n                    updateCallback(res.txid, 0, 1, delay);\r\n                }\r\n            }\r\n            if (this.state === OnchainForGasSwapState.PR_CREATED)\r\n                await (0, Utils_1.timeoutPromise)(checkIntervalSeconds * 1000, abortSignal);\r\n        }\r\n        if (this.state === OnchainForGasSwapState.REFUNDABLE ||\r\n            this.state === OnchainForGasSwapState.REFUNDED)\r\n            return this.txId;\r\n        if (this.isQuoteExpired())\r\n            throw new PaymentAuthError_1.PaymentAuthError(\"Swap expired\");\r\n        if (this.isFailed())\r\n            throw new PaymentAuthError_1.PaymentAuthError(\"Swap failed\");\r\n        return this.txId;\r\n    }\r\n    async waitTillRefunded(abortSignal, checkIntervalSeconds = 5) {\r\n        if (this.state === OnchainForGasSwapState.REFUNDED)\r\n            return;\r\n        if (this.state !== OnchainForGasSwapState.REFUNDABLE)\r\n            throw new Error(\"Must be in REFUNDABLE state!\");\r\n        while (!abortSignal.aborted &&\r\n            this.state === OnchainForGasSwapState.REFUNDABLE) {\r\n            await this.checkAddress(true);\r\n            if (this.state === OnchainForGasSwapState.REFUNDABLE)\r\n                await (0, Utils_1.timeoutPromise)(checkIntervalSeconds * 1000, abortSignal);\r\n        }\r\n        if (this.isQuoteExpired())\r\n            throw new PaymentAuthError_1.PaymentAuthError(\"Swap expired\");\r\n        if (this.isFailed())\r\n            throw new PaymentAuthError_1.PaymentAuthError(\"Swap failed\");\r\n    }\r\n    async requestRefund(refundAddress, abortSignal) {\r\n        if (refundAddress != null)\r\n            await this.setRefundAddress(refundAddress);\r\n        await this.waitTillRefunded(abortSignal);\r\n    }\r\n    //////////////////////////////\r\n    //// Storage\r\n    serialize() {\r\n        return {\r\n            ...super.serialize(),\r\n            paymentHash: this.paymentHash,\r\n            sequence: this.sequence == null ? null : this.sequence.toString(10),\r\n            address: this.address,\r\n            inputAmount: this.inputAmount == null ? null : this.inputAmount.toString(10),\r\n            outputAmount: this.outputAmount == null ? null : this.outputAmount.toString(10),\r\n            recipient: this.recipient,\r\n            token: this.token,\r\n            refundAddress: this.refundAddress,\r\n            scTxId: this.scTxId,\r\n            txId: this.txId,\r\n            refundTxId: this.refundTxId,\r\n        };\r\n    }\r\n    _getInitiator() {\r\n        return this.recipient;\r\n    }\r\n    //////////////////////////////\r\n    //// Swap ticks & sync\r\n    async _sync(save) {\r\n        if (this.state === OnchainForGasSwapState.PR_CREATED) {\r\n            //Check if it's maybe already paid\r\n            const result = await this.checkAddress(false);\r\n            if (result) {\r\n                if (save)\r\n                    await this._saveAndEmit();\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    _tick(save) {\r\n        return Promise.resolve(false);\r\n    }\r\n}\r\nexports.OnchainForGasSwap = OnchainForGasSwap;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.OnchainForGasWrapper = void 0;\r\nconst ISwapWrapper_1 = require(\"../../ISwapWrapper\");\r\nconst TrustedIntermediaryAPI_1 = require(\"../../../intermediaries/TrustedIntermediaryAPI\");\r\nconst IntermediaryError_1 = require(\"../../../errors/IntermediaryError\");\r\nconst OnchainForGasSwap_1 = require(\"./OnchainForGasSwap\");\r\nconst SwapType_1 = require(\"../../enums/SwapType\");\r\nclass OnchainForGasWrapper extends ISwapWrapper_1.ISwapWrapper {\r\n    /**\r\n     * @param chainIdentifier\r\n     * @param unifiedStorage Storage interface for the current environment\r\n     * @param unifiedChainEvents On-chain event listener\r\n     * @param chain\r\n     * @param prices Pricing to use\r\n     * @param tokens\r\n     * @param btcRpc Bitcoin RPC which also supports getting transactions by txoHash\r\n     * @param options\r\n     * @param events Instance to use for emitting events\r\n     */\r\n    constructor(chainIdentifier, unifiedStorage, unifiedChainEvents, chain, prices, tokens, btcRpc, options, events) {\r\n        super(chainIdentifier, unifiedStorage, unifiedChainEvents, chain, prices, tokens, options, events);\r\n        this.TYPE = SwapType_1.SwapType.TRUSTED_FROM_BTC;\r\n        this.swapDeserializer = OnchainForGasSwap_1.OnchainForGasSwap;\r\n        this.pendingSwapStates = [OnchainForGasSwap_1.OnchainForGasSwapState.PR_CREATED];\r\n        this.tickSwapState = null;\r\n        this.processEvent = null;\r\n        this.btcRpc = btcRpc;\r\n    }\r\n    /**\r\n     * Returns a newly created swap, receiving 'amount' base units of gas token\r\n     *\r\n     * @param signer\r\n     * @param amount            Amount you wish to receive in base units\r\n     * @param lpOrUrl           Intermediary/Counterparty swap service Intermediary object or raw url\r\n     * @param refundAddress     Bitcoin address to receive refund on in case the counterparty cannot execute the swap\r\n     */\r\n    async create(signer, amount, lpOrUrl, refundAddress) {\r\n        if (!this.isInitialized)\r\n            throw new Error(\"Not initialized, call init() first!\");\r\n        const lpUrl = typeof (lpOrUrl) === \"string\" ? lpOrUrl : lpOrUrl.url;\r\n        const token = this.chain.getNativeCurrencyAddress();\r\n        const resp = await TrustedIntermediaryAPI_1.TrustedIntermediaryAPI.initTrustedFromBTC(this.chainIdentifier, lpUrl, {\r\n            address: signer,\r\n            amount,\r\n            refundAddress,\r\n            token\r\n        }, this.options.getRequestTimeout);\r\n        if (resp.total !== amount)\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid total returned\");\r\n        const pricingInfo = await this.verifyReturnedPrice(typeof (lpOrUrl) === \"string\" ?\r\n            { swapFeePPM: 10000, swapBaseFee: 10 } :\r\n            lpOrUrl.services[SwapType_1.SwapType.TRUSTED_FROM_BTC], false, resp.amountSats, amount, this.chain.getNativeCurrencyAddress(), {});\r\n        const quote = new OnchainForGasSwap_1.OnchainForGasSwap(this, {\r\n            paymentHash: resp.paymentHash,\r\n            sequence: resp.sequence,\r\n            address: resp.btcAddress,\r\n            inputAmount: resp.amountSats,\r\n            outputAmount: resp.total,\r\n            recipient: signer,\r\n            refundAddress,\r\n            pricingInfo,\r\n            url: lpUrl,\r\n            expiry: resp.expiresAt,\r\n            swapFee: resp.swapFee,\r\n            swapFeeBtc: resp.swapFeeSats,\r\n            exactIn: false,\r\n            token\r\n        });\r\n        await quote._save();\r\n        return quote;\r\n    }\r\n}\r\nexports.OnchainForGasWrapper = OnchainForGasWrapper;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.IndexedDBUnifiedStorage = void 0;\r\nconst Utils_1 = require(\"../utils/Utils\");\r\nfunction toCompositeIndex(values) {\r\n    if (values.length === 0)\r\n        return [];\r\n    if (values.length === 1) {\r\n        return values[0];\r\n    }\r\n    else {\r\n        const compositeArray = [];\r\n        const firstValues = values.shift();\r\n        const restValues = toCompositeIndex(values);\r\n        for (let value of firstValues) {\r\n            for (let restValue of restValues) {\r\n                compositeArray.push([value].concat(restValue));\r\n            }\r\n        }\r\n        return compositeArray;\r\n    }\r\n}\r\nfunction matches(conditions, obj) {\r\n    for (let condition of conditions) {\r\n        let value = obj[condition.key];\r\n        if (!condition.values.has(value))\r\n            return false;\r\n    }\r\n    return true;\r\n}\r\nfunction toSetConditions(input) {\r\n    return input.map(val => {\r\n        return {\r\n            key: val.key,\r\n            values: Array.isArray(val.value) ? new Set(val.value) : new Set([val.value])\r\n        };\r\n    });\r\n}\r\nconst indexes = {\r\n    \"escrowHash\": { key: \"escrowHash\", unique: true },\r\n    \"type\": { key: \"type\", unique: false },\r\n    \"initiator\": { key: \"initiator\", unique: false },\r\n    \"initiator, id\": { key: [\"initiator\", \"id\"], unique: false },\r\n    \"type, state\": { key: [\"type\", \"state\"], unique: false },\r\n    \"type, paymentHash\": { key: [\"type\", \"paymentHash\"], unique: false },\r\n    \"type, initiator, state\": { key: [\"type\", \"initiator\", \"state\"], unique: false }\r\n};\r\nclass IndexedDBUnifiedStorage {\r\n    constructor(storageKey) {\r\n        this.storageKey = storageKey;\r\n        this.logger = (0, Utils_1.getLogger)(\"IndexedDBUnifiedStorage(\" + this.storageKey + \"): \");\r\n    }\r\n    //Reviver also needs to update the swap to the latest version\r\n    async tryMigrateLocalStorage(storageKey, swapType, reviver) {\r\n        const txt = window.localStorage.getItem(storageKey);\r\n        if (txt == null)\r\n            return false;\r\n        let data;\r\n        try {\r\n            data = JSON.parse(txt);\r\n        }\r\n        catch (e) {\r\n            this.logger.warn(\"tryMigrate(\" + storageKey + \"): Tried to migrate the database, but cannot parse old local storage!\");\r\n            return false;\r\n        }\r\n        let swaps = Object.keys(data).map(id => {\r\n            let swapData = data[id];\r\n            swapData.type = swapType;\r\n            return reviver(swapData);\r\n        });\r\n        await this.saveAll(swaps.map(swap => swap.serialize()));\r\n        window.localStorage.removeItem(storageKey);\r\n        this.logger.info(\"tryMigrate(\" + storageKey + \"): Database successfully migrated from localStorage to unifiedIndexedDB!\");\r\n        return true;\r\n    }\r\n    //Reviver also needs to update the swap to the latest version\r\n    async tryMigrateOldIndexedDB(storageKey, swapType, reviver) {\r\n        const databases = await window.indexedDB.databases();\r\n        if (databases.find(val => val.name === storageKey) == null) {\r\n            this.logger.info(\"tryMigrateOldIndexedDB(\" + storageKey + \"): Old database not found!\");\r\n            return false;\r\n        }\r\n        this.logger.debug(\"tryMigrateOldIndexedDB(\" + storageKey + \"): Old database found!\");\r\n        let db;\r\n        try {\r\n            db = await new Promise((resolve, reject) => {\r\n                const request = window.indexedDB.open(storageKey, 1);\r\n                request.onerror = (e) => reject(e);\r\n                request.onsuccess = (e) => resolve(e.target.result);\r\n            });\r\n        }\r\n        catch (e) {\r\n            this.logger.warn(\"tryMigrateOldIndexedDB(\" + storageKey + \"): Error opening old IndexedDB!\", e);\r\n            return false;\r\n        }\r\n        this.logger.debug(\"tryMigrateOldIndexedDB(\" + storageKey + \"): Connection opened!\");\r\n        try {\r\n            const data = await new Promise((resolve, reject) => {\r\n                const tx = db.transaction(\"swaps\", \"readonly\", { durability: \"strict\" });\r\n                const store = tx.objectStore(\"swaps\");\r\n                const req = store.getAll();\r\n                req.onsuccess = (event) => resolve(event.target.result);\r\n                req.onerror = (event) => reject(event);\r\n            });\r\n            this.logger.debug(\"tryMigrateOldIndexedDB(\" + storageKey + \"): Data retrieved!\");\r\n            let swaps = data.map(({ id, data }) => {\r\n                data.type = swapType;\r\n                return reviver(data);\r\n            });\r\n            this.logger.debug(\"tryMigrateOldIndexedDB(\" + storageKey + \"): Data revived!\");\r\n            await this.saveAll(swaps.map(swap => swap.serialize()));\r\n            this.logger.debug(\"tryMigrateOldIndexedDB(\" + storageKey + \"): Data saved!\");\r\n            //Remove the old database\r\n            db.close();\r\n            this.logger.debug(\"tryMigrateOldIndexedDB(\" + storageKey + \"): DB connection closed!\");\r\n            await new Promise((resolve, reject) => {\r\n                const res = window.indexedDB.deleteDatabase(storageKey);\r\n                res.onsuccess = () => resolve();\r\n                res.onerror = (e) => reject(e);\r\n            });\r\n            this.logger.info(\"tryMigrateOldIndexedDB(\" + storageKey + \"): Database successfully migrated from oldIndexedDB to unifiedIndexedDB!\");\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            this.logger.warn(\"tryMigrateOldIndexedDB(\" + storageKey + \"): Tried to migrate the database, but cannot parse oldIndexedDB!\", e);\r\n            return false;\r\n        }\r\n    }\r\n    //NOTE: Reviver also needs to update the swap to the latest version\r\n    async tryMigrate(storageKeys, reviver) {\r\n        let someMigrated = false;\r\n        for (let storageKey of storageKeys) {\r\n            this.logger.info(\"tryMigrate(): Trying to migrate...\", storageKey);\r\n            if (await this.tryMigrateLocalStorage(storageKey[0], storageKey[1], reviver))\r\n                someMigrated = true;\r\n            if (await this.tryMigrateOldIndexedDB(storageKey[0], storageKey[1], reviver))\r\n                someMigrated = true;\r\n        }\r\n        return someMigrated;\r\n    }\r\n    executeTransaction(cbk, readonly) {\r\n        return new Promise((resolve, reject) => {\r\n            const tx = this.db.transaction(\"swaps\", readonly ? \"readonly\" : \"readwrite\", { durability: \"strict\" });\r\n            const req = cbk(tx.objectStore(\"swaps\"));\r\n            req.onsuccess = (event) => resolve(event.target.result);\r\n            req.onerror = (event) => reject(event);\r\n        });\r\n    }\r\n    executeTransactionArr(cbk, readonly) {\r\n        const tx = this.db.transaction(\"swaps\", readonly ? \"readonly\" : \"readwrite\", { durability: \"strict\" });\r\n        const reqs = cbk(tx.objectStore(\"swaps\"));\r\n        return Promise.all(reqs.map(req => new Promise((resolve, reject) => {\r\n            req.onsuccess = (event) => resolve(event.target.result);\r\n            req.onerror = (event) => reject(event);\r\n        })));\r\n    }\r\n    executeTransactionWithCursor(cbk, valueCbk) {\r\n        return new Promise((resolve, reject) => {\r\n            const tx = this.db.transaction(\"swaps\", \"readonly\", { durability: \"strict\" });\r\n            const cursorRequests = cbk(tx.objectStore(\"swaps\"));\r\n            const resultObjects = [];\r\n            for (let cursorRequest of cursorRequests) {\r\n                cursorRequest.onsuccess = (event) => {\r\n                    const cursor = event.target.result;\r\n                    if (cursor != null) {\r\n                        const value = cursor.value;\r\n                        if (valueCbk(value))\r\n                            resultObjects.push(value);\r\n                        cursor.continue();\r\n                    }\r\n                    else {\r\n                        resolve(resultObjects);\r\n                    }\r\n                };\r\n                cursorRequest.onerror = (event) => reject(event);\r\n            }\r\n        });\r\n    }\r\n    async init() {\r\n        if (this.db == null) {\r\n            this.db = await new Promise((resolve, reject) => {\r\n                const request = window.indexedDB.open(this.storageKey, 1);\r\n                request.onupgradeneeded = (event) => {\r\n                    const db = event.target.result;\r\n                    const objectStore = db.createObjectStore(\"swaps\", { keyPath: \"id\" });\r\n                    Object.keys(indexes).forEach(name => {\r\n                        const index = indexes[name];\r\n                        objectStore.createIndex(name, index.key, { unique: index.unique });\r\n                    });\r\n                };\r\n                request.onerror = (e) => reject(e);\r\n                request.onsuccess = (e) => resolve(e.target.result);\r\n            });\r\n        }\r\n    }\r\n    /**\r\n     * Params are specified in the following way:\r\n     *  - [[condition1, condition2]] - returns all rows where condition1 AND condition2 is met\r\n     *  - [[condition1], [condition2]] - returns all rows where condition1 OR condition2 is met\r\n     *  - [[condition1, condition2], [condition3]] - returns all rows where (condition1 AND condition2) OR condition3 is met\r\n     * @param params\r\n     */\r\n    async query(params) {\r\n        if (params.length === 0)\r\n            return await this.querySingle([]);\r\n        const results = await Promise.all(params.map(singleParam => this.querySingle(singleParam)));\r\n        const resultSet = new Set(results.flat()); //Deduplicate\r\n        return Array.from(resultSet);\r\n    }\r\n    async querySingle(params) {\r\n        if (params.length === 0) {\r\n            return await this.executeTransaction((objectStore) => objectStore.getAll(), true);\r\n        }\r\n        const queryKeys = params.map(param => param.key);\r\n        const requiredIndex = queryKeys.join(\", \");\r\n        if (requiredIndex === \"id\") {\r\n            //ID is the index\r\n            const values = Array.isArray(params[0].value) ? params[0].value : [params[0].value];\r\n            const res = await this.executeTransactionArr((objectStore) => {\r\n                return values.map(val => objectStore.getAll(val));\r\n            }, true);\r\n            return res.flat();\r\n        }\r\n        else if (indexes[requiredIndex] != null) {\r\n            //Index exists\r\n            const values = params.map(param => Array.isArray(param.value) ? param.value : [param.value]);\r\n            const compositeIndexQueries = toCompositeIndex(values);\r\n            const resp = await this.executeTransactionArr(objectStore => {\r\n                const index = objectStore.index(requiredIndex);\r\n                return compositeIndexQueries.map(indexQuery => index.getAll(indexQuery));\r\n            }, true);\r\n            return resp.flat();\r\n        }\r\n        else {\r\n            //Need to go over all values\r\n            this.logger.warn(\"query(): Index cannot be used for query, required index: \" + requiredIndex + \" query params: \", params);\r\n            const setConditions = toSetConditions(params);\r\n            return await this.executeTransactionWithCursor(objectStore => [objectStore.openCursor()], (val) => matches(setConditions, val));\r\n        }\r\n    }\r\n    async remove(object) {\r\n        await this.executeTransaction(store => store.delete(object.id), false)\r\n            .catch(() => null);\r\n    }\r\n    async removeAll(arr) {\r\n        if (arr.length === 0)\r\n            return;\r\n        await this.executeTransactionArr(store => arr.map(object => {\r\n            return store.delete(object.id);\r\n        }), false);\r\n    }\r\n    async save(object) {\r\n        await this.executeTransaction(store => store.put(object), false);\r\n    }\r\n    async saveAll(arr) {\r\n        if (arr.length === 0)\r\n            return;\r\n        await this.executeTransactionArr(store => arr.map(object => {\r\n            return store.put(object);\r\n        }), false);\r\n    }\r\n}\r\nexports.IndexedDBUnifiedStorage = IndexedDBUnifiedStorage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UnifiedSwapStorage = void 0;\r\nconst Utils_1 = require(\"../utils/Utils\");\r\nconst logger = (0, Utils_1.getLogger)(\"UnifiedSwapStorage: \");\r\nconst indexes = [\r\n    { key: \"id\", type: \"string\", unique: true, nullable: false },\r\n    { key: \"escrowHash\", type: \"string\", unique: true, nullable: true },\r\n    { key: \"type\", type: \"number\", unique: false, nullable: false },\r\n    { key: \"initiator\", type: \"string\", unique: false, nullable: false },\r\n    { key: \"state\", type: \"number\", unique: false, nullable: false },\r\n    { key: \"paymentHash\", type: \"string\", unique: false, nullable: true },\r\n];\r\nconst compositeIndexes = [\r\n    { keys: [\"initiator\", \"id\"], unique: false },\r\n    { keys: [\"type\", \"state\"], unique: false },\r\n    { keys: [\"type\", \"paymentHash\"], unique: false },\r\n    { keys: [\"type\", \"initiator\", \"state\"], unique: false }\r\n];\r\nclass UnifiedSwapStorage {\r\n    constructor(storage, noWeakRefMap) {\r\n        this.weakRefCache = new Map();\r\n        this.storage = storage;\r\n        this.noWeakRefMap = noWeakRefMap;\r\n    }\r\n    init() {\r\n        return this.storage.init(indexes, compositeIndexes);\r\n    }\r\n    /**\r\n     * Params are specified in the following way:\r\n     *  - [[condition1, condition2]] - returns all rows where condition1 AND condition2 is met\r\n     *  - [[condition1], [condition2]] - returns all rows where condition1 OR condition2 is met\r\n     *  - [[condition1, condition2], [condition3]] - returns all rows where (condition1 AND condition2) OR condition3 is met\r\n     * @param params\r\n     * @param reviver\r\n     */\r\n    async query(params, reviver) {\r\n        const rawSwaps = await this.storage.query(params);\r\n        return rawSwaps.map(rawObj => {\r\n            if (!this.noWeakRefMap) {\r\n                const savedRef = this.weakRefCache.get(rawObj.id)?.deref();\r\n                if (savedRef != null)\r\n                    return savedRef;\r\n                logger.debug(\"query(): Reviving new swap instance: \" + rawObj.id);\r\n            }\r\n            const value = reviver(rawObj);\r\n            if (!this.noWeakRefMap)\r\n                this.weakRefCache.set(rawObj.id, new WeakRef(value));\r\n            return value;\r\n        });\r\n    }\r\n    save(value) {\r\n        if (!this.noWeakRefMap)\r\n            this.weakRefCache.set(value.getId(), new WeakRef(value));\r\n        return this.storage.save(value.serialize());\r\n    }\r\n    saveAll(values) {\r\n        if (!this.noWeakRefMap)\r\n            values.forEach(value => this.weakRefCache.set(value.getId(), new WeakRef(value)));\r\n        return this.storage.saveAll(values.map(obj => obj.serialize()));\r\n    }\r\n    remove(value) {\r\n        if (!this.noWeakRefMap)\r\n            this.weakRefCache.delete(value.getId());\r\n        return this.storage.remove(value.serialize());\r\n    }\r\n    removeAll(values) {\r\n        if (!this.noWeakRefMap)\r\n            values.forEach(value => this.weakRefCache.delete(value.getId()));\r\n        return this.storage.removeAll(values.map(obj => obj.serialize()));\r\n    }\r\n}\r\nexports.UnifiedSwapStorage = UnifiedSwapStorage;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.UnifiedSwapEventListener = void 0;\r\nconst base_1 = require(\"@atomiqlabs/base\");\r\nfunction chainEventToEscrowHash(event) {\r\n    if (event instanceof base_1.SwapEvent)\r\n        return event.escrowHash;\r\n    if (event instanceof base_1.SpvVaultFrontEvent ||\r\n        event instanceof base_1.SpvVaultClaimEvent ||\r\n        event instanceof base_1.SpvVaultCloseEvent)\r\n        return event.btcTxId;\r\n}\r\nclass UnifiedSwapEventListener {\r\n    constructor(unifiedStorage, events) {\r\n        this.listeners = {};\r\n        this.storage = unifiedStorage;\r\n        this.events = events;\r\n    }\r\n    async processEvents(events) {\r\n        const swapsByEscrowHash = {};\r\n        events.forEach(event => {\r\n            swapsByEscrowHash[chainEventToEscrowHash(event)] = null;\r\n        });\r\n        const swaps = await this.storage.query([\r\n            [{ key: \"escrowHash\", value: Object.keys(swapsByEscrowHash) }]\r\n        ], (val) => {\r\n            const obj = this.listeners[val.type];\r\n            if (obj == null)\r\n                return null;\r\n            return new obj.reviver(val);\r\n        });\r\n        swaps.forEach(swap => swapsByEscrowHash[swap._getEscrowHash()] = swap);\r\n        for (let event of events) {\r\n            const swap = swapsByEscrowHash[chainEventToEscrowHash(event)];\r\n            if (swap == null)\r\n                continue;\r\n            const obj = this.listeners[swap.getType()];\r\n            if (obj == null)\r\n                continue;\r\n            await obj.listener(event, swap);\r\n        }\r\n    }\r\n    async start() {\r\n        if (this.listener != null)\r\n            return;\r\n        await this.storage.init();\r\n        await this.events.init();\r\n        this.events.registerListener(this.listener = async (events) => {\r\n            await this.processEvents(events);\r\n            return true;\r\n        });\r\n    }\r\n    stop() {\r\n        this.events.unregisterListener(this.listener);\r\n        return this.events.stop();\r\n    }\r\n    registerListener(type, listener, reviver) {\r\n        this.listeners[type] = {\r\n            listener,\r\n            reviver\r\n        };\r\n    }\r\n    unregisterListener(type) {\r\n        if (this.listeners[type])\r\n            return false;\r\n        delete this.listeners[type];\r\n        return true;\r\n    }\r\n}\r\nexports.UnifiedSwapEventListener = UnifiedSwapEventListener;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SpvFromBTCSwap = exports.isSpvFromBTCSwapInit = exports.SpvFromBTCSwapState = void 0;\r\nconst ISwap_1 = require(\"../ISwap\");\r\nconst base_1 = require(\"@atomiqlabs/base\");\r\nconst SwapType_1 = require(\"../enums/SwapType\");\r\nconst Utils_1 = require(\"../../utils/Utils\");\r\nconst btc_signer_1 = require(\"@scure/btc-signer\");\r\nconst Tokens_1 = require(\"../../Tokens\");\r\nconst buffer_1 = require(\"buffer\");\r\nconst Fee_1 = require(\"../fee/Fee\");\r\nconst IBitcoinWallet_1 = require(\"../../btc/wallet/IBitcoinWallet\");\r\nconst IntermediaryAPI_1 = require(\"../../intermediaries/IntermediaryAPI\");\r\nconst SingleAddressBitcoinWallet_1 = require(\"../../btc/wallet/SingleAddressBitcoinWallet\");\r\nvar SpvFromBTCSwapState;\r\n(function (SpvFromBTCSwapState) {\r\n    SpvFromBTCSwapState[SpvFromBTCSwapState[\"CLOSED\"] = -5] = \"CLOSED\";\r\n    SpvFromBTCSwapState[SpvFromBTCSwapState[\"FAILED\"] = -4] = \"FAILED\";\r\n    SpvFromBTCSwapState[SpvFromBTCSwapState[\"DECLINED\"] = -3] = \"DECLINED\";\r\n    SpvFromBTCSwapState[SpvFromBTCSwapState[\"QUOTE_EXPIRED\"] = -2] = \"QUOTE_EXPIRED\";\r\n    SpvFromBTCSwapState[SpvFromBTCSwapState[\"QUOTE_SOFT_EXPIRED\"] = -1] = \"QUOTE_SOFT_EXPIRED\";\r\n    SpvFromBTCSwapState[SpvFromBTCSwapState[\"CREATED\"] = 0] = \"CREATED\";\r\n    SpvFromBTCSwapState[SpvFromBTCSwapState[\"SIGNED\"] = 1] = \"SIGNED\";\r\n    SpvFromBTCSwapState[SpvFromBTCSwapState[\"POSTED\"] = 2] = \"POSTED\";\r\n    SpvFromBTCSwapState[SpvFromBTCSwapState[\"BROADCASTED\"] = 3] = \"BROADCASTED\";\r\n    SpvFromBTCSwapState[SpvFromBTCSwapState[\"FRONTED\"] = 4] = \"FRONTED\";\r\n    SpvFromBTCSwapState[SpvFromBTCSwapState[\"BTC_TX_CONFIRMED\"] = 5] = \"BTC_TX_CONFIRMED\";\r\n    SpvFromBTCSwapState[SpvFromBTCSwapState[\"CLAIMED\"] = 6] = \"CLAIMED\"; //Funds claimed\r\n})(SpvFromBTCSwapState = exports.SpvFromBTCSwapState || (exports.SpvFromBTCSwapState = {}));\r\nfunction isSpvFromBTCSwapInit(obj) {\r\n    return typeof obj === \"object\" &&\r\n        typeof (obj.quoteId) === \"string\" &&\r\n        typeof (obj.recipient) === \"string\" &&\r\n        typeof (obj.vaultOwner) === \"string\" &&\r\n        typeof (obj.vaultId) === \"bigint\" &&\r\n        typeof (obj.vaultRequiredConfirmations) === \"number\" &&\r\n        Array.isArray(obj.vaultTokenMultipliers) && obj.vaultTokenMultipliers.reduce((prev, curr) => prev && typeof (curr) === \"bigint\", true) &&\r\n        typeof (obj.vaultBtcAddress) === \"string\" &&\r\n        typeof (obj.vaultUtxo) === \"string\" &&\r\n        typeof (obj.vaultUtxoValue) === \"bigint\" &&\r\n        typeof (obj.btcDestinationAddress) === \"string\" &&\r\n        typeof (obj.btcAmount) === \"bigint\" &&\r\n        typeof (obj.btcAmountSwap) === \"bigint\" &&\r\n        typeof (obj.btcAmountGas) === \"bigint\" &&\r\n        typeof (obj.minimumBtcFeeRate) === \"number\" &&\r\n        typeof (obj.outputTotalSwap) === \"bigint\" &&\r\n        typeof (obj.outputSwapToken) === \"string\" &&\r\n        typeof (obj.outputTotalGas) === \"bigint\" &&\r\n        typeof (obj.outputGasToken) === \"string\" &&\r\n        typeof (obj.gasSwapFeeBtc) === \"bigint\" &&\r\n        typeof (obj.gasSwapFee) === \"bigint\" &&\r\n        typeof (obj.callerFeeShare) === \"bigint\" &&\r\n        typeof (obj.frontingFeeShare) === \"bigint\" &&\r\n        typeof (obj.executionFeeShare) === \"bigint\" &&\r\n        (0, ISwap_1.isISwapInit)(obj);\r\n}\r\nexports.isSpvFromBTCSwapInit = isSpvFromBTCSwapInit;\r\nclass SpvFromBTCSwap extends ISwap_1.ISwap {\r\n    constructor(wrapper, initOrObject) {\r\n        if (isSpvFromBTCSwapInit(initOrObject))\r\n            initOrObject.url += \"/frombtc_spv\";\r\n        super(wrapper, initOrObject);\r\n        this.TYPE = SwapType_1.SwapType.SPV_VAULT_FROM_BTC;\r\n        if (isSpvFromBTCSwapInit(initOrObject)) {\r\n            this.state = SpvFromBTCSwapState.CREATED;\r\n            const vaultAddressType = (0, Utils_1.toCoinselectAddressType)((0, Utils_1.toOutputScript)(this.wrapper.options.bitcoinNetwork, this.vaultBtcAddress));\r\n            if (vaultAddressType !== \"p2tr\" && vaultAddressType !== \"p2wpkh\" && vaultAddressType !== \"p2wsh\")\r\n                throw new Error(\"Vault address type must be of witness type: p2tr, p2wpkh, p2wsh\");\r\n        }\r\n        else {\r\n            this.quoteId = initOrObject.quoteId;\r\n            this.recipient = initOrObject.recipient;\r\n            this.vaultOwner = initOrObject.vaultOwner;\r\n            this.vaultId = BigInt(initOrObject.vaultId);\r\n            this.vaultRequiredConfirmations = initOrObject.vaultRequiredConfirmations;\r\n            this.vaultTokenMultipliers = initOrObject.vaultTokenMultipliers.map(val => BigInt(val));\r\n            this.vaultBtcAddress = initOrObject.vaultBtcAddress;\r\n            this.vaultUtxo = initOrObject.vaultUtxo;\r\n            this.vaultUtxoValue = BigInt(initOrObject.vaultUtxoValue);\r\n            this.btcDestinationAddress = initOrObject.btcDestinationAddress;\r\n            this.btcAmount = BigInt(initOrObject.btcAmount);\r\n            this.btcAmountSwap = BigInt(initOrObject.btcAmountSwap);\r\n            this.btcAmountGas = BigInt(initOrObject.btcAmountGas);\r\n            this.minimumBtcFeeRate = initOrObject.minimumBtcFeeRate;\r\n            this.outputTotalSwap = BigInt(initOrObject.outputTotalSwap);\r\n            this.outputSwapToken = initOrObject.outputSwapToken;\r\n            this.outputTotalGas = BigInt(initOrObject.outputTotalGas);\r\n            this.outputGasToken = initOrObject.outputGasToken;\r\n            this.gasSwapFeeBtc = BigInt(initOrObject.gasSwapFeeBtc);\r\n            this.gasSwapFee = BigInt(initOrObject.gasSwapFee);\r\n            this.callerFeeShare = BigInt(initOrObject.callerFeeShare);\r\n            this.frontingFeeShare = BigInt(initOrObject.frontingFeeShare);\r\n            this.executionFeeShare = BigInt(initOrObject.executionFeeShare);\r\n            this.claimTxId = initOrObject.claimTxId;\r\n            this.frontTxId = initOrObject.frontTxId;\r\n            this.data = initOrObject.data == null ? null : new this.wrapper.spvWithdrawalDataDeserializer(initOrObject.data);\r\n        }\r\n        this.tryCalculateSwapFee();\r\n        this.logger = (0, Utils_1.getLogger)(\"SPVFromBTC(\" + this.getId() + \"): \");\r\n    }\r\n    upgradeVersion() { }\r\n    /**\r\n     * In case swapFee in BTC is not supplied it recalculates it based on swap price\r\n     * @protected\r\n     */\r\n    tryCalculateSwapFee() {\r\n        if (this.swapFeeBtc == null) {\r\n            this.swapFeeBtc = this.swapFee * this.btcAmountSwap / this.getOutputWithoutFee().rawAmount;\r\n        }\r\n        if (this.pricingInfo.swapPriceUSatPerToken == null) {\r\n            this.pricingInfo = this.wrapper.prices.recomputePriceInfoReceive(this.chainIdentifier, this.btcAmountSwap, this.pricingInfo.satsBaseFee, this.pricingInfo.feePPM, this.getOutputWithoutFee().rawAmount, this.outputSwapToken);\r\n        }\r\n    }\r\n    //////////////////////////////\r\n    //// Pricing\r\n    async refreshPriceData() {\r\n        if (this.pricingInfo == null)\r\n            return null;\r\n        this.pricingInfo = await this.wrapper.prices.isValidAmountReceive(this.chainIdentifier, this.btcAmountSwap, this.pricingInfo.satsBaseFee, this.pricingInfo.feePPM, this.getOutputWithoutFee().rawAmount, this.outputSwapToken);\r\n    }\r\n    //////////////////////////////\r\n    //// Getters & utils\r\n    _getInitiator() {\r\n        return this.recipient;\r\n    }\r\n    _getEscrowHash() {\r\n        return this.data?.btcTx?.txid;\r\n    }\r\n    getId() {\r\n        return this.quoteId + this.randomNonce;\r\n    }\r\n    getQuoteExpiry() {\r\n        return this.expiry - 20 * 1000;\r\n    }\r\n    verifyQuoteValid() {\r\n        return Promise.resolve(this.expiry > Date.now() && (this.state === SpvFromBTCSwapState.CREATED || this.state === SpvFromBTCSwapState.QUOTE_SOFT_EXPIRED));\r\n    }\r\n    getOutputAddress() {\r\n        return this.recipient;\r\n    }\r\n    getOutputTxId() {\r\n        return this.frontTxId ?? this.claimTxId;\r\n    }\r\n    getInputTxId() {\r\n        return this.data?.btcTx?.txid;\r\n    }\r\n    requiresAction() {\r\n        return this.state === SpvFromBTCSwapState.BTC_TX_CONFIRMED;\r\n    }\r\n    isFinished() {\r\n        return this.state === SpvFromBTCSwapState.CLAIMED || this.state === SpvFromBTCSwapState.QUOTE_EXPIRED || this.state === SpvFromBTCSwapState.FAILED;\r\n    }\r\n    isClaimable() {\r\n        return this.state === SpvFromBTCSwapState.BTC_TX_CONFIRMED;\r\n    }\r\n    isSuccessful() {\r\n        return this.state === SpvFromBTCSwapState.FRONTED || this.state === SpvFromBTCSwapState.CLAIMED;\r\n    }\r\n    isFailed() {\r\n        return this.state === SpvFromBTCSwapState.FAILED || this.state === SpvFromBTCSwapState.DECLINED || this.state === SpvFromBTCSwapState.CLOSED;\r\n    }\r\n    isQuoteExpired() {\r\n        return this.state === SpvFromBTCSwapState.QUOTE_EXPIRED;\r\n    }\r\n    isQuoteSoftExpired() {\r\n        return this.state === SpvFromBTCSwapState.QUOTE_EXPIRED || this.state === SpvFromBTCSwapState.QUOTE_SOFT_EXPIRED;\r\n    }\r\n    //////////////////////////////\r\n    //// Amounts & fees\r\n    getInputSwapAmountWithoutFee() {\r\n        return (this.btcAmountSwap - this.swapFeeBtc) * 100000n / (100000n + this.callerFeeShare + this.frontingFeeShare + this.executionFeeShare);\r\n    }\r\n    getInputGasAmountWithoutFee() {\r\n        return (this.btcAmountGas - this.gasSwapFeeBtc) * 100000n / (100000n + this.callerFeeShare + this.frontingFeeShare);\r\n    }\r\n    getInputAmountWithoutFee() {\r\n        return this.getInputSwapAmountWithoutFee() + this.getInputGasAmountWithoutFee();\r\n    }\r\n    getOutputWithoutFee() {\r\n        return (0, Tokens_1.toTokenAmount)((this.outputTotalSwap * (100000n + this.callerFeeShare + this.frontingFeeShare + this.executionFeeShare) / 100000n) + this.swapFee, this.wrapper.tokens[this.outputSwapToken], this.wrapper.prices);\r\n    }\r\n    getSwapFee() {\r\n        const outputToken = this.wrapper.tokens[this.outputSwapToken];\r\n        const gasSwapFeeInOutputToken = this.gasSwapFeeBtc\r\n            * (10n ** BigInt(outputToken.decimals))\r\n            * 1000000n\r\n            / this.pricingInfo.swapPriceUSatPerToken;\r\n        const feeWithoutBaseFee = this.swapFeeBtc - this.pricingInfo.satsBaseFee;\r\n        const swapFeePPM = feeWithoutBaseFee * 1000000n / (this.btcAmount - this.swapFeeBtc - this.gasSwapFeeBtc);\r\n        return {\r\n            amountInSrcToken: (0, Tokens_1.toTokenAmount)(this.swapFeeBtc + this.gasSwapFeeBtc, Tokens_1.BitcoinTokens.BTC, this.wrapper.prices),\r\n            amountInDstToken: (0, Tokens_1.toTokenAmount)(this.swapFee + gasSwapFeeInOutputToken, outputToken, this.wrapper.prices),\r\n            usdValue: (abortSignal, preFetchedUsdPrice) => this.wrapper.prices.getBtcUsdValue(this.swapFeeBtc + this.gasSwapFeeBtc, abortSignal, preFetchedUsdPrice),\r\n            composition: {\r\n                base: (0, Tokens_1.toTokenAmount)(this.pricingInfo.satsBaseFee, Tokens_1.BitcoinTokens.BTC, this.wrapper.prices),\r\n                percentage: (0, ISwap_1.ppmToPercentage)(swapFeePPM)\r\n            }\r\n        };\r\n    }\r\n    getWatchtowerFee() {\r\n        const totalFeeShare = this.callerFeeShare + this.frontingFeeShare;\r\n        const outputToken = this.wrapper.tokens[this.outputSwapToken];\r\n        const watchtowerFeeInOutputToken = this.getInputGasAmountWithoutFee() * totalFeeShare\r\n            * (10n ** BigInt(outputToken.decimals))\r\n            * 1000000n\r\n            / this.pricingInfo.swapPriceUSatPerToken\r\n            / 100000n;\r\n        const feeBtc = this.getInputAmountWithoutFee() * (totalFeeShare + this.executionFeeShare) / 100000n;\r\n        return {\r\n            amountInSrcToken: (0, Tokens_1.toTokenAmount)(feeBtc, Tokens_1.BitcoinTokens.BTC, this.wrapper.prices),\r\n            amountInDstToken: (0, Tokens_1.toTokenAmount)((this.outputTotalSwap * (totalFeeShare + this.executionFeeShare) / 100000n) + watchtowerFeeInOutputToken, outputToken, this.wrapper.prices),\r\n            usdValue: (abortSignal, preFetchedUsdPrice) => this.wrapper.prices.getBtcUsdValue(feeBtc, abortSignal, preFetchedUsdPrice)\r\n        };\r\n    }\r\n    getFee() {\r\n        const swapFee = this.getSwapFee();\r\n        const watchtowerFee = this.getWatchtowerFee();\r\n        return {\r\n            amountInSrcToken: (0, Tokens_1.toTokenAmount)(swapFee.amountInSrcToken.rawAmount + watchtowerFee.amountInSrcToken.rawAmount, Tokens_1.BitcoinTokens.BTC, this.wrapper.prices),\r\n            amountInDstToken: (0, Tokens_1.toTokenAmount)(swapFee.amountInDstToken.rawAmount + watchtowerFee.amountInDstToken.rawAmount, this.wrapper.tokens[this.outputSwapToken], this.wrapper.prices),\r\n            usdValue: (abortSignal, preFetchedUsdPrice) => this.wrapper.prices.getBtcUsdValue(swapFee.amountInSrcToken.rawAmount + watchtowerFee.amountInSrcToken.rawAmount, abortSignal, preFetchedUsdPrice)\r\n        };\r\n    }\r\n    getFeeBreakdown() {\r\n        return [\r\n            {\r\n                type: Fee_1.FeeType.SWAP,\r\n                fee: this.getSwapFee()\r\n            },\r\n            {\r\n                type: Fee_1.FeeType.NETWORK_OUTPUT,\r\n                fee: this.getWatchtowerFee()\r\n            }\r\n        ];\r\n    }\r\n    getOutput() {\r\n        return (0, Tokens_1.toTokenAmount)(this.outputTotalSwap, this.wrapper.tokens[this.outputSwapToken], this.wrapper.prices);\r\n    }\r\n    getGasDropOutput() {\r\n        return (0, Tokens_1.toTokenAmount)(this.outputTotalGas, this.wrapper.tokens[this.outputGasToken], this.wrapper.prices);\r\n    }\r\n    getInputWithoutFee() {\r\n        return (0, Tokens_1.toTokenAmount)(this.getInputAmountWithoutFee(), Tokens_1.BitcoinTokens.BTC, this.wrapper.prices);\r\n    }\r\n    getInput() {\r\n        return (0, Tokens_1.toTokenAmount)(this.btcAmount, Tokens_1.BitcoinTokens.BTC, this.wrapper.prices);\r\n    }\r\n    //////////////////////////////\r\n    //// Bitcoin tx\r\n    getRequiredConfirmationsCount() {\r\n        return this.vaultRequiredConfirmations;\r\n    }\r\n    async getTransactionDetails() {\r\n        const [txId, voutStr] = this.vaultUtxo.split(\":\");\r\n        const vaultScript = (0, Utils_1.toOutputScript)(this.wrapper.options.bitcoinNetwork, this.vaultBtcAddress);\r\n        const out2script = (0, Utils_1.toOutputScript)(this.wrapper.options.bitcoinNetwork, this.btcDestinationAddress);\r\n        const opReturnData = this.wrapper.contract.toOpReturnData(this.recipient, [\r\n            this.outputTotalSwap / this.vaultTokenMultipliers[0],\r\n            this.outputTotalGas / this.vaultTokenMultipliers[1]\r\n        ]);\r\n        const out1script = buffer_1.Buffer.concat([\r\n            opReturnData.length > 75 ? buffer_1.Buffer.from([0x6a, 0x4c, opReturnData.length]) : buffer_1.Buffer.from([0x6a, opReturnData.length]),\r\n            opReturnData\r\n        ]);\r\n        if (this.callerFeeShare < 0n || this.callerFeeShare > 0xfffffn)\r\n            throw new Error(\"Caller fee out of bounds!\");\r\n        if (this.frontingFeeShare < 0n || this.frontingFeeShare > 0xfffffn)\r\n            throw new Error(\"Fronting fee out of bounds!\");\r\n        if (this.executionFeeShare < 0n || this.executionFeeShare > 0xfffffn)\r\n            throw new Error(\"Execution fee out of bounds!\");\r\n        const nSequence0 = 0x80000000n | (this.callerFeeShare & 0xfffffn) | (this.frontingFeeShare & 1047552n) << 10n;\r\n        const nSequence1 = 0x80000000n | (this.executionFeeShare & 0xfffffn) | (this.frontingFeeShare & 1023n) << 20n;\r\n        return {\r\n            in0txid: txId,\r\n            in0vout: parseInt(voutStr),\r\n            in0sequence: Number(nSequence0),\r\n            vaultAmount: this.vaultUtxoValue,\r\n            vaultScript,\r\n            in1sequence: Number(nSequence1),\r\n            out1script,\r\n            out2amount: this.btcAmount,\r\n            out2script,\r\n            locktime: 500000000 + Math.floor(Math.random() * 1000000000) //Use this as a random salt to make the btc txId unique!\r\n        };\r\n    }\r\n    async getPsbt() {\r\n        const res = await this.getTransactionDetails();\r\n        const psbt = new btc_signer_1.Transaction({\r\n            allowUnknownOutputs: true,\r\n            allowLegacyWitnessUtxo: true,\r\n            lockTime: res.locktime\r\n        });\r\n        psbt.addInput({\r\n            txid: res.in0txid,\r\n            index: res.in0vout,\r\n            witnessUtxo: {\r\n                amount: res.vaultAmount,\r\n                script: res.vaultScript\r\n            },\r\n            sequence: res.in0sequence\r\n        });\r\n        psbt.addOutput({\r\n            amount: res.vaultAmount,\r\n            script: res.vaultScript\r\n        });\r\n        psbt.addOutput({\r\n            amount: 0n,\r\n            script: res.out1script\r\n        });\r\n        psbt.addOutput({\r\n            amount: res.out2amount,\r\n            script: res.out2script\r\n        });\r\n        return {\r\n            psbt,\r\n            in1sequence: res.in1sequence\r\n        };\r\n    }\r\n    async getFundedPsbt(_bitcoinWallet, feeRate) {\r\n        let bitcoinWallet;\r\n        if ((0, IBitcoinWallet_1.isIBitcoinWallet)(_bitcoinWallet)) {\r\n            bitcoinWallet = _bitcoinWallet;\r\n        }\r\n        else {\r\n            bitcoinWallet = new SingleAddressBitcoinWallet_1.SingleAddressBitcoinWallet(this.wrapper.btcRpc, this.wrapper.options.bitcoinNetwork, _bitcoinWallet);\r\n        }\r\n        if (feeRate != null) {\r\n            if (feeRate < this.minimumBtcFeeRate)\r\n                throw new Error(\"Bitcoin tx fee needs to be at least \" + this.minimumBtcFeeRate + \" sats/vB\");\r\n        }\r\n        else {\r\n            feeRate = Math.max(this.minimumBtcFeeRate, await bitcoinWallet.getFeeRate());\r\n        }\r\n        let { psbt, in1sequence } = await this.getPsbt();\r\n        psbt = await bitcoinWallet.fundPsbt(psbt, feeRate);\r\n        psbt.updateInput(1, { sequence: in1sequence });\r\n        //Sign every input except the first one\r\n        const signInputs = [];\r\n        for (let i = 1; i < psbt.inputsLength; i++) {\r\n            signInputs.push(i);\r\n        }\r\n        return { psbt, signInputs };\r\n    }\r\n    async submitPsbt(psbt) {\r\n        //Ensure not expired\r\n        if (this.expiry < Date.now()) {\r\n            throw new Error(\"Quote expired!\");\r\n        }\r\n        //Ensure valid state\r\n        if (this.state !== SpvFromBTCSwapState.QUOTE_SOFT_EXPIRED && this.state !== SpvFromBTCSwapState.CREATED) {\r\n            throw new Error(\"Invalid swap state!\");\r\n        }\r\n        //Ensure all inputs except the 1st are finalized\r\n        for (let i = 1; i < psbt.inputsLength; i++) {\r\n            if ((0, btc_signer_1.getInputType)(psbt.getInput(i)).txType === \"legacy\")\r\n                throw new Error(\"Legacy (non-segwit) inputs are not allowed in the transaction!\");\r\n            psbt.finalizeIdx(i);\r\n        }\r\n        const btcTx = await this.wrapper.btcRpc.parseTransaction(buffer_1.Buffer.from(psbt.toBytes(true)).toString(\"hex\"));\r\n        const data = await this.wrapper.contract.getWithdrawalData(btcTx);\r\n        this.logger.debug(\"submitPsbt(): parsed withdrawal data: \", data);\r\n        //Verify correct withdrawal data\r\n        if (!data.isRecipient(this.recipient) ||\r\n            data.rawAmounts[0] * this.vaultTokenMultipliers[0] !== this.outputTotalSwap ||\r\n            (data.rawAmounts[1] ?? 0n) * this.vaultTokenMultipliers[1] !== this.outputTotalGas ||\r\n            data.callerFeeRate !== this.callerFeeShare ||\r\n            data.frontingFeeRate !== this.frontingFeeShare ||\r\n            data.executionFeeRate !== this.executionFeeShare ||\r\n            data.getSpentVaultUtxo() !== this.vaultUtxo ||\r\n            BigInt(data.getNewVaultBtcAmount()) !== this.vaultUtxoValue ||\r\n            !data.getNewVaultScript().equals((0, Utils_1.toOutputScript)(this.wrapper.options.bitcoinNetwork, this.vaultBtcAddress)) ||\r\n            data.getExecutionData() != null) {\r\n            throw new Error(\"Invalid withdrawal tx data submitted!\");\r\n        }\r\n        //Verify correct LP output\r\n        const lpOutput = psbt.getOutput(2);\r\n        if (lpOutput.amount !== this.btcAmount ||\r\n            !(0, Utils_1.toOutputScript)(this.wrapper.options.bitcoinNetwork, this.btcDestinationAddress).equals(buffer_1.Buffer.from(lpOutput.script))) {\r\n            throw new Error(\"Invalid LP bitcoin output in transaction!\");\r\n        }\r\n        //Verify vault utxo not spent yet\r\n        if (await this.wrapper.btcRpc.isSpent(this.vaultUtxo)) {\r\n            throw new Error(\"Vault UTXO already spent, please create new swap!\");\r\n        }\r\n        //Verify tx is parsable by the contract\r\n        try {\r\n            await this.wrapper.contract.checkWithdrawalTx(data);\r\n        }\r\n        catch (e) {\r\n            throw new Error(\"Transaction not parsable by the contract: \" + (e.message ?? e.toString()));\r\n        }\r\n        //Ensure still not expired\r\n        if (this.expiry < Date.now()) {\r\n            throw new Error(\"Quote expired!\");\r\n        }\r\n        this.data = data;\r\n        this.initiated = true;\r\n        await this._saveAndEmit(SpvFromBTCSwapState.SIGNED);\r\n        try {\r\n            await IntermediaryAPI_1.IntermediaryAPI.initSpvFromBTC(this.chainIdentifier, this.url, {\r\n                quoteId: this.quoteId,\r\n                psbtHex: buffer_1.Buffer.from(psbt.toPSBT(0)).toString(\"hex\")\r\n            });\r\n            await this._saveAndEmit(SpvFromBTCSwapState.POSTED);\r\n        }\r\n        catch (e) {\r\n            await this._saveAndEmit(SpvFromBTCSwapState.DECLINED);\r\n            throw e;\r\n        }\r\n        return this.data.getTxId();\r\n    }\r\n    async estimateBitcoinFee(wallet, feeRate) {\r\n        const txFee = await wallet.getFundedPsbtFee((await this.getPsbt()).psbt, feeRate);\r\n        return (0, Tokens_1.toTokenAmount)(txFee == null ? null : BigInt(txFee), Tokens_1.BitcoinTokens.BTC, this.wrapper.prices);\r\n    }\r\n    async sendBitcoinTransaction(wallet, feeRate) {\r\n        let { psbt, signInputs } = await this.getFundedPsbt(wallet, feeRate);\r\n        psbt = await wallet.signPsbt(psbt, signInputs);\r\n        return await this.submitPsbt(psbt);\r\n    }\r\n    //////////////////////////////\r\n    //// Bitcoin tx listener\r\n    /**\r\n     * Checks whether a bitcoin payment was already made, returns the payment or null when no payment has been made.\r\n     */\r\n    async getBitcoinPayment() {\r\n        if (this.data?.btcTx?.txid == null)\r\n            return null;\r\n        const result = await this.wrapper.btcRpc.getTransaction(this.data?.btcTx?.txid);\r\n        if (result == null)\r\n            return null;\r\n        return {\r\n            txId: result.txid,\r\n            confirmations: result.confirmations,\r\n            targetConfirmations: this.vaultRequiredConfirmations\r\n        };\r\n    }\r\n    /**\r\n     * Waits till the bitcoin transaction confirms and swap becomes claimable\r\n     *\r\n     * @param abortSignal Abort signal\r\n     * @param checkIntervalSeconds How often to check the bitcoin transaction\r\n     * @param updateCallback Callback called when txId is found, and also called with subsequent confirmations\r\n     * @throws {Error} if in invalid state (must be CLAIM_COMMITED)\r\n     */\r\n    async waitForBitcoinTransaction(abortSignal, checkIntervalSeconds, updateCallback) {\r\n        if (this.state !== SpvFromBTCSwapState.POSTED &&\r\n            this.state !== SpvFromBTCSwapState.BROADCASTED &&\r\n            !(this.state === SpvFromBTCSwapState.QUOTE_SOFT_EXPIRED && this.initiated))\r\n            throw new Error(\"Must be in POSTED or BROADCASTED state!\");\r\n        const result = await this.wrapper.btcRpc.waitForTransaction(this.data.btcTx.txid, this.vaultRequiredConfirmations, (confirmations, txId, txEtaMs) => {\r\n            if (updateCallback != null)\r\n                updateCallback(txId, confirmations, this.vaultRequiredConfirmations, txEtaMs);\r\n            if (txId != null &&\r\n                (this.state === SpvFromBTCSwapState.POSTED || this.state == SpvFromBTCSwapState.QUOTE_SOFT_EXPIRED))\r\n                this._saveAndEmit(SpvFromBTCSwapState.BROADCASTED);\r\n        }, abortSignal, checkIntervalSeconds);\r\n        if (abortSignal != null)\r\n            abortSignal.throwIfAborted();\r\n        if (this.state !== SpvFromBTCSwapState.FRONTED &&\r\n            this.state !== SpvFromBTCSwapState.CLAIMED) {\r\n            await this._saveAndEmit(SpvFromBTCSwapState.BTC_TX_CONFIRMED);\r\n        }\r\n        return result.txid;\r\n    }\r\n    //////////////////////////////\r\n    //// Claim\r\n    /**\r\n     * Returns transactions required to claim the swap on-chain (and possibly also sync the bitcoin light client)\r\n     *  after a bitcoin transaction was sent and confirmed\r\n     *\r\n     * @throws {Error} If the swap is in invalid state (must be BTC_TX_CONFIRMED)\r\n     */\r\n    async txsClaim(signer) {\r\n        if (!this.isClaimable())\r\n            throw new Error(\"Must be in BTC_TX_CONFIRMED state!\");\r\n        const vaultData = await this.wrapper.contract.getVaultData(this.vaultOwner, this.vaultId);\r\n        const txs = [await this.wrapper.btcRpc.getTransaction(this.data.btcTx.txid)];\r\n        //Trace back from current tx to the vaultData-specified UTXO\r\n        const vaultUtxo = vaultData.getUtxo();\r\n        while (txs[0].ins[0].txid + \":\" + txs[0].ins[0].vout !== vaultUtxo) {\r\n            txs.unshift(await this.wrapper.btcRpc.getTransaction(txs[0].ins[0].txid));\r\n        }\r\n        //Parse transactions to withdrawal data\r\n        const withdrawalData = [];\r\n        for (let tx of txs) {\r\n            withdrawalData.push(await this.wrapper.contract.getWithdrawalData(tx));\r\n        }\r\n        return await this.wrapper.contract.txsClaim(signer == null ? this._getInitiator() : signer.getAddress(), vaultData, withdrawalData.map(tx => { return { tx }; }), this.wrapper.synchronizer, true);\r\n    }\r\n    /**\r\n     * Claims and finishes the swap\r\n     *\r\n     * @param signer Signer to sign the transactions with, can also be different to the initializer\r\n     * @param abortSignal Abort signal to stop waiting for transaction confirmation\r\n     */\r\n    async claim(signer, abortSignal) {\r\n        let txIds;\r\n        try {\r\n            txIds = await this.wrapper.chain.sendAndConfirm(signer, await this.txsClaim(signer), true, abortSignal);\r\n        }\r\n        catch (e) {\r\n            this.logger.info(\"claim(): Failed to claim ourselves, checking swap claim state...\");\r\n            if (this.state === SpvFromBTCSwapState.CLAIMED) {\r\n                this.logger.info(\"claim(): Transaction state is CLAIMED, swap was successfully claimed by the watchtower\");\r\n                return this.claimTxId;\r\n            }\r\n            const withdrawalState = await this.wrapper.contract.getWithdrawalState(this.data.btcTx.txid);\r\n            if (withdrawalState.type === base_1.SpvWithdrawalStateType.CLAIMED) {\r\n                this.logger.info(\"claim(): Transaction status is CLAIMED, swap was successfully claimed by the watchtower\");\r\n                this.claimTxId = withdrawalState.txId;\r\n                await this._saveAndEmit(SpvFromBTCSwapState.CLAIMED);\r\n                return null;\r\n            }\r\n            throw e;\r\n        }\r\n        this.claimTxId = txIds[0];\r\n        if (this.state === SpvFromBTCSwapState.POSTED || this.state === SpvFromBTCSwapState.BROADCASTED ||\r\n            this.state === SpvFromBTCSwapState.BTC_TX_CONFIRMED || this.state === SpvFromBTCSwapState.FAILED ||\r\n            this.state === SpvFromBTCSwapState.FRONTED) {\r\n            await this._saveAndEmit(SpvFromBTCSwapState.CLAIMED);\r\n        }\r\n        return txIds[0];\r\n    }\r\n    /**\r\n     * Periodically checks the chain to see whether the swap was finished (claimed or refunded)\r\n     *\r\n     * @param abortSignal\r\n     * @param interval How often to check (in seconds), default to 5s\r\n     * @protected\r\n     */\r\n    async watchdogWaitTillResult(abortSignal, interval = 5) {\r\n        let status = { type: base_1.SpvWithdrawalStateType.NOT_FOUND };\r\n        while (status.type === base_1.SpvWithdrawalStateType.NOT_FOUND) {\r\n            await (0, Utils_1.timeoutPromise)(interval * 1000, abortSignal);\r\n            try {\r\n                status = await this.wrapper.contract.getWithdrawalState(this.data.btcTx.txid);\r\n            }\r\n            catch (e) {\r\n                this.logger.error(\"watchdogWaitTillResult(): Error when fetching commit status: \", e);\r\n            }\r\n        }\r\n        if (abortSignal != null)\r\n            abortSignal.throwIfAborted();\r\n        return status;\r\n    }\r\n    /**\r\n     * Waits till the swap is successfully executed\r\n     *\r\n     * @param abortSignal AbortSignal\r\n     * @throws {Error} If swap is in invalid state (must be BTC_TX_CONFIRMED)\r\n     * @throws {Error} If the LP refunded sooner than we were able to claim\r\n     */\r\n    async waitTillClaimedOrFronted(abortSignal) {\r\n        if (this.state === SpvFromBTCSwapState.CLAIMED || this.state === SpvFromBTCSwapState.FRONTED)\r\n            return Promise.resolve();\r\n        const abortController = new AbortController();\r\n        if (abortSignal != null)\r\n            abortSignal.addEventListener(\"abort\", () => abortController.abort(abortSignal.reason));\r\n        const res = await Promise.race([\r\n            this.watchdogWaitTillResult(abortController.signal),\r\n            this.waitTillState(SpvFromBTCSwapState.CLAIMED, \"eq\", abortController.signal).then(() => 0),\r\n            this.waitTillState(SpvFromBTCSwapState.FRONTED, \"eq\", abortController.signal).then(() => 1),\r\n            this.waitTillState(SpvFromBTCSwapState.FAILED, \"eq\", abortController.signal).then(() => 2),\r\n        ]);\r\n        abortController.abort();\r\n        if (typeof (res) === \"number\") {\r\n            if (res === 0) {\r\n                this.logger.debug(\"waitTillClaimedOrFronted(): Resolved from state change (CLAIMED)\");\r\n                return;\r\n            }\r\n            if (res === 1) {\r\n                this.logger.debug(\"waitTillClaimedOrFronted(): Resolved from state change (FRONTED)\");\r\n                return;\r\n            }\r\n            if (res === 2) {\r\n                this.logger.debug(\"waitTillClaimedOrFronted(): Resolved from state change (FAILED)\");\r\n                throw new Error(\"Swap failed while waiting for claim or front\");\r\n            }\r\n            return;\r\n        }\r\n        this.logger.debug(\"waitTillClaimedOrFronted(): Resolved from watchdog\");\r\n        if (res.type === base_1.SpvWithdrawalStateType.FRONTED) {\r\n            if (this.state !== SpvFromBTCSwapState.FRONTED ||\r\n                this.state !== SpvFromBTCSwapState.CLAIMED) {\r\n                this.frontTxId = res.txId;\r\n                await this._saveAndEmit(SpvFromBTCSwapState.FRONTED);\r\n            }\r\n        }\r\n        if (res.type === base_1.SpvWithdrawalStateType.CLAIMED) {\r\n            if (this.state !== SpvFromBTCSwapState.CLAIMED) {\r\n                this.claimTxId = res.txId;\r\n                await this._saveAndEmit(SpvFromBTCSwapState.FRONTED);\r\n            }\r\n        }\r\n        if (res.type === base_1.SpvWithdrawalStateType.CLOSED) {\r\n            if (this.state !== SpvFromBTCSwapState.CLOSED)\r\n                await this._saveAndEmit(SpvFromBTCSwapState.CLOSED);\r\n        }\r\n    }\r\n    /**\r\n     * Waits till the bitcoin transaction confirms and swap is claimed\r\n     *\r\n     * @param abortSignal Abort signal\r\n     * @param checkIntervalSeconds How often to check the bitcoin transaction\r\n     * @param updateCallback Callback called when txId is found, and also called with subsequent confirmations\r\n     * @throws {Error} if in invalid state (must be CLAIM_COMMITED)\r\n     */\r\n    async waitTillExecuted(abortSignal, checkIntervalSeconds, updateCallback) {\r\n        await this.waitForBitcoinTransaction(abortSignal, checkIntervalSeconds, updateCallback);\r\n        await this.waitTillClaimedOrFronted(abortSignal);\r\n    }\r\n    //////////////////////////////\r\n    //// Storage\r\n    serialize() {\r\n        return {\r\n            ...super.serialize(),\r\n            quoteId: this.quoteId,\r\n            recipient: this.recipient,\r\n            vaultOwner: this.vaultOwner,\r\n            vaultId: this.vaultId.toString(10),\r\n            vaultRequiredConfirmations: this.vaultRequiredConfirmations,\r\n            vaultTokenMultipliers: this.vaultTokenMultipliers.map(val => val.toString(10)),\r\n            vaultBtcAddress: this.vaultBtcAddress,\r\n            vaultUtxo: this.vaultUtxo,\r\n            vaultUtxoValue: this.vaultUtxoValue.toString(10),\r\n            btcDestinationAddress: this.btcDestinationAddress,\r\n            btcAmount: this.btcAmount.toString(10),\r\n            btcAmountSwap: this.btcAmountSwap.toString(10),\r\n            btcAmountGas: this.btcAmountGas.toString(10),\r\n            minimumBtcFeeRate: this.minimumBtcFeeRate,\r\n            outputTotalSwap: this.outputTotalSwap.toString(10),\r\n            outputSwapToken: this.outputSwapToken,\r\n            outputTotalGas: this.outputTotalGas.toString(10),\r\n            outputGasToken: this.outputGasToken,\r\n            gasSwapFeeBtc: this.gasSwapFeeBtc.toString(10),\r\n            gasSwapFee: this.gasSwapFee.toString(10),\r\n            callerFeeShare: this.callerFeeShare.toString(10),\r\n            frontingFeeShare: this.frontingFeeShare.toString(10),\r\n            executionFeeShare: this.executionFeeShare.toString(10),\r\n            claimTxId: this.claimTxId,\r\n            frontTxId: this.frontTxId,\r\n            data: this.data?.serialize()\r\n        };\r\n    }\r\n    //////////////////////////////\r\n    //// Swap ticks & sync\r\n    async syncStateFromBitcoin(save) {\r\n        if (this.data?.btcTx == null)\r\n            return false;\r\n        //Check if bitcoin payment was confirmed\r\n        const res = await this.getBitcoinPayment();\r\n        if (res == null) {\r\n            //Check inputs double-spent\r\n            for (let input of this.data.btcTx.ins) {\r\n                if (await this.wrapper.btcRpc.isSpent(input.txid + \":\" + input.vout, true)) {\r\n                    if (this.state === SpvFromBTCSwapState.SIGNED ||\r\n                        this.state === SpvFromBTCSwapState.POSTED ||\r\n                        this.state === SpvFromBTCSwapState.QUOTE_SOFT_EXPIRED ||\r\n                        this.state === SpvFromBTCSwapState.DECLINED) {\r\n                        //One of the inputs was double-spent\r\n                        this.state = SpvFromBTCSwapState.QUOTE_EXPIRED;\r\n                    }\r\n                    else {\r\n                        //One of the inputs was double-spent\r\n                        this.state = SpvFromBTCSwapState.FAILED;\r\n                    }\r\n                    if (save)\r\n                        await this._saveAndEmit();\r\n                    return true;\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (res.confirmations >= this.vaultRequiredConfirmations) {\r\n                if (this.state !== SpvFromBTCSwapState.FRONTED &&\r\n                    this.state !== SpvFromBTCSwapState.CLAIMED) {\r\n                    this.state = SpvFromBTCSwapState.BTC_TX_CONFIRMED;\r\n                    if (save)\r\n                        await this._saveAndEmit();\r\n                    return true;\r\n                }\r\n            }\r\n            else if (this.state === SpvFromBTCSwapState.QUOTE_SOFT_EXPIRED ||\r\n                this.state === SpvFromBTCSwapState.POSTED ||\r\n                this.state === SpvFromBTCSwapState.SIGNED ||\r\n                this.state === SpvFromBTCSwapState.DECLINED) {\r\n                this.state = SpvFromBTCSwapState.BROADCASTED;\r\n                if (save)\r\n                    await this._saveAndEmit();\r\n                return true;\r\n            }\r\n        }\r\n        return false;\r\n    }\r\n    /**\r\n     * Checks the swap's state on-chain and compares it to its internal state, updates/changes it according to on-chain\r\n     *  data\r\n     *\r\n     * @private\r\n     */\r\n    async syncStateFromChain() {\r\n        let changed = false;\r\n        if (this.state === SpvFromBTCSwapState.SIGNED ||\r\n            this.state === SpvFromBTCSwapState.POSTED ||\r\n            this.state === SpvFromBTCSwapState.BROADCASTED ||\r\n            this.state === SpvFromBTCSwapState.QUOTE_SOFT_EXPIRED ||\r\n            this.state === SpvFromBTCSwapState.DECLINED) {\r\n            //Check BTC transaction\r\n            if (await this.syncStateFromBitcoin(false))\r\n                changed ||= true;\r\n        }\r\n        if (this.state === SpvFromBTCSwapState.BROADCASTED || this.state === SpvFromBTCSwapState.BTC_TX_CONFIRMED) {\r\n            const status = await this.wrapper.contract.getWithdrawalState(this.data.btcTx.txid);\r\n            this.logger.debug(\"syncStateFromChain(): status of \" + this.data.btcTx.txid, status);\r\n            switch (status.type) {\r\n                case base_1.SpvWithdrawalStateType.FRONTED:\r\n                    this.frontTxId = status.txId;\r\n                    this.state = SpvFromBTCSwapState.FRONTED;\r\n                    changed ||= true;\r\n                    break;\r\n                case base_1.SpvWithdrawalStateType.CLAIMED:\r\n                    this.claimTxId = status.txId;\r\n                    this.state = SpvFromBTCSwapState.CLAIMED;\r\n                    changed ||= true;\r\n                    break;\r\n                case base_1.SpvWithdrawalStateType.CLOSED:\r\n                    this.state = SpvFromBTCSwapState.CLOSED;\r\n                    changed ||= true;\r\n                    break;\r\n            }\r\n        }\r\n        if (this.state === SpvFromBTCSwapState.CREATED ||\r\n            this.state === SpvFromBTCSwapState.SIGNED ||\r\n            this.state === SpvFromBTCSwapState.POSTED) {\r\n            if (this.expiry < Date.now()) {\r\n                if (this.state === SpvFromBTCSwapState.CREATED) {\r\n                    this.state = SpvFromBTCSwapState.QUOTE_EXPIRED;\r\n                }\r\n                else {\r\n                    this.state = SpvFromBTCSwapState.QUOTE_SOFT_EXPIRED;\r\n                }\r\n                changed ||= true;\r\n            }\r\n        }\r\n        return changed;\r\n    }\r\n    async _sync(save) {\r\n        const changed = await this.syncStateFromChain();\r\n        if (changed && save)\r\n            await this._saveAndEmit();\r\n        return changed;\r\n    }\r\n    async _tick(save) {\r\n        if (this.state === SpvFromBTCSwapState.CREATED ||\r\n            this.state === SpvFromBTCSwapState.SIGNED) {\r\n            if (this.getQuoteExpiry() < Date.now()) {\r\n                this.state = SpvFromBTCSwapState.QUOTE_SOFT_EXPIRED;\r\n                if (save)\r\n                    await this._saveAndEmit();\r\n                return true;\r\n            }\r\n        }\r\n        if (this.state === SpvFromBTCSwapState.QUOTE_SOFT_EXPIRED && !this.initiated) {\r\n            if (this.expiry < Date.now()) {\r\n                this.state = SpvFromBTCSwapState.QUOTE_EXPIRED;\r\n                if (save)\r\n                    await this._saveAndEmit();\r\n                return true;\r\n            }\r\n        }\r\n        if (Math.floor(Date.now() / 1000) % 120 === 0) {\r\n            if (this.state === SpvFromBTCSwapState.POSTED ||\r\n                this.state === SpvFromBTCSwapState.BROADCASTED) {\r\n                try {\r\n                    //Check if bitcoin payment was confirmed\r\n                    return await this.syncStateFromBitcoin(save);\r\n                }\r\n                catch (e) {\r\n                    this.logger.error(\"tickSwap(\" + this.getId() + \"): \", e);\r\n                }\r\n            }\r\n        }\r\n    }\r\n}\r\nexports.SpvFromBTCSwap = SpvFromBTCSwap;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SpvFromBTCWrapper = void 0;\r\nconst ISwapWrapper_1 = require(\"../ISwapWrapper\");\r\nconst base_1 = require(\"@atomiqlabs/base\");\r\nconst SpvFromBTCSwap_1 = require(\"./SpvFromBTCSwap\");\r\nconst utils_1 = require(\"@scure/btc-signer/utils\");\r\nconst SwapType_1 = require(\"../enums/SwapType\");\r\nconst Utils_1 = require(\"../../utils/Utils\");\r\nconst IntermediaryAPI_1 = require(\"../../intermediaries/IntermediaryAPI\");\r\nconst RequestError_1 = require(\"../../errors/RequestError\");\r\nconst IntermediaryError_1 = require(\"../../errors/IntermediaryError\");\r\nconst btc_signer_1 = require(\"@scure/btc-signer\");\r\nclass SpvFromBTCWrapper extends ISwapWrapper_1.ISwapWrapper {\r\n    /**\r\n     * @param chainIdentifier\r\n     * @param unifiedStorage Storage interface for the current environment\r\n     * @param unifiedChainEvents On-chain event listener\r\n     * @param chain\r\n     * @param contract Underlying contract handling the swaps\r\n     * @param prices Pricing to use\r\n     * @param tokens\r\n     * @param spvWithdrawalDataDeserializer Deserializer for SpvVaultWithdrawalData\r\n     * @param btcRelay\r\n     * @param synchronizer Btc relay synchronizer\r\n     * @param btcRpc Bitcoin RPC which also supports getting transactions by txoHash\r\n     * @param options\r\n     * @param events Instance to use for emitting events\r\n     */\r\n    constructor(chainIdentifier, unifiedStorage, unifiedChainEvents, chain, contract, prices, tokens, spvWithdrawalDataDeserializer, btcRelay, synchronizer, btcRpc, options, events) {\r\n        if (options == null)\r\n            options = {};\r\n        options.bitcoinNetwork ??= utils_1.TEST_NETWORK;\r\n        options.maxConfirmations ??= 6;\r\n        options.bitcoinBlocktime ??= 10 * 60;\r\n        options.maxTransactionsDelta ??= 3;\r\n        options.maxRawAmountAdjustmentDifferencePPM ??= 100;\r\n        options.maxBtcFeeOffset ??= 5;\r\n        options.maxBtcFeeMultiplier ??= 1.5;\r\n        super(chainIdentifier, unifiedStorage, unifiedChainEvents, chain, prices, tokens, options, events);\r\n        this.TYPE = SwapType_1.SwapType.SPV_VAULT_FROM_BTC;\r\n        this.swapDeserializer = SpvFromBTCSwap_1.SpvFromBTCSwap;\r\n        this.pendingSwapStates = [\r\n            SpvFromBTCSwap_1.SpvFromBTCSwapState.CREATED,\r\n            SpvFromBTCSwap_1.SpvFromBTCSwapState.SIGNED,\r\n            SpvFromBTCSwap_1.SpvFromBTCSwapState.POSTED,\r\n            SpvFromBTCSwap_1.SpvFromBTCSwapState.QUOTE_SOFT_EXPIRED,\r\n            SpvFromBTCSwap_1.SpvFromBTCSwapState.BROADCASTED,\r\n            SpvFromBTCSwap_1.SpvFromBTCSwapState.DECLINED,\r\n            SpvFromBTCSwap_1.SpvFromBTCSwapState.BTC_TX_CONFIRMED\r\n        ];\r\n        this.tickSwapState = [\r\n            SpvFromBTCSwap_1.SpvFromBTCSwapState.CREATED,\r\n            SpvFromBTCSwap_1.SpvFromBTCSwapState.QUOTE_SOFT_EXPIRED,\r\n            SpvFromBTCSwap_1.SpvFromBTCSwapState.SIGNED,\r\n            SpvFromBTCSwap_1.SpvFromBTCSwapState.POSTED,\r\n            SpvFromBTCSwap_1.SpvFromBTCSwapState.BROADCASTED\r\n        ];\r\n        this.spvWithdrawalDataDeserializer = spvWithdrawalDataDeserializer;\r\n        this.contract = contract;\r\n        this.btcRelay = btcRelay;\r\n        this.synchronizer = synchronizer;\r\n        this.btcRpc = btcRpc;\r\n    }\r\n    processEventFront(event, swap) {\r\n        if (swap.state === SpvFromBTCSwap_1.SpvFromBTCSwapState.SIGNED || swap.state === SpvFromBTCSwap_1.SpvFromBTCSwapState.POSTED ||\r\n            swap.state === SpvFromBTCSwap_1.SpvFromBTCSwapState.BROADCASTED || swap.state === SpvFromBTCSwap_1.SpvFromBTCSwapState.DECLINED ||\r\n            swap.state === SpvFromBTCSwap_1.SpvFromBTCSwapState.QUOTE_SOFT_EXPIRED || swap.state === SpvFromBTCSwap_1.SpvFromBTCSwapState.BTC_TX_CONFIRMED) {\r\n            swap.state = SpvFromBTCSwap_1.SpvFromBTCSwapState.FRONTED;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    processEventClaim(event, swap) {\r\n        if (swap.state === SpvFromBTCSwap_1.SpvFromBTCSwapState.SIGNED || swap.state === SpvFromBTCSwap_1.SpvFromBTCSwapState.POSTED ||\r\n            swap.state === SpvFromBTCSwap_1.SpvFromBTCSwapState.BROADCASTED || swap.state === SpvFromBTCSwap_1.SpvFromBTCSwapState.DECLINED ||\r\n            swap.state === SpvFromBTCSwap_1.SpvFromBTCSwapState.QUOTE_SOFT_EXPIRED || swap.state === SpvFromBTCSwap_1.SpvFromBTCSwapState.BTC_TX_CONFIRMED) {\r\n            swap.state = SpvFromBTCSwap_1.SpvFromBTCSwapState.CLAIMED;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    processEventClose(event, swap) {\r\n        if (swap.state === SpvFromBTCSwap_1.SpvFromBTCSwapState.SIGNED || swap.state === SpvFromBTCSwap_1.SpvFromBTCSwapState.POSTED ||\r\n            swap.state === SpvFromBTCSwap_1.SpvFromBTCSwapState.BROADCASTED || swap.state === SpvFromBTCSwap_1.SpvFromBTCSwapState.DECLINED ||\r\n            swap.state === SpvFromBTCSwap_1.SpvFromBTCSwapState.QUOTE_SOFT_EXPIRED || swap.state === SpvFromBTCSwap_1.SpvFromBTCSwapState.BTC_TX_CONFIRMED) {\r\n            swap.state = SpvFromBTCSwap_1.SpvFromBTCSwapState.CLOSED;\r\n            return true;\r\n        }\r\n        return false;\r\n    }\r\n    async processEvent(event, swap) {\r\n        if (swap == null)\r\n            return;\r\n        let swapChanged = false;\r\n        if (event instanceof base_1.SpvVaultFrontEvent) {\r\n            swapChanged = this.processEventFront(event, swap);\r\n            if (event.meta?.txId != null && swap.frontTxId !== event.meta.txId) {\r\n                swap.frontTxId = event.meta.txId;\r\n                swapChanged ||= true;\r\n            }\r\n        }\r\n        if (event instanceof base_1.SpvVaultClaimEvent) {\r\n            swapChanged = this.processEventClaim(event, swap);\r\n            if (event.meta?.txId != null && swap.claimTxId !== event.meta.txId) {\r\n                swap.claimTxId = event.meta.txId;\r\n                swapChanged ||= true;\r\n            }\r\n        }\r\n        if (event instanceof base_1.SpvVaultCloseEvent) {\r\n            swapChanged = this.processEventClose(event, swap);\r\n        }\r\n        this.logger.info(\"processEvents(): \" + event.constructor.name + \" processed for \" + swap.getId() + \" swap: \", swap);\r\n        if (swapChanged) {\r\n            await swap._saveAndEmit();\r\n        }\r\n        return true;\r\n    }\r\n    /**\r\n     * Pre-fetches caller (watchtower) bounty data for the swap. Doesn't throw, instead returns null and aborts the\r\n     *  provided abortController\r\n     *\r\n     * @param signer Smartchain signer address initiating the swap\r\n     * @param amountData\r\n     * @param options Options as passed to the swap creation function\r\n     * @param pricePrefetch\r\n     * @param nativeTokenPricePrefetch\r\n     * @param abortController\r\n     * @private\r\n     */\r\n    async preFetchCallerFeeShare(signer, amountData, options, pricePrefetch, nativeTokenPricePrefetch, abortController) {\r\n        if (options.unsafeZeroWatchtowerFee)\r\n            return 0n;\r\n        if (amountData.amount === 0n)\r\n            return 0n;\r\n        try {\r\n            const [feePerBlock, btcRelayData, currentBtcBlock, claimFeeRate, nativeTokenPrice] = await Promise.all([\r\n                (0, Utils_1.tryWithRetries)(() => this.btcRelay.getFeePerBlock(), null, null, abortController.signal),\r\n                (0, Utils_1.tryWithRetries)(() => this.btcRelay.getTipData(), null, null, abortController.signal),\r\n                this.btcRpc.getTipHeight(),\r\n                (0, Utils_1.tryWithRetries)(() => this.contract.getClaimFee(this.chain.randomAddress(), null, null), null, null, abortController.signal),\r\n                nativeTokenPricePrefetch ?? (amountData.token === this.chain.getNativeCurrencyAddress() ?\r\n                    pricePrefetch :\r\n                    this.prices.preFetchPrice(this.chainIdentifier, this.chain.getNativeCurrencyAddress(), abortController.signal))\r\n            ]);\r\n            const currentBtcRelayBlock = btcRelayData.blockheight;\r\n            const blockDelta = Math.max(currentBtcBlock - currentBtcRelayBlock + this.options.maxConfirmations, 0);\r\n            const totalFeeInNativeToken = ((BigInt(blockDelta) * feePerBlock) +\r\n                (claimFeeRate * BigInt(this.options.maxTransactionsDelta))) * BigInt(Math.floor(options.feeSafetyFactor * 1000000)) / 1000000n;\r\n            let payoutAmount;\r\n            if (amountData.exactIn) {\r\n                //Convert input amount in BTC to\r\n                const amountInNativeToken = await this.prices.getFromBtcSwapAmount(this.chainIdentifier, amountData.amount, this.chain.getNativeCurrencyAddress(), abortController.signal, nativeTokenPrice);\r\n                payoutAmount = amountInNativeToken - totalFeeInNativeToken;\r\n            }\r\n            else {\r\n                if (amountData.token === this.chain.getNativeCurrencyAddress()) {\r\n                    //Both amounts in same currency\r\n                    payoutAmount = amountData.amount;\r\n                }\r\n                else {\r\n                    //Need to convert both to native currency\r\n                    const btcAmount = await this.prices.getToBtcSwapAmount(this.chainIdentifier, amountData.amount, amountData.token, abortController.signal, await pricePrefetch);\r\n                    payoutAmount = await this.prices.getFromBtcSwapAmount(this.chainIdentifier, btcAmount, this.chain.getNativeCurrencyAddress(), abortController.signal, nativeTokenPrice);\r\n                }\r\n            }\r\n            this.logger.debug(\"preFetchCallerFeeShare(): Caller fee in native token: \" + totalFeeInNativeToken.toString(10) + \" total payout in native token: \" + payoutAmount.toString(10));\r\n            const callerFeeShare = ((totalFeeInNativeToken * 100000n) + payoutAmount - 1n) / payoutAmount; //Make sure to round up here\r\n            if (callerFeeShare < 0n)\r\n                return 0n;\r\n            if (callerFeeShare >= 2n ** 20n)\r\n                return 2n ** 20n - 1n;\r\n            return callerFeeShare;\r\n        }\r\n        catch (e) {\r\n            abortController.abort(e);\r\n            return null;\r\n        }\r\n    }\r\n    /**\r\n     * Verifies response returned from intermediary\r\n     *\r\n     * @param resp Response as returned by the intermediary\r\n     * @param amountData\r\n     * @param lp Intermediary\r\n     * @param options Options as passed to the swap creation function\r\n     * @param callerFeeShare\r\n     * @param bitcoinFeeRatePromise Maximum accepted fee rate from the LPs\r\n     * @private\r\n     * @throws {IntermediaryError} in case the response is invalid\r\n     */\r\n    async verifyReturnedData(resp, amountData, lp, options, callerFeeShare, bitcoinFeeRatePromise) {\r\n        if (resp.btcFeeRate > await bitcoinFeeRatePromise)\r\n            throw new IntermediaryError_1.IntermediaryError(\"Bitcoin fee rate returned too high!\");\r\n        //Vault related\r\n        let vaultScript;\r\n        let vaultAddressType;\r\n        let btcAddressScript;\r\n        //Ensure valid btc addresses returned\r\n        try {\r\n            vaultScript = (0, Utils_1.toOutputScript)(this.options.bitcoinNetwork, resp.vaultBtcAddress);\r\n            vaultAddressType = (0, Utils_1.toCoinselectAddressType)(vaultScript);\r\n            btcAddressScript = (0, Utils_1.toOutputScript)(this.options.bitcoinNetwork, resp.btcAddress);\r\n        }\r\n        catch (e) {\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid btc address data returned!\");\r\n        }\r\n        const decodedUtxo = resp.btcUtxo.split(\":\");\r\n        if (resp.address !== lp.getAddress(this.chainIdentifier) || //Ensure the LP is indeed the vault owner\r\n            resp.vaultId < 0n || //Ensure vaultId is not negative\r\n            vaultScript == null || //Make sure vault script is parsable and of known type\r\n            btcAddressScript == null || //Make sure btc address script is parsable and of known type\r\n            vaultAddressType === \"p2pkh\" || vaultAddressType === \"p2sh-p2wpkh\" || //Constrain the vault script type to witness types\r\n            decodedUtxo.length !== 2 || decodedUtxo[0].length !== 64 || isNaN(parseInt(decodedUtxo[1])) || //Check valid UTXO\r\n            resp.btcFeeRate < 1 || resp.btcFeeRate > 10000 //Sanity check on the returned BTC fee rate\r\n        )\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid vault data returned!\");\r\n        //Amounts sanity\r\n        if (resp.btcAmountSwap + resp.btcAmountGas !== resp.btcAmount)\r\n            throw new Error(\"Btc amount mismatch\");\r\n        if (resp.swapFeeBtc + resp.gasSwapFeeBtc !== resp.totalFeeBtc)\r\n            throw new Error(\"Btc fee mismatch\");\r\n        //TODO: For now ensure fees are at 0\r\n        if (resp.callerFeeShare !== callerFeeShare ||\r\n            resp.frontingFeeShare !== 0n ||\r\n            resp.executionFeeShare !== 0n)\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid caller/fronting/execution fee returned\");\r\n        //Check expiry\r\n        if (resp.expiry < Math.floor(Date.now() / 1000))\r\n            throw new IntermediaryError_1.IntermediaryError(\"Quote already expired\");\r\n        //Fetch vault data\r\n        let vault;\r\n        try {\r\n            vault = await this.contract.getVaultData(resp.address, resp.vaultId);\r\n        }\r\n        catch (e) {\r\n            this.logger.error(\"Error getting spv vault (owner: \" + resp.address + \" vaultId: \" + resp.vaultId.toString(10) + \"): \", e);\r\n            throw new IntermediaryError_1.IntermediaryError(\"Spv swap vault not found!\");\r\n        }\r\n        //Make sure vault is opened\r\n        if (!vault.isOpened())\r\n            throw new IntermediaryError_1.IntermediaryError(\"Returned spv swap vault is not opened!\");\r\n        //Make sure the vault doesn't require insane amount of confirmations\r\n        if (vault.getConfirmations() > this.options.maxConfirmations)\r\n            throw new IntermediaryError_1.IntermediaryError(\"SPV swap vault needs too many confirmations: \" + vault.getConfirmations());\r\n        const tokenData = vault.getTokenData();\r\n        //Amounts - make sure the amounts match\r\n        if (amountData.exactIn) {\r\n            if (resp.btcAmount !== amountData.amount)\r\n                throw new IntermediaryError_1.IntermediaryError(\"Invalid amount returned\");\r\n        }\r\n        else {\r\n            //Check the difference between amount adjusted due to scaling to raw amount\r\n            const adjustedAmount = amountData.amount / tokenData[0].multiplier * tokenData[0].multiplier;\r\n            const adjustmentPPM = (amountData.amount - adjustedAmount) * 1000000n / amountData.amount;\r\n            if (adjustmentPPM > this.options.maxRawAmountAdjustmentDifferencePPM)\r\n                throw new IntermediaryError_1.IntermediaryError(\"Invalid amount0 multiplier used, rawAmount diff too high\");\r\n            if (resp.total !== adjustedAmount)\r\n                throw new IntermediaryError_1.IntermediaryError(\"Invalid total returned\");\r\n        }\r\n        if (options.gasAmount == null || options.gasAmount === 0n) {\r\n            if (resp.totalGas !== 0n)\r\n                throw new IntermediaryError_1.IntermediaryError(\"Invalid gas total returned\");\r\n        }\r\n        else {\r\n            //Check the difference between amount adjusted due to scaling to raw amount\r\n            const adjustedGasAmount = options.gasAmount / tokenData[0].multiplier * tokenData[0].multiplier;\r\n            const adjustmentPPM = (options.gasAmount - adjustedGasAmount) * 1000000n / options.gasAmount;\r\n            if (adjustmentPPM > this.options.maxRawAmountAdjustmentDifferencePPM)\r\n                throw new IntermediaryError_1.IntermediaryError(\"Invalid amount1 multiplier used, rawAmount diff too high\");\r\n            if (resp.totalGas !== adjustedGasAmount)\r\n                throw new IntermediaryError_1.IntermediaryError(\"Invalid gas total returned\");\r\n        }\r\n        //Require the vault UTXO to have at least 1 confirmation\r\n        let utxo = resp.btcUtxo.toLowerCase();\r\n        const [txId, voutStr] = utxo.split(\":\");\r\n        let btcTx = await this.btcRpc.getTransaction(txId);\r\n        if (btcTx.confirmations == null || btcTx.confirmations < 1)\r\n            throw new IntermediaryError_1.IntermediaryError(\"SPV vault UTXO not confirmed\");\r\n        const vout = parseInt(voutStr);\r\n        if (btcTx.outs[vout] == null)\r\n            throw new IntermediaryError_1.IntermediaryError(\"Invalid UTXO, doesn't exist\");\r\n        const vaultUtxoValue = btcTx.outs[vout].value;\r\n        //Require vault UTXO is unspent\r\n        if (await this.btcRpc.isSpent(utxo))\r\n            throw new IntermediaryError_1.IntermediaryError(\"Returned spv vault UTXO is already spent\");\r\n        this.logger.debug(\"verifyReturnedData(): Vault UTXO: \" + vault.getUtxo() + \" current utxo: \" + utxo);\r\n        //Trace returned utxo back to what's saved on-chain\r\n        let pendingWithdrawals = [];\r\n        while (vault.getUtxo() !== utxo) {\r\n            const [txId, voutStr] = utxo.split(\":\");\r\n            //Such that 1st tx isn't fetched twice\r\n            if (btcTx.txid !== txId)\r\n                btcTx = await this.btcRpc.getTransaction(txId);\r\n            const withdrawalData = await this.contract.getWithdrawalData(btcTx);\r\n            pendingWithdrawals.unshift(withdrawalData);\r\n            utxo = pendingWithdrawals[0].getSpentVaultUtxo();\r\n            this.logger.debug(\"verifyReturnedData(): Vault UTXO: \" + vault.getUtxo() + \" current utxo: \" + utxo);\r\n            if (pendingWithdrawals.length >= this.options.maxTransactionsDelta)\r\n                throw new IntermediaryError_1.IntermediaryError(\"BTC <> SC state difference too deep, maximum: \" + this.options.maxTransactionsDelta);\r\n        }\r\n        //Verify that the vault has enough balance after processing all pending withdrawals\r\n        let vaultBalances;\r\n        try {\r\n            vaultBalances = vault.calculateStateAfter(pendingWithdrawals);\r\n        }\r\n        catch (e) {\r\n            this.logger.error(\"Error calculating spv vault balance (owner: \" + resp.address + \" vaultId: \" + resp.vaultId.toString(10) + \"): \", e);\r\n            throw new IntermediaryError_1.IntermediaryError(\"Spv swap vault balance prediction failed!\");\r\n        }\r\n        if (vaultBalances.balances[0].scaledAmount < resp.total)\r\n            throw new IntermediaryError_1.IntermediaryError(\"SPV swap vault, insufficient balance, required: \" + resp.total.toString(10) +\r\n                \" has: \" + vaultBalances.balances[0].scaledAmount.toString(10));\r\n        if (vaultBalances.balances[1].scaledAmount < resp.totalGas)\r\n            throw new IntermediaryError_1.IntermediaryError(\"SPV swap vault, insufficient balance, required: \" + resp.totalGas.toString(10) +\r\n                \" has: \" + vaultBalances.balances[1].scaledAmount.toString(10));\r\n        //Also verify that all the withdrawal txns are valid, this is an extra sanity check\r\n        try {\r\n            for (let withdrawal of pendingWithdrawals) {\r\n                await this.contract.checkWithdrawalTx(withdrawal);\r\n            }\r\n        }\r\n        catch (e) {\r\n            this.logger.error(\"Error calculating spv vault balance (owner: \" + resp.address + \" vaultId: \" + resp.vaultId.toString(10) + \"): \", e);\r\n            throw new IntermediaryError_1.IntermediaryError(\"Spv swap vault balance prediction failed!\");\r\n        }\r\n        return {\r\n            vault,\r\n            vaultUtxoValue\r\n        };\r\n    }\r\n    /**\r\n     * Returns a newly created swap, receiving 'amount' on chain\r\n     *\r\n     * @param signer                Smartchain signer's address intiating the swap\r\n     * @param amountData            Amount of token & amount to swap\r\n     * @param lps                   LPs (liquidity providers) to get the quotes from\r\n     * @param options               Quote options\r\n     * @param additionalParams      Additional parameters sent to the LP when creating the swap\r\n     * @param abortSignal           Abort signal for aborting the process\r\n     */\r\n    create(signer, amountData, lps, options, additionalParams, abortSignal) {\r\n        options ??= {};\r\n        options.gasAmount ??= 0n;\r\n        options.feeSafetyFactor ??= 1.25;\r\n        const _abortController = (0, Utils_1.extendAbortController)(abortSignal);\r\n        const pricePrefetchPromise = this.preFetchPrice(amountData, _abortController.signal);\r\n        const nativeTokenAddress = this.chain.getNativeCurrencyAddress();\r\n        const gasTokenPricePrefetchPromise = options.gasAmount === 0n ?\r\n            null :\r\n            this.preFetchPrice({ token: nativeTokenAddress }, _abortController.signal);\r\n        const callerFeePrefetchPromise = this.preFetchCallerFeeShare(signer, amountData, options, pricePrefetchPromise, gasTokenPricePrefetchPromise, _abortController);\r\n        const bitcoinFeeRatePromise = options.maxAllowedNetworkFeeRate != null ?\r\n            Promise.resolve(options.maxAllowedNetworkFeeRate) :\r\n            this.btcRpc.getFeeRate().then(x => this.options.maxBtcFeeOffset + (x * this.options.maxBtcFeeMultiplier)).catch(e => {\r\n                _abortController.abort(e);\r\n                return null;\r\n            });\r\n        return lps.map(lp => {\r\n            return {\r\n                intermediary: lp,\r\n                quote: (async () => {\r\n                    const abortController = (0, Utils_1.extendAbortController)(_abortController.signal);\r\n                    try {\r\n                        const resp = await (0, Utils_1.tryWithRetries)(async (retryCount) => {\r\n                            return await IntermediaryAPI_1.IntermediaryAPI.prepareSpvFromBTC(this.chainIdentifier, lp.url, {\r\n                                address: signer,\r\n                                amount: amountData.amount,\r\n                                token: amountData.token.toString(),\r\n                                exactOut: !amountData.exactIn,\r\n                                gasToken: nativeTokenAddress,\r\n                                gasAmount: options.gasAmount,\r\n                                callerFeeRate: callerFeePrefetchPromise,\r\n                                frontingFeeRate: 0n,\r\n                                additionalParams\r\n                            }, this.options.postRequestTimeout, abortController.signal, retryCount > 0 ? false : null);\r\n                        }, null, e => e instanceof RequestError_1.RequestError, abortController.signal);\r\n                        this.logger.debug(\"create(\" + lp.url + \"): LP response: \", resp);\r\n                        const callerFeeShare = await callerFeePrefetchPromise;\r\n                        const [pricingInfo, gasPricingInfo, { vault, vaultUtxoValue }] = await Promise.all([\r\n                            this.verifyReturnedPrice(lp.services[SwapType_1.SwapType.SPV_VAULT_FROM_BTC], false, resp.btcAmountSwap, resp.total * (100000n + callerFeeShare) / 100000n, amountData.token, {}, pricePrefetchPromise, abortController.signal),\r\n                            options.gasAmount === 0n ? Promise.resolve() : this.verifyReturnedPrice({ ...lp.services[SwapType_1.SwapType.SPV_VAULT_FROM_BTC], swapBaseFee: 0 }, //Base fee should be charged only on the amount, not on gas\r\n                            false, resp.btcAmountGas, resp.totalGas * (100000n + callerFeeShare) / 100000n, nativeTokenAddress, {}, gasTokenPricePrefetchPromise, abortController.signal),\r\n                            this.verifyReturnedData(resp, amountData, lp, options, callerFeeShare, bitcoinFeeRatePromise)\r\n                        ]);\r\n                        const swapInit = {\r\n                            pricingInfo,\r\n                            url: lp.url,\r\n                            expiry: resp.expiry * 1000,\r\n                            swapFee: resp.swapFee,\r\n                            swapFeeBtc: resp.swapFeeBtc,\r\n                            exactIn: amountData.exactIn ?? true,\r\n                            quoteId: resp.quoteId,\r\n                            recipient: signer,\r\n                            vaultOwner: resp.address,\r\n                            vaultId: resp.vaultId,\r\n                            vaultRequiredConfirmations: vault.getConfirmations(),\r\n                            vaultTokenMultipliers: vault.getTokenData().map(val => val.multiplier),\r\n                            vaultBtcAddress: resp.vaultBtcAddress,\r\n                            vaultUtxo: resp.btcUtxo,\r\n                            vaultUtxoValue: BigInt(vaultUtxoValue),\r\n                            btcDestinationAddress: resp.btcAddress,\r\n                            btcAmount: resp.btcAmount,\r\n                            btcAmountSwap: resp.btcAmountSwap,\r\n                            btcAmountGas: resp.btcAmountGas,\r\n                            minimumBtcFeeRate: resp.btcFeeRate,\r\n                            outputTotalSwap: resp.total,\r\n                            outputSwapToken: amountData.token,\r\n                            outputTotalGas: resp.totalGas,\r\n                            outputGasToken: nativeTokenAddress,\r\n                            gasSwapFeeBtc: resp.gasSwapFeeBtc,\r\n                            gasSwapFee: resp.gasSwapFee,\r\n                            callerFeeShare: resp.callerFeeShare,\r\n                            frontingFeeShare: resp.frontingFeeShare,\r\n                            executionFeeShare: resp.executionFeeShare\r\n                        };\r\n                        const quote = new SpvFromBTCSwap_1.SpvFromBTCSwap(this, swapInit);\r\n                        await quote._save();\r\n                        return quote;\r\n                    }\r\n                    catch (e) {\r\n                        abortController.abort(e);\r\n                        throw e;\r\n                    }\r\n                })()\r\n            };\r\n        });\r\n    }\r\n    /**\r\n     * Returns a random dummy PSBT that can be used for fee estimation, the last output (the LP output) is omitted\r\n     *  to allow for coinselection algorithm to determine maximum sendable amount there\r\n     *\r\n     * @param includeGasToken   Whether to return the PSBT also with the gas token amount (increases the vSize by 8)\r\n     */\r\n    getDummySwapPsbt(includeGasToken = false) {\r\n        //Construct dummy swap psbt\r\n        const psbt = new btc_signer_1.Transaction({\r\n            allowUnknownInputs: true,\r\n            allowLegacyWitnessUtxo: true,\r\n            allowUnknownOutputs: true\r\n        });\r\n        const randomVaultOutScript = btc_signer_1.OutScript.encode({ type: \"tr\", pubkey: Buffer.from(\"0101010101010101010101010101010101010101010101010101010101010101\", \"hex\") });\r\n        psbt.addInput({\r\n            txid: (0, Utils_1.randomBytes)(32),\r\n            index: 0,\r\n            witnessUtxo: {\r\n                script: randomVaultOutScript,\r\n                amount: 600n\r\n            }\r\n        });\r\n        psbt.addOutput({\r\n            script: randomVaultOutScript,\r\n            amount: 600n\r\n        });\r\n        const opReturnData = this.contract.toOpReturnData(this.chain.randomAddress(), includeGasToken ? [0xffffffffffffffffn, 0xffffffffffffffffn] : [0xffffffffffffffffn]);\r\n        psbt.addOutput({\r\n            script: Buffer.concat([\r\n                opReturnData.length <= 75 ? Buffer.from([0x6a, opReturnData.length]) : Buffer.from([0x6a, 0x4c, opReturnData.length]),\r\n                opReturnData\r\n            ]),\r\n            amount: 0n\r\n        });\r\n        return psbt;\r\n    }\r\n}\r\nexports.SpvFromBTCWrapper = SpvFromBTCWrapper;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SwapperUtils = void 0;\r\nconst bolt11_1 = require(\"@atomiqlabs/bolt11\");\r\nconst btc_signer_1 = require(\"@scure/btc-signer\");\r\nconst LNURL_1 = require(\"../../../utils/LNURL\");\r\nconst SwapType_1 = require(\"../../enums/SwapType\");\r\nconst Tokens_1 = require(\"../../../Tokens\");\r\nconst SingleAddressBitcoinWallet_1 = require(\"../../../btc/wallet/SingleAddressBitcoinWallet\");\r\nconst base_1 = require(\"@atomiqlabs/base\");\r\nconst Utils_1 = require(\"../../../utils/Utils\");\r\nclass SwapperUtils {\r\n    constructor(root) {\r\n        this.bitcoinNetwork = root.bitcoinNetwork;\r\n        this.root = root;\r\n    }\r\n    /**\r\n     * Returns true if string is a valid BOLT11 bitcoin lightning invoice\r\n     *\r\n     * @param lnpr\r\n     */\r\n    isLightningInvoice(lnpr) {\r\n        try {\r\n            (0, bolt11_1.decode)(lnpr);\r\n            return true;\r\n        }\r\n        catch (e) { }\r\n        return false;\r\n    }\r\n    /**\r\n     * Returns true if string is a valid bitcoin address\r\n     *\r\n     * @param addr\r\n     */\r\n    isValidBitcoinAddress(addr) {\r\n        try {\r\n            (0, btc_signer_1.Address)(this.bitcoinNetwork).decode(addr);\r\n            return true;\r\n        }\r\n        catch (e) {\r\n            return false;\r\n        }\r\n    }\r\n    /**\r\n     * Returns true if string is a valid BOLT11 bitcoin lightning invoice WITH AMOUNT\r\n     *\r\n     * @param lnpr\r\n     */\r\n    isValidLightningInvoice(lnpr) {\r\n        try {\r\n            const parsed = (0, bolt11_1.decode)(lnpr);\r\n            if (parsed.millisatoshis != null)\r\n                return true;\r\n        }\r\n        catch (e) { }\r\n        return false;\r\n    }\r\n    /**\r\n     * Returns true if string is a valid LNURL (no checking on type is performed)\r\n     *\r\n     * @param lnurl\r\n     */\r\n    isValidLNURL(lnurl) {\r\n        return LNURL_1.LNURL.isLNURL(lnurl);\r\n    }\r\n    /**\r\n     * Returns type and data about an LNURL\r\n     *\r\n     * @param lnurl\r\n     * @param shouldRetry\r\n     */\r\n    getLNURLTypeAndData(lnurl, shouldRetry) {\r\n        return LNURL_1.LNURL.getLNURLType(lnurl, shouldRetry);\r\n    }\r\n    /**\r\n     * Returns satoshi value of BOLT11 bitcoin lightning invoice WITH AMOUNT\r\n     *\r\n     * @param lnpr\r\n     */\r\n    getLightningInvoiceValue(lnpr) {\r\n        const parsed = (0, bolt11_1.decode)(lnpr);\r\n        if (parsed.millisatoshis != null)\r\n            return (BigInt(parsed.millisatoshis) + 999n) / 1000n;\r\n        return null;\r\n    }\r\n    parseBitcoinAddress(resultText) {\r\n        let _amount = null;\r\n        if (resultText.includes(\"?\")) {\r\n            const arr = resultText.split(\"?\");\r\n            resultText = arr[0];\r\n            const params = arr[1].split(\"&\");\r\n            for (let param of params) {\r\n                const arr2 = param.split(\"=\");\r\n                const key = arr2[0];\r\n                const value = decodeURIComponent(arr2[1]);\r\n                if (key === \"amount\") {\r\n                    _amount = (0, Tokens_1.fromDecimal)(parseFloat(value).toFixed(8), 8);\r\n                }\r\n            }\r\n        }\r\n        if (this.isValidBitcoinAddress(resultText)) {\r\n            return {\r\n                address: resultText,\r\n                type: \"BITCOIN\",\r\n                swapType: SwapType_1.SwapType.TO_BTC,\r\n                amount: (0, Tokens_1.toTokenAmount)(_amount, Tokens_1.BitcoinTokens.BTC, this.root.prices)\r\n            };\r\n        }\r\n    }\r\n    parseLNURLSync(resultText) {\r\n        if (this.isValidLNURL(resultText)) {\r\n            return {\r\n                address: resultText,\r\n                type: \"LNURL\",\r\n                swapType: null\r\n            };\r\n        }\r\n    }\r\n    async parseLNURL(resultText) {\r\n        if (this.isValidLNURL(resultText)) {\r\n            try {\r\n                const result = await this.getLNURLTypeAndData(resultText);\r\n                if (result == null)\r\n                    throw new Error(\"Invalid LNURL specified!\");\r\n                const response = {\r\n                    address: resultText,\r\n                    type: \"LNURL\",\r\n                    swapType: (0, LNURL_1.isLNURLPay)(result) ? SwapType_1.SwapType.TO_BTCLN : (0, LNURL_1.isLNURLWithdraw)(result) ? SwapType_1.SwapType.FROM_BTCLN : null,\r\n                    lnurl: result\r\n                };\r\n                if (result.min === result.max) {\r\n                    return {\r\n                        ...response,\r\n                        amount: (0, Tokens_1.toTokenAmount)(result.min, Tokens_1.BitcoinTokens.BTCLN, this.root.prices)\r\n                    };\r\n                }\r\n                else {\r\n                    return {\r\n                        ...response,\r\n                        min: (0, Tokens_1.toTokenAmount)(result.min, Tokens_1.BitcoinTokens.BTCLN, this.root.prices),\r\n                        max: (0, Tokens_1.toTokenAmount)(result.max, Tokens_1.BitcoinTokens.BTCLN, this.root.prices)\r\n                    };\r\n                }\r\n            }\r\n            catch (e) {\r\n                throw new Error(\"Failed to contact LNURL service, check your internet connection and retry later.\");\r\n            }\r\n        }\r\n    }\r\n    parseLightningInvoice(resultText) {\r\n        if (this.isLightningInvoice(resultText)) {\r\n            if (this.isValidLightningInvoice(resultText)) {\r\n                const amountBN = this.getLightningInvoiceValue(resultText);\r\n                return {\r\n                    address: resultText,\r\n                    type: \"LIGHTNING\",\r\n                    swapType: SwapType_1.SwapType.TO_BTCLN,\r\n                    amount: (0, Tokens_1.toTokenAmount)(amountBN, Tokens_1.BitcoinTokens.BTCLN, this.root.prices)\r\n                };\r\n            }\r\n            else {\r\n                throw new Error(\"Lightning invoice needs to contain an amount!\");\r\n            }\r\n        }\r\n    }\r\n    parseSmartchainAddress(resultText) {\r\n        for (let chainId of this.root.getSmartChains()) {\r\n            if (this.root.chains[chainId].chainInterface.isValidAddress(resultText)) {\r\n                if (this.root.supportsSwapType(chainId, SwapType_1.SwapType.SPV_VAULT_FROM_BTC)) {\r\n                    return {\r\n                        address: resultText,\r\n                        type: chainId,\r\n                        swapType: SwapType_1.SwapType.SPV_VAULT_FROM_BTC\r\n                    };\r\n                }\r\n                else {\r\n                    return {\r\n                        address: resultText,\r\n                        type: chainId,\r\n                        swapType: null\r\n                    };\r\n                }\r\n            }\r\n        }\r\n    }\r\n    /**\r\n     * General parser for bitcoin addresses, LNURLs, lightning invoices, smart chain addresses, also fetches LNURL data\r\n     *  (hence returns Promise)\r\n     *\r\n     * @param addressString Address to parse\r\n     * @throws {Error} Error in address parsing\r\n     * @returns Address data or null if address doesn't conform to any known format\r\n     */\r\n    async parseAddress(addressString) {\r\n        if (addressString.startsWith(\"bitcoin:\")) {\r\n            const parsedBitcoinAddress = this.parseBitcoinAddress(addressString.substring(8));\r\n            if (parsedBitcoinAddress != null)\r\n                return parsedBitcoinAddress;\r\n            throw new Error(\"Invalid bitcoin address!\");\r\n        }\r\n        const parsedBitcoinAddress = this.parseBitcoinAddress(addressString);\r\n        if (parsedBitcoinAddress != null)\r\n            return parsedBitcoinAddress;\r\n        if (addressString.startsWith(\"lightning:\")) {\r\n            const resultText = addressString.substring(10);\r\n            const resultLnurl = await this.parseLNURL(resultText);\r\n            if (resultLnurl != null)\r\n                return resultLnurl;\r\n            const resultLightningInvoice = this.parseLightningInvoice(resultText);\r\n            if (resultLightningInvoice != null)\r\n                return resultLightningInvoice;\r\n            throw new Error(\"Invalid lightning network invoice or LNURL!\");\r\n        }\r\n        const resultLnurl = await this.parseLNURL(addressString);\r\n        if (resultLnurl != null)\r\n            return resultLnurl;\r\n        const resultLightningInvoice = this.parseLightningInvoice(addressString);\r\n        if (resultLightningInvoice != null)\r\n            return resultLightningInvoice;\r\n        return this.parseSmartchainAddress(addressString);\r\n    }\r\n    /**\r\n     * Synchronous general parser for bitcoin addresses, LNURLs, lightning invoices, smart chain addresses, doesn't fetch\r\n     *  LNURL data, reports swapType: null instead to prevent returning a Promise\r\n     *\r\n     * @param addressString Address to parse\r\n     * @throws {Error} Error in address parsing\r\n     * @returns Address data or null if address doesn't conform to any known format\r\n     */\r\n    parseAddressSync(addressString) {\r\n        if (addressString.startsWith(\"bitcoin:\")) {\r\n            const parsedBitcoinAddress = this.parseBitcoinAddress(addressString.substring(8));\r\n            if (parsedBitcoinAddress != null)\r\n                return parsedBitcoinAddress;\r\n            throw new Error(\"Invalid bitcoin address!\");\r\n        }\r\n        const parsedBitcoinAddress = this.parseBitcoinAddress(addressString);\r\n        if (parsedBitcoinAddress != null)\r\n            return parsedBitcoinAddress;\r\n        if (addressString.startsWith(\"lightning:\")) {\r\n            const resultText = addressString.substring(10);\r\n            const resultLnurl = this.parseLNURLSync(resultText);\r\n            if (resultLnurl != null)\r\n                return resultLnurl;\r\n            const resultLightningInvoice = this.parseLightningInvoice(resultText);\r\n            if (resultLightningInvoice != null)\r\n                return resultLightningInvoice;\r\n            throw new Error(\"Invalid lightning network invoice or LNURL!\");\r\n        }\r\n        const resultLnurl = this.parseLNURLSync(addressString);\r\n        if (resultLnurl != null)\r\n            return resultLnurl;\r\n        const resultLightningInvoice = this.parseLightningInvoice(addressString);\r\n        if (resultLightningInvoice != null)\r\n            return resultLightningInvoice;\r\n        return this.parseSmartchainAddress(addressString);\r\n    }\r\n    /**\r\n     * Returns a random PSBT that can be used for fee estimation, the last output (the LP output) is omitted\r\n     *  to allow for coinselection algorithm to determine maximum sendable amount there\r\n     *\r\n     * @param chainIdentifier\r\n     * @param includeGasToken   Whether to return the PSBT also with the gas token amount (increases the vSize by 8)\r\n     */\r\n    getRandomSpvVaultPsbt(chainIdentifier, includeGasToken) {\r\n        const wrapper = this.root.chains[chainIdentifier].wrappers[SwapType_1.SwapType.SPV_VAULT_FROM_BTC];\r\n        if (wrapper == null)\r\n            throw new Error(\"Chain doesn't support spv vault swaps!\");\r\n        return wrapper.getDummySwapPsbt(includeGasToken);\r\n    }\r\n    /**\r\n     * Returns the spendable balance of a bitcoin wallet\r\n     *\r\n     * @param addressOrWallet\r\n     * @param targetChain\r\n     * @param options Additional options\r\n     */\r\n    async getBitcoinSpendableBalance(addressOrWallet, targetChain, options) {\r\n        if (typeof (addressOrWallet) !== \"string\" && addressOrWallet.getTransactionFee == null)\r\n            throw new Error(\"Wallet must be a string address or IBitcoinWallet\");\r\n        let bitcoinWallet;\r\n        if (typeof (addressOrWallet) === \"string\") {\r\n            bitcoinWallet = new SingleAddressBitcoinWallet_1.SingleAddressBitcoinWallet(this.root.bitcoinRpc, this.bitcoinNetwork, addressOrWallet);\r\n        }\r\n        else {\r\n            bitcoinWallet = addressOrWallet;\r\n        }\r\n        let feeRate = options?.feeRate ?? await bitcoinWallet.getFeeRate();\r\n        if (options?.minFeeRate != null)\r\n            feeRate = Math.max(feeRate, options.minFeeRate);\r\n        let result;\r\n        if (targetChain != null && this.root.supportsSwapType(targetChain, SwapType_1.SwapType.SPV_VAULT_FROM_BTC)) {\r\n            result = await bitcoinWallet.getSpendableBalance(this.getRandomSpvVaultPsbt(targetChain, options?.gasDrop), feeRate);\r\n        }\r\n        else {\r\n            result = await bitcoinWallet.getSpendableBalance(undefined, feeRate);\r\n        }\r\n        return {\r\n            balance: (0, Tokens_1.toTokenAmount)(result.balance, Tokens_1.BitcoinTokens.BTC, this.root.prices),\r\n            feeRate: result.feeRate\r\n        };\r\n    }\r\n    /**\r\n     * Returns the maximum spendable balance of the wallet, deducting the fee needed to initiate a swap for native balances\r\n     */\r\n    async getSpendableBalance(wallet, token, options) {\r\n        if (typeof (wallet) !== \"string\" && wallet.getAddress == null)\r\n            throw new Error(\"Signer must be a string or smart chain signer\");\r\n        if (this.root.chains[token.chainId] == null)\r\n            throw new Error(\"Invalid chain identifier! Unknown chain: \" + token.chainId);\r\n        const { swapContract, chainInterface } = this.root.chains[token.chainId];\r\n        const signer = typeof (wallet) === \"string\" ? wallet : wallet.getAddress();\r\n        let finalBalance;\r\n        if (chainInterface.getNativeCurrencyAddress() !== token.address) {\r\n            finalBalance = await chainInterface.getBalance(signer, token.address);\r\n        }\r\n        else {\r\n            let [balance, commitFee] = await Promise.all([\r\n                chainInterface.getBalance(signer, token.address),\r\n                swapContract.getCommitFee(\r\n                //Use large amount, such that the fee for wrapping more tokens is always included!\r\n                await swapContract.createSwapData(base_1.ChainSwapType.HTLC, signer, null, token.address, 0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffn, swapContract.getHashForHtlc((0, Utils_1.randomBytes)(32)).toString(\"hex\"), base_1.BigIntBufferUtils.fromBuffer((0, Utils_1.randomBytes)(8)), BigInt(Math.floor(Date.now() / 1000)), true, false, base_1.BigIntBufferUtils.fromBuffer((0, Utils_1.randomBytes)(2)), base_1.BigIntBufferUtils.fromBuffer((0, Utils_1.randomBytes)(2))), options?.feeRate)\r\n            ]);\r\n            if (options?.feeMultiplier != null) {\r\n                commitFee = commitFee * (BigInt(Math.floor(options.feeMultiplier * 1000000))) / 1000000n;\r\n            }\r\n            finalBalance = (0, Utils_1.bigIntMax)(balance - commitFee, 0n);\r\n        }\r\n        return (0, Tokens_1.toTokenAmount)(finalBalance, token, this.root.prices);\r\n    }\r\n    /**\r\n     * Returns the address of the native currency of the chain\r\n     */\r\n    getNativeToken(chainIdentifier) {\r\n        if (this.root.chains[chainIdentifier] == null)\r\n            throw new Error(\"Invalid chain identifier! Unknown chain: \" + chainIdentifier);\r\n        return this.root.tokens[chainIdentifier][this.root.chains[chainIdentifier].chainInterface.getNativeCurrencyAddress()];\r\n    }\r\n    /**\r\n     * Returns a random signer for a given smart chain\r\n     *\r\n     * @param chainIdentifier\r\n     */\r\n    randomSigner(chainIdentifier) {\r\n        if (this.root.chains[chainIdentifier] == null)\r\n            throw new Error(\"Invalid chain identifier! Unknown chain: \" + chainIdentifier);\r\n        return this.root.chains[chainIdentifier].chainInterface.randomSigner();\r\n    }\r\n    /**\r\n     * Returns a random address for a given smart chain\r\n     *\r\n     * @param chainIdentifier\r\n     */\r\n    randomAddress(chainIdentifier) {\r\n        if (this.root.chains[chainIdentifier] == null)\r\n            throw new Error(\"Invalid chain identifier! Unknown chain: \" + chainIdentifier);\r\n        return this.root.chains[chainIdentifier].chainInterface.randomAddress();\r\n    }\r\n}\r\nexports.SwapperUtils = SwapperUtils;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.Swapper = void 0;\r\nconst base_1 = require(\"@atomiqlabs/base\");\r\nconst ToBTCLNWrapper_1 = require(\"../escrow_swaps/tobtc/ln/ToBTCLNWrapper\");\r\nconst ToBTCWrapper_1 = require(\"../escrow_swaps/tobtc/onchain/ToBTCWrapper\");\r\nconst FromBTCLNWrapper_1 = require(\"../escrow_swaps/frombtc/ln/FromBTCLNWrapper\");\r\nconst FromBTCWrapper_1 = require(\"../escrow_swaps/frombtc/onchain/FromBTCWrapper\");\r\nconst IntermediaryDiscovery_1 = require(\"../../intermediaries/IntermediaryDiscovery\");\r\nconst bolt11_1 = require(\"@atomiqlabs/bolt11\");\r\nconst IntermediaryError_1 = require(\"../../errors/IntermediaryError\");\r\nconst SwapType_1 = require(\"../enums/SwapType\");\r\nconst MempoolBtcRelaySynchronizer_1 = require(\"../../btc/mempool/synchronizer/MempoolBtcRelaySynchronizer\");\r\nconst LnForGasWrapper_1 = require(\"../trusted/ln/LnForGasWrapper\");\r\nconst events_1 = require(\"events\");\r\nconst LNURL_1 = require(\"../../utils/LNURL\");\r\nconst Utils_1 = require(\"../../utils/Utils\");\r\nconst RequestError_1 = require(\"../../errors/RequestError\");\r\nconst SwapperWithChain_1 = require(\"./SwapperWithChain\");\r\nconst Tokens_1 = require(\"../../Tokens\");\r\nconst OnchainForGasWrapper_1 = require(\"../trusted/onchain/OnchainForGasWrapper\");\r\nconst utils_1 = require(\"@scure/btc-signer/utils\");\r\nconst IndexedDBUnifiedStorage_1 = require(\"../../browser-storage/IndexedDBUnifiedStorage\");\r\nconst UnifiedSwapStorage_1 = require(\"../../storage/UnifiedSwapStorage\");\r\nconst UnifiedSwapEventListener_1 = require(\"../../events/UnifiedSwapEventListener\");\r\nconst SpvFromBTCWrapper_1 = require(\"../spv_swaps/SpvFromBTCWrapper\");\r\nconst SwapperUtils_1 = require(\"./utils/SwapperUtils\");\r\nclass Swapper extends events_1.EventEmitter {\r\n    constructor(bitcoinRpc, chainsData, pricing, tokens, options) {\r\n        super();\r\n        this.logger = (0, Utils_1.getLogger)(this.constructor.name + \": \");\r\n        this.SwapTypeInfo = {\r\n            [SwapType_1.SwapType.TO_BTC]: {\r\n                requiresInputWallet: true,\r\n                requiresOutputWallet: false,\r\n                supportsGasDrop: false\r\n            },\r\n            [SwapType_1.SwapType.TO_BTCLN]: {\r\n                requiresInputWallet: true,\r\n                requiresOutputWallet: false,\r\n                supportsGasDrop: false\r\n            },\r\n            [SwapType_1.SwapType.FROM_BTC]: {\r\n                requiresInputWallet: false,\r\n                requiresOutputWallet: true,\r\n                supportsGasDrop: false\r\n            },\r\n            [SwapType_1.SwapType.FROM_BTCLN]: {\r\n                requiresInputWallet: false,\r\n                requiresOutputWallet: true,\r\n                supportsGasDrop: false\r\n            },\r\n            [SwapType_1.SwapType.SPV_VAULT_FROM_BTC]: {\r\n                requiresInputWallet: true,\r\n                requiresOutputWallet: false,\r\n                supportsGasDrop: true\r\n            },\r\n            [SwapType_1.SwapType.TRUSTED_FROM_BTC]: {\r\n                requiresInputWallet: false,\r\n                requiresOutputWallet: false,\r\n                supportsGasDrop: false\r\n            },\r\n            [SwapType_1.SwapType.TRUSTED_FROM_BTCLN]: {\r\n                requiresInputWallet: false,\r\n                requiresOutputWallet: false,\r\n                supportsGasDrop: false\r\n            }\r\n        };\r\n        const storagePrefix = options?.storagePrefix ?? \"atomiq-\";\r\n        options.bitcoinNetwork = options.bitcoinNetwork == null ? base_1.BitcoinNetwork.TESTNET : options.bitcoinNetwork;\r\n        options.swapStorage ??= (name) => new IndexedDBUnifiedStorage_1.IndexedDBUnifiedStorage(name);\r\n        this._bitcoinNetwork = options.bitcoinNetwork;\r\n        this.bitcoinNetwork = options.bitcoinNetwork === base_1.BitcoinNetwork.MAINNET ? utils_1.NETWORK :\r\n            (options.bitcoinNetwork === base_1.BitcoinNetwork.TESTNET || options.bitcoinNetwork === base_1.BitcoinNetwork.TESTNET4) ? utils_1.TEST_NETWORK : {\r\n                bech32: 'bcrt',\r\n                pubKeyHash: 111,\r\n                scriptHash: 196,\r\n                wif: 239\r\n            };\r\n        this.Utils = new SwapperUtils_1.SwapperUtils(this);\r\n        this.prices = pricing;\r\n        this.bitcoinRpc = bitcoinRpc;\r\n        this.mempoolApi = bitcoinRpc.api;\r\n        this.options = options;\r\n        this.tokens = {};\r\n        for (let tokenData of tokens) {\r\n            for (let chainId in tokenData.chains) {\r\n                const chainData = tokenData.chains[chainId];\r\n                this.tokens[chainId] ??= {};\r\n                this.tokens[chainId][chainData.address] = {\r\n                    chain: \"SC\",\r\n                    chainId,\r\n                    ticker: tokenData.ticker,\r\n                    name: tokenData.name,\r\n                    decimals: chainData.decimals,\r\n                    displayDecimals: chainData.displayDecimals,\r\n                    address: chainData.address\r\n                };\r\n            }\r\n        }\r\n        this.swapStateListener = (swap) => {\r\n            this.emit(\"swapState\", swap);\r\n        };\r\n        this.chains = (0, Utils_1.objectMap)(chainsData, (chainData, key) => {\r\n            const { swapContract, chainEvents, btcRelay, chainInterface, spvVaultContract, spvVaultWithdrawalDataConstructor } = chainData;\r\n            const synchronizer = new MempoolBtcRelaySynchronizer_1.MempoolBtcRelaySynchronizer(btcRelay, bitcoinRpc);\r\n            const storageHandler = options.swapStorage(storagePrefix + chainData.chainId);\r\n            const unifiedSwapStorage = new UnifiedSwapStorage_1.UnifiedSwapStorage(storageHandler, this.options.noSwapCache);\r\n            const unifiedChainEvents = new UnifiedSwapEventListener_1.UnifiedSwapEventListener(unifiedSwapStorage, chainEvents);\r\n            const wrappers = {};\r\n            wrappers[SwapType_1.SwapType.TO_BTCLN] = new ToBTCLNWrapper_1.ToBTCLNWrapper(key, unifiedSwapStorage, unifiedChainEvents, chainInterface, swapContract, pricing, tokens, chainData.swapDataConstructor, {\r\n                getRequestTimeout: options.getRequestTimeout,\r\n                postRequestTimeout: options.postRequestTimeout,\r\n            });\r\n            wrappers[SwapType_1.SwapType.TO_BTC] = new ToBTCWrapper_1.ToBTCWrapper(key, unifiedSwapStorage, unifiedChainEvents, chainInterface, swapContract, pricing, tokens, chainData.swapDataConstructor, this.bitcoinRpc, {\r\n                getRequestTimeout: options.getRequestTimeout,\r\n                postRequestTimeout: options.postRequestTimeout,\r\n                bitcoinNetwork: this.bitcoinNetwork\r\n            });\r\n            wrappers[SwapType_1.SwapType.FROM_BTCLN] = new FromBTCLNWrapper_1.FromBTCLNWrapper(key, unifiedSwapStorage, unifiedChainEvents, chainInterface, swapContract, pricing, tokens, chainData.swapDataConstructor, bitcoinRpc, {\r\n                getRequestTimeout: options.getRequestTimeout,\r\n                postRequestTimeout: options.postRequestTimeout,\r\n                unsafeSkipLnNodeCheck: this._bitcoinNetwork === base_1.BitcoinNetwork.TESTNET4 || this._bitcoinNetwork === base_1.BitcoinNetwork.REGTEST\r\n            });\r\n            wrappers[SwapType_1.SwapType.FROM_BTC] = new FromBTCWrapper_1.FromBTCWrapper(key, unifiedSwapStorage, unifiedChainEvents, chainInterface, swapContract, pricing, tokens, chainData.swapDataConstructor, btcRelay, synchronizer, this.bitcoinRpc, {\r\n                getRequestTimeout: options.getRequestTimeout,\r\n                postRequestTimeout: options.postRequestTimeout,\r\n                bitcoinNetwork: this.bitcoinNetwork\r\n            });\r\n            wrappers[SwapType_1.SwapType.TRUSTED_FROM_BTCLN] = new LnForGasWrapper_1.LnForGasWrapper(key, unifiedSwapStorage, unifiedChainEvents, chainInterface, pricing, tokens, {\r\n                getRequestTimeout: options.getRequestTimeout,\r\n                postRequestTimeout: options.postRequestTimeout\r\n            });\r\n            wrappers[SwapType_1.SwapType.TRUSTED_FROM_BTC] = new OnchainForGasWrapper_1.OnchainForGasWrapper(key, unifiedSwapStorage, unifiedChainEvents, chainInterface, pricing, tokens, bitcoinRpc, {\r\n                getRequestTimeout: options.getRequestTimeout,\r\n                postRequestTimeout: options.postRequestTimeout,\r\n                bitcoinNetwork: this.bitcoinNetwork\r\n            });\r\n            if (spvVaultContract != null) {\r\n                wrappers[SwapType_1.SwapType.SPV_VAULT_FROM_BTC] = new SpvFromBTCWrapper_1.SpvFromBTCWrapper(key, unifiedSwapStorage, unifiedChainEvents, chainInterface, spvVaultContract, pricing, tokens, spvVaultWithdrawalDataConstructor, btcRelay, synchronizer, bitcoinRpc, {\r\n                    getRequestTimeout: options.getRequestTimeout,\r\n                    postRequestTimeout: options.postRequestTimeout,\r\n                    bitcoinNetwork: this.bitcoinNetwork\r\n                });\r\n            }\r\n            Object.keys(wrappers).forEach(key => wrappers[key].events.on(\"swapState\", this.swapStateListener));\r\n            const reviver = (val) => {\r\n                const wrapper = wrappers[val.type];\r\n                if (wrapper == null)\r\n                    return null;\r\n                return new wrapper.swapDeserializer(wrapper, val);\r\n            };\r\n            return {\r\n                chainEvents,\r\n                spvVaultContract,\r\n                swapContract,\r\n                chainInterface,\r\n                btcRelay,\r\n                synchronizer,\r\n                wrappers,\r\n                unifiedChainEvents,\r\n                unifiedSwapStorage,\r\n                reviver\r\n            };\r\n        });\r\n        const contracts = (0, Utils_1.objectMap)(chainsData, (data) => data.swapContract);\r\n        if (options.intermediaryUrl != null) {\r\n            this.intermediaryDiscovery = new IntermediaryDiscovery_1.IntermediaryDiscovery(contracts, options.registryUrl, Array.isArray(options.intermediaryUrl) ? options.intermediaryUrl : [options.intermediaryUrl], options.getRequestTimeout);\r\n        }\r\n        else {\r\n            this.intermediaryDiscovery = new IntermediaryDiscovery_1.IntermediaryDiscovery(contracts, options.registryUrl, null, options.getRequestTimeout);\r\n        }\r\n        this.intermediaryDiscovery.on(\"removed\", (intermediaries) => {\r\n            this.emit(\"lpsRemoved\", intermediaries);\r\n        });\r\n        this.intermediaryDiscovery.on(\"added\", (intermediaries) => {\r\n            this.emit(\"lpsAdded\", intermediaries);\r\n        });\r\n    }\r\n    /**\r\n     * Initializes the swap storage and loads existing swaps, needs to be called before any other action\r\n     */\r\n    async init() {\r\n        for (let chainIdentifier in this.chains) {\r\n            const { swapContract, unifiedChainEvents, unifiedSwapStorage, wrappers, reviver } = this.chains[chainIdentifier];\r\n            await swapContract.start();\r\n            this.logger.debug(\"init(): Intialized swap contract: \" + chainIdentifier);\r\n            await unifiedSwapStorage.init();\r\n            if (unifiedSwapStorage.storage instanceof IndexedDBUnifiedStorage_1.IndexedDBUnifiedStorage) {\r\n                //Try to migrate the data here\r\n                const storagePrefix = chainIdentifier === \"SOLANA\" ?\r\n                    \"SOLv4-\" + this._bitcoinNetwork + \"-Swaps-\" :\r\n                    \"atomiqsdk-\" + this._bitcoinNetwork + chainIdentifier + \"-Swaps-\";\r\n                await unifiedSwapStorage.storage.tryMigrate([\r\n                    [storagePrefix + \"FromBTC\", SwapType_1.SwapType.FROM_BTC],\r\n                    [storagePrefix + \"FromBTCLN\", SwapType_1.SwapType.FROM_BTCLN],\r\n                    [storagePrefix + \"ToBTC\", SwapType_1.SwapType.TO_BTC],\r\n                    [storagePrefix + \"ToBTCLN\", SwapType_1.SwapType.TO_BTCLN]\r\n                ], (obj) => {\r\n                    const swap = reviver(obj);\r\n                    if (swap.randomNonce == null) {\r\n                        const oldIdentifierHash = swap.getId();\r\n                        swap.randomNonce = (0, Utils_1.randomBytes)(16).toString(\"hex\");\r\n                        const newIdentifierHash = swap.getId();\r\n                        this.logger.info(\"init(): Found older swap version without randomNonce, replacing, old hash: \" + oldIdentifierHash +\r\n                            \" new hash: \" + newIdentifierHash);\r\n                    }\r\n                    return swap;\r\n                });\r\n            }\r\n            if (!this.options.noEvents)\r\n                await unifiedChainEvents.start();\r\n            this.logger.debug(\"init(): Intialized events: \" + chainIdentifier);\r\n            for (let key in wrappers) {\r\n                // this.logger.debug(\"init(): Initializing \"+SwapType[key]+\": \"+chainIdentifier);\r\n                await wrappers[key].init(this.options.noTimers, this.options.dontCheckPastSwaps);\r\n            }\r\n        }\r\n        this.logger.debug(\"init(): Initializing intermediary discovery\");\r\n        if (!this.options.dontFetchLPs)\r\n            await this.intermediaryDiscovery.init();\r\n        if (this.options.defaultTrustedIntermediaryUrl != null) {\r\n            this.defaultTrustedIntermediary = await this.intermediaryDiscovery.getIntermediary(this.options.defaultTrustedIntermediaryUrl);\r\n        }\r\n    }\r\n    /**\r\n     * Stops listening for onchain events and closes this Swapper instance\r\n     */\r\n    async stop() {\r\n        for (let chainIdentifier in this.chains) {\r\n            const { wrappers, unifiedChainEvents } = this.chains[chainIdentifier];\r\n            for (let key in wrappers) {\r\n                wrappers[key].events.removeListener(\"swapState\", this.swapStateListener);\r\n                await wrappers[key].stop();\r\n            }\r\n            await unifiedChainEvents.stop();\r\n        }\r\n    }\r\n    /**\r\n     * Creates swap & handles intermediary, quote selection\r\n     *\r\n     * @param chainIdentifier\r\n     * @param create Callback to create the\r\n     * @param amountData Amount data as passed to the function\r\n     * @param swapType Swap type of the execution\r\n     * @param maxWaitTimeMS Maximum waiting time after the first intermediary returns the quote\r\n     * @private\r\n     * @throws {Error} when no intermediary was found\r\n     * @throws {Error} if the chain with the provided identifier cannot be found\r\n     */\r\n    async createSwap(chainIdentifier, create, amountData, swapType, maxWaitTimeMS = 2000) {\r\n        if (this.chains[chainIdentifier] == null)\r\n            throw new Error(\"Invalid chain identifier! Unknown chain: \" + chainIdentifier);\r\n        let candidates;\r\n        const inBtc = swapType === SwapType_1.SwapType.TO_BTCLN || swapType === SwapType_1.SwapType.TO_BTC ? !amountData.exactIn : amountData.exactIn;\r\n        if (!inBtc) {\r\n            //Get candidates not based on the amount\r\n            candidates = this.intermediaryDiscovery.getSwapCandidates(chainIdentifier, swapType, amountData.token);\r\n        }\r\n        else {\r\n            candidates = this.intermediaryDiscovery.getSwapCandidates(chainIdentifier, swapType, amountData.token, amountData.amount);\r\n        }\r\n        let swapLimitsChanged = false;\r\n        if (candidates.length === 0) {\r\n            this.logger.warn(\"createSwap(): No valid intermediary found, reloading intermediary database...\");\r\n            await this.intermediaryDiscovery.reloadIntermediaries();\r\n            swapLimitsChanged = true;\r\n            if (!inBtc) {\r\n                //Get candidates not based on the amount\r\n                candidates = this.intermediaryDiscovery.getSwapCandidates(chainIdentifier, swapType, amountData.token);\r\n            }\r\n            else {\r\n                candidates = this.intermediaryDiscovery.getSwapCandidates(chainIdentifier, swapType, amountData.token, amountData.amount);\r\n                if (candidates.length === 0) {\r\n                    const min = this.intermediaryDiscovery.getSwapMinimum(chainIdentifier, swapType, amountData.token);\r\n                    const max = this.intermediaryDiscovery.getSwapMaximum(chainIdentifier, swapType, amountData.token);\r\n                    if (min != null && max != null) {\r\n                        if (amountData.amount < BigInt(min))\r\n                            throw new RequestError_1.OutOfBoundsError(\"Amount too low!\", 200, BigInt(min), BigInt(max));\r\n                        if (amountData.amount > BigInt(max))\r\n                            throw new RequestError_1.OutOfBoundsError(\"Amount too high!\", 200, BigInt(min), BigInt(max));\r\n                    }\r\n                }\r\n            }\r\n            if (candidates.length === 0)\r\n                throw new Error(\"No intermediary found!\");\r\n        }\r\n        const abortController = new AbortController();\r\n        this.logger.debug(\"createSwap() Swap candidates: \", candidates.map(lp => lp.url).join());\r\n        const quotePromises = await create(candidates, abortController.signal, this.chains[chainIdentifier]);\r\n        const promiseAll = new Promise((resolve, reject) => {\r\n            let min;\r\n            let max;\r\n            let error;\r\n            let numResolved = 0;\r\n            let quotes = [];\r\n            let timeout;\r\n            quotePromises.forEach(data => {\r\n                data.quote.then(quote => {\r\n                    if (numResolved === 0) {\r\n                        timeout = setTimeout(() => {\r\n                            abortController.abort(new Error(\"Timed out waiting for quote!\"));\r\n                            resolve(quotes);\r\n                        }, maxWaitTimeMS);\r\n                    }\r\n                    numResolved++;\r\n                    quotes.push({\r\n                        quote,\r\n                        intermediary: data.intermediary\r\n                    });\r\n                    if (numResolved === quotePromises.length) {\r\n                        clearTimeout(timeout);\r\n                        resolve(quotes);\r\n                        return;\r\n                    }\r\n                }).catch(e => {\r\n                    numResolved++;\r\n                    if (e instanceof IntermediaryError_1.IntermediaryError) {\r\n                        //Blacklist that node\r\n                        this.intermediaryDiscovery.removeIntermediary(data.intermediary);\r\n                        swapLimitsChanged = true;\r\n                    }\r\n                    else if (e instanceof RequestError_1.OutOfBoundsError) {\r\n                        if (min == null || max == null) {\r\n                            min = e.min;\r\n                            max = e.max;\r\n                        }\r\n                        else {\r\n                            min = (0, Utils_1.bigIntMin)(min, e.min);\r\n                            max = (0, Utils_1.bigIntMax)(max, e.max);\r\n                        }\r\n                        data.intermediary.swapBounds[swapType] ??= {};\r\n                        data.intermediary.swapBounds[swapType][chainIdentifier] ??= {};\r\n                        const tokenBoundsData = (data.intermediary.swapBounds[swapType][chainIdentifier][amountData.token] ??= { input: null, output: null });\r\n                        if (amountData.exactIn) {\r\n                            tokenBoundsData.input = { min: e.min, max: e.max };\r\n                        }\r\n                        else {\r\n                            tokenBoundsData.output = { min: e.min, max: e.max };\r\n                        }\r\n                        swapLimitsChanged = true;\r\n                    }\r\n                    this.logger.warn(\"createSwap(): Intermediary \" + data.intermediary.url + \" error: \", e);\r\n                    error = e;\r\n                    if (numResolved === quotePromises.length) {\r\n                        if (timeout != null)\r\n                            clearTimeout(timeout);\r\n                        if (quotes.length > 0) {\r\n                            resolve(quotes);\r\n                            return;\r\n                        }\r\n                        if (min != null && max != null) {\r\n                            reject(new RequestError_1.OutOfBoundsError(\"Out of bounds\", 400, min, max));\r\n                            return;\r\n                        }\r\n                        reject(error);\r\n                    }\r\n                });\r\n            });\r\n        });\r\n        try {\r\n            const quotes = await promiseAll;\r\n            //TODO: Intermediary's reputation is not taken into account!\r\n            quotes.sort((a, b) => {\r\n                if (amountData.exactIn) {\r\n                    //Compare outputs\r\n                    return (0, Utils_1.bigIntCompare)(b.quote.getOutput().rawAmount, a.quote.getOutput().rawAmount);\r\n                }\r\n                else {\r\n                    //Compare inputs\r\n                    return (0, Utils_1.bigIntCompare)(a.quote.getInput().rawAmount, b.quote.getInput().rawAmount);\r\n                }\r\n            });\r\n            this.logger.debug(\"createSwap(): Sorted quotes, best price to worst: \", quotes);\r\n            if (swapLimitsChanged)\r\n                this.emit(\"swapLimitsChanged\");\r\n            const quote = quotes[0].quote;\r\n            if (this.options.saveUninitializedSwaps) {\r\n                quote._setInitiated();\r\n                await quote._save();\r\n            }\r\n            return quote;\r\n        }\r\n        catch (e) {\r\n            if (swapLimitsChanged)\r\n                this.emit(\"swapLimitsChanged\");\r\n            throw e;\r\n        }\r\n    }\r\n    /**\r\n     * Creates To BTC swap\r\n     *\r\n     * @param chainIdentifier\r\n     * @param signer\r\n     * @param tokenAddress          Token address to pay with\r\n     * @param address               Recipient's bitcoin address\r\n     * @param amount                Amount to send in satoshis (bitcoin's smallest denomination)\r\n     * @param exactIn               Whether to use exact in instead of exact out\r\n     * @param additionalParams      Additional parameters sent to the LP when creating the swap\r\n     * @param options\r\n     */\r\n    createToBTCSwap(chainIdentifier, signer, tokenAddress, address, amount, exactIn, additionalParams = this.options.defaultAdditionalParameters, options) {\r\n        if (this.chains[chainIdentifier] == null)\r\n            throw new Error(\"Invalid chain identifier! Unknown chain: \" + chainIdentifier);\r\n        if (address.startsWith(\"bitcoin:\")) {\r\n            address = address.substring(8).split(\"?\")[0];\r\n        }\r\n        if (!this.Utils.isValidBitcoinAddress(address))\r\n            throw new Error(\"Invalid bitcoin address\");\r\n        if (!this.chains[chainIdentifier].chainInterface.isValidAddress(signer))\r\n            throw new Error(\"Invalid \" + chainIdentifier + \" address\");\r\n        options ??= {};\r\n        options.confirmationTarget ??= 3;\r\n        options.confirmations ??= 2;\r\n        const amountData = {\r\n            amount,\r\n            token: tokenAddress,\r\n            exactIn\r\n        };\r\n        return this.createSwap(chainIdentifier, (candidates, abortSignal, chain) => Promise.resolve(chain.wrappers[SwapType_1.SwapType.TO_BTC].create(signer, address, amountData, candidates, options, additionalParams, abortSignal)), amountData, SwapType_1.SwapType.TO_BTC);\r\n    }\r\n    /**\r\n     * Creates To BTCLN swap\r\n     *\r\n     * @param chainIdentifier\r\n     * @param signer\r\n     * @param tokenAddress          Token address to pay with\r\n     * @param paymentRequest        BOLT11 lightning network invoice to be paid (needs to have a fixed amount)\r\n     * @param additionalParams      Additional parameters sent to the LP when creating the swap\r\n     * @param options\r\n     */\r\n    async createToBTCLNSwap(chainIdentifier, signer, tokenAddress, paymentRequest, additionalParams = this.options.defaultAdditionalParameters, options) {\r\n        if (this.chains[chainIdentifier] == null)\r\n            throw new Error(\"Invalid chain identifier! Unknown chain: \" + chainIdentifier);\r\n        options ??= {};\r\n        if (paymentRequest.startsWith(\"lightning:\"))\r\n            paymentRequest = paymentRequest.substring(10);\r\n        if (!this.Utils.isValidLightningInvoice(paymentRequest))\r\n            throw new Error(\"Invalid lightning network invoice\");\r\n        if (!this.chains[chainIdentifier].chainInterface.isValidAddress(signer))\r\n            throw new Error(\"Invalid \" + chainIdentifier + \" address\");\r\n        const parsedPR = (0, bolt11_1.decode)(paymentRequest);\r\n        const amountData = {\r\n            amount: (BigInt(parsedPR.millisatoshis) + 999n) / 1000n,\r\n            token: tokenAddress,\r\n            exactIn: false\r\n        };\r\n        options.expirySeconds ??= 5 * 24 * 3600;\r\n        return this.createSwap(chainIdentifier, (candidates, abortSignal, chain) => chain.wrappers[SwapType_1.SwapType.TO_BTCLN].create(signer, paymentRequest, amountData, candidates, options, additionalParams, abortSignal), amountData, SwapType_1.SwapType.TO_BTCLN);\r\n    }\r\n    /**\r\n     * Creates To BTCLN swap via LNURL-pay\r\n     *\r\n     * @param chainIdentifier\r\n     * @param signer\r\n     * @param tokenAddress          Token address to pay with\r\n     * @param lnurlPay              LNURL-pay link to use for the payment\r\n     * @param amount                Amount to be paid in sats\r\n     * @param exactIn               Whether to do an exact in swap instead of exact out\r\n     * @param additionalParams      Additional parameters sent to the LP when creating the swap\r\n     * @param options\r\n     */\r\n    async createToBTCLNSwapViaLNURL(chainIdentifier, signer, tokenAddress, lnurlPay, amount, exactIn, additionalParams = this.options.defaultAdditionalParameters, options) {\r\n        if (this.chains[chainIdentifier] == null)\r\n            throw new Error(\"Invalid chain identifier! Unknown chain: \" + chainIdentifier);\r\n        if (typeof (lnurlPay) === \"string\" && !this.Utils.isValidLNURL(lnurlPay))\r\n            throw new Error(\"Invalid LNURL-pay link\");\r\n        if (!this.chains[chainIdentifier].chainInterface.isValidAddress(signer))\r\n            throw new Error(\"Invalid \" + chainIdentifier + \" address\");\r\n        options ??= {};\r\n        const amountData = {\r\n            amount,\r\n            token: tokenAddress,\r\n            exactIn\r\n        };\r\n        options.expirySeconds ??= 5 * 24 * 3600;\r\n        return this.createSwap(chainIdentifier, (candidates, abortSignal, chain) => chain.wrappers[SwapType_1.SwapType.TO_BTCLN].createViaLNURL(signer, typeof (lnurlPay) === \"string\" ? (lnurlPay.startsWith(\"lightning:\") ? lnurlPay.substring(10) : lnurlPay) : lnurlPay.params, amountData, candidates, options, additionalParams, abortSignal), amountData, SwapType_1.SwapType.TO_BTCLN);\r\n    }\r\n    /**\r\n     * Creates From BTC swap\r\n     *\r\n     * @param chainIdentifier\r\n     * @param signer\r\n     * @param tokenAddress          Token address to receive\r\n     * @param amount                Amount to receive, in satoshis (bitcoin's smallest denomination)\r\n     * @param exactOut              Whether to use a exact out instead of exact in\r\n     * @param additionalParams      Additional parameters sent to the LP when creating the swap\r\n     * @param options\r\n     */\r\n    async createFromBTCSwapNew(chainIdentifier, signer, tokenAddress, amount, exactOut, additionalParams = this.options.defaultAdditionalParameters, options) {\r\n        if (this.chains[chainIdentifier] == null)\r\n            throw new Error(\"Invalid chain identifier! Unknown chain: \" + chainIdentifier);\r\n        if (!this.chains[chainIdentifier].chainInterface.isValidAddress(signer))\r\n            throw new Error(\"Invalid \" + chainIdentifier + \" address\");\r\n        const amountData = {\r\n            amount,\r\n            token: tokenAddress,\r\n            exactIn: !exactOut\r\n        };\r\n        return this.createSwap(chainIdentifier, (candidates, abortSignal, chain) => Promise.resolve(chain.wrappers[SwapType_1.SwapType.SPV_VAULT_FROM_BTC].create(signer, amountData, candidates, options, additionalParams, abortSignal)), amountData, SwapType_1.SwapType.SPV_VAULT_FROM_BTC);\r\n    }\r\n    /**\r\n     * Creates From BTC swap\r\n     *\r\n     * @param chainIdentifier\r\n     * @param signer\r\n     * @param tokenAddress          Token address to receive\r\n     * @param amount                Amount to receive, in satoshis (bitcoin's smallest denomination)\r\n     * @param exactOut              Whether to use a exact out instead of exact in\r\n     * @param additionalParams      Additional parameters sent to the LP when creating the swap\r\n     * @param options\r\n     */\r\n    async createFromBTCSwap(chainIdentifier, signer, tokenAddress, amount, exactOut, additionalParams = this.options.defaultAdditionalParameters, options) {\r\n        if (this.chains[chainIdentifier] == null)\r\n            throw new Error(\"Invalid chain identifier! Unknown chain: \" + chainIdentifier);\r\n        if (!this.chains[chainIdentifier].chainInterface.isValidAddress(signer))\r\n            throw new Error(\"Invalid \" + chainIdentifier + \" address\");\r\n        const amountData = {\r\n            amount,\r\n            token: tokenAddress,\r\n            exactIn: !exactOut\r\n        };\r\n        return this.createSwap(chainIdentifier, (candidates, abortSignal, chain) => Promise.resolve(chain.wrappers[SwapType_1.SwapType.FROM_BTC].create(signer, amountData, candidates, options, additionalParams, abortSignal)), amountData, SwapType_1.SwapType.FROM_BTC);\r\n    }\r\n    /**\r\n     * Creates From BTCLN swap\r\n     *\r\n     * @param chainIdentifier\r\n     * @param signer\r\n     * @param tokenAddress      Token address to receive\r\n     * @param amount            Amount to receive, in satoshis (bitcoin's smallest denomination)\r\n     * @param exactOut          Whether to use exact out instead of exact in\r\n     * @param additionalParams  Additional parameters sent to the LP when creating the swap\r\n     * @param options\r\n     */\r\n    async createFromBTCLNSwap(chainIdentifier, signer, tokenAddress, amount, exactOut, additionalParams = this.options.defaultAdditionalParameters, options) {\r\n        if (this.chains[chainIdentifier] == null)\r\n            throw new Error(\"Invalid chain identifier! Unknown chain: \" + chainIdentifier);\r\n        if (!this.chains[chainIdentifier].chainInterface.isValidAddress(signer))\r\n            throw new Error(\"Invalid \" + chainIdentifier + \" address\");\r\n        const amountData = {\r\n            amount,\r\n            token: tokenAddress,\r\n            exactIn: !exactOut\r\n        };\r\n        return this.createSwap(chainIdentifier, (candidates, abortSignal, chain) => Promise.resolve(chain.wrappers[SwapType_1.SwapType.FROM_BTCLN].create(signer, amountData, candidates, options, additionalParams, abortSignal)), amountData, SwapType_1.SwapType.FROM_BTCLN);\r\n    }\r\n    /**\r\n     * Creates From BTCLN swap, withdrawing from LNURL-withdraw\r\n     *\r\n     * @param chainIdentifier\r\n     * @param signer\r\n     * @param tokenAddress      Token address to receive\r\n     * @param lnurl             LNURL-withdraw to pull the funds from\r\n     * @param amount            Amount to receive, in satoshis (bitcoin's smallest denomination)\r\n     * @param exactOut          Whether to use exact out instead of exact in\r\n     * @param additionalParams  Additional parameters sent to the LP when creating the swap\r\n     */\r\n    async createFromBTCLNSwapViaLNURL(chainIdentifier, signer, tokenAddress, lnurl, amount, exactOut, additionalParams = this.options.defaultAdditionalParameters) {\r\n        if (this.chains[chainIdentifier] == null)\r\n            throw new Error(\"Invalid chain identifier! Unknown chain: \" + chainIdentifier);\r\n        if (typeof (lnurl) === \"string\" && !this.Utils.isValidLNURL(lnurl))\r\n            throw new Error(\"Invalid LNURL-withdraw link\");\r\n        if (!this.chains[chainIdentifier].chainInterface.isValidAddress(signer))\r\n            throw new Error(\"Invalid \" + chainIdentifier + \" address\");\r\n        const amountData = {\r\n            amount,\r\n            token: tokenAddress,\r\n            exactIn: !exactOut\r\n        };\r\n        return this.createSwap(chainIdentifier, (candidates, abortSignal, chain) => chain.wrappers[SwapType_1.SwapType.FROM_BTCLN].createViaLNURL(signer, typeof (lnurl) === \"string\" ? (lnurl.startsWith(\"lightning:\") ? lnurl.substring(10) : lnurl) : lnurl.params, amountData, candidates, additionalParams, abortSignal), amountData, SwapType_1.SwapType.FROM_BTCLN);\r\n    }\r\n    /**\r\n     * Creates trusted LN for Gas swap\r\n     *\r\n     * @param chainId\r\n     * @param signer\r\n     * @param amount                    Amount of native token to receive, in base units\r\n     * @param trustedIntermediaryOrUrl  URL or Intermediary object of the trusted intermediary to use, otherwise uses default\r\n     * @throws {Error}                  If no trusted intermediary specified\r\n     */\r\n    createTrustedLNForGasSwap(chainId, signer, amount, trustedIntermediaryOrUrl) {\r\n        if (this.chains[chainId] == null)\r\n            throw new Error(\"Invalid chain identifier! Unknown chain: \" + chainId);\r\n        if (!this.chains[chainId].chainInterface.isValidAddress(signer))\r\n            throw new Error(\"Invalid \" + chainId + \" address\");\r\n        const useUrl = trustedIntermediaryOrUrl ?? this.defaultTrustedIntermediary ?? this.options.defaultTrustedIntermediaryUrl;\r\n        if (useUrl == null)\r\n            throw new Error(\"No trusted intermediary specified!\");\r\n        return this.chains[chainId].wrappers[SwapType_1.SwapType.TRUSTED_FROM_BTCLN].create(signer, amount, useUrl);\r\n    }\r\n    /**\r\n     * Creates trusted BTC on-chain for Gas swap\r\n     *\r\n     * @param chainId\r\n     * @param signer\r\n     * @param amount                    Amount of native token to receive, in base units\r\n     * @param refundAddress             Bitcoin refund address, in case the swap fails\r\n     * @param trustedIntermediaryOrUrl  URL or Intermediary object of the trusted intermediary to use, otherwise uses default\r\n     * @throws {Error}                  If no trusted intermediary specified\r\n     */\r\n    createTrustedOnchainForGasSwap(chainId, signer, amount, refundAddress, trustedIntermediaryOrUrl) {\r\n        if (this.chains[chainId] == null)\r\n            throw new Error(\"Invalid chain identifier! Unknown chain: \" + chainId);\r\n        if (!this.chains[chainId].chainInterface.isValidAddress(signer))\r\n            throw new Error(\"Invalid \" + chainId + \" address\");\r\n        const useUrl = trustedIntermediaryOrUrl ?? this.defaultTrustedIntermediary ?? this.options.defaultTrustedIntermediaryUrl;\r\n        if (useUrl == null)\r\n            throw new Error(\"No trusted intermediary specified!\");\r\n        return this.chains[chainId].wrappers[SwapType_1.SwapType.TRUSTED_FROM_BTC].create(signer, amount, useUrl, refundAddress);\r\n    }\r\n    /**\r\n     * Creates a swap from srcToken to dstToken, of a specific token amount, either specifying input amount (exactIn=true)\r\n     *  or output amount (exactIn=false), NOTE: For regular -> BTC-LN (lightning) swaps the passed amount is ignored and\r\n     *  invoice's pre-set amount is used instead.\r\n     * @deprecated Use swap() instead\r\n     *\r\n     * @param signer Smartchain (Solana, Starknet, etc.) address of the user\r\n     * @param srcToken Source token of the swap, user pays this token\r\n     * @param dstToken Destination token of the swap, user receives this token\r\n     * @param amount Amount of the swap\r\n     * @param exactIn Whether the amount specified is an input amount (exactIn=true) or an output amount (exactIn=false)\r\n     * @param addressLnurlLightningInvoice Bitcoin on-chain address, lightning invoice, LNURL-pay to pay or\r\n     *  LNURL-withdrawal to withdraw money from\r\n     */\r\n    create(signer, srcToken, dstToken, amount, exactIn, addressLnurlLightningInvoice) {\r\n        if (srcToken.chain === \"BTC\") {\r\n            return this.swap(srcToken, dstToken, amount, exactIn, addressLnurlLightningInvoice, signer);\r\n        }\r\n        else {\r\n            return this.swap(srcToken, dstToken, amount, exactIn, signer, addressLnurlLightningInvoice);\r\n        }\r\n    }\r\n    /**\r\n     * Creates a swap from srcToken to dstToken, of a specific token amount, either specifying input amount (exactIn=true)\r\n     *  or output amount (exactIn=false), NOTE: For regular SmartChain -> BTC-LN (lightning) swaps the passed amount is ignored and\r\n     *  invoice's pre-set amount is used instead, use LNURL-pay for dynamic amounts\r\n     *\r\n     * @param srcToken Source token of the swap, user pays this token\r\n     * @param dstToken Destination token of the swap, user receives this token\r\n     * @param amount Amount of the swap\r\n     * @param exactIn Whether the amount specified is an input amount (exactIn=true) or an output amount (exactIn=false)\r\n     * @param src Source wallet/lnurl-withdraw of the swap\r\n     * @param dst Destination smart chain address, bitcoin on-chain address, lightning invoice, LNURL-pay\r\n     * @param options Options for the swap\r\n     */\r\n    swap(srcToken, dstToken, amount, exactIn, src, dst, options) {\r\n        if (srcToken.chain === \"BTC\") {\r\n            if (dstToken.chain === \"SC\") {\r\n                if (typeof (dst) !== \"string\")\r\n                    throw new Error(\"Destination for BTC/BTC-LN -> smart chain swaps must be a smart chain address!\");\r\n                if (srcToken.lightning) {\r\n                    //FROM_BTCLN\r\n                    if (src != null) {\r\n                        if (typeof (src) !== \"string\" && !(0, LNURL_1.isLNURLWithdraw)(src))\r\n                            throw new Error(\"LNURL must be a string or LNURLWithdraw object!\");\r\n                        return this.createFromBTCLNSwapViaLNURL(dstToken.chainId, dst, dstToken.address, src, amount, !exactIn);\r\n                    }\r\n                    else {\r\n                        return this.createFromBTCLNSwap(dstToken.chainId, dst, dstToken.address, amount, !exactIn, undefined, options);\r\n                    }\r\n                }\r\n                else {\r\n                    //FROM_BTC\r\n                    if (this.supportsSwapType(dstToken.chainId, SwapType_1.SwapType.SPV_VAULT_FROM_BTC)) {\r\n                        return this.createFromBTCSwapNew(dstToken.chainId, dst, dstToken.address, amount, !exactIn, undefined, options);\r\n                    }\r\n                    else {\r\n                        return this.createFromBTCSwap(dstToken.chainId, dst, dstToken.address, amount, !exactIn, undefined, options);\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            if (dstToken.chain === \"BTC\") {\r\n                if (typeof (src) !== \"string\")\r\n                    throw new Error(\"Source address for BTC/BTC-LN -> smart chain swaps must be a smart chain address!\");\r\n                if (dstToken.lightning) {\r\n                    //TO_BTCLN\r\n                    if (typeof (dst) !== \"string\" && !(0, LNURL_1.isLNURLPay)(dst))\r\n                        throw new Error(\"Destination LNURL link/lightning invoice must be a string or LNURLPay object!\");\r\n                    if ((0, LNURL_1.isLNURLPay)(dst) || this.Utils.isValidLNURL(dst)) {\r\n                        return this.createToBTCLNSwapViaLNURL(srcToken.chainId, src, srcToken.address, dst, amount, exactIn, undefined, options);\r\n                    }\r\n                    else if (this.Utils.isLightningInvoice(dst)) {\r\n                        if (!this.Utils.isValidLightningInvoice(dst))\r\n                            throw new Error(\"Invalid lightning invoice specified, lightning invoice MUST contain pre-set amount!\");\r\n                        if (exactIn)\r\n                            throw new Error(\"Only exact out swaps are possible with lightning invoices, use LNURL links for exact in lightning swaps!\");\r\n                        return this.createToBTCLNSwap(srcToken.chainId, src, srcToken.address, dst, undefined, options);\r\n                    }\r\n                    else {\r\n                        throw new Error(\"Supplied parameter is not LNURL link nor lightning invoice (bolt11)!\");\r\n                    }\r\n                }\r\n                else {\r\n                    //TO_BTC\r\n                    if (typeof (dst) !== \"string\")\r\n                        throw new Error(\"Destination bitcoin address must be a string!\");\r\n                    return this.createToBTCSwap(srcToken.chainId, src, srcToken.address, dst, amount, exactIn, undefined, options);\r\n                }\r\n            }\r\n        }\r\n        throw new Error(\"Unsupported swap type\");\r\n    }\r\n    async getAllSwaps(chainId, signer) {\r\n        const queryParams = [];\r\n        if (signer != null)\r\n            queryParams.push({ key: \"intiator\", value: signer });\r\n        if (chainId == null) {\r\n            const res = await Promise.all(Object.keys(this.chains).map((chainId) => {\r\n                const { unifiedSwapStorage, reviver } = this.chains[chainId];\r\n                return unifiedSwapStorage.query([queryParams], reviver);\r\n            }));\r\n            return res.flat();\r\n        }\r\n        else {\r\n            const { unifiedSwapStorage, reviver } = this.chains[chainId];\r\n            return await unifiedSwapStorage.query([queryParams], reviver);\r\n        }\r\n    }\r\n    async getActionableSwaps(chainId, signer) {\r\n        if (chainId == null) {\r\n            const res = await Promise.all(Object.keys(this.chains).map((chainId) => {\r\n                const { unifiedSwapStorage, reviver, wrappers } = this.chains[chainId];\r\n                const queryParams = [];\r\n                for (let key in wrappers) {\r\n                    const wrapper = wrappers[key];\r\n                    const swapTypeQueryParams = [{ key: \"type\", value: wrapper.TYPE }];\r\n                    if (signer != null)\r\n                        swapTypeQueryParams.push({ key: \"intiator\", value: signer });\r\n                    swapTypeQueryParams.push({ key: \"state\", value: wrapper.pendingSwapStates });\r\n                    queryParams.push(swapTypeQueryParams);\r\n                }\r\n                return unifiedSwapStorage.query(queryParams, reviver);\r\n            }));\r\n            return res.flat().filter(swap => swap.requiresAction());\r\n        }\r\n        else {\r\n            const { unifiedSwapStorage, reviver, wrappers } = this.chains[chainId];\r\n            const queryParams = [];\r\n            for (let key in wrappers) {\r\n                const wrapper = wrappers[key];\r\n                const swapTypeQueryParams = [{ key: \"type\", value: wrapper.TYPE }];\r\n                if (signer != null)\r\n                    swapTypeQueryParams.push({ key: \"intiator\", value: signer });\r\n                swapTypeQueryParams.push({ key: \"state\", value: wrapper.pendingSwapStates });\r\n                queryParams.push(swapTypeQueryParams);\r\n            }\r\n            return (await unifiedSwapStorage.query(queryParams, reviver)).filter(swap => swap.requiresAction());\r\n        }\r\n    }\r\n    async getRefundableSwaps(chainId, signer) {\r\n        if (chainId == null) {\r\n            const res = await Promise.all(Object.keys(this.chains).map((chainId) => {\r\n                const { unifiedSwapStorage, reviver, wrappers } = this.chains[chainId];\r\n                const queryParams = [];\r\n                for (let wrapper of [wrappers[SwapType_1.SwapType.TO_BTCLN], wrappers[SwapType_1.SwapType.TO_BTC]]) {\r\n                    const swapTypeQueryParams = [{ key: \"type\", value: wrapper.TYPE }];\r\n                    if (signer != null)\r\n                        swapTypeQueryParams.push({ key: \"initiator\", value: signer });\r\n                    swapTypeQueryParams.push({ key: \"state\", value: wrapper.refundableSwapStates });\r\n                    queryParams.push(swapTypeQueryParams);\r\n                }\r\n                return unifiedSwapStorage.query(queryParams, reviver);\r\n            }));\r\n            return res.flat().filter(swap => swap.isRefundable());\r\n        }\r\n        else {\r\n            const { unifiedSwapStorage, reviver, wrappers } = this.chains[chainId];\r\n            const queryParams = [];\r\n            for (let wrapper of [wrappers[SwapType_1.SwapType.TO_BTCLN], wrappers[SwapType_1.SwapType.TO_BTC]]) {\r\n                const swapTypeQueryParams = [{ key: \"type\", value: wrapper.TYPE }];\r\n                if (signer != null)\r\n                    swapTypeQueryParams.push({ key: \"initiator\", value: signer });\r\n                swapTypeQueryParams.push({ key: \"state\", value: wrapper.refundableSwapStates });\r\n                queryParams.push(swapTypeQueryParams);\r\n            }\r\n            const result = await unifiedSwapStorage.query(queryParams, reviver);\r\n            return result.filter(swap => swap.isRefundable());\r\n        }\r\n    }\r\n    async getSwapById(id, chainId, signer) {\r\n        //Check in pending swaps first\r\n        if (chainId != null) {\r\n            for (let key in this.chains[chainId].wrappers) {\r\n                const wrapper = this.chains[chainId].wrappers[key];\r\n                const result = wrapper.pendingSwaps.get(id)?.deref();\r\n                if (result != null) {\r\n                    if (signer != null) {\r\n                        if (result._getInitiator() === signer)\r\n                            return result;\r\n                    }\r\n                    else {\r\n                        return result;\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        else {\r\n            for (let chainId in this.chains) {\r\n                for (let key in this.chains[chainId].wrappers) {\r\n                    const wrapper = this.chains[chainId].wrappers[key];\r\n                    const result = wrapper.pendingSwaps.get(id)?.deref();\r\n                    if (result != null) {\r\n                        if (signer != null) {\r\n                            if (result._getInitiator() === signer)\r\n                                return result;\r\n                        }\r\n                        else {\r\n                            return result;\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        }\r\n        const queryParams = [];\r\n        if (signer != null)\r\n            queryParams.push({ key: \"intiator\", value: signer });\r\n        queryParams.push({ key: \"id\", value: id });\r\n        if (chainId == null) {\r\n            const res = await Promise.all(Object.keys(this.chains).map((chainId) => {\r\n                const { unifiedSwapStorage, reviver } = this.chains[chainId];\r\n                return unifiedSwapStorage.query([queryParams], reviver);\r\n            }));\r\n            return res.flat()[0];\r\n        }\r\n        else {\r\n            const { unifiedSwapStorage, reviver } = this.chains[chainId];\r\n            return (await unifiedSwapStorage.query([queryParams], reviver))[0];\r\n        }\r\n    }\r\n    /**\r\n     * Synchronizes swaps from chain, this is usually ran when SDK is initialized, deletes expired quotes\r\n     *\r\n     * @param chainId\r\n     * @param signer\r\n     */\r\n    async _syncSwaps(chainId, signer) {\r\n        if (chainId == null) {\r\n            await Promise.all(Object.keys(this.chains).map(async (chainId) => {\r\n                const { unifiedSwapStorage, reviver, wrappers } = this.chains[chainId];\r\n                const queryParams = [];\r\n                for (let key in wrappers) {\r\n                    const wrapper = wrappers[key];\r\n                    const swapTypeQueryParams = [{ key: \"type\", value: wrapper.TYPE }];\r\n                    if (signer != null)\r\n                        swapTypeQueryParams.push({ key: \"intiator\", value: signer });\r\n                    swapTypeQueryParams.push({ key: \"state\", value: wrapper.pendingSwapStates });\r\n                    queryParams.push(swapTypeQueryParams);\r\n                }\r\n                this.logger.debug(\"_syncSwaps(): Querying swaps swaps for chain \" + chainId + \"!\");\r\n                const swaps = await unifiedSwapStorage.query(queryParams, reviver);\r\n                this.logger.debug(\"_syncSwaps(): Syncing \" + swaps.length + \" swaps!\");\r\n                const changedSwaps = [];\r\n                const removeSwaps = [];\r\n                for (let swap of swaps) {\r\n                    this.logger.debug(\"_syncSwaps(): Syncing swap: \" + swap.getId());\r\n                    const swapChanged = await swap._sync(false).catch(e => this.logger.warn(\"_syncSwaps(): Error in swap: \" + swap.getId(), e));\r\n                    this.logger.debug(\"_syncSwaps(): Synced swap: \" + swap.getId());\r\n                    if (swap.isQuoteExpired()) {\r\n                        removeSwaps.push(swap);\r\n                    }\r\n                    else {\r\n                        if (swapChanged)\r\n                            changedSwaps.push(swap);\r\n                    }\r\n                }\r\n                this.logger.debug(\"_syncSwaps(): Done syncing \" + swaps.length + \" swaps, saving \" + changedSwaps.length + \" changed swaps, removing \" + removeSwaps.length + \" swaps!\");\r\n                await unifiedSwapStorage.saveAll(changedSwaps);\r\n                await unifiedSwapStorage.removeAll(removeSwaps);\r\n            }));\r\n        }\r\n        else {\r\n            const { unifiedSwapStorage, reviver, wrappers } = this.chains[chainId];\r\n            const queryParams = [];\r\n            for (let key in wrappers) {\r\n                const wrapper = wrappers[key];\r\n                const swapTypeQueryParams = [{ key: \"type\", value: wrapper.TYPE }];\r\n                if (signer != null)\r\n                    swapTypeQueryParams.push({ key: \"intiator\", value: signer });\r\n                swapTypeQueryParams.push({ key: \"state\", value: wrapper.pendingSwapStates });\r\n                queryParams.push(swapTypeQueryParams);\r\n            }\r\n            this.logger.debug(\"_syncSwaps(): Querying swaps swaps for chain \" + chainId + \"!\");\r\n            const swaps = await unifiedSwapStorage.query(queryParams, reviver);\r\n            this.logger.debug(\"_syncSwaps(): Syncing \" + swaps.length + \" swaps!\");\r\n            const changedSwaps = [];\r\n            const removeSwaps = [];\r\n            for (let swap of swaps) {\r\n                this.logger.debug(\"_syncSwaps(): Syncing swap: \" + swap.getId());\r\n                const swapChanged = await swap._sync(false).catch(e => this.logger.warn(\"_syncSwaps(): Error in swap: \" + swap.getId(), e));\r\n                this.logger.debug(\"_syncSwaps(): Synced swap: \" + swap.getId());\r\n                if (swap.isQuoteExpired()) {\r\n                    removeSwaps.push(swap);\r\n                }\r\n                else {\r\n                    if (swapChanged)\r\n                        changedSwaps.push(swap);\r\n                }\r\n            }\r\n            this.logger.debug(\"_syncSwaps(): Done syncing \" + swaps.length + \" swaps, saving \" + changedSwaps.length + \" changed swaps, removing \" + removeSwaps.length + \" swaps!\");\r\n            await unifiedSwapStorage.saveAll(changedSwaps);\r\n            await unifiedSwapStorage.removeAll(removeSwaps);\r\n        }\r\n    }\r\n    /**\r\n     * Creates a child swapper instance with a given smart chain\r\n     *\r\n     * @param chainIdentifier\r\n     */\r\n    withChain(chainIdentifier) {\r\n        if (this.chains[chainIdentifier] == null)\r\n            throw new Error(\"Invalid chain identifier! Unknown chain: \" + chainIdentifier);\r\n        return new SwapperWithChain_1.SwapperWithChain(this, chainIdentifier);\r\n    }\r\n    /**\r\n     * Returns supported smart chains\r\n     */\r\n    getSmartChains() {\r\n        return Object.keys(this.chains);\r\n    }\r\n    /**\r\n     * Returns whether the SDK supports a given swap type on a given chain based on currently known LPs\r\n     *\r\n     * @param chainId\r\n     * @param swapType\r\n     */\r\n    supportsSwapType(chainId, swapType) {\r\n        return (this.chains[chainId]?.wrappers[swapType] != null);\r\n    }\r\n    getSwapType(srcToken, dstToken) {\r\n        if ((0, Tokens_1.isSCToken)(srcToken)) {\r\n            if (!(0, Tokens_1.isBtcToken)(dstToken))\r\n                throw new Error(\"Swap not supported\");\r\n            if (dstToken.lightning) {\r\n                return SwapType_1.SwapType.TO_BTCLN;\r\n            }\r\n            else {\r\n                return SwapType_1.SwapType.TO_BTC;\r\n            }\r\n        }\r\n        else if ((0, Tokens_1.isBtcToken)(srcToken)) {\r\n            if (!(0, Tokens_1.isSCToken)(dstToken))\r\n                throw new Error(\"Swap not supported\");\r\n            if (srcToken.lightning) {\r\n                return SwapType_1.SwapType.FROM_BTCLN;\r\n            }\r\n            else {\r\n                if (this.supportsSwapType(dstToken.chainId, SwapType_1.SwapType.SPV_VAULT_FROM_BTC)) {\r\n                    return SwapType_1.SwapType.SPV_VAULT_FROM_BTC;\r\n                }\r\n                else {\r\n                    return SwapType_1.SwapType.FROM_BTC;\r\n                }\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Returns minimum/maximum limits for inputs and outputs for a swap between given tokens\r\n     *\r\n     * @param srcToken\r\n     * @param dstToken\r\n     */\r\n    getSwapLimits(srcToken, dstToken) {\r\n        const swapType = this.getSwapType(srcToken, dstToken);\r\n        const scToken = (0, Tokens_1.isSCToken)(srcToken) ? srcToken : (0, Tokens_1.isSCToken)(dstToken) ? dstToken : null;\r\n        const result = {\r\n            input: { min: null, max: null },\r\n            output: { min: null, max: null }\r\n        };\r\n        for (let lp of this.intermediaryDiscovery.intermediaries) {\r\n            const lpMinMax = lp.getSwapLimits(swapType, scToken.chainId, scToken.address);\r\n            if (lpMinMax == null)\r\n                continue;\r\n            result.input.min = result.input.min == null ? lpMinMax.input.min : (0, Utils_1.bigIntMin)(result.input.min, lpMinMax.input.min);\r\n            result.input.max = result.input.max == null ? lpMinMax.input.max : (0, Utils_1.bigIntMax)(result.input.max, lpMinMax.input.max);\r\n            result.output.min = result.output.min == null ? lpMinMax.output.min : (0, Utils_1.bigIntMin)(result.output.min, lpMinMax.output.min);\r\n            result.output.max = result.output.max == null ? lpMinMax.output.max : (0, Utils_1.bigIntMax)(result.output.max, lpMinMax.output.max);\r\n        }\r\n        return {\r\n            input: {\r\n                min: (0, Tokens_1.toTokenAmount)(result.input.min ?? 1n, srcToken, this.prices),\r\n                max: (0, Tokens_1.toTokenAmount)(result.input.max, srcToken, this.prices),\r\n            },\r\n            output: {\r\n                min: (0, Tokens_1.toTokenAmount)(result.output.min ?? 1n, dstToken, this.prices),\r\n                max: (0, Tokens_1.toTokenAmount)(result.output.max, dstToken, this.prices),\r\n            }\r\n        };\r\n    }\r\n    /**\r\n     * Returns supported tokens for a given direction\r\n     *\r\n     * @param input Whether to return input tokens or output tokens\r\n     */\r\n    getSupportedTokens(input) {\r\n        const tokens = {};\r\n        let lightning = false;\r\n        let btc = false;\r\n        this.intermediaryDiscovery.intermediaries.forEach(lp => {\r\n            for (let swapType of [SwapType_1.SwapType.TO_BTC, SwapType_1.SwapType.TO_BTCLN, SwapType_1.SwapType.FROM_BTC, SwapType_1.SwapType.FROM_BTCLN, SwapType_1.SwapType.SPV_VAULT_FROM_BTC]) {\r\n                if (lp.services[swapType] == null)\r\n                    continue;\r\n                if (lp.services[swapType].chainTokens == null)\r\n                    continue;\r\n                for (let chainId of this.getSmartChains()) {\r\n                    if (this.supportsSwapType(chainId, SwapType_1.SwapType.SPV_VAULT_FROM_BTC) ? swapType === SwapType_1.SwapType.FROM_BTC : swapType === SwapType_1.SwapType.SPV_VAULT_FROM_BTC)\r\n                        continue;\r\n                    if (lp.services[swapType].chainTokens[chainId] == null)\r\n                        continue;\r\n                    for (let tokenAddress of lp.services[swapType].chainTokens[chainId]) {\r\n                        if (input) {\r\n                            if (swapType === SwapType_1.SwapType.TO_BTC || swapType === SwapType_1.SwapType.TO_BTCLN) {\r\n                                tokens[chainId] ??= new Set();\r\n                                tokens[chainId].add(tokenAddress);\r\n                            }\r\n                            if (swapType === SwapType_1.SwapType.FROM_BTCLN) {\r\n                                lightning = true;\r\n                            }\r\n                            if (swapType === SwapType_1.SwapType.FROM_BTC || swapType === SwapType_1.SwapType.SPV_VAULT_FROM_BTC) {\r\n                                btc = true;\r\n                            }\r\n                        }\r\n                        else {\r\n                            if (swapType === SwapType_1.SwapType.FROM_BTCLN || swapType === SwapType_1.SwapType.FROM_BTC || swapType === SwapType_1.SwapType.SPV_VAULT_FROM_BTC) {\r\n                                tokens[chainId] ??= new Set();\r\n                                tokens[chainId].add(tokenAddress);\r\n                            }\r\n                            if (swapType === SwapType_1.SwapType.TO_BTCLN) {\r\n                                lightning = true;\r\n                            }\r\n                            if (swapType === SwapType_1.SwapType.TO_BTC) {\r\n                                btc = true;\r\n                            }\r\n                        }\r\n                    }\r\n                }\r\n            }\r\n        });\r\n        const output = [];\r\n        if (lightning)\r\n            output.push(Tokens_1.BitcoinTokens.BTCLN);\r\n        if (btc)\r\n            output.push(Tokens_1.BitcoinTokens.BTC);\r\n        for (let chainId in tokens) {\r\n            tokens[chainId].forEach(tokenAddress => {\r\n                const token = this.tokens?.[chainId]?.[tokenAddress];\r\n                if (token != null)\r\n                    output.push(token);\r\n            });\r\n        }\r\n        return output;\r\n    }\r\n    /**\r\n     * Returns a set of supported tokens by all the intermediaries offering a specific swap service\r\n     *\r\n     * @param _swapType Swap service type to check supported tokens for\r\n     */\r\n    getSupportedTokensForSwapType(_swapType) {\r\n        const tokens = {};\r\n        this.intermediaryDiscovery.intermediaries.forEach(lp => {\r\n            for (let chainId of this.getSmartChains()) {\r\n                let swapType = _swapType;\r\n                if (swapType === SwapType_1.SwapType.FROM_BTC && this.supportsSwapType(chainId, SwapType_1.SwapType.SPV_VAULT_FROM_BTC))\r\n                    swapType = SwapType_1.SwapType.SPV_VAULT_FROM_BTC;\r\n                if (lp.services[swapType] == null)\r\n                    break;\r\n                if (lp.services[swapType].chainTokens == null)\r\n                    break;\r\n                if (lp.services[swapType].chainTokens[chainId] == null)\r\n                    continue;\r\n                for (let tokenAddress of lp.services[swapType].chainTokens[chainId]) {\r\n                    tokens[chainId] ??= new Set();\r\n                    tokens[chainId].add(tokenAddress);\r\n                }\r\n            }\r\n        });\r\n        const output = [];\r\n        for (let chainId in tokens) {\r\n            tokens[chainId].forEach(tokenAddress => {\r\n                const token = this.tokens?.[chainId]?.[tokenAddress];\r\n                if (token != null)\r\n                    output.push(token);\r\n            });\r\n        }\r\n        return output;\r\n    }\r\n    /**\r\n     * Returns the set of supported token addresses by all the intermediaries we know of offering a specific swapType service\r\n     *\r\n     * @param chainIdentifier\r\n     * @param swapType Specific swap type for which to obtain supported tokens\r\n     */\r\n    getSupportedTokenAddresses(chainIdentifier, swapType) {\r\n        const set = new Set();\r\n        this.intermediaryDiscovery.intermediaries.forEach(lp => {\r\n            if (lp.services[swapType] == null)\r\n                return;\r\n            if (lp.services[swapType].chainTokens == null || lp.services[swapType].chainTokens[chainIdentifier] == null)\r\n                return;\r\n            lp.services[swapType].chainTokens[chainIdentifier].forEach(token => set.add(token));\r\n        });\r\n        return set;\r\n    }\r\n    /**\r\n     * Returns tokens that you can swap to (if input=true) from a given token,\r\n     *  or tokens that you can swap from (if input=false) to a given token\r\n     */\r\n    getSwapCounterTokens(token, input) {\r\n        if ((0, Tokens_1.isSCToken)(token)) {\r\n            const result = [];\r\n            if (input) {\r\n                //TO_BTC or TO_BTCLN\r\n                if (this.getSupportedTokenAddresses(token.chainId, SwapType_1.SwapType.TO_BTCLN).has(token.address)) {\r\n                    result.push(Tokens_1.BitcoinTokens.BTCLN);\r\n                }\r\n                if (this.getSupportedTokenAddresses(token.chainId, SwapType_1.SwapType.TO_BTC).has(token.address)) {\r\n                    result.push(Tokens_1.BitcoinTokens.BTC);\r\n                }\r\n            }\r\n            else {\r\n                //FROM_BTC or FROM_BTCLN\r\n                if (this.getSupportedTokenAddresses(token.chainId, SwapType_1.SwapType.FROM_BTCLN).has(token.address)) {\r\n                    result.push(Tokens_1.BitcoinTokens.BTCLN);\r\n                }\r\n                const fromOnchainSwapType = this.supportsSwapType(token.chainId, SwapType_1.SwapType.SPV_VAULT_FROM_BTC) ? SwapType_1.SwapType.SPV_VAULT_FROM_BTC : SwapType_1.SwapType.FROM_BTC;\r\n                if (this.getSupportedTokenAddresses(token.chainId, fromOnchainSwapType).has(token.address)) {\r\n                    result.push(Tokens_1.BitcoinTokens.BTC);\r\n                }\r\n            }\r\n            return result;\r\n        }\r\n        else {\r\n            if (input) {\r\n                if (token.lightning) {\r\n                    return this.getSupportedTokensForSwapType(SwapType_1.SwapType.FROM_BTCLN);\r\n                }\r\n                else {\r\n                    return this.getSupportedTokensForSwapType(SwapType_1.SwapType.FROM_BTC);\r\n                }\r\n            }\r\n            else {\r\n                if (token.lightning) {\r\n                    return this.getSupportedTokensForSwapType(SwapType_1.SwapType.TO_BTCLN);\r\n                }\r\n                else {\r\n                    return this.getSupportedTokensForSwapType(SwapType_1.SwapType.TO_BTC);\r\n                }\r\n            }\r\n        }\r\n    }\r\n    getSwapBounds(chainIdentifier) {\r\n        if (this.intermediaryDiscovery != null) {\r\n            if (chainIdentifier == null) {\r\n                return this.intermediaryDiscovery.getMultichainSwapBounds();\r\n            }\r\n            else {\r\n                return this.intermediaryDiscovery.getSwapBounds(chainIdentifier);\r\n            }\r\n        }\r\n        return null;\r\n    }\r\n    /**\r\n     * Returns maximum possible swap amount\r\n     * @deprecated Use getSwapLimits() instead!\r\n     *\r\n     * @param chainIdentifier\r\n     * @param type      Type of the swap\r\n     * @param token     Token of the swap\r\n     */\r\n    getMaximum(chainIdentifier, type, token) {\r\n        if (this.intermediaryDiscovery != null) {\r\n            const max = this.intermediaryDiscovery.getSwapMaximum(chainIdentifier, type, token);\r\n            if (max != null)\r\n                return BigInt(max);\r\n        }\r\n        return 0n;\r\n    }\r\n    /**\r\n     * Returns minimum possible swap amount\r\n     * @deprecated Use getSwapLimits() instead!\r\n     *\r\n     * @param chainIdentifier\r\n     * @param type      Type of swap\r\n     * @param token     Token of the swap\r\n     */\r\n    getMinimum(chainIdentifier, type, token) {\r\n        if (this.intermediaryDiscovery != null) {\r\n            const min = this.intermediaryDiscovery.getSwapMinimum(chainIdentifier, type, token);\r\n            if (min != null)\r\n                return BigInt(min);\r\n        }\r\n        return 0n;\r\n    }\r\n}\r\nexports.Swapper = Swapper;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"./btc/mempool/synchronizer/MempoolBtcRelaySynchronizer\"), exports);\r\n__exportStar(require(\"./btc/mempool/MempoolApi\"), exports);\r\n__exportStar(require(\"./btc/mempool/MempoolBitcoinRpc\"), exports);\r\n__exportStar(require(\"./btc/mempool/MempoolBitcoinBlock\"), exports);\r\n__exportStar(require(\"./btc/BitcoinRpcWithAddressIndex\"), exports);\r\n__exportStar(require(\"./btc/LightningNetworkApi\"), exports);\r\n__exportStar(require(\"./btc/wallet/IBitcoinWallet\"), exports);\r\n__exportStar(require(\"./btc/wallet/BitcoinWallet\"), exports);\r\n__exportStar(require(\"./btc/wallet/SingleAddressBitcoinWallet\"), exports);\r\n__exportStar(require(\"./btc/coinselect2\"), exports);\r\n__exportStar(require(\"./errors/IntermediaryError\"), exports);\r\n__exportStar(require(\"./errors/PaymentAuthError\"), exports);\r\n__exportStar(require(\"./errors/RequestError\"), exports);\r\n__exportStar(require(\"./errors/UserError\"), exports);\r\n__exportStar(require(\"./intermediaries/Intermediary\"), exports);\r\n__exportStar(require(\"./intermediaries/IntermediaryDiscovery\"), exports);\r\n__exportStar(require(\"./prices/abstract/ICachedSwapPrice\"), exports);\r\n__exportStar(require(\"./prices/abstract/IPriceProvider\"), exports);\r\n__exportStar(require(\"./prices/abstract/ISwapPrice\"), exports);\r\n__exportStar(require(\"./prices/providers/abstract/ExchangePriceProvider\"), exports);\r\n__exportStar(require(\"./prices/providers/abstract/HttpPriceProvider\"), exports);\r\n__exportStar(require(\"./prices/providers/BinancePriceProvider\"), exports);\r\n__exportStar(require(\"./prices/providers/CoinGeckoPriceProvider\"), exports);\r\n__exportStar(require(\"./prices/providers/CoinPaprikaPriceProvider\"), exports);\r\n__exportStar(require(\"./prices/providers/OKXPriceProvider\"), exports);\r\n__exportStar(require(\"./prices/providers/CustomPriceProvider\"), exports);\r\n__exportStar(require(\"./prices/RedundantSwapPrice\"), exports);\r\n__exportStar(require(\"./prices/SingleSwapPrice\"), exports);\r\n__exportStar(require(\"./prices/SwapPriceWithChain\"), exports);\r\n__exportStar(require(\"./Tokens\"), exports);\r\n__exportStar(require(\"./swaps/ISwap\"), exports);\r\n__exportStar(require(\"./swaps/IAddressSwap\"), exports);\r\n__exportStar(require(\"./swaps/ISwapWrapper\"), exports);\r\n__exportStar(require(\"./swaps/swapper/Swapper\"), exports);\r\n__exportStar(require(\"./swaps/swapper/SwapperWithChain\"), exports);\r\n__exportStar(require(\"./swaps/swapper/SwapperWithSigner\"), exports);\r\n__exportStar(require(\"./swaps/swapper/utils/SwapperUtils\"), exports);\r\n__exportStar(require(\"./swaps/enums/SwapType\"), exports);\r\n__exportStar(require(\"./swaps/enums/SwapDirection\"), exports);\r\n__exportStar(require(\"./swaps/escrow_swaps/IEscrowSwapWrapper\"), exports);\r\n__exportStar(require(\"./swaps/escrow_swaps/IEscrowSwap\"), exports);\r\n__exportStar(require(\"./swaps/escrow_swaps/tobtc/IToBTCSwap\"), exports);\r\n__exportStar(require(\"./swaps/escrow_swaps/tobtc/IToBTCWrapper\"), exports);\r\n__exportStar(require(\"./swaps/escrow_swaps/tobtc/ln/ToBTCLNSwap\"), exports);\r\n__exportStar(require(\"./swaps/escrow_swaps/tobtc/ln/ToBTCLNWrapper\"), exports);\r\n__exportStar(require(\"./swaps/escrow_swaps/tobtc/onchain/ToBTCSwap\"), exports);\r\n__exportStar(require(\"./swaps/escrow_swaps/tobtc/onchain/ToBTCWrapper\"), exports);\r\n__exportStar(require(\"./swaps/escrow_swaps/frombtc/IFromBTCSwap\"), exports);\r\n__exportStar(require(\"./swaps/escrow_swaps/frombtc/IFromBTCWrapper\"), exports);\r\n__exportStar(require(\"./swaps/escrow_swaps/frombtc/ln/FromBTCLNSwap\"), exports);\r\n__exportStar(require(\"./swaps/escrow_swaps/frombtc/ln/FromBTCLNWrapper\"), exports);\r\n__exportStar(require(\"./swaps/escrow_swaps/frombtc/onchain/FromBTCSwap\"), exports);\r\n__exportStar(require(\"./swaps/escrow_swaps/frombtc/onchain/FromBTCWrapper\"), exports);\r\n__exportStar(require(\"./swaps/trusted/ln/LnForGasSwap\"), exports);\r\n__exportStar(require(\"./swaps/trusted/ln/LnForGasWrapper\"), exports);\r\n__exportStar(require(\"./swaps/trusted/onchain/OnchainForGasSwap\"), exports);\r\n__exportStar(require(\"./swaps/trusted/onchain/OnchainForGasWrapper\"), exports);\r\n__exportStar(require(\"./swaps/spv_swaps/SpvFromBTCSwap\"), exports);\r\n__exportStar(require(\"./swaps/spv_swaps/SpvFromBTCWrapper\"), exports);\r\n__exportStar(require(\"./utils/LNURL\"), exports);\r\n__exportStar(require(\"./storage/IUnifiedStorage\"), exports);\r\n__exportStar(require(\"./browser-storage/IndexedDBUnifiedStorage\"), exports);\r\n__exportStar(require(\"./swaps/fee/Fee\"), exports);\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SmartChainAssets = void 0;\r\nexports.SmartChainAssets = {\r\n    _TESTNET_WBTC_VESU: {\r\n        pricing: {\r\n            binancePair: \"WBTCBTC\",\r\n            okxPair: \"WBTC-BTC\",\r\n            coinGeckoCoinId: \"wrapped-bitcoin\",\r\n            coinPaprikaCoinId: \"wbtc-wrapped-bitcoin\",\r\n            krakenPair: \"WBTCXBT\"\r\n        },\r\n        name: \"Wrapped BTC (WBTC)\"\r\n    },\r\n    WBTC: {\r\n        pricing: {\r\n            binancePair: \"WBTCBTC\",\r\n            okxPair: \"WBTC-BTC\",\r\n            coinGeckoCoinId: \"wrapped-bitcoin\",\r\n            coinPaprikaCoinId: \"wbtc-wrapped-bitcoin\",\r\n            krakenPair: \"WBTCXBT\"\r\n        },\r\n        name: \"Wrapped BTC (WBTC)\"\r\n    },\r\n    TBTC: {\r\n        pricing: {\r\n            binancePair: null,\r\n            okxPair: null,\r\n            coinGeckoCoinId: \"tbtc\",\r\n            coinPaprikaCoinId: \"tbtc-tbtc\",\r\n            krakenPair: null\r\n        },\r\n        name: \"Threshold BTC (tBTC)\"\r\n    },\r\n    USDC: {\r\n        pricing: {\r\n            binancePair: \"!BTCUSDC\",\r\n            okxPair: \"!BTC-USDC\",\r\n            coinGeckoCoinId: \"usd-coin\",\r\n            coinPaprikaCoinId: \"usdc-usd-coin\",\r\n            krakenPair: \"!XBTUSDC\"\r\n        },\r\n        name: \"USD Circle\"\r\n    },\r\n    USDT: {\r\n        pricing: {\r\n            binancePair: \"!BTCUSDT\",\r\n            okxPair: \"!BTC-USDT\",\r\n            coinGeckoCoinId: \"tether\",\r\n            coinPaprikaCoinId: \"usdt-tether\",\r\n            krakenPair: \"!XBTUSDT\"\r\n        },\r\n        name: \"Tether USD\"\r\n    },\r\n    SOL: {\r\n        pricing: {\r\n            binancePair: \"SOLBTC\",\r\n            okxPair: \"SOL-BTC\",\r\n            coinGeckoCoinId: \"solana\",\r\n            coinPaprikaCoinId: \"sol-solana\",\r\n            krakenPair: \"SOLXBT\"\r\n        },\r\n        name: \"Solana\"\r\n    },\r\n    BONK: {\r\n        pricing: {\r\n            binancePair: \"BONKUSDC;!BTCUSDC\",\r\n            okxPair: \"BONK-USDT;!BTC-USDT\",\r\n            coinGeckoCoinId: \"bonk\",\r\n            coinPaprikaCoinId: \"bonk-bonk\",\r\n            krakenPair: \"BONKUSD;!XXBTZUSD\"\r\n        },\r\n        name: \"Bonk\"\r\n    },\r\n    ETH: {\r\n        pricing: {\r\n            binancePair: \"ETHBTC\",\r\n            okxPair: \"ETH-BTC\",\r\n            coinGeckoCoinId: \"ethereum\",\r\n            coinPaprikaCoinId: \"eth-ethereum\",\r\n            krakenPair: \"XETHXXBT\"\r\n        },\r\n        name: \"Ether\"\r\n    },\r\n    STRK: {\r\n        pricing: {\r\n            binancePair: \"STRKUSDT;!BTCUSDT\",\r\n            okxPair: \"STRK-USDT;!BTC-USDT\",\r\n            coinGeckoCoinId: \"starknet\",\r\n            coinPaprikaCoinId: \"strk-starknet\",\r\n            krakenPair: \"STRKUSD;!XXBTZUSD\"\r\n        },\r\n        name: \"Starknet\"\r\n    }\r\n};\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.LocalStorageManager = void 0;\r\n/**\r\n * StorageManager using browser's local storage API\r\n */\r\nclass LocalStorageManager {\r\n    constructor(storageKey) {\r\n        this.rawData = null;\r\n        this.data = {};\r\n        this.storageKey = storageKey;\r\n    }\r\n    init() {\r\n        const completedTxt = window.localStorage.getItem(this.storageKey);\r\n        if (completedTxt != null) {\r\n            this.rawData = JSON.parse(completedTxt);\r\n            if (this.rawData == null)\r\n                this.rawData = {};\r\n        }\r\n        else {\r\n            this.rawData = {};\r\n        }\r\n        return Promise.resolve();\r\n    }\r\n    saveData(hash, object) {\r\n        this.data[hash] = object;\r\n        this.rawData[hash] = object.serialize();\r\n        return this.save();\r\n    }\r\n    saveDataArr(arr) {\r\n        arr.forEach(e => {\r\n            this.data[e.id] = e.object;\r\n            this.rawData[e.id] = e.object.serialize();\r\n        });\r\n        return this.save();\r\n    }\r\n    removeData(hash) {\r\n        if (this.rawData[hash] != null) {\r\n            if (this.data[hash] != null)\r\n                delete this.data[hash];\r\n            delete this.rawData[hash];\r\n            return this.save();\r\n        }\r\n        return Promise.resolve();\r\n    }\r\n    removeDataArr(hashArr) {\r\n        hashArr.forEach(hash => {\r\n            if (this.rawData[hash] != null) {\r\n                if (this.data[hash] != null)\r\n                    delete this.data[hash];\r\n                delete this.rawData[hash];\r\n            }\r\n        });\r\n        return this.save();\r\n    }\r\n    loadData(type) {\r\n        return Promise.resolve(Object.keys(this.rawData).map(e => {\r\n            const deserialized = new type(this.rawData[e]);\r\n            this.data[e] = deserialized;\r\n            return deserialized;\r\n        }));\r\n    }\r\n    save() {\r\n        window.localStorage.setItem(this.storageKey, JSON.stringify(this.rawData));\r\n        return Promise.resolve();\r\n    }\r\n}\r\nexports.LocalStorageManager = LocalStorageManager;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.SwapperFactory = void 0;\r\nconst base_1 = require(\"@atomiqlabs/base\");\r\nconst sdk_lib_1 = require(\"@atomiqlabs/sdk-lib\");\r\nconst SmartChainAssets_1 = require(\"./SmartChainAssets\");\r\nconst LocalStorageManager_1 = require(\"./storage/LocalStorageManager\");\r\nconst registries = {\r\n    [base_1.BitcoinNetwork.MAINNET]: \"https://api.github.com/repos/adambor/SolLightning-registry/contents/registry-mainnet.json?ref=main\",\r\n    [base_1.BitcoinNetwork.TESTNET]: \"https://api.github.com/repos/adambor/SolLightning-registry/contents/registry.json?ref=main\",\r\n    [base_1.BitcoinNetwork.TESTNET4]: \"https://api.github.com/repos/adambor/SolLightning-registry/contents/registry-testnet4.json?ref=main\"\r\n};\r\nconst trustedIntermediaries = {\r\n    [base_1.BitcoinNetwork.MAINNET]: \"https://node3.gethopa.com:34100\",\r\n    [base_1.BitcoinNetwork.TESTNET]: \"https://node3.gethopa.com:24100\"\r\n};\r\nconst mempoolUrls = {\r\n    [base_1.BitcoinNetwork.MAINNET]: [\r\n        \"https://mempool.space/api/\",\r\n        \"https://mempool.holdings/api/\",\r\n        \"https://mempool.fra.mempool.space/api/\",\r\n        \"https://mempool.va1.mempool.space/api/\",\r\n        \"https://mempool.tk7.mempool.space/api/\"\r\n    ],\r\n    [base_1.BitcoinNetwork.TESTNET]: [\r\n        \"https://mempool.space/testnet/api/\",\r\n        \"https://mempool.holdings/testnet/api/\",\r\n        \"https://mempool.fra.mempool.space/testnet/api/\",\r\n        \"https://mempool.va1.mempool.space/testnet/api/\",\r\n        \"https://mempool.tk7.mempool.space/testnet/api/\"\r\n    ],\r\n    [base_1.BitcoinNetwork.TESTNET4]: [\r\n        \"https://mempool.space/testnet4/api/\",\r\n        \"https://mempool.holdings/testnet4/api/\",\r\n        \"https://mempool.fra.mempool.space/testnet4/api/\",\r\n        \"https://mempool.va1.mempool.space/testnet4/api/\",\r\n        \"https://mempool.tk7.mempool.space/testnet4/api/\"\r\n    ]\r\n};\r\nclass SwapperFactory {\r\n    constructor(initializers) {\r\n        this.initializers = initializers;\r\n        this.Tokens = {\r\n            BITCOIN: sdk_lib_1.BitcoinTokens\r\n        };\r\n        this.TokenResolver = {};\r\n        this.initializers = initializers;\r\n        initializers.forEach(initializer => {\r\n            const addressMap = {};\r\n            this.Tokens[initializer.chainId] = {};\r\n            for (let ticker in initializer.tokens) {\r\n                const assetData = initializer.tokens[ticker];\r\n                this.Tokens[initializer.chainId][ticker] = addressMap[assetData.address] = {\r\n                    chain: \"SC\",\r\n                    chainId: initializer.chainId,\r\n                    address: assetData.address,\r\n                    name: SmartChainAssets_1.SmartChainAssets[ticker]?.name ?? ticker,\r\n                    decimals: assetData.decimals,\r\n                    displayDecimals: assetData.displayDecimals,\r\n                    ticker\r\n                };\r\n            }\r\n            this.TokenResolver[initializer.chainId] = {\r\n                getToken: (address) => addressMap[address]\r\n            };\r\n        });\r\n    }\r\n    newSwapper(options) {\r\n        options.bitcoinNetwork ?? (options.bitcoinNetwork = base_1.BitcoinNetwork.MAINNET);\r\n        options.storagePrefix ?? (options.storagePrefix = \"atomiqsdk-\" + options.bitcoinNetwork + \"-\");\r\n        options.defaultTrustedIntermediaryUrl ?? (options.defaultTrustedIntermediaryUrl = trustedIntermediaries[options.bitcoinNetwork]);\r\n        options.registryUrl ?? (options.registryUrl = registries[options.bitcoinNetwork]);\r\n        const mempoolApi = options.mempoolApi ?? new sdk_lib_1.MempoolBitcoinRpc(mempoolUrls[options.bitcoinNetwork]);\r\n        const bitcoinRpc = mempoolApi instanceof sdk_lib_1.MempoolBitcoinRpc ? mempoolApi : new sdk_lib_1.MempoolBitcoinRpc(mempoolApi);\r\n        const pricingAssets = [];\r\n        Object.keys(SmartChainAssets_1.SmartChainAssets).forEach((ticker) => {\r\n            const chains = {};\r\n            for (let { tokens, chainId } of this.initializers) {\r\n                if (tokens[ticker] != null)\r\n                    chains[chainId] = tokens[ticker];\r\n            }\r\n            const assetData = SmartChainAssets_1.SmartChainAssets[ticker];\r\n            pricingAssets.push({\r\n                ...assetData.pricing,\r\n                chains,\r\n                ticker,\r\n                name: assetData.name\r\n            });\r\n        });\r\n        options.chainStorageCtor ?? (options.chainStorageCtor = (name) => new LocalStorageManager_1.LocalStorageManager(name));\r\n        const chains = {};\r\n        for (let { initializer, chainId } of this.initializers) {\r\n            if (options.chains[chainId] == null)\r\n                continue;\r\n            chains[chainId] = initializer(options.chains[chainId], bitcoinRpc, options.bitcoinNetwork, options.chainStorageCtor);\r\n        }\r\n        const swapPricing = options.getPriceFn != null ?\r\n            new sdk_lib_1.SingleSwapPrice(options.pricingFeeDifferencePPM ?? 10000n, new sdk_lib_1.CustomPriceProvider(pricingAssets.map(val => {\r\n                return {\r\n                    coinId: val.ticker,\r\n                    chains: val.chains\r\n                };\r\n            }), options.getPriceFn)) :\r\n            sdk_lib_1.RedundantSwapPrice.createFromTokenMap(options.pricingFeeDifferencePPM ?? 10000n, pricingAssets);\r\n        return new sdk_lib_1.Swapper(bitcoinRpc, chains, swapPricing, pricingAssets, options);\r\n    }\r\n}\r\nexports.SwapperFactory = SwapperFactory;\r\n","\"use strict\";\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\nexports.timeoutSignal = exports.fromHumanReadableString = exports.toHumanReadableString = void 0;\r\nconst sdk_lib_1 = require(\"@atomiqlabs/sdk-lib\");\r\nfunction toHumanReadableString(amount, currencySpec) {\r\n    if (amount == null)\r\n        return null;\r\n    return (0, sdk_lib_1.toDecimal)(amount, currencySpec.decimals, undefined, currencySpec.displayDecimals);\r\n}\r\nexports.toHumanReadableString = toHumanReadableString;\r\nfunction fromHumanReadableString(amount, currencySpec) {\r\n    if (amount === \"\" || amount == null)\r\n        return null;\r\n    return (0, sdk_lib_1.fromDecimal)(amount, currencySpec.decimals);\r\n}\r\nexports.fromHumanReadableString = fromHumanReadableString;\r\n/**\r\n * Returns an abort signal that aborts after a specified timeout in milliseconds\r\n *\r\n * @param timeout Milliseconds to wait\r\n * @param abortReason Abort with this abort reason\r\n * @param abortSignal Abort signal to extend\r\n */\r\nfunction timeoutSignal(timeout, abortReason, abortSignal) {\r\n    if (timeout == null)\r\n        return abortSignal;\r\n    const abortController = new AbortController();\r\n    const timeoutHandle = setTimeout(() => abortController.abort(abortReason || new Error(\"Timed out\")), timeout);\r\n    if (abortSignal != null) {\r\n        abortSignal.addEventListener(\"abort\", () => {\r\n            clearTimeout(timeoutHandle);\r\n            abortController.abort(abortSignal.reason);\r\n        });\r\n    }\r\n    return abortController.signal;\r\n}\r\nexports.timeoutSignal = timeoutSignal;\r\n","\"use strict\";\r\nvar __createBinding = (this && this.__createBinding) || (Object.create ? (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    var desc = Object.getOwnPropertyDescriptor(m, k);\r\n    if (!desc || (\"get\" in desc ? !m.__esModule : desc.writable || desc.configurable)) {\r\n      desc = { enumerable: true, get: function() { return m[k]; } };\r\n    }\r\n    Object.defineProperty(o, k2, desc);\r\n}) : (function(o, m, k, k2) {\r\n    if (k2 === undefined) k2 = k;\r\n    o[k2] = m[k];\r\n}));\r\nvar __exportStar = (this && this.__exportStar) || function(m, exports) {\r\n    for (var p in m) if (p !== \"default\" && !Object.prototype.hasOwnProperty.call(exports, p)) __createBinding(exports, m, p);\r\n};\r\nObject.defineProperty(exports, \"__esModule\", { value: true });\r\n__exportStar(require(\"@atomiqlabs/base\"), exports);\r\n__exportStar(require(\"@atomiqlabs/sdk-lib\"), exports);\r\n__exportStar(require(\"./SwapperFactory\"), exports);\r\n__exportStar(require(\"./Utils\"), exports);\r\n__exportStar(require(\"./storage/LocalStorageManager\"), exports);\r\n","// Real Atomiq swap integration using @atomiqlabs/sdk - Starknet + Lightning only\nimport {\n    BitcoinNetwork,\n    SwapperFactory,\n    ToBTCSwapState,\n    FromBTCLNSwapState\n} from '@atomiqlabs/sdk';\nimport * as bolt11 from 'bolt11';\nimport {\n    StarknetInitializer,\n    StarknetInitializerType,\n    StarknetSigner,\n    RpcProviderWithRetries,\n    StarknetFees\n} from '@atomiqlabs/chain-starknet';\nimport { ENV, getStarknetRpc } from '@/config/env';\nimport { getSharedSwapAccount } from '../starknet/sharedAccount';\n\n// Simple result type for focused Starknet  Lightning swaps\ninterface SwapResult {\n    success: boolean;\n    txId?: string;\n    amount: number;\n    fromCurrency: string;\n    toCurrency: string;\n    route: string;\n    error?: string;\n}\n\nexport interface AtomiqSwapQuote {\n    id: string;\n    from: 'STRK' | 'BTC' | 'BTC_LN';\n    to: 'STRK' | 'BTC' | 'BTC_LN';\n    amountIn: bigint;\n    amountOut: bigint;\n    fee: bigint;\n    swapPrice: number;\n    marketPrice: number;\n    difference: number;\n    expiry: number;\n    createdAt: number;\n}\n\nexport type AtomiqSwapStatus =\n    | 'CREATED'\n    | 'QUOTED'\n    | 'COMMITED'\n    | 'SOFT_CLAIMED'\n    | 'CLAIMED'\n    | 'REFUNDED'\n    | 'REFUNDABLE'\n    | 'EXPIRED'\n    | 'FAILED';\n\nexport interface AtomiqSwapExecution {\n    id: string;\n    txId?: string;\n    status: AtomiqSwapStatus;\n    amountOut?: bigint;\n    errorCode?: string;\n    errorMessage?: string;\n    lightningPaymentHash?: string;\n    bitcoinAddress?: string;\n    lightningInvoice?: string;\n}\n\nexport interface AtomiqSwapClient {\n    // Core swap operations\n    getQuote(from: AtomiqSwapQuote['from'], to: AtomiqSwapQuote['to'], amount: bigint, exactIn?: boolean, destinationAddress?: string): Promise<AtomiqSwapQuote>;\n    execute(quoteId: string, walletSigner?: any, lightningInvoice?: string): Promise<AtomiqSwapExecution>;\n    getStatus(executionId: string): Promise<AtomiqSwapExecution>;\n\n    // Advanced operations\n    refund(executionId: string, walletSigner?: any): Promise<{ txId: string }>;\n    waitForCompletion(executionId: string, timeoutMs?: number): Promise<boolean>;\n\n    // Lightning-specific operations\n    getInvoice(executionId: string): Promise<string>;\n    payInvoice(invoice: string, walletSigner?: any): Promise<{ preimage: string }>;\n\n    // Swap limits and info\n    getSwapLimits(from: string, to: string): Promise<{ min: bigint; max: bigint }>;\n}\n\nexport class RealAtomiqSwapClient implements AtomiqSwapClient {\n    private swapper: any = null;\n    private factory: SwapperFactory<[StarknetInitializerType]> | null = null;\n    private initialized: boolean = false;\n    private network: 'MAINNET' | 'TESTNET';\n    private starknetRpc: string;\n    private isNodeJs: boolean;\n    private tokens: any = null;\n    private initializationPromise: Promise<void> | null = null;\n\n    constructor(network: 'MAINNET' | 'TESTNET' = ENV.NETWORK as 'MAINNET' | 'TESTNET', starknetRpc?: string) {\n        this.network = network;\n        this.starknetRpc = starknetRpc || getStarknetRpc();\n        this.isNodeJs = typeof window === 'undefined';\n\n        console.log(` Initializing Atomiq client for ${network} using RPC: ${this.starknetRpc}`);\n\n        // Only initialize in browser environment to avoid SSR issues\n        if (!this.isNodeJs) {\n            this.initializeForBrowser();\n        } else {\n            console.log(' Node.js environment detected - Atomiq SDK will initialize when needed');\n        }\n    }\n\n    private async initializeForBrowser(): Promise<void> {\n        try {\n            // Create factory with Starknet-only support (no Solana)\n            this.factory = new SwapperFactory<[StarknetInitializerType]>([StarknetInitializer] as const);\n            this.tokens = this.factory.Tokens;\n\n            // Start initialization (async)\n            this.initializationPromise = this.initializeAtomiqFactory();\n        } catch (error) {\n            console.error(' Failed to create Atomiq factory:', error);\n        }\n    }\n\n    private setupTestMode(): void {\n        if (this.isNodeJs) {\n            console.log(' Test mode setup: Atomiq SDK requires browser environment');\n            return;\n        }\n\n        // No simulation mode - user explicitly disabled it\n        this.initialized = false;\n        console.error(' Atomiq SDK initialization failed and simulation mode is disabled');\n        throw new Error('Atomiq SDK initialization failed - simulation mode disabled');\n    }\n\n    private async initializeAtomiqFactory(): Promise<void> {\n        try {\n            console.log(' Initializing Atomiq SDK with Starknet + Lightning support...');\n\n            if (!this.factory) {\n                throw new Error('Factory not initialized - browser environment required');\n            }\n\n            // Create swapper configuration matching the demo pattern\n            const starknetRpc = new RpcProviderWithRetries({ nodeUrl: this.starknetRpc });\n\n            const swapperConfig: any = {\n                chains: {\n                    STARKNET: {\n                        rpcUrl: starknetRpc,\n                        fees: new StarknetFees(starknetRpc)\n                    }\n                },\n                bitcoinNetwork: this.network === 'MAINNET' ? BitcoinNetwork.MAINNET : BitcoinNetwork.TESTNET\n            };\n\n            // For Node.js environments, use simple memory storage to avoid SQLite dependency issues\n            if (this.isNodeJs) {\n                console.log(' Using memory storage for Node.js testing environment');\n                // Use default in-memory storage for simplicity\n            }\n\n            console.log(' Configured storage for privacy mixer environment');\n\n            // Create swapper using factory with Starknet-only configuration\n            this.swapper = this.factory.newSwapper(swapperConfig);\n            console.log(' Atomiq Swapper created for Starknet  Lightning');\n\n            // Initialize the swapper\n            await this.swapper.init();\n\n            console.log(' Atomiq SDK initialized - ready for STRK  Lightning swaps');\n\n            this.initialized = true;\n\n        } catch (error) {\n            console.error(' Failed to initialize Atomiq SDK:', error instanceof Error ? error.message : String(error));\n            console.error('Full error:', error);\n            throw error; // Don't fall back to simulation as requested\n        }\n    }\n\n    private async ensureInitialized(): Promise<void> {\n        if (this.isNodeJs) {\n            throw new Error('Atomiq SDK requires browser environment - Node.js not supported');\n        }\n\n        if (this.initialized) {\n            return;\n        }\n\n        if (this.initializationPromise) {\n            await this.initializationPromise;\n            return;\n        }\n\n        throw new Error('Atomiq SDK not initialized and no initialization promise found');\n    }\n\n    /**\n     * Execute Starknet to Lightning swap for privacy mixing\n     * Converts STRK to Lightning for enhanced privacy\n     */\n    async swapStrkToLightning(amount: number, lightningInvoice: string, sourceAddress: string): Promise<SwapResult> {\n        try {\n            await this.ensureInitialized();\n\n            // Preflight: fetch STRK input limits to avoid 'Amount too high' from SDK\n            try {\n                const limits = await this.getSwapLimits('STRK', 'BTC_LN');\n                const invoiceDecoded = (() => { try { return bolt11.decode(lightningInvoice); } catch { return null; } })();\n                const invoiceMsats = invoiceDecoded?.millisatoshis ? BigInt(invoiceDecoded.millisatoshis) : undefined;\n                const invoiceSats = invoiceMsats ? Number(invoiceMsats / 1000n) : undefined;\n\n                // Note: limits are for STRK input, but we only know Lightning output amount\n                // The SDK will calculate required STRK input based on current exchange rates\n                // For now, just log the values for debugging\n                console.log(' Preflight limits check (STRK input limits):', {\n                    invoiceSats,\n                    strkMaxLimit: limits.max.toString(),\n                    strkMinLimit: limits.min.toString(),\n                    note: 'STRK input will be calculated by SDK based on invoice amount'\n                });\n\n                // Skip input validation since we don't know STRK input amount yet\n                // Let the SDK handle the validation and conversion\n\n            } catch (preflight_error) {\n                console.warn(' Preflight limits check failed, proceeding with swap:', preflight_error);\n            }\n\n            console.log(` Starting STRK  Lightning swap for amount: ${amount}`);\n            // Normalize Starknet source address (felt252) to 0x + 64 hex chars\n            let normalizedSource = sourceAddress.trim().toLowerCase();\n            if (!normalizedSource.startsWith('0x')) {\n                normalizedSource = '0x' + normalizedSource;\n            }\n            const hexBody = normalizedSource.slice(2);\n            if (!/^[0-9a-f]+$/.test(hexBody)) {\n                return {\n                    success: false,\n                    amount,\n                    fromCurrency: 'STRK',\n                    toCurrency: 'Lightning',\n                    route: 'starknet-to-lightning',\n                    error: 'Source Starknet address contains non-hex characters'\n                };\n            }\n            if (hexBody.length < 64) {\n                normalizedSource = '0x' + hexBody.padStart(64, '0');\n            } else if (hexBody.length > 64) {\n                // Some wallets return full felt length already (<= 64). If >64 it's invalid here.\n                return {\n                    success: false,\n                    amount,\n                    fromCurrency: 'STRK',\n                    toCurrency: 'Lightning',\n                    route: 'starknet-to-lightning',\n                    error: 'Source Starknet address length invalid (>64 hex chars)'\n                };\n            }\n            console.log(' Normalized Starknet source address:', normalizedSource);\n            // We now expect a BOLT11 invoice generated upstream (e.g. Cashu mint quote)\n            const invoice = lightningInvoice.trim();\n            const bolt11Pattern = /^(lnbc|lntb|lnbcrt)[0-9a-z]+$/i;\n            const isBolt11 = bolt11Pattern.test(invoice);\n            if (!isBolt11) {\n                return {\n                    success: false,\n                    amount,\n                    fromCurrency: 'STRK',\n                    toCurrency: 'Lightning',\n                    route: 'starknet-to-lightning',\n                    error: 'Provided value is not a valid BOLT11 invoice. Generate invoice from Cashu mint first.'\n                };\n            }\n\n            // Decode BOLT11 invoice to inspect amount\n            let satsFromInvoice: bigint | undefined;\n            try {\n                const decoded = bolt11.decode(invoice);\n                const msats = decoded.millisatoshis;\n                if (!msats) {\n                    return {\n                        success: false,\n                        amount,\n                        fromCurrency: 'STRK',\n                        toCurrency: 'Lightning',\n                        route: 'starknet-to-lightning',\n                        error: 'Invoice missing fixed amount (amountless invoices not supported yet)'\n                    };\n                }\n                satsFromInvoice = BigInt(msats) / BigInt(1000);\n                if (satsFromInvoice === BigInt(0)) {\n                    return {\n                        success: false,\n                        amount,\n                        fromCurrency: 'STRK',\n                        toCurrency: 'Lightning',\n                        route: 'starknet-to-lightning',\n                        error: 'Invoice amount is zero'\n                    };\n                }\n                console.log(` Invoice amount parsed: ${satsFromInvoice.toString()} sats`);\n            } catch (e) {\n                const msg = e instanceof Error ? e.message : String(e);\n                return {\n                    success: false,\n                    amount,\n                    fromCurrency: 'STRK',\n                    toCurrency: 'Lightning',\n                    route: 'starknet-to-lightning',\n                    error: `Failed to decode invoice: ${msg}`\n                };\n            }\n\n            // For Lightning invoices: must use exactOut semantics (Atomiq SDK requirement)\n            // We specify the Lightning output amount (from invoice) and let SDK calculate required STRK input\n            const exactIn = false;\n\n            console.log(` Creating STRK  Lightning swap (exactOut): ${satsFromInvoice.toString()} sats output`);\n\n            // Create STRK -> Lightning swap using proper Atomiq pattern from demo\n            const swap = await this.swapper.swap(\n                this.tokens.STARKNET.STRK,     // From STRK\n                this.tokens.BITCOIN.BTCLN,     // To Lightning\n                undefined,                     // Amount NOT specified - taken from invoice!\n                false,                         // exactIn = false for Lightning (demo pattern)\n                normalizedSource,              // Source address\n                invoice                        // Lightning invoice\n            );\n\n            console.log(' STRK  Lightning swap created:', swap.getId());\n            console.log(' Swap details:');\n            console.log('   Input: ' + swap.getInputWithoutFee());\n            console.log('   Fees: ' + swap.getFee().amountInSrcToken);\n            console.log('   Total input: ' + swap.getInput());\n            console.log('   Output: ' + swap.getOutput());\n            console.log('   Quote expiry: ' + swap.getQuoteExpiry() + ' (in ' + (swap.getQuoteExpiry() - Date.now()) / 1000 + ' seconds)');\n\n            // Use shared swap account signer if configured\n            const sharedSigner = getSharedSwapAccount();\n            if (sharedSigner) {\n                console.log(' Committing swap with shared account:', sharedSigner.getAddress().slice(0, 10) + '...');\n                await swap.commit(sharedSigner);\n            } else {\n                throw new Error('No shared swap account configured - cannot commit swap');\n            }\n\n            // Wait for the Lightning payment to complete\n            console.log(' Waiting for Lightning payment...');\n            const success = await swap.waitForPayment();\n\n            if (success) {\n                return {\n                    success: true,\n                    txId: swap.getBitcoinTxId?.() || swap.getId(),\n                    amount,\n                    fromCurrency: 'STRK',\n                    toCurrency: 'Lightning',\n                    route: 'starknet-to-lightning'\n                };\n            } else {\n                // Payment failed - refund the swap\n                console.log(' Lightning payment failed, refunding...');\n                if (sharedSigner) {\n                    await swap.refund(sharedSigner);\n                    console.log(' Swap refunded successfully');\n                }\n                return {\n                    success: false,\n                    amount,\n                    fromCurrency: 'STRK',\n                    toCurrency: 'Lightning',\n                    route: 'starknet-to-lightning',\n                    error: 'Lightning payment failed and refunded'\n                };\n            }\n\n        } catch (error) {\n            let errorMessage = error instanceof Error ? error.message : String(error);\n            if (/amount too high/i.test(errorMessage)) {\n                try {\n                    const limits = await this.getSwapLimits('STRK', 'BTC_LN');\n                    errorMessage = `${errorMessage} (max sats: ${limits.max.toString()}, consider reducing invoice amount)`;\n                } catch {/* ignore */ }\n            }\n            console.error(' STRK  Lightning swap failed:', errorMessage);\n\n            return {\n                success: false,\n                error: errorMessage,\n                amount,\n                fromCurrency: 'STRK',\n                toCurrency: 'Lightning',\n                route: 'starknet-to-lightning'\n            };\n        }\n    }\n\n    /**\n     * Execute Lightning to Starknet swap for final transfer\n     * Converts Lightning back to STRK for recipient\n     */\n    async swapLightningToStrk(amount: number, recipientAddress: string): Promise<SwapResult> {\n        try {\n            await this.ensureInitialized();\n\n            console.log(` Starting Lightning  STRK swap for amount: ${amount}`);\n\n            // Create Lightning -> STRK swap\n            const swap = await this.swapper.swap(\n                this.tokens.BITCOIN.BTCLN,    // From: Lightning Network\n                this.tokens.STARKNET.STRK,    // To: STRK token\n                BigInt(amount),               // Amount in smallest unit\n                true,                         // exactIn = true\n                undefined,                    // Source address (Lightning invoice generated)\n                recipientAddress              // Destination Starknet address\n            );\n\n            console.log(' Lightning  STRK swap created:', swap.getId());\n\n            // Get the Lightning invoice to pay\n            const invoice = swap.getAddress();\n            console.log(' Lightning invoice to pay:', invoice);\n\n            // For testing, we'll simulate the Lightning payment\n            // In production, this would integrate with your Lightning node\n            await this.simulateLightningPayment(invoice);\n\n            // Wait for swap completion\n            const result = await swap.waitForPayment();\n\n            if (result) {\n                return {\n                    success: true,\n                    txId: swap.getBitcoinTxId?.() || swap.getId(),\n                    amount,\n                    fromCurrency: 'Lightning',\n                    toCurrency: 'STRK',\n                    route: 'lightning-to-starknet'\n                };\n            } else {\n                throw new Error('Swap execution failed');\n            }\n\n        } catch (error) {\n            const errorMessage = error instanceof Error ? error.message : String(error);\n            console.error(' Lightning  STRK swap failed:', errorMessage);\n\n            return {\n                success: false,\n                error: errorMessage,\n                amount,\n                fromCurrency: 'Lightning',\n                toCurrency: 'STRK',\n                route: 'lightning-to-starknet'\n            };\n        }\n    }\n\n    /**\n     * Begin a Lightning  STRK swap and return the BOLT11 invoice without simulating payment.\n     * Use this when an external payer (e.g., Cashu melt) will pay the invoice.\n     */\n    async beginLightningToStrkSwap(amount: number, recipientAddress: string): Promise<{ id: string; invoice: string }> {\n        await this.ensureInitialized();\n\n        console.log(` (begin) Lightning  STRK swap for amount: ${amount}`);\n\n        const swap = await this.swapper.swap(\n            this.tokens.BITCOIN.BTCLN,    // From: Lightning Network\n            this.tokens.STARKNET.STRK,    // To: STRK token\n            BigInt(amount),               // Amount in sats (smallest unit)\n            true,                         // exactIn = true (LN amount is input)\n            undefined,                    // Source address (not needed for LN)\n            recipientAddress              // Destination Starknet address\n        );\n\n        const invoice = swap.getAddress();\n        const id = swap.getId();\n\n        console.log(' (begin) Lightning invoice created:', { id, invoice: typeof invoice === 'string' ? invoice.slice(0, 50) + '' : String(invoice) });\n        return { id, invoice };\n    }\n\n    /**\n     * Wait for a previously created Lightning  STRK swap to complete after external payment.\n     */\n    async waitLightningToStrkCompletion(id: string, timeoutMs: number = 300000): Promise<boolean> {\n        return this.waitForCompletion(id, timeoutMs);\n    }\n\n    /**\n     * Claim a Lightning  STRK swap on Starknet after the LN invoice is paid.\n     * Uses the shared Starknet account to sign commit/claim transactions.\n     */\n    async claimLightningToStrkSwap(id: string): Promise<{ txId?: string }> {\n        await this.ensureInitialized();\n\n        if (!this.swapper || !this.initialized) {\n            throw new Error('Atomiq SDK not initialized - simulation mode disabled');\n        }\n\n        const swap = await this.swapper.getSwapById(id);\n        if (!swap) throw new Error(`Swap ${id} not found`);\n\n        const signer = getSharedSwapAccount();\n        if (!signer) {\n            throw new Error('No shared swap account configured - cannot claim swap');\n        }\n\n        // Validate signer early to avoid opaque SDK errors\n        try {\n            const { validateSharedSwapSigner } = await import('../starknet/sharedAccount');\n            const check = await validateSharedSwapSigner();\n            if (!check.ok) {\n                throw new Error(`Invalid signer provided: ${check.reason || 'unknown reason'}${check.address ? ` (address: ${check.address})` : ''}`);\n            }\n        } catch (valErr) {\n            // Re-throw with context\n            const msg = valErr instanceof Error ? valErr.message : String(valErr);\n            throw new Error(msg.includes('Invalid signer provided') ? msg : `Invalid signer provided! ${msg}`);\n        }\n\n        try {\n            if (typeof swap.canCommitAndClaimInOneShot === 'function' && swap.canCommitAndClaimInOneShot()) {\n                await swap.commitAndClaim(signer);\n            } else {\n                await swap.commit(signer);\n                await swap.claim(signer);\n            }\n\n            const txId = swap.getBitcoinTxId?.() || swap.getOutputTxId?.() || undefined;\n            console.log(' Claimed Lightning  STRK swap on Starknet', { id, txId });\n            return { txId };\n        } catch (e) {\n            const msg = e instanceof Error ? e.message : String(e);\n            console.error(' Claim Lightning  STRK failed:', msg);\n            throw new Error(`Claim failed for swap ${id}: ${msg}`);\n        }\n    }\n\n    // Interface-required methods for compatibility\n    async getQuote(\n        from: AtomiqSwapQuote['from'],\n        to: AtomiqSwapQuote['to'],\n        amount: bigint,\n        exactIn: boolean = true,\n        destinationAddress?: string\n    ): Promise<AtomiqSwapQuote> {\n        await this.ensureInitialized();\n\n        console.log(` Getting real-time quote for ${from} -> ${to}, amount: ${amount}, exactIn: ${exactIn}`);\n\n        try {\n            if (!this.swapper || !this.tokens) {\n                throw new Error('Atomiq SDK not properly initialized');\n            }\n\n            const fromToken = this.mapToAtomiqToken(from);\n            const toToken = this.mapToAtomiqToken(to);\n\n            // Create a quote by creating a swap object (but don't commit it)\n            // This will give us real-time pricing information\n            const tempSwap = await this.swapper.swap(\n                fromToken,\n                toToken,\n                amount,\n                exactIn,\n                destinationAddress || undefined,\n                undefined // No Lightning invoice for quote\n            );\n\n            // Get pricing information from the swap object\n            const priceInfo = tempSwap.getPriceInfo();\n            const inputAmount = tempSwap.getInput();\n            const outputAmount = tempSwap.getOutput();\n            const fee = tempSwap.getFee();\n            const expiry = tempSwap.getQuoteExpiry();\n\n            console.log(' Real-time quote received:', {\n                swapPrice: priceInfo.swapPrice,\n                marketPrice: priceInfo.marketPrice,\n                difference: priceInfo.difference,\n                input: inputAmount.toString(),\n                output: outputAmount.toString(),\n                fee: fee.amountInSrcToken.toString(),\n                expiry: new Date(expiry).toISOString()\n            });\n\n            return {\n                id: tempSwap.getId(),\n                from,\n                to,\n                amountIn: BigInt(inputAmount.toString()),\n                amountOut: BigInt(outputAmount.toString()),\n                fee: BigInt(fee.amountInSrcToken.toString()),\n                swapPrice: priceInfo.swapPrice,\n                marketPrice: priceInfo.marketPrice,\n                difference: priceInfo.difference,\n                expiry: expiry,\n                createdAt: Date.now()\n            };\n\n        } catch (error) {\n            console.warn(' Failed to get real-time quote, falling back to estimate:', error);\n            const fallbackRate = ENV.STRK_SATS_RATE || 125;\n\n            // Fallback to conservative estimate if real quote fails\n            // Handle Wei conversion properly: 1 STRK (1e18 Wei)  700 sats\n            let estimatedOutput: bigint;\n            let estimatedInput: bigint;\n\n            if (exactIn) {\n                // Input is in Wei, convert to STRK then to sats\n                const strkAmount = Number(amount) / 1e18;\n                estimatedOutput = BigInt(Math.floor(strkAmount * fallbackRate));\n                estimatedInput = amount;\n            } else {\n                // Output is in sats, convert to STRK then to Wei\n                const strkAmount = Number(amount) / fallbackRate; // amount is sats\n                estimatedInput = BigInt(Math.floor(strkAmount * 1e18)); // Convert to Wei\n                estimatedOutput = amount;\n            }\n\n            return {\n                id: `quote_fallback_${Date.now()}`,\n                from,\n                to,\n                amountIn: estimatedInput,\n                amountOut: estimatedOutput,\n                fee: amount / 100n, // 1% fee estimate\n                swapPrice: exactIn ? 0.001 : 1000,\n                marketPrice: exactIn ? 0.001 : 1000,\n                difference: 0,\n                expiry: Date.now() + 600000, // 10 minutes\n                createdAt: Date.now()\n            };\n        }\n    }\n\n    /**\n     * Get real-time quote for STRK to Lightning conversion\n     */\n    async getStrkToLightningQuote(strkAmount: number): Promise<{ satsOut: number; quote: AtomiqSwapQuote }> {\n        try {\n            // Convert STRK to Wei for the quote\n            const strkAmountWei = BigInt(Math.floor(strkAmount * 1e18));\n\n            // Use shared swap account address for quoting\n            const sharedSigner = getSharedSwapAccount();\n            const sourceAddress = sharedSigner?.getAddress() || undefined;\n\n            const quote = await this.getQuote('STRK', 'BTC_LN', strkAmountWei, true, sourceAddress);\n\n            // Convert output back to sats (assuming it's returned in base units)\n            const satsOut = Number(quote.amountOut);\n\n            console.log(` STRK  Lightning quote: ${strkAmount} STRK  ${satsOut} sats`);\n\n            return { satsOut, quote };\n        } catch (error) {\n            console.warn(' Failed to get STRK  Lightning quote, using fallback:', error);\n\n            // Conservative fallback using configured rate\n            const fallbackRate = ENV.STRK_SATS_RATE || 125;\n            const fallbackSats = Math.floor(strkAmount * fallbackRate);\n\n            return {\n                satsOut: fallbackSats,\n                quote: {\n                    id: `fallback_${Date.now()}`,\n                    from: 'STRK',\n                    to: 'BTC_LN',\n                    amountIn: BigInt(Math.floor(strkAmount * 1e18)),\n                    amountOut: BigInt(fallbackSats),\n                    fee: BigInt(Math.floor(fallbackSats * 0.01)), // 1% fee\n                    swapPrice: fallbackSats / strkAmount,\n                    marketPrice: fallbackSats / strkAmount,\n                    difference: 0,\n                    expiry: Date.now() + 600000,\n                    createdAt: Date.now()\n                }\n            };\n        }\n    }\n\n    /**\n     * High-level convenience: estimate sats output for known STRK input.\n     * Attempts live quote; returns { satsOut, rate, source } where rate = satsOut/STRK.\n     */\n    async estimateLightningSatsFromStrk(strkAmount: number): Promise<{ satsOut: number; rate: number; source: 'realtime' | 'fallback'; quote?: AtomiqSwapQuote }> {\n        try {\n            const { satsOut, quote } = await this.getStrkToLightningQuote(strkAmount);\n            const rate = satsOut / Math.max(1e-9, strkAmount); // protect division\n            console.log(' Dynamic STRKsats estimate (realtime):', { strkAmount, satsOut, rate });\n            return { satsOut, rate, source: 'realtime', quote };\n        } catch (e) {\n            const fallback = Math.floor(strkAmount * (ENV.STRK_SATS_RATE || 125));\n            const rate = fallback / Math.max(1e-9, strkAmount);\n            console.warn(' Dynamic estimate fallback used:', { strkAmount, satsOut: fallback, rate });\n            return { satsOut: fallback, rate, source: 'fallback' };\n        }\n    }\n\n    async execute(quoteId: string, walletSigner?: any, lightningInvoice?: string): Promise<AtomiqSwapExecution> {\n        await this.ensureInitialized();\n\n        console.log(` Executing simplified swap ${quoteId}`);\n\n        // For simplified integration, return success status\n        return {\n            id: quoteId,\n            txId: `tx_${Date.now()}`,\n            status: 'CLAIMED',\n            amountOut: BigInt(1000000), // Mock amount\n        };\n    }\n\n    /**\n     * Create Lightning invoice for receiving Bitcoin\n     */\n    private async createLightningInvoice(amount: number, lightningAddress: string): Promise<string> {\n        try {\n            console.log(` Creating Lightning invoice for ${amount} sats to ${lightningAddress}`);\n\n            // In production, this would integrate with your Lightning node:\n            // 1. Connect to Lightning node (LND, CLN, Eclair, etc.)\n            // 2. Generate invoice for specified amount\n            // 3. Return payment request string\n\n            // For testnet development, create a valid-looking invoice format\n            const timestamp = Math.floor(Date.now() / 1000);\n            const mockInvoice = `lntb${amount}u1p${timestamp.toString(16)}h0s9ywmm8dfjk7unn2v4ehgcm00u93b2g3r`;\n\n            console.log(' Lightning invoice created for privacy mixer');\n            return mockInvoice;\n\n        } catch (error) {\n            console.error(' Failed to create Lightning invoice:', error);\n            throw new Error(`Lightning invoice creation failed: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    /**\n     * Simulate Lightning payment for testing\n     * In production, this would be handled by your Lightning infrastructure\n     */\n    private async simulateLightningPayment(invoice: string): Promise<void> {\n        console.log(` Simulating Lightning payment for invoice: ${invoice.slice(0, 20)}...`);\n\n        // Simulate network delay for realistic testing\n        await new Promise(resolve => setTimeout(resolve, 2000));\n\n        console.log(' Lightning payment simulation completed');\n    }\n\n    async getStatus(executionId: string): Promise<AtomiqSwapExecution> {\n        await this.ensureInitialized();\n\n        if (!this.swapper || !this.initialized) {\n            throw new Error('Atomiq SDK not initialized - simulation mode disabled');\n        }\n\n        try {\n            // Get swap by ID (executionId is the same as quoteId in our implementation)\n            const swap = await this.swapper.getSwapById(executionId);\n\n            if (!swap) {\n                throw new Error(`Swap with ID ${executionId} not found`);\n            }\n\n            const state = swap.getState();\n            const status = this.mapSwapState(state);\n\n            // Safely parse output amount (STRK) to Wei\n            let amountOutWei: bigint | undefined = undefined;\n            if (status === 'CLAIMED') {\n                try {\n                    const rawOut: any = swap.getOutput?.() ?? undefined;\n                    amountOutWei = this.parseStrkAmountToWei(rawOut);\n                } catch (e) {\n                    console.warn(' Failed to parse STRK output amount to Wei:', e instanceof Error ? e.message : String(e));\n                    amountOutWei = undefined;\n                }\n            }\n\n            return {\n                id: executionId,\n                status,\n                txId: swap.getBitcoinTxId?.() || undefined,\n                amountOut: amountOutWei,\n                lightningPaymentHash: undefined // Simplified for Starknet  Lightning focus\n            };\n\n        } catch (error) {\n            console.error(' Failed to get swap status:', error);\n            throw new Error(`Failed to get swap status: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    /**\n     * Convert an SDK-provided STRK amount (which might be a number, bigint, or formatted string)\n     * into Wei (bigint). Handles strings like \"0.971158651 STRK\" or \"0.971158651\".\n     */\n    private parseStrkAmountToWei(value: any): bigint {\n        // Already bigint: assume Wei\n        if (typeof value === 'bigint') return value;\n\n        // Number: treat as STRK decimal amount; convert to Wei\n        if (typeof value === 'number') {\n            // Convert via string path to avoid FP issues\n            return this.decimalStrToWei(String(value));\n        }\n\n        // Try string-like\n        const s = value?.toString?.();\n        if (typeof s !== 'string' || s.length === 0) {\n            throw new SyntaxError('Unknown STRK amount format');\n        }\n\n        // Remove token symbol and any extraneous text\n        const cleaned = s.replace(/STRK/gi, '').replace(/sats/gi, '').trim();\n\n        // If it's an integer-only string, assume Wei\n        if (/^\\d+$/.test(cleaned)) {\n            return BigInt(cleaned);\n        }\n\n        // Else treat as decimal STRK amount and convert to Wei\n        return this.decimalStrToWei(cleaned);\n    }\n\n    // Convert a decimal string in STRK to Wei (18 decimals)\n    private decimalStrToWei(s: string): bigint {\n        if (!/^\\d*(?:\\.\\d+)?$/.test(s)) {\n            // Try to extract first numeric token\n            const m = s.match(/\\d+(?:\\.\\d+)?/);\n            if (!m) throw new SyntaxError(`Cannot convert ${s} to a BigInt`);\n            s = m[0];\n        }\n        const [intPart, fracRaw = ''] = s.split('.');\n        const frac = (fracRaw + '0'.repeat(18)).slice(0, 18); // right-pad to 18\n        const intWei = intPart ? BigInt(intPart) * 1000000000000000000n : 0n;\n        const fracWei = frac ? BigInt(frac) : 0n;\n        return intWei + fracWei;\n    }\n\n    async refund(executionId: string, walletSigner?: any): Promise<{ txId: string }> {\n        await this.ensureInitialized();\n\n        if (!this.swapper || !this.initialized) {\n            throw new Error('Atomiq SDK not initialized - simulation mode disabled');\n        }\n\n        try {\n            // Get swap by ID (executionId is the same as quoteId in our implementation)\n            const swap = await this.swapper.getSwapById(executionId);\n\n            if (!swap) {\n                throw new Error(`Swap with ID ${executionId} not found`);\n            }\n\n            console.log(` Refunding swap ${executionId}`);\n            await swap.refund(walletSigner);\n\n            const txId = swap.getBitcoinTxId?.() || `refund_${executionId}`;\n            console.log(` Refund completed with txId: ${txId}`);\n\n            return { txId };\n\n        } catch (error) {\n            console.error(' Refund failed:', error);\n            throw new Error(`Failed to refund swap: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    async waitForCompletion(executionId: string, timeoutMs: number = 300000): Promise<boolean> {\n        await this.ensureInitialized();\n\n        if (!this.swapper || !this.initialized) {\n            throw new Error('Atomiq SDK not initialized - simulation mode disabled');\n        }\n\n        try {\n            // Get swap by ID (executionId is the same as quoteId in our implementation)\n            const swap = await this.swapper.getSwapById(executionId);\n\n            if (!swap) {\n                throw new Error(`Swap with ID ${executionId} not found`);\n            }\n\n            console.log(` Waiting for swap ${executionId} completion (timeout: ${timeoutMs}ms)`);\n\n            // Use swap's built-in wait functionality\n            return await swap.waitForPayment();\n\n        } catch (error) {\n            console.error(' Wait for completion failed:', error);\n            return false;\n        }\n    }\n\n    async getInvoice(executionId: string): Promise<string> {\n        await this.ensureInitialized();\n\n        if (!this.swapper || !this.initialized) {\n            throw new Error('Atomiq SDK not initialized - simulation mode disabled');\n        }\n\n        try {\n            // Get swap by ID (executionId is the same as quoteId in our implementation)\n            const swap = await this.swapper.getSwapById(executionId);\n\n            if (!swap) {\n                throw new Error(`Swap with ID ${executionId} not found`);\n            }\n\n            // For Lightning swaps, get the invoice address\n            // This works for BTC Lightning -> Smart Chain swaps where Atomiq generates the invoice\n            const invoiceOrAddress = swap.getAddress();\n            console.log(` Generated Lightning invoice: ${invoiceOrAddress}`);\n            return invoiceOrAddress;\n\n        } catch (error) {\n            console.error(' Failed to get invoice:', error);\n            throw new Error(`Failed to get invoice: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    async payInvoice(invoice: string, walletSigner?: any): Promise<{ preimage: string }> {\n        await this.ensureInitialized();\n\n        if (!this.swapper || !this.initialized) {\n            throw new Error('Atomiq SDK not initialized - simulation mode disabled');\n        }\n\n        try {\n            // For paying Lightning invoice from smart chain\n            console.log(` Creating STRK -> Lightning swap for invoice payment`);\n\n            const swap = await this.swapper.swap(\n                this.tokens.STARKNET.STRK, // From STRK\n                this.tokens.BITCOIN.BTCLN, // To Lightning\n                undefined, // Amount is determined by the invoice\n                false, // exactIn = false for Lightning invoice payments\n                undefined, // Source address auto-detected\n                invoice // Lightning invoice as destination\n            );\n\n            await swap.commit(walletSigner);\n            const result = await swap.waitForPayment();\n\n            if (result) {\n                const preimage = swap.getSecret?.() || `preimage_${Date.now()}`;\n                console.log(` Lightning payment completed with preimage: ${preimage.slice(0, 10)}...`);\n                return { preimage };\n            } else {\n                throw new Error('Lightning payment failed');\n            }\n\n        } catch (error) {\n            console.error(' Lightning payment failed:', error);\n            throw new Error(`Failed to pay Lightning invoice: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    async getSwapLimits(from: string, to: string): Promise<{ min: bigint; max: bigint }> {\n        await this.ensureInitialized();\n\n        if (!this.swapper || !this.initialized) {\n            throw new Error('Atomiq SDK not initialized - simulation mode disabled');\n        }\n\n        try {\n            const fromToken = this.mapToAtomiqToken(from);\n            const toToken = this.mapToAtomiqToken(to);\n\n            console.log(` Getting swap limits for ${from} -> ${to}`);\n            const limits = this.swapper.getSwapLimits(fromToken, toToken);\n\n            console.log(' Raw limits from Atomiq:', {\n                inputMin: limits.input.min,\n                inputMax: limits.input.max,\n                inputMinType: typeof limits.input.min,\n                inputMaxType: typeof limits.input.max\n            });\n\n            // Parse the limits carefully - they might be strings with units\n            const minValue = this.parseAtomiqAmount(limits.input.min) || 1000n;\n            const maxValue = this.parseAtomiqAmount(limits.input.max) || 1000000n;\n\n            return {\n                min: minValue,\n                max: maxValue\n            };\n\n        } catch (error) {\n            console.error(' Failed to get swap limits:', error);\n            throw new Error(`Failed to get swap limits: ${error instanceof Error ? error.message : String(error)}`);\n        }\n    }\n\n    // Utility methods\n    private parseAtomiqAmount(value: any): bigint | null {\n        try {\n            // Handle null/undefined\n            if (value == null) {\n                return null;\n            }\n\n            // If it's already a number or bigint, convert directly\n            if (typeof value === 'number') {\n                return BigInt(Math.floor(value));\n            }\n            if (typeof value === 'bigint') {\n                return value;\n            }\n\n            // If it's a string, parse it carefully\n            if (typeof value === 'string') {\n                // Remove any currency symbols and whitespace\n                const cleanValue = value.replace(/[A-Za-z\\s]/g, '').trim();\n\n                // Handle empty or zero values\n                if (!cleanValue || cleanValue === '0' || parseFloat(cleanValue) === 0) {\n                    return 0n;\n                }\n\n                // Parse as float first to handle decimals, then convert to integer (assuming smallest unit)\n                const floatValue = parseFloat(cleanValue);\n                if (isNaN(floatValue)) {\n                    return null;\n                }\n\n                // Convert to BigInt (assuming the value is already in the smallest unit)\n                return BigInt(Math.floor(floatValue));\n            }\n\n            return null;\n        } catch (error) {\n            console.warn(' Failed to parse Atomiq amount:', { value, error });\n            return null;\n        }\n    }\n\n    private mapToAtomiqToken(token: string): any {\n        // Map our token types to actual Atomiq SDK token constants\n        if (!this.tokens) {\n            throw new Error('Atomiq SDK tokens not available - SDK not properly initialized');\n        }\n\n        switch (token) {\n            case 'STRK':\n                return this.tokens.STARKNET.STRK; // Use actual Starknet STRK token\n            case 'BTC':\n                return this.tokens.BITCOIN.BTC; // Bitcoin on-chain\n            case 'BTC_LN':\n                return this.tokens.BITCOIN.BTCLN; // Bitcoin Lightning Network\n            default:\n                throw new Error(`Unsupported token: ${token}`);\n        }\n    }\n\n    private mapSwapState(state: any): AtomiqSwapStatus {\n        // Map real Atomiq swap states to our enum\n        // Based on the documentation, different swap types have different states\n        if (typeof state === 'number') {\n            // ToBTCSwapState (Smart Chain -> BTC/Lightning)\n            switch (state) {\n                case 0: return 'CREATED';     // CREATED - quote created\n                case 1: return 'COMMITED';    // COMMITED - swap initiated\n                case 2: return 'SOFT_CLAIMED'; // SOFT_CLAIMED - processing\n                case 3: return 'CLAIMED';     // CLAIMED - completed\n                case 4: return 'REFUNDABLE';  // REFUNDABLE - failed, can refund\n                case -1: return 'EXPIRED';    // QUOTE_SOFT_EXPIRED\n                case -2: return 'EXPIRED';    // QUOTE_EXPIRED\n                case -3: return 'REFUNDED';   // REFUNDED\n                default: return 'FAILED';\n            }\n        }\n\n        // Handle string states or other formats\n        if (typeof state === 'string') {\n            switch (state.toUpperCase()) {\n                case 'CREATED': return 'CREATED';\n                case 'COMMITED': return 'COMMITED';\n                case 'SOFT_CLAIMED': return 'SOFT_CLAIMED';\n                case 'CLAIMED': return 'CLAIMED';\n                case 'REFUNDABLE': return 'REFUNDABLE';\n                case 'REFUNDED': return 'REFUNDED';\n                case 'EXPIRED': return 'EXPIRED';\n                default: return 'FAILED';\n            }\n        }\n\n        return 'CREATED'; // Default state\n    }\n}\n\n// Export the client - user requested \"real deal\" so we use RealAtomiqSwapClient\n// Avoid instantiating during SSR to prevent Turbopack module factory errors\nlet atomiqClient: RealAtomiqSwapClient | null = null;\nif (typeof window !== 'undefined') {\n    atomiqClient = new RealAtomiqSwapClient(\n        ENV.NETWORK === 'MAINNET' ? 'MAINNET' : 'TESTNET',\n        getStarknetRpc()\n    );\n}\n\nexport default atomiqClient as unknown as RealAtomiqSwapClient;\n"],"names":[],"mappings":"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OAAO,GAM9B,CACA,eAAe,CAAI,CAAE,OAEjB,CADA,GACI,CADA,CAAC,YAAY,CAAC,MAAM,CAAC,EAAK,KAAK,IAC9B,EAAK,WAAW,IACjB,AACG,IAAI,CAAC,cAAc,CAAC,MAAM,CAAC,GADvB,QAAQ,OAAO,EAE9B,CAIA,MAAM,MAAO,CACT,IAAI,CAAC,aAAa,EAAG,EACrB,IAAI,CAAC,kBAAkB,CAAC,kBAAkB,CAAC,IAAI,CAAC,IAAI,EACpD,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,gCACQ,MAArB,IAAI,CAAC,YAAY,EACjB,cAAc,IAAI,CAAC,YAAY,CACvC,CAIA,gBAAiB,CACb,OAAO,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,KAAK,CAAC,wBAAwB,GAAG,AAC7D,CACJ,uG,I,E,E,C,C,O,O,I,M,E,I,C,Y,C,C,C,C,C,K,E,C,A,I,C,Q,E,E,G,C,A,C,S,E,E,C,E,A,C,C,K,A,E,G,C,C,C,C,E,C,A,E,E,O,A,E,G,C,C,C,A,I,C,K,C,E,E,I,E,C,A,A,U,S,I,C,K,C,M,C,M,A,K,C,qD,C,C,A,I,C,Q,C,I,C,K,C,Q,C,A,I,C,S,C,I,C,K,C,S,C,A,I,E,I,C,C,O,C,A,E,C,G,U,C,G,E,C,E,A,C,A,C,C,C,K,C,E,E,E,E,C,C,A,E,C,M,C,G,A,C,K,E,C,A,C,E,A,C,C,E,I,C,C,C,C,C,C,E,C,K,C,C,E,C,C,C,C,C,E,G,C,C,E,C,K,C,M,C,G,A,C,C,E,C,K,C,E,E,I,E,C,A,I,I,C,C,C,C,C,C,E,C,K,C,C,E,C,C,C,C,C,E,I,A,G,C,C,E,C,E,C,M,C,G,A,C,A,C,C,E,K,A,E,E,C,A,A,C,C,I,C,C,C,C,M,C,E,E,O,A,E,I,C,C,A,I,C,K,C,M,C,G,A,C,C,E,A,C,A,A,U,C,C,C,C,C,E,E,O,A,E,I,C,C,A,C,E,E,M,A,E,E,C,G,C,S,C,C,A,I,C,Q,E,E,E,C,C,C,K,C,U,C,G,A,C,C,E,C,K,C,M,C,G,A,C,C,E,C,K,C,U,C,G,A,C,C,E,C,O,E,A,C,A,A,M,E,C,I,E,C,G,U,C,I,C,K,C,S,C,C,A,O,I,C,U,C,G,A,C,A,C,A,A,C,C,Q,C,C,C,C,E,C,E,C,A,M,C,M,C,M,C,c,C,I,C,C,C,E,C,C,C,E,O,C,C,O,U,C,W,C,U,C,W,C,C,C,I,C,A,O,E,A,Q,C,E,E,A,I,C,I,C,E,E,A,K,C,E,C,E,E,A,I,C,I,C,E,E,A,K,A,C,A,E,G,O,C,E,A,K,C,C,A,E,A,K,C,E,G,O,C,E,A,K,C,C,A,C,C,A,A,C,I,E,C,O,I,C,U,E,A,C,A,A,O,E,C,I,C,S,E,E,E,C,C,C,K,C,O,E,C,A,I,C,K,C,O,E,A,C,A,C,A,E,I,C,E,E,C,G,C,C,C,C,E,A,C,C,E,C,E,C,C,C,E,A,E,C,A,C,K,C,G,I,C,C,E,C,A,E,I,C,M,C,C,E,E,C,C,C,A,G,E,E,A,E,C,C,C,+N,E,K,C,E,M,C,A,C,C,C,E,A,G,S,E,O,E,G,G,A,K,C,E,G,sB,C,E,C,C,C,C,A,C,M,C,E,O,A,C,A,C,E,E,C,C,G,S,E,A,C,M,E,G,G,A,K,C,C,G,C,C,A,A,E,E,E,A,C,A,C,6B,C,O,G,E,C,C,G,C,C,C,E,A,C,O,C,E,O,A,C,C,A,C,C,E,E,A,E,I,E,C,E,A,E,O,A,E,G,E,A,C,A,C,C,E,I,C,A,O,C,G,E,G,A,C,A,A,G,E,C,G,C,C,C,I,C,C,A,A,C,I,C,C,G,C,C,A,A,E,E,G,A,C,C,qB,E,C,C,C,G,E,C,C,I,E,E,C,C,A,C,C,A,C,C,A,Q,E,C,C,C,C,C,A,C,A,C,G,E,E,C,A,C,A,C,A,K,E,O,E,C,A,C,C,C,O,C,C,C,E,A,C,kB,C,E,E,W,C,E,E,A,Q,O,C,E,O,A,C,E,M,C,E,C,E,A,E,I,M,A,E,G,C,C,A,C,C,A,C,c,C,E,O,A,C,E,M,A,C,E,E,C,K,A,E,G,E,A,C,A,C,C,E,I,M,A,E,U,C,I,C,G,E,C,I,E,C,C,A,C,A,C,E,e,C,E,E,Y,G,C,E,O,A,C,C,C,E,I,G,E,C,A,C,G,A,C,M,C,C,A,C,A,C,E,kB,C,E,O,A,C,E,M,C,E,A,E,I,M,A,E,E,C,C,C,A,C,A,C,E,U,C,C,E,O,A,C,C,C,C,C,A,M,A,E,C,C,C,Q,E,A,C,M,E,C,E,C,A,E,C,A,E,E,U,A,E,E,C,A,A,C,C,I,C,C,C,A,M,A,K,C,E,G,yC,C,C,C,A,C,A,K,G,C,E,E,O,A,E,G,A,C,C,C,A,C,Q,C,I,C,G,C,C,G,M,A,K,C,E,G,gC,C,C,A,I,E,C,C,C,K,C,A,G,Q,E,O,G,G,C,E,K,C,A,K,C,A,E,G,U,C,E,Y,K,C,G,A,C,C,K,C,C,C,A,C,C,U,C,E,O,A,C,C,C,C,C,G,C,C,A,M,G,C,C,M,C,O,E,G,C,A,E,C,C,A,A,I,I,C,C,C,C,C,C,C,C,M,C,C,E,C,G,C,A,C,C,C,C,C,C,C,C,C,A,O,A,C,C,E,C,C,C,E,S,C,E,O,A,C,E,A,M,C,U,C,I,C,E,C,C,C,C,A,C,W,C,E,O,A,C,E,G,I,E,Q,C,I,C,E,C,C,C,A,C,E,E,A,I,E,C,C,I,M,C,C,C,C,A,G,C,G,C,C,M,E,E,G,C,C,C,A,I,A,K,C,C,qC,E,C,C,C,C,C,Y,E,E,M,O,E,C,C,C,C,C,A,O,C,C,C,A,C,A,C,E,C,C,K,C,E,E,I,I,C,E,O,A,C,C,A,C,C,C,C,C,C,C,G,C,E,C,C,E,C,A,E,A,C,K,A,K,C,iB,C,E,G,C,C,E,C,S,C,E,C,O,C,C,C,A,C,A,C,E,M,C,E,O,A,A,C,E,G,C,E,C,C,E,E,C,A,C,C,C,E,C,A,G,E,C,E,A,C,E,O,C,C,C,A,C,C,M,C,E,O,A,A,C,C,C,E,C,M,C,E,M,C,G,A,C,A,C,A,C,A,C,C,M,C,E,O,A,A,C,C,C,C,C,C,C,O,C,C,C,E,E,C,A,A,C,A,A,C,A,A,C,M,C,E,C,A,C,A,C,C,A,c,C,E,O,A,C,C,C,C,C,E,C,E,I,I,E,O,G,E,C,C,A,G,G,A,K,C,0B,C,C,A,G,Q,E,O,G,E,C,C,C,G,E,A,K,C,2B,C,C,A,G,U,E,O,E,I,E,A,K,C,2B,C,C,A,I,E,A,C,E,A,C,C,E,U,C,G,A,C,C,A,A,C,C,C,C,A,E,O,C,E,C,G,C,A,C,A,A,C,C,A,C,E,C,C,E,A,C,A,C,C,A,C,C,C,C,A,A,C,A,C,A,C,E,A,A,E,A,C,C,I,C,C,C,C,A,C,C,I,C,C,C,C,A,C,C,C,A,C,A,C,A,C,C,C,G,C,E,C,C,C,C,C,C,C,C,A,E,C,C,C,A,C,C,C,E,C,C,A,C,A,C,E,A,E,A,C,C,C,C,C,C,E,C,C,C,C,A,C,A,C,A,C,A,C,C,C,A,C,A,E,C,E,E,E,E,G,C,C,C,C,C,C,E,C,C,C,C,C,A,C,A,C,A,C,C,C,A,A,C,A,C,A,E,C,E,E,A,G,C,E,E,G,C,A,M,A,K,C,A,yB,C,C,A,I,E,C,A,C,A,E,C,C,C,A,K,E,C,E,C,A,I,A,E,A,C,A,C,C,C,E,C,C,A,K,E,C,A,E,C,G,C,E,C,A,C,E,A,C,C,M,A,C,A,A,M,G,E,W,A,E,G,E,C,A,C,A,A,C,K,C,A,E,E,E,E,A,C,C,C,E,C,G,A,I,C,C,C,C,C,A,C,A,A,A,C,A,A,C,C,A,C,C,E,C,C,C,C,C,G,C,E,E,C,E,I,C,A,C,A,C,A,A,A,C,A,A,E,O,O,C,E,O,A,C,C,C,C,E,C,C,A,E,I,A,E,C,E,E,E,C,E,A,I,C,C,C,A,C,C,C,C,A,C,A,E,U,E,O,E,M,A,A,K,C,4B,C,C,A,I,E,C,A,C,E,C,A,K,C,E,G,E,E,G,C,E,A,C,E,E,C,C,C,C,E,C,E,A,A,C,I,C,Q,C,M,C,G,M,C,iB,C,E,E,M,C,E,C,A,C,A,A,C,G,G,C,E,E,E,C,E,I,C,O,C,G,E,E,G,A,C,A,E,A,C,C,C,C,A,G,C,E,E,E,C,E,I,C,O,C,G,E,E,E,E,E,A,A,A,C,A,A,C,K,C,C,C,E,C,C,I,C,E,O,A,A,C,E,G,G,U,E,O,G,A,M,C,a,C,E,C,Q,C,A,C,A,C,E,e,C,E,O,A,C,C,C,C,E,C,C,C,C,G,C,C,E,G,K,E,O,E,I,E,A,K,C,+B,C,C,A,S,E,C,C,C,C,C,E,C,G,E,C,A,C,E,C,A,G,G,E,G,I,E,C,E,I,A,I,E,K,E,E,C,C,C,I,G,A,A,G,C,K,A,M,A,K,C,C,O,E,E,O,gB,E,E,M,E,E,A,C,C,A,C,A,A,E,I,C,O,C,G,G,C,G,C,C,C,C,C,C,C,E,C,C,C,C,C,C,E,G,C,C,C,C,C,E,C,O,C,G,M,C,A,C,C,C,C,C,C,C,E,C,C,C,C,C,C,C,I,A,A,C,A,C,A,C,C,Q,C,E,O,A,C,C,C,I,C,C,C,G,O,C,C,C,I,C,E,C,E,I,C,C,E,C,E,C,C,C,E,C,G,A,C,C,M,I,E,C,E,I,E,C,C,E,E,E,A,G,C,C,A,G,C,C,C,I,E,C,E,C,E,C,E,C,C,A,C,A,C,C,C,C,C,A,C,C,E,C,C,Q,E,E,E,E,C,C,Q,E,K,c,C,E,S,C,Y,E,I,W,O,E,M,C,G,A,O,c,C,E,U,C,W,G,I,W,O,E,O,C,G,A,O,c,C,E,a,C,Y,E,I,W,O,E,U,C,G,A,O,c,C,E,c,C,Y,E,I,W,O,E,W,C,G,A,O,c,C,E,c,C,W,G,I,W,O,E,W,C,G,A,O,c,C,E,a,C,Y,E,I,W,O,E,U,C,G,A,O,c,C,E,U,C,Y,E,I,W,O,E,O,C,G,A,O,c,C,E,c,C,Y,E,I,W,O,E,W,C,G,A,O,c,C,E,c,C,Y,E,I,W,O,E,W,C,G,A,I,E,C,G,E,C,C,C,C,A,E,C,G,C,C,C,A,C,C,C,A,O,E,A,E,C,E,I,E,C,C,C,K,E,C,E,C,C,A,O,C,C,A,C,C,C,K,C,G,C,E,C,A,C,A,A,C,A,C,O,E,C,E,G,G,K,E,O,E,C,K,A,K,C,2B,C,O,G,A,C,C,I,E,C,C,C,E,C,C,C,C,C,G,C,I,C,E,C,A,A,C,C,C,M,E,C,C,C,E,A,M,C,C,C,E,U,A,E,C,C,Q,C,E,C,C,Q,C,C,C,E,C,E,C,C,A,C,A,A,I,E,A,C,E,A,G,K,E,C,M,C,E,G,A,C,C,A,S,E,C,C,C,C,C,A,E,O,E,C,C,E,E,A,G,C,A,E,A,G,C,A,E,C,A,C,E,C,C,C,C,A,C,C,A,O,C,A,C,C,C,A,C,G,A,G,G,C,E,C,C,A,E,C,C,E,E,C,M,C,A,E,C,A,E,M,E,C,M,E,C,O,C,A,G,A,E,Q,E,C,M,E,C,M,C,A,G,A,E,O,E,C,M,E,C,K,C,A,G,A,E,M,E,C,M,E,C,iB,C,A,G,A,E,M,E,C,M,G,A,C,E,E,O,A,E,G,A,C,Y,C,A,G,A,C,C,I,C,a,C,G,A,C,I,C,A,G,A,C,C,G,C,O,C,G,A,C,I,C,C,E,C,G,C,C,A,E,A,C,C,M,C,G,A,C,G,C,A,G,A,E,Q,E,C,M,G,A,M,C,a,C,E,C,Q,C,C,C,A,E,c,C,E,C,E,A,M,A,K,C,A,iB,C,A,C,A,C,sG,E,G,C,E,E,A,G,C,E,I,G,A,C,C,C,A,C,C,E,O,E,E,C,E,A,E,C,A,C,A,C,C,C,C,A,C,G,C,E,K,E,A,C,C,C,C,A,C,E,I,E,C,A,C,A,K,K,A,E,C,A,C,C,C,A,E,C,C,C,A,E,I,C,E,C,C,C,A,C,C,M,C,E,E,G,U,C,E,E,M,C,E,C,C,G,U,C,E,O,A,C,E,I,A,E,E,A,E,I,C,C,E,A,C,E,E,A,C,C,A,E,C,A,U,C,A,G,A,C,A,K,C,Q,C,I,C,Q,C,K,C,Q,C,I,C,Q,C,C,C,M,C,E,E,e,A,E,E,G,A,C,A,C,A,C,A,E,A,C,I,C,E,E,E,W,C,E,E,K,C,E,E,I,C,A,C,C,C,C,C,A,E,O,E,A,G,C,E,C,O,C,C,A,O,E,C,C,E,C,C,A,A,K,C,C,A,C,C,A,G,C,G,A,C,A,C,A,C,C,U,C,E,E,O,G,C,E,O,A,C,C,C,C,C,K,E,A,C,A,C,E,E,E,A,C,C,A,C,A,C,E,A,O,C,E,E,I,C,C,E,E,E,O,C,E,O,A,C,C,C,A,E,G,C,A,E,A,K,C,M,A,K,C,0B,C,C,A,I,E,E,A,A,I,C,G,A,C,C,K,E,A,K,C,G,C,C,A,C,C,A,A,A,C,C,C,C,E,C,C,A,C,C,A,U,C,E,O,A,C,C,C,C,C,G,C,C,C,A,K,C,M,A,K,C,0B,C,C,A,I,E,E,A,A,I,C,G,A,C,C,K,E,A,K,C,G,C,C,A,A,C,C,C,C,G,C,A,C,A,C,A,C,A,C,A,mB,C,E,O,A,C,C,C,C,G,C,A,E,G,C,E,C,E,A,C,A,C,A,C,E,W,A,E,a,C,E,C,C,A,M,C,A,E,E,E,C,E,K,C,G,C,C,C,A,G,E,E,E,A,E,G,E,A,C,G,C,A,M,A,K,C,gC,C,E,I,wB,C,G,I,C,C,C,E,C,C,A,C,C,C,A,A,C,C,e,A,E,G,C,A,C,C,A,C,C,e,A,E,G,C,C,A,C,E,A,C,A,C,C,A,C,C,A,mB,C,E,E,gB,A,C,E,E,a,C,C,E,O,A,C,C,C,C,E,E,A,A,E,I,A,E,C,C,C,K,C,A,E,E,G,C,C,E,E,C,A,C,C,C,E,C,C,A,A,C,C,A,E,A,C,E,E,C,A,G,C,M,A,K,C,W,C,E,I,wB,C,G,A,C,C,E,E,E,C,C,A,C,A,C,C,A,A,C,C,e,A,E,G,A,C,A,C,C,A,E,e,A,E,G,A,C,C,A,G,A,C,C,C,C,C,I,E,C,C,C,A,C,C,e,A,E,E,G,C,C,C,E,A,C,C,C,Y,A,E,E,E,C,C,C,G,A,C,C,A,E,C,C,Q,E,C,K,C,C,C,C,E,C,K,C,C,C,C,E,C,G,E,C,C,C,C,E,C,G,C,C,C,A,C,C,C,A,E,C,G,C,C,C,A,C,C,C,E,C,G,C,C,C,A,C,C,C,E,C,G,C,C,C,A,C,C,C,A,E,C,G,C,C,C,A,C,C,C,E,C,G,C,C,C,A,C,C,C,E,E,G,A,C,C,A,E,C,C,A,O,E,A,E,C,A,C,C,E,I,E,C,C,C,C,A,A,O,G,E,C,A,C,A,C,A,C,C,C,A,A,C,C,E,C,I,E,C,C,C,C,C,G,I,E,A,C,K,A,K,C,kC,C,C,A,G,G,E,C,A,K,A,K,C,yC,C,G,G,C,A,C,A,C,E,C,C,G,C,A,C,C,C,A,C,A,C,E,A,C,A,A,C,E,C,A,C,E,C,A,C,E,C,C,G,C,G,G,A,C,A,I,C,C,C,C,C,C,A,C,C,C,C,C,C,A,C,C,C,C,C,C,C,C,A,C,C,C,C,C,C,C,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,A,C,A,A,G,A,C,C,C,C,E,C,K,A,K,C,wB,C,C,A,O,E,C,A,C,E,C,A,G,C,C,I,E,C,C,C,C,C,E,G,C,C,C,A,G,C,E,A,G,C,G,C,A,C,A,C,M,A,K,C,yB,C,A,C,A,A,S,E,C,C,C,E,E,E,E,A,E,C,C,I,C,C,C,C,A,E,C,C,A,E,A,A,G,C,C,C,G,G,C,C,E,E,E,A,E,C,C,A,C,A,C,C,A,E,C,A,M,E,C,C,C,E,E,E,E,C,E,A,C,I,C,C,C,C,A,E,C,C,A,A,E,A,G,C,C,C,G,A,C,A,C,A,E,A,G,C,E,A,G,E,A,C,C,A,A,C,E,C,C,C,C,C,C,A,C,C,E,A,G,C,E,A,G,C,E,A,G,A,C,A,C,C,A,E,E,A,A,G,C,E,A,E,A,G,C,C,C,E,A,G,C,C,C,A,O,E,E,A,E,C,C,A,C,A,C,C,A,E,C,A,M,E,C,E,G,C,C,E,C,A,K,A,K,C,qC,C,C,A,I,C,C,C,C,E,C,A,C,A,C,C,A,K,C,C,G,C,G,A,C,A,C,C,E,C,A,C,C,C,A,I,C,C,E,C,C,A,C,C,C,C,C,A,A,K,C,C,C,C,E,E,C,A,C,E,E,C,C,E,C,I,A,M,A,K,C,+C,C,C,A,G,C,G,C,C,O,E,I,E,A,C,C,A,C,E,C,C,C,C,C,C,A,C,C,C,C,C,C,A,C,C,A,E,C,A,C,K,S,A,C,C,C,E,G,E,A,C,E,C,C,C,C,O,C,C,A,G,C,G,E,E,A,C,C,C,G,G,A,K,C,yB,C,C,A,I,C,C,C,C,A,C,C,E,A,G,C,E,A,G,C,E,C,A,C,A,C,A,E,A,G,C,C,C,C,C,C,A,C,A,C,E,A,G,C,C,C,G,G,C,C,A,C,A,E,A,G,C,C,C,E,A,G,C,E,C,A,C,E,E,A,G,A,C,C,C,C,O,E,A,I,C,A,C,G,C,C,C,A,C,A,E,E,A,C,E,C,C,C,C,A,C,C,G,C,E,A,G,A,C,E,E,A,C,E,C,C,C,A,G,C,E,C,A,E,E,A,C,E,C,G,C,C,C,C,A,C,A,C,M,A,K,C,A,yB,C,C,A,I,E,G,A,G,G,C,C,C,C,C,C,C,C,A,C,A,C,E,A,G,C,C,C,G,C,C,C,C,A,C,A,C,A,C,C,A,A,E,C,C,C,C,C,A,C,A,C,E,A,G,C,C,C,C,A,C,C,A,A,C,A,C,E,A,G,C,C,C,C,C,A,C,A,A,C,G,G,C,A,C,A,A,C,A,A,C,Q,E,C,G,M,A,C,C,G,C,E,C,C,C,A,C,G,C,C,C,A,C,C,C,A,C,I,A,C,C,A,A,C,E,M,A,C,A,E,I,E,C,A,C,C,C,C,A,A,E,A,E,C,C,C,A,E,A,E,A,E,C,C,A,C,E,C,E,C,E,C,C,C,A,C,C,A,E,A,E,C,C,C,A,C,C,A,A,E,A,E,C,C,C,E,C,E,C,C,A,C,C,A,A,C,C,C,C,C,C,A,E,E,C,C,E,C,E,A,C,E,E,A,E,E,E,C,C,A,G,C,A,C,C,E,C,A,C,C,A,C,C,A,G,C,E,C,C,C,A,A,C,C,A,C,C,A,E,C,C,E,C,C,A,C,A,C,C,A,C,C,A,G,C,E,A,C,C,C,A,C,C,A,A,E,A,G,C,E,A,A,G,C,G,A,C,A,C,C,A,C,C,A,C,C,A,G,C,E,A,G,C,G,A,C,A,C,C,A,C,C,C,C,A,E,E,C,E,C,C,C,C,C,A,C,C,A,C,C,A,I,C,C,C,C,C,C,C,C,A,C,C,E,E,A,E,A,G,C,E,A,G,C,G,A,C,A,C,C,A,C,C,E,A,A,I,C,E,C,C,C,C,C,A,C,C,K,A,E,C,C,A,E,C,C,A,C,A,C,C,A,C,A,C,A,C,A,A,C,C,A,A,E,C,C,A,C,A,A,E,M,M,C,C,C,C,C,G,C,C,C,C,A,C,C,E,A,C,C,C,A,C,C,A,E,C,C,E,E,C,Q,C,A,S,C,K,C,K,C,K,C,M,C,K,C,K,C,K,C,K,C,K,C,K,C,K,C,M,C,M,C,M,C,M,C,C,A,S,E,C,C,C,A,C,C,E,G,E,E,C,A,K,A,K,C,yC,C,C,A,G,I,C,C,C,M,E,A,G,C,A,G,I,C,C,C,M,E,C,C,E,C,C,E,A,G,C,A,C,C,E,C,C,G,E,G,A,A,C,C,A,G,A,C,C,C,E,A,G,C,C,C,E,C,C,A,C,C,E,A,G,C,C,C,C,A,I,C,C,C,C,K,C,A,C,A,A,S,E,C,C,C,C,G,C,E,C,C,E,E,A,K,C,A,E,E,I,C,C,I,C,E,E,A,I,A,C,A,C,A,I,G,E,E,E,A,C,C,E,C,C,C,C,C,C,C,A,E,C,A,C,C,A,G,C,G,A,C,E,A,A,C,A,C,C,C,C,E,C,C,A,A,G,C,E,C,E,C,A,C,C,A,G,C,C,A,E,E,A,G,C,G,A,O,E,C,C,A,C,Q,C,C,E,C,C,C,A,E,C,A,C,C,A,G,C,G,A,C,E,A,A,C,A,C,C,C,C,E,A,G,C,E,C,A,C,C,C,C,C,A,E,A,G,C,E,C,E,C,A,C,E,C,C,A,M,A,C,A,C,C,E,C,C,C,E,G,C,E,C,E,A,C,I,C,C,C,C,A,E,C,C,A,E,A,G,A,C,C,C,G,E,C,A,C,A,A,C,E,C,E,E,A,G,A,C,C,A,E,E,A,A,G,C,E,E,A,G,C,C,C,A,E,A,E,A,G,C,E,E,A,G,A,C,E,A,G,C,C,C,A,G,C,G,A,C,G,C,A,E,A,M,A,K,C,gC,C,C,A,O,E,C,A,C,A,A,C,A,C,C,C,A,A,C,A,A,C,A,A,C,A,A,S,E,C,C,C,E,K,I,G,C,C,C,E,E,K,A,E,G,I,G,C,C,E,I,A,E,E,C,A,C,A,C,G,E,C,C,A,C,C,C,C,M,C,A,E,I,C,I,A,C,E,C,C,C,A,M,A,C,U,C,W,G,C,C,A,C,A,A,Q,C,E,C,C,C,A,C,E,E,A,C,E,C,C,M,A,E,E,C,C,A,C,C,C,E,C,C,C,E,A,A,C,G,C,C,A,A,A,C,E,C,C,C,I,C,oC,C,G,E,C,C,A,G,E,G,A,C,G,I,E,O,G,I,E,E,C,A,A,G,E,E,E,A,E,E,E,I,A,K,C,sC,C,A,C,A,E,E,E,G,E,C,C,A,G,C,A,C,C,C,C,G,C,G,E,E,C,E,C,A,C,C,S,E,O,E,G,C,E,G,C,C,G,C,A,C,C,S,E,O,E,G,S,G,E,E,G,K,I,A,C,C,E,E,G,O,I,A,C,A,I,E,C,K,E,O,I,E,C,C,C,A,E,C,C,E,A,G,E,E,C,C,E,A,C,C,G,C,U,C,C,C,W,C,C,C,C,E,E,G,A,A,G,E,G,A,C,A,C,A,M,A,K,C,gD,C,C,A,I,C,C,M,C,M,C,O,K,E,I,G,I,I,E,G,C,C,C,E,E,O,A,E,G,C,C,E,C,E,C,E,C,E,C,a,C,E,M,C,A,G,A,C,C,A,A,C,C,C,E,E,C,I,C,A,G,C,C,E,A,Q,E,O,E,C,K,A,K,C,8C,C,O,G,A,C,C,K,G,A,G,A,E,C,A,C,C,E,C,A,C,A,A,G,A,C,C,C,C,E,C,U,C,A,G,A,C,C,A,C,G,C,G,C,A,C,C,O,C,C,E,A,C,I,C,A,G,A,A,E,C,A,C,C,C,E,E,C,E,C,A,G,A,C,C,A,C,A,E,C,E,E,C,A,C,C,E,C,E,C,C,A,E,C,E,C,E,C,A,G,A,C,C,A,C,C,C,C,C,E,E,C,A,C,C,E,C,E,C,C,A,C,C,C,C,C,C,E,E,C,A,C,C,E,C,E,C,C,A,C,C,C,C,C,C,E,E,C,A,C,C,E,C,E,C,C,A,C,C,C,C,C,C,E,E,C,A,C,C,E,C,G,C,A,C,C,A,C,C,C,C,E,E,C,A,C,C,E,C,E,C,C,A,C,C,C,C,C,E,C,C,C,E,C,A,E,C,C,C,A,G,A,C,C,A,C,C,C,G,C,C,E,C,E,C,C,A,C,C,C,C,G,C,C,E,C,E,C,C,A,C,C,C,C,G,C,C,E,C,E,C,C,A,C,C,C,C,E,C,A,G,A,C,C,A,E,C,C,C,E,C,C,C,I,A,C,A,E,C,A,C,A,G,C,C,E,C,C,C,C,A,A,E,C,C,C,A,C,C,A,C,C,A,O,C,A,G,A,C,C,A,A,C,C,C,A,C,C,e,A,E,E,C,E,C,C,C,A,C,C,A,e,A,E,E,C,E,E,C,C,K,C,C,E,G,A,C,E,E,A,G,E,C,A,A,G,C,E,K,G,C,E,C,E,G,C,E,E,G,G,C,E,G,E,C,A,A,K,C,4B,C,E,Y,E,C,E,G,G,C,C,A,I,E,I,A,U,C,G,E,A,C,C,C,C,A,E,E,C,A,C,A,A,C,A,C,A,I,E,C,E,G,G,C,C,A,E,C,C,A,C,E,C,C,A,G,G,G,E,G,G,A,K,C,4B,C,E,G,W,C,E,G,G,C,C,A,I,E,E,C,C,A,C,A,C,C,e,A,E,G,C,C,C,A,C,C,A,e,A,E,G,E,C,A,C,G,E,E,C,C,A,E,A,C,C,A,A,C,G,C,C,C,O,C,A,G,G,C,E,A,K,C,kD,E,O,C,C,C,G,C,O,C,A,G,A,C,C,A,C,C,G,A,C,G,C,C,A,C,C,C,C,C,E,C,C,A,C,A,A,C,A,C,A,C,A,C,A,C,C,A,O,M,C,M,C,C,C,A,C,A,A,S,E,C,E,G,Q,E,C,M,E,M,A,E,G,C,4B,C,C,A,O,I,C,I,C,A,E,O,C,A,C,C,C,C,M,C,A,C,C,A,C,A,A,S,E,C,E,I,E,E,E,C,A,O,A,C,C,A,I,A,C,A,I,C,E,C,C,A,C,A,C,8F,E,Q,C,E,E,K,K,C,E,O,A,C,C,C,C,C,I,C,C,C,E,E,G,U,A,E,C,C,E,C,E,G,C,A,A,C,E,A,C,A,C,C,C,C,C,A,O,E,G,C,A,C,C,C,C,E,C,C,A,C,U,C,C,C,Q,C,C,C,C,C,C,C,C,A,C,A,C,E,a,C,E,O,A,C,C,C,C,C,C,C,A,E,I,A,E,C,C,E,A,C,C,A,G,C,C,A,E,A,E,G,C,C,A,K,E,A,G,A,E,A,G,A,C,C,A,A,G,C,E,A,E,A,G,C,E,C,C,A,E,A,G,C,E,A,E,A,G,C,E,C,C,A,E,C,C,C,K,E,C,A,E,E,E,C,C,A,E,E,C,C,I,I,E,G,C,C,A,A,C,A,C,E,S,C,E,O,A,C,C,C,A,C,C,C,C,E,A,E,E,C,C,C,A,C,C,E,G,E,C,A,C,A,C,C,E,G,A,C,E,C,A,E,E,G,E,C,C,A,G,I,E,C,I,C,A,K,C,qD,C,C,A,I,E,C,C,A,I,C,A,E,C,E,A,E,M,A,E,M,C,I,E,C,A,C,A,A,C,A,C,A,E,C,A,C,C,C,C,C,C,A,C,C,C,C,A,C,C,E,C,C,A,C,C,C,C,C,C,G,C,C,A,I,C,C,C,C,C,E,O,A,E,G,E,A,K,A,A,C,A,C,K,C,G,C,A,C,A,C,I,C,G,C,C,A,C,C,E,C,C,I,C,C,E,I,A,E,C,C,A,A,G,E,E,C,C,C,C,A,C,C,A,C,G,C,C,E,C,E,C,C,C,A,E,E,C,A,E,I,C,A,A,G,C,C,C,C,I,C,C,C,C,C,C,E,C,E,C,C,A,A,I,E,G,G,C,A,C,C,C,C,C,C,A,M,C,C,C,C,A,G,C,A,C,A,C,C,C,C,C,A,E,C,E,C,C,C,C,C,C,C,A,C,A,A,I,E,E,A,E,C,C,A,I,C,C,E,K,C,C,C,C,E,E,A,C,C,A,C,C,C,E,C,A,C,C,E,A,E,C,C,C,C,C,C,C,C,A,E,E,A,E,C,C,G,C,C,C,A,C,C,C,C,C,E,C,G,C,A,C,C,C,C,C,I,I,C,C,C,C,C,C,E,C,E,C,E,C,C,A,C,K,E,A,C,A,A,O,C,C,C,A,C,C,mB,C,E,O,A,C,C,C,C,C,C,C,E,E,E,A,E,G,C,A,A,C,C,A,A,E,E,C,C,C,A,C,G,E,C,C,A,E,E,C,A,E,C,E,E,C,C,A,A,C,C,I,A,A,C,I,C,E,I,A,C,G,E,C,C,C,E,A,A,C,C,C,I,A,E,G,E,E,E,C,A,C,A,A,A,A,C,A,E,C,C,G,E,C,C,C,A,I,I,C,C,C,C,E,C,A,C,C,C,E,C,E,C,A,C,C,C,A,G,C,G,A,C,C,A,C,C,C,E,C,C,C,C,A,O,C,C,C,A,C,A,A,O,A,I,G,A,E,A,E,A,G,E,A,C,C,C,E,C,C,E,A,I,E,C,M,A,K,C,uD,C,C,A,I,E,C,C,E,C,C,I,C,C,C,C,C,C,E,C,E,C,A,C,A,G,G,C,E,E,E,I,C,C,C,C,C,C,E,C,E,C,E,C,C,A,C,K,E,C,A,I,E,K,C,C,E,E,C,C,A,E,C,C,A,E,C,I,G,C,A,C,A,C,C,C,C,C,E,K,C,C,C,E,C,C,A,I,E,E,I,C,A,C,A,C,C,C,C,C,E,G,C,C,A,C,A,C,A,E,A,C,C,C,E,C,C,C,C,A,C,A,C,E,C,C,C,C,A,C,A,A,C,A,O,C,C,A,C,A,A,C,A,E,K,Q,C,E,O,A,C,E,I,E,C,E,C,C,a,A,E,E,E,C,A,C,A,C,E,E,c,A,E,E,C,C,C,A,Q,C,C,C,Q,C,E,C,O,C,E,C,O,C,C,C,U,C,e,C,W,C,e,C,C,C,A,M,C,M,C,C,G,C,E,E,O,A,E,E,C,C,C,C,G,O,C,C,G,C,C,G,C,C,C,E,E,C,A,K,C,C,C,A,C,A,C,E,kB,C,E,O,A,C,C,C,C,E,C,C,C,C,E,A,M,E,I,G,E,C,A,G,S,C,C,C,A,C,A,G,E,M,E,O,E,G,G,A,K,C,C,e,E,E,E,W,C,C,C,A,I,I,C,G,C,G,C,G,C,G,C,C,C,A,I,E,C,A,C,C,C,C,A,G,C,A,C,Q,S,G,A,E,C,A,C,C,A,M,A,K,C,C,M,E,C,C,wB,C,C,A,C,A,A,I,E,A,E,E,C,C,C,C,E,C,A,G,C,C,A,C,C,A,C,C,C,C,C,C,E,C,A,G,C,E,C,A,C,G,C,G,C,A,I,C,C,C,C,C,C,G,C,a,C,C,C,E,E,C,C,A,C,E,C,A,C,A,G,C,E,A,O,C,C,C,C,C,C,C,M,A,K,C,C,M,E,C,C,wC,C,C,C,A,M,C,K,C,E,G,G,C,M,C,M,C,M,C,C,C,C,K,C,C,A,C,C,G,C,C,A,A,C,A,C,I,E,E,C,C,Q,E,E,C,C,Q,E,C,K,C,C,C,C,A,E,C,K,C,C,C,C,A,S,E,C,C,C,E,C,G,E,C,C,E,I,E,C,A,O,E,E,C,A,C,A,A,C,C,C,A,C,C,I,E,C,C,C,E,E,C,C,M,C,a,C,C,C,E,C,E,C,E,C,C,E,E,I,A,K,C,oC,C,E,E,S,C,C,C,A,C,A,A,S,E,C,C,C,E,E,A,C,C,G,E,E,E,C,C,C,C,C,A,I,C,E,C,C,C,C,C,A,C,C,C,A,G,C,A,E,C,A,C,A,C,C,A,C,E,C,C,A,C,C,I,K,I,O,A,M,E,I,C,C,E,A,E,O,A,E,C,C,C,C,S,E,O,A,C,M,C,C,C,A,C,A,A,A,C,A,A,A,Q,C,E,C,C,C,C,C,E,E,C,C,Y,M,C,C,W,S,C,C,C,E,E,C,C,C,G,C,C,C,G,C,C,A,C,A,C,C,A,E,E,G,A,C,A,C,E,E,A,C,E,A,C,A,C,C,A,C,A,C,A,C,C,E,E,E,E,A,E,C,C,A,C,C,A,C,A,G,C,A,G,C,C,A,A,C,A,C,C,C,C,C,A,E,G,G,C,K,O,G,M,A,G,E,G,C,C,C,E,C,C,A,C,A,K,C,E,C,E,C,A,C,A,C,M,C,C,C,A,C,A,A,Q,C,A,C,C,C,A,C,C,E,G,C,I,C,C,A,O,C,A,G,G,C,E,A,K,C,gB,C,C,A,E,I,G,C,C,C,C,C,E,E,A,G,C,C,C,a,C,C,A,M,A,K,C,yB,C,C,C,A,C,A,C,A,C,A,A,S,E,C,C,C,E,G,C,K,C,C,M,C,G,I,C,C,A,K,C,2B,C,C,A,E,K,E,C,C,C,C,C,E,E,A,G,C,E,G,I,C,C,C,C,M,A,K,C,0B,C,C,C,A,C,A,C,A,C,A,A,I,E,I,O,C,C,C,A,A,I,O,C,C,C,A,O,E,C,C,C,O,E,G,C,C,C,E,C,A,C,A,A,I,K,E,C,E,E,C,C,G,E,C,K,A,K,C,c,C,A,C,A,A,S,E,C,C,C,C,C,E,E,E,E,G,E,C,A,C,E,E,K,A,E,E,G,G,C,C,C,C,A,A,G,E,G,E,G,E,G,G,A,K,C,gD,C,C,A,M,C,E,E,a,A,E,G,C,C,A,A,C,C,A,C,C,E,C,E,I,A,C,G,Q,C,C,C,C,C,I,C,I,C,E,G,C,C,A,I,C,I,C,E,G,C,C,A,I,C,E,C,E,E,C,A,A,I,C,I,C,C,C,A,E,C,U,C,C,C,C,C,E,I,C,I,C,C,I,C,C,E,C,C,G,C,C,G,A,C,A,C,A,G,C,C,C,C,C,G,C,E,C,C,A,C,C,C,C,M,E,C,A,C,G,E,C,C,K,C,A,C,A,A,gB,C,C,C,C,C,C,G,S,C,Y,C,C,C,E,C,C,I,C,A,I,C,C,A,E,E,C,A,C,A,C,E,E,C,A,C,A,A,A,I,I,E,C,C,E,A,E,E,E,C,A,A,C,C,C,A,C,A,A,E,I,A,C,G,C,C,C,C,I,C,C,C,C,C,C,E,C,E,C,A,C,C,E,A,A,E,C,C,C,C,C,A,E,I,A,C,G,C,A,C,A,C,C,E,I,E,A,C,A,A,O,C,C,A,I,A,C,A,C,C,C,C,C,C,C,G,C,I,C,E,C,O,C,C,C,C,M,A,K,C,gB,C,C,A,I,C,C,I,C,I,C,A,C,C,I,C,I,C,A,E,A,E,C,C,I,C,A,I,C,C,A,I,I,E,C,C,E,A,E,A,E,K,C,I,C,A,C,E,A,C,O,Q,C,C,Q,O,C,Q,C,S,C,C,C,E,C,C,E,E,C,A,C,A,A,C,A,E,E,C,A,C,A,C,C,A,E,C,A,C,E,E,C,C,E,A,A,C,C,C,A,C,C,A,C,C,G,C,E,E,C,C,C,C,A,C,C,A,C,A,A,C,M,E,C,C,C,A,C,C,A,K,C,C,A,C,A,A,U,C,C,C,C,C,C,C,E,I,C,I,C,C,I,E,A,E,C,C,I,C,A,I,C,C,A,I,I,E,C,C,A,E,A,E,A,E,K,E,C,G,E,C,E,C,C,A,C,E,A,C,C,K,C,Q,C,Q,C,G,I,C,C,C,E,C,C,E,E,C,A,C,A,C,C,C,C,G,E,A,C,A,A,G,C,C,C,A,C,C,A,E,C,A,E,C,A,C,C,E,C,E,E,C,C,A,C,G,E,C,A,C,C,C,A,C,A,A,C,C,C,I,E,C,C,C,A,C,C,A,A,C,C,Y,C,C,C,C,C,C,C,C,I,E,E,A,C,E,C,G,E,C,C,G,A,I,A,E,A,C,C,E,C,gB,C,E,C,C,C,A,A,C,E,C,A,C,G,U,E,O,I,E,E,A,C,C,C,C,A,E,C,E,C,E,G,C,C,A,C,A,C,A,C,C,C,G,C,C,C,C,C,C,C,C,I,C,C,E,E,C,E,C,C,G,I,C,I,C,C,C,I,C,c,C,C,C,E,G,A,E,C,A,G,A,C,A,C,C,C,C,C,C,C,C,C,C,C,C,I,C,C,E,E,G,C,C,G,A,C,E,C,C,C,I,C,a,C,E,E,C,E,C,A,C,C,C,A,C,U,C,C,C,I,C,Y,E,C,C,C,E,G,A,E,E,C,A,C,A,A,C,A,C,Q,C,C,C,C,C,C,E,C,C,I,C,A,I,C,C,A,E,G,C,C,C,C,C,C,A,E,G,G,C,C,C,A,C,A,A,I,I,C,C,C,C,O,C,C,E,E,E,A,C,A,C,A,sG,E,gB,C,E,E,a,C,C,E,E,W,C,C,E,E,S,K,C,E,E,W,Q,C,E,O,A,C,C,C,E,C,E,E,G,M,I,A,E,E,C,A,C,E,G,C,G,C,G,C,C,C,E,E,C,A,C,E,A,O,C,C,C,E,C,E,A,O,C,C,C,E,C,E,A,O,C,C,C,C,M,A,K,C,mC,C,C,A,I,E,E,E,A,C,C,C,A,A,G,C,E,A,C,I,C,M,A,K,C,8B,C,C,A,O,A,C,E,E,G,E,C,C,C,C,C,C,C,C,C,C,C,A,C,C,C,A,E,C,C,A,G,C,C,C,C,A,C,C,C,C,A,G,C,E,C,A,C,C,A,C,C,C,C,A,A,G,C,G,A,C,C,A,C,A,C,A,G,C,E,A,C,E,A,C,C,A,C,A,C,A,G,C,A,E,C,C,A,G,C,C,A,C,C,C,C,A,G,C,A,E,C,A,C,C,A,C,C,C,C,A,I,A,C,C,C,E,A,G,C,G,A,C,A,A,E,A,G,C,E,C,C,A,I,C,C,C,A,C,C,C,C,A,G,C,E,C,A,C,C,A,C,C,C,C,A,G,C,G,A,C,C,A,C,A,C,A,G,C,E,C,A,C,C,A,A,C,A,C,A,G,C,E,A,C,A,C,C,A,C,C,C,C,A,G,C,A,E,C,E,A,C,C,A,C,A,C,A,G,C,A,E,C,E,A,C,C,A,C,A,C,A,G,C,E,C,C,C,A,C,C,A,C,A,C,A,G,C,E,C,A,C,A,C,A,C,C,C,C,A,G,C,E,C,C,C,A,C,A,C,A,C,C,A,G,C,A,E,C,E,A,C,C,C,A,S,A,C,O,C,C,C,E,A,E,C,E,A,C,A,C,A,A,C,C,A,G,C,E,C,A,C,C,A,C,A,C,E,A,G,C,C,C,G,C,C,A,C,C,A,A,C,G,C,C,C,E,C,E,C,C,E,A,A,C,C,C,C,A,C,A,C,A,C,E,G,A,I,A,C,C,A,A,C,C,A,K,C,C,C,G,E,A,K,C,C,C,C,A,C,A,A,C,E,A,I,C,E,A,G,C,C,A,C,C,C,C,E,C,A,C,C,E,E,C,E,A,E,A,a,A,E,E,A,C,C,C,C,C,E,C,C,A,C,C,A,M,C,C,C,C,C,E,A,G,C,C,C,K,C,C,A,A,C,A,A,A,C,A,A,C,A,E,I,C,E,E,C,I,C,E,C,C,E,e,C,E,O,A,C,E,G,C,I,G,G,Q,C,C,C,E,C,C,C,I,C,C,C,C,C,C,E,C,C,A,C,C,C,A,G,C,C,C,C,C,A,C,G,C,C,C,E,E,C,C,A,E,A,C,C,C,C,C,C,C,C,C,A,I,C,E,M,C,M,C,C,C,C,C,K,C,C,C,K,C,E,G,Y,C,E,G,mB,C,A,G,A,C,C,A,E,A,G,A,C,M,Y,G,kB,C,S,A,C,E,M,G,E,I,G,A,E,E,C,C,C,C,A,K,C,A,C,A,C,C,A,C,A,C,E,kB,C,E,E,W,C,E,C,M,A,C,E,E,C,C,I,G,W,C,M,C,W,C,C,C,A,S,A,C,E,G,C,O,E,S,A,C,C,C,E,C,C,C,A,E,C,I,C,C,A,C,I,C,W,A,C,C,C,W,C,I,C,C,C,I,C,Q,C,C,C,Q,C,a,C,C,C,a,C,C,A,M,O,K,O,E,I,C,C,C,A,I,W,C,C,A,C,A,C,C,C,C,A,E,A,E,C,C,C,C,A,G,A,E,A,E,C,A,C,C,A,A,C,C,C,C,C,A,C,A,A,C,A,C,A,O,M,C,M,C,C,C,E,C,C,I,W,C,E,G,E,C,M,C,M,C,C,C,C,C,A,C,A,C,E,E,O,A,E,E,E,C,A,K,C,E,E,C,A,I,C,C,C,C,A,C,A,C,I,E,E,C,C,Q,C,C,E,C,C,O,C,E,E,C,C,Q,E,E,C,C,Q,E,E,C,C,Q,E,C,E,C,E,C,C,A,A,E,A,C,E,C,C,C,A,C,C,C,A,C,A,C,A,C,A,C,C,C,A,E,C,C,O,E,C,C,C,C,C,E,G,C,C,E,A,A,E,A,C,C,E,A,E,A,C,C,E,E,A,C,C,A,E,A,C,C,C,C,C,A,C,C,A,E,C,E,A,C,C,C,C,C,A,A,E,A,C,C,E,A,E,A,E,A,E,A,C,C,A,C,E,A,E,A,E,A,E,A,C,C,E,A,C,C,C,C,A,E,A,C,C,C,C,E,C,C,A,C,C,C,C,A,I,C,C,A,C,C,C,C,A,I,E,C,E,E,A,O,A,E,I,C,I,C,G,E,M,A,E,C,C,C,C,C,C,C,E,C,C,C,A,E,A,G,A,E,C,G,E,A,E,C,A,C,C,C,E,K,C,A,C,C,G,C,wC,C,C,C,C,A,M,O,E,E,C,Q,K,A,C,C,A,A,C,A,A,S,E,C,E,G,C,C,O,E,C,W,C,K,C,C,Q,C,G,G,C,E,A,K,C,2D,C,C,A,O,C,C,A,I,C,I,E,C,C,C,E,I,E,C,C,A,C,A,A,I,I,K,E,I,C,I,C,G,A,C,A,C,A,C,C,C,I,C,K,C,E,C,A,C,A,C,A,E,A,C,A,C,A,C,E,A,C,A,I,E,C,E,E,O,A,E,E,G,C,C,M,C,C,A,G,E,O,A,E,E,G,I,C,S,C,C,K,I,E,G,A,G,E,E,E,G,G,C,C,A,C,C,A,G,A,C,E,M,I,K,C,Y,C,C,E,C,C,K,C,C,C,A,C,A,C,A,E,M,C,E,E,G,A,C,C,G,C,E,I,A,C,C,M,C,C,E,C,G,C,C,E,A,C,G,C,C,C,C,E,G,C,A,G,E,C,A,E,E,C,E,C,M,I,C,C,uB,C,C,A,G,C,C,E,E,I,C,M,I,C,C,2B,C,C,A,I,E,E,E,C,G,C,C,C,A,E,C,A,E,E,mB,A,E,G,G,C,C,A,C,A,K,C,C,C,A,G,C,M,I,C,C,sC,C,C,A,I,E,E,E,C,C,A,C,A,A,E,E,mB,A,E,E,C,K,C,C,C,A,G,C,C,A,C,C,C,A,M,A,C,A,E,E,mB,A,E,G,A,C,C,A,E,C,A,C,A,C,C,C,I,C,C,C,C,E,G,C,G,C,C,C,C,E,G,C,A,E,C,A,C,A,G,E,C,A,E,E,C,E,C,M,I,C,C,uB,C,C,A,G,E,E,I,C,C,E,C,C,G,C,C,E,E,C,K,I,C,C,uB,C,C,A,I,E,C,C,C,E,C,C,A,A,E,C,C,A,E,C,C,C,C,C,A,C,C,A,C,A,C,C,E,E,G,C,A,A,E,G,A,C,E,I,E,I,C,C,8B,qB,C,C,A,G,E,C,C,E,I,I,C,C,0C,C,C,A,C,G,E,E,E,K,C,C,E,C,C,C,E,G,A,C,C,A,G,G,G,A,E,I,E,I,C,C,uC,C,C,A,G,C,G,C,C,C,C,C,M,I,C,C,sC,C,C,A,I,I,C,I,E,E,G,C,A,C,A,C,A,C,A,A,G,G,A,E,E,E,C,A,C,A,M,I,C,C,wC,C,A,C,A,K,E,E,E,C,C,A,C,C,E,E,M,C,E,C,C,C,E,G,A,C,A,C,A,M,G,E,I,E,I,C,C,gC,C,C,A,M,G,C,C,C,C,E,E,M,C,E,C,C,C,A,C,A,C,C,A,C,G,C,C,M,C,C,E,G,C,G,C,C,C,C,E,G,C,A,G,E,C,C,C,K,I,C,C,4C,C,C,A,I,E,C,A,E,E,mB,A,E,G,A,C,C,C,A,M,A,G,Q,C,C,C,C,C,C,E,C,G,E,C,G,C,C,C,C,A,C,C,E,C,K,C,M,I,C,C,gD,C,C,A,O,C,C,C,A,C,K,C,C,E,G,C,G,C,C,C,C,E,G,C,A,G,G,C,C,C,C,C,C,M,I,C,C,qC,C,C,A,G,I,A,C,C,C,C,E,C,C,A,K,C,C,C,A,C,C,A,M,I,C,C,qD,C,C,A,M,C,E,E,e,A,E,E,C,C,A,C,A,C,I,C,C,E,G,C,G,C,C,C,I,C,C,C,I,C,C,C,C,E,G,C,A,E,C,C,C,E,W,A,E,W,C,G,A,C,A,C,A,C,C,C,C,C,C,C,C,E,C,K,C,G,C,E,C,C,C,A,E,M,C,G,G,I,C,C,6C,C,C,A,G,C,C,C,C,C,C,C,C,C,C,E,C,K,C,E,E,C,C,C,C,C,C,A,C,A,C,A,C,C,C,E,C,K,C,E,E,C,G,E,E,C,C,E,C,C,K,I,C,C,6C,C,C,A,M,C,C,C,E,C,K,C,G,C,C,C,C,A,C,K,C,E,C,A,C,A,C,C,C,Q,C,C,E,G,C,I,C,C,C,I,C,C,C,C,E,G,C,A,E,A,E,C,K,C,E,E,A,C,K,C,E,C,A,C,C,C,A,E,A,E,C,K,C,E,E,A,C,K,C,E,C,A,C,C,C,A,O,E,C,K,C,G,C,C,A,C,C,A,C,A,C,A,C,A,A,C,G,E,C,K,C,C,C,C,E,C,K,C,C,C,C,E,C,K,C,C,C,C,E,C,K,C,C,C,C,E,C,K,C,C,C,C,A,S,E,C,C,C,E,I,E,C,A,A,C,I,C,C,C,C,E,A,C,E,Q,E,A,C,M,E,C,C,C,E,C,E,C,A,I,E,C,E,A,E,W,A,E,a,C,G,A,C,C,C,C,A,E,C,C,A,S,C,E,C,A,E,C,C,E,E,C,A,E,I,A,K,C,C,2C,E,E,M,E,O,E,C,A,C,A,C,A,A,C,A,G,C,E,A,W,C,G,A,C,K,A,K,C,4C,C,C,A,O,C,C,A,C,C,O,E,C,C,E,C,C,E,E,E,E,C,E,E,E,gB,A,E,a,C,E,G,C,G,C,C,C,C,C,C,C,C,E,E,E,C,E,C,C,C,A,C,A,C,C,C,C,C,C,C,C,C,E,C,E,A,C,C,e,A,E,E,C,C,C,C,G,e,C,S,C,a,C,U,C,a,C,U,C,S,C,U,C,O,C,U,C,I,C,Q,C,c,C,S,C,C,C,A,G,M,C,C,C,E,G,I,A,A,C,A,C,C,A,A,G,C,E,C,C,C,C,Q,E,O,E,E,E,E,C,K,C,O,C,E,E,M,C,C,C,C,I,A,K,C,4D,C,C,A,I,E,E,E,A,C,C,C,A,C,G,K,I,G,C,E,A,K,C,M,A,K,C,A,4D,C,A,C,A,A,I,E,E,O,A,A,E,E,O,A,C,C,C,C,C,A,C,C,G,E,C,C,C,G,C,C,E,G,K,E,C,A,E,A,E,A,O,C,C,C,C,A,G,C,E,E,O,A,E,E,U,I,C,C,C,E,M,C,E,C,C,W,A,E,U,C,E,C,G,C,C,A,A,E,A,O,C,C,C,C,A,C,A,C,I,I,E,C,E,A,G,E,C,C,C,C,A,M,A,C,C,C,A,E,W,A,E,E,G,E,A,A,C,A,A,C,A,C,A,C,C,E,A,C,M,A,E,E,E,O,A,C,E,C,E,C,C,A,M,E,A,E,E,G,I,E,K,C,C,A,G,C,S,C,C,C,qB,C,C,C,C,E,E,E,C,C,A,C,A,G,C,A,E,C,C,A,C,C,C,A,E,E,A,G,K,C,C,C,C,A,A,G,I,E,E,A,I,A,A,G,C,G,C,C,C,A,C,A,A,I,C,C,A,C,C,E,A,S,C,G,C,C,C,A,C,E,A,O,C,C,C,C,M,A,K,C,qC,C,C,A,I,E,A,E,C,C,C,A,C,E,C,A,C,C,E,A,I,C,C,C,A,C,A,A,C,C,E,E,E,C,A,M,A,A,K,C,A,wC,E,C,G,C,C,G,I,K,C,A,C,G,C,E,O,A,C,A,C,C,C,C,A,C,A,O,I,C,C,C,A,I,A,C,C,A,C,C,E,A,C,I,C,C,A,C,C,C,C,A,C,C,A,C,A,C,A,G,C,E,C,C,A,G,C,G,C,A,C,A,C,A,A,G,I,E,C,G,C,A,E,C,A,C,G,C,C,E,A,K,C,A,C,C,E,A,S,C,E,E,M,C,C,C,C,C,C,C,A,C,C,E,A,S,C,E,E,M,C,C,C,C,C,A,C,A,C,E,G,C,E,C,C,C,C,C,E,I,A,K,C,4B,C,C,A,M,G,C,G,C,C,A,C,A,A,M,A,A,C,I,C,C,sB,E,E,I,kB,E,E,E,e,E,E,C,C,A,C,A,C,A,S,E,C,E,I,E,A,E,A,G,C,C,C,A,C,A,C,C,A,E,A,G,C,C,C,A,C,C,C,A,C,M,E,A,C,E,C,E,A,G,C,E,A,E,A,G,C,C,C,E,C,C,C,A,C,E,C,C,A,C,A,A,A,C,Q,E,C,C,C,E,E,A,E,E,E,A,A,G,C,C,C,C,A,C,C,E,C,A,C,A,C,A,C,M,E,A,G,C,C,C,A,E,A,C,A,E,C,A,C,A,E,E,E,C,A,E,A,E,C,A,C,M,A,K,C,mC,C,C,A,I,E,E,A,A,G,C,E,A,G,C,E,C,C,C,E,A,C,E,A,C,C,A,E,A,C,E,C,E,A,G,C,E,C,C,C,A,M,C,E,C,C,C,A,G,E,A,G,C,E,A,G,C,E,E,E,C,C,C,G,A,K,C,0B,C,C,A,S,E,C,C,C,C,A,G,C,E,C,E,C,E,A,O,C,C,C,E,G,E,A,E,C,C,C,C,C,A,M,A,K,C,C,qB,E,E,C,C,C,A,A,O,C,A,C,A,A,S,E,C,E,G,C,A,C,K,Q,C,C,C,A,M,A,K,C,0B,C,A,C,A,A,S,E,C,E,G,C,G,C,A,E,C,C,K,C,M,A,K,C,S,C,C,A,O,E,C,C,E,E,K,C,E,A,A,K,C,A,C,A,A,I,E,C,E,E,K,G,A,E,C,C,C,E,E,C,C,E,G,C,G,C,C,G,C,C,C,C,A,G,E,A,G,C,C,C,E,A,G,C,C,M,C,C,C,C,C,C,C,C,C,C,A,I,E,C,A,C,G,E,A,C,G,G,E,E,E,A,E,C,C,A,A,C,E,C,A,C,C,A,G,C,E,C,C,A,I,C,C,E,A,G,C,C,C,E,C,A,C,A,C,E,A,G,C,C,C,E,C,A,C,C,A,E,A,G,C,C,C,E,C,A,C,E,E,C,K,C,C,C,E,A,I,C,C,C,E,A,I,C,C,A,G,C,E,A,G,C,E,A,E,A,G,C,C,M,A,K,C,kB,C,C,A,M,G,C,G,C,C,A,C,A,C,C,A,E,C,E,E,Q,A,A,E,A,C,E,C,C,E,C,C,G,E,C,C,A,G,E,O,W,E,C,E,A,G,C,C,C,C,C,C,M,C,M,A,K,C,iB,C,A,C,A,A,G,G,C,G,C,C,C,C,C,Q,E,C,A,G,C,E,A,O,C,C,C,E,C,E,A,O,C,C,C,C,M,A,K,C,sC,C,C,A,G,C,E,C,C,C,C,C,E,I,A,K,C,mC,C,C,A,G,C,C,C,a,E,C,M,A,K,C,wC,C,C,A,O,C,C,C,C,A,A,C,Q,E,C,C,C,C,C,C,C,C,A,C,E,O,E,C,G,E,E,A,C,E,C,E,C,A,C,G,E,C,A,C,C,C,A,C,A,C,C,A,E,C,A,E,E,Q,A,E,E,G,A,A,C,C,A,C,A,E,E,Q,A,E,E,G,A,A,C,C,A,C,E,C,E,C,A,A,C,C,I,E,G,S,C,C,C,C,C,C,C,I,C,C,C,E,G,C,A,C,C,C,A,I,C,C,C,E,G,C,A,C,E,G,C,C,C,C,C,C,C,E,G,C,A,C,C,C,A,M,C,M,C,I,C,A,C,A,A,M,C,K,E,C,O,C,C,A,G,C,E,C,U,C,C,C,C,G,G,C,G,C,C,C,C,E,C,C,C,A,G,C,C,E,C,E,A,O,C,C,C,E,C,E,A,O,C,C,C,C,M,A,K,C,sB,C,C,A,G,C,Y,E,G,G,A,K,C,8B,C,C,O,A,E,A,G,C,C,C,E,E,A,G,C,C,C,C,C,C,G,C,C,A,I,E,C,C,C,A,C,E,A,G,C,A,C,A,A,M,C,S,C,C,C,C,I,C,C,E,G,O,C,E,C,E,E,I,I,A,E,K,E,E,O,A,C,C,C,C,A,O,C,C,c,E,C,A,C,A,C,A,A,M,C,O,C,C,C,C,O,E,G,M,C,C,E,E,W,A,E,U,C,G,A,C,A,A,C,C,E,C,E,C,O,I,C,Q,E,C,C,A,C,A,A,I,C,E,C,O,I,C,Q,E,C,C,A,C,A,A,U,C,E,C,C,G,C,C,C,A,O,E,E,S,C,I,C,G,A,G,G,C,A,C,A,C,O,C,G,A,C,C,C,C,A,C,A,A,c,A,E,C,E,I,C,A,C,A,A,O,C,E,C,G,G,C,C,C,I,C,Q,E,C,A,G,C,E,A,K,C,M,A,K,C,6B,C,C,A,M,C,E,A,K,C,C,C,A,C,A,A,M,C,C,C,C,E,G,E,C,A,C,A,A,C,C,C,C,C,C,C,C,C,C,C,C,C,I,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,C,E,E,A,C,C,A,A,G,C,E,A,G,C,E,A,E,C,A,E,A,G,C,E,A,E,C,C,A,C,C,A,E,A,G,C,E,A,G,C,E,A,E,C,A,E,A,G,C,E,A,E,C,C,A,C,M,E,C,C,C,A,A,C,K,E,C,O,I,E,G,C,C,C,C,E,A,G,C,I,C,C,C,C,I,C,C,C,A,C,A,A,M,E,C,G,C,C,C,C,C,C,E,E,A,C,C,A,A,G,C,C,C,G,A,C,A,C,A,C,C,C,C,C,C,C,C,C,C,C,C,I,C,A,E,A,E,A,I,C,E,A,E,A,I,C,E,A,E,A,I,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,A,E,A,E,C,C,E,A,C,C,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,M,E,A,E,A,G,C,E,A,E,C,A,C,C,A,A,E,A,G,C,E,A,C,C,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,C,C,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,A,E,A,G,C,E,A,E,A,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,A,E,A,G,C,C,C,E,A,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,C,C,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,A,E,A,G,C,E,A,E,A,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,A,E,A,G,C,E,A,E,A,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,E,E,E,A,C,C,A,E,A,A,A,E,A,A,C,C,C,C,E,A,E,C,A,C,A,A,G,C,C,C,C,E,G,E,C,A,C,A,A,C,C,C,C,C,C,C,C,C,C,C,C,C,I,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,C,E,E,A,C,C,A,A,I,C,E,A,E,A,I,C,E,A,E,A,I,C,A,C,A,C,E,C,C,A,C,C,A,E,A,G,C,E,C,C,C,A,E,A,C,C,A,A,E,A,G,C,E,A,E,C,A,C,C,A,A,E,A,G,C,E,A,C,C,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,A,E,A,G,C,E,A,C,C,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,G,E,A,E,A,G,C,E,A,E,C,A,C,C,K,E,A,E,A,C,E,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,A,E,A,G,C,E,A,E,A,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,C,C,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,A,E,A,G,C,E,A,E,A,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,A,E,A,G,C,E,A,E,A,C,A,C,C,A,E,A,G,C,C,C,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,A,E,A,G,C,C,C,E,A,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,A,E,A,G,C,E,A,E,A,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,C,A,E,A,G,C,E,A,E,C,A,C,G,E,E,A,C,C,A,E,A,A,E,A,A,C,C,C,C,E,A,E,C,A,C,A,A,C,O,C,C,C,A,C,O,I,C,G,C,E,G,G,E,C,A,C,A,A,G,E,C,O,I,C,M,C,E,G,C,C,A,C,A,A,Q,C,C,C,C,I,E,E,C,C,C,C,E,C,C,C,E,G,C,E,A,C,C,S,C,G,G,C,E,A,K,C,A,8B,C,C,A,C,G,E,A,C,A,E,A,C,C,E,G,C,C,I,C,C,C,A,C,E,A,C,E,E,U,A,E,E,C,C,C,A,C,A,G,E,C,A,C,E,C,O,C,I,O,C,I,C,C,C,E,G,C,C,C,A,C,A,C,A,C,C,C,C,C,C,C,C,C,C,A,C,A,C,C,C,C,C,C,C,C,C,E,C,C,C,A,C,C,E,A,C,E,C,G,A,C,C,A,E,C,C,E,E,C,C,C,C,C,C,C,E,C,A,E,C,C,A,C,A,G,G,C,G,C,C,C,E,C,E,E,C,A,C,A,A,C,A,C,C,A,C,A,A,A,M,C,E,E,U,A,E,E,C,E,A,E,C,A,C,A,C,C,A,C,A,A,c,C,C,C,C,G,M,C,C,C,E,G,C,E,A,C,C,K,C,E,C,A,M,A,K,C,8B,C,C,A,C,E,E,E,G,A,C,G,C,G,E,C,O,E,G,C,C,A,G,E,E,E,C,M,C,C,C,E,G,E,E,G,G,C,I,C,C,O,I,C,Q,C,E,C,A,C,G,E,E,K,E,E,I,C,C,I,E,A,C,A,C,A,G,O,C,I,C,O,C,I,C,C,C,E,E,C,A,C,G,C,I,C,C,A,C,C,E,E,a,A,E,E,G,C,C,A,A,C,C,A,E,C,A,C,C,K,E,E,E,E,C,C,C,A,E,A,E,E,C,A,A,C,A,C,C,C,C,C,C,c,C,C,C,C,C,C,C,C,I,E,C,G,C,c,C,C,C,C,G,C,C,C,c,C,C,C,C,C,A,O,E,C,E,E,C,A,C,M,C,C,A,A,C,A,C,A,M,C,C,C,C,O,E,I,C,E,C,A,E,I,C,C,K,E,C,G,e,C,C,C,S,A,A,C,G,G,C,A,C,C,E,E,E,C,C,C,C,A,A,C,A,C,C,A,C,I,C,I,C,G,G,E,C,A,C,A,C,C,W,E,C,G,C,e,C,C,S,A,A,C,G,E,C,C,C,C,C,A,C,C,E,E,G,C,C,C,A,C,A,E,A,C,C,c,C,E,C,A,K,C,C,K,E,C,O,I,C,c,C,G,G,E,A,A,C,A,A,A,O,C,E,E,C,C,M,A,C,E,E,O,A,E,E,U,I,C,C,A,I,C,c,E,C,A,E,E,G,C,C,E,A,C,A,K,C,G,A,C,A,C,A,C,M,A,C,E,E,U,A,E,I,C,O,C,G,C,A,Q,A,C,C,A,C,A,M,C,O,E,I,C,G,E,C,A,C,K,C,A,C,G,C,K,E,C,C,C,A,C,A,A,I,E,E,C,O,I,C,C,A,C,A,A,I,E,E,C,O,I,C,C,A,C,A,A,I,E,E,C,O,I,C,C,A,C,A,A,U,C,E,E,C,C,M,C,I,C,O,C,E,C,A,S,C,C,G,C,C,C,C,I,C,U,C,E,C,A,M,C,A,C,C,Q,C,C,C,C,M,C,E,E,U,A,E,E,E,C,A,A,G,C,C,C,C,G,C,C,C,C,C,C,M,C,E,E,S,A,E,E,E,A,C,C,E,C,A,C,G,C,C,A,C,c,C,C,C,C,O,E,G,C,C,Q,C,E,E,A,G,C,C,E,G,A,C,A,C,A,C,G,E,E,C,C,C,A,E,E,C,A,E,A,G,C,C,A,E,I,C,I,E,E,A,C,G,C,E,A,G,C,E,A,I,C,C,A,C,C,E,C,E,A,C,C,E,A,C,E,A,C,G,E,E,A,A,I,C,A,E,E,E,E,I,C,E,E,C,G,C,A,C,C,E,C,I,C,E,C,C,A,C,A,C,E,C,C,C,I,E,G,C,C,U,C,C,C,C,A,C,A,C,A,G,C,K,E,C,E,E,K,U,C,E,C,E,E,E,A,C,A,A,C,A,A,C,A,C,A,M,E,C,C,C,E,I,C,C,C,C,A,G,E,C,A,C,C,E,C,C,E,I,C,C,C,C,E,C,A,C,G,C,E,C,A,E,E,C,A,E,E,C,C,E,E,A,C,C,A,C,C,G,A,E,A,E,C,C,C,A,C,A,C,C,E,C,C,A,A,C,C,A,C,C,C,C,A,A,E,E,A,C,E,A,C,C,C,A,A,C,C,A,C,C,A,A,C,C,E,C,C,A,A,C,C,A,E,C,C,C,C,E,C,A,C,C,A,A,E,A,A,G,C,C,C,C,E,A,C,C,C,A,C,E,A,C,C,A,C,A,C,C,C,E,C,C,A,C,G,E,C,C,A,C,C,A,A,C,C,A,G,C,A,C,C,E,A,C,A,C,C,A,C,A,C,A,G,C,G,A,C,C,A,C,A,C,A,G,A,C,E,C,A,C,C,A,C,G,E,C,A,C,A,G,C,C,C,G,A,C,C,A,C,A,A,C,A,G,C,E,C,C,C,A,C,C,A,C,C,A,G,C,C,C,C,E,A,C,C,A,C,A,C,A,G,A,C,E,C,A,C,C,A,C,C,C,C,A,G,C,E,C,A,A,C,C,A,C,G,E,C,A,C,A,G,C,E,C,E,A,C,C,A,C,A,A,C,A,G,C,E,C,E,A,E,C,C,A,C,C,E,A,A,C,C,C,A,C,A,E,C,C,A,G,C,C,A,C,C,C,A,C,A,G,C,E,C,C,C,A,C,C,A,C,C,A,G,C,E,A,C,E,A,C,C,A,C,A,C,A,I,C,C,C,C,C,C,E,C,C,A,C,A,C,A,A,G,C,C,A,E,C,C,C,E,C,C,C,C,A,I,C,C,E,A,C,C,E,C,A,E,C,C,A,A,I,E,C,A,C,E,C,C,A,C,A,E,A,C,C,C,C,C,C,C,A,C,E,E,A,A,G,C,E,C,A,E,A,C,C,A,A,C,C,A,G,A,C,E,E,A,A,G,C,C,A,C,C,C,C,A,G,C,C,C,C,E,A,C,C,A,C,A,C,A,G,C,E,C,A,E,A,C,C,A,C,C,A,A,G,C,E,C,E,A,C,C,A,A,C,A,C,A,I,C,E,C,C,C,C,A,C,A,C,C,A,C,C,A,I,C,E,C,C,A,C,C,A,C,A,A,C,C,I,C,O,C,E,E,C,E,C,C,C,A,C,A,A,C,A,G,E,A,I,C,C,G,C,E,C,A,A,I,E,A,C,E,A,K,C,C,C,C,A,E,C,C,A,A,C,C,A,I,C,E,A,G,C,C,C,C,C,A,C,C,C,C,C,C,E,C,C,A,I,E,C,C,A,E,C,C,C,C,C,A,C,C,C,C,A,E,C,C,C,C,C,C,C,A,C,C,C,A,C,A,G,C,E,C,E,A,C,C,C,C,C,C,A,E,A,G,C,E,C,C,C,A,C,C,A,A,E,A,G,A,C,E,A,G,A,C,C,C,C,E,A,A,E,A,G,C,E,A,E,C,A,C,C,A,C,C,A,C,E,C,E,A,G,C,E,C,A,C,C,C,A,A,C,C,E,A,A,G,C,E,C,A,C,C,A,C,A,C,E,A,I,C,E,A,E,A,G,C,C,C,C,E,A,A,C,O,C,E,E,G,C,C,C,A,C,A,A,C,A,A,A,M,C,C,C,A,O,C,C,E,C,C,C,E,I,E,C,O,E,C,E,A,K,C,S,C,C,C,E,A,K,C,qB,C,C,C,C,C,E,A,K,C,kB,C,G,C,Q,C,C,C,E,A,K,C,A,C,A,A,S,E,C,C,A,E,C,C,E,G,I,C,C,C,E,E,C,C,A,M,E,G,E,E,W,C,A,E,K,C,C,M,C,E,E,E,C,A,E,C,A,C,A,I,C,C,E,E,gB,A,E,E,A,K,C,C,C,C,A,S,E,C,E,G,C,A,M,C,A,C,E,E,A,E,C,A,M,A,C,A,C,A,C,A,E,K,C,C,A,C,A,E,C,M,E,E,E,A,E,I,C,A,E,A,C,K,C,E,E,c,A,E,C,E,E,Q,A,E,E,E,A,I,C,A,M,C,C,E,A,K,C,A,C,A,A,S,E,C,C,G,C,E,E,I,C,E,G,C,C,Q,C,E,E,A,I,K,C,A,C,A,C,E,C,A,S,A,C,C,A,C,E,G,C,O,E,O,E,E,I,G,E,C,A,I,S,E,G,I,E,E,C,A,W,C,W,C,uB,C,C,C,E,G,E,A,A,C,a,E,I,E,G,I,A,A,I,C,C,C,E,A,C,C,W,A,E,K,C,G,C,C,I,C,A,O,C,G,G,C,G,C,C,A,A,O,M,C,K,C,A,C,C,Y,G,e,C,S,A,C,C,C,C,G,C,E,G,E,C,C,C,E,G,I,E,A,C,C,G,C,+B,C,C,A,I,I,C,C,G,I,E,A,C,C,G,C,+B,C,C,A,I,C,C,E,E,A,G,O,A,A,A,C,A,C,A,G,I,C,G,O,C,A,C,A,C,A,C,C,O,C,E,C,C,M,C,C,C,C,I,E,A,C,E,G,C,E,E,G,C,C,A,C,G,I,O,E,O,E,C,E,E,C,A,C,A,K,C,A,C,E,G,E,C,kB,E,c,E,C,S,A,C,C,C,E,G,C,O,E,C,C,uB,C,C,C,E,G,C,A,C,C,E,C,C,E,M,C,A,A,I,I,A,G,C,G,I,A,C,G,C,E,C,G,E,G,I,E,G,C,E,C,C,E,A,E,C,M,A,C,E,C,A,C,C,I,A,C,C,A,C,A,E,K,C,C,A,C,E,C,c,E,a,I,C,E,c,E,C,E,a,S,C,A,G,A,C,C,A,E,A,G,C,M,I,C,E,C,C,E,E,C,A,C,C,C,G,E,G,O,C,G,G,C,C,C,C,A,K,C,C,C,A,C,A,A,G,M,E,C,C,C,A,C,E,C,C,E,G,E,K,A,E,G,C,A,C,C,A,E,e,A,E,E,C,C,C,C,G,C,C,U,C,I,C,S,C,W,C,U,C,Q,C,U,C,a,C,U,C,C,C,A,I,E,E,O,A,I,E,E,W,C,A,E,E,A,I,G,A,C,A,E,C,E,I,A,C,C,C,E,I,A,E,E,E,A,C,A,E,E,W,A,E,G,G,C,A,C,A,C,G,C,I,C,C,C,E,C,E,C,E,C,C,C,I,C,C,C,C,E,A,C,O,C,c,C,iB,C,O,C,S,C,C,C,E,E,A,G,A,E,C,G,C,C,E,E,E,A,G,C,C,A,S,C,C,O,E,I,E,C,C,I,C,A,C,C,A,I,C,K,E,O,E,G,E,E,C,A,E,A,S,C,A,S,A,C,C,C,C,C,E,G,A,C,E,A,W,C,G,A,C,K,A,K,C,C,kB,E,E,G,6B,C,C,C,A,O,C,C,A,C,C,I,E,O,K,C,C,C,C,C,C,C,I,C,C,C,E,G,C,C,C,C,A,C,A,G,C,C,C,E,G,C,C,C,C,A,C,A,C,E,E,I,I,A,C,G,K,C,C,C,C,A,M,C,M,C,I,C,A,C,A,A,M,C,S,C,C,C,E,C,C,K,E,G,C,A,A,S,A,C,C,C,E,E,C,E,G,C,A,C,C,C,C,A,I,C,I,C,A,C,E,E,Q,A,E,E,G,E,I,C,A,C,C,E,E,E,A,C,C,O,C,C,C,E,E,C,C,A,A,C,I,E,C,E,E,E,C,C,M,C,C,A,C,A,C,E,G,A,G,C,C,A,G,E,C,A,G,A,G,C,G,C,C,C,E,G,C,K,C,C,E,E,Q,A,E,I,C,C,C,C,G,I,E,C,C,C,C,A,C,A,A,E,S,E,C,A,I,E,A,C,C,C,A,C,C,A,E,I,K,C,A,E,E,C,E,K,C,C,C,C,C,I,C,C,E,A,K,C,A,C,C,E,G,K,C,C,C,C,C,C,A,C,C,E,G,K,C,C,C,C,C,A,C,A,E,O,I,E,E,A,K,I,C,C,C,C,E,A,S,C,C,C,C,E,C,A,E,C,C,E,C,O,C,C,C,C,C,C,O,I,C,S,C,C,E,E,U,A,E,G,A,C,C,C,A,G,C,C,S,C,C,C,C,O,I,E,I,C,C,C,A,I,C,C,C,E,C,A,K,C,C,S,C,C,C,C,I,E,E,A,K,C,A,C,E,C,G,C,C,Q,C,C,C,C,I,C,A,G,I,E,G,A,C,C,C,C,C,C,C,C,C,C,C,Q,C,G,A,C,K,A,K,C,qB,C,C,A,G,A,E,E,C,E,E,C,A,C,A,A,I,C,C,A,K,C,wC,C,C,A,I,E,C,C,E,G,A,C,C,C,C,E,C,A,C,E,C,C,A,G,C,E,A,C,C,C,I,C,G,C,C,I,A,K,C,4B,C,C,A,I,C,C,E,A,O,C,G,C,A,C,A,C,C,G,M,C,C,E,E,W,A,E,E,A,G,C,C,A,C,C,C,C,C,C,C,C,C,A,E,A,E,A,G,C,G,C,A,C,A,C,C,A,C,E,E,E,I,K,A,E,S,C,I,E,A,E,A,G,C,C,C,A,C,A,C,C,C,E,C,A,C,C,A,A,E,A,M,A,C,A,C,C,E,C,A,C,A,C,A,E,G,C,C,C,a,C,E,C,A,G,C,C,C,c,C,E,C,C,A,C,E,C,C,G,E,C,M,A,K,C,mB,C,C,A,O,C,C,c,E,C,A,C,A,C,A,A,Q,E,C,O,A,I,C,C,C,C,G,C,A,O,C,C,C,C,C,C,G,E,G,G,C,C,A,G,E,E,E,E,C,E,E,U,A,E,E,G,C,U,C,I,C,C,C,A,I,C,C,E,A,O,C,I,C,C,C,C,A,C,C,E,A,O,C,I,C,C,C,C,A,G,W,G,E,C,A,G,A,I,E,I,C,Q,C,M,A,K,C,8B,C,C,A,M,C,E,E,W,A,E,U,C,E,C,I,C,Q,C,C,C,C,C,C,A,C,A,A,M,C,E,E,W,A,E,C,C,C,C,A,C,A,A,K,C,C,C,C,M,C,E,E,U,A,E,I,C,O,C,G,C,A,E,C,C,C,S,E,C,C,A,M,C,W,C,C,C,C,O,E,O,E,C,C,E,E,W,A,E,K,C,G,A,C,Q,C,A,C,A,A,M,C,O,C,C,C,C,O,E,O,E,C,C,E,E,W,A,E,K,C,G,A,C,I,C,A,C,A,A,U,E,C,O,I,C,Q,E,C,A,C,G,E,I,C,C,C,A,E,A,G,C,I,C,C,C,C,I,C,Q,C,C,A,C,G,A,C,A,A,a,E,C,O,I,C,O,C,K,C,A,C,A,A,Q,E,C,M,C,E,E,U,A,E,I,C,O,C,K,C,C,A,C,A,A,iB,E,C,O,I,C,O,C,S,C,A,C,A,A,Y,E,C,M,C,E,E,U,A,E,I,C,O,C,S,C,C,A,C,A,C,A,I,E,E,I,G,C,E,S,A,C,E,G,E,G,C,E,C,I,C,M,A,K,C,oB,C,C,A,I,E,C,A,E,E,e,A,E,G,E,A,A,C,A,C,C,A,C,C,K,C,E,I,C,C,C,E,C,C,A,C,A,E,A,I,E,C,G,C,C,A,C,A,A,A,C,A,C,A,E,O,E,I,C,C,S,A,C,E,O,E,A,K,C,C,E,G,C,C,A,A,C,A,C,A,C,A,C,C,E,G,I,A,E,G,G,C,C,I,E,C,E,I,C,C,C,E,E,Q,A,E,U,C,E,E,C,C,A,C,E,E,A,K,C,C,A,C,E,C,A,A,C,C,O,E,C,C,C,E,M,C,E,E,A,Q,A,E,O,A,E,O,E,C,C,A,E,C,E,E,A,C,C,M,A,E,E,E,K,C,A,E,O,Y,C,C,A,C,A,C,A,K,C,C,M,C,M,C,Q,E,I,Q,mB,E,K,Q,G,E,K,A,G,I,C,S,A,C,C,C,C,A,E,C,C,E,G,M,C,O,C,C,C,A,O,C,C,A,C,C,C,C,C,C,C,A,G,C,W,C,W,C,C,I,C,A,C,E,A,C,A,I,G,C,C,I,A,K,C,qC,C,C,A,G,M,C,S,C,c,C,C,C,E,E,E,C,E,E,C,C,E,A,E,C,A,C,C,C,C,A,A,C,A,C,C,A,C,C,A,A,G,A,C,A,C,A,C,E,C,C,A,A,C,A,A,C,C,A,G,A,C,A,C,C,C,C,G,E,C,G,I,C,C,C,A,C,G,C,E,E,E,A,C,C,A,E,E,A,K,C,C,E,C,C,A,C,C,E,I,C,C,A,E,A,C,C,W,A,E,c,C,C,C,C,A,C,A,A,C,K,C,I,C,C,E,E,Q,G,A,E,G,G,K,A,C,A,C,C,O,A,C,E,E,E,C,C,E,G,G,A,A,A,C,A,C,C,A,A,W,C,C,C,C,I,G,A,C,G,E,A,E,A,G,C,C,C,C,A,C,A,C,E,G,C,C,K,G,C,C,C,C,Q,E,C,A,C,A,C,A,E,A,M,C,A,C,C,C,C,C,A,C,E,C,G,E,C,M,A,C,G,C,C,E,A,M,C,E,A,E,A,M,C,A,C,C,C,C,C,A,C,A,C,A,C,A,C,E,C,G,E,C,M,A,I,E,A,C,C,C,C,C,C,A,I,C,C,A,C,C,C,C,C,C,C,C,C,C,C,C,E,A,C,C,A,C,A,C,A,C,M,G,A,C,A,C,A,E,C,A,A,C,E,C,A,A,E,E,A,A,A,C,A,C,C,C,C,C,C,A,C,E,C,C,C,A,A,C,C,E,E,C,C,E,E,C,A,A,A,C,A,C,A,C,E,A,C,A,C,C,A,E,A,M,K,A,E,A,I,K,C,G,E,E,C,A,C,A,C,C,C,A,E,A,C,A,E,C,A,C,A,c,A,E,E,E,E,K,C,E,A,K,C,G,C,C,A,C,C,A,C,C,C,C,C,C,E,C,S,A,C,C,C,C,C,C,A,E,C,C,E,C,E,M,C,S,C,Q,C,C,C,E,E,E,C,G,E,C,E,A,E,C,C,A,C,Q,A,E,W,C,G,E,E,C,C,C,A,A,C,C,W,A,A,E,S,C,G,G,C,C,E,C,C,E,G,E,E,I,A,K,C,oC,C,C,A,I,G,I,I,E,A,G,C,K,A,C,E,C,G,E,C,C,E,A,C,K,E,C,C,K,E,C,C,E,E,O,A,E,E,C,A,C,C,C,E,C,E,E,G,E,C,Q,E,O,E,C,A,Q,S,E,A,C,E,Q,C,C,O,E,A,C,C,G,C,G,C,C,C,G,G,A,K,C,0E,C,C,A,G,E,E,C,A,E,C,A,E,E,A,C,C,E,A,C,A,C,C,K,G,E,C,A,E,C,C,A,E,C,C,O,E,C,C,E,E,W,A,E,K,C,E,C,A,K,C,A,C,A,A,M,E,C,A,G,C,C,A,Q,K,E,G,C,G,A,C,C,M,C,C,A,G,C,E,A,C,A,E,A,C,A,A,E,C,C,O,E,C,C,E,E,W,A,E,K,C,E,C,A,S,C,A,C,A,A,M,E,C,A,E,K,C,C,A,C,E,C,G,C,C,G,A,C,C,A,C,A,C,E,E,C,G,C,C,C,A,E,C,C,E,E,W,A,E,K,C,G,G,G,A,C,A,A,C,G,C,C,C,M,E,G,A,C,A,A,I,C,C,E,G,M,C,G,G,G,A,C,A,C,A,C,O,E,C,O,E,G,A,C,E,C,G,C,C,C,E,C,A,C,A,E,G,E,A,E,A,A,C,C,C,A,C,A,C,C,C,A,C,C,A,E,A,M,C,C,C,C,C,A,C,A,C,C,A,A,E,A,M,C,C,C,E,C,A,C,A,C,A,E,C,E,C,C,Y,E,C,E,C,A,G,C,C,C,c,C,E,C,C,A,C,C,C,C,C,G,E,C,K,E,E,G,C,G,A,C,C,A,M,C,C,C,C,C,C,C,C,C,A,C,A,A,M,C,C,C,A,I,G,C,C,A,C,C,C,C,c,C,S,A,C,C,C,C,E,C,C,E,G,C,E,O,C,C,E,E,E,C,O,C,C,E,A,C,C,A,C,E,E,A,E,C,C,G,E,A,C,E,O,I,C,C,gB,C,G,I,C,E,E,A,C,A,W,O,E,A,C,A,C,A,A,A,S,E,C,E,I,E,C,C,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,C,E,C,A,K,C,C,C,C,C,C,C,C,C,C,C,C,C,E,C,C,C,E,C,E,C,C,C,E,C,C,A,E,A,C,C,E,C,A,E,C,C,U,c,C,K,C,I,C,I,G,C,C,C,wB,C,G,C,A,C,E,A,C,G,C,I,C,C,C,C,C,C,C,C,M,E,E,I,C,C,A,A,C,C,C,G,E,K,A,E,E,C,C,C,A,I,C,C,C,U,C,c,C,E,Y,A,C,C,C,c,C,C,C,A,kB,C,C,C,kB,C,I,C,C,C,I,C,a,C,C,C,a,C,a,C,C,C,a,C,S,C,C,C,S,C,O,C,C,C,O,C,C,A,M,O,K,O,C,C,A,C,A,A,M,G,E,C,C,C,C,C,E,O,A,E,O,A,C,E,I,E,A,C,C,A,A,G,C,C,C,C,A,C,A,C,A,E,A,G,C,C,C,A,C,C,C,A,C,M,E,A,C,E,C,E,A,G,C,E,A,E,A,G,C,C,C,C,C,C,C,C,C,A,C,A,A,C,A,iB,gE,E,O,C,E,O,A,C,A,E,I,E,C,I,E,C,A,C,A,C,E,W,C,E,O,A,C,C,C,E,A,I,E,A,A,G,C,A,A,E,A,E,W,A,E,C,G,C,C,I,C,C,C,C,C,A,A,M,C,G,E,E,E,G,G,C,C,A,C,A,C,E,E,E,E,C,C,a,+F,E,kB,C,E,E,e,G,C,E,E,a,C,C,C,E,U,A,C,E,O,A,C,C,C,C,C,I,C,C,E,C,A,E,C,A,C,E,A,C,I,C,I,C,C,C,C,O,E,C,C,A,M,C,C,C,C,E,E,A,G,C,E,A,E,A,E,A,E,A,C,E,G,A,C,A,G,A,C,C,A,C,K,C,C,E,C,A,E,C,C,C,G,A,C,E,G,A,C,E,C,A,C,C,C,C,C,C,C,A,C,E,E,C,C,A,E,A,E,a,A,E,E,C,E,A,A,E,A,E,G,C,C,C,I,C,C,E,G,A,C,E,A,G,C,C,C,C,A,C,C,C,A,C,C,C,E,G,A,C,E,A,E,E,E,C,A,C,A,C,C,C,C,C,A,C,A,A,C,A,C,E,Y,A,C,E,O,A,C,C,C,C,C,C,C,G,E,Q,E,O,E,M,A,E,G,C,8B,C,C,A,S,E,C,A,E,O,E,G,O,C,E,G,A,C,A,A,C,C,E,K,E,C,E,A,I,C,C,E,K,Q,E,C,O,A,C,C,M,C,E,G,C,C,C,C,C,G,C,C,C,A,C,C,c,E,C,A,C,C,A,C,A,M,A,U,E,M,K,C,C,C,C,E,I,C,C,E,E,C,A,C,C,I,C,A,C,A,A,M,C,C,C,C,E,I,E,A,A,C,C,A,C,A,A,C,C,C,C,C,A,E,A,E,C,A,C,C,C,C,C,A,O,E,E,A,C,E,C,E,C,A,C,A,C,A,a,C,C,C,C,E,I,E,E,G,G,G,C,A,C,A,G,C,E,M,G,C,C,A,C,A,C,C,A,O,E,E,A,C,A,C,A,E,A,C,A,A,C,A,C,I,C,A,C,A,A,M,C,C,C,C,E,E,G,C,A,C,A,C,C,A,C,A,A,C,A,C,U,C,C,E,G,C,K,C,O,C,G,I,C,C,A,K,C,2B,C,C,A,I,I,C,I,E,G,E,M,E,O,C,C,M,A,K,C,2B,C,C,A,O,E,E,C,A,E,C,G,C,C,C,Q,C,E,C,G,E,C,C,C,A,A,C,C,I,C,C,A,M,C,C,C,C,E,C,C,C,C,C,A,C,C,C,A,K,C,A,C,C,C,C,G,C,E,W,C,C,G,C,C,C,C,A,C,A,C,A,C,A,A,C,A,C,I,E,E,C,C,Q,E,E,C,C,Q,E,E,C,c,C,A,S,E,C,C,C,A,E,G,E,E,C,E,A,C,C,A,C,E,C,A,C,C,A,A,G,C,C,C,C,C,E,I,C,C,A,K,C,uB,C,G,E,C,C,A,E,C,I,C,I,C,Q,C,C,C,C,E,E,C,C,C,C,A,I,I,C,C,E,C,C,C,C,C,C,C,C,E,C,A,C,A,C,C,C,C,I,A,C,C,G,E,A,C,C,A,O,I,U,C,E,C,A,A,C,C,O,E,C,C,C,G,C,M,C,a,C,G,C,C,I,A,K,C,iB,C,A,C,A,A,S,E,C,E,E,C,C,C,E,E,O,A,E,G,C,A,A,Q,S,E,C,K,A,K,C,kC,C,C,A,M,Q,C,C,A,O,E,C,A,E,E,W,A,E,G,A,C,A,C,A,A,C,A,C,O,E,C,C,C,C,C,C,C,E,C,E,E,E,I,A,E,G,A,C,C,A,E,C,C,E,A,C,C,E,A,C,A,C,A,A,C,K,C,G,G,E,C,A,C,G,E,W,A,E,C,E,E,W,A,E,mB,C,C,G,A,C,C,A,G,C,S,C,C,C,Q,C,C,C,C,C,C,A,E,C,G,C,I,C,E,G,G,E,A,E,C,C,C,E,C,C,C,E,C,M,A,K,C,wC,C,C,A,I,E,C,E,E,E,S,A,E,E,C,C,E,C,A,K,C,C,C,C,C,A,E,E,C,A,C,C,E,E,E,E,C,A,A,C,A,C,A,A,A,C,A,C,A,G,E,C,G,A,C,C,A,C,A,C,C,E,E,A,W,A,E,E,E,C,A,C,E,C,C,C,A,C,C,A,I,C,C,C,C,C,A,C,A,C,A,C,E,E,W,A,E,E,C,C,C,C,C,A,C,C,I,I,C,C,C,C,A,C,C,C,C,C,E,E,C,A,E,C,C,A,I,E,C,A,C,K,G,A,C,C,C,E,C,G,E,C,G,U,C,C,C,M,C,C,A,I,I,C,C,C,C,C,C,C,C,M,C,C,E,C,A,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,C,A,O,C,C,C,A,C,C,C,A,C,C,C,C,C,C,C,E,C,C,C,A,C,C,C,C,E,C,A,C,C,C,C,C,C,A,C,C,E,E,W,A,E,G,G,C,A,A,C,C,C,G,A,C,E,E,W,A,E,C,E,C,C,C,A,K,C,C,C,E,C,A,O,C,C,A,E,C,C,C,C,C,C,C,C,C,E,G,C,C,C,E,M,A,E,G,A,C,C,A,E,C,C,E,A,C,C,E,A,C,A,C,A,A,C,K,C,G,C,C,A,I,E,G,C,C,I,C,C,C,C,C,A,C,C,C,A,E,C,A,C,M,C,C,K,E,C,C,C,M,C,C,E,E,W,A,E,mB,C,C,C,M,C,G,A,C,K,E,A,C,A,A,G,E,K,E,C,C,C,K,C,G,C,M,A,K,C,wC,C,C,A,O,C,C,M,C,C,K,C,C,C,C,C,M,A,C,G,A,C,K,C,E,E,C,A,C,C,A,C,I,E,C,G,A,C,K,C,E,E,C,A,K,C,C,C,C,C,M,E,A,C,A,A,C,A,Q,E,C,C,C,C,C,M,A,E,C,A,C,C,A,E,e,A,E,E,C,A,C,C,E,M,C,C,C,Q,C,C,C,Q,C,I,C,U,C,C,C,A,G,G,C,G,C,C,C,M,C,C,Q,K,C,C,C,E,G,C,C,A,C,C,E,M,A,E,E,I,C,A,C,M,A,K,C,qB,C,C,A,C,E,E,M,A,E,G,A,C,C,A,E,C,E,C,C,A,C,C,I,C,I,C,A,C,C,C,E,M,C,C,C,C,M,C,C,C,C,A,C,C,C,A,C,C,E,C,C,C,A,C,A,G,C,I,E,C,A,E,E,C,C,A,E,C,C,C,C,I,C,C,E,C,C,A,C,K,E,C,A,E,E,C,C,A,E,C,C,C,C,C,C,I,C,C,E,A,A,G,gB,E,C,A,E,E,C,C,C,C,G,M,A,K,C,+B,C,C,A,I,C,C,A,K,C,G,E,C,C,A,I,C,C,C,C,C,C,E,C,E,A,C,C,A,I,C,C,A,K,C,C,C,C,A,I,I,C,C,C,C,C,C,C,C,C,E,C,C,A,I,E,C,E,C,A,C,C,E,A,C,C,A,C,C,A,E,C,O,C,E,E,C,C,C,A,C,C,C,A,C,C,A,C,E,E,G,A,E,E,E,C,A,A,C,C,A,C,A,A,C,C,C,C,C,C,A,C,A,A,O,C,A,C,A,A,E,W,C,C,E,E,W,A,E,e,C,C,8J,I,E,E,C,C,Q,C,C,E,C,C,Q,E,A,E,C,C,M,E,E,E,C,C,Q,E,E,C,C,C,O,C,C,E,C,C,O,E,E,C,C,A,Q,E,C,C,C,M,C,G,iE,C,C,C,C,M,C,oE,C,C,C,C,M,C,C,C,C,C,C,M,C,C,C,C,C,C,M,C,C,C,C,E,C,M,C,oE,C,C,E,C,M,C,oE,C,C,C,A,E,C,I,C,M,A,C,oE,C,C,O,C,C,C,M,C,oC,C,C,C,M,C,oC,C,C,C,C,M,C,qC,C,C,M,C,oC,C,C,C,C,C,A,E,C,G,E,C,C,C,C,A,E,C,G,C,C,C,A,C,C,C,A,E,C,G,C,C,C,A,C,C,C,A,E,C,C,C,E,A,E,G,A,E,E,C,C,C,I,C,C,I,G,C,A,C,E,I,A,C,C,E,C,C,A,E,C,K,C,C,C,A,C,E,C,K,C,C,C,C,E,E,I,C,E,C,C,E,E,I,C,E,C,C,A,E,E,I,C,E,C,C,E,E,I,C,E,C,C,E,E,I,C,E,C,C,A,E,A,C,C,C,C,C,C,A,C,C,A,C,C,A,E,A,E,A,C,C,A,C,C,A,C,A,C,A,C,E,E,A,I,A,E,E,A,E,C,A,C,C,E,A,C,A,C,A,E,A,G,E,I,A,E,E,A,E,C,A,C,C,E,A,C,A,C,A,E,C,A,E,E,I,A,E,E,A,E,C,A,C,C,E,A,C,A,C,A,E,C,A,E,E,I,A,E,E,C,C,C,C,A,C,E,C,A,C,A,A,E,C,A,E,E,I,A,E,E,C,C,C,C,A,C,E,C,A,C,A,A,E,C,A,E,E,I,A,E,E,C,C,C,C,A,C,E,C,A,C,A,A,E,C,C,C,E,I,A,E,E,C,C,C,C,A,C,E,C,A,C,A,A,E,E,C,E,I,A,E,E,E,A,C,C,A,C,E,C,A,C,A,A,E,C,C,C,E,I,A,E,E,E,A,C,A,C,C,E,A,C,A,C,A,E,A,C,E,E,I,A,E,E,E,A,C,C,A,C,E,C,A,C,A,A,E,A,C,E,E,I,A,E,E,A,E,C,A,C,C,E,A,C,A,C,A,E,C,C,C,E,I,A,E,E,A,E,C,A,C,C,A,G,C,E,E,C,C,E,E,C,C,G,C,A,C,A,C,M,A,K,C,yB,C,C,A,O,C,C,A,C,C,A,C,A,A,E,S,C,C,E,E,W,A,E,C,G,C,C,E,C,E,E,E,E,E,E,E,C,C,C,C,E,M,C,C,A,C,G,E,C,C,C,A,S,E,C,C,E,C,C,E,A,I,E,C,C,A,E,C,A,A,Q,I,E,C,A,C,C,E,E,C,C,C,E,M,A,E,C,E,E,W,A,E,G,C,A,C,C,A,C,C,C,E,W,A,E,E,E,C,C,A,C,A,C,C,C,A,C,C,A,E,C,G,C,E,E,M,A,E,C,E,E,W,A,E,I,C,C,E,C,A,I,A,C,C,A,A,C,E,C,C,A,E,C,E,E,E,G,C,C,G,C,C,C,C,A,E,C,C,G,G,G,C,K,C,A,E,C,A,E,C,C,E,C,C,C,E,G,C,I,M,A,C,C,C,E,E,A,C,E,A,C,C,c,A,E,E,A,G,C,A,C,A,C,C,E,M,C,E,C,A,C,C,I,C,M,C,A,C,C,C,C,C,C,C,G,E,A,C,C,A,A,G,C,E,C,A,C,I,C,E,C,C,C,A,A,C,A,A,M,G,E,C,E,C,E,C,A,E,A,E,C,Q,C,C,C,C,M,A,K,C,0B,C,C,A,I,E,A,E,A,M,C,C,C,C,C,C,A,C,C,E,A,M,C,E,A,C,C,M,C,C,C,C,C,A,C,A,C,E,A,I,C,C,C,A,C,A,A,C,A,C,K,G,C,C,C,C,A,G,C,E,C,C,A,I,C,C,E,K,K,C,G,A,C,G,C,C,C,C,A,O,C,C,c,E,C,A,C,A,C,A,A,I,E,C,C,e,C,A,S,E,G,C,E,C,M,E,E,C,E,I,C,E,C,C,Q,W,E,E,I,A,C,A,A,C,C,C,M,E,C,E,O,E,G,E,G,A,C,A,A,A,C,A,O,C,E,C,C,C,C,E,C,E,A,E,W,A,E,E,C,E,G,I,C,C,C,E,C,A,C,C,E,A,C,C,W,A,E,S,C,G,C,G,C,C,A,C,C,C,M,C,C,C,C,E,G,C,C,C,E,C,C,A,C,C,K,I,A,E,S,C,E,E,C,C,A,C,A,A,C,E,A,C,M,C,C,C,E,C,C,Q,K,C,C,C,C,C,C,A,C,A,K,C,A,C,C,M,C,C,C,C,E,E,Q,O,A,C,A,C,C,E,A,A,C,A,C,A,C,C,A,C,C,E,E,A,E,A,C,C,C,A,A,A,C,C,C,G,U,C,E,C,C,A,C,E,E,C,E,C,E,A,C,A,C,C,A,E,C,E,C,E,A,O,C,E,A,M,C,C,C,C,C,C,A,C,C,C,C,C,C,C,A,C,E,E,C,A,C,E,C,A,I,E,A,K,C,kC,C,C,A,O,C,C,A,C,C,O,E,C,C,C,C,C,E,G,C,A,I,M,C,C,C,E,E,C,A,E,A,C,C,W,A,E,W,C,E,E,C,C,A,C,C,C,A,E,E,W,A,E,S,C,G,E,C,A,C,C,A,C,C,W,A,E,W,C,E,E,C,C,A,G,A,C,A,I,C,C,E,E,C,C,C,C,A,C,A,C,A,C,C,C,C,C,O,C,C,C,E,C,C,C,A,C,E,C,C,E,E,O,A,E,C,C,E,C,A,C,C,C,C,O,E,C,E,C,A,C,C,A,E,C,C,C,O,C,E,C,E,C,C,C,A,C,E,C,C,E,E,O,A,E,C,C,E,C,C,C,C,C,O,E,C,E,C,A,C,C,C,C,E,A,K,E,C,C,C,C,E,C,C,C,C,C,C,A,C,C,E,A,E,Y,C,C,C,C,G,C,C,C,c,C,E,A,G,C,C,C,C,C,C,A,G,C,G,C,C,C,C,C,Q,E,C,A,G,C,C,G,E,E,A,C,A,A,C,A,A,C,E,C,G,A,C,A,A,G,C,C,M,G,E,C,I,C,C,A,E,C,G,E,C,A,E,K,C,C,A,C,A,E,A,C,M,C,C,G,E,A,I,E,E,C,A,E,C,E,A,C,C,C,E,K,M,A,E,E,E,C,C,E,E,A,c,A,E,E,E,A,C,C,C,O,E,C,Q,C,K,C,e,C,A,C,M,C,S,A,C,E,G,C,E,E,G,C,C,A,C,G,I,O,E,O,E,C,E,E,C,A,C,A,C,I,C,O,A,C,E,I,C,E,M,C,E,A,C,I,C,E,G,E,A,C,C,e,C,E,a,G,C,a,E,O,C,K,S,E,U,K,C,E,e,C,e,C,E,e,C,G,C,E,G,C,C,O,C,C,S,E,E,E,O,C,C,C,C,A,E,gB,E,E,G,M,C,G,C,G,A,C,A,E,C,C,A,C,C,E,A,C,C,E,E,C,E,C,C,E,Q,A,E,E,C,A,C,A,C,C,C,G,8D,C,mE,C,oE,C,oE,C,C,C,oE,C,oE,C,oE,C,C,A,C,Q,4D,C,oE,C,oE,C,oE,C,C,C,oE,C,oE,C,oE,C,oE,C,C,A,C,G,C,A,C,E,A,C,A,A,C,G,C,A,C,E,A,C,K,C,C,C,C,C,C,C,A,E,A,C,A,E,C,C,E,a,E,C,C,A,A,E,C,C,C,C,A,C,M,C,oE,C,C,C,C,M,C,M,C,C,C,C,E,E,I,C,M,C,K,C,C,C,C,C,A,E,A,C,e,C,C,C,C,A,E,C,W,A,E,E,S,C,K,C,A,I,G,A,E,C,C,A,G,C,C,C,E,E,E,A,I,C,C,C,C,C,C,C,C,A,O,E,C,C,C,C,A,A,C,A,C,C,G,C,gC,C,S,C,gC,C,C,C,E,E,G,C,C,C,C,C,C,C,G,C,M,C,K,C,I,C,E,M,C,C,C,A,E,A,C,U,C,C,C,A,C,G,Y,C,W,C,A,E,A,C,Y,C,C,C,A,C,G,Y,C,a,C,E,C,eClLA,IAAI,EAAiB,4BAMjB,EAAU,qBAEV,CADA,CACU,mBACV,EAAU,gBAEV,CADA,CACU,oBACV,EAAS,6BACT,EAAS,eACT,EAAY,kBACZ,EAAY,kBACZ,EAAa,mBACb,EAAY,kBACZ,EAAS,eACT,EAAY,kBACZ,EAAY,kBACZ,EAAa,mBAEb,EAAiB,uBACjB,EAAc,oBACd,EAAa,wBACb,EAAa,wBACb,EAAU,qBACV,EAAW,sBACX,EAAW,sBACX,EAAW,sBACX,EAAkB,6BAClB,EAAY,uBACZ,EAAY,uBASZ,EAAU,OAGV,EAAe,8BAGf,EAAW,mBAGX,EAAgB,CAAC,EACrB,CAAa,CAAC,EAAQ,CAAG,CAAa,CAAC,AA7CxB,iBA6CiC,CAChD,CAAa,CAAC,EAAe,CAAG,CAAa,CAAC,EAAY,CAC1D,CAAa,CAAC,EAAQ,CAAG,CAAa,CAAC,EAAQ,CAC/C,CAAa,CAAC,EAAW,CAAG,CAAa,CAAC,EAAW,CACrD,CAAa,CAAC,EAAQ,CAAG,CAAa,CAAC,EAAS,CAChD,CAAa,CAAC,EAAS,CAAG,CAAa,CAAC,EAAO,CAC/C,CAAa,CAAC,EAAU,CAAG,CAAa,CAAC,EAAU,CACnD,CAAa,CAAC,EAAU,CAAG,CAAa,CAAC,EAAO,CAChD,CAAa,CAAC,EAAU,CAAG,CAAa,CAAC,EAAU,CACnD,CAAa,CAAC,EAAS,CAAG,CAAa,CAAC,EAAgB,CACxD,CAAa,CAAC,EAAU,CAAG,CAAa,CAAC,EAAU,CAAG,G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E,CAAG,CAAnB,SAC7B,CAAc,CAAC,EAAe,UAAa,CAAG,CAAjB,CAAmB,CAAG,YACvD,CAAC,CAAE,EAAiB,EAAQ,cAAc,GAAK,CAAD,CAAS,cAAc,CAAG,EAAC,CAAC,iC,S,E,C,E,E,K,C,Y,U,E,W,C,M,C,C,C,E,Y,C,C,C,C,C,W,C,I,A,C,A,S,E,C,E,A,G,S,E,O,C,C,M,A,K,C,C,sB,E,C,C,C,C,A,C,A,A,S,E,C,E,E,C,C,M,C,a,C,C,C,E,C,C,C,C,M,A,K,C,iC,C,C,C,A,C,A,A,S,E,C,C,E,C,C,E,G,C,E,C,C,C,E,I,A,K,C,qB,C,C,A,G,E,K,C,C,C,E,C,E,K,G,C,C,C,M,C,C,M,A,K,C,gC,C,E,K,U,C,C,C,M,C,A,C,A,A,S,E,C,E,K,E,I,Q,C,E,C,K,C,E,C,S,C,E,C,S,C,A,C,A,A,O,c,C,E,a,yD,E,O,C,E,E,I,C,C,E,E,E,K,C,E,E,I,E,C,E,E,G,E,C,E,M,C,A,C,E,E,C,U,E,O,C,E,U,E,O,C,C,M,C,M,A,K,C,8C,C,C,A,E,C,C,G,M,C,C,A,E,C,C,G,K,C,A,C,A,C,E,O,C,E,O,A,C,A,C,G,C,C,C,G,E,E,I,G,C,M,A,K,C,kC,C,C,A,G,G,E,M,E,A,C,M,A,K,C,uC,C,A,C,A,C,E,O,C,E,O,A,C,A,C,C,E,E,A,G,A,C,A,C,E,E,C,C,M,G,C,A,G,E,C,K,C,E,C,E,C,E,A,K,C,wD,C,E,C,A,C,A,C,C,E,C,E,G,I,A,C,C,C,O,I,U,C,E,C,K,C,E,C,S,C,E,C,S,C,A,C,A,C,E,G,C,E,I,G,A,C,E,A,O,I,W,C,E,C,K,C,E,C,S,C,I,C,K,C,E,C,S,C,C,C,C,A,C,A,C,E,K,C,E,M,C,A,G,C,C,C,I,I,C,C,C,C,C,C,E,I,E,C,C,E,C,A,C,A,C,C,C,C,I,C,C,C,A,C,A,C,E,U,C,E,E,O,G,C,E,E,O,G,C,E,E,O,I,C,E,E,Q,O,C,E,O,A,C,E,M,C,E,E,C,E,C,C,A,C,C,A,A,C,A,c,C,E,O,A,C,C,C,E,I,G,E,C,A,C,M,E,C,E,C,C,Q,C,A,C,E,C,G,C,C,A,C,A,C,E,W,C,E,E,Q,G,C,E,O,A,C,E,E,K,C,G,W,E,C,M,C,E,C,C,C,C,A,C,M,C,E,O,A,C,A,E,G,C,O,E,O,E,E,A,E,A,I,C,C,E,C,E,E,G,C,C,A,A,E,A,I,C,C,C,C,M,A,K,C,2B,C,O,G,C,C,C,I,C,C,C,C,C,A,Y,C,E,E,S,U,C,E,O,A,C,C,C,E,G,E,E,C,E,C,E,A,C,A,C,C,O,C,E,I,M,C,M,A,K,C,sD,C,A,C,A,C,E,W,C,E,O,A,G,C,C,C,I,C,C,C,A,C,A,I,I,C,C,C,C,C,C,E,I,E,C,C,E,C,C,A,I,C,C,C,C,C,C,C,A,E,C,C,C,A,C,E,A,C,C,M,A,C,A,A,I,E,C,G,U,C,G,A,C,C,E,I,C,C,C,C,E,C,A,C,C,C,E,I,E,C,C,E,C,C,A,I,C,C,C,C,C,C,C,A,E,C,E,C,C,C,G,A,C,C,C,A,C,C,M,A,C,A,A,O,C,C,C,A,C,C,S,C,E,O,A,C,C,C,A,E,G,C,G,E,G,C,O,E,O,E,E,I,A,K,C,yB,C,C,A,O,A,M,A,C,A,M,C,E,E,C,C,A,C,C,A,A,U,C,E,O,A,C,C,C,C,C,G,C,C,A,M,G,C,C,M,C,O,E,G,C,A,E,C,C,A,A,I,I,C,C,C,C,C,C,C,C,M,C,C,E,C,G,C,A,C,C,C,C,C,C,C,C,C,A,O,C,C,E,C,C,C,C,C,S,C,E,O,A,C,C,C,A,C,E,E,C,C,G,E,O,A,E,C,M,I,U,C,G,G,E,C,K,A,C,C,C,E,M,A,K,C,A,kC,C,E,S,C,E,A,C,K,C,C,A,G,G,C,E,G,A,C,C,I,A,A,K,C,iC,C,C,A,O,C,C,C,A,C,C,Y,C,E,E,S,C,C,E,O,A,C,C,C,C,A,C,E,E,C,E,A,C,C,C,C,E,C,G,U,C,E,C,C,A,E,E,A,G,A,C,C,G,E,E,E,C,C,A,M,A,C,G,G,C,C,A,C,A,C,A,C,C,A,M,A,C,G,G,C,A,C,A,C,A,A,C,A,C,A,W,C,E,E,Q,C,C,E,E,I,C,C,C,C,C,C,A,C,A,C,C,C,U,C,I,W,C,C,U,C,C,C,M,C,C,C,C,C,I,E,A,U,C,G,K,Q,E,A,C,A,C,G,A,C,A,C,C,C,C,K,E,E,Q,C,C,C,C,K,U,C,O,C,E,G,E,C,A,I,C,C,M,C,A,E,C,C,C,C,C,C,C,E,C,C,A,C,Q,C,E,C,C,Q,C,C,C,G,C,C,C,A,S,E,C,E,G,E,A,G,C,C,A,C,C,K,E,E,C,E,E,C,A,I,E,C,C,C,A,I,I,C,C,C,C,C,C,E,G,G,C,C,E,C,A,C,E,A,C,C,C,C,C,C,C,C,A,O,C,C,A,C,C,E,E,C,E,C,A,E,C,E,C,E,C,C,C,E,C,C,C,E,C,C,C,E,C,C,C,G,C,C,A,S,E,C,S,A,C,C,C,E,E,E,A,E,C,E,E,C,C,A,C,A,E,E,C,A,C,A,C,C,E,C,E,C,C,C,E,C,C,C,A,C,A,A,G,A,C,C,C,C,C,C,A,C,C,A,C,E,C,E,C,C,C,E,C,C,C,C,A,C,E,A,C,C,A,E,A,C,C,C,C,I,C,A,S,E,C,E,C,E,E,M,E,O,E,C,K,A,K,C,2B,C,O,G,A,C,C,C,E,O,I,M,C,O,C,G,A,C,C,E,E,A,E,C,K,C,A,E,A,E,A,C,C,A,G,E,A,C,C,M,A,K,C,kD,C,E,C,A,C,G,E,G,C,U,C,E,C,A,C,G,I,E,A,C,C,E,A,C,C,E,A,E,A,E,E,A,E,C,C,C,C,A,I,E,A,E,E,C,Q,C,C,E,C,C,A,C,C,A,E,E,C,Q,C,C,E,A,C,C,C,C,A,Q,I,E,G,G,I,E,A,G,E,C,A,A,K,C,8C,E,C,A,C,E,A,C,A,C,C,E,A,E,A,C,C,a,C,E,C,A,C,A,C,E,A,C,E,C,E,A,C,C,A,A,C,C,K,C,C,A,G,C,K,E,C,E,G,G,K,E,O,E,C,K,A,K,C,Q,mB,C,O,G,A,C,C,K,M,C,E,C,C,C,E,C,E,C,A,C,G,C,E,C,A,A,C,C,C,M,E,C,E,E,C,G,K,E,O,E,C,K,A,K,C,iB,C,C,A,O,I,U,C,I,W,E,C,M,C,G,A,C,A,A,C,C,C,M,E,C,C,C,E,K,E,C,C,M,A,G,C,C,M,E,C,C,A,U,C,C,C,U,C,C,C,U,E,C,C,A,S,C,C,C,C,U,C,A,C,C,U,A,C,A,A,S,E,C,C,C,C,C,C,C,E,C,E,C,S,E,O,E,E,U,C,O,E,E,U,C,E,E,G,A,C,C,C,A,C,E,E,I,C,E,C,C,A,E,M,A,C,U,C,C,A,E,A,M,C,G,E,A,E,C,A,E,A,G,C,C,C,C,E,G,A,C,C,C,C,C,A,C,A,A,C,A,C,A,C,C,A,C,A,C,A,C,E,E,A,C,C,A,C,C,C,C,G,C,E,C,C,E,A,G,C,A,C,A,C,C,O,C,E,C,C,E,A,E,C,A,C,A,C,C,M,E,C,E,M,C,E,G,O,C,C,E,C,A,C,A,A,S,E,C,E,I,G,U,C,I,C,E,C,A,E,A,C,C,M,C,E,G,I,C,C,A,C,A,E,I,C,E,I,C,C,E,A,U,C,C,C,C,I,C,K,C,E,C,C,C,C,C,G,C,E,G,A,E,G,A,C,A,A,C,C,I,C,M,A,K,C,iD,C,C,A,Q,I,E,G,C,O,C,C,A,I,E,C,C,C,A,C,C,A,G,C,E,G,G,A,K,C,qB,C,C,A,E,I,Q,C,E,G,C,C,A,C,C,A,E,A,C,G,O,C,A,C,A,A,I,E,E,A,I,K,C,A,I,I,I,C,C,C,C,C,C,C,C,A,C,C,C,C,A,C,C,A,I,E,E,E,C,E,A,G,C,A,C,A,C,A,E,K,C,A,A,E,E,G,I,E,C,A,E,C,A,C,G,E,M,A,A,K,C,6B,C,C,A,E,E,C,A,C,A,C,A,C,C,C,A,E,C,E,C,E,C,A,O,C,A,C,A,C,C,E,G,E,I,E,A,K,C,8C,C,C,A,O,G,E,C,C,A,C,E,C,A,C,A,C,C,I,G,A,C,M,C,G,E,C,C,C,C,G,C,E,E,A,C,C,E,C,C,G,C,C,C,C,E,G,E,G,C,A,C,C,A,C,C,E,I,C,E,E,I,A,K,C,oD,C,G,C,C,C,I,E,E,I,G,A,C,M,C,G,E,C,C,C,C,G,C,E,E,A,C,C,A,C,A,A,C,C,C,I,M,C,M,C,E,G,C,C,C,A,C,C,G,K,C,8F,E,W,C,E,I,E,E,C,C,A,Q,E,I,C,G,M,C,E,C,C,A,E,A,C,C,C,E,A,G,A,E,G,E,C,C,A,C,A,A,C,C,A,E,A,E,E,C,C,A,E,C,E,C,E,C,A,C,C,E,C,C,A,E,C,E,C,E,C,A,C,C,E,C,C,A,E,C,E,C,E,C,A,C,C,E,C,C,A,E,C,E,E,C,C,A,C,G,I,E,C,C,C,C,A,C,C,A,E,C,A,C,C,C,A,C,A,C,C,A,C,E,A,C,A,C,G,C,C,A,G,C,C,A,C,E,C,A,C,C,G,C,C,A,G,C,C,C,E,C,A,C,C,G,E,C,A,G,C,C,C,C,C,A,C,G,E,C,A,I,A,C,E,C,C,I,E,C,E,C,C,I,G,E,C,A,I,E,C,C,A,C,A,C,E,C,C,E,C,C,A,C,G,I,C,C,C,C,C,C,C,C,M,C,C,E,C,C,A,I,C,C,C,C,C,C,C,A,C,C,C,C,C,C,G,C,C,A,E,E,C,A,A,C,A,A,C,A,I,C,A,C,A,A,O,C,C,C,C,E,I,A,C,A,C,C,C,A,C,A,A,C,K,E,G,S,C,C,C,C,C,I,C,Q,G,C,I,C,I,A,C,I,G,C,I,C,E,C,C,A,C,A,A,I,C,E,C,C,C,A,I,C,E,C,C,C,A,I,C,E,C,C,C,A,I,C,Q,C,G,E,A,C,A,A,E,E,O,A,E,G,A,C,A,C,C,E,M,A,E,E,C,C,C,C,A,I,E,C,E,A,E,U,A,E,G,A,C,C,A,A,E,G,M,C,C,C,I,C,C,A,A,C,C,G,M,C,C,E,G,E,A,A,C,C,A,G,M,C,C,E,G,E,A,A,C,C,A,G,M,C,E,E,G,E,A,C,C,A,C,A,E,E,I,C,C,C,C,C,C,G,C,C,E,C,A,C,C,I,C,A,C,E,C,E,E,C,A,C,C,C,E,E,C,A,C,C,C,E,E,C,A,C,C,C,E,E,A,C,A,C,A,C,A,C,E,C,C,C,E,C,C,C,E,C,C,C,E,C,C,C,C,E,E,A,A,E,A,E,A,E,C,A,C,C,E,C,C,C,A,G,A,E,A,E,A,C,C,C,C,C,C,A,A,C,C,C,E,C,C,C,A,C,A,C,A,C,A,C,A,G,I,C,C,A,G,C,C,A,C,C,C,C,C,C,C,C,C,Q,C,C,C,C,M,A,K,C,gD,C,C,A,I,C,C,C,C,C,A,I,E,A,G,C,A,A,C,A,A,C,A,E,I,C,G,O,C,A,C,E,C,C,A,C,C,E,C,A,A,I,I,C,C,C,C,C,C,E,C,E,C,A,C,A,G,I,E,C,C,A,E,E,A,I,A,C,A,C,E,C,E,A,C,C,E,A,C,C,E,A,C,C,E,A,C,C,A,I,I,C,C,C,C,C,C,C,C,C,E,C,C,A,G,C,C,E,E,A,C,C,C,C,C,C,C,A,C,C,A,S,A,G,C,E,C,C,C,E,C,C,C,E,C,C,C,E,C,C,C,C,C,C,C,C,C,C,C,C,C,A,E,C,E,A,C,A,C,C,E,A,C,A,C,C,E,A,C,A,C,C,C,C,A,A,C,C,A,G,C,C,I,E,G,E,G,E,A,E,E,C,C,A,C,A,A,I,C,C,C,C,C,A,G,C,Q,C,C,C,C,C,C,C,C,C,C,E,C,I,C,E,C,A,C,C,C,I,C,E,C,A,C,C,C,I,C,E,C,A,C,C,C,I,C,E,C,A,C,E,G,C,G,C,Y,C,C,C,I,C,A,E,A,C,C,E,A,C,C,E,A,C,C,E,A,C,C,A,E,C,C,A,G,C,C,A,C,C,A,C,A,C,C,C,A,I,I,G,C,C,E,A,E,A,E,A,E,A,C,A,C,G,C,G,E,C,C,E,C,A,C,G,C,C,A,E,E,A,E,E,C,C,C,C,E,I,A,C,A,C,C,C,I,E,C,C,C,C,A,C,C,G,C,C,C,G,C,A,C,E,A,C,E,C,C,C,E,C,C,C,E,C,C,C,E,C,C,C,C,C,C,C,C,G,I,A,C,C,C,C,C,C,A,C,A,C,A,A,C,A,C,A,C,E,A,C,A,C,C,E,A,C,A,C,C,E,A,C,A,C,C,E,A,C,A,C,C,C,A,C,A,A,C,A,I,C,E,C,E,A,C,G,C,E,C,E,A,C,G,C,E,C,E,A,C,G,C,E,C,C,C,A,A,C,K,C,C,C,C,C,E,E,O,A,E,I,C,C,A,E,C,C,C,E,O,A,E,G,C,A,C,C,A,E,M,A,E,G,C,C,C,C,E,C,A,E,E,G,A,E,G,C,C,A,C,G,A,C,K,C,E,E,I,G,E,E,E,A,E,E,C,C,A,G,C,I,I,C,A,C,A,C,C,C,C,E,C,E,C,A,A,C,G,C,Y,C,C,C,A,C,A,G,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,A,C,A,G,C,C,C,C,A,O,I,A,E,A,C,E,C,C,C,E,M,C,M,C,E,E,C,O,C,C,C,E,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,A,C,E,E,K,A,E,I,G,C,A,A,C,A,A,A,C,M,E,C,G,G,C,C,C,C,G,C,A,I,I,G,E,C,C,A,C,C,C,C,C,C,C,A,C,C,C,C,C,C,C,A,C,C,C,C,C,C,C,A,C,C,C,C,C,C,A,C,A,A,C,S,C,C,C,C,C,E,E,O,A,E,I,C,C,A,C,E,E,O,A,E,E,C,G,C,C,A,I,C,Q,E,E,E,C,A,C,I,I,C,I,C,I,C,C,C,I,C,A,E,C,A,E,E,G,A,E,G,A,C,C,K,C,C,C,C,C,E,A,C,A,C,C,C,C,E,A,C,A,C,C,C,C,E,A,C,A,C,C,C,C,E,A,C,A,C,A,C,C,I,E,C,I,E,C,G,U,C,I,M,C,A,C,G,C,U,C,G,A,C,C,E,C,O,E,C,A,C,C,C,A,A,C,K,O,G,E,G,S,C,C,C,C,C,E,C,E,E,O,A,E,G,A,C,A,C,C,E,M,A,E,G,A,C,C,E,E,E,C,A,E,E,I,K,A,E,G,C,A,C,C,G,C,E,G,A,C,E,E,K,A,C,C,A,C,C,C,A,E,C,C,E,C,C,C,C,E,E,C,E,O,A,E,G,C,A,C,C,A,E,O,A,E,I,C,C,A,I,E,C,A,E,E,G,A,E,G,C,C,A,C,C,A,E,I,G,C,E,I,A,C,E,C,E,C,E,E,I,G,E,I,I,A,C,A,C,A,C,C,C,C,E,C,E,C,A,A,C,G,C,Y,C,E,C,C,C,C,A,C,C,C,C,C,C,E,C,C,C,C,A,C,C,C,C,C,C,E,C,C,A,C,A,C,E,C,C,C,C,E,C,C,A,C,A,C,E,C,C,C,C,C,A,O,I,A,E,A,C,E,C,C,C,E,M,C,E,C,A,I,E,E,C,A,U,C,C,A,C,A,E,C,C,C,C,A,C,C,E,C,C,C,C,A,C,C,E,C,C,C,C,A,C,C,E,C,C,C,C,A,C,C,C,A,C,E,E,K,A,E,I,G,C,A,A,C,A,A,A,U,C,C,C,C,C,E,E,O,A,E,I,C,C,A,C,E,E,O,A,E,E,C,G,C,C,A,I,C,Q,E,E,E,C,A,I,C,C,I,I,C,C,I,C,C,I,C,A,E,C,A,E,E,G,A,E,G,A,C,C,K,C,C,C,C,C,E,A,C,A,C,C,C,C,E,A,C,A,C,C,C,C,E,A,C,A,C,C,C,C,E,A,C,C,C,M,E,A,C,A,C,A,S,E,C,E,I,E,C,E,A,C,E,C,C,A,C,E,A,C,C,C,C,I,C,C,M,C,C,E,E,O,A,E,G,C,A,C,K,E,C,A,E,C,C,I,E,Q,C,E,C,C,C,C,C,A,O,E,G,M,C,E,C,Q,C,A,E,G,K,C,E,C,O,C,A,E,G,G,C,C,E,C,G,C,C,E,C,E,C,A,C,A,C,C,C,A,C,G,C,C,C,A,C,A,E,C,G,C,G,E,E,C,A,C,E,A,C,C,O,C,A,C,C,A,C,A,E,C,G,C,G,E,E,C,C,C,C,C,S,C,C,C,iJ,I,E,E,C,C,C,O,E,E,C,C,Q,E,I,K,G,E,C,I,M,A,C,C,A,C,E,C,C,C,O,C,E,C,C,A,A,C,G,A,C,A,C,A,C,A,G,C,A,C,A,A,C,C,O,E,C,A,C,C,E,I,E,C,A,C,A,A,K,C,C,C,C,C,G,C,C,A,C,E,A,C,C,C,G,C,A,C,C,A,C,A,C,A,E,C,C,A,C,A,C,M,C,C,A,C,C,A,E,E,C,C,E,C,C,A,I,C,C,I,C,C,E,M,C,G,C,C,A,I,I,C,C,C,C,C,C,C,C,C,C,G,C,C,E,C,C,E,E,C,C,A,C,C,C,C,C,C,C,C,A,I,E,C,G,U,C,G,C,C,A,C,C,C,C,C,G,C,C,C,C,I,C,C,C,C,C,C,C,E,C,C,E,C,C,A,I,C,C,C,C,G,C,C,C,C,A,C,E,C,E,C,C,A,C,C,C,C,C,C,C,C,C,C,C,C,E,C,C,A,C,A,E,C,C,A,C,A,E,C,C,A,C,A,E,C,C,A,E,C,C,A,G,C,A,A,C,K,C,E,E,K,A,E,C,C,C,A,E,C,A,C,A,E,A,C,C,E,E,C,A,C,C,C,A,C,C,E,C,C,C,E,I,C,C,A,C,C,C,C,A,E,A,C,E,A,C,A,E,A,E,C,A,C,A,G,C,C,A,C,C,A,C,E,A,C,A,E,A,C,C,A,C,A,G,E,C,A,C,C,A,G,C,A,A,E,A,A,C,C,C,A,U,C,A,G,C,A,C,A,Q,C,A,I,A,C,C,A,M,A,C,G,A,E,C,A,I,A,C,C,O,E,C,C,C,E,E,C,G,G,E,E,I,C,M,A,K,C,mB,C,C,A,I,E,A,I,W,C,G,C,C,G,C,C,C,C,C,E,C,C,C,A,C,C,C,C,C,C,C,A,E,A,E,A,G,C,G,E,A,E,A,C,C,C,A,C,G,E,A,E,A,C,C,C,A,C,G,E,C,E,C,A,C,U,C,G,G,C,E,A,C,A,C,E,W,C,G,G,C,E,A,C,C,C,C,W,C,G,G,C,E,C,C,A,I,C,C,C,C,C,C,G,C,C,E,C,A,C,G,I,C,C,C,C,C,C,G,C,C,E,C,C,A,I,E,A,C,A,E,G,C,C,A,C,C,E,C,A,C,C,C,C,C,C,C,C,C,C,A,C,C,E,C,A,C,C,C,C,C,C,C,C,C,C,A,C,C,E,C,A,C,C,C,C,E,C,C,A,C,C,C,C,A,C,A,A,M,M,I,I,K,A,E,G,E,G,E,G,E,I,E,C,E,E,C,A,C,A,A,I,E,E,E,A,C,C,C,A,C,C,A,C,A,C,A,C,C,C,C,E,C,A,C,A,E,E,C,A,C,A,E,A,C,C,A,A,E,C,A,C,C,C,C,C,A,E,E,E,A,C,E,A,C,C,A,A,C,A,C,A,E,C,A,E,E,C,A,C,C,C,A,C,E,C,C,C,C,C,C,A,C,C,C,A,C,C,C,E,C,C,A,E,C,A,C,E,C,C,C,A,E,A,G,E,A,C,E,E,C,C,I,K,E,G,C,E,C,C,A,I,I,C,C,C,C,C,C,C,C,C,C,E,C,C,E,C,C,C,E,C,C,A,C,C,C,C,C,C,C,C,A,O,C,C,A,C,C,E,A,C,Q,E,C,E,C,E,E,C,K,A,E,G,A,C,C,E,E,C,C,C,K,C,A,G,C,C,E,C,E,C,E,C,C,Q,C,G,A,C,K,A,K,C,qD,C,G,A,C,C,C,O,C,C,C,E,E,E,A,C,A,C,C,C,E,C,C,S,A,E,G,C,A,E,I,C,A,E,C,A,E,E,S,A,E,G,C,A,C,C,C,C,E,C,A,E,E,G,A,E,G,A,C,C,A,A,E,C,K,C,A,E,A,C,E,A,C,C,A,E,C,C,C,A,C,C,A,C,C,C,C,A,E,A,I,W,C,E,C,C,C,C,A,C,C,A,G,C,G,A,C,C,E,G,C,C,C,E,A,C,C,E,A,M,C,C,E,C,C,A,I,C,C,C,C,C,C,C,C,C,A,C,C,E,C,C,C,C,C,E,E,C,C,C,A,C,C,C,A,C,C,E,A,C,C,C,A,E,A,C,E,C,C,E,C,C,E,C,E,E,E,C,C,A,C,A,C,C,C,C,C,C,C,C,E,A,C,C,A,C,A,A,M,C,E,E,K,A,E,G,G,C,C,A,A,C,C,C,C,K,E,C,E,I,E,E,C,C,C,A,C,C,A,A,E,E,E,C,E,C,A,E,A,E,I,E,C,A,O,C,C,C,E,I,C,I,C,C,C,E,C,I,C,C,C,E,I,I,C,C,C,A,C,A,C,C,E,A,C,E,C,C,A,C,G,I,C,C,C,C,C,C,C,C,C,E,C,C,C,C,C,C,C,C,C,C,E,A,C,C,C,C,C,C,C,A,G,E,K,A,E,G,G,C,A,C,G,C,C,C,C,C,C,E,A,C,C,C,E,C,C,A,I,C,C,C,C,C,C,C,A,C,C,E,E,C,C,C,A,C,C,A,C,C,C,A,C,C,C,C,C,C,C,C,I,A,C,C,C,C,C,C,G,C,C,A,I,A,C,C,C,C,G,E,C,A,I,A,C,C,C,C,G,E,C,A,C,A,A,O,C,C,A,A,C,Q,E,C,C,C,C,C,C,C,A,C,C,C,C,E,O,C,C,C,C,C,C,C,A,M,A,C,A,C,E,C,C,A,I,A,C,C,C,C,C,E,C,C,A,M,A,C,A,C,E,E,C,A,I,A,A,C,A,A,C,Q,E,C,C,C,C,C,C,C,A,C,C,E,O,C,C,I,A,C,C,A,M,A,C,C,A,C,C,C,C,C,E,E,C,A,I,A,C,A,C,E,E,C,A,M,A,E,E,A,C,A,A,C,C,O,E,C,C,C,C,C,A,C,C,C,C,E,G,C,O,K,C,K,C,C,C,E,C,C,C,C,A,E,C,C,C,C,C,C,A,C,C,A,C,C,C,C,C,C,E,C,C,A,C,C,C,C,C,C,E,C,C,A,C,C,C,C,C,C,E,C,C,A,C,G,E,E,A,E,I,C,C,C,C,C,A,I,I,C,C,C,C,C,C,E,C,E,C,A,C,A,I,E,A,C,C,C,E,C,C,E,E,C,C,C,C,A,C,C,A,E,A,E,C,A,C,C,A,C,C,C,E,C,C,E,E,C,C,C,C,A,C,C,A,E,A,E,C,A,C,C,A,C,C,C,E,C,C,E,E,C,C,C,C,A,C,C,A,E,A,E,C,A,C,C,A,C,C,C,E,C,C,E,E,C,C,C,C,A,C,C,A,E,A,E,A,C,C,A,C,E,A,C,A,C,A,E,A,C,A,C,A,E,A,C,A,C,A,C,C,A,A,C,C,E,E,A,C,C,C,E,C,C,E,E,E,A,C,C,A,C,C,A,E,C,A,C,C,A,C,C,C,E,C,C,E,E,E,A,C,C,A,C,C,A,E,C,A,C,K,C,E,C,E,A,E,C,E,A,E,C,C,A,C,C,A,E,C,C,E,E,E,A,C,C,A,C,C,A,E,C,A,C,C,C,C,A,C,C,A,E,C,C,E,E,E,A,C,C,A,C,C,A,E,A,C,A,A,C,A,A,A,S,E,C,C,C,C,C,A,C,C,C,C,E,G,O,C,K,C,K,C,C,C,E,C,C,C,C,A,E,C,C,C,C,C,C,A,C,C,A,C,C,C,C,C,C,E,C,C,A,C,C,C,C,C,C,E,C,C,A,C,C,C,C,C,C,E,C,C,A,C,G,E,E,A,E,I,C,C,C,C,C,A,I,I,C,C,C,C,C,C,E,C,E,C,A,C,A,I,E,A,C,C,C,E,C,C,E,E,C,C,C,C,A,C,C,A,E,A,E,C,A,C,C,A,C,C,C,E,C,C,E,E,C,C,C,C,A,C,C,A,E,A,E,C,A,C,C,A,C,C,C,E,C,C,E,E,C,C,C,C,A,C,C,A,E,A,E,C,A,C,C,A,C,C,C,E,C,C,E,E,C,C,C,C,A,C,C,A,E,A,E,C,A,C,C,A,E,A,C,A,C,A,E,A,C,A,C,A,E,A,C,A,C,A,C,C,A,A,C,C,E,E,A,C,C,C,E,C,C,E,E,E,A,C,C,A,C,C,A,E,C,A,C,C,A,C,C,C,E,C,C,E,E,E,A,C,C,A,C,C,A,E,C,A,C,K,C,E,C,E,A,E,C,E,A,E,C,C,A,C,C,A,E,C,C,E,E,E,A,C,C,A,C,C,A,E,C,A,C,C,C,C,A,C,C,A,E,C,C,E,E,E,A,C,C,A,C,C,A,E,A,C,A,A,C,A,A,A,S,E,C,C,C,C,C,C,C,C,C,C,E,E,M,A,E,K,C,C,A,E,E,M,A,A,C,C,A,G,A,C,C,E,E,E,C,C,I,C,A,E,C,A,E,E,S,A,E,E,G,A,C,A,A,C,C,E,mB,A,E,E,C,E,A,C,C,E,E,C,A,E,E,G,A,E,A,G,A,C,C,A,C,C,C,I,C,I,C,I,C,C,C,E,E,A,C,C,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,A,E,C,E,A,E,G,A,E,G,A,C,C,A,C,E,A,E,G,A,E,G,A,C,C,E,I,C,C,C,C,C,C,C,E,E,G,G,C,C,E,C,C,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,C,E,A,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,E,A,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,E,A,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,E,A,C,G,E,C,C,A,C,G,I,C,C,E,C,K,C,C,C,C,E,C,C,C,E,C,A,C,C,G,A,E,E,C,A,C,C,C,A,C,C,A,C,A,C,A,C,C,C,C,C,I,A,C,C,G,E,A,C,C,C,I,C,I,C,I,C,I,C,C,C,E,E,A,C,C,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,E,C,A,C,A,A,C,G,E,G,A,I,C,E,G,C,E,G,G,G,C,G,E,E,C,A,A,G,A,C,A,C,C,C,G,W,C,C,E,A,E,A,E,A,E,A,C,C,A,E,C,E,E,E,A,E,G,A,C,C,E,I,C,C,E,E,C,A,A,C,C,C,E,C,E,C,A,G,C,C,A,C,C,C,C,C,C,C,C,C,C,C,E,C,A,A,C,E,E,K,A,E,E,C,A,A,C,C,K,C,C,A,C,C,O,E,C,C,C,A,C,C,C,C,C,C,E,C,E,E,M,A,E,K,C,C,A,E,E,M,A,A,C,C,A,G,A,C,C,A,C,A,E,E,S,A,E,E,C,K,C,G,A,C,C,E,E,C,A,E,E,G,A,E,G,A,C,C,A,E,C,E,U,A,E,A,G,A,C,C,A,A,C,A,C,C,A,E,G,A,E,G,A,C,C,A,C,E,A,E,G,A,E,G,A,C,C,A,A,E,C,C,A,C,C,A,C,C,A,C,C,A,C,C,I,C,A,E,E,A,E,A,O,C,E,G,C,A,C,C,C,A,C,C,I,I,C,I,C,C,C,E,E,A,C,C,C,A,C,C,C,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,C,A,I,I,C,C,C,C,C,C,C,E,E,G,G,C,C,E,C,C,A,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,E,A,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,E,A,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,E,A,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,E,A,C,C,E,C,C,A,E,A,C,C,A,C,C,E,O,C,A,E,E,E,C,C,A,C,C,C,C,I,C,I,C,I,C,C,C,E,E,A,C,C,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,A,C,G,E,G,A,I,C,E,G,C,E,G,G,G,C,G,E,E,C,A,A,G,A,C,A,C,C,C,G,W,C,C,E,A,E,A,E,A,E,A,C,C,A,E,C,A,E,E,E,A,E,G,A,C,C,E,I,C,C,E,E,C,A,A,C,C,C,E,C,E,C,A,G,C,C,A,C,C,C,C,C,C,C,C,C,C,C,E,C,A,A,C,E,E,K,A,E,E,C,A,A,C,C,K,C,C,A,C,C,O,E,C,E,G,C,E,E,M,A,C,C,G,C,C,A,C,C,I,G,E,C,C,C,C,I,A,A,K,C,sE,G,A,C,A,S,A,C,C,A,C,C,C,C,C,E,C,E,E,M,A,A,E,G,I,E,A,C,C,A,E,I,C,A,A,E,K,C,C,C,C,A,G,C,C,E,E,C,C,I,A,C,I,C,yD,C,A,C,A,C,E,E,W,A,E,K,E,C,C,C,A,E,E,O,A,E,E,C,C,A,I,C,C,G,E,G,A,E,G,G,E,C,A,A,C,C,A,E,E,E,C,C,C,I,A,C,E,C,A,A,C,C,A,C,A,E,C,C,A,C,C,C,C,G,E,C,A,A,E,E,S,A,E,E,G,A,C,A,A,C,C,E,Q,W,A,E,E,G,A,C,C,C,C,A,C,C,C,C,E,E,G,A,E,G,A,C,C,C,C,C,C,A,C,A,A,A,S,E,C,C,C,E,G,C,C,C,G,I,E,E,C,C,E,C,C,E,I,C,A,G,C,E,C,K,A,K,C,yC,C,C,A,I,E,C,C,E,C,A,C,A,C,A,G,G,C,E,E,A,E,C,G,G,A,K,C,0B,C,C,A,I,E,C,C,E,M,C,C,C,C,G,I,C,C,C,C,C,C,C,C,C,C,E,C,E,C,E,C,C,C,E,C,A,C,C,C,G,E,M,A,A,K,C,0B,C,C,A,O,C,C,A,C,C,O,E,C,E,E,E,E,C,G,U,C,E,C,C,A,E,C,E,A,E,G,A,E,G,A,C,C,A,C,E,C,G,C,C,C,C,E,G,E,E,E,C,C,C,A,I,I,C,C,G,E,C,G,C,A,C,E,C,A,C,C,C,C,C,A,E,O,C,C,A,A,C,E,C,K,E,C,C,C,C,C,C,C,C,A,C,E,I,E,E,C,C,A,C,A,E,G,C,A,C,A,C,A,C,C,E,A,M,C,E,C,C,E,I,C,G,G,A,C,C,C,C,C,G,C,G,A,C,C,E,E,C,A,E,E,U,A,E,C,C,E,E,I,C,C,C,E,G,C,A,C,A,C,C,I,C,G,C,A,C,A,C,K,C,G,A,C,C,E,E,C,A,C,M,E,C,A,M,C,E,E,K,A,E,G,A,C,A,C,A,A,C,C,A,G,C,G,E,U,A,E,C,S,C,E,C,W,C,E,C,C,S,A,C,C,C,E,C,Q,E,C,C,C,E,G,A,C,E,E,M,A,E,G,C,C,G,I,G,C,C,A,E,A,C,C,M,A,E,G,A,C,A,C,A,E,E,W,A,E,G,C,A,M,A,K,C,uB,C,C,A,I,E,A,E,G,A,C,A,C,A,C,E,C,C,S,A,E,G,E,A,C,A,C,C,A,A,C,C,A,A,C,A,C,E,E,W,A,E,G,C,A,A,E,I,C,A,E,C,A,E,E,S,A,E,G,C,A,C,C,C,C,E,C,C,E,A,C,C,E,C,C,C,A,C,C,I,C,E,E,K,A,E,G,G,C,C,A,C,C,A,C,C,E,C,O,C,C,E,G,C,C,A,C,C,C,G,A,C,E,C,G,C,C,E,G,C,C,A,C,E,A,G,A,A,C,A,A,C,C,A,A,E,A,G,C,C,E,E,U,A,E,C,S,C,E,C,C,S,A,C,C,E,C,C,A,E,I,E,C,E,A,E,Y,C,A,M,C,O,C,C,C,C,E,G,C,G,G,C,C,G,C,C,C,C,E,E,E,G,A,A,C,C,A,A,A,E,G,A,C,A,C,A,C,C,A,A,E,G,C,C,C,E,C,C,M,E,C,A,G,I,C,I,C,I,C,I,C,C,C,E,E,A,C,C,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,A,C,C,C,E,C,C,E,A,C,A,C,C,E,C,C,E,A,C,A,C,C,E,C,C,E,A,C,A,C,C,E,C,C,C,C,A,A,C,C,C,E,C,A,E,E,E,E,C,C,G,I,C,C,C,C,A,C,A,C,E,I,C,I,C,I,C,C,I,C,C,E,E,A,C,C,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,A,C,C,C,C,E,C,C,E,A,C,A,C,C,E,C,C,E,A,C,A,C,C,E,C,C,E,A,C,A,C,C,E,C,C,C,C,A,A,C,C,I,C,E,E,K,A,E,E,C,A,C,A,C,C,C,C,K,C,C,C,C,E,E,G,I,E,A,C,C,A,C,E,A,C,C,A,C,A,C,C,E,E,O,A,E,E,M,C,C,E,A,C,C,E,E,C,E,A,A,C,A,C,A,E,E,W,A,E,I,E,I,A,C,A,A,E,C,E,E,G,M,A,E,I,C,E,E,C,C,C,C,C,c,A,E,E,G,A,C,C,E,C,A,C,G,E,G,A,E,G,C,C,C,E,E,A,C,C,C,A,E,G,A,C,C,E,I,C,C,C,C,C,C,C,E,C,C,M,E,C,A,G,I,C,I,C,I,C,I,C,C,C,E,E,A,C,C,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,A,C,C,C,E,C,C,E,A,C,A,C,C,E,C,C,E,A,C,A,C,C,E,C,C,E,A,C,A,C,C,E,C,C,C,C,A,A,C,C,I,C,E,E,K,A,E,G,G,E,E,A,C,A,C,A,C,C,A,C,A,A,C,A,C,A,A,C,C,G,C,C,E,E,U,A,E,C,S,C,E,C,W,C,E,C,C,S,A,C,C,C,C,E,A,C,C,E,I,E,C,E,A,E,Y,C,A,M,C,O,C,C,C,C,E,I,E,A,E,G,A,C,C,C,C,E,C,C,C,G,C,C,C,C,E,E,E,G,A,A,C,C,A,A,C,C,A,C,C,C,E,A,A,C,A,C,A,E,E,W,A,E,G,C,A,E,I,C,A,E,C,A,E,E,S,A,E,G,C,A,C,C,C,C,E,C,A,E,E,G,A,E,G,A,C,C,A,A,C,C,C,C,C,E,A,C,C,C,C,C,E,A,C,C,C,C,C,E,A,C,C,C,C,C,A,C,C,C,C,A,K,C,C,C,E,C,C,M,E,A,C,C,C,C,C,C,C,C,C,C,A,C,C,C,C,C,C,C,C,C,C,A,C,C,C,C,C,C,C,C,C,C,A,C,C,C,C,C,C,C,C,C,C,C,A,I,C,I,C,I,C,I,C,C,C,E,E,A,E,A,C,C,A,E,A,E,C,C,A,C,A,C,C,E,C,C,E,A,C,A,C,C,E,C,C,E,A,C,A,C,C,E,C,C,E,A,C,A,C,C,E,C,C,E,A,C,C,C,E,C,A,E,E,E,E,C,C,G,I,C,C,C,C,A,C,A,C,E,E,C,C,C,C,C,C,A,C,C,C,C,C,C,C,C,A,C,C,C,C,C,C,C,C,A,C,C,C,C,C,C,C,C,C,A,I,C,I,C,I,C,I,C,C,C,E,E,A,E,A,C,C,A,E,A,E,C,C,A,C,A,C,C,E,C,C,E,A,C,A,C,C,E,C,C,E,A,C,A,C,C,E,C,C,E,A,C,A,C,C,E,C,C,C,C,A,A,C,C,I,C,E,E,K,A,E,G,G,C,C,C,C,A,C,A,C,I,C,C,C,C,E,E,G,I,E,A,C,C,A,C,E,A,C,C,A,C,C,A,A,C,C,C,E,A,A,A,C,A,C,E,E,W,A,E,G,C,A,E,I,C,A,E,C,A,E,E,S,A,E,G,C,A,C,C,C,C,E,C,A,E,E,G,A,E,G,A,C,C,A,C,A,E,E,S,A,E,E,M,C,C,E,A,A,C,A,C,C,E,W,A,E,I,E,I,A,C,A,A,E,C,E,E,G,M,A,E,I,C,E,E,C,C,C,C,C,c,A,E,E,G,A,C,C,E,C,A,C,C,E,E,G,A,E,G,C,C,C,E,E,A,C,C,C,A,E,G,A,C,C,A,A,C,C,C,C,C,E,A,C,C,C,C,C,E,A,C,C,C,C,C,E,A,C,C,C,C,C,A,I,I,C,C,C,C,C,C,C,E,C,C,M,E,C,A,I,E,C,C,A,E,C,C,A,E,C,C,A,E,C,C,A,C,C,A,C,C,C,C,C,C,C,A,C,C,A,C,C,C,C,C,C,C,A,G,C,E,C,C,C,E,C,C,C,E,C,C,C,E,C,C,C,C,E,E,A,E,A,C,C,A,C,C,A,A,C,C,A,C,C,A,C,C,A,C,A,A,C,A,C,A,C,C,C,C,C,C,C,C,A,C,C,C,E,C,C,E,A,E,C,A,C,A,C,E,C,C,E,A,E,C,A,C,A,C,E,C,C,E,A,E,C,A,C,A,C,E,C,C,E,A,C,C,A,C,C,C,G,G,E,K,A,E,G,G,E,E,A,C,A,C,A,C,C,A,C,A,A,C,A,C,A,A,C,C,G,C,C,E,E,U,A,E,C,S,C,E,C,W,C,E,C,C,S,A,C,C,C,E,C,Q,E,C,C,C,C,C,E,C,A,E,E,M,A,E,G,A,C,C,E,E,E,C,C,I,C,A,G,E,C,A,E,E,S,A,E,E,G,A,C,A,A,C,C,E,Y,A,E,E,C,E,A,C,K,A,K,C,wC,C,C,A,I,E,A,E,G,A,C,C,A,C,C,A,C,C,A,C,E,A,A,C,A,C,A,E,E,W,A,E,G,C,A,E,I,C,A,E,C,E,E,S,A,E,G,C,A,A,C,A,C,C,A,E,W,A,E,G,C,A,E,I,C,A,E,C,A,E,E,S,A,E,G,C,A,C,C,C,C,E,C,E,A,E,G,A,E,G,A,C,C,A,C,E,A,E,G,A,E,G,A,C,C,A,E,E,A,E,C,C,A,C,A,A,A,A,C,A,C,A,E,G,A,E,G,A,C,C,A,A,C,C,C,C,C,E,A,C,C,C,C,C,E,A,C,C,C,C,C,E,A,C,C,C,C,C,A,I,I,C,C,C,C,C,C,C,E,E,G,G,E,C,A,G,C,E,C,C,C,E,C,C,C,E,C,C,C,E,C,C,C,C,E,E,A,E,A,C,C,A,E,A,E,C,A,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,E,A,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,E,A,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,E,A,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,E,A,C,C,A,C,C,C,E,C,C,A,C,C,A,C,C,C,E,C,C,A,C,C,A,C,C,C,E,C,C,A,C,C,A,C,C,C,E,C,A,C,A,A,C,G,E,A,E,C,A,A,I,C,E,G,C,E,G,G,C,C,C,A,C,G,E,E,C,A,C,E,A,C,C,A,C,I,C,I,C,I,C,C,C,E,E,A,E,A,C,C,A,E,A,E,C,C,A,C,G,E,C,E,E,E,A,E,I,W,C,C,E,A,E,A,E,A,E,A,C,C,C,A,I,I,C,C,E,E,C,A,A,C,C,C,E,C,E,C,A,G,C,C,A,C,C,C,C,C,C,C,C,C,C,C,E,C,A,A,C,E,E,K,A,E,E,C,A,A,C,C,I,C,E,E,K,A,E,G,G,C,C,A,C,C,A,C,C,E,C,O,C,C,E,G,C,C,A,C,C,E,E,E,C,A,A,C,A,M,C,C,E,G,C,C,A,C,E,C,E,G,A,A,A,A,C,A,A,C,A,C,A,E,G,C,C,E,E,U,A,E,C,S,C,E,C,W,C,E,C,S,C,E,C,Y,E,C,C,C,C,Q,A,C,C,C,C,C,C,C,G,E,G,G,C,C,C,M,A,K,C,+B,C,C,A,S,E,C,C,C,C,C,E,E,E,E,C,C,E,K,C,C,E,E,C,C,E,C,A,A,C,C,E,I,C,C,C,C,C,C,E,K,C,C,C,E,C,C,C,C,C,E,C,C,C,C,C,A,O,C,C,A,C,C,O,I,I,E,A,A,E,G,A,C,C,A,E,E,C,E,E,C,A,C,C,E,G,E,E,C,A,C,E,E,E,A,C,E,E,A,E,G,A,E,A,E,A,C,A,A,C,C,G,G,C,E,G,C,C,I,C,C,A,C,A,I,E,E,I,C,E,C,A,C,C,C,C,C,E,U,A,E,G,C,E,E,A,C,C,U,A,E,E,C,C,A,M,C,C,C,A,E,G,G,G,G,E,C,C,A,C,C,E,K,C,M,C,G,I,C,C,C,G,E,C,G,C,G,C,C,G,C,C,K,C,G,C,C,E,C,C,C,E,E,A,C,A,A,I,E,E,E,C,A,A,E,E,C,E,E,I,E,C,C,A,E,K,G,E,K,E,W,C,C,A,C,A,A,I,E,C,O,C,C,E,G,I,C,S,C,S,C,S,C,C,C,I,E,C,G,A,E,C,O,C,E,M,C,E,E,E,C,E,A,E,A,A,C,C,A,E,A,C,A,A,C,C,C,C,C,W,A,E,I,E,G,C,A,C,A,E,C,E,E,E,O,A,E,I,E,E,C,A,A,C,C,A,C,C,A,C,C,E,C,A,I,G,C,C,C,E,M,C,A,C,C,A,I,E,C,C,E,E,E,C,A,E,A,K,C,C,C,E,C,K,C,E,A,C,E,M,C,A,C,C,A,I,C,A,G,A,C,C,A,C,E,C,E,C,C,M,C,A,C,A,C,E,E,K,A,E,G,G,C,C,C,A,C,A,C,C,I,C,C,E,G,I,C,S,C,S,C,C,S,C,C,I,E,C,E,A,C,C,A,C,C,A,E,A,C,A,A,C,C,C,C,C,W,A,E,I,E,I,A,C,A,A,E,C,E,E,G,M,A,E,I,I,E,A,C,C,A,A,C,C,M,A,C,C,C,C,I,E,E,C,C,C,E,G,A,C,C,I,E,C,C,C,C,A,C,C,G,A,C,C,A,A,C,A,E,I,C,A,G,A,C,A,C,A,E,E,U,A,E,E,C,E,M,A,A,C,I,C,4B,C,C,A,I,E,C,C,E,C,A,E,E,C,E,C,C,A,C,G,C,E,E,K,A,E,G,G,C,C,C,A,A,C,A,A,A,C,A,C,A,A,I,E,C,E,A,E,A,C,E,C,A,C,G,C,E,A,C,C,K,C,a,C,I,C,C,A,C,E,E,A,E,C,A,E,C,E,A,K,I,E,E,0B,E,C,E,C,E,C,A,G,A,C,C,E,C,C,E,A,G,C,E,E,C,C,A,C,C,C,M,E,C,E,I,G,C,Y,W,E,W,C,M,C,C,C,E,a,C,C,C,A,C,C,W,C,I,A,C,A,S,E,C,C,C,E,G,C,C,C,E,M,A,E,E,E,C,A,C,A,C,E,E,C,A,I,E,A,K,C,6C,C,C,A,I,E,C,A,E,E,G,A,E,G,E,C,C,A,C,C,I,I,C,I,C,C,C,E,E,A,C,C,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,A,O,C,C,C,C,C,E,A,C,A,A,C,C,C,C,E,A,C,A,A,C,C,C,C,E,A,C,A,A,C,C,C,C,E,A,C,A,C,A,A,G,C,K,E,C,C,C,E,G,E,C,E,M,A,E,E,E,C,A,C,A,C,E,E,C,A,I,E,A,K,C,6C,C,C,A,I,E,C,A,E,E,G,A,E,G,E,C,C,A,C,I,C,I,C,I,C,C,C,E,E,A,C,C,C,A,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,C,A,O,C,C,C,C,C,E,A,C,A,A,C,C,C,C,E,A,C,A,A,C,C,C,C,E,A,C,A,A,C,C,C,C,E,A,C,A,C,A,A,E,C,C,I,C,G,E,U,A,E,C,S,C,E,C,W,C,E,C,S,C,E,C,Y,E,C,C,C,C,Q,A,C,C,C,C,C,C,C,I,E,E,G,E,A,C,C,C,C,I,E,C,C,K,E,E,G,I,I,C,C,C,C,I,E,C,C,K,E,E,G,I,A,C,E,C,E,C,C,A,E,E,G,K,I,C,E,C,C,I,E,M,E,C,C,A,S,I,I,E,A,A,E,G,A,C,C,A,I,A,A,U,C,E,C,K,C,C,A,E,I,C,S,C,E,C,C,A,E,C,E,A,E,A,C,A,E,C,A,C,C,C,C,A,C,C,W,A,E,I,E,A,C,G,C,A,E,C,E,C,C,S,A,E,I,E,C,C,A,C,C,A,C,A,E,E,G,A,E,G,E,A,C,A,C,A,C,C,A,C,C,C,C,C,E,A,C,C,C,C,C,E,A,C,C,C,C,C,A,E,C,C,A,G,C,I,I,C,E,E,C,A,E,C,A,C,E,G,C,C,C,A,I,E,C,A,E,E,G,A,E,G,I,G,C,A,C,A,C,C,C,C,C,E,C,K,C,C,E,C,C,C,A,G,C,E,C,C,C,E,C,C,C,C,E,E,A,E,A,C,C,A,E,A,E,C,A,C,A,C,C,C,C,C,C,E,A,C,A,C,C,C,C,C,C,E,A,C,C,A,E,C,C,A,C,A,I,A,C,C,A,C,Q,E,K,C,C,E,E,C,C,A,E,C,E,C,C,E,A,E,K,A,E,G,G,C,C,A,C,C,A,C,C,K,E,C,C,C,C,C,E,E,E,E,C,C,E,M,C,E,E,E,A,E,E,C,A,A,C,C,E,I,C,C,C,C,C,C,E,C,C,E,C,C,C,C,C,E,C,C,C,C,C,A,C,C,E,C,E,I,A,C,C,E,E,C,E,E,G,A,E,G,A,C,C,A,A,C,C,C,C,C,A,E,A,C,C,C,C,C,E,A,C,C,C,C,C,E,A,C,C,C,C,C,A,M,I,C,I,C,I,C,I,C,C,C,E,E,E,A,C,C,A,A,E,A,E,C,A,C,A,C,A,C,C,C,E,A,C,A,A,C,C,C,C,E,A,C,A,A,C,C,C,C,E,A,C,A,A,C,C,C,C,E,A,C,A,C,A,A,C,C,O,E,C,C,C,C,C,E,C,G,E,C,E,A,E,S,A,E,G,A,C,A,C,A,E,C,E,I,A,C,C,E,E,C,C,G,A,E,C,C,A,G,A,E,C,C,A,E,C,E,E,K,A,E,G,C,C,A,A,C,A,C,A,I,C,E,E,M,A,E,E,C,C,C,E,C,E,C,C,A,E,E,G,G,C,A,C,K,I,G,A,E,A,E,C,I,C,C,C,A,C,O,C,C,E,E,E,M,C,A,A,C,A,G,Q,C,S,C,C,C,I,E,C,C,E,A,E,A,C,C,C,E,A,A,C,E,C,C,A,A,C,C,A,A,C,A,A,C,C,C,E,W,A,E,I,E,G,C,A,C,A,E,C,E,E,E,O,A,E,I,I,C,C,A,C,A,C,C,C,U,C,E,M,C,A,E,A,C,C,O,A,C,C,A,C,E,C,E,C,C,M,C,A,C,A,E,C,E,C,E,E,E,C,C,E,A,C,E,E,A,C,C,C,E,A,E,G,G,C,C,C,A,C,A,C,C,I,C,C,E,E,E,M,C,C,A,A,A,I,E,C,C,Q,A,C,C,I,K,C,C,C,C,S,C,C,C,I,E,C,E,C,C,A,A,C,A,A,C,A,A,E,C,C,W,A,E,I,E,I,A,C,A,A,E,C,E,E,G,M,A,E,I,I,E,A,C,C,A,C,C,A,E,C,A,C,A,E,M,A,C,C,C,C,K,E,E,A,C,C,A,C,C,E,C,A,E,A,C,E,C,C,C,C,C,A,G,C,C,E,E,E,C,C,M,A,E,E,C,E,K,C,E,A,C,C,C,C,G,A,E,G,G,A,I,C,A,C,A,qB,C,C,A,M,C,E,E,K,A,E,G,G,C,C,C,A,C,A,A,C,A,C,A,A,E,C,C,C,C,E,M,C,A,I,E,C,C,M,C,C,C,C,E,G,E,C,K,E,C,I,E,K,M,A,K,C,mC,C,C,A,I,E,A,E,G,A,C,C,C,E,C,E,E,C,K,C,E,E,A,G,C,C,E,C,A,A,I,E,C,A,E,E,G,A,E,G,A,C,C,A,A,C,C,C,C,C,E,A,C,C,C,C,C,A,C,G,C,G,C,C,C,C,E,C,A,C,C,C,C,C,C,E,C,A,C,G,I,E,C,A,C,E,C,C,C,K,C,G,A,C,C,G,C,C,A,A,G,I,C,I,C,I,C,I,C,C,C,E,E,A,E,A,C,C,A,C,C,E,C,A,C,C,E,C,A,C,C,C,A,E,A,E,A,C,A,C,A,E,A,E,G,A,C,A,A,C,A,C,C,C,A,E,A,C,A,A,C,E,C,A,C,C,C,C,A,A,C,A,C,A,C,C,C,E,A,C,A,A,C,C,C,C,C,C,A,A,C,C,A,A,A,I,C,C,C,A,C,A,C,O,C,A,C,C,C,E,G,E,C,K,C,C,E,C,I,E,K,M,A,K,C,oC,C,C,A,I,E,A,E,G,A,C,C,A,E,C,C,G,C,C,C,C,C,C,A,C,E,C,G,E,E,E,A,A,G,C,C,E,C,A,A,A,I,E,C,A,E,E,G,A,E,G,A,C,C,A,A,C,C,C,C,C,E,A,C,C,C,C,C,A,C,G,C,G,C,C,C,C,E,C,A,C,E,C,C,C,C,A,C,E,C,A,C,G,I,E,C,A,C,E,G,A,C,A,C,G,A,C,C,G,C,C,A,A,G,I,C,I,C,I,C,I,C,C,C,E,E,A,E,A,C,C,A,C,C,C,G,A,C,A,C,A,C,C,C,A,C,C,E,C,A,C,C,C,A,E,A,E,A,C,A,C,A,E,A,C,A,A,C,E,C,A,E,A,C,A,A,C,E,C,A,C,C,C,C,A,A,C,A,C,A,C,C,C,E,A,C,A,A,C,C,C,C,C,C,A,A,C,C,A,A,I,C,C,C,A,C,A,C,C,A,E,I,E,G,K,C,C,C,C,I,A,C,C,G,C,A,C,C,A,K,C,C,E,E,Q,E,A,E,C,S,C,C,C,C,A,G,C,C,A,C,M,C,C,E,G,C,E,M,C,C,E,M,C,A,C,E,C,C,M,A,K,C,0B,C,C,A,G,A,C,K,G,G,C,M,A,K,C,sD,C,C,A,I,E,C,A,E,E,W,A,E,E,G,G,G,C,A,C,C,E,K,C,E,C,E,A,C,A,C,A,C,A,C,M,C,C,E,G,E,M,C,C,A,E,C,E,E,M,C,C,A,E,C,C,I,A,K,C,2B,C,C,A,I,E,C,A,E,E,S,A,E,G,G,E,E,A,C,C,G,C,E,C,E,A,C,A,C,A,E,E,U,A,E,E,C,O,C,C,C,C,C,C,G,K,C,A,A,K,C,wB,C,C,A,O,E,C,O,C,C,C,C,C,C,I,C,C,C,C,A,C,C,C,O,C,C,C,A,C,A,E,C,C,A,C,C,M,C,C,E,E,U,A,E,C,S,C,C,C,C,A,E,C,C,C,A,C,M,C,C,E,G,C,E,M,C,A,M,A,K,C,0B,C,C,A,I,E,C,G,U,C,C,C,C,C,A,A,I,C,C,C,C,C,C,E,M,C,A,C,C,E,E,C,E,C,E,C,C,C,A,I,A,E,C,E,A,E,G,A,E,G,A,C,C,K,C,C,C,C,G,S,A,C,A,C,C,C,C,E,E,I,E,C,A,C,A,E,E,K,C,E,C,E,A,C,A,C,A,C,A,C,M,C,C,E,G,E,M,C,C,C,C,M,A,K,C,2B,C,C,A,I,E,C,A,E,E,S,A,E,G,E,C,A,E,E,A,C,C,C,A,E,G,A,C,C,A,E,K,C,E,C,E,A,C,C,E,E,C,C,C,C,C,C,C,C,E,C,C,A,E,C,C,A,E,E,C,I,C,E,C,A,C,C,G,U,C,C,C,C,C,C,C,E,E,C,A,K,C,C,E,C,C,C,I,E,A,K,C,wB,C,C,A,I,I,C,C,E,C,A,C,E,C,E,C,A,G,A,C,I,C,C,C,C,C,C,M,A,K,C,wB,C,C,A,O,E,C,O,C,C,C,C,C,C,I,C,C,C,C,A,C,C,C,O,C,C,C,C,C,E,C,A,C,C,A,C,C,A,C,C,M,C,a,W,K,C,U,I,G,G,O,Q,Y,G,Y,C,Q,E,A,C,E,6BCljB1E,OAAO,cAAc,CAAC,EAAS,aAAc,CAAE,OAAO,CAAK,GAC3D,EAAQ,KAAK,CAAG,EAAQ,UAAU,CAAG,EAAQ,YAAY,CAAG,EAAQ,uBAAuB,CAAG,EAAQ,gBAAgB,CAAG,EAAQ,qBAAqB,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","ignoreList":[0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,52,53,54,55,56,57,58,59,60,61,62,63,64,65,66,67,68,69,70,71,72,73,74,75,76,77,78,79,80,81,82,83,84,85,86]}