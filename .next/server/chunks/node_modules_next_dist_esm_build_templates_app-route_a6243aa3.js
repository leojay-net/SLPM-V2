module.exports=[767145,__turbopack_context__=>{"use strict";let src_url_equal_anchor,current_component;__turbopack_context__.s(["handler",()=>handler,"patchFetch",()=>patchFetch,"routeModule",()=>routeModule,"serverHooks",()=>serverHooks,"workAsyncStorage",()=>workAsyncStorage,"workUnitAsyncStorage",()=>workUnitAsyncStorage],767145);var Y,q,R,H,F,J,X,K,C,T,P,$,ee,k,W,__TURBOPACK__imported__module__747909__=__turbopack_context__.i(747909),__TURBOPACK__imported__module__174017__=__turbopack_context__.i(174017),__TURBOPACK__imported__module__996250__=__turbopack_context__.i(996250),__TURBOPACK__imported__module__759756__=__turbopack_context__.i(759756),__TURBOPACK__imported__module__561916__=__turbopack_context__.i(561916),__TURBOPACK__imported__module__869741__=__turbopack_context__.i(869741),__TURBOPACK__imported__module__316795__=__turbopack_context__.i(316795),__TURBOPACK__imported__module__487718__=__turbopack_context__.i(487718),__TURBOPACK__imported__module__995169__=__turbopack_context__.i(995169),__TURBOPACK__imported__module__47587__=__turbopack_context__.i(47587),__TURBOPACK__imported__module__666012__=__turbopack_context__.i(666012),__TURBOPACK__imported__module__570101__=__turbopack_context__.i(570101),__TURBOPACK__imported__module__626937__=__turbopack_context__.i(626937),__TURBOPACK__imported__module__10372__=__turbopack_context__.i(10372),__TURBOPACK__imported__module__193695__=__turbopack_context__.i(193695),__TURBOPACK__imported__module__52474__=__turbopack_context__.i(52474),__TURBOPACK__imported__module__600220__=__turbopack_context__.i(600220);__turbopack_context__.s(["POST",()=>POST],151739);var __TURBOPACK__imported__module__89171__=__turbopack_context__.i(89171),__TURBOPACK__imported__module__322632__=__turbopack_context__.i(322632);function noop(){}function run(e){return e()}function blank_object(){return Object.create(null)}function run_all(e){e.forEach(run)}function is_function(e){return"function"==typeof e}function safe_not_equal(e,t){return e!=e?t==t:e!==t||e&&"object"==typeof e||"function"==typeof e}function src_url_equal(e,t){return src_url_equal_anchor||(src_url_equal_anchor=document.createElement("a")),src_url_equal_anchor.href=t,e===src_url_equal_anchor.href}function is_empty(e){return 0===Object.keys(e).length}function null_to_empty(e){return null==e?"":e}function append(e,t){e.appendChild(t)}function append_styles(e,t,r){let n=get_root_for_style(e);if(!n.getElementById(t)){let e=element("style");e.id=t,e.textContent=r,append_stylesheet(n,e)}}function get_root_for_style(e){if(!e)return document;let t=e.getRootNode?e.getRootNode():e.ownerDocument;return t&&t.host?t:e.ownerDocument}function append_stylesheet(e,t){return append(e.head||e,t),t.sheet}function insert(e,t,r){e.insertBefore(t,r||null)}function detach(e){e.parentNode&&e.parentNode.removeChild(e)}function destroy_each(e,t){for(let r=0;r<e.length;r+=1)e[r]&&e[r].d(t)}function element(e){return document.createElement(e)}function text(e){return document.createTextNode(e)}function space(){return text(" ")}function listen(e,t,r,n){return e.addEventListener(t,r,n),()=>e.removeEventListener(t,r,n)}function attr(e,t,r){null==r?e.removeAttribute(t):e.getAttribute(t)!==r&&e.setAttribute(t,r)}function children(e){return Array.from(e.childNodes)}function set_data(e,t){t=""+t,e.data!==t&&(e.data=t)}function set_current_component(e){current_component=e}function get_current_component(){if(!current_component)throw Error("Function called outside component initialization");return current_component}function onMount(e){get_current_component().$$.on_mount.push(e)}let dirty_components=[],binding_callbacks=[],render_callbacks=[],flush_callbacks=[],resolved_promise=Promise.resolve(),update_scheduled=!1;function schedule_update(){update_scheduled||(update_scheduled=!0,resolved_promise.then(flush))}function add_render_callback(e){render_callbacks.push(e)}let seen_callbacks=new Set,flushidx=0;function flush(){if(0!==flushidx)return;let e=current_component;do{try{for(;flushidx<dirty_components.length;){let e=dirty_components[flushidx];flushidx++,set_current_component(e),update(e.$$)}}catch(e){throw dirty_components.length=0,flushidx=0,e}for(set_current_component(null),dirty_components.length=0,flushidx=0;binding_callbacks.length;)binding_callbacks.pop()();for(let e=0;e<render_callbacks.length;e+=1){let t=render_callbacks[e];seen_callbacks.has(t)||(seen_callbacks.add(t),t())}render_callbacks.length=0}while(dirty_components.length)for(;flush_callbacks.length;)flush_callbacks.pop()();update_scheduled=!1,seen_callbacks.clear(),set_current_component(e)}function update(e){if(null!==e.fragment){e.update(),run_all(e.before_update);let t=e.dirty;e.dirty=[-1],e.fragment&&e.fragment.p(e.ctx,t),e.after_update.forEach(add_render_callback)}}function flush_render_callbacks(e){let t=[],r=[];render_callbacks.forEach(n=>-1===e.indexOf(n)?t.push(n):r.push(n)),r.forEach(e=>e()),render_callbacks=t}let outroing=new Set;function transition_in(e,t){e&&e.i&&(outroing.delete(e),e.i(t))}function mount_component(e,t,r,n){let{fragment:o,after_update:i}=e.$$;o&&o.m(t,r),n||add_render_callback(()=>{let t=e.$$.on_mount.map(run).filter(is_function);e.$$.on_destroy?e.$$.on_destroy.push(...t):run_all(t),e.$$.on_mount=[]}),i.forEach(add_render_callback)}function destroy_component(e,t){let r=e.$$;null!==r.fragment&&(flush_render_callbacks(r.after_update),run_all(r.on_destroy),r.fragment&&r.fragment.d(t),r.on_destroy=r.fragment=null,r.ctx=[])}function make_dirty(e,t){-1===e.$$.dirty[0]&&(dirty_components.push(e),schedule_update(),e.$$.dirty.fill(0)),e.$$.dirty[t/31|0]|=1<<t%31}function init$1(e,t,r,n,o,i,a,s=[-1]){let l=current_component;set_current_component(e);let c=e.$$={fragment:null,ctx:[],props:i,update:noop,not_equal:o,bound:blank_object(),on_mount:[],on_destroy:[],on_disconnect:[],before_update:[],after_update:[],context:new Map(t.context||(l?l.$$.context:[])),callbacks:blank_object(),dirty:s,skip_bound:!1,root:t.target||l.$$.root};a&&a(c.root);let u=!1;if(c.ctx=r?r(e,t.props||{},(t,r,...n)=>{let i=n.length?n[0]:r;return c.ctx&&o(c.ctx[t],c.ctx[t]=i)&&(!c.skip_bound&&c.bound[t]&&c.bound[t](i),u&&make_dirty(e,t)),r}):[],c.update(),u=!0,run_all(c.before_update),c.fragment=!!n&&n(c.ctx),t.target){if(t.hydrate){let e=children(t.target);c.fragment&&c.fragment.l(e),e.forEach(detach)}else c.fragment&&c.fragment.c();t.intro&&transition_in(e.$$.fragment),mount_component(e,t.target,t.anchor,t.customElement),flush()}set_current_component(l)}class SvelteComponent{$destroy(){destroy_component(this,1),this.$destroy=noop}$on(e,t){if(!is_function(t))return noop;let r=this.$$.callbacks[e]||(this.$$.callbacks[e]=[]);return r.push(t),()=>{let e=r.indexOf(t);-1!==e&&r.splice(e,1)}}$set(e){this.$$set&&!is_empty(e)&&(this.$$.skip_bound=!0,this.$$set(e),this.$$.skip_bound=!1)}}function add_css(e){append_styles(e,"svelte-j32xt0",`.sr-only.svelte-j32xt0{position:absolute;width:1px;height:1px;padding:0;margin:-1px;overflow:hidden;clip:rect(0, 0, 0, 0);white-space:nowrap;border-width:0}.fixed.svelte-j32xt0{position:fixed}.inset-0.svelte-j32xt0{inset:0px}.z-40.svelte-j32xt0{z-index:40}.z-50.svelte-j32xt0{z-index:50}.mx-6.svelte-j32xt0{margin-left:1.5rem;margin-right:1.5rem}.mb-4.svelte-j32xt0{margin-bottom:1rem}.flex.svelte-j32xt0{display:flex}.h-8.svelte-j32xt0{height:2rem}.w-8.svelte-j32xt0{width:2rem}.w-full.svelte-j32xt0{width:100%}.max-w-\\[500px\\].svelte-j32xt0{max-width:500px}@keyframes svelte-j32xt0-spin{to{transform:rotate(360deg)}}.animate-spin.svelte-j32xt0{animation:svelte-j32xt0-spin 1s linear infinite}.cursor-pointer.svelte-j32xt0{cursor:pointer}.flex-col.svelte-j32xt0{flex-direction:column}.items-center.svelte-j32xt0{align-items:center}.justify-center.svelte-j32xt0{justify-content:center}.justify-between.svelte-j32xt0{justify-content:space-between}.gap-3.svelte-j32xt0{gap:0.75rem}.rounded-full.svelte-j32xt0{border-radius:9999px}.rounded-md.svelte-j32xt0{border-radius:0.375rem}.bg-black\\/25.svelte-j32xt0{background-color:rgb(0 0 0 / 0.25)}.bg-slate-100.svelte-j32xt0{--tw-bg-opacity:1;background-color:rgb(241 245 249 / var(--tw-bg-opacity, 1))}.bg-slate-50.svelte-j32xt0{--tw-bg-opacity:1;background-color:rgb(248 250 252 / var(--tw-bg-opacity, 1))}.fill-neutral-600.svelte-j32xt0{fill:#525252}.p-3.svelte-j32xt0{padding:0.75rem}.p-4.svelte-j32xt0{padding:1rem}.text-center.svelte-j32xt0{text-align:center}.text-xl.svelte-j32xt0{font-size:1.25rem;line-height:1.75rem}.text-neutral-300.svelte-j32xt0{--tw-text-opacity:1;color:rgb(212 212 212 / var(--tw-text-opacity, 1))}.antialiased.svelte-j32xt0{-webkit-font-smoothing:antialiased;-moz-osx-font-smoothing:grayscale}.shadow.svelte-j32xt0{--tw-shadow:0 1px 3px 0 rgb(0 0 0 / 0.1), 0 1px 2px -1px rgb(0 0 0 / 0.1);--tw-shadow-colored:0 1px 3px 0 var(--tw-shadow-color), 0 1px 2px -1px var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.shadow-sm.svelte-j32xt0{--tw-shadow:0 1px 2px 0 rgb(0 0 0 / 0.05);--tw-shadow-colored:0 1px 2px 0 var(--tw-shadow-color);box-shadow:var(--tw-ring-offset-shadow, 0 0 #0000), var(--tw-ring-shadow, 0 0 #0000), var(--tw-shadow)}.filter.svelte-j32xt0{filter:var(--tw-blur) var(--tw-brightness) var(--tw-contrast) var(--tw-grayscale) var(--tw-hue-rotate) var(--tw-invert) var(--tw-saturate) var(--tw-sepia) var(--tw-drop-shadow)}.backdrop-blur-sm.svelte-j32xt0{--tw-backdrop-blur:blur(4px);-webkit-backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia);backdrop-filter:var(--tw-backdrop-blur) var(--tw-backdrop-brightness) var(--tw-backdrop-contrast) var(--tw-backdrop-grayscale) var(--tw-backdrop-hue-rotate) var(--tw-backdrop-invert) var(--tw-backdrop-opacity) var(--tw-backdrop-saturate) var(--tw-backdrop-sepia)}.transition-colors.svelte-j32xt0{transition-property:color, background-color, border-color, text-decoration-color, fill, stroke;transition-timing-function:cubic-bezier(0.4, 0, 0.2, 1);transition-duration:150ms}.svelte-j32xt0,.svelte-j32xt0::before,.svelte-j32xt0::after{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x:  ;--tw-pan-y:  ;--tw-pinch-zoom:  ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position:  ;--tw-gradient-via-position:  ;--tw-gradient-to-position:  ;--tw-ordinal:  ;--tw-slashed-zero:  ;--tw-numeric-figure:  ;--tw-numeric-spacing:  ;--tw-numeric-fraction:  ;--tw-ring-inset:  ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur:  ;--tw-brightness:  ;--tw-contrast:  ;--tw-grayscale:  ;--tw-hue-rotate:  ;--tw-invert:  ;--tw-saturate:  ;--tw-sepia:  ;--tw-drop-shadow:  ;--tw-backdrop-blur:  ;--tw-backdrop-brightness:  ;--tw-backdrop-contrast:  ;--tw-backdrop-grayscale:  ;--tw-backdrop-hue-rotate:  ;--tw-backdrop-invert:  ;--tw-backdrop-opacity:  ;--tw-backdrop-saturate:  ;--tw-backdrop-sepia:  ;--tw-contain-size:  ;--tw-contain-layout:  ;--tw-contain-paint:  ;--tw-contain-style:  }.svelte-j32xt0::backdrop{--tw-border-spacing-x:0;--tw-border-spacing-y:0;--tw-translate-x:0;--tw-translate-y:0;--tw-rotate:0;--tw-skew-x:0;--tw-skew-y:0;--tw-scale-x:1;--tw-scale-y:1;--tw-pan-x:  ;--tw-pan-y:  ;--tw-pinch-zoom:  ;--tw-scroll-snap-strictness:proximity;--tw-gradient-from-position:  ;--tw-gradient-via-position:  ;--tw-gradient-to-position:  ;--tw-ordinal:  ;--tw-slashed-zero:  ;--tw-numeric-figure:  ;--tw-numeric-spacing:  ;--tw-numeric-fraction:  ;--tw-ring-inset:  ;--tw-ring-offset-width:0px;--tw-ring-offset-color:#fff;--tw-ring-color:rgb(59 130 246 / 0.5);--tw-ring-offset-shadow:0 0 #0000;--tw-ring-shadow:0 0 #0000;--tw-shadow:0 0 #0000;--tw-shadow-colored:0 0 #0000;--tw-blur:  ;--tw-brightness:  ;--tw-contrast:  ;--tw-grayscale:  ;--tw-hue-rotate:  ;--tw-invert:  ;--tw-saturate:  ;--tw-sepia:  ;--tw-drop-shadow:  ;--tw-backdrop-blur:  ;--tw-backdrop-brightness:  ;--tw-backdrop-contrast:  ;--tw-backdrop-grayscale:  ;--tw-backdrop-hue-rotate:  ;--tw-backdrop-invert:  ;--tw-backdrop-opacity:  ;--tw-backdrop-saturate:  ;--tw-backdrop-sepia:  ;--tw-contain-size:  ;--tw-contain-layout:  ;--tw-contain-paint:  ;--tw-contain-style:  }.svelte-j32xt0,.svelte-j32xt0::before,.svelte-j32xt0::after{box-sizing:border-box;border-width:0;border-style:solid;border-color:#e5e7eb}.svelte-j32xt0::before,.svelte-j32xt0::after{--tw-content:''}:host{line-height:1.5;-webkit-text-size-adjust:100%;-moz-tab-size:4;-o-tab-size:4;tab-size:4;font-family:ui-sans-serif, system-ui, sans-serif, "Apple Color Emoji", "Segoe UI Emoji", "Segoe UI Symbol", "Noto Color Emoji";font-feature-settings:normal;font-variation-settings:normal;-webkit-tap-highlight-color:transparent}h1.svelte-j32xt0{font-size:inherit;font-weight:inherit}a.svelte-j32xt0{color:inherit;text-decoration:inherit}.svelte-j32xt0:-moz-focusring{outline:auto}.svelte-j32xt0:-moz-ui-invalid{box-shadow:none}.svelte-j32xt0::-webkit-inner-spin-button,.svelte-j32xt0::-webkit-outer-spin-button{height:auto}.svelte-j32xt0::-webkit-search-decoration{-webkit-appearance:none}.svelte-j32xt0::-webkit-file-upload-button{-webkit-appearance:button;font:inherit}h1.svelte-j32xt0{margin:0}ul.svelte-j32xt0{list-style:none;margin:0;padding:0}[role="button"].svelte-j32xt0{cursor:pointer}.svelte-j32xt0:disabled{cursor:default}img.svelte-j32xt0,svg.svelte-j32xt0{display:block;vertical-align:middle}img.svelte-j32xt0{max-width:100%;height:auto}.svelte-j32xt0{font-family:Nunito, -apple-system, BlinkMacSystemFont, Segoe UI, Roboto,
      Oxygen, Ubuntu, Cantarell, Fira Sans, Droid Sans, Helvetica Neue,
      sans-serif;-webkit-font-smoothing:antialiased}.hover\\:bg-slate-200.svelte-j32xt0:hover{--tw-bg-opacity:1;background-color:rgb(226 232 240 / var(--tw-bg-opacity, 1))}.dark\\:border-neutral-600.svelte-j32xt0:is(.dark *){--tw-border-opacity:1;border-color:rgb(82 82 82 / var(--tw-border-opacity, 1))}.dark\\:bg-neutral-800.svelte-j32xt0:is(.dark *){--tw-bg-opacity:1;background-color:rgb(38 38 38 / var(--tw-bg-opacity, 1))}.dark\\:bg-neutral-900.svelte-j32xt0:is(.dark *){--tw-bg-opacity:1;background-color:rgb(23 23 23 / var(--tw-bg-opacity, 1))}.dark\\:fill-neutral-300.svelte-j32xt0:is(.dark *){fill:#d4d4d4}.dark\\:text-neutral-600.svelte-j32xt0:is(.dark *){--tw-text-opacity:1;color:rgb(82 82 82 / var(--tw-text-opacity, 1))}.dark\\:text-white.svelte-j32xt0:is(.dark *){--tw-text-opacity:1;color:rgb(255 255 255 / var(--tw-text-opacity, 1))}.dark\\:hover\\:bg-neutral-700.svelte-j32xt0:hover:is(.dark *){--tw-bg-opacity:1;background-color:rgb(64 64 64 / var(--tw-bg-opacity, 1))}`)}function get_each_context(e,t,r){let n=e.slice();return n[20]=t[r],n}function get_each_context_1(e,t,r){let n=e.slice();return n[23]=t[r],n}function create_else_block(e){let t,r;return{c(){attr(t=element("img"),"alt",e[23].name),src_url_equal(t.src,r=e[23].icon)||attr(t,"src",r),attr(t,"class","w-8 h-8 rounded-full svelte-j32xt0")},m(e,r){insert(e,t,r)},p:noop,d(e){e&&detach(t)}}}function create_if_block(e){let t;return{c(){(t=element("div")).innerHTML=`<svg aria-hidden="true" class="w-8 h-8 text-neutral-300 animate-spin dark:text-neutral-600 fill-neutral-600 dark:fill-neutral-300 svelte-j32xt0" viewBox="0 0 100 101" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M100 50.5908C100 78.2051 77.6142 100.591 50 100.591C22.3858 100.591 0 78.2051 0 50.5908C0 22.9766 22.3858 0.59082 50 0.59082C77.6142 0.59082 100 22.9766 100 50.5908ZM9.08144 50.5908C9.08144 73.1895 27.4013 91.5094 50 91.5094C72.5987 91.5094 90.9186 73.1895 90.9186 50.5908C90.9186 27.9921 72.5987 9.67226 50 9.67226C27.4013 9.67226 9.08144 27.9921 9.08144 50.5908Z" fill="currentColor" class="svelte-j32xt0"></path><path d="M93.9676 39.0409C96.393 38.4038 97.8624 35.9116 97.0079 33.5539C95.2932 28.8227 92.871 24.3692 89.8167 20.348C85.8452 15.1192 80.8826 10.7238 75.2124 7.41289C69.5422 4.10194 63.2754 1.94025 56.7698 1.05124C51.7666 0.367541 46.6976 0.446843 41.7345 1.27873C39.2613 1.69328 37.813 4.19778 38.4501 6.62326C39.0873 9.04874 41.5694 10.4717 44.0505 10.1071C47.8511 9.54855 51.7191 9.52689 55.5402 10.0491C60.8642 10.7766 65.9928 12.5457 70.6331 15.2552C75.2735 17.9648 79.3347 21.5619 82.5849 25.841C84.9175 28.9121 86.7997 32.2913 88.1811 35.8758C89.083 38.2158 91.5421 39.6781 93.9676 39.0409Z" fill="currentFill" class="svelte-j32xt0"></path></svg> 
              <span class="sr-only svelte-j32xt0">Loading...</span>`,attr(t,"role","status"),attr(t,"class","svelte-j32xt0")},m(e,r){insert(e,t,r)},p:noop,d(e){e&&detach(t)}}}function create_each_block_1(e){let t,r=e[23].name+"",n,o,i,a;function s(e,t){return e[1]===e[23].id?create_if_block:create_else_block}let l=s(e),c=l(e);function u(){return e[12](e[23])}function d(...t){return e[13](e[23],...t)}return{c(){t=element("li"),n=text(r),o=space(),c.c(),attr(t,"class","flex justify-between items-center p-3 bg-slate-100 rounded-md cursor-pointer shadow-sm hover:bg-slate-200 transition-colors dark:bg-neutral-800 dark:hover:bg-neutral-700 dark:border-neutral-600 dark:text-white svelte-j32xt0")},m(e,r){insert(e,t,r),append(t,n),append(t,o),c.m(t,null),i||(a=[listen(t,"click",u),listen(t,"keyup",d)],i=!0)},p(r,n){l===(l=s(e=r))&&c?c.p(e,n):(c.d(1),(c=l(e))&&(c.c(),c.m(t,null)))},d(e){e&&detach(t),c.d(),i=!1,run_all(a)}}}function create_each_block(e){let t,r,n=e[20].name+"",o,i,a,s,l,c,u,d,g,h;return{c(){t=element("a"),r=element("li"),o=text(n),i=space(),a=element("img"),c=space(),attr(a,"alt",s=e[20].name),src_url_equal(a.src,l=e[20].icon)||attr(a,"src",l),attr(a,"class","w-8 h-8 rounded-full svelte-j32xt0"),attr(r,"class","flex justify-between items-center p-3 bg-slate-100 rounded-md shadow-sm cursor-pointer hover:bg-slate-200 transition-colors dark:bg-neutral-800 dark:hover:bg-neutral-700 dark:border-neutral-600 dark:text-white svelte-j32xt0"),attr(t,"alt",u=e[20].name+" download link"),attr(t,"href",d=e[20].download),attr(t,"target","_blank"),attr(t,"rel","noopener noreferrer"),attr(t,"class","svelte-j32xt0")},m(n,s){insert(n,t,s),append(t,r),append(r,o),append(r,i),append(r,a),append(t,c),g||(h=[listen(r,"click",e[14]),listen(r,"keyup",e[15])],g=!0)},p(e,r){1&r&&n!==(n=e[20].name+"")&&set_data(o,n),1&r&&s!==(s=e[20].name)&&attr(a,"alt",s),1&r&&!src_url_equal(a.src,l=e[20].icon)&&attr(a,"src",l),1&r&&u!==(u=e[20].name+" download link")&&attr(t,"alt",u),1&r&&d!==(d=e[20].download)&&attr(t,"href",d)},d(e){e&&detach(t),g=!1,run_all(h)}}}function create_fragment(e){let t,r,n,o,i,a,s,l,c,u,d,g,h=e[4],m=[];for(let t=0;t<h.length;t+=1)m[t]=create_each_block_1(get_each_context_1(e,h,t));let p=e[0],f=[];for(let t=0;t<p.length;t+=1)f[t]=create_each_block(get_each_context(e,p,t));return{c(){t=element("div"),r=element("main"),n=element("header"),(o=element("h1")).textContent="Connect a wallet",i=space(),(a=element("span")).innerHTML='<svg xmlns="http://www.w3.org/2000/svg" height="24px" width="24px" viewBox="0 0 24 24" fill="currentColor" class="svelte-j32xt0"><path d="M19 6.41L17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z" class="svelte-j32xt0"></path></svg>',s=space(),l=element("ul");for(let e=0;e<m.length;e+=1)m[e].c();c=space();for(let e=0;e<f.length;e+=1)f[e].c();attr(o,"class","text-xl svelte-j32xt0"),attr(a,"role","button"),attr(a,"alt","Close"),attr(a,"class","cursor-pointer svelte-j32xt0"),attr(n,"class","flex items-center justify-between mb-4 svelte-j32xt0"),attr(l,"class","flex flex-col gap-3 svelte-j32xt0"),attr(r,"role","dialog"),attr(r,"class",null_to_empty("bg-slate-50 rounded-md shadow w-full max-w-[500px] mx-6 p-4 text-center z-50 dark:bg-neutral-900 dark:text-white")+" svelte-j32xt0"),attr(t,"class",u=null_to_empty("backdrop-blur-sm fixed inset-0 flex items-center justify-center bg-black/25 z-40 "+e[2])+" svelte-j32xt0")},m(u,h){insert(u,t,h),append(t,r),append(r,n),append(n,o),append(n,i),append(n,a),append(r,s),append(r,l);for(let e=0;e<m.length;e+=1)m[e]&&m[e].m(l,null);append(l,c);for(let e=0;e<f.length;e+=1)f[e]&&f[e].m(l,null);d||(g=[listen(a,"click",e[10]),listen(a,"keyup",e[11]),listen(r,"click",click_handler_3),listen(r,"keyup",keyup_handler_3),listen(t,"click",e[16]),listen(t,"keyup",e[17])],d=!0)},p(e,[r]){if(26&r){let t;for(t=0,h=e[4];t<h.length;t+=1){let n=get_each_context_1(e,h,t);m[t]?m[t].p(n,r):(m[t]=create_each_block_1(n),m[t].c(),m[t].m(l,c))}for(;t<m.length;t+=1)m[t].d(1);m.length=h.length}if(9&r){let t;for(t=0,p=e[0];t<p.length;t+=1){let n=get_each_context(e,p,t);f[t]?f[t].p(n,r):(f[t]=create_each_block(n),f[t].c(),f[t].m(l,null))}for(;t<f.length;t+=1)f[t].d(1);f.length=p.length}4&r&&u!==(u=null_to_empty("backdrop-blur-sm fixed inset-0 flex items-center justify-center bg-black/25 z-40 "+e[2])+" svelte-j32xt0")&&attr(t,"class",u)},i:noop,o:noop,d(e){e&&detach(t),destroy_each(m,e),destroy_each(f,e),d=!1,run_all(g)}}}let click_handler_3=e=>e.stopPropagation(),keyup_handler_3=e=>e.stopPropagation();function instance(e,t,r){let n=null,{lastWallet:o=null}=t,{installedWallets:i=[]}=t,{authorizedWallets:a=[]}=t,{discoveryWallets:s=[]}=t,{callback:l=async()=>{}}=t,{theme:c=null}=t,u=!1,d=async e=>{var t;r(1,u=null!=(t=null==e?void 0:e.id)&&t),await l(e).catch(()=>{}),r(1,u=!1)},g="";g="dark"===c||null===c&&(null==n?void 0:n.matchMedia("(prefers-color-scheme: dark)").matches)?"dark":"";let h=e=>{r(2,g=e.matches?"dark":"")};onMount(()=>{if(null===c)return null==n||n.matchMedia("(prefers-color-scheme: dark)").addEventListener("change",h),()=>{null==n||n.matchMedia("(prefers-color-scheme: dark)").removeEventListener("change",h)}});let m=[o,...a,...i].filter(Boolean),p=()=>d(null),f=e=>{"Enter"===e.key&&d(null)},w=e=>d(e),y=(e,t)=>{"Enter"===t.key&&d(e)},M=()=>d(null),b=e=>{"Enter"===e.key&&d(null)},v=()=>d(null),I=e=>{"Escape"===e.key&&d(null)};return e.$$set=e=>{"lastWallet"in e&&r(5,o=e.lastWallet),"installedWallets"in e&&r(6,i=e.installedWallets),"authorizedWallets"in e&&r(7,a=e.authorizedWallets),"discoveryWallets"in e&&r(0,s=e.discoveryWallets),"callback"in e&&r(8,l=e.callback),"theme"in e&&r(9,c=e.theme)},[s,u,g,d,m,o,i,a,l,c,p,f,w,y,M,b,v,I]}class Modal extends SvelteComponent{constructor(e){super(),init$1(this,e,instance,create_fragment,safe_not_equal,{lastWallet:5,installedWallets:6,authorizedWallets:7,discoveryWallets:0,callback:8,theme:9},add_css)}}function excludeWallets(e,t){return e.filter(e=>!t.some(t=>t.id===e.id))}async function show({discoveryWallets:e,installedWallets:t,lastWallet:r,authorizedWallets:n,enable:o,modalOptions:i}){return new Promise(a=>{var s;let l=[r].filter(Boolean);n=excludeWallets(n,l),t=excludeWallets(t,[...l,...n]),e=excludeWallets(e,[...l,...t,...n]);let c=new Modal({target:document.body,props:{callback:async e=>{var t;let r=null!=(t=await (null==o?void 0:o(e)))?t:e;c.$destroy(),a(r)},lastWallet:r,installedWallets:t,authorizedWallets:n,discoveryWallets:e,theme:(null==i?void 0:i.theme)==="system"?null:null!=(s=null==i?void 0:i.theme)?s:null}})})}var te=Object.defineProperty,re=(e,t,r)=>t in e?te(e,t,{enumerable:!0,configurable:!0,writable:!0,value:r}):e[t]=r,O=(e,t,r)=>(re(e,"symbol"!=typeof t?t+"":t,r),r),Z=(e,t,r)=>{if(!t.has(e))throw TypeError("Cannot "+r)},v=(e,t,r)=>(Z(e,t,"read from private field"),r?r.call(e):t.get(e)),L=(e,t,r)=>{if(t.has(e))throw TypeError("Cannot add the same private member more than once");t instanceof WeakSet?t.add(e):t.set(e,r)},G=(e,t,r,n)=>(Z(e,t,"write to private field"),n?n.call(e,r):t.set(e,r),r),_=(e,t,r)=>(Z(e,t,"access private method"),r);let generateUID=()=>`${Date.now()}-${Math.floor(0x82f79cd8fff*Math.random())+1e12}`,shuffle=e=>{for(let t=e.length-1;t>0;t--){let r=Math.floor(Math.random()*(t+1));[e[t],e[r]]=[e[r],e[t]]}return e},pipe$1=(...e)=>t=>e.reduce((e,t)=>e.then(t),Promise.resolve(t));function ensureKeysArray(e){return Object.keys(e)}let ssrSafeWindow$1=null;function getBuilderId(){return"u">typeof FEDERATION_BUILD_IDENTIFIER?FEDERATION_BUILD_IDENTIFIER:""}function isDebugMode$1(){return!1}function isBrowserEnv$1(){return!1}let LOG_CATEGORY$1="[ Federation Runtime ]";function assert(e,t){e||error(t)}function error(e){throw e instanceof Error?(e.message=`${LOG_CATEGORY$1}: ${e.message}`,e):Error(`${LOG_CATEGORY$1}: ${e}`)}function warn$1(e){e instanceof Error?(e.message=`${LOG_CATEGORY$1}: ${e.message}`,console.warn(e)):console.warn(`${LOG_CATEGORY$1}: ${e}`)}function addUniqueItem(e,t){return -1===e.findIndex(e=>e===t)&&e.push(t),e}function getFMId(e){return"version"in e&&e.version?`${e.name}:${e.version}`:"entry"in e&&e.entry?`${e.name}:${e.entry}`:`${e.name}`}function isRemoteInfoWithEntry(e){return"u">typeof e.entry}function isPureRemoteEntry(e){return!e.entry.includes(".json")&&e.entry.includes(".js")}function safeToString$1(e){try{return JSON.stringify(e,null,2)}catch{return""}}function isObject(e){return e&&"object"==typeof e}let objectToString=Object.prototype.toString;function isPlainObject(e){return"[object Object]"===objectToString.call(e)}function arrayOptions(e){return Array.isArray(e)?e:[e]}function _extends$1$1(){return(_extends$1$1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _object_without_properties_loose$1(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}let nativeGlobal=(()=>{try{return Function("return this")()}catch{return globalThis}})(),Global=nativeGlobal;function definePropertyGlobalVal(e,t,r){Object.defineProperty(e,t,{value:r,configurable:!1,writable:!0})}function includeOwnProperty(e,t){return Object.hasOwnProperty.call(e,t)}includeOwnProperty(globalThis,"__GLOBAL_LOADING_REMOTE_ENTRY__")||definePropertyGlobalVal(globalThis,"__GLOBAL_LOADING_REMOTE_ENTRY__",{});let globalLoading=globalThis.__GLOBAL_LOADING_REMOTE_ENTRY__;function setGlobalDefaultVal(e){var t,r,n,o,i,a;includeOwnProperty(e,"__VMOK__")&&!includeOwnProperty(e,"__FEDERATION__")&&definePropertyGlobalVal(e,"__FEDERATION__",e.__VMOK__),includeOwnProperty(e,"__FEDERATION__")||(definePropertyGlobalVal(e,"__FEDERATION__",{__GLOBAL_PLUGIN__:[],__INSTANCES__:[],moduleInfo:{},__SHARE__:{},__MANIFEST_LOADING__:{},__PRELOADED_MAP__:new Map}),definePropertyGlobalVal(e,"__VMOK__",e.__FEDERATION__)),null!=(t=e.__FEDERATION__).__GLOBAL_PLUGIN__||(t.__GLOBAL_PLUGIN__=[]),null!=(r=e.__FEDERATION__).__INSTANCES__||(r.__INSTANCES__=[]),null!=(n=e.__FEDERATION__).moduleInfo||(n.moduleInfo={}),null!=(o=e.__FEDERATION__).__SHARE__||(o.__SHARE__={}),null!=(i=e.__FEDERATION__).__MANIFEST_LOADING__||(i.__MANIFEST_LOADING__={}),null!=(a=e.__FEDERATION__).__PRELOADED_MAP__||(a.__PRELOADED_MAP__=new Map)}function getGlobalFederationInstance(e,t){let r=getBuilderId();return globalThis.__FEDERATION__.__INSTANCES__.find(n=>!!(r&&n.options.id===getBuilderId()||n.options.name===e&&!n.options.version&&!t||n.options.name===e&&t&&n.options.version===t))}function setGlobalFederationInstance(e){globalThis.__FEDERATION__.__INSTANCES__.push(e)}function getGlobalFederationConstructor(){return globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR__}function setGlobalFederationConstructor(e,t=isDebugMode$1()){t&&(globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR__=e,globalThis.__FEDERATION__.__DEBUG_CONSTRUCTOR_VERSION__="0.1.21")}function getInfoWithoutType(e,t){if("string"==typeof t){if(e[t])return{value:e[t],key:t};for(let r of Object.keys(e)){let[n,o]=r.split(":"),i=`${n}:${t}`,a=e[i];if(a)return{value:a,key:i}}return{value:void 0,key:t}}throw Error("key must be string")}setGlobalDefaultVal(globalThis),setGlobalDefaultVal(nativeGlobal);let getGlobalSnapshot=()=>nativeGlobal.__FEDERATION__.moduleInfo,getTargetSnapshotInfoByModuleInfo=(e,t)=>{let r=getInfoWithoutType(t,getFMId(e)).value;if(r&&!r.version&&"version"in e&&e.version&&(r.version=e.version),r)return r;if("version"in e&&e.version){let{version:t}=e,r=getFMId(_object_without_properties_loose$1(e,["version"])),n=getInfoWithoutType(nativeGlobal.__FEDERATION__.moduleInfo,r).value;if((null==n?void 0:n.version)===t)return n}},getGlobalSnapshotInfoByModuleInfo=e=>getTargetSnapshotInfoByModuleInfo(e,nativeGlobal.__FEDERATION__.moduleInfo),setGlobalSnapshotInfoByModuleInfo=(e,t)=>{let r=getFMId(e);return nativeGlobal.__FEDERATION__.moduleInfo[r]=t,nativeGlobal.__FEDERATION__.moduleInfo},addGlobalSnapshot=e=>(nativeGlobal.__FEDERATION__.moduleInfo=_extends$1$1({},nativeGlobal.__FEDERATION__.moduleInfo,e),()=>{for(let t of Object.keys(e))delete nativeGlobal.__FEDERATION__.moduleInfo[t]}),getRemoteEntryExports=(e,t)=>{let r=t||`__FEDERATION_${e}:custom__`,n=globalThis[r];return{remoteEntryKey:r,entryExports:n}},getGlobalHostPlugins=()=>nativeGlobal.__FEDERATION__.__GLOBAL_PLUGIN__,getPreloaded=e=>globalThis.__FEDERATION__.__PRELOADED_MAP__.get(e),setPreloaded=e=>globalThis.__FEDERATION__.__PRELOADED_MAP__.set(e,!0),DEFAULT_SCOPE="default",DEFAULT_REMOTE_TYPE="global",buildIdentifier="[0-9A-Za-z-]+",build=`(?:\\+(${buildIdentifier}(?:\\.${buildIdentifier})*))`,numericIdentifier="0|[1-9]\\d*",numericIdentifierLoose="[0-9]+",nonNumericIdentifier="\\d*[a-zA-Z-][a-zA-Z0-9-]*",preReleaseIdentifierLoose=`(?:${numericIdentifierLoose}|${nonNumericIdentifier})`,preReleaseLoose=`(?:-?(${preReleaseIdentifierLoose}(?:\\.${preReleaseIdentifierLoose})*))`,preReleaseIdentifier=`(?:${numericIdentifier}|${nonNumericIdentifier})`,preRelease=`(?:-(${preReleaseIdentifier}(?:\\.${preReleaseIdentifier})*))`,xRangeIdentifier=`${numericIdentifier}|x|X|\\*`,xRangePlain=`[v=\\s]*(${xRangeIdentifier})(?:\\.(${xRangeIdentifier})(?:\\.(${xRangeIdentifier})(?:${preRelease})?${build}?)?)?`,hyphenRange=`^\\s*(${xRangePlain})\\s+-\\s+(${xRangePlain})\\s*$`,mainVersionLoose=`(${numericIdentifierLoose})\\.(${numericIdentifierLoose})\\.(${numericIdentifierLoose})`,loosePlain=`[v=\\s]*${mainVersionLoose}${preReleaseLoose}?${build}?`,gtlt="((?:<|>)?=?)",comparatorTrim=`(\\s*)${gtlt}\\s*(${loosePlain}|${xRangePlain})`,loneTilde="(?:~>?)",tildeTrim=`(\\s*)${loneTilde}\\s+`,loneCaret="(?:\\^)",caretTrim=`(\\s*)${loneCaret}\\s+`,star="(<|>)?=?\\s*\\*",caret=`^${loneCaret}${xRangePlain}$`,mainVersion=`(${numericIdentifier})\\.(${numericIdentifier})\\.(${numericIdentifier})`,fullPlain=`v?${mainVersion}${preRelease}?${build}?`,tilde=`^${loneTilde}${xRangePlain}$`,xRange=`^${gtlt}\\s*${xRangePlain}$`,comparator=`^${gtlt}\\s*(${fullPlain})$|^$`,gte0="^\\s*>=\\s*0.0.0\\s*$";function parseRegex(e){return new RegExp(e)}function isXVersion(e){return!e||"x"===e.toLowerCase()||"*"===e}function pipe(...e){return t=>e.reduce((e,t)=>t(e),t)}function extractComparator(e){return e.match(parseRegex(comparator))}function combineVersion(e,t,r,n){let o=`${e}.${t}.${r}`;return n?`${o}-${n}`:o}function parseHyphen(e){return e.replace(parseRegex(hyphenRange),(e,t,r,n,o,i,a,s,l,c,u,d)=>(t=isXVersion(r)?"":isXVersion(n)?`>=${r}.0.0`:isXVersion(o)?`>=${r}.${n}.0`:`>=${t}`,s=isXVersion(l)?"":isXVersion(c)?`<${Number(l)+1}.0.0-0`:isXVersion(u)?`<${l}.${Number(c)+1}.0-0`:d?`<=${l}.${c}.${u}-${d}`:`<=${s}`,`${t} ${s}`.trim()))}function parseComparatorTrim(e){return e.replace(parseRegex(comparatorTrim),"$1$2$3")}function parseTildeTrim(e){return e.replace(parseRegex(tildeTrim),"$1~")}function parseCaretTrim(e){return e.replace(parseRegex(caretTrim),"$1^")}function parseCarets(e){return e.trim().split(/\s+/).map(e=>e.replace(parseRegex(caret),(e,t,r,n,o)=>isXVersion(t)?"":isXVersion(r)?`>=${t}.0.0 <${Number(t)+1}.0.0-0`:isXVersion(n)?"0"===t?`>=${t}.${r}.0 <${t}.${Number(r)+1}.0-0`:`>=${t}.${r}.0 <${Number(t)+1}.0.0-0`:o?"0"===t?"0"===r?`>=${t}.${r}.${n}-${o} <${t}.${r}.${Number(n)+1}-0`:`>=${t}.${r}.${n}-${o} <${t}.${Number(r)+1}.0-0`:`>=${t}.${r}.${n}-${o} <${Number(t)+1}.0.0-0`:"0"===t?"0"===r?`>=${t}.${r}.${n} <${t}.${r}.${Number(n)+1}-0`:`>=${t}.${r}.${n} <${t}.${Number(r)+1}.0-0`:`>=${t}.${r}.${n} <${Number(t)+1}.0.0-0`)).join(" ")}function parseTildes(e){return e.trim().split(/\s+/).map(e=>e.replace(parseRegex(tilde),(e,t,r,n,o)=>isXVersion(t)?"":isXVersion(r)?`>=${t}.0.0 <${Number(t)+1}.0.0-0`:isXVersion(n)?`>=${t}.${r}.0 <${t}.${Number(r)+1}.0-0`:o?`>=${t}.${r}.${n}-${o} <${t}.${Number(r)+1}.0-0`:`>=${t}.${r}.${n} <${t}.${Number(r)+1}.0-0`)).join(" ")}function parseXRanges(e){return e.split(/\s+/).map(e=>e.trim().replace(parseRegex(xRange),(e,t,r,n,o,i)=>{let a=isXVersion(r),s=a||isXVersion(n),l=s||isXVersion(o);return"="===t&&l&&(t=""),i="",a?">"===t||"<"===t?"<0.0.0-0":"*":t&&l?(s&&(n=0),o=0,">"===t?(t=">=",s?(r=Number(r)+1,n=0):n=Number(n)+1,o=0):"<="===t&&(t="<",s?r=Number(r)+1:n=Number(n)+1),"<"===t&&(i="-0"),`${t+r}.${n}.${o}${i}`):s?`>=${r}.0.0${i} <${Number(r)+1}.0.0-0`:l?`>=${r}.${n}.0${i} <${r}.${Number(n)+1}.0-0`:e})).join(" ")}function parseStar(e){return e.trim().replace(parseRegex(star),"")}function parseGTE0(e){return e.trim().replace(parseRegex(gte0),"")}function compareAtom(e,t){return(e=Number(e)||e)>(t=Number(t)||t)?1:e===t?0:-1}function comparePreRelease(e,t){let{preRelease:r}=e,{preRelease:n}=t;if(void 0===r&&n)return 1;if(r&&void 0===n)return -1;if(void 0===r&&void 0===n)return 0;for(let e=0,t=r.length;e<=t;e++){let t=r[e],o=n[e];if(t!==o)return void 0===t&&void 0===o?0:t?o?compareAtom(t,o):-1:1}return 0}function compareVersion(e,t){return compareAtom(e.major,t.major)||compareAtom(e.minor,t.minor)||compareAtom(e.patch,t.patch)||comparePreRelease(e,t)}function eq(e,t){return e.version===t.version}function compare(e,t){switch(e.operator){case"":case"=":return eq(e,t);case">":return 0>compareVersion(e,t);case">=":return eq(e,t)||0>compareVersion(e,t);case"<":return compareVersion(e,t)>0;case"<=":return eq(e,t)||compareVersion(e,t)>0;case void 0:return!0;default:return!1}}function parseComparatorString(e){return pipe(parseCarets,parseTildes,parseXRanges,parseStar)(e)}function parseRange(e){return pipe(parseHyphen,parseComparatorTrim,parseTildeTrim,parseCaretTrim)(e.trim()).split(/\s+/).join(" ")}function satisfy(e,t){if(!e)return!1;let r=parseRange(t).split(" ").map(e=>parseComparatorString(e)).join(" ").split(/\s+/).map(e=>parseGTE0(e)),n=extractComparator(e);if(!n)return!1;let[,o,,i,a,s,l]=n,c={operator:o,version:combineVersion(i,a,s,l),major:i,minor:a,patch:s,preRelease:null==l?void 0:l.split(".")};for(let e of r){let t=extractComparator(e);if(!t)return!1;let[,r,,n,o,i,a]=t;if(!compare({operator:r,version:combineVersion(n,o,i,a),major:n,minor:o,patch:i,preRelease:null==a?void 0:a.split(".")},c))return!1}return!0}function _extends$8(){return(_extends$8=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function formatShare(e,t,r){var n,o;let i;return i="get"in e?e.get:"lib"in e?()=>Promise.resolve(e.lib):()=>Promise.resolve(()=>{throw Error(`Can not get shared '${r}'!`)}),_extends$8({deps:[],useIn:[],from:t,loading:null},e,{shareConfig:_extends$8({requiredVersion:`^${e.version}`,singleton:!1,eager:!1,strictVersion:!1},e.shareConfig),get:i,loaded:"lib"in e||void 0,version:null!=(n=e.version)?n:"0",scope:Array.isArray(e.scope)?e.scope:[null!=(o=e.scope)?o:"default"],strategy:e.strategy||"version-first"})}function formatShareConfigs(e,t){let r=t.shared||{},n=t.name,o=Object.keys(r).reduce((e,t)=>{let o=arrayOptions(r[t]);return e[t]=e[t]||[],o.forEach(r=>{e[t].push(formatShare(r,n,t))}),e},{}),i=_extends$8({},e.shared);return Object.keys(o).forEach(e=>{i[e]?o[e].forEach(t=>{i[e].find(e=>e.version===t.version)||i[e].push(t)}):i[e]=o[e]}),{shared:i,shareInfos:o}}function versionLt(e,t){let r=e=>{if(!Number.isNaN(Number(e))){let t=e.split("."),r=e;for(let e=0;e<3-t.length;e++)r+=".0";return r}return e};return!!satisfy(r(e),`<=${r(t)}`)}let findVersion=(e,t)=>{let r=t||function(e,t){return versionLt(e,t)};return Object.keys(e).reduce((e,t)=>!e||r(e,t)||"0"===e?t:e,0)},isLoaded=e=>!!e.loaded||"function"==typeof e.lib;function findSingletonVersionOrderByVersion(e,t,r){let n=e[t][r],o=function(e,t){return!isLoaded(n[e])&&versionLt(e,t)};return findVersion(e[t][r],o)}function findSingletonVersionOrderByLoaded(e,t,r){let n=e[t][r],o=function(e,t){return isLoaded(n[t])?!isLoaded(n[e])||!!versionLt(e,t):!isLoaded(n[e])&&versionLt(e,t)};return findVersion(e[t][r],o)}function getFindShareFunction(e){return"loaded-first"===e?findSingletonVersionOrderByLoaded:findSingletonVersionOrderByVersion}function getRegisteredShare(e,t,r,n){if(!e)return;let{shareConfig:o,scope:i=DEFAULT_SCOPE,strategy:a}=r;for(let s of Array.isArray(i)?i:[i])if(o&&e[s]&&e[s][t]){let{requiredVersion:i}=o,l=getFindShareFunction(a)(e,s,t),c=()=>{if(o.singleton){if("string"==typeof i&&!satisfy(l,i)){let n=`Version ${l} from ${l&&e[s][t][l].from} of shared singleton module ${t} does not satisfy the requirement of ${r.from} which needs ${i})`;o.strictVersion?error(n):warn$1(n)}return e[s][t][l]}if(!1===i||"*"===i||satisfy(l,i))return e[s][t][l];for(let[r,n]of Object.entries(e[s][t]))if(satisfy(r,i))return n},u={shareScopeMap:e,scope:s,pkgName:t,version:l,GlobalFederation:Global.__FEDERATION__,resolver:c};return(n.emit(u)||u).resolver()}}function getGlobalShareScope(){return Global.__FEDERATION__.__SHARE__}function getTargetSharedOptions(e){var t;let{pkgName:r,extraOptions:n,shareInfos:o}=e,i=e=>{if(!e)return;let t={};e.forEach(e=>{t[e.version]=e});let r=findVersion(t,function(e,r){return!isLoaded(t[e])&&versionLt(e,r)});return t[r]};return Object.assign({},(null!=(t=null==n?void 0:n.resolver)?t:i)(o[r]),null==n?void 0:n.customShareInfo)}function _define_property$4(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var _obj,_obj1,MANIFEST_EXT=".json",BROWSER_LOG_KEY="FEDERATION_DEBUG",BROWSER_LOG_VALUE="1",NameTransformSymbol={AT:"@",HYPHEN:"-",SLASH:"/"},NameTransformMap=(_obj={},_define_property$4(_obj,NameTransformSymbol.AT,"scope_"),_define_property$4(_obj,NameTransformSymbol.HYPHEN,"_"),_define_property$4(_obj,NameTransformSymbol.SLASH,"__"),_obj);_obj1={},_define_property$4(_obj1,NameTransformMap[NameTransformSymbol.AT],NameTransformSymbol.AT),_define_property$4(_obj1,NameTransformMap[NameTransformSymbol.HYPHEN],NameTransformSymbol.HYPHEN),_define_property$4(_obj1,NameTransformMap[NameTransformSymbol.SLASH],NameTransformSymbol.SLASH);var SEPARATOR=":";function isBrowserEnv(){return!1}function isDebugMode(){return"u">typeof process&&process.env&&process.env.FEDERATION_DEBUG?!!process.env.FEDERATION_DEBUG:"u">typeof FEDERATION_DEBUG&&!!FEDERATION_DEBUG}function _array_like_to_array$2(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _array_without_holes(e){if(Array.isArray(e))return _array_like_to_array$2(e)}function _class_call_check(e,t){if(!(e instanceof t))throw TypeError("Cannot call a class as a function")}function _defineProperties(e,t){for(var r=0;r<t.length;r++){var n=t[r];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}function _create_class(e,t,r){return t&&_defineProperties(e.prototype,t),r&&_defineProperties(e,r),e}function _define_property$3(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _iterable_to_array$1(e){if("u">typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _non_iterable_spread(){throw TypeError("Invalid attempt to spread non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _to_consumable_array(e){return _array_without_holes(e)||_iterable_to_array$1(e)||_unsupported_iterable_to_array$2(e)||_non_iterable_spread()}function _unsupported_iterable_to_array$2(e,t){if(e){if("string"==typeof e)return _array_like_to_array$2(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _array_like_to_array$2(e,t)}}function safeToString(e){try{return JSON.stringify(e,null,2)}catch{return""}}var DEBUG_LOG="[ FEDERATION DEBUG ]";function safeGetLocalStorageItem(){return!1}var Logger=function(){function e(t){_class_call_check(this,e),_define_property$3(this,"enable",!1),_define_property$3(this,"identifier",void 0),this.identifier=t||DEBUG_LOG,isBrowserEnv()&&safeGetLocalStorageItem()?this.enable=!0:isDebugMode()&&(this.enable=!0)}return _create_class(e,[{key:"info",value:function(e,t){if(this.enable){var r=safeToString(t)||"";isBrowserEnv()?console.info("%c ".concat(this.identifier,": ").concat(e," ").concat(r),"color:#3300CC"):console.info("\x1b[34m%s","".concat(this.identifier,": ").concat(e," ").concat(r?`
`.concat(r):""))}}},{key:"logOriginalInfo",value:function(){for(var e,t,r=arguments.length,n=Array(r),o=0;o<r;o++)n[o]=arguments[o];this.enable&&(isBrowserEnv()?(console.info("%c ".concat(this.identifier,": OriginalInfo"),"color:#3300CC"),(e=console).log.apply(e,_to_consumable_array(n))):(console.info("%c ".concat(this.identifier,": OriginalInfo"),"color:#3300CC"),(t=console).log.apply(t,_to_consumable_array(n))))}}]),e}(),LOG_CATEGORY="[ Federation Runtime ]";new Logger;var composeKeyWithSeparator=function(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return t.length?t.reduce(function(e,t){return t?e?"".concat(e).concat(SEPARATOR).concat(t):t:e},""):""},getResourceUrl=function(e,t){if(!("getPublicPath"in e))return"publicPath"in e?"".concat(e.publicPath).concat(t):(console.warn("Can not get resource url, if in debug mode, please ignore",e,t),"");var r=Function(e.getPublicPath)();return"".concat(r).concat(t)},warn=function(e){console.warn("".concat(LOG_CATEGORY,": ").concat(e))};function _define_property$2(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _object_spread$2(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_define_property$2(e,t,r[t])})}return e}function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter(function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable})),r.push.apply(r,n)}return r}function _object_spread_props(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):ownKeys(Object(t)).forEach(function(r){Object.defineProperty(e,r,Object.getOwnPropertyDescriptor(t,r))}),e}var simpleJoinRemoteEntry=function(e,t){if(!e)return t;var r=function(e){if("."===e)return"";if(e.startsWith("./"))return e.replace("./","");if(e.startsWith("/")){var t=e.slice(1);return t.endsWith("/")?t.slice(0,-1):t}return e}(e);return r?r.endsWith("/")?"".concat(r).concat(t):"".concat(r,"/").concat(t):t};function inferAutoPublicPath(e){return e.replace(/#.*$/,"").replace(/\?.*$/,"").replace(/\/[^\/]+$/,"/")}function generateSnapshotFromManifest(e){var t,r,n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=o.remotes,a=void 0===i?{}:i,s=o.overrides,l=void 0===s?{}:s,c=o.version,u=function(){return"publicPath"in e.metaData?"auto"===e.metaData.publicPath&&c?inferAutoPublicPath(c):e.metaData.publicPath:e.metaData.getPublicPath},d=Object.keys(l),g={};Object.keys(a).length||(g=(null==(t=e.remotes)?void 0:t.reduce(function(e,t){var r,n=t.federationContainerName;return r=d.includes(n)?l[n]:"version"in t?t.version:t.entry,e[n]={matchedVersion:r},e},{}))||{}),Object.keys(a).forEach(function(e){return g[e]={matchedVersion:d.includes(e)?l[e]:a[e]}});var h=e.metaData,m=h.remoteEntry,p=m.path,f=m.name,w=m.type,y=h.types,M=h.buildInfo.buildVersion,b=h.globalName,v=e.exposes,I={version:c||"",buildVersion:M,globalName:b,remoteEntry:simpleJoinRemoteEntry(p,f),remoteEntryType:w,remoteTypes:simpleJoinRemoteEntry(y.path,y.name),remoteTypesZip:y.zip||"",remoteTypesAPI:y.api||"",remotesInfo:g,shared:null==e?void 0:e.shared.map(function(e){return{assets:e.assets,sharedName:e.name,version:e.version}}),modules:null==v?void 0:v.map(function(e){return{moduleName:e.name,modulePath:e.path,assets:e.assets}})};if(null!=(r=e.metaData)&&r.prefetchInterface){var A=e.metaData.prefetchInterface;I=_object_spread_props(_object_spread$2({},I),{prefetchInterface:A})}if(null!=(n=e.metaData)&&n.prefetchEntry){var S=e.metaData.prefetchEntry,N=S.path,D=S.name,x=S.type;I=_object_spread_props(_object_spread$2({},I),{prefetchEntry:simpleJoinRemoteEntry(N,D),prefetchEntryType:x})}return"publicPath"in e.metaData?_object_spread_props(_object_spread$2({},I),{publicPath:u()}):_object_spread_props(_object_spread$2({},I),{getPublicPath:u()})}function isManifestProvider(e){return!!("remoteEntry"in e&&e.remoteEntry.includes(MANIFEST_EXT))}function asyncGeneratorStep$1(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,o)}function _async_to_generator$1(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){asyncGeneratorStep$1(i,n,o,a,s,"next",e)}function s(e){asyncGeneratorStep$1(i,n,o,a,s,"throw",e)}a(void 0)})}}function _define_property$1(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}function _instanceof(e,t){return null!=t&&"u">typeof Symbol&&t[Symbol.hasInstance]?!!t[Symbol.hasInstance](e):e instanceof t}function _object_spread$1(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{},n=Object.keys(r);"function"==typeof Object.getOwnPropertySymbols&&(n=n.concat(Object.getOwnPropertySymbols(r).filter(function(e){return Object.getOwnPropertyDescriptor(r,e).enumerable}))),n.forEach(function(t){_define_property$1(e,t,r[t])})}return e}function _type_of$2(e){return e&&"u">typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function _ts_generator$1(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}function safeWrapper(e,t){return _safeWrapper.apply(this,arguments)}function _safeWrapper(){return(_safeWrapper=_async_to_generator$1(function(e,t){var r;return _ts_generator$1(this,function(n){switch(n.label){case 0:return n.trys.push([0,2,,3]),[4,e()];case 1:return[2,n.sent()];case 2:return r=n.sent(),t||warn(r),[2];case 3:return[2]}})})).apply(this,arguments)}function isStaticResourcesEqual(e,t){var r=/^(https?:)?\/\//i;return e.replace(r,"").replace(/\/$/,"")===t.replace(r,"").replace(/\/$/,"")}function createScript(e){for(var t,r=null,n=!0,o=2e4,i=document.getElementsByTagName("script"),a=0;a<i.length;a++){var s=i[a],l=s.getAttribute("src");if(l&&isStaticResourcesEqual(l,e.url)){r=s,n=!1;break}}if(!r){if((r=document.createElement("script")).type="text/javascript",r.src=e.url,e.createScriptHook){var c=e.createScriptHook(e.url);_instanceof(c,HTMLScriptElement)?r=c:(typeof c>"u"?"undefined":_type_of$2(c))==="object"&&(c.script&&(r=c.script),c.timeout&&(o=c.timeout))}var u=e.attrs;u&&Object.keys(u).forEach(function(e){r&&("async"===e||"defer"===e?r[e]=u[e]:r.getAttribute(e)||r.setAttribute(e,u[e]))})}var d=function(n,o){var i;if(clearTimeout(t),r&&(r.onerror=null,r.onload=null,safeWrapper(function(){var t=e.needDeleteScript;(void 0===t||t)&&null!=r&&r.parentNode&&r.parentNode.removeChild(r)}),n)){var a,s=n(o);return null==e||null==(a=e.cb)||a.call(e),s}null==e||null==(i=e.cb)||i.call(e)};return r.onerror=d.bind(null,r.onerror),r.onload=d.bind(null,r.onload),t=setTimeout(function(){d(null,Error('Remote script "'.concat(e.url,'" time-outed.')))},o),{script:r,needAttach:n}}function createLink(e){for(var t=null,r=!0,n=document.getElementsByTagName("link"),o=0;o<n.length;o++){var i=n[o],a=i.getAttribute("href"),s=i.getAttribute("ref");if(a&&isStaticResourcesEqual(a,e.url)&&s===e.attrs.ref){t=i,r=!1;break}}if(!t){if((t=document.createElement("link")).setAttribute("href",e.url),e.createLinkHook){var l=e.createLinkHook(e.url);_instanceof(l,HTMLLinkElement)&&(t=l)}var c=e.attrs;c&&Object.keys(c).forEach(function(e){t&&!t.getAttribute(e)&&t.setAttribute(e,c[e])})}var u=function(r,n){if(t&&(t.onerror=null,t.onload=null,safeWrapper(function(){var r=e.needDeleteLink;(void 0===r||r)&&null!=t&&t.parentNode&&t.parentNode.removeChild(t)}),r)){var o=r(n);return e.cb(),o}e.cb()};return t.onerror=u.bind(null,t.onerror),t.onload=u.bind(null,t.onload),{link:t,needAttach:r}}function loadScript(e,t){var r=t.attrs,n=void 0===r?{}:r,o=t.createScriptHook;return new Promise(function(t,r){var i=createScript({url:e,cb:t,attrs:_object_spread$1({crossorigin:"anonymous",fetchpriority:"high"},n),createScriptHook:o,needDeleteScript:!0}),a=i.script;i.needAttach&&document.head.appendChild(a)})}function _array_like_to_array(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=Array(t);r<t;r++)n[r]=e[r];return n}function _array_with_holes(e){if(Array.isArray(e))return e}function asyncGeneratorStep(e,t,r,n,o,i,a){try{var s=e[i](a),l=s.value}catch(e){r(e);return}s.done?t(l):Promise.resolve(l).then(n,o)}function _async_to_generator(e){return function(){var t=this,r=arguments;return new Promise(function(n,o){var i=e.apply(t,r);function a(e){asyncGeneratorStep(i,n,o,a,s,"next",e)}function s(e){asyncGeneratorStep(i,n,o,a,s,"throw",e)}a(void 0)})}}function _iterable_to_array_limit(e,t){var r=null==e?null:"u">typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,i=[],a=!0,s=!1;try{for(r=r.call(e);!(a=(n=r.next()).done)&&(i.push(n.value),!(t&&i.length===t));a=!0);}catch(e){s=!0,o=e}finally{try{a||null==r.return||r.return()}finally{if(s)throw o}}return i}}function _non_iterable_rest(){throw TypeError("Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _sliced_to_array(e,t){return _array_with_holes(e)||_iterable_to_array_limit(e,t)||_unsupported_iterable_to_array(e,t)||_non_iterable_rest()}function _type_of$1(e){return e&&"u">typeof Symbol&&e.constructor===Symbol?"symbol":typeof e}function _unsupported_iterable_to_array(e,t){if(e){if("string"==typeof e)return _array_like_to_array(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);if("Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r)return Array.from(r);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return _array_like_to_array(e,t)}}function _ts_generator(e,t){var r,n,o,i,a={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]};return i={next:s(0),throw:s(1),return:s(2)},"function"==typeof Symbol&&(i[Symbol.iterator]=function(){return this}),i;function s(e){return function(t){return l([e,t])}}function l(i){if(r)throw TypeError("Generator is already executing.");for(;a;)try{if(r=1,n&&(o=2&i[0]?n.return:i[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,i[1])).done)return o;switch(n=0,o&&(i=[2&i[0],o.value]),i[0]){case 0:case 1:o=i;break;case 4:return a.label++,{value:i[1],done:!1};case 5:a.label++,n=i[1],i=[0];continue;case 7:i=a.ops.pop(),a.trys.pop();continue;default:if(!(o=(o=a.trys).length>0&&o[o.length-1])&&(6===i[0]||2===i[0])){a=0;continue}if(3===i[0]&&(!o||i[1]>o[0]&&i[1]<o[3])){a.label=i[1];break}if(6===i[0]&&a.label<o[1]){a.label=o[1],o=i;break}if(o&&a.label<o[2]){a.label=o[2],a.ops.push(i);break}o[2]&&a.ops.pop(),a.trys.pop();continue}i=t.call(e,a)}catch(e){i=[6,e],n=0}finally{r=o=0}if(5&i[0])throw i[1];return{value:i[0]?i[1]:void 0,done:!0}}}function importNodeModule(e){if(!e)throw Error("import specifier is required");return Function("name","return import(name)")(e).then(function(e){return e.default}).catch(function(t){throw console.error("Error importing module ".concat(e,":"),t),t})}function createScriptNode(url,cb,attrs,createScriptHook){if(createScriptHook){var urlObj,hookResult=createScriptHook(url);hookResult&&(typeof hookResult>"u"?"undefined":_type_of$1(hookResult))==="object"&&"url"in hookResult&&(url=hookResult.url)}try{urlObj=new URL(url)}catch(t){console.error("Error constructing URL:",t),cb(Error("Invalid URL: ".concat(t)));return}var getFetch=function(){var e=_async_to_generator(function(){var e;return _ts_generator(this,function(t){switch(t.label){case 0:return typeof fetch>"u"?[4,importNodeModule("node-fetch")]:[3,2];case 1:return[2,(null==(e=t.sent())?void 0:e.default)||e];case 2:return[2,fetch];case 3:return[2]}})});return function(){return e.apply(this,arguments)}}();console.log("fetching",urlObj.href),getFetch().then(function(f){f(urlObj.href).then(function(e){return e.text()}).then(function(){var _ref=_async_to_generator(function(data){var _ref,path,vm,scriptContext,urlDirname,filename,script,exportedInterface,container;return _ts_generator(this,function(_state){switch(_state.label){case 0:return[4,Promise.all([importNodeModule("path"),importNodeModule("vm")])];case 1:_ref=_sliced_to_array.apply(void 0,[_state.sent(),2]),path=_ref[0],vm=_ref[1],scriptContext={exports:{},module:{exports:{}}},urlDirname=urlObj.pathname.split("/").slice(0,-1).join("/"),filename=path.basename(urlObj.pathname);try{if(script=new vm.Script("(function(exports, module, require, __dirname, __filename) {".concat(data,`
})`),filename),script.runInThisContext()(scriptContext.exports,scriptContext.module,eval("require"),urlDirname,filename),exportedInterface=scriptContext.module.exports||scriptContext.exports,attrs&&exportedInterface&&attrs.globalName)return container=exportedInterface[attrs.globalName]||exportedInterface,cb(void 0,container),[2];cb(void 0,exportedInterface)}catch(t){cb(Error("Script execution error: ".concat(t)))}return[2]}})});return function(e){return _ref.apply(this,arguments)}}()).catch(function(e){cb(e)})})}function loadScriptNode(e,t){return new Promise(function(r,n){createScriptNode(e,function(e,o){if(e)n(e);else{var i,a,s=(null==t||null==(i=t.attrs)?void 0:i.globalName)||"__FEDERATION_".concat(null==t||null==(a=t.attrs)?void 0:a.name,":custom__");r(globalThis[s]=o)}},t.attrs,t.createScriptHook)})}function matchRemoteWithNameAndExpose(e,t){for(let r of e){let e=t.startsWith(r.name),n=t.replace(r.name,"");if(e){if(n.startsWith("/"))return{pkgNameOrAlias:r.name,expose:n=`.${n}`,remote:r};else if(""===n)return{pkgNameOrAlias:r.name,expose:".",remote:r}}let o=r.alias&&t.startsWith(r.alias),i=r.alias&&t.replace(r.alias,"");if(r.alias&&o){if(i&&i.startsWith("/"))return{pkgNameOrAlias:r.alias,expose:i=`.${i}`,remote:r};else if(""===i)return{pkgNameOrAlias:r.alias,expose:".",remote:r}}}}function matchRemote(e,t){for(let r of e)if(t===r.name||r.alias&&t===r.alias)return r}function registerPlugins$1(e,t){let r=getGlobalHostPlugins();return r.length>0&&r.forEach(t=>{null!=e&&e.find(e=>e.name!==t.name)&&e.push(t)}),e&&e.length>0&&e.forEach(e=>{t.forEach(t=>{t.applyPlugin(e)})}),e}function _extends$7(){return(_extends$7=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}async function loadEsmEntry({entry:e,remoteEntryExports:t}){return new Promise((r,n)=>{try{t?r(t):Function("callbacks",`import("${e}").then(callbacks[0]).catch(callbacks[1])`)([r,n])}catch(e){n(e)}})}async function loadEntryScript({name:e,globalName:t,entry:r,createScriptHook:n}){let{entryExports:o}=getRemoteEntryExports(e,t);return o||(typeof document>"u"?loadScriptNode(r,{attrs:{name:e,globalName:t},createScriptHook:n}).then(()=>{let{remoteEntryKey:n,entryExports:o}=getRemoteEntryExports(e,t);return assert(o,`
        Unable to use the ${e}'s '${r}' URL with ${n}'s globalName to get remoteEntry exports.
        Possible reasons could be:

        1. '${r}' is not the correct URL, or the remoteEntry resource or name is incorrect.

        2. ${n} cannot be used to get remoteEntry exports in the window object.
      `),o}).catch(e=>{throw e}):loadScript(r,{attrs:{},createScriptHook:n}).then(()=>{let{remoteEntryKey:n,entryExports:o}=getRemoteEntryExports(e,t);return assert(o,`
      Unable to use the ${e}'s '${r}' URL with ${n}'s globalName to get remoteEntry exports.
      Possible reasons could be:

      1. '${r}' is not the correct URL, or the remoteEntry resource or name is incorrect.

      2. ${n} cannot be used to get remoteEntry exports in the window object.
    `),o}).catch(e=>{throw e}))}function getRemoteEntryUniqueKey(e){let{entry:t,name:r}=e;return composeKeyWithSeparator(r,t)}async function getRemoteEntry({remoteEntryExports:e,remoteInfo:t,createScriptHook:r}){let{entry:n,name:o,type:i,entryGlobalName:a}=t,s=getRemoteEntryUniqueKey(t);return e||(globalLoading[s]||(["esm","module"].includes(i)?globalLoading[s]=loadEsmEntry({entry:n,remoteEntryExports:e}):globalLoading[s]=loadEntryScript({name:o,globalName:a,entry:n,createScriptHook:r})),globalLoading[s])}function getRemoteInfo(e){return _extends$7({},e,{entry:"entry"in e?e.entry:"",type:e.type||DEFAULT_REMOTE_TYPE,entryGlobalName:e.entryGlobalName||e.name,shareScope:e.shareScope||DEFAULT_SCOPE})}function _extends$6(){return(_extends$6=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}let Module=class{async getEntry(){if(this.remoteEntryExports)return this.remoteEntryExports;let e=await getRemoteEntry({remoteInfo:this.remoteInfo,remoteEntryExports:this.remoteEntryExports,createScriptHook:e=>{let t=this.host.loaderHook.lifecycle.createScript.emit({url:e});if(t&&(typeof document>"u"||t instanceof HTMLScriptElement||"script"in t||"timeout"in t))return t}});return assert(e,`remoteEntryExports is undefined 
 ${safeToString$1(this.remoteInfo)}`),this.remoteEntryExports=e,this.remoteEntryExports}async get(e,t,r){let{loadFactory:n=!0}=r||{loadFactory:!0},o=await this.getEntry();if(!this.inited){let e=this.host.shareScopeMap,t=this.remoteInfo.shareScope||"default";e[t]||(e[t]={});let r=e[t],n=[],i={version:this.remoteInfo.version||""};Object.defineProperty(i,"shareScopeMap",{value:e,enumerable:!1});let a=await this.host.hooks.lifecycle.beforeInitContainer.emit({shareScope:r,remoteEntryInitOptions:i,initScope:n,remoteInfo:this.remoteInfo,origin:this.host});await o.init(a.shareScope,a.initScope,a.remoteEntryInitOptions),await this.host.hooks.lifecycle.initContainer.emit(_extends$6({},a,{remoteEntryExports:o}))}this.lib=o,this.inited=!0;let i=await o.get(t);assert(i,`${getFMId(this.remoteInfo)} remote don't export ${t}.`);let a=this.wraperFactory(i,e);return n?await a():a}wraperFactory(e,t){function r(e,t){e&&"object"==typeof e&&Object.isExtensible(e)&&!Object.getOwnPropertyDescriptor(e,Symbol.for("mf_module_id"))&&Object.defineProperty(e,Symbol.for("mf_module_id"),{value:t,enumerable:!1})}return e instanceof Promise?async()=>{let n=await e();return r(n,t),n}:()=>{let n=e();return r(n,t),n}}constructor({remoteInfo:e,host:t}){this.inited=!1,this.lib=void 0,this.remoteInfo=e,this.host=t}};class SyncHook{on(e){"function"==typeof e&&this.listeners.add(e)}once(e){let t=this;this.on(function r(...n){return t.remove(r),e.apply(null,n)})}emit(...e){let t;return this.listeners.size>0&&this.listeners.forEach(r=>{t=r(...e)}),t}remove(e){this.listeners.delete(e)}removeAll(){this.listeners.clear()}constructor(e){this.type="",this.listeners=new Set,e&&(this.type=e)}}class AsyncHook extends SyncHook{emit(...e){let t,r=Array.from(this.listeners);if(r.length>0){let n=0,o=t=>!1!==t&&(n<r.length?Promise.resolve(r[n++].apply(null,e)).then(o):t);t=o()}return Promise.resolve(t)}}function checkReturnData(e,t){if(!isObject(t))return!1;if(e!==t){for(let r in e)if(!(r in t))return!1}return!0}class SyncWaterfallHook extends SyncHook{emit(e){for(let t of(isObject(e)||error(`The data for the "${this.type}" hook should be an object.`),this.listeners))try{let r=t(e);if(checkReturnData(e,r))e=r;else{this.onerror(`A plugin returned an unacceptable value for the "${this.type}" type.`);break}}catch(e){warn$1(e),this.onerror(e)}return e}constructor(e){super(),this.onerror=error,this.type=e}}class AsyncWaterfallHook extends SyncHook{emit(e){isObject(e)||error(`The response data for the "${this.type}" hook must be an object.`);let t=Array.from(this.listeners);if(t.length>0){let r=0,n=t=>(warn$1(t),this.onerror(t),e),o=i=>{if(checkReturnData(e,i)){if(e=i,r<t.length)try{return Promise.resolve(t[r++](e)).then(o,n)}catch(e){return n(e)}}else this.onerror(`A plugin returned an incorrect value for the "${this.type}" type.`);return e};return Promise.resolve(o(e))}return Promise.resolve(e)}constructor(e){super(),this.onerror=error,this.type=e}}class PluginSystem{applyPlugin(e){assert(isPlainObject(e),"Plugin configuration is invalid.");let t=e.name;assert(t,"A name must be provided by the plugin."),this.registerPlugins[t]||(this.registerPlugins[t]=e,Object.keys(this.lifecycle).forEach(t=>{let r=e[t];r&&this.lifecycle[t].on(r)}))}removePlugin(e){assert(e,"A name is required.");let t=this.registerPlugins[e];assert(t,`The plugin "${e}" is not registered.`),Object.keys(t).forEach(e=>{"name"!==e&&this.lifecycle[e].remove(t[e])})}inherit({lifecycle:e,registerPlugins:t}){Object.keys(e).forEach(t=>{assert(!this.lifecycle[t],`The hook "${t}" has a conflict and cannot be inherited.`),this.lifecycle[t]=e[t]}),Object.keys(t).forEach(e=>{assert(!this.registerPlugins[e],`The plugin "${e}" has a conflict and cannot be inherited.`),this.applyPlugin(t[e])})}constructor(e){this.registerPlugins={},this.lifecycle=e,this.lifecycleKeys=Object.keys(e)}}function _extends$5(){return(_extends$5=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function defaultPreloadArgs(e){return _extends$5({resourceCategory:"sync",share:!0,depsRemote:!0,prefetchInterface:!1},e)}function formatPreloadArgs(e,t){return t.map(t=>{let r=matchRemote(e,t.nameOrAlias);return assert(r,`Unable to preload ${t.nameOrAlias} as it is not included in ${!r&&safeToString$1({remoteInfo:r,remotes:e})}`),{remote:r,preloadConfig:defaultPreloadArgs(t)}})}function normalizePreloadExposes(e){return e?e.map(e=>"."===e?e:e.startsWith("./")?e.replace("./",""):e):[]}function preloadAssets(e,t,r,n=!0){let{cssAssets:o,jsAssetsWithoutEntry:i,entryAssets:a}=r;t.options.inBrowser&&(a.forEach(r=>{let{moduleInfo:n}=r,o=t.moduleCache.get(e.name);getRemoteEntry(o?{remoteInfo:n,remoteEntryExports:o.remoteEntryExports,createScriptHook:e=>{let r=t.loaderHook.lifecycle.createScript.emit({url:e});if(r&&(typeof document>"u"||r instanceof HTMLScriptElement||"script"in r||"timeout"in r))return r}}:{remoteInfo:n,remoteEntryExports:void 0,createScriptHook:e=>{let r=t.loaderHook.lifecycle.createScript.emit({url:e});if(r&&(typeof document>"u"||r instanceof HTMLScriptElement||"script"in r||"timeout"in r))return r}})}),n?o.forEach(e=>{let{link:r,needAttach:n}=createLink({url:e,cb:()=>{},attrs:{rel:"preload",as:"style",crossorigin:"anonymous"},createLinkHook:e=>{let r=t.loaderHook.lifecycle.createLink.emit({url:e});if(r instanceof HTMLLinkElement)return r}});n&&document.head.appendChild(r)}):o.forEach(e=>{let{link:r,needAttach:n}=createLink({url:e,cb:()=>{},attrs:{rel:"stylesheet",type:"text/css"},createLinkHook:e=>{let r=t.loaderHook.lifecycle.createLink.emit({url:e});if(r instanceof HTMLLinkElement)return r},needDeleteLink:!1});n&&document.head.appendChild(r)}),n?i.forEach(e=>{let{link:r,needAttach:n}=createLink({url:e,cb:()=>{},attrs:{rel:"preload",as:"script",crossorigin:"anonymous"},createLinkHook:e=>{let r=t.loaderHook.lifecycle.createLink.emit({url:e});if(r instanceof HTMLLinkElement)return r}});n&&document.head.appendChild(r)}):i.forEach(e=>{let{script:r,needAttach:n}=createScript({url:e,cb:()=>{},attrs:{crossorigin:"anonymous",fetchpriority:"high"},createScriptHook:e=>{let r=t.loaderHook.lifecycle.createScript.emit({url:e});if(r instanceof HTMLScriptElement)return r},needDeleteScript:!0});n&&document.head.appendChild(r)}))}function _extends$4(){return(_extends$4=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function assignRemoteInfo(e,t){"remoteEntry"in t&&t.remoteEntry||error(`The attribute remoteEntry of ${name} must not be undefined.`);let{remoteEntry:r}=t,n=getResourceUrl(t,r);isBrowserEnv$1()||n.startsWith("http")||(n=`https:${n}`),e.type=t.remoteEntryType,e.entryGlobalName=t.globalName,e.entry=n,e.version=t.version,e.buildVersion=t.buildVersion}function snapshotPlugin(){return{name:"snapshot-plugin",async afterResolve(e){let{remote:t,pkgNameOrAlias:r,expose:n,origin:o,remoteInfo:i}=e;if(!isRemoteInfoWithEntry(t)||!isPureRemoteEntry(t)){let{remoteSnapshot:a,globalSnapshot:s}=await o.snapshotHandler.loadRemoteSnapshotInfo(t);assignRemoteInfo(i,a);let l={remote:t,preloadConfig:{nameOrAlias:r,exposes:[n],resourceCategory:"sync",share:!1,depsRemote:!1}},c=await o.remoteHandler.hooks.lifecycle.generatePreloadAssets.emit({origin:o,preloadOptions:l,remoteInfo:i,remote:t,remoteSnapshot:a,globalSnapshot:s});return c&&preloadAssets(i,o,c,!1),_extends$4({},e,{remoteSnapshot:a})}return e}}}function splitId(e){let t=e.split(":");return 1===t.length?{name:t[0],version:void 0}:2===t.length?{name:t[0],version:t[1]}:{name:t[1],version:t[2]}}function traverseModuleInfo(e,t,r,n,o={},i){let{value:a}=getInfoWithoutType(e,getFMId(t)),s=i||a;if(s&&!isManifestProvider(s)&&(r(s,t,n),s.remotesInfo))for(let t of Object.keys(s.remotesInfo)){if(o[t])continue;o[t]=!0;let n=splitId(t),i=s.remotesInfo[t];traverseModuleInfo(e,{name:n.name,version:i.matchedVersion},r,!1,o,void 0)}}function generatePreloadAssets(e,t,r,n,o){let i=[],a=[],s=[],l=new Set,c=new Set,{options:u}=e,{preloadConfig:d}=t,{depsRemote:g}=d;if(traverseModuleInfo(n,r,(t,r,n)=>{let o;if(n)o=d;else if(Array.isArray(g)){let e=g.find(e=>e.nameOrAlias===r.name||e.nameOrAlias===r.alias);if(!e)return;o=defaultPreloadArgs(e)}else{if(!0!==g)return;o=d}let l=getResourceUrl(t,"remoteEntry"in t?t.remoteEntry:"");l&&s.push({name:r.name,moduleInfo:{name:r.name,entry:l,type:"remoteEntryType"in t?t.remoteEntryType:"global",entryGlobalName:"globalName"in t?t.globalName:r.name,shareScope:"",version:"version"in t?t.version:void 0},url:l});let c="modules"in t?t.modules:[],u=normalizePreloadExposes(o.exposes);if(u.length&&"modules"in t){var h;c=null==t||null==(h=t.modules)?void 0:h.reduce((e,t)=>((null==u?void 0:u.indexOf(t.moduleName))!==-1&&e.push(t),e),[])}function m(e){let r=e.map(e=>getResourceUrl(t,e));return o.filter?r.filter(o.filter):r}if(c){let n=c.length;for(let s=0;s<n;s++){let n=c[s],l=`${r.name}/${n.moduleName}`;e.remoteHandler.hooks.lifecycle.handlePreloadModule.emit({id:"."===n.moduleName?r.name:l,name:r.name,remoteSnapshot:t,preloadConfig:o,remote:r,origin:e}),getPreloaded(l)||("all"===o.resourceCategory?(i.push(...m(n.assets.css.async)),i.push(...m(n.assets.css.sync)),a.push(...m(n.assets.js.async))):(o.resourceCategory="sync",i.push(...m(n.assets.css.sync))),a.push(...m(n.assets.js.sync)),setPreloaded(l))}}},!0,{},o),o.shared){let t=(t,r)=>{let n=getRegisteredShare(e.shareScopeMap,r.sharedName,t,e.sharedHandler.hooks.lifecycle.resolveShare);n&&"function"==typeof n.lib&&(r.assets.js.sync.forEach(e=>{l.add(e)}),r.assets.css.sync.forEach(e=>{c.add(e)}))};o.shared.forEach(e=>{var r;let n=null==(r=u.shared)?void 0:r[e.sharedName];if(!n)return;let o=e.version?n.find(t=>t.version===e.version):n;o&&arrayOptions(o).forEach(r=>{t(r,e)})})}let h=a.filter(e=>!l.has(e));return{cssAssets:i.filter(e=>!c.has(e)),jsAssetsWithoutEntry:h,entryAssets:s}}let generatePreloadAssetsPlugin=function(){return{name:"generate-preload-assets-plugin",async generatePreloadAssets(e){let{origin:t,preloadOptions:r,remoteInfo:n,remote:o,globalSnapshot:i,remoteSnapshot:a}=e;return isRemoteInfoWithEntry(o)&&isPureRemoteEntry(o)?{cssAssets:[],jsAssetsWithoutEntry:[],entryAssets:[{name:o.name,url:o.entry,moduleInfo:{name:n.name,entry:o.entry,type:"global",entryGlobalName:"",shareScope:""}}]}:(assignRemoteInfo(n,a),generatePreloadAssets(t,r,n,i,a))}}};function _extends$3(){return(_extends$3=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}class SnapshotHandler{async loadSnapshot(e){let{options:t}=this.HostInstance,{hostGlobalSnapshot:r,remoteSnapshot:n,globalSnapshot:o}=this.getGlobalRemoteInfo(e),{remoteSnapshot:i,globalSnapshot:a}=await this.hooks.lifecycle.loadSnapshot.emit({options:t,moduleInfo:e,hostGlobalSnapshot:r,remoteSnapshot:n,globalSnapshot:o});return{remoteSnapshot:i,globalSnapshot:a}}async loadRemoteSnapshotInfo(e){let{options:t}=this.HostInstance;await this.hooks.lifecycle.beforeLoadRemoteSnapshot.emit({options:t,moduleInfo:e});let r=getGlobalSnapshotInfoByModuleInfo({name:this.HostInstance.options.name,version:this.HostInstance.options.version});r||(r={version:this.HostInstance.options.version||"",remoteEntry:"",remotesInfo:{}},addGlobalSnapshot({[this.HostInstance.options.name]:r})),r&&"remotesInfo"in r&&!getInfoWithoutType(r.remotesInfo,e.name).value&&("version"in e||"entry"in e)&&(r.remotesInfo=_extends$3({},null==r?void 0:r.remotesInfo,{[e.name]:{matchedVersion:"version"in e?e.version:e.entry}}));let{hostGlobalSnapshot:n,remoteSnapshot:o,globalSnapshot:i}=this.getGlobalRemoteInfo(e),{remoteSnapshot:a,globalSnapshot:s}=await this.hooks.lifecycle.loadSnapshot.emit({options:t,moduleInfo:e,hostGlobalSnapshot:n,remoteSnapshot:o,globalSnapshot:i});if(a)if(isManifestProvider(a)){let t=await this.getManifestJson(a.remoteEntry,e,{}),r=setGlobalSnapshotInfoByModuleInfo(_extends$3({},e,{entry:a.remoteEntry}),t);return{remoteSnapshot:t,globalSnapshot:r}}else{let{remoteSnapshot:t}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:e,remoteSnapshot:a,from:"global"});return{remoteSnapshot:t,globalSnapshot:s}}if(isRemoteInfoWithEntry(e)){let t=await this.getManifestJson(e.entry,e,{}),r=setGlobalSnapshotInfoByModuleInfo(e,t),{remoteSnapshot:n}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:e,remoteSnapshot:t,from:"global"});return{remoteSnapshot:n,globalSnapshot:r}}error(`
          Cannot get remoteSnapshot with the name: '${e.name}', version: '${e.version}' from __FEDERATION__.moduleInfo. The following reasons may be causing the problem:

          1. The Deploy platform did not deliver the correct data. You can use __FEDERATION__.moduleInfo to check the remoteInfo.

          2. The remote '${e.name}' version '${e.version}' is not released.

          The transformed module info: ${JSON.stringify(s)}
        `)}getGlobalRemoteInfo(e){let t=getGlobalSnapshotInfoByModuleInfo({name:this.HostInstance.options.name,version:this.HostInstance.options.version}),r=t&&"remotesInfo"in t&&t.remotesInfo&&getInfoWithoutType(t.remotesInfo,e.name).value;return r&&r.matchedVersion?{hostGlobalSnapshot:t,globalSnapshot:getGlobalSnapshot(),remoteSnapshot:getGlobalSnapshotInfoByModuleInfo({name:e.name,version:r.matchedVersion})}:{hostGlobalSnapshot:void 0,globalSnapshot:getGlobalSnapshot(),remoteSnapshot:getGlobalSnapshotInfoByModuleInfo({name:e.name,version:"version"in e?e.version:void 0})}}async getManifestJson(e,t,r){let n=async()=>{let r=this.manifestCache.get(e);if(r)return r;try{let t=await this.loaderHook.lifecycle.fetch.emit(e,{});return t&&t instanceof Response||(t=await fetch(e,{})),r=await t.json(),assert(r.metaData&&r.exposes&&r.shared,`${e} is not a federation manifest`),this.manifestCache.set(e,r),r}catch(r){error(`Failed to get manifestJson for ${t.name}. The manifest URL is ${e}. Please ensure that the manifestUrl is accessible.
          
 Error message:
          
 ${r}`)}},o=async()=>{let r=await n(),o=generateSnapshotFromManifest(r,{version:e}),{remoteSnapshot:i}=await this.hooks.lifecycle.loadRemoteSnapshot.emit({options:this.HostInstance.options,moduleInfo:t,manifestJson:r,remoteSnapshot:o,manifestUrl:e,from:"manifest"});return i};return this.manifestLoading[e]||(this.manifestLoading[e]=o().then(e=>e)),this.manifestLoading[e]}constructor(e){this.loadingHostSnapshot=null,this.manifestCache=new Map,this.hooks=new PluginSystem({beforeLoadRemoteSnapshot:new AsyncHook("beforeLoadRemoteSnapshot"),loadSnapshot:new AsyncWaterfallHook("loadGlobalSnapshot"),loadRemoteSnapshot:new AsyncWaterfallHook("loadRemoteSnapshot")}),this.manifestLoading=Global.__FEDERATION__.__MANIFEST_LOADING__,this.HostInstance=e,this.loaderHook=e.loaderHook}}function _extends$2(){return(_extends$2=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}function _object_without_properties_loose(e,t){if(null==e)return{};var r,n,o={},i=Object.keys(e);for(n=0;n<i.length;n++)r=i[n],t.indexOf(r)>=0||(o[r]=e[r]);return o}class SharedHandler{registerShared(e,t){let{shareInfos:r,shared:n}=formatShareConfigs(e,t);return Object.keys(r).forEach(e=>{r[e].forEach(r=>{!getRegisteredShare(this.shareScopeMap,e,r,this.hooks.lifecycle.resolveShare)&&r&&r.lib&&this.setShared({pkgName:e,lib:r.lib,get:r.get,loaded:!0,shared:r,from:t.name})})}),{shareInfos:r,shared:n}}async loadShare(e,t){let{host:r}=this,n=getTargetSharedOptions({pkgName:e,extraOptions:t,shareInfos:r.options.shared});null!=n&&n.scope&&await Promise.all(n.scope.map(async e=>{await Promise.all(this.initializeSharing(e,n.strategy))}));let{shareInfo:o}=await this.hooks.lifecycle.beforeLoadShare.emit({pkgName:e,shareInfo:n,shared:r.options.shared,origin:r});assert(o,`Cannot find ${e} Share in the ${r.options.name}. Please ensure that the ${e} Share parameters have been injected`);let i=getRegisteredShare(this.shareScopeMap,e,o,this.hooks.lifecycle.resolveShare),a=e=>{e.useIn||(e.useIn=[]),addUniqueItem(e.useIn,r.options.name)};if(i&&i.lib)return a(i),i.lib;if(i&&i.loading&&!i.loaded){let e=await i.loading;return i.loaded=!0,i.lib||(i.lib=e),a(i),e}if(i){let t=(async()=>{let t=await i.get();o.lib=t,o.loaded=!0,a(o);let r=getRegisteredShare(this.shareScopeMap,e,o,this.hooks.lifecycle.resolveShare);return r&&(r.lib=t,r.loaded=!0),t})();return this.setShared({pkgName:e,loaded:!1,shared:i,from:r.options.name,lib:null,loading:t}),t}{if(null!=t&&t.customShareInfo)return!1;let n=(async()=>{let t=await o.get();o.lib=t,o.loaded=!0,a(o);let r=getRegisteredShare(this.shareScopeMap,e,o,this.hooks.lifecycle.resolveShare);return r&&(r.lib=t,r.loaded=!0),t})();return this.setShared({pkgName:e,loaded:!1,shared:o,from:r.options.name,lib:null,loading:n}),n}}initializeSharing(e=DEFAULT_SCOPE,t){let{host:r}=this,n=this.shareScopeMap,o=r.options.name;n[e]||(n[e]={});let i=n[e],a=(e,t)=>{var r;let{version:n,eager:a}=t;i[e]=i[e]||{};let s=i[e],l=s[n],c=!!(l&&(l.eager||(null==(r=l.shareConfig)?void 0:r.eager)));(!l||"loaded-first"!==l.strategy&&!l.loaded&&(!a!=!c?a:o>l.from))&&(s[n]=t)},s=[],l=t=>t&&t.init&&t.init(n[e]),c=async e=>{let{module:t}=await r.remoteHandler.getRemoteModuleAndOptions({id:e});if(t.getEntry){let e=await t.getEntry();t.inited||(l(e),t.inited=!0)}};return Object.keys(r.options.shared).forEach(t=>{r.options.shared[t].forEach(r=>{r.scope.includes(e)&&a(t,r)})}),"version-first"===t&&r.options.remotes.forEach(t=>{t.shareScope===e&&s.push(c(t.name))}),s}loadShareSync(e,t){let{host:r}=this,n=getTargetSharedOptions({pkgName:e,extraOptions:t,shareInfos:r.options.shared});null!=n&&n.scope&&n.scope.forEach(e=>{this.initializeSharing(e,n.strategy)});let o=getRegisteredShare(this.shareScopeMap,e,n,this.hooks.lifecycle.resolveShare),i=e=>{e.useIn||(e.useIn=[]),addUniqueItem(e.useIn,r.options.name)};if(o){if("function"==typeof o.lib)return i(o),o.loaded||(o.loaded=!0,o.from===r.options.name&&(n.loaded=!0)),o.lib;if("function"==typeof o.get){let t=o.get();if(!(t instanceof Promise))return i(o),this.setShared({pkgName:e,loaded:!0,from:r.options.name,lib:t,shared:o}),t}}if(n.lib)return n.loaded||(n.loaded=!0),n.lib;if(n.get){let t=n.get();if(t instanceof Promise)throw Error(`
        The loadShareSync function was unable to load ${e}. The ${e} could not be found in ${r.options.name}.
        Possible reasons for failure: 

        1. The ${e} share was registered with the 'get' attribute, but loadShare was not used beforehand.

        2. The ${e} share was not registered with the 'lib' attribute.

      `);return n.lib=t,this.setShared({pkgName:e,loaded:!0,from:r.options.name,lib:n.lib,shared:n}),n.lib}throw Error(`
        The loadShareSync function was unable to load ${e}. The ${e} could not be found in ${r.options.name}.
        Possible reasons for failure: 

        1. The ${e} share was registered with the 'get' attribute, but loadShare was not used beforehand.

        2. The ${e} share was not registered with the 'lib' attribute.

      `)}initShareScopeMap(e,t,r={}){let{host:n}=this;this.shareScopeMap[e]=t,this.hooks.lifecycle.initContainerShareScopeMap.emit({shareScope:t,options:n.options,origin:n,scopeName:e,hostShareScopeMap:r.hostShareScopeMap})}setShared({pkgName:e,shared:t,from:r,lib:n,loading:o,loaded:i,get:a}){let{version:s,scope:l="default"}=t,c=_object_without_properties_loose(t,["version","scope"]);(Array.isArray(l)?l:[l]).forEach(t=>{this.shareScopeMap[t]||(this.shareScopeMap[t]={}),this.shareScopeMap[t][e]||(this.shareScopeMap[t][e]={}),!this.shareScopeMap[t][e][s]&&(this.shareScopeMap[t][e][s]=_extends$2({version:s,scope:["default"]},c,{lib:n,loaded:i,loading:o}),a&&(this.shareScopeMap[t][e][s].get=a))})}_setGlobalShareScopeMap(e){let t=getGlobalShareScope(),r=e.id||e.name;r&&!t[r]&&(t[r]=this.shareScopeMap)}constructor(e){this.hooks=new PluginSystem({afterResolve:new AsyncWaterfallHook("afterResolve"),beforeLoadShare:new AsyncWaterfallHook("beforeLoadShare"),loadShare:new AsyncHook,resolveShare:new SyncWaterfallHook("resolveShare"),initContainerShareScopeMap:new SyncWaterfallHook("initContainerShareScopeMap")}),this.host=e,this.shareScopeMap={},this._setGlobalShareScopeMap(e.options)}}function _extends$1(){return(_extends$1=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}class RemoteHandler{formatAndRegisterRemote(e,t){return(t.remotes||[]).reduce((e,t)=>(this.registerRemote(t,e,{force:!1}),e),e.remotes)}async loadRemote(e,t){let{host:r}=this;try{let{loadFactory:n=!0}=t||{loadFactory:!0},{module:o,moduleOptions:i,remoteMatchInfo:a}=await this.getRemoteModuleAndOptions({id:e}),{pkgNameOrAlias:s,remote:l,expose:c,id:u}=a,d=await o.get(u,c,t),g=await this.hooks.lifecycle.onLoad.emit({id:u,pkgNameOrAlias:s,expose:c,exposeModule:n?d:void 0,exposeModuleFactory:n?void 0:d,remote:l,options:i,moduleInstance:o,origin:r});return"function"==typeof g?g:d}catch(i){let{from:n="runtime"}=t||{from:"runtime"},o=await this.hooks.lifecycle.errorLoadRemote.emit({id:e,error:i,from:n,lifecycle:"onLoad",origin:r});if(!o)throw i;return o}}async preloadRemote(e){let{host:t}=this;await this.hooks.lifecycle.beforePreloadRemote.emit({preloadOps:e,options:t.options,origin:t});let r=formatPreloadArgs(t.options.remotes,e);await Promise.all(r.map(async e=>{let{remote:r}=e,n=getRemoteInfo(r),{globalSnapshot:o,remoteSnapshot:i}=await t.snapshotHandler.loadRemoteSnapshotInfo(r),a=await this.hooks.lifecycle.generatePreloadAssets.emit({origin:t,preloadOptions:e,remote:r,remoteInfo:n,globalSnapshot:o,remoteSnapshot:i});a&&preloadAssets(n,t,a)}))}registerRemotes(e,t){let{host:r}=this;e.forEach(e=>{this.registerRemote(e,r.options.remotes,{force:null==t?void 0:t.force})})}async getRemoteModuleAndOptions(e){let t,{host:r}=this,{id:n}=e;try{t=await this.hooks.lifecycle.beforeRequest.emit({id:n,options:r.options,origin:r})}catch(e){if(!(t=await this.hooks.lifecycle.errorLoadRemote.emit({id:n,options:r.options,origin:r,from:"runtime",error:e,lifecycle:"beforeRequest"})))throw e}let{id:o}=t,i=matchRemoteWithNameAndExpose(r.options.remotes,o);assert(i,`
        Unable to locate ${o} in ${r.options.name}. Potential reasons for failure include:

        1. ${o} was not included in the 'remotes' parameter of ${r.options.name||"the host"}.

        2. ${o} could not be found in the 'remotes' of ${r.options.name} with either 'name' or 'alias' attributes.
        3. ${o} is not online, injected, or loaded.
        4. ${o}  cannot be accessed on the expected.
        5. The 'beforeRequest' hook was provided but did not return the correct 'remoteInfo' when attempting to load ${o}.
      `);let{remote:a}=i,s=getRemoteInfo(a),l=await r.sharedHandler.hooks.lifecycle.afterResolve.emit(_extends$1({id:o},i,{options:r.options,origin:r,remoteInfo:s})),{remote:c,expose:u}=l;assert(c&&u,`The 'beforeRequest' hook was executed, but it failed to return the correct 'remote' and 'expose' values while loading ${o}.`);let d=r.moduleCache.get(c.name),g={host:r,remoteInfo:s};return d||(d=new Module(g),r.moduleCache.set(c.name,d)),{module:d,moduleOptions:g,remoteMatchInfo:l}}registerRemote(e,t,r){let{host:n}=this,o=()=>{if(e.alias){let r=t.find(t=>{var r;return e.alias&&(t.name.startsWith(e.alias)||(null==(r=t.alias)?void 0:r.startsWith(e.alias)))});assert(!r,`The alias ${e.alias} of remote ${e.name} is not allowed to be the prefix of ${r&&r.name} name or alias`)}"entry"in e&&isBrowserEnv()&&!e.entry.startsWith("http")&&(e.entry=new URL(e.entry,window.location.origin).href),e.shareScope||(e.shareScope=DEFAULT_SCOPE),e.type||(e.type=DEFAULT_REMOTE_TYPE)},i=t.find(t=>t.name===e.name);if(i){let a=[`The remote "${e.name}" is already registered.`,null!=r&&r.force?"Hope you have known that OVERRIDE it may have some unexpected errors":'If you want to merge the remote, you can set "force: true".'];null!=r&&r.force&&(this.removeRemote(i),o(),t.push(e),this.hooks.lifecycle.registerRemote.emit({remote:e,origin:n})),warn(a.join(" "))}else o(),t.push(e),this.hooks.lifecycle.registerRemote.emit({remote:e,origin:n})}removeRemote(e){let{host:t}=this,{name:r}=e,n=t.options.remotes.findIndex(e=>e.name===r);-1!==n&&t.options.remotes.splice(n,1);let o=t.moduleCache.get(e.name);if(o){var i;let r=o.remoteInfo,n=r.entryGlobalName;globalThis[n]&&(null==(i=Object.getOwnPropertyDescriptor(globalThis,n))?void 0:i.configurable)&&delete globalThis[n];let a=getRemoteEntryUniqueKey(o.remoteInfo);globalLoading[a]&&delete globalLoading[a];let s=r.buildVersion?composeKeyWithSeparator(r.name,r.buildVersion):r.name,l=globalThis.__FEDERATION__.__INSTANCES__.findIndex(e=>r.buildVersion?e.options.id===s:e.name===s);if(-1!==l){let e=globalThis.__FEDERATION__.__INSTANCES__[l];s=e.options.id||s;let t=getGlobalShareScope(),n=!0,o=[];Object.keys(t).forEach(e=>{Object.keys(t[e]).forEach(i=>{Object.keys(t[e][i]).forEach(a=>{Object.keys(t[e][i][a]).forEach(s=>{let l=t[e][i][a][s];l.from===r.name&&(l.loaded||l.loading?(l.useIn=l.useIn.filter(e=>e!==r.name),l.useIn.length?n=!1:o.push([e,i,a,s])):o.push([e,i,a,s]))})})})}),n&&(e.shareScopeMap={},delete t[s]),o.forEach(([e,r,n,o])=>{var i,a,s;null==(s=t[e])||null==(a=s[r])||null==(i=a[n])||delete i[o]}),globalThis.__FEDERATION__.__INSTANCES__.splice(l,1)}t.moduleCache.delete(e.name)}}constructor(e){this.hooks=new PluginSystem({registerRemote:new SyncWaterfallHook("registerRemote"),beforeRequest:new AsyncWaterfallHook("beforeRequest"),onLoad:new AsyncHook("onLoad"),handlePreloadModule:new SyncHook("handlePreloadModule"),errorLoadRemote:new AsyncHook("errorLoadRemote"),beforePreloadRemote:new AsyncHook("beforePreloadRemote"),generatePreloadAssets:new AsyncHook("generatePreloadAssets"),afterPreloadRemote:new AsyncHook}),this.host=e}}function _extends(){return(_extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e}).apply(this,arguments)}class FederationHost{initOptions(e){this.registerPlugins(e.plugins);let t=this.formatOptions(this.options,e);return this.options=t,t}async loadShare(e,t){return this.sharedHandler.loadShare(e,t)}loadShareSync(e,t){return this.sharedHandler.loadShareSync(e,t)}initializeSharing(e=DEFAULT_SCOPE,t){return this.sharedHandler.initializeSharing(e,t)}initRawContainer(e,t,r){let n=new Module({host:this,remoteInfo:getRemoteInfo({name:e,entry:t})});return n.remoteEntryExports=r,this.moduleCache.set(e,n),n}async loadRemote(e,t){return this.remoteHandler.loadRemote(e,t)}async preloadRemote(e){return this.remoteHandler.preloadRemote(e)}initShareScopeMap(e,t,r={}){this.sharedHandler.initShareScopeMap(e,t,r)}formatOptions(e,t){let{shared:r}=formatShareConfigs(e,t),{userOptions:n,options:o}=this.hooks.lifecycle.beforeInit.emit({origin:this,userOptions:t,options:e,shareInfo:r}),i=this.remoteHandler.formatAndRegisterRemote(o,n),{shared:a}=this.sharedHandler.registerShared(o,n),s=[...o.plugins];n.plugins&&n.plugins.forEach(e=>{s.includes(e)||s.push(e)});let l=_extends({},e,t,{plugins:s,remotes:i,shared:a});return this.hooks.lifecycle.init.emit({origin:this,options:l}),l}registerPlugins(e){let t=registerPlugins$1(e,[this.hooks,this.remoteHandler.hooks,this.sharedHandler.hooks,this.snapshotHandler.hooks,this.loaderHook]);this.options.plugins=this.options.plugins.reduce((e,t)=>(t&&e&&!e.find(e=>e.name===t.name)&&e.push(t),e),t||[])}registerRemotes(e,t){return this.remoteHandler.registerRemotes(e,t)}constructor(e){this.hooks=new PluginSystem({beforeInit:new SyncWaterfallHook("beforeInit"),init:new SyncHook,beforeInitContainer:new AsyncWaterfallHook("beforeInitContainer"),initContainer:new AsyncWaterfallHook("initContainer")}),this.version="0.1.21",this.moduleCache=new Map,this.loaderHook=new PluginSystem({getModuleInfo:new SyncHook,createScript:new SyncHook,createLink:new SyncHook,fetch:new AsyncHook("fetch")});let t={id:getBuilderId(),name:e.name,plugins:[snapshotPlugin(),generatePreloadAssetsPlugin()],remotes:[],shared:{},inBrowser:isBrowserEnv$1()};this.name=e.name,this.options=t,this.snapshotHandler=new SnapshotHandler(this),this.sharedHandler=new SharedHandler(this),this.remoteHandler=new RemoteHandler(this),this.shareScopeMap=this.sharedHandler.shareScopeMap,this.registerPlugins([...t.plugins,...e.plugins||[]]),this.options=this.formatOptions(t,e)}}let FederationInstance=null;function init(e){let t=getGlobalFederationInstance(e.name,e.version);return t?(t.initOptions(e),FederationInstance||(FederationInstance=t),t):(setGlobalFederationInstance(FederationInstance=new(getGlobalFederationConstructor()||FederationHost)(e)),FederationInstance)}function loadRemote(...e){return assert(FederationInstance,"Please call init first"),FederationInstance.loadRemote.apply(FederationInstance,e)}function __awaiter(e,t,r,n){function o(e){return e instanceof r?e:new r(function(t){t(e)})}return new(r||(r=Promise))(function(r,i){function a(e){try{l(n.next(e))}catch(e){i(e)}}function s(e){try{l(n.throw(e))}catch(e){i(e)}}function l(e){e.done?r(e.value):o(e.value).then(a,s)}l((n=n.apply(e,t||[])).next())})}function __generator(e,t){var r,n,o,i={label:0,sent:function(){if(1&o[0])throw o[1];return o[1]},trys:[],ops:[]},a=Object.create(("function"==typeof Iterator?Iterator:Object).prototype);return a.next=s(0),a.throw=s(1),a.return=s(2),"function"==typeof Symbol&&(a[Symbol.iterator]=function(){return this}),a;function s(e){return function(t){return l([e,t])}}function l(s){if(r)throw TypeError("Generator is already executing.");for(;a&&(a=0,s[0]&&(i=0)),i;)try{if(r=1,n&&(o=2&s[0]?n.return:s[0]?n.throw||((o=n.return)&&o.call(n),0):n.next)&&!(o=o.call(n,s[1])).done)return o;switch(n=0,o&&(s=[2&s[0],o.value]),s[0]){case 0:case 1:o=s;break;case 4:return i.label++,{value:s[1],done:!1};case 5:i.label++,n=s[1],s=[0];continue;case 7:s=i.ops.pop(),i.trys.pop();continue;default:if(!(o=(o=i.trys).length>0&&o[o.length-1])&&(6===s[0]||2===s[0])){i=0;continue}if(3===s[0]&&(!o||s[1]>o[0]&&s[1]<o[3])){i.label=s[1];break}if(6===s[0]&&i.label<o[1]){i.label=o[1],o=s;break}if(o&&i.label<o[2]){i.label=o[2],i.ops.push(s);break}o[2]&&i.ops.pop(),i.trys.pop();continue}s=t.call(e,i)}catch(e){s=[6,e],n=0}finally{r=o=0}if(5&s[0])throw s[1];return{value:s[0]?s[1]:void 0,done:!0}}}setGlobalFederationConstructor(FederationHost);var E_CANCELED=Error("request for lock canceled"),Semaphore=function(){function e(e,t){void 0===t&&(t=E_CANCELED),this._value=e,this._cancelError=t,this._queue=[],this._weightedWaiters=[]}return e.prototype.acquire=function(e,t){var r=this;if(void 0===e&&(e=1),void 0===t&&(t=0),e<=0)throw Error("invalid weight ".concat(e,": must be positive"));return new Promise(function(n,o){var i={resolve:n,reject:o,weight:e,priority:t},a=findIndexFromEnd(r._queue,function(e){return t<=e.priority});-1===a&&e<=r._value?r._dispatchItem(i):r._queue.splice(a+1,0,i)})},e.prototype.runExclusive=function(e){return __awaiter(this,arguments,void 0,function(e,t,r){var n,o,i;return void 0===t&&(t=1),void 0===r&&(r=0),__generator(this,function(a){switch(a.label){case 0:return[4,this.acquire(t,r)];case 1:o=(n=a.sent())[0],i=n[1],a.label=2;case 2:return a.trys.push([2,,4,5]),[4,e(o)];case 3:return[2,a.sent()];case 4:return i(),[7];case 5:return[2]}})})},e.prototype.waitForUnlock=function(e,t){var r=this;if(void 0===e&&(e=1),void 0===t&&(t=0),e<=0)throw Error("invalid weight ".concat(e,": must be positive"));return this._couldLockImmediately(e,t)?Promise.resolve():new Promise(function(n){r._weightedWaiters[e-1]||(r._weightedWaiters[e-1]=[]),insertSorted(r._weightedWaiters[e-1],{resolve:n,priority:t})})},e.prototype.isLocked=function(){return this._value<=0},e.prototype.getValue=function(){return this._value},e.prototype.setValue=function(e){this._value=e,this._dispatchQueue()},e.prototype.release=function(e){if(void 0===e&&(e=1),e<=0)throw Error("invalid weight ".concat(e,": must be positive"));this._value+=e,this._dispatchQueue()},e.prototype.cancel=function(){var e=this;this._queue.forEach(function(t){return t.reject(e._cancelError)}),this._queue=[]},e.prototype._dispatchQueue=function(){for(this._drainUnlockWaiters();this._queue.length>0&&this._queue[0].weight<=this._value;)this._dispatchItem(this._queue.shift()),this._drainUnlockWaiters()},e.prototype._dispatchItem=function(e){var t=this._value;this._value-=e.weight,e.resolve([t,this._newReleaser(e.weight)])},e.prototype._newReleaser=function(e){var t=this,r=!1;return function(){r||(r=!0,t.release(e))}},e.prototype._drainUnlockWaiters=function(){if(0===this._queue.length)for(var e=this._value;e>0;e--){var t=this._weightedWaiters[e-1];t&&(t.forEach(function(e){return e.resolve()}),this._weightedWaiters[e-1]=[])}else for(var r=this._queue[0].priority,e=this._value;e>0;e--){var t=this._weightedWaiters[e-1];if(t){var n=t.findIndex(function(e){return e.priority<=r});(-1===n?t:t.splice(0,n)).forEach(function(e){return e.resolve()})}}},e.prototype._couldLockImmediately=function(e,t){return(0===this._queue.length||this._queue[0].priority<t)&&e<=this._value},e}();function insertSorted(e,t){var r=findIndexFromEnd(e,function(e){return t.priority<=e.priority});e.splice(r+1,0,t)}function findIndexFromEnd(e,t){for(var r=e.length-1;r>=0;r--)if(t(e[r]))return r;return -1}var Mutex=function(){function e(e){this._semaphore=new Semaphore(1,e)}return e.prototype.acquire=function(){return __awaiter(this,arguments,void 0,function(e){return void 0===e&&(e=0),__generator(this,function(t){switch(t.label){case 0:return[4,this._semaphore.acquire(1,e)];case 1:return[2,t.sent()[1]]}})})},e.prototype.runExclusive=function(e,t){return void 0===t&&(t=0),this._semaphore.runExclusive(function(){return e()},1,t)},e.prototype.isLocked=function(){return this._semaphore.isLocked()},e.prototype.waitForUnlock=function(e){return void 0===e&&(e=0),this._semaphore.waitForUnlock(1,e)},e.prototype.release=function(){this._semaphore.isLocked()&&this._semaphore.release()},e.prototype.cancel=function(){return this._semaphore.cancel()},e}();function isMetaMaskProvider(e){return null!==e&&"object"==typeof e&&e.hasOwnProperty("isMetaMask")&&e.hasOwnProperty("request")}function detectMetaMaskProvider(e,{timeout:t=3e3}={}){let r=!1;return new Promise(n=>{let o=e=>{let{info:t,provider:o}=e.detail;("io.metamask"===t.rdns||"io.metamask.flask"===t.rdns)&&isMetaMaskProvider(o)&&(n(o),r=!0)};"function"==typeof e.addEventListener&&e.addEventListener("eip6963:announceProvider",o),setTimeout(()=>{r||n(null)},t),"function"==typeof e.dispatchEvent&&e.dispatchEvent(new Event("eip6963:requestProvider"))})}async function waitForMetaMaskProvider(e,t={}){let{timeout:r=3e3,retries:n=0}=t,o=null;try{o=await detectMetaMaskProvider(e,{timeout:r})}catch{}return o||(0===n?null:o=await waitForMetaMaskProvider({timeout:r,retries:n-1}))}async function detectMetamaskSupport(e){return await waitForMetaMaskProvider(e,{retries:3})}class MetaMaskVirtualWallet{constructor(){L(this,Y),L(this,R),L(this,F),O(this,"id","metamask"),O(this,"name","MetaMask"),O(this,"icon","data:image/svg+xml;utf8;base64,PHN2ZyB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHdpZHRoPSIyMTIiIGhlaWdodD0iMTg5IiB2aWV3Qm94PSIwIDAgMjEyIDE4OSI+PGcgZmlsbD0ibm9uZSIgZmlsbC1ydWxlPSJldmVub2RkIj48cG9seWdvbiBmaWxsPSIjQ0RCREIyIiBwb2ludHM9IjYwLjc1IDE3My4yNSA4OC4zMTMgMTgwLjU2MyA4OC4zMTMgMTcxIDkwLjU2MyAxNjguNzUgMTA2LjMxMyAxNjguNzUgMTA2LjMxMyAxODAgMTA2LjMxMyAxODcuODc1IDg5LjQzOCAxODcuODc1IDY4LjYyNSAxNzguODc1Ii8+PHBvbHlnb24gZmlsbD0iI0NEQkRCMiIgcG9pbnRzPSIxMDUuNzUgMTczLjI1IDEzMi43NSAxODAuNTYzIDEzMi43NSAxNzEgMTM1IDE2OC43NSAxNTAuNzUgMTY4Ljc1IDE1MC43NSAxODAgMTUwLjc1IDE4Ny44NzUgMTMzLjg3NSAxODcuODc1IDExMy4wNjMgMTc4Ljg3NSIgdHJhbnNmb3JtPSJtYXRyaXgoLTEgMCAwIDEgMjU2LjUgMCkiLz48cG9seWdvbiBmaWxsPSIjMzkzOTM5IiBwb2ludHM9IjkwLjU2MyAxNTIuNDM4IDg4LjMxMyAxNzEgOTEuMTI1IDE2OC43NSAxMjAuMzc1IDE2OC43NSAxMjMuNzUgMTcxIDEyMS41IDE1Mi40MzggMTE3IDE0OS42MjUgOTQuNSAxNTAuMTg4Ii8+PHBvbHlnb24gZmlsbD0iI0Y4OUMzNSIgcG9pbnRzPSI3NS4zNzUgMjcgODguODc1IDU4LjUgOTUuMDYzIDE1MC4xODggMTE3IDE1MC4xODggMTIzLjc1IDU4LjUgMTM2LjEyNSAyNyIvPjxwb2x5Z29uIGZpbGw9IiNGODlEMzUiIHBvaW50cz0iMTYuMzEzIDk2LjE4OCAuNTYzIDE0MS43NSAzOS45MzggMTM5LjUgNjUuMjUgMTM5LjUgNjUuMjUgMTE5LjgxMyA2NC4xMjUgNzkuMzEzIDU4LjUgODMuODEzIi8+PHBvbHlnb24gZmlsbD0iI0Q4N0MzMCIgcG9pbnRzPSI0Ni4xMjUgMTAxLjI1IDkyLjI1IDEwMi4zNzUgODcuMTg4IDEyNiA2NS4yNSAxMjAuMzc1Ii8+PHBvbHlnb24gZmlsbD0iI0VBOEQzQSIgcG9pbnRzPSI0Ni4xMjUgMTAxLjgxMyA2NS4yNSAxMTkuODEzIDY1LjI1IDEzNy44MTMiLz48cG9seWdvbiBmaWxsPSIjRjg5RDM1IiBwb2ludHM9IjY1LjI1IDEyMC4zNzUgODcuNzUgMTI2IDk1LjA2MyAxNTAuMTg4IDkwIDE1MyA2NS4yNSAxMzguMzc1Ii8+PHBvbHlnb24gZmlsbD0iI0VCOEYzNSIgcG9pbnRzPSI2NS4yNSAxMzguMzc1IDYwLjc1IDE3My4yNSA5MC41NjMgMTUyLjQzOCIvPjxwb2x5Z29uIGZpbGw9IiNFQThFM0EiIHBvaW50cz0iOTIuMjUgMTAyLjM3NSA5NS4wNjMgMTUwLjE4OCA4Ni42MjUgMTI1LjcxOSIvPjxwb2x5Z29uIGZpbGw9IiNEODdDMzAiIHBvaW50cz0iMzkuMzc1IDEzOC45MzggNjUuMjUgMTM4LjM3NSA2MC43NSAxNzMuMjUiLz48cG9seWdvbiBmaWxsPSIjRUI4RjM1IiBwb2ludHM9IjEyLjkzOCAxODguNDM4IDYwLjc1IDE3My4yNSAzOS4zNzUgMTM4LjkzOCAuNTYzIDE0MS43NSIvPjxwb2x5Z29uIGZpbGw9IiNFODgyMUUiIHBvaW50cz0iODguODc1IDU4LjUgNjQuNjg4IDc4Ljc1IDQ2LjEyNSAxMDEuMjUgOTIuMjUgMTAyLjkzOCIvPjxwb2x5Z29uIGZpbGw9IiNERkNFQzMiIHBvaW50cz0iNjAuNzUgMTczLjI1IDkwLjU2MyAxNTIuNDM4IDg4LjMxMyAxNzAuNDM4IDg4LjMxMyAxODAuNTYzIDY4LjA2MyAxNzYuNjI1Ii8+PHBvbHlnb24gZmlsbD0iI0RGQ0VDMyIgcG9pbnRzPSIxMjEuNSAxNzMuMjUgMTUwLjc1IDE1Mi40MzggMTQ4LjUgMTcwLjQzOCAxNDguNSAxODAuNTYzIDEyOC4yNSAxNzYuNjI1IiB0cmFuc2Zvcm09Im1hdHJpeCgtMSAwIDAgMSAyNzIuMjUgMCkiLz48cG9seWdvbiBmaWxsPSIjMzkzOTM5IiBwb2ludHM9IjcwLjMxMyAxMTIuNSA2NC4xMjUgMTI1LjQzOCA4Ni4wNjMgMTE5LjgxMyIgdHJhbnNmb3JtPSJtYXRyaXgoLTEgMCAwIDEgMTUwLjE4OCAwKSIvPjxwb2x5Z29uIGZpbGw9IiNFODhGMzUiIHBvaW50cz0iMTIuMzc1IC41NjMgODguODc1IDU4LjUgNzUuOTM4IDI3Ii8+PHBhdGggZmlsbD0iIzhFNUEzMCIgZD0iTTEyLjM3NTAwMDIsMC41NjI1MDAwMDggTDIuMjUwMDAwMDMsMzEuNTAwMDAwNSBMNy44NzUwMDAxMiw2NS4yNTAwMDEgTDMuOTM3NTAwMDYsNjcuNTAwMDAxIEw5LjU2MjUwMDE0LDcyLjU2MjUgTDUuMDYyNTAwMDgsNzYuNTAwMDAxMSBMMTEuMjUsODIuMTI1MDAxMiBMNy4zMTI1MDAxMSw4NS41MDAwMDEzIEwxNi4zMTI1MDAyLDk2Ljc1MDAwMTQgTDU4LjUwMDAwMDksODMuODEyNTAxMiBDNzkuMTI1MDAxMiw2Ny4zMTI1MDA0IDg5LjI1MDAwMTMsNTguODc1MDAwMyA4OC44NzUwMDEzLDU4LjUwMDAwMDkgQzg4LjUwMDAwMTMsNTguMTI1MDAwOSA2My4wMDAwMDA5LDM4LjgxMjUwMDYgMTIuMzc1MDAwMiwwLjU2MjUwMDAwOCBaIi8+PGcgdHJhbnNmb3JtPSJtYXRyaXgoLTEgMCAwIDEgMjExLjUgMCkiPjxwb2x5Z29uIGZpbGw9IiNGODlEMzUiIHBvaW50cz0iMTYuMzEzIDk2LjE4OCAuNTYzIDE0MS43NSAzOS45MzggMTM5LjUgNjUuMjUgMTM5LjUgNjUuMjUgMTE5LjgxMyA2NC4xMjUgNzkuMzEzIDU4LjUgODMuODEzIi8+PHBvbHlnb24gZmlsbD0iI0Q4N0MzMCIgcG9pbnRzPSI0Ni4xMjUgMTAxLjI1IDkyLjI1IDEwMi4zNzUgODcuMTg4IDEyNiA2NS4yNSAxMjAuMzc1Ii8+PHBvbHlnb24gZmlsbD0iI0VBOEQzQSIgcG9pbnRzPSI0Ni4xMjUgMTAxLjgxMyA2NS4yNSAxMTkuODEzIDY1LjI1IDEzNy44MTMiLz48cG9seWdvbiBmaWxsPSIjRjg5RDM1IiBwb2ludHM9IjY1LjI1IDEyMC4zNzUgODcuNzUgMTI2IDk1LjA2MyAxNTAuMTg4IDkwIDE1MyA2NS4yNSAxMzguMzc1Ii8+PHBvbHlnb24gZmlsbD0iI0VCOEYzNSIgcG9pbnRzPSI2NS4yNSAxMzguMzc1IDYwLjc1IDE3My4yNSA5MCAxNTMiLz48cG9seWdvbiBmaWxsPSIjRUE4RTNBIiBwb2ludHM9IjkyLjI1IDEwMi4zNzUgOTUuMDYzIDE1MC4xODggODYuNjI1IDEyNS43MTkiLz48cG9seWdvbiBmaWxsPSIjRDg3QzMwIiBwb2ludHM9IjM5LjM3NSAxMzguOTM4IDY1LjI1IDEzOC4zNzUgNjAuNzUgMTczLjI1Ii8+PHBvbHlnb24gZmlsbD0iI0VCOEYzNSIgcG9pbnRzPSIxMi45MzggMTg4LjQzOCA2MC43NSAxNzMuMjUgMzkuMzc1IDEzOC45MzggLjU2MyAxNDEuNzUiLz48cG9seWdvbiBmaWxsPSIjRTg4MjFFIiBwb2ludHM9Ijg4Ljg3NSA1OC41IDY0LjY4OCA3OC43NSA0Ni4xMjUgMTAxLjI1IDkyLjI1IDEwMi45MzgiLz48cG9seWdvbiBmaWxsPSIjMzkzOTM5IiBwb2ludHM9IjcwLjMxMyAxMTIuNSA2NC4xMjUgMTI1LjQzOCA4Ni4wNjMgMTE5LjgxMyIgdHJhbnNmb3JtPSJtYXRyaXgoLTEgMCAwIDEgMTUwLjE4OCAwKSIvPjxwb2x5Z29uIGZpbGw9IiNFODhGMzUiIHBvaW50cz0iMTIuMzc1IC41NjMgODguODc1IDU4LjUgNzUuOTM4IDI3Ii8+PHBhdGggZmlsbD0iIzhFNUEzMCIgZD0iTTEyLjM3NTAwMDIsMC41NjI1MDAwMDggTDIuMjUwMDAwMDMsMzEuNTAwMDAwNSBMNy44NzUwMDAxMiw2NS4yNTAwMDEgTDMuOTM3NTAwMDYsNjcuNTAwMDAxIEw5LjU2MjUwMDE0LDcyLjU2MjUgTDUuMDYyNTAwMDgsNzYuNTAwMDAxMSBMMTEuMjUsODIuMTI1MDAxMiBMNy4zMTI1MDAxMSw4NS41MDAwMDEzIEwxNi4zMTI1MDAyLDk2Ljc1MDAwMTQgTDU4LjUwMDAwMDksODMuODEyNTAxMiBDNzkuMTI1MDAxMiw2Ny4zMTI1MDA0IDg5LjI1MDAwMTMsNTguODc1MDAwMyA4OC44NzUwMDEzLDU4LjUwMDAwMDkgQzg4LjUwMDAwMTMsNTguMTI1MDAwOSA2My4wMDAwMDA5LDM4LjgxMjUwMDYgMTIuMzc1MDAwMiwwLjU2MjUwMDAwOCBaIi8+PC9nPjwvZz48L3N2Zz4="),O(this,"windowKey","starknet_metamask"),O(this,"provider",null),O(this,"swo",null),O(this,"lock"),O(this,"version","v2.0.0"),this.lock=new Mutex}async loadWallet(e){return await _(this,R,H).call(this,e),this}async hasSupport(e){return this.provider=await detectMetamaskSupport(e),null!==this.provider}async request(e){return _(this,R,H).call(this).then(t=>t.request(e))}on(e,t){_(this,R,H).call(this).then(r=>r.on(e,t))}off(e,t){_(this,R,H).call(this).then(r=>r.off(e,t))}}Y=new WeakSet,q=async function(e){this.provider||(this.provider=await detectMetamaskSupport(e)),await init({name:"MetaMaskStarknetSnapWallet",remotes:[{name:"MetaMaskStarknetSnapWallet",alias:"MetaMaskStarknetSnapWallet",entry:`https://snaps.consensys.io/starknet/get-starknet/v1/remoteEntry.js?ts=${Date.now()}`}]});let t=await loadRemote("MetaMaskStarknetSnapWallet/index");if(!t)throw Error("Failed to load MetaMask Wallet");return new t.MetaMaskSnapWallet(this.provider,"*")},R=new WeakSet,H=async function(e=window){return this.lock.runExclusive(async()=>(this.swo||(this.swo=await _(this,Y,q).call(this,e),_(this,F,J).call(this)),this.swo))},F=new WeakSet,J=function(){this.swo&&(this.version=this.swo.version,this.name=this.swo.name,this.id=this.swo.id,this.icon=this.swo.icon)};let metaMaskVirtualWallet=new MetaMaskVirtualWallet,wallets=[{id:"argentX",name:"Argent X",icon:"data:image/svg+xml;base64,Cjxzdmcgd2lkdGg9IjQwIiBoZWlnaHQ9IjM2IiB2aWV3Qm94PSIwIDAgNDAgMzYiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxwYXRoIGQ9Ik0yNC43NTgyIC0zLjk3MzY0ZS0wN0gxNC42MjM4QzE0LjI4NTEgLTMuOTczNjRlLTA3IDE0LjAxMzggMC4yODExNzggMTQuMDA2NCAwLjYzMDY4M0MxMy44MDE3IDEwLjQ1NDkgOC44MjIzNCAxOS43NzkyIDAuMjUxODkzIDI2LjM4MzdDLTAuMDIwMjA0NiAyNi41OTMzIC0wLjA4MjE5NDYgMjYuOTg3MiAwLjExNjczNCAyNy4yNzA5TDYuMDQ2MjMgMzUuNzM0QzYuMjQ3OTYgMzYuMDIyIDYuNjQwOTkgMzYuMDg3IDYuOTE3NjYgMzUuODc1NEMxMi4yNzY1IDMxLjc3MjggMTYuNTg2OSAyNi44MjM2IDE5LjY5MSAyMS4zMzhDMjIuNzk1MSAyNi44MjM2IDI3LjEwNTcgMzEuNzcyOCAzMi40NjQ2IDM1Ljg3NTRDMzIuNzQxIDM2LjA4NyAzMy4xMzQxIDM2LjAyMiAzMy4zMzYxIDM1LjczNEwzOS4yNjU2IDI3LjI3MDlDMzkuNDY0MiAyNi45ODcyIDM5LjQwMjIgMjYuNTkzMyAzOS4xMzA0IDI2LjM4MzdDMzAuNTU5NyAxOS43NzkyIDI1LjU4MDQgMTAuNDU0OSAyNS4zNzU5IDAuNjMwNjgzQzI1LjM2ODUgMC4yODExNzggMjUuMDk2OSAtMy45NzM2NGUtMDcgMjQuNzU4MiAtMy45NzM2NGUtMDdaIiBmaWxsPSIjRkY4NzVCIi8+Cjwvc3ZnPgo=",downloads:{chrome:"https://chrome.google.com/webstore/detail/argent-x-starknet-wallet/dlcobpjiigpikoobohmabehhmhfoodbb",firefox:"https://addons.mozilla.org/en-US/firefox/addon/argent-x",edge:"https://microsoftedge.microsoft.com/addons/detail/argent-x/ajcicjlkibolbeaaagejfhnofogocgcj"}},{id:"braavos",name:"Braavos",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAwIiBoZWlnaHQ9IjEwMCIgdmlld0JveD0iMCAwIDEwMCAxMDAiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CiAgICA8cGF0aAogICAgICAgIGQ9Ik02Mi43MDUgMTMuOTExNkM2Mi44MzU5IDE0LjEzMzMgNjIuNjYyMSAxNC40MDcgNjIuNDAzOSAxNC40MDdDNTcuMTgwNyAxNC40MDcgNTIuOTM0OCAxOC41NDI3IDUyLjgzNTEgMjMuNjgxN0M1MS4wNDY1IDIzLjM0NzcgNDkuMTkzMyAyMy4zMjI2IDQ3LjM2MjYgMjMuNjMxMUM0Ny4yMzYxIDE4LjUxNTYgNDMuMDAwOSAxNC40MDcgMzcuNzk0OCAxNC40MDdDMzcuNTM2NSAxNC40MDcgMzcuMzYyNSAxNC4xMzMxIDM3LjQ5MzUgMTMuOTExMkM0MC4wMjE3IDkuNjI4MDkgNDQuNzIwNCA2Ljc1IDUwLjA5OTEgNi43NUM1NS40NzgxIDYuNzUgNjAuMTc2OSA5LjYyODI2IDYyLjcwNSAxMy45MTE2WiIKICAgICAgICBmaWxsPSJ1cmwoI3BhaW50MF9saW5lYXJfMzcyXzQwMjU5KSIgLz4KICAgIDxwYXRoCiAgICAgICAgZD0iTTc4Ljc2MDYgNDUuODcxOEM4MC4yNzI1IDQ2LjMyOTcgODEuNzAyNSA0NS4wMDU1IDgxLjE3MTQgNDMuNTIyMkM3Ni40MTM3IDMwLjIzMzQgNjEuMzkxMSAyNC44MDM5IDUwLjAyNzcgMjQuODAzOUMzOC42NDQyIDI0LjgwMzkgMjMuMjg2OCAzMC40MDcgMTguODc1NCA0My41OTEyQzE4LjM4MjQgNDUuMDY0NSAxOS44MDgzIDQ2LjM0NDYgMjEuMjk3OCA0NS44ODgxTDQ4Ljg3MiAzNy40MzgxQzQ5LjUzMzEgMzcuMjM1NSA1MC4yMzk5IDM3LjIzNDQgNTAuOTAxNyAzNy40MzQ4TDc4Ljc2MDYgNDUuODcxOFoiCiAgICAgICAgZmlsbD0idXJsKCNwYWludDFfbGluZWFyXzM3Ml80MDI1OSkiIC8+CiAgICA8cGF0aAogICAgICAgIGQ9Ik0xOC44MTMyIDQ4LjE3MDdMNDguODkzNSAzOS4wNDcyQzQ5LjU1MDYgMzguODQ3OCA1MC4yNTI0IDM4Ljg0NzMgNTAuOTA5OCAzOS4wNDU2TDgxLjE3ODEgNDguMTc1MkM4My42OTEyIDQ4LjkzMzIgODUuNDExIDUxLjI0ODMgODUuNDExIDUzLjg3MzVWODEuMjIzM0M4NS4yOTQ0IDg3Ljg5OTEgNzkuMjk3NyA5My4yNSA3Mi42MjQ1IDkzLjI1SDYxLjU0MDZDNjAuNDQ0OSA5My4yNSA1OS41NTc3IDkyLjM2MzcgNTkuNTU3NyA5MS4yNjhWODEuNjc4OUM1OS41NTc3IDc3LjkwMzEgNjEuNzkyMSA3NC40ODU1IDY1LjI0OTggNzIuOTcyOUM2OS44ODQ5IDcwLjk0NTQgNzUuMzY4MSA2OC4yMDI4IDc2LjM5OTQgNjIuNjk5MkM3Ni43MzIzIDYwLjkyMjkgNzUuNTc0MSA1OS4yMDk0IDczLjgwMjQgNTguODU3M0M2OS4zMjI2IDU3Ljk2NjcgNjQuMzU2MiA1OC4zMTA3IDYwLjE1NjQgNjAuMTg5M0M1NS4zODg3IDYyLjMyMTkgNTQuMTQxNSA2NS44Njk0IDUzLjY3OTcgNzAuNjMzN0w1My4xMjAxIDc1Ljc2NjJDNTIuOTQ5MSA3Ny4zMzQ5IDUxLjQ3ODUgNzguNTM2NiA0OS45MDE0IDc4LjUzNjZDNDguMjY5OSA3OC41MzY2IDQ3LjA0NjUgNzcuMjk0IDQ2Ljg2OTYgNzUuNjcxMkw0Ni4zMjA0IDcwLjYzMzdDNDUuOTI0OSA2Ni41NTI5IDQ1LjIwNzkgNjIuNTg4NyA0MC45ODk1IDYwLjcwMThDMzYuMTc3NiA1OC41NDk0IDMxLjM0MTkgNTcuODM0NyAyNi4xOTc2IDU4Ljg1NzNDMjQuNDI2IDU5LjIwOTQgMjMuMjY3OCA2MC45MjI5IDIzLjYwMDcgNjIuNjk5MkMyNC42NDEgNjguMjUwNyAzMC4wODEyIDcwLjkzMDUgMzQuNzUwMyA3Mi45NzI5QzM4LjIwOCA3NC40ODU1IDQwLjQ0MjQgNzcuOTAzMSA0MC40NDI0IDgxLjY3ODlWOTEuMjY2M0M0MC40NDI0IDkyLjM2MiAzOS41NTU1IDkzLjI1IDM4LjQ1OTkgOTMuMjVIMjcuMzc1NkMyMC43MDI0IDkzLjI1IDE0LjcwNTcgODcuODk5MSAxNC41ODkxIDgxLjIyMzNWNTMuODY2M0MxNC41ODkxIDUxLjI0NDYgMTYuMzA0NSA0OC45MzE2IDE4LjgxMzIgNDguMTcwN1oiCiAgICAgICAgZmlsbD0idXJsKCNwYWludDJfbGluZWFyXzM3Ml80MDI1OSkiIC8+CiAgICA8ZGVmcz4KICAgICAgICA8bGluZWFyR3JhZGllbnQgaWQ9InBhaW50MF9saW5lYXJfMzcyXzQwMjU5IiB4MT0iNDkuMzA1NyIgeTE9IjIuMDc5IiB4Mj0iODAuMzYyNyIgeTI9IjkzLjY1OTciCiAgICAgICAgICAgIGdyYWRpZW50VW5pdHM9InVzZXJTcGFjZU9uVXNlIj4KICAgICAgICAgICAgPHN0b3Agc3RvcC1jb2xvcj0iI0Y1RDQ1RSIgLz4KICAgICAgICAgICAgPHN0b3Agb2Zmc2V0PSIxIiBzdG9wLWNvbG9yPSIjRkY5NjAwIiAvPgogICAgICAgIDwvbGluZWFyR3JhZGllbnQ+CiAgICAgICAgPGxpbmVhckdyYWRpZW50IGlkPSJwYWludDFfbGluZWFyXzM3Ml80MDI1OSIgeDE9IjQ5LjMwNTciIHkxPSIyLjA3OSIgeDI9IjgwLjM2MjciIHkyPSI5My42NTk3IgogICAgICAgICAgICBncmFkaWVudFVuaXRzPSJ1c2VyU3BhY2VPblVzZSI+CiAgICAgICAgICAgIDxzdG9wIHN0b3AtY29sb3I9IiNGNUQ0NUUiIC8+CiAgICAgICAgICAgIDxzdG9wIG9mZnNldD0iMSIgc3RvcC1jb2xvcj0iI0ZGOTYwMCIgLz4KICAgICAgICA8L2xpbmVhckdyYWRpZW50PgogICAgICAgIDxsaW5lYXJHcmFkaWVudCBpZD0icGFpbnQyX2xpbmVhcl8zNzJfNDAyNTkiIHgxPSI0OS4zMDU3IiB5MT0iMi4wNzkiIHgyPSI4MC4zNjI3IiB5Mj0iOTMuNjU5NyIKICAgICAgICAgICAgZ3JhZGllbnRVbml0cz0idXNlclNwYWNlT25Vc2UiPgogICAgICAgICAgICA8c3RvcCBzdG9wLWNvbG9yPSIjRjVENDVFIiAvPgogICAgICAgICAgICA8c3RvcCBvZmZzZXQ9IjEiIHN0b3AtY29sb3I9IiNGRjk2MDAiIC8+CiAgICAgICAgPC9saW5lYXJHcmFkaWVudD4KICAgIDwvZGVmcz4KPC9zdmc+",downloads:{chrome:"https://chrome.google.com/webstore/detail/braavos-wallet/jnlgamecbpmbajjfhmmmlhejkemejdma",firefox:"https://addons.mozilla.org/en-US/firefox/addon/braavos-wallet",edge:"https://microsoftedge.microsoft.com/addons/detail/braavos-wallet/hkkpjehhcnhgefhbdcgfkeegglpjchdc",ios:`https://link.braavos.app/dapp/${null==(X=null==ssrSafeWindow$1?void 0:ssrSafeWindow$1.location)?void 0:X.host}`,android:`https://link.braavos.app/dapp/${null==(K=null==ssrSafeWindow$1?void 0:ssrSafeWindow$1.location)?void 0:K.host}`}},{id:metaMaskVirtualWallet.id,name:metaMaskVirtualWallet.name,icon:metaMaskVirtualWallet.icon,downloads:{chrome:"https://chrome.google.com/webstore/detail/metamask/nkbihfbeogaeaoehlefnkodbefgpgknn",firefox:"https://addons.mozilla.org/en-US/firefox/addon/ether-metamask/",edge:"https://microsoftedge.microsoft.com/addons/detail/metamask/ejbalbakoplchlghecdalmeeeajnimhm?hl=en-US"}},{id:"okxwallet",name:"OKX Wallet",icon:"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAADAAAAAwCAYAAABXAvmHAAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAJDSURBVHgB7Zq9jtpAEMfHlhEgQLiioXEkoAGECwoKxMcTRHmC5E3IoyRPkPAEkI7unJYmTgEFTYwA8a3NTKScLnCHN6c9r1e3P2llWQy7M/s1Gv1twCP0ej37dDq9x+Zut1t3t9vZjDEHIiSRSPg4ZpDL5fxkMvn1cDh8m0wmfugfO53OoFQq/crn8wxfY9EymQyrVCqMfHvScZx1p9ls3pFxXBy/bKlUipGPrVbLuQqAfsCliq3zl0H84zwtjQrOw4Mt1W63P5LvBm2d+Xz+YzqdgkqUy+WgWCy+Mc/nc282m4FqLBYL+3g8fjDxenq72WxANZbLJeA13zDX67UDioL5ybXwafMYu64Ltn3bdDweQ5R97fd7GyhBQMipx4POeEDHIu2LfDdBIGGz+hJ9CQ1ABjoA2egAZPM6AgiCAEQhsi/C4jHyPA/6/f5NG3Ks2+3CYDC4aTccDrn6ojG54MnEvG00GoVmWLIRNZ7wTCwDHYBsdACy0QHIhiuRETxlICWpMMhGZHmqS8qH6JLyGegAZKMDkI0uKf8X4SWlaZo+Pp1bRrwlJU8ZKLIvUjKh0WiQ3sRUbNVq9c5Ebew7KEo2m/1p4jJ4qAmDaqDQBzj5XyiAT4VCQezJigAU+IDU+z8vJFnGWeC+bKQV/5VZ71FV6L7PA3gg3tXrdQ+DgLhC+75Wq3no69P3MC0NFQpx2lL04Ql9gHK1bRDjsSBIvScBnDTk1WrlGIZBorIDEYJj+rhdgnQ67VmWRe0zlplXl81vcyEt0rSoYDUAAAAASUVORK5CYII=",downloads:{chrome:"https://chrome.google.com/webstore/detail/mcohilncbfahbmgdjkbpemcciiolgcge",firefox:"https://addons.mozilla.org/en-US/firefox/addon/okexwallet",edge:"https://microsoftedge.microsoft.com/addons/detail/%E6%AC%A7%E6%98%93-web3-%E9%92%B1%E5%8C%85/pbpjkcldjiffchgbbndmhojiacbgflha",safari:"https://apps.apple.com/us/app/okx-wallet/id6463797825"}},{id:"keplr",name:"Keplr",icon:"data:image/png;base64,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",downloads:{chrome:"https://chrome.google.com/webstore/detail/keplr/dmkamcknogkgcdfhhbddcghachkejeap",firefox:"https://addons.mozilla.org/en-US/firefox/addon/keplr",edge:"https://microsoftedge.microsoft.com/addons/detail/keplr/ocodgmmffbkkeecmadcijjhkmeohinei"}},{id:"fordefi",name:"Fordefi",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMjQiIGhlaWdodD0iMjQiIHZpZXdCb3g9IjAgMCAyNCAyNCIgZmlsbD0ibm9uZSIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj4KPGcgY2xpcC1wYXRoPSJ1cmwoI2NsaXAwXzEzNDk0XzY2MjU0KSI+CjxwYXRoIGQ9Ik0xMC44NzY5IDE1LjYzNzhIMS41VjE4LjM5OUMxLjUgMTkuODAxMyAyLjYzNDQ3IDIwLjkzOCA0LjAzMzkyIDIwLjkzOEg4LjI0OTkyTDEwLjg3NjkgMTUuNjM3OFoiIGZpbGw9IiM3OTk0RkYiLz4KPHBhdGggZD0iTTEuNSA5Ljc3NTUxSDE5LjA1MTZMMTcuMDEzOSAxMy44NzExSDEuNVY5Ljc3NTUxWiIgZmlsbD0iIzQ4NkRGRiIvPgo8cGF0aCBkPSJNNy42NTk5NiAzSDEuNTI0NDFWOC4wMDcwNEgyMi40NjEyVjNIMTYuMzI1NlY2LjczOTQ0SDE1LjA2MDZWM0g4LjkyNTAyVjYuNzM5NDRINy42NTk5NlYzWiIgZmlsbD0iIzVDRDFGQSIvPgo8L2c+CjxkZWZzPgo8Y2xpcFBhdGggaWQ9ImNsaXAwXzEzNDk0XzY2MjU0Ij4KPHJlY3Qgd2lkdGg9IjIxIiBoZWlnaHQ9IjE4IiBmaWxsPSJ3aGl0ZSIgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMS41IDMpIi8+CjwvY2xpcFBhdGg+CjwvZGVmcz4KPC9zdmc+Cg==",downloads:{chrome:"https://chrome.google.com/webstore/detail/fordefi/hcmehenccjdmfbojapcbcofkgdpbnlle"}},{id:"xverse",name:"Xverse",icon:"data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iMTAyIiBoZWlnaHQ9IjEwMiIgdmlld0JveD0iMCAwIDEwMiAxMDIiIGZpbGw9Im5vbmUiIHhtbG5zPSJodHRwOi8vd3d3LnczLm9yZy8yMDAwL3N2ZyI+CjxnIGlkPSJJY29uX0FydCAoRWRpdCBNZSkiPgo8cmVjdCB3aWR0aD0iMTAyIiBoZWlnaHQ9IjEwMiIgZmlsbD0iIzE4MTgxOCIvPgo8ZyBpZD0iTG9nby9FbWJsZW0iIGNsaXAtcGF0aD0idXJsKCNjbGlwMF8yMF8xMjIzKSI+CjxwYXRoIGlkPSJWZWN0b3IiIGQ9Ik03NC42NTQyIDczLjg4ODNWNjUuMjMxMkM3NC42NTQyIDY0Ljg4OCA3NC41MTc3IDY0LjU2MDYgNzQuMjc0NSA2NC4zMTc0TDM3LjQzOTcgMjcuNDgyNUMzNy4xOTY1IDI3LjIzOTIgMzYuODY5MSAyNy4xMDI4IDM2LjUyNTggMjcuMTAyOEgyNy44NjlDMjcuNDQxNiAyNy4xMDI4IDI3LjA5MzggMjcuNDUwNiAyNy4wOTM4IDI3Ljg3OFYzNS45MjExQzI3LjA5MzggMzYuMjY0NCAyNy4yMzAyIDM2LjU5MTcgMjcuNDczNCAzNi44MzVMNDAuNjk1MiA1MC4wNTY3QzQwLjk5NzUgNTAuMzU5MSA0MC45OTc1IDUwLjg1MDEgNDAuNjk1MiA1MS4xNTI0TDI3LjMyMTEgNjQuNTI2NUMyNy4xNzU2IDY0LjY3MiAyNy4wOTM4IDY0Ljg2OTggMjcuMDkzOCA2NS4wNzQ0VjczLjg4ODNDMjcuMDkzOCA3NC4zMTUzIDI3LjQ0MTYgNzQuNjYzNSAyNy44NjkgNzQuNjYzNUg0Mi4zMzQyQzQyLjc2MTYgNzQuNjYzNSA0My4xMDk0IDc0LjMxNTMgNDMuMTA5NCA3My44ODgzVjY4LjY5NThDNDMuMTA5NCA2OC40OTEyIDQzLjE5MTIgNjguMjkzNSA0My4zMzY4IDY4LjE0NzlMNTAuNTExNCA2MC45NzMzQzUwLjgxMzggNjAuNjcwOSA1MS4zMDQ4IDYwLjY3MDkgNTEuNjA3MiA2MC45NzMzTDY0LjkxOTggNzQuMjg2MUM2NS4xNjMxIDc0LjUyOTMgNjUuNDkwNCA3NC42NjU4IDY1LjgzMzcgNzQuNjY1OEg3My44NzY3Qzc0LjMwNDIgNzQuNjY1OCA3NC42NTE5IDc0LjMxNzYgNzQuNjUxOSA3My44OTA2TDc0LjY1NDIgNzMuODg4M1oiIGZpbGw9IndoaXRlIi8+CjxwYXRoIGlkPSJWZWN0b3JfMiIgZD0iTTU1LjM1OCAzOC41NjcySDYyLjYwMzFDNjMuMDMyOCAzOC41NjcyIDYzLjM4MjkgMzguOTE3MyA2My4zODI5IDM5LjM0NjlWNDYuNTkyMUM2My4zODI5IDQ3LjI4NzcgNjQuMjI0IDQ3LjYzNTUgNjQuNzE1MSA0Ny4xNDIyTDc0LjY1NDEgMzcuMTg3M0M3NC43OTk0IDM3LjA0MTggNzQuODgxNiAzNi44NDQgNzQuODgxNiAzNi42MzcxVjI3LjkxODlDNzQuODgxNiAyNy40ODkyIDc0LjUzMzQgMjcuMTM5MSA3NC4xMDE3IDI3LjEzOTFMNjUuMjUzOCAyNy4xMjc3QzY1LjA0NyAyNy4xMjc3IDY0Ljg0OTIgMjcuMjA5NiA2NC43MDE0IDI3LjM1NTFMNTQuODA1NiAzNy4yMzVDNTQuMzE0NSAzNy43MjYgNTQuNjYyMyAzOC41NjcyIDU1LjM1NTcgMzguNTY3Mkg1NS4zNThaIiBmaWxsPSIjRUU3QTMwIi8+CjwvZz4KPC9nPgo8ZGVmcz4KPGNsaXBQYXRoIGlkPSJjbGlwMF8yMF8xMjIzIj4KPHJlY3Qgd2lkdGg9IjQ3LjgxMjUiIGhlaWdodD0iNDcuODEyNSIgZmlsbD0id2hpdGUiIHRyYW5zZm9ybT0idHJhbnNsYXRlKDI3LjA5MzggMjcuMDkzOCkiLz4KPC9jbGlwUGF0aD4KPC9kZWZzPgo8L3N2Zz4K",downloads:{android:"https://play.google.com/store/apps/details?id=com.secretkeylabs.xverse",ios:"https://apps.apple.com/us/app/xverse-bitcoin-web3-wallet/id1552272513",chrome:"https://chrome.google.com/webstore/detail/xverse-wallet/idnnbdplmphpflfnlkomgpfbpcgelopg"}}];class LocalStorageWrapper{constructor(e){L(this,$),L(this,k),L(this,C,!1),L(this,T,void 0),L(this,P,void 0),O(this,"value"),G(this,P,e),_(this,k,W).call(this)}set(e){return(!!v(this,C)||!!_(this,k,W).call(this))&&(this.delete(),this.value=e,e&&(G(this,T,`${v(this,P)}-${generateUID()}`),localStorage.setItem(v(this,T),e)),!0)}get(){return _(this,$,ee).call(this),this.value}delete(){return(!!v(this,C)||!!_(this,k,W).call(this))&&(this.value=null,v(this,T)&&localStorage.removeItem(v(this,T)),!0)}}C=new WeakMap,T=new WeakMap,P=new WeakMap,$=new WeakSet,ee=function(){this.value&&this.set(this.value)},k=new WeakSet,W=function(){try{v(this,C)}catch(e){console.warn(e)}return v(this,C)};let Permission={ACCOUNTS:"accounts"};function filterBy(e,t){var r,n;if(null!=(r=null==t?void 0:t.include)&&r.length){let r=new Set(t.include);return e.filter(e=>r.has(e.id))}if(null!=(n=null==t?void 0:t.exclude)&&n.length){let r=new Set(t.exclude);return e.filter(e=>!r.has(e.id))}return e}let filterByAuthorized=async e=>{let t=await Promise.all(e.map(async e=>{try{return(await e.request({type:"wallet_getPermissions"})).includes(Permission.ACCOUNTS)}catch{return!1}}));return e.filter((e,r)=>t[r])},virtualWalletKeys=ensureKeysArray({id:!0,name:!0,icon:!0,windowKey:!0,loadWallet:!0,hasSupport:!0}),fullWalletKeys=ensureKeysArray({id:!0,name:!0,version:!0,icon:!0,request:!0,on:!0,off:!0});function createWalletGuard(e){return function(t){return null!==t&&"object"==typeof t&&e.every(e=>e in t)}}let isFullWallet=createWalletGuard(fullWalletKeys),isVirtualWallet=createWalletGuard(virtualWalletKeys);function isWalletObject(e){try{return isFullWallet(e)||isVirtualWallet(e)}catch{}return!1}function scanObjectForWallets(e,t){return Object.values(Object.getOwnPropertyNames(e).reduce((r,n)=>{if(n.startsWith("starknet")){let o=e[n];t(o)&&!r[o.id]&&(r[o.id]=o)}return r},{}))}let sortBy=(e,t)=>{if(!(t&&Array.isArray(t)))return shuffle(e);{e.sort((e,r)=>t.indexOf(e.id)-t.indexOf(r.id));let r=e.length-t.length;return[...e.slice(r),...shuffle(e.slice(0,r))]}},virtualWallets=[metaMaskVirtualWallet];function initiateVirtualWallets(e){virtualWallets.forEach(async t=>{t.windowKey in e||await t.hasSupport(e)&&(e[t.windowKey]=t)})}let virtualWalletsMap={};async function resolveVirtualWallet(e,t){let r=virtualWalletsMap[t.id];return r||(r=await t.loadWallet(e),virtualWalletsMap[t.id]=r),r}let defaultOptions={windowObject:null!=ssrSafeWindow$1?ssrSafeWindow$1:{},isWalletObject,storageFactoryImplementation:e=>new LocalStorageWrapper(e)};function getStarknet(e={}){let{storageFactoryImplementation:t,windowObject:r,isWalletObject:n}={...defaultOptions,...e},o=t("gsw-last");return initiateVirtualWallets(r),{getAvailableWallets:async(e={})=>{let t=scanObjectForWallets(r,n);return pipe$1(t=>filterBy(t,e),t=>sortBy(t,e.sort))(t)},getAuthorizedWallets:async(e={})=>{let t=scanObjectForWallets(r,n);return pipe$1(e=>filterByAuthorized(e),t=>filterBy(t,e),t=>sortBy(t,e.sort))(t)},getDiscoveryWallets:async(e={})=>pipe$1(t=>filterBy(t,e),t=>sortBy(t,e.sort))(wallets),getLastConnectedWallet:async()=>{let e=o.get(),t=scanObjectForWallets(r,n).find(t=>t.id===e),[i]=await filterByAuthorized(t?[t]:[]);return i||(o.delete(),null)},discoverVirtualWallets:async(e=[])=>{let t=new Set(e),n=t.size>0?virtualWallets.filter(e=>t.has(e.name)||t.has(e.id)):virtualWallets;await Promise.all(n.map(async e=>{await e.hasSupport(r)&&(r[e.windowKey]=e)}))},enable:async(e,t)=>{let n;if(isVirtualWallet(e))n=await resolveVirtualWallet(r,e);else if(isFullWallet(e))n=e;else throw Error("Invalid wallet object");await n.request({type:"wallet_requestAccounts",params:{silent_mode:null==t?void 0:t.silent_mode}});let i=await n.request({type:"wallet_getPermissions"});if(!(null!=i&&i.includes(Permission.ACCOUNTS)))throw Error("Failed to connect to wallet");return o.set(n.id),n},disconnect:async({clearLastWallet:e}={})=>{e&&o.delete()}}}let main=getStarknet(),BROWSER_ALIASES_MAP={"Amazon Silk":"amazon_silk","Android Browser":"android",Bada:"bada",BlackBerry:"blackberry",Chrome:"chrome",Chromium:"chromium",Electron:"electron",Epiphany:"epiphany",Firefox:"firefox",Focus:"focus",Generic:"generic","Google Search":"google_search",Googlebot:"googlebot","Internet Explorer":"ie","K-Meleon":"k_meleon",Maxthon:"maxthon","Microsoft Edge":"edge","MZ Browser":"mz","NAVER Whale Browser":"naver",Opera:"opera","Opera Coast":"opera_coast",PhantomJS:"phantomjs",Puffin:"puffin",QupZilla:"qupzilla",QQ:"qq",QQLite:"qqlite",Safari:"safari",Sailfish:"sailfish","Samsung Internet for Android":"samsung_internet",SeaMonkey:"seamonkey",Sleipnir:"sleipnir",Swing:"swing",Tizen:"tizen","UC Browser":"uc",Vivaldi:"vivaldi","WebOS Browser":"webos",WeChat:"wechat","Yandex Browser":"yandex",Roku:"roku"},BROWSER_MAP={amazon_silk:"Amazon Silk",android:"Android Browser",bada:"Bada",blackberry:"BlackBerry",chrome:"Chrome",chromium:"Chromium",electron:"Electron",epiphany:"Epiphany",firefox:"Firefox",focus:"Focus",generic:"Generic",googlebot:"Googlebot",google_search:"Google Search",ie:"Internet Explorer",k_meleon:"K-Meleon",maxthon:"Maxthon",edge:"Microsoft Edge",mz:"MZ Browser",naver:"NAVER Whale Browser",opera:"Opera",opera_coast:"Opera Coast",phantomjs:"PhantomJS",puffin:"Puffin",qupzilla:"QupZilla",qq:"QQ Browser",qqlite:"QQ Browser Lite",safari:"Safari",sailfish:"Sailfish",samsung_internet:"Samsung Internet for Android",seamonkey:"SeaMonkey",sleipnir:"Sleipnir",swing:"Swing",tizen:"Tizen",uc:"UC Browser",vivaldi:"Vivaldi",webos:"WebOS Browser",wechat:"WeChat",yandex:"Yandex Browser"},PLATFORMS_MAP={tablet:"tablet",mobile:"mobile",desktop:"desktop",tv:"tv"},OS_MAP={WindowsPhone:"Windows Phone",Windows:"Windows",MacOS:"macOS",iOS:"iOS",Android:"Android",WebOS:"WebOS",BlackBerry:"BlackBerry",Bada:"Bada",Tizen:"Tizen",Linux:"Linux",ChromeOS:"Chrome OS",PlayStation4:"PlayStation 4",Roku:"Roku"},ENGINE_MAP={EdgeHTML:"EdgeHTML",Blink:"Blink",Trident:"Trident",Presto:"Presto",Gecko:"Gecko",WebKit:"WebKit"};class Utils{static getFirstMatch(e,t){let r=t.match(e);return r&&r.length>0&&r[1]||""}static getSecondMatch(e,t){let r=t.match(e);return r&&r.length>1&&r[2]||""}static matchAndReturnConst(e,t,r){if(e.test(t))return r}static getWindowsVersionName(e){switch(e){case"NT":return"NT";case"XP":case"NT 5.1":return"XP";case"NT 5.0":return"2000";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}static getMacOSVersionName(e){let t=e.split(".").splice(0,2).map(e=>parseInt(e,10)||0);if(t.push(0),10===t[0])switch(t[1]){case 5:return"Leopard";case 6:return"Snow Leopard";case 7:return"Lion";case 8:return"Mountain Lion";case 9:return"Mavericks";case 10:return"Yosemite";case 11:return"El Capitan";case 12:return"Sierra";case 13:return"High Sierra";case 14:return"Mojave";case 15:return"Catalina";default:return}}static getAndroidVersionName(e){let t=e.split(".").splice(0,2).map(e=>parseInt(e,10)||0);if(t.push(0),!(1===t[0]&&t[1]<5)){if(1===t[0]&&t[1]<6)return"Cupcake";if(1===t[0]&&t[1]>=6)return"Donut";if(2===t[0]&&t[1]<2)return"Eclair";if(2===t[0]&&2===t[1])return"Froyo";if(2===t[0]&&t[1]>2)return"Gingerbread";if(3===t[0])return"Honeycomb";if(4===t[0]&&t[1]<1)return"Ice Cream Sandwich";if(4===t[0]&&t[1]<4)return"Jelly Bean";if(4===t[0]&&t[1]>=4)return"KitKat";if(5===t[0])return"Lollipop";if(6===t[0])return"Marshmallow";if(7===t[0])return"Nougat";if(8===t[0])return"Oreo";if(9===t[0])return"Pie"}}static getVersionPrecision(e){return e.split(".").length}static compareVersions(e,t,r=!1){let n=Utils.getVersionPrecision(e),o=Utils.getVersionPrecision(t),i=Math.max(n,o),a=0,s=Utils.map([e,t],e=>{let t=i-Utils.getVersionPrecision(e),r=e+Array(t+1).join(".0");return Utils.map(r.split("."),e=>Array(20-e.length).join("0")+e).reverse()});for(r&&(a=i-Math.min(n,o)),i-=1;i>=a;){if(s[0][i]>s[1][i])return 1;if(s[0][i]===s[1][i]){if(i===a)return 0;i-=1}else if(s[0][i]<s[1][i])return -1}}static map(e,t){let r,n=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(r=0;r<e.length;r+=1)n.push(t(e[r]));return n}static find(e,t){let r,n;if(Array.prototype.find)return Array.prototype.find.call(e,t);for(r=0,n=e.length;r<n;r+=1){let n=e[r];if(t(n,r))return n}}static assign(e,...t){return Object.assign(e,...t)}static getBrowserAlias(e){return BROWSER_ALIASES_MAP[e]}static getBrowserTypeByAlias(e){return BROWSER_MAP[e]||""}}let commonVersionIdentifier=/version\/(\d+(\.?_?\d+)+)/i,browsersList=[{test:[/googlebot/i],describe(e){let t={name:"Googlebot"},r=Utils.getFirstMatch(/googlebot\/(\d+(\.\d+))/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/opera/i],describe(e){let t={name:"Opera"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:opera)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opr\/|opios/i],describe(e){let t={name:"Opera"},r=Utils.getFirstMatch(/(?:opr|opios)[\s/](\S+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/SamsungBrowser/i],describe(e){let t={name:"Samsung Internet for Android"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:SamsungBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Whale/i],describe(e){let t={name:"NAVER Whale Browser"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:whale)[\s/](\d+(?:\.\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MZBrowser/i],describe(e){let t={name:"MZ Browser"},r=Utils.getFirstMatch(/(?:MZBrowser)[\s/](\d+(?:\.\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/focus/i],describe(e){let t={name:"Focus"},r=Utils.getFirstMatch(/(?:focus)[\s/](\d+(?:\.\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/swing/i],describe(e){let t={name:"Swing"},r=Utils.getFirstMatch(/(?:swing)[\s/](\d+(?:\.\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/coast/i],describe(e){let t={name:"Opera Coast"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:coast)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/opt\/\d+(?:.?_?\d+)+/i],describe(e){let t={name:"Opera Touch"},r=Utils.getFirstMatch(/(?:opt)[\s/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/yabrowser/i],describe(e){let t={name:"Yandex Browser"},r=Utils.getFirstMatch(/(?:yabrowser)[\s/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/ucbrowser/i],describe(e){let t={name:"UC Browser"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:ucbrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/Maxthon|mxios/i],describe(e){let t={name:"Maxthon"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:Maxthon|mxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/epiphany/i],describe(e){let t={name:"Epiphany"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:epiphany)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/puffin/i],describe(e){let t={name:"Puffin"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:puffin)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sleipnir/i],describe(e){let t={name:"Sleipnir"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:sleipnir)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/k-meleon/i],describe(e){let t={name:"K-Meleon"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/(?:k-meleon)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/micromessenger/i],describe(e){let t={name:"WeChat"},r=Utils.getFirstMatch(/(?:micromessenger)[\s/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/qqbrowser/i],describe(e){let t={name:/qqbrowserlite/i.test(e)?"QQ Browser Lite":"QQ Browser"},r=Utils.getFirstMatch(/(?:qqbrowserlite|qqbrowser)[/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/msie|trident/i],describe(e){let t={name:"Internet Explorer"},r=Utils.getFirstMatch(/(?:msie |rv:)(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/\sedg\//i],describe(e){let t={name:"Microsoft Edge"},r=Utils.getFirstMatch(/\sedg\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/edg([ea]|ios)/i],describe(e){let t={name:"Microsoft Edge"},r=Utils.getSecondMatch(/edg([ea]|ios)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/vivaldi/i],describe(e){let t={name:"Vivaldi"},r=Utils.getFirstMatch(/vivaldi\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/seamonkey/i],describe(e){let t={name:"SeaMonkey"},r=Utils.getFirstMatch(/seamonkey\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/sailfish/i],describe(e){let t={name:"Sailfish"},r=Utils.getFirstMatch(/sailfish\s?browser\/(\d+(\.\d+)?)/i,e);return r&&(t.version=r),t}},{test:[/silk/i],describe(e){let t={name:"Amazon Silk"},r=Utils.getFirstMatch(/silk\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/phantom/i],describe(e){let t={name:"PhantomJS"},r=Utils.getFirstMatch(/phantomjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/slimerjs/i],describe(e){let t={name:"SlimerJS"},r=Utils.getFirstMatch(/slimerjs\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){let t={name:"BlackBerry"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/blackberry[\d]+\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(web|hpw)[o0]s/i],describe(e){let t={name:"WebOS Browser"},r=Utils.getFirstMatch(commonVersionIdentifier,e)||Utils.getFirstMatch(/w(?:eb)?[o0]sbrowser\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/bada/i],describe(e){let t={name:"Bada"},r=Utils.getFirstMatch(/dolfin\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/tizen/i],describe(e){let t={name:"Tizen"},r=Utils.getFirstMatch(/(?:tizen\s?)?browser\/(\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/qupzilla/i],describe(e){let t={name:"QupZilla"},r=Utils.getFirstMatch(/(?:qupzilla)[\s/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/firefox|iceweasel|fxios/i],describe(e){let t={name:"Firefox"},r=Utils.getFirstMatch(/(?:firefox|iceweasel|fxios)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/electron/i],describe(e){let t={name:"Electron"},r=Utils.getFirstMatch(/(?:electron)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/MiuiBrowser/i],describe(e){let t={name:"Miui"},r=Utils.getFirstMatch(/(?:MiuiBrowser)[\s/](\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/chromium/i],describe(e){let t={name:"Chromium"},r=Utils.getFirstMatch(/(?:chromium)[\s/](\d+(\.?_?\d+)+)/i,e)||Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/chrome|crios|crmo/i],describe(e){let t={name:"Chrome"},r=Utils.getFirstMatch(/(?:chrome|crios|crmo)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/GSA/i],describe(e){let t={name:"Google Search"},r=Utils.getFirstMatch(/(?:GSA)\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){let t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){let t={name:"Android Browser"},r=Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/playstation 4/i],describe(e){let t={name:"PlayStation 4"},r=Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/safari|applewebkit/i],describe(e){let t={name:"Safari"},r=Utils.getFirstMatch(commonVersionIdentifier,e);return r&&(t.version=r),t}},{test:[/.*/i],describe(e){let t=/^(.*)\/(.*) /,r=/^(.*)\/(.*)[ \t]\((.*)/,n=-1!==e.search("\\(")?r:t;return{name:Utils.getFirstMatch(n,e),version:Utils.getSecondMatch(n,e)}}}],osParsersList=[{test:[/Roku\/DVP/],describe(e){let t=Utils.getFirstMatch(/Roku\/DVP-(\d+\.\d+)/i,e);return{name:OS_MAP.Roku,version:t}}},{test:[/windows phone/i],describe(e){let t=Utils.getFirstMatch(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i,e);return{name:OS_MAP.WindowsPhone,version:t}}},{test:[/windows /i],describe(e){let t=Utils.getFirstMatch(/Windows ((NT|XP)( \d\d?.\d)?)/i,e),r=Utils.getWindowsVersionName(t);return{name:OS_MAP.Windows,version:t,versionName:r}}},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe(e){let t={name:OS_MAP.iOS},r=Utils.getSecondMatch(/(Version\/)(\d[\d.]+)/,e);return r&&(t.version=r),t}},{test:[/macintosh/i],describe(e){let t=Utils.getFirstMatch(/mac os x (\d+(\.?_?\d+)+)/i,e).replace(/[_\s]/g,"."),r=Utils.getMacOSVersionName(t),n={name:OS_MAP.MacOS,version:t};return r&&(n.versionName=r),n}},{test:[/(ipod|iphone|ipad)/i],describe(e){let t=Utils.getFirstMatch(/os (\d+([_\s]\d+)*) like mac os x/i,e).replace(/[_\s]/g,".");return{name:OS_MAP.iOS,version:t}}},{test(e){let t=!e.test(/like android/i),r=e.test(/android/i);return t&&r},describe(e){let t=Utils.getFirstMatch(/android[\s/-](\d+(\.\d+)*)/i,e),r=Utils.getAndroidVersionName(t),n={name:OS_MAP.Android,version:t};return r&&(n.versionName=r),n}},{test:[/(web|hpw)[o0]s/i],describe(e){let t=Utils.getFirstMatch(/(?:web|hpw)[o0]s\/(\d+(\.\d+)*)/i,e),r={name:OS_MAP.WebOS};return t&&t.length&&(r.version=t),r}},{test:[/blackberry|\bbb\d+/i,/rim\stablet/i],describe(e){let t=Utils.getFirstMatch(/rim\stablet\sos\s(\d+(\.\d+)*)/i,e)||Utils.getFirstMatch(/blackberry\d+\/(\d+([_\s]\d+)*)/i,e)||Utils.getFirstMatch(/\bbb(\d+)/i,e);return{name:OS_MAP.BlackBerry,version:t}}},{test:[/bada/i],describe(e){let t=Utils.getFirstMatch(/bada\/(\d+(\.\d+)*)/i,e);return{name:OS_MAP.Bada,version:t}}},{test:[/tizen/i],describe(e){let t=Utils.getFirstMatch(/tizen[/\s](\d+(\.\d+)*)/i,e);return{name:OS_MAP.Tizen,version:t}}},{test:[/linux/i],describe:()=>({name:OS_MAP.Linux})},{test:[/CrOS/],describe:()=>({name:OS_MAP.ChromeOS})},{test:[/PlayStation 4/],describe(e){let t=Utils.getFirstMatch(/PlayStation 4[/\s](\d+(\.\d+)*)/i,e);return{name:OS_MAP.PlayStation4,version:t}}}],platformParsersList=[{test:[/googlebot/i],describe:()=>({type:"bot",vendor:"Google"})},{test:[/huawei/i],describe(e){let t=Utils.getFirstMatch(/(can-l01)/i,e)&&"Nova",r={type:PLATFORMS_MAP.mobile,vendor:"Huawei"};return t&&(r.model=t),r}},{test:[/nexus\s*(?:7|8|9|10).*/i],describe:()=>({type:PLATFORMS_MAP.tablet,vendor:"Nexus"})},{test:[/ipad/i],describe:()=>({type:PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"})},{test:[/Macintosh(.*?) FxiOS(.*?)\//],describe:()=>({type:PLATFORMS_MAP.tablet,vendor:"Apple",model:"iPad"})},{test:[/kftt build/i],describe:()=>({type:PLATFORMS_MAP.tablet,vendor:"Amazon",model:"Kindle Fire HD 7"})},{test:[/silk/i],describe:()=>({type:PLATFORMS_MAP.tablet,vendor:"Amazon"})},{test:[/tablet(?! pc)/i],describe:()=>({type:PLATFORMS_MAP.tablet})},{test(e){let t=e.test(/ipod|iphone/i),r=e.test(/like (ipod|iphone)/i);return t&&!r},describe(e){let t=Utils.getFirstMatch(/(ipod|iphone)/i,e);return{type:PLATFORMS_MAP.mobile,vendor:"Apple",model:t}}},{test:[/nexus\s*[0-6].*/i,/galaxy nexus/i],describe:()=>({type:PLATFORMS_MAP.mobile,vendor:"Nexus"})},{test:[/[^-]mobi/i],describe:()=>({type:PLATFORMS_MAP.mobile})},{test:e=>"blackberry"===e.getBrowserName(!0),describe:()=>({type:PLATFORMS_MAP.mobile,vendor:"BlackBerry"})},{test:e=>"bada"===e.getBrowserName(!0),describe:()=>({type:PLATFORMS_MAP.mobile})},{test:e=>"windows phone"===e.getBrowserName(),describe:()=>({type:PLATFORMS_MAP.mobile,vendor:"Microsoft"})},{test(e){let t=Number(String(e.getOSVersion()).split(".")[0]);return"android"===e.getOSName(!0)&&t>=3},describe:()=>({type:PLATFORMS_MAP.tablet})},{test:e=>"android"===e.getOSName(!0),describe:()=>({type:PLATFORMS_MAP.mobile})},{test:e=>"macos"===e.getOSName(!0),describe:()=>({type:PLATFORMS_MAP.desktop,vendor:"Apple"})},{test:e=>"windows"===e.getOSName(!0),describe:()=>({type:PLATFORMS_MAP.desktop})},{test:e=>"linux"===e.getOSName(!0),describe:()=>({type:PLATFORMS_MAP.desktop})},{test:e=>"playstation 4"===e.getOSName(!0),describe:()=>({type:PLATFORMS_MAP.tv})},{test:e=>"roku"===e.getOSName(!0),describe:()=>({type:PLATFORMS_MAP.tv})}],enginesParsersList=[{test:e=>"microsoft edge"===e.getBrowserName(!0),describe(e){if(/\sedg\//i.test(e))return{name:ENGINE_MAP.Blink};let t=Utils.getFirstMatch(/edge\/(\d+(\.?_?\d+)+)/i,e);return{name:ENGINE_MAP.EdgeHTML,version:t}}},{test:[/trident/i],describe(e){let t={name:ENGINE_MAP.Trident},r=Utils.getFirstMatch(/trident\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:e=>e.test(/presto/i),describe(e){let t={name:ENGINE_MAP.Presto},r=Utils.getFirstMatch(/presto\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test(e){let t=e.test(/gecko/i),r=e.test(/like gecko/i);return t&&!r},describe(e){let t={name:ENGINE_MAP.Gecko},r=Utils.getFirstMatch(/gecko\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}},{test:[/(apple)?webkit\/537\.36/i],describe:()=>({name:ENGINE_MAP.Blink})},{test:[/(apple)?webkit/i],describe(e){let t={name:ENGINE_MAP.WebKit},r=Utils.getFirstMatch(/webkit\/(\d+(\.?_?\d+)+)/i,e);return r&&(t.version=r),t}}];class Parser{constructor(e,t=!1){if(null==e||""===e)throw Error("UserAgent parameter can't be empty");this._ua=e,this.parsedResult={},!0!==t&&this.parse()}getUA(){return this._ua}test(e){return e.test(this._ua)}parseBrowser(){this.parsedResult.browser={};let e=Utils.find(browsersList,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw Error("Browser's test function is not valid")});return e&&(this.parsedResult.browser=e.describe(this.getUA())),this.parsedResult.browser}getBrowser(){return this.parsedResult.browser?this.parsedResult.browser:this.parseBrowser()}getBrowserName(e){return e?String(this.getBrowser().name).toLowerCase()||"":this.getBrowser().name||""}getBrowserVersion(){return this.getBrowser().version}getOS(){return this.parsedResult.os?this.parsedResult.os:this.parseOS()}parseOS(){this.parsedResult.os={};let e=Utils.find(osParsersList,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw Error("Browser's test function is not valid")});return e&&(this.parsedResult.os=e.describe(this.getUA())),this.parsedResult.os}getOSName(e){let{name:t}=this.getOS();return e?String(t).toLowerCase()||"":t||""}getOSVersion(){return this.getOS().version}getPlatform(){return this.parsedResult.platform?this.parsedResult.platform:this.parsePlatform()}getPlatformType(e=!1){let{type:t}=this.getPlatform();return e?String(t).toLowerCase()||"":t||""}parsePlatform(){this.parsedResult.platform={};let e=Utils.find(platformParsersList,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw Error("Browser's test function is not valid")});return e&&(this.parsedResult.platform=e.describe(this.getUA())),this.parsedResult.platform}getEngine(){return this.parsedResult.engine?this.parsedResult.engine:this.parseEngine()}getEngineName(e){return e?String(this.getEngine().name).toLowerCase()||"":this.getEngine().name||""}parseEngine(){this.parsedResult.engine={};let e=Utils.find(enginesParsersList,e=>{if("function"==typeof e.test)return e.test(this);if(e.test instanceof Array)return e.test.some(e=>this.test(e));throw Error("Browser's test function is not valid")});return e&&(this.parsedResult.engine=e.describe(this.getUA())),this.parsedResult.engine}parse(){return this.parseBrowser(),this.parseOS(),this.parsePlatform(),this.parseEngine(),this}getResult(){return Utils.assign({},this.parsedResult)}satisfies(e){let t={},r=0,n={},o=0;if(Object.keys(e).forEach(i=>{let a=e[i];"string"==typeof a?(n[i]=a,o+=1):"object"==typeof a&&(t[i]=a,r+=1)}),r>0){let e=Object.keys(t),r=Utils.find(e,e=>this.isOS(e));if(r){let e=this.satisfies(t[r]);if(void 0!==e)return e}let n=Utils.find(e,e=>this.isPlatform(e));if(n){let e=this.satisfies(t[n]);if(void 0!==e)return e}}if(o>0){let e=Object.keys(n),t=Utils.find(e,e=>this.isBrowser(e,!0));if(void 0!==t)return this.compareVersion(n[t])}}isBrowser(e,t=!1){let r=this.getBrowserName().toLowerCase(),n=e.toLowerCase(),o=Utils.getBrowserTypeByAlias(n);return t&&o&&(n=o.toLowerCase()),n===r}compareVersion(e){let t=[0],r=e,n=!1,o=this.getBrowserVersion();if("string"==typeof o)return">"===e[0]||"<"===e[0]?(r=e.substr(1),"="===e[1]?(n=!0,r=e.substr(2)):t=[],">"===e[0]?t.push(1):t.push(-1)):"="===e[0]?r=e.substr(1):"~"===e[0]&&(n=!0,r=e.substr(1)),t.indexOf(Utils.compareVersions(o,r,n))>-1}isOS(e){return this.getOSName(!0)===String(e).toLowerCase()}isPlatform(e){return this.getPlatformType(!0)===String(e).toLowerCase()}isEngine(e){return this.getEngineName(!0)===String(e).toLowerCase()}is(e,t=!1){return this.isBrowser(e,t)||this.isOS(e)||this.isPlatform(e)}some(e=[]){return e.some(e=>this.is(e))}}class Bowser{static getParser(e,t=!1){if("string"!=typeof e)throw Error("UserAgent should be a string");return new Parser(e,t)}static parse(e){return new Parser(e).getResult()}static get BROWSER_MAP(){return BROWSER_MAP}static get ENGINE_MAP(){return ENGINE_MAP}static get OS_MAP(){return OS_MAP}static get PLATFORMS_MAP(){return PLATFORMS_MAP}}let ssrSafeWindow=null;function getBrowserStoreVersionFromBrowser(){var e;switch(null==(e=Bowser.getParser(null==ssrSafeWindow?void 0:ssrSafeWindow.navigator.userAgent).getBrowserName())?void 0:e.toLowerCase()){case"firefox":return"firefox";case"microsoft edge":return"edge";case"android browser":case"chrome":case"chromium":case"electron":case"opera":case"vivaldi":return"chrome";case"safari":return"safari";default:return null}}function getOperatingSystemStoreVersionFromBrowser(){var e,t,r;let n=null!=(r=null==(t=null==(e=Bowser.getParser(null==ssrSafeWindow?void 0:ssrSafeWindow.navigator.userAgent).getOS())?void 0:e.name)?void 0:t.toLowerCase())?r:null;switch(n){case"ios":case"android":return n;default:return null}}let enableWithVersion=async(e,t)=>e?main.enable(e,t).catch(()=>null):null,connect=async({modalMode:e="canAsk",storeVersion:t=getBrowserStoreVersionFromBrowser(),osVersion:r=getOperatingSystemStoreVersionFromBrowser(),modalTheme:n,...o}={})=>{var i,a;let s=await main.getAuthorizedWallets({...o}),l=await main.getLastConnectedWallet();if("neverAsk"===e)return enableWithVersion(null!=(i=s.find(e=>e.id===(null==l?void 0:l.id)))?i:s[0],{silent_mode:!0});let c=await main.getAvailableWallets(o);if("canAsk"===e&&l){let e=null!=(a=s.find(e=>e.id===(null==l?void 0:l.id)))?a:1===c.length?c[0]:void 0;if(e)return enableWithVersion(e)}return show({lastWallet:l,authorizedWallets:s,installedWallets:c,discoveryWallets:(await main.getDiscoveryWallets(o)).reduce((e,n)=>{let o=n.downloads[r]||n.downloads[t];if(o){let t=Object.keys(n.downloads).find(e=>n.downloads[e]===o),r="android"===t||"ios"===t?`${n.name} Mobile`:`Install ${n.name}`;e.push({...n,name:r,download:o})}return e},[]),enable:enableWithVersion,modalOptions:{theme:n}})};function disconnect(e={}){return main.disconnect(e)}var __TURBOPACK__imported__module__538156__=__turbopack_context__.i(538156),__TURBOPACK__imported__module__538156__1=__TURBOPACK__imported__module__538156__,__TURBOPACK__imported__module__873525__=__turbopack_context__.i(873525),__TURBOPACK__imported__module__919822__=__turbopack_context__.i(919822),__TURBOPACK__imported__module__682195__=__turbopack_context__.i(682195);class PrivacyMixerContract{contract;account;provider;constructor(e,t,r){this.account=t,this.provider=r,this.contract=new __TURBOPACK__imported__module__538156__1.Contract(__TURBOPACK__imported__module__682195__.default,e,r),this.contract.connect(t)}async deposit(e,t){let r=e.startsWith("0x")?e:"0x"+e;return await this.contract.deposit(r,t)}async batch_deposit(e,t){return await this.contract.batch_deposit(e,t)}async withdraw(e,t,r,n,o){let i=e.startsWith("0x")?e:"0x"+e,a=t.startsWith("0x")?t:"0x"+t;return await this.contract.withdraw(i,a,r,n,o)}async get_anonymity_set_size(){return BigInt((await this.contract.get_anonymity_set_size()).toString())}async get_total_deposits(){return BigInt((await this.contract.get_total_deposits()).toString())}async get_total_withdrawals(){return BigInt((await this.contract.get_total_withdrawals()).toString())}async is_nullifier_used(e){return!!await this.contract.is_nullifier_used(e)}async is_commitment_valid(e){return!!await this.contract.is_commitment_valid(e)}async register_account(e,t){return await this.contract.register_account(e,t)}async get_account_balance(e){return BigInt((await this.contract.get_account_balance(e)).toString())}async transfer_between_accounts(e,t,r){return await this.contract.transfer_between_accounts(e,t,r)}async emergency_pause(){return await this.contract.emergency_pause()}async emergency_unpause(){return await this.contract.emergency_unpause()}async is_paused(){return!!await this.contract.is_paused()}async get_mixing_stats(){let e=await this.contract.get_mixing_stats();return{total_deposits:BigInt(e.total_deposits.toString()),total_withdrawals:BigInt(e.total_withdrawals.toString()),active_commitments:BigInt(e.active_commitments.toString()),anonymity_set_size:BigInt(e.anonymity_set_size.toString()),mixing_efficiency:BigInt(e.mixing_efficiency.toString())}}async verify_privacy_guarantees(){let e=await this.contract.verify_privacy_guarantees();return{min_anonymity_set:BigInt(e.min_anonymity_set.toString()),avg_mixing_time:BigInt(e.avg_mixing_time.toString()),unlinkability_score:BigInt(e.unlinkability_score.toString()),temporal_privacy_score:BigInt(e.temporal_privacy_score.toString())}}async getDepositEvents(e,t){return(await this.provider.getEvents({address:this.contract.address,from_block:e?{block_number:e}:void 0,to_block:t?{block_number:t}:void 0,keys:[["Deposit"]],chunk_size:100})).events.map(e=>({commitment:e.data[0],amount:BigInt(e.data[1]),depositor:e.data[2],timestamp:BigInt(e.data[3]),anonymity_set_size:BigInt(e.data[4])}))}async getWithdrawalEvents(e,t){return(await this.provider.getEvents({address:this.contract.address,from_block:e?{block_number:e}:void 0,to_block:t?{block_number:t}:void 0,keys:[["Withdrawal"]],chunk_size:100})).events.map(e=>({nullifier:e.data[0],recipient:e.data[1],amount:BigInt(e.data[2]),timestamp:BigInt(e.data[3]),anonymity_set_size:BigInt(e.data[4])}))}async generateCommitment(e,t){return"0x"+(await __turbopack_context__.A(485685)).createHash("sha256").update(e).update(t.toString()).digest("hex")}async generateNullifier(e,t){return"0x"+(await __turbopack_context__.A(485685)).createHash("sha256").update(e).update(t).digest("hex")}async generateZKProof(e,t,r,n,o){return[r,t,n,o.toString(),"mock_proof_element_1","mock_proof_element_2","mock_proof_element_3"]}async calculatePrivacyScore(){let e=await this.verify_privacy_guarantees(),t=await this.get_mixing_stats(),r=Number(e.unlinkability_score);return Math.min(100,(r+Number(e.temporal_privacy_score)+(t.anonymity_set_size>10n?100:10*Number(t.anonymity_set_size)))/3)}async estimateOptimalMixingTime(){let e=Number((await this.verify_privacy_guarantees()).avg_mixing_time),t=await this.get_anonymity_set_size();return t<5n?2*e:t<10n?Math.floor(1.5*e):e}async recommendOptimalAmount(e){await this.get_mixing_stats();let t=[BigInt(1e18),BigInt(5e18),BigInt(1e19),BigInt(5e19),BigInt(1e20)];if(t.includes(e))return{suggestedAmounts:[e],reason:"Amount matches common denomination for better privacy"};let r=t.filter(t=>t<e).pop(),n=t.find(t=>t>e),o=[];return r&&o.push(r),n&&o.push(n),{suggestedAmounts:o,reason:"Consider using common denominations to blend with other users"}}}async function createPrivacyMixerContract(e,t,r="https://starknet-mainnet.g.alchemy.com/starknet/version/rpc/v0_8/kwgGr9GGk4YyLXuGfEvpITv1jpvn3PgP",n=__TURBOPACK__imported__module__919822__.ENV.MIXER_CONTRACT_ADDRESS||__TURBOPACK__imported__module__873525__.PRIVACY_MIXER.CONTRACT_ADDRESS){let o=new __TURBOPACK__imported__module__538156__1.RpcProvider({nodeUrl:r});return new PrivacyMixerContract(n,new __TURBOPACK__imported__module__538156__1.Account(o,t,e),o)}async function deployPrivacyMixerContract(e,t){throw Error("Contract deployment not implemented - requires Starknet toolchain")}let __TURBOPACK__default__export__=PrivacyMixerContract;class RealStarknetWalletClient{connection=null;rpcProvider;mixerContract=null;static sharedConnection=null;constructor(e){this.rpcProvider=new __TURBOPACK__imported__module__538156__.RpcProvider({nodeUrl:e||"https://starknet-mainnet.public.blastapi.io/rpc/v0_7"})}async connect(e){try{if(RealStarknetWalletClient.sharedConnection)try{let e=RealStarknetWalletClient.sharedConnection.account.address;if(e)return this.connection=RealStarknetWalletClient.sharedConnection,console.log(" Reusing existing wallet connection",{address:e,walletType:this.connection.walletType}),this.connection}catch(e){console.warn(" Cached connection is stale, creating new connection:",e),RealStarknetWalletClient.sharedConnection=null}throw Error("Wallet connection is only available in the browser")}catch(e){throw Error(`Failed to connect to Starknet wallet: ${e}`)}}async disconnect(){this.connection&&(await disconnect(),this.connection=null,RealStarknetWalletClient.sharedConnection=null)}isConnected(){return this.connection?.isConnected||!1}getAccount(){return this.connection?{address:this.connection.account.address,publicKey:"",walletType:this.connection.walletType,chainId:"SN_MAIN"}:null}async getBalance(e){if(!this.connection)throw Error("Wallet not connected");if(e&&"strk"!==e.toLowerCase()&&"native"!==e.toLowerCase())try{let t=[{name:"balance_of",type:"function",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"}],outputs:[{type:"core::integer::u256"}],state_mutability:"view"},{name:"decimals",type:"function",inputs:[],outputs:[{type:"core::integer::u8"}],state_mutability:"view"},{name:"symbol",type:"function",inputs:[],outputs:[{type:"core::felt252"}],state_mutability:"view"}],r=new __TURBOPACK__imported__module__538156__.Contract(t,e,this.rpcProvider),n=await r.balance_of(this.connection.account.address),o=await r.decimals(),i=await r.symbol();return console.log(" Token balance check via contract:",{address:this.connection.account.address,contract:e,balance:n.toString(),decimals:o.toString(),symbol:i.toString()}),{symbol:__TURBOPACK__imported__module__538156__.num.toHex(i),address:e,balance:BigInt(n.toString()),decimals:Number(o.toString())}}catch(e){throw Error(`Failed to get token balance: ${e}`)}{let e="0x04718f5a0fc34cc1af16a1cdee98ffb20c31f5cd61d6ab07201858f4287c938d";try{let t=[{name:"balance_of",type:"function",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"}],outputs:[{type:"core::integer::u256"}],state_mutability:"view"}],r=new __TURBOPACK__imported__module__538156__.Contract(t,e,this.rpcProvider),n=await r.balance_of(this.connection.account.address);return console.log(" STRK balance check via contract:",{address:this.connection.account.address,contract:e,balance:n.toString()}),{symbol:"STRK",address:e,balance:BigInt(n.toString()),decimals:18}}catch(e){throw console.error("Failed to get STRK balance via contract:",e),Error(`Failed to get STRK balance: ${e}`)}}}async sendTransaction(e){if(!this.connection)throw Error("Wallet not connected");try{return{transactionHash:(await this.connection.account.execute(e)).transaction_hash,status:"PENDING"}}catch(e){throw Error(`Transaction failed: ${e}`)}}async waitForTransaction(e,t=5e3){if(!this.connection)throw Error("Wallet not connected");try{let t=await this.rpcProvider.waitForTransaction(e);return{transactionHash:e,status:t.isSuccess()?"ACCEPTED_ON_L2":"REJECTED",blockNumber:t.block_number||void 0,actualFee:t.actual_fee?.toString()||void 0}}catch(e){throw Error(`Failed to wait for transaction: ${e}`)}}async transfer(e,t,r){if(e&&"strk"!==e.toLowerCase()&&"native"!==e.toLowerCase()){let n=[{contractAddress:e,entrypoint:"transfer",calldata:__TURBOPACK__imported__module__538156__.CallData.compile([t,__TURBOPACK__imported__module__538156__.cairo.uint256(r)])}];return this.sendTransaction(n)}{let e=[{contractAddress:t,entrypoint:"__default__",calldata:__TURBOPACK__imported__module__538156__.CallData.compile([__TURBOPACK__imported__module__538156__.cairo.uint256(r)])}];return this.sendTransaction(e)}}async approve(e,t,r){if(!e||"strk"===e.toLowerCase()||"native"===e.toLowerCase())throw Error("Native STRK does not require approval - use direct transfer");let n=[{contractAddress:e,entrypoint:"approve",calldata:__TURBOPACK__imported__module__538156__.CallData.compile([t,__TURBOPACK__imported__module__538156__.cairo.uint256(r)])}];return this.sendTransaction(n)}async switchAccount(e){let t=this.getAccount();if(!t)throw Error("No account connected");return t}async listAccounts(){let e=this.getAccount();return e?[e]:[]}async callContract(e,t,r){if(!this.connection)throw Error("Wallet not connected");return this.rpcProvider.callContract({contractAddress:e,entrypoint:t,calldata:r})}async initMixerContract(e){if(!this.connection)throw Error("No wallet connected");try{this.mixerContract=new PrivacyMixerContract(e,this.connection.account,this.rpcProvider)}catch(e){throw console.error("Failed to initialize mixer contract:",e),e}}async depositToMixer(e,t){if(!this.mixerContract)throw Error("Mixer contract not initialized. Call initMixerContract first.");if(!this.connection)throw Error("No wallet connected");try{return(await this.mixerContract.deposit(e,t)).transaction_hash}catch(e){throw console.error("Failed to deposit to mixer:",e),e}}async withdrawFromMixer(e,t,r,n,o){if(!this.mixerContract)throw Error("Mixer contract not initialized. Call initMixerContract first.");if(!this.connection)throw Error("No wallet connected");try{return(await this.mixerContract.withdraw(e,t,r,n,o)).transaction_hash}catch(e){throw console.error("Failed to withdraw from mixer:",e),e}}async getMixerStats(){if(!this.mixerContract)throw Error("Mixer contract not initialized. Call initMixerContract first.");return await this.mixerContract.get_mixing_stats()}async getPrivacyMetrics(){if(!this.mixerContract)throw Error("Mixer contract not initialized. Call initMixerContract first.");return await this.mixerContract.verify_privacy_guarantees()}detectWalletType(e){return e.id?.includes("argentX")?"argentX":e.id?.includes("braavos")?"braavos":e.id?.includes("bitkeep")?"bitkeep":e.id?.includes("okx")?"okx":"argentX"}}class MockStarknetWalletClient{connected=!1;mockAccount={address:"0x123...mock",publicKey:"0xabc...mock",walletType:"argentX",chainId:"SN_MAIN"};async connect(e){return this.connected=!0,{account:{},provider:{},isConnected:!0,walletType:e||"argentX"}}async disconnect(){this.connected=!1}isConnected(){return this.connected}getAccount(){return this.connected?this.mockAccount:null}async getBalance(e){return{symbol:"STRK",address:e||"0x123...strk",balance:BigInt(1e6),decimals:18}}async sendTransaction(e){return{transactionHash:"0x"+Date.now().toString(16),status:"PENDING"}}async waitForTransaction(e){return{transactionHash:e,status:"ACCEPTED_ON_L2",blockNumber:123456}}async transfer(e,t,r){return this.sendTransaction([])}async approve(e,t,r){return this.sendTransaction([])}async switchAccount(e){return this.mockAccount}async listAccounts(){return[this.mockAccount]}async callContract(e,t,r){return{result:["0x123"]}}async initMixerContract(e){}async depositToMixer(e,t){return"0x"+Date.now().toString(16)}async withdrawFromMixer(e,t,r,n,o){return"0x"+Date.now().toString(16)}async getMixerStats(){return{total_deposits:1000n,total_withdrawals:500n,active_commitments:500n,anonymity_set_size:100n,mixing_efficiency:95n}}async getPrivacyMetrics(){return{min_anonymity_set:10n,avg_mixing_time:3600n,unlinkability_score:95n,temporal_privacy_score:90n}}}class StarknetWalletManager{clients=new Map;activeClient=null;constructor(){this.clients.set("argentX",new RealStarknetWalletClient),this.clients.set("braavos",new RealStarknetWalletClient),this.clients.set("okx",new RealStarknetWalletClient)}async connectWallet(e){let t=e?this.clients.get(e):this.clients.get("argentX");if(!t)throw Error(`Unsupported wallet: ${e}`);let r=await t.connect(e);return this.activeClient=t,r}getActiveClient(){return this.activeClient}async disconnectAll(){this.activeClient&&(await this.activeClient.disconnect(),this.activeClient=null)}getSupportedWallets(){return Array.from(this.clients.keys())}}var __TURBOPACK__imported__module__919822__1=__TURBOPACK__imported__module__919822__,__TURBOPACK__imported__module__873525__1=__TURBOPACK__imported__module__873525__,__TURBOPACK__imported__module__538156__2=__TURBOPACK__imported__module__538156__;function generateSecret(){return"0x"+Array.from(crypto.getRandomValues(new Uint8Array(31))).map(e=>e.toString(16).padStart(2,"0")).join("")}function generateCommitmentArtifacts(e,t){if(!e.startsWith("0x"))throw Error("secret must be 0x-prefixed");let r=BigInt(e),{low:n,high:o}=__TURBOPACK__imported__module__538156__2.uint256.bnToUint256(t),i=__TURBOPACK__imported__module__538156__2.hash.computePoseidonHashOnElements([r,BigInt(n),BigInt(o)]),a=__TURBOPACK__imported__module__538156__2.hash.computePoseidonHashOnElements([r,BigInt(i)]);return{commitment:__TURBOPACK__imported__module__538156__2.num.toHex(i),nullifier:__TURBOPACK__imported__module__538156__2.num.toHex(a),secret:e,amountLow:BigInt(n),amountHigh:BigInt(o)}}function generateProof(e,t,r){BigInt(e);let n=BigInt(r),{low:o,high:i}=__TURBOPACK__imported__module__538156__2.uint256.bnToUint256(t),a=__TURBOPACK__imported__module__538156__2.hash.computePoseidonHashOnElements([n]),s=__TURBOPACK__imported__module__538156__2.hash.computePoseidonHashOnElements([BigInt(o),BigInt(i)]);return[e,__TURBOPACK__imported__module__538156__2.num.toHex(a),__TURBOPACK__imported__module__538156__2.num.toHex(s)]}function recomputeCommitment(e,t){let r=BigInt(e),{low:n,high:o}=__TURBOPACK__imported__module__538156__2.uint256.bnToUint256(t),i=__TURBOPACK__imported__module__538156__2.hash.computePoseidonHashOnElements([r,BigInt(n),BigInt(o)]);return __TURBOPACK__imported__module__538156__2.num.toHex(i)}function recomputeNullifier(e,t){let r=BigInt(e),n=BigInt(t),o=__TURBOPACK__imported__module__538156__2.hash.computePoseidonHashOnElements([r,n]);return __TURBOPACK__imported__module__538156__2.num.toHex(o)}let STRK_TOKEN_ADDRESS="0x04718f5a0fc34cc1af16a1cdee98ffb20c31f5cd61d6ab07201858f4287c938d",MIXER_CONTRACT_ADDRESS=__TURBOPACK__imported__module__919822__1.ENV.MIXER_CONTRACT_ADDRESS||__TURBOPACK__imported__module__873525__1.PRIVACY_MIXER.CONTRACT_ADDRESS;async function stepDeposit(e,t){console.log(" SLPM Deposit: Starting deposit step"),console.log(" SLPM Deposit: Amount requested:",e,"STRK");try{let r=__TURBOPACK__imported__module__873525__1.PRIVACY_MIXER.DEPLOYMENT_PARAMS.MIN_DEPOSIT,n=Number(r)/1e18;if(e<n){let r=`Requested amount ${e} STRK is below current minimum deposit (${n} STRK). Increase amount or redeploy with lower MIN_DEPOSIT.`;throw console.warn(" SLPM Deposit: Early rejection -",r),t({type:"deposit:error",message:r}),Error(r)}t({type:"deposit:initiated",message:"Connecting to Starknet wallet..."}),console.log(" SLPM Deposit: Initializing wallet client...");let o=new RealStarknetWalletClient(__TURBOPACK__imported__module__919822__1.ENV.STARKNET_RPC);console.log(" SLPM Deposit: Connecting wallet...");let i=await o.connect();console.log(" SLPM Deposit: Wallet connected:",{address:i.account.address,walletType:i.walletType}),t({type:"deposit:wallet_connected",message:"Wallet connected successfully"}),console.log(" SLPM Deposit: Initializing privacy mixer contract..."),await o.initMixerContract(MIXER_CONTRACT_ADDRESS),console.log(" SLPM Deposit: Mixer contract initialized"),console.log(" SLPM Deposit: Checking STRK balance...");let a=await o.getBalance(STRK_TOKEN_ADDRESS),s=BigInt(Math.round(Number(e)*10**a.decimals)),l=BigInt("0x800000000000011000000000000000000000000000000000000000000000000")-BigInt(1);if(s>l)throw Error(`Amount too large for Starknet felt: ${s.toString()}`);if(console.log(" SLPM Deposit: Balance check:",{tokenAddress:STRK_TOKEN_ADDRESS,symbol:a.symbol,onChainBalanceWei:a.balance.toString(),onChainBalanceSTRK:Number(a.balance)/Math.pow(10,a.decimals),decimals:a.decimals,requestedAmountWei:s.toString(),requestedAmountSTRK:e,requestedAmountHex:"0x"+s.toString(16),minDepositWei:r.toString(),minDepositSTRK:n}),a.balance<s)throw Error(`Insufficient STRK balance. Required: ${e} STRK, Available: ${Number(a.balance)/Math.pow(10,a.decimals)} STRK`);t({type:"deposit:balance_checked",message:`Balance confirmed: ${Number(a.balance)/Math.pow(10,a.decimals)} STRK available`}),console.log(" SLPM Deposit: Generating commitment & nullifier (contract spec)...");let c=generateSecret(),u=BigInt(s.toString()),d=generateCommitmentArtifacts(c,u);console.log(" SLPM Deposit: Generated artifacts:",{secret:d.secret.slice(0,10)+"...",commitment:d.commitment,nullifier:d.nullifier.slice(0,10)+"..."}),t({type:"deposit:balance_checked",message:"Privacy commitment generated"}),console.log(" SLPM Deposit: Approving STRK spending by mixer contract...");let g=await o.approve(STRK_TOKEN_ADDRESS,MIXER_CONTRACT_ADDRESS,s);console.log(" SLPM Deposit: Approval transaction submitted:",g),t({type:"deposit:transfer_submitted",message:`Approval submitted: ${g.transactionHash}`}),console.log(" SLPM Deposit: Waiting for approval confirmation...");let h=await o.waitForTransaction(g.transactionHash);if(console.log(" SLPM Deposit: Approval confirmed:",h),"REJECTED"===h.status)throw Error("Approval transaction was rejected by the network");t({type:"deposit:balance_checked",message:"STRK spending approval confirmed"}),console.log(" SLPM Deposit: Verifying allowance was set correctly...");try{let r=await o.callContract(STRK_TOKEN_ADDRESS,"allowance",[i.account.address,MIXER_CONTRACT_ADDRESS]),n=BigInt(r[0]||0);if(console.log(" SLPM Deposit: Current allowance:",{allowanceWei:n.toString(),allowanceSTRK:Number(n)/Math.pow(10,a.decimals),requiredWei:s.toString(),requiredSTRK:e,sufficient:n>=s}),n<s)throw Error(`Insufficient allowance: ${Number(n)/Math.pow(10,a.decimals)} STRK allowed, ${e} STRK required`);t({type:"deposit:balance_checked",message:`Allowance verified: ${Number(n)/Math.pow(10,a.decimals)} STRK`})}catch(e){console.error(" SLPM Deposit: Allowance check failed:",e),t({type:"deposit:balance_checked",message:"Allowance check failed, proceeding with deposit..."})}console.log(" SLPM Deposit: Depositing to privacy mixer contract...");let m=await o.depositToMixer(d.commitment,s);console.log(" SLPM Deposit: Deposit transaction submitted:",m),t({type:"deposit:transfer_submitted",message:`Deposit to mixer submitted: ${m}`}),console.log(" SLPM Deposit: Waiting for deposit confirmation...");let p=await o.waitForTransaction(m);if(console.log(" SLPM Deposit: Deposit confirmed:",p),"REJECTED"===p.status)throw Error("Deposit transaction was rejected by the network");t({type:"deposit:confirmed",message:"STRK deposit confirmed in privacy mixer",progress:20}),console.log(" SLPM Deposit: Step completed successfully"),console.log(" SLPM Deposit: Now preparing for immediate withdrawal to enable swapping..."),t({type:"deposit:preparing_withdrawal",message:"Preparing privacy withdrawal for mixing...",progress:22});let f=d.commitment;return{transactionHash:p.transactionHash,amount:e,amountWei:s.toString(),walletAddress:i.account.address,commitmentHash:f,secret:d.secret,nullifier:d.nullifier,mixerContractAddress:MIXER_CONTRACT_ADDRESS,withdrawalReady:!0}}catch(r){let e=r instanceof Error?r.message:"Unknown deposit error";throw/Execute failed/i.test(e)&&(e+=" (Possible causes: amount below MIN_DEPOSIT, insufficient allowance, or token transfer_from failure)"),console.error(" SLPM Deposit: Step failed:",r),t({type:"deposit:error",message:e}),Error(e)}}var __TURBOPACK__imported__module__919822__2=__TURBOPACK__imported__module__919822__,__TURBOPACK__imported__module__873525__2=__TURBOPACK__imported__module__873525__,__TURBOPACK__imported__module__538156__3=__TURBOPACK__imported__module__538156__,__TURBOPACK__imported__module__675962__=__turbopack_context__.i(675962);async function stepWithdrawForMixing(e,t){console.log(" SLPM Withdraw: Starting immediate withdrawal for mixing pipeline"),console.log(" SLPM Withdraw: Parameters:",{commitment:e.commitmentHash.slice(0,10)+"...",amount:e.amount,nullifier:e.nullifier.slice(0,10)+"..."});try{let r,n;t({type:"deposit:preparing_withdrawal",message:"Preparing withdrawal for privacy mixing...",progress:25});let o=(0,__TURBOPACK__imported__module__675962__.getSharedSwapAccount)(),i=(0,__TURBOPACK__imported__module__675962__.getSharedSwapAccountRaw)(),a=null,s=null;if(o&&i){console.log(" SLPM Withdraw: Using shared swap account for headless withdrawal");let t=(0,__TURBOPACK__imported__module__675962__.getSharedSwapProvider)();if(!t)throw Error("Shared swap provider not initialized");s=new PrivacyMixerContract(e.mixerContractAddress,i,t)}else console.log(" SLPM Withdraw: Shared account not configured, falling back to interactive wallet connection"),a=new RealStarknetWalletClient(__TURBOPACK__imported__module__919822__2.ENV.STARKNET_RPC),await a.connect(),await a.initMixerContract(e.mixerContractAddress);let l=__TURBOPACK__imported__module__873525__2.SHARED_SWAP_ACCOUNT_ADDRESS;console.log(" SLPM Withdraw: Preparing withdrawal transaction..."),console.log(" SLPM Withdraw: Withdrawal details (shared swap account):",{nullifier:e.nullifier.slice(0,10)+"...",commitment:e.commitmentHash.slice(0,10)+"...",recipient:l.slice(0,10)+"...",amount:e.amountWei}),console.log(" SLPM Withdraw: Generating withdrawal proof (3-element format)...");let c=BigInt(e.amountWei),u=BigInt(l),d=__TURBOPACK__imported__module__538156__3.uint256.bnToUint256(c),g=BigInt(d.low),h=BigInt(d.high),m=__TURBOPACK__imported__module__538156__3.hash.computePoseidonHashOnElements([u]),p=__TURBOPACK__imported__module__538156__3.hash.computePoseidonHashOnElements([g,h]),f=[e.secret,__TURBOPACK__imported__module__538156__3.num.toHex(m),__TURBOPACK__imported__module__538156__3.num.toHex(p)];if(3!==f.length)throw Error(`Generated proof length mismatch: expected 3, got ${f.length}`);console.log(" SLPM Withdraw: Proof generated:",{proofLength:f.length,elements:f.map(e=>e.slice(0,10)+"...")}),t({type:"deposit:preparing_withdrawal",message:"Checking minimum mixing delay...",progress:25});let w=4;if(console.log(" SLPM Withdraw: Checking timing requirements..."),console.log(" SLPM Withdraw: Contract requires 4 second delay between deposit and withdrawal"),console.log(" SLPM Withdraw: Waiting 4 seconds for mixing delay..."),await new Promise(e=>setTimeout(e,1e3*w)),console.log(" SLPM Withdraw: Minimum delay satisfied, proceeding with withdrawal"),t({type:"deposit:preparing_withdrawal",message:"Submitting withdrawal transaction...",progress:30}),console.log(" SLPM Withdraw: Executing withdrawal from privacy mixer..."),s)r=(await s.withdraw(e.nullifier,e.commitmentHash,l,c,f)).transaction_hash;else if(a)r=await a.withdrawFromMixer(e.nullifier,e.commitmentHash,l,c,f);else throw Error("No withdrawal pathway available");if(console.log(" SLPM Withdraw: Withdrawal transaction submitted:",r),t({type:"deposit:withdrawn_for_mixing",message:`Withdrawal submitted: ${r}`,progress:35}),console.log(" SLPM Withdraw: Waiting for withdrawal confirmation..."),a)n=await a.waitForTransaction(r);else{let e=(0,__TURBOPACK__imported__module__675962__.getSharedSwapProvider)();if(!e)throw Error("Shared swap provider not available for confirmation");n=await e.waitForTransaction(r)}if(console.log(" SLPM Withdraw: Withdrawal confirmed:",n),"REJECTED"===n.status)throw Error("Withdrawal transaction was rejected by the network");t({type:"deposit:withdrawn_for_mixing",message:"STRK successfully withdrawn from privacy mixer for mixing pipeline",progress:40}),console.log(" SLPM Withdraw: Step completed successfully"),console.log(" SLPM Withdraw: Funds are now available for Lightning/Cashu mixing");let y=n.transactionHash||n.transaction_hash||r;return console.log(" SLPM Withdraw: Determined withdrawal tx hash:",y),{withdrawalTxHash:y,availableForSwap:!0,controllingWallet:l,amount:e.amount,amountWei:e.amountWei,originalDeposit:e}}catch(e){throw console.error(" SLPM Withdraw: Step failed:",e),t({type:"deposit:error",message:e instanceof Error?e.message:"Unknown withdrawal error"}),e}}var __TURBOPACK__imported__module__21564__=__turbopack_context__.i(21564),__TURBOPACK__imported__module__919822__3=__TURBOPACK__imported__module__919822__;async function stepCreateMintInvoice(e,t){console.log(" SLPM MintInvoice: Starting mint invoice creation"),console.log(" SLPM MintInvoice: Amount:",e,"sats");try{t({type:"mix:progress",message:`Creating Cashu mint invoice for ${e} sats...`,progress:15}),console.log(" SLPM MintInvoice: Initializing Cashu services..."),console.log(" SLPM MintInvoice: Available mints:",__TURBOPACK__imported__module__919822__3.ENV.CASHU_MINTS.length),console.log(" SLPM MintInvoice: Default mint:",__TURBOPACK__imported__module__919822__3.ENV.CASHU_DEFAULT_MINT);let r=__TURBOPACK__imported__module__919822__3.ENV.CASHU_MINTS.length?new __TURBOPACK__imported__module__21564__.MultiMintCashuManager(__TURBOPACK__imported__module__919822__3.ENV.CASHU_MINTS):null,n=r?r.selectMint():new __TURBOPACK__imported__module__21564__.RealCashuClient(__TURBOPACK__imported__module__919822__3.ENV.CASHU_DEFAULT_MINT);console.log(" SLPM MintInvoice: Cashu client type:",r?"Multi-mint manager":"Single mint"),console.log(" SLPM MintInvoice: Creating mint quote...");let o=await n.createMintQuote(BigInt(e));if(console.log(" SLPM MintInvoice: Mint quote created:",{quote:o.quote,amount:o.amount.toString(),state:o.state,invoice:o.request?.slice(0,50)+"..."}),!o.request)throw Error("Cashu mint did not provide Lightning invoice");return t({type:"mix:progress",message:"Cashu mint invoice created successfully",progress:20}),console.log(" SLPM MintInvoice: Invoice ready for Atomiq payment"),console.log(" SLPM MintInvoice: Step completed successfully"),{cashu:n,cashuManager:r,mintQuote:o,lightningInvoice:o.request,amount:e}}catch(r){throw console.error(" SLPM MintInvoice: Step failed:",r),console.error(" SLPM MintInvoice: Error details:",{message:r instanceof Error?r.message:"Unknown error",stack:r instanceof Error?r.stack:void 0,context:{sats:e,mintUrl:__TURBOPACK__imported__module__919822__3.ENV.CASHU_DEFAULT_MINT,mintsAvailable:__TURBOPACK__imported__module__919822__3.ENV.CASHU_MINTS.length}}),t({type:"mix:error",message:r instanceof Error?r.message:"Unknown mint invoice error"}),r}}var __TURBOPACK__imported__module__53438__=__turbopack_context__.i(53438),__TURBOPACK__imported__module__919822__4=__TURBOPACK__imported__module__919822__;async function stepDynamicEstimateSats(e,t){t({type:"mix:progress",message:"Fetching real-time STRKsats estimate...",progress:11});let r=new __TURBOPACK__imported__module__53438__.RealAtomiqSwapClient(__TURBOPACK__imported__module__919822__4.ENV.NETWORK);try{let t=await r.estimateLightningSatsFromStrk(e);return console.log(" SLPM DynamicEstimate: Result",t),t}catch(r){console.warn(" SLPM DynamicEstimate: Falling back after failure:",r);let t=Math.floor(e*(__TURBOPACK__imported__module__919822__4.ENV.STRK_SATS_RATE||700));return{satsOut:t,rate:t/e,source:"fallback"}}}var __TURBOPACK__imported__module__53438__1=__TURBOPACK__imported__module__53438__,__TURBOPACK__imported__module__873525__3=__TURBOPACK__imported__module__873525__,__TURBOPACK__imported__module__919822__5=__TURBOPACK__imported__module__919822__;async function stepSwapToLightning(e,t,r,n){console.log(" SLPM SwapToLN: Starting STRK  Lightning BTC swap"),console.log(" SLPM SwapToLN: Parameters:",{amountStrk:e,fromWallet:t.walletAddress.slice(0,10)+"...",network:__TURBOPACK__imported__module__919822__5.ENV.NETWORK,fundsAvailable:t.fundsAvailable||!1,targetInvoice:r.lightningInvoice.slice(0,50)+"..."}),t.fundsAvailable?console.log(" SLPM SwapToLN: Funds confirmed available after privacy mixer withdrawal"):console.log(" SLPM SwapToLN: Warning - funds availability not confirmed");try{let t;n({type:"mix:progress",message:`Converting ${e} STRK to Lightning BTC...`,progress:25}),console.log(" SLPM SwapToLN: Initializing Atomiq client...");let o=new __TURBOPACK__imported__module__53438__1.RealAtomiqSwapClient(__TURBOPACK__imported__module__919822__5.ENV.NETWORK),i=r.lightningInvoice?.trim();console.log(" SLPM SwapToLN: Using Cashu mint invoice for automated mixer flow...");try{let{millisatoshis:e}=await __turbopack_context__.A(271439).then(e=>e.decode(i));e&&(t=Number(BigInt(e)/1000n))}catch(e){console.warn(" SLPM SwapToLN: Failed to decode invoice for sats amount, proceeding (swap call will re-validate):",e instanceof Error?e.message:e)}(null==t||t<=0)&&(console.warn(" SLPM SwapToLN: Could not decode invoice amount, using mint amount as fallback"),t=r.amount),console.log(" SLPM SwapToLN: Lightning invoice details:",{invoice:i.slice(0,50)+"...",invoiceSats:t,strkInputApprox:e,note:"invoiceSats is authoritative output; STRK input derived by SDK"}),n({type:"mix:progress",message:`Converting ${e} STRK to Lightning BTC...`,progress:30}),console.log(" SLPM SwapToLN: Executing STRK  Lightning swap (exactOut via invoice)...");let a=await o.swapStrkToLightning(t||r.amount,i,__TURBOPACK__imported__module__873525__3.SHARED_SWAP_ACCOUNT_ADDRESS);if(console.log(" SLPM SwapToLN: Swap result:",{success:a.success,txId:a.txId,amount:a.amount,route:a.route,error:a.error}),!a.success)throw Error(`STRK  Lightning swap failed: ${a.error||"Unknown error"}`);return console.log(" SLPM SwapToLN: Waiting for Lightning payment confirmation..."),n({type:"mix:progress",message:"Waiting for Lightning payment confirmation...",progress:35}),await new Promise(e=>setTimeout(e,3e3)),console.log(" SLPM SwapToLN: Lightning payment confirmed!"),n({type:"mix:progress",message:"STRK successfully swapped to Lightning BTC",progress:40}),{executionId:a.txId||`swap_${Date.now()}`,lightningInvoice:i,lightningAmount:t||r.amount,lightningPaymentHash:a.txId,swapTxId:a.txId,amountIn:e,amountOut:a.amount,fee:0,cashu:r.cashu,mintQuote:r.mintQuote}}catch(t){throw console.error(" SLPM SwapToLN: Step failed:",t),console.error(" SLPM SwapToLN: Error details:",{message:t instanceof Error?t.message:"Unknown error",stack:t instanceof Error?t.stack:void 0,context:{amountStrk:e,network:__TURBOPACK__imported__module__919822__5.ENV.NETWORK}}),n({type:"mix:error",message:t instanceof Error?t.message:"Unknown swap error"}),t}}var __TURBOPACK__imported__module__662951__=__turbopack_context__.i(662951);let isServer=!0;async function stepClaimCashuProofs(e,t,r,n){console.log(" SLPM ClaimCashu: Starting Cashu proof claiming"),console.log(" SLPM ClaimCashu: Parameters:",{quoteId:e.quote,amount:r,expectedState:"PAID"});try{n({type:"mix:progress",message:`Claiming Cashu proofs for ${r} sats...`,progress:45}),console.log(" SLPM ClaimCashu: Checking if mint quote was paid...");let o=await t.checkMintQuote(e.quote);if(console.log(" SLPM ClaimCashu: Quote status:",{quote:o.quote,state:o.state,amount:o.amount.toString()}),"PAID"!==o.state){console.log(" SLPM ClaimCashu: Payment not confirmed yet, waiting..."),await new Promise(e=>setTimeout(e,2e3));let r=await t.checkMintQuote(e.quote);if(console.log(" SLPM ClaimCashu: Retry status:",r.state),"PAID"!==r.state)throw Error(`Lightning payment not confirmed. Quote state: ${r.state}`)}console.log(" SLPM ClaimCashu: Lightning payment confirmed by Cashu mint"),console.log(" SLPM ClaimCashu: Minting Cashu proofs...");let i=await t.mintProofs(BigInt(r),e.quote);console.log(" SLPM ClaimCashu: Cashu proofs minted:",{count:i.length,totalAmount:i.reduce((e,t)=>e+Number(t.amount),0),proofs:i.map(e=>({amount:Number(e.amount),secret:e.secret?.slice(0,10)+"..."}))});try{let r=i.reduce((e,t)=>e+Number(t.amount),0),n=t.createToken(i);try{let t="unknown";try{let e=(0,__TURBOPACK__imported__module__662951__.getDecodedToken)(n);t=e?.mint||t}catch(e){}{let{default:o}=await __turbopack_context__.A(501336);await o.set({quote:e.quote,token:n,mintUrl:t,amountSats:r,proofsCount:i.length,createdAt:Date.now()}),console.log(" SLPM ClaimCashu: Saved ecash token to server vault for quote",e.quote)}}catch(e){console.warn(" SLPM ClaimCashu: Failed to save token to server vault:",e)}}catch(e){console.warn(" SLPM ClaimCashu: Could not persist ecash token:",e)}let a=i.reduce((e,t)=>e+Number(t.amount),0);return Math.abs(a-r)>1&&console.warn(" SLPM ClaimCashu: Amount mismatch:",{expected:r,received:a,difference:a-r}),n({type:"mix:progress",message:`Cashu proofs claimed: ${i.length} proofs for ${a} sats`,progress:50}),console.log(" SLPM ClaimCashu: Step completed successfully"),i}catch(t){throw console.error(" SLPM ClaimCashu: Step failed:",t),console.error(" SLPM ClaimCashu: Error details:",{message:t instanceof Error?t.message:"Unknown error",stack:t instanceof Error?t.stack:void 0,context:{quoteId:e.quote,targetSats:r,quoteState:e.state}}),n({type:"mix:error",message:t instanceof Error?t.message:"Unknown Cashu claiming error"}),t}}var __TURBOPACK__imported__module__919822__6=__TURBOPACK__imported__module__919822__;async function stepPrivacy(e,t,r,n,o){console.log(" SLPM Privacy: Starting privacy step"),console.log(" SLPM Privacy: Configuration:",{enableRandomizedMints:e.enableRandomizedMints,enableSplitOutputs:e.enableSplitOutputs,splitCount:e.splitCount,enableTimeDelays:e.enableTimeDelays,enableAmountObfuscation:e.enableAmountObfuscation,enableDecoyTx:e.enableDecoyTx,amountStrk:e.amountStrk}),console.log(" SLPM Privacy: Input proofs:",{count:t.length,proofs:t.map(e=>({amount:e.amount,C:e.C?.slice(0,10)+"..."}))});let i=t.reduce((e,t)=>e+BigInt(t.amount),0n);console.log(" SLPM Privacy: Total proof value:",i.toString(),"sats");try{let a=t;if(e.enableRandomizedMints&&n&&!__TURBOPACK__imported__module__919822__6.ENV.CASHU_SINGLE_MINT){console.log(" SLPM Privacy: Distributing across multiple mints...");let e=i;console.log(" SLPM Privacy: Distribution amount:",e.toString(),"sats");let{distributions:r}=await n.distributeSend(e,t,2);a=r.flatMap(e=>e.proofs),console.log(" SLPM Privacy: Distribution result:",{originalProofs:t.length,newProofs:a.length,distributions:r.length}),o({type:"cashu:routed",message:"Distributed across multiple mints",progress:60}),console.log(" SLPM Privacy: Multi-mint distribution completed")}else console.log(" SLPM Privacy: Skipping multi-mint distribution (disabled or no manager)");if(e.enableSplitOutputs&&e.splitCount>1&&!__TURBOPACK__imported__module__919822__6.ENV.DISABLE_CASHU_SPLIT){console.log(" SLPM Privacy: Splitting outputs...");let t=Number(i),n=BigInt(Math.floor(t/Math.max(1,e.splitCount)));console.log(" SLPM Privacy: Split parameters:",{totalSats:t,splitCount:e.splitCount,perPart:n.toString()});let s=[],l=a.slice();for(let t=0;t<e.splitCount;t++){console.log(` SLPM Privacy: Creating split ${t+1}/${e.splitCount}...`);let{keep:o,send:i}=await r.send(n,l);s.push(...i),l=o,console.log(` SLPM Privacy: Split ${t+1} created:`,{sentProofs:i.length,keepProofs:o.length})}a=s.length?s:a,console.log(" SLPM Privacy: Split result:",{finalProofs:a.length,splitSuccessful:s.length>0}),o({type:"cashu:routed",message:`Split into ${e.splitCount} outputs`,progress:70}),console.log(" SLPM Privacy: Output splitting completed")}else console.log(" SLPM Privacy: Skipping output splitting (disabled or invalid split count)");if(e.enableTimeDelays){console.log(" SLPM Privacy: Applying time delays...");let e=jitter(1e3);console.log(" SLPM Privacy: Delay duration:",e,"ms"),await delay(e),console.log(" SLPM Privacy: Time delay applied")}else console.log(" SLPM Privacy: Skipping time delays (disabled)");return e.enableAmountObfuscation?(console.log(" SLPM Privacy: Applying amount obfuscation..."),await delay(200),console.log(" SLPM Privacy: Amount obfuscation applied")):console.log(" SLPM Privacy: Skipping amount obfuscation (disabled)"),e.enableDecoyTx?(console.log(" SLPM Privacy: Applying decoy transactions..."),await delay(200),console.log(" SLPM Privacy: Decoy transactions applied")):console.log(" SLPM Privacy: Skipping decoy transactions (disabled)"),o({type:"mix:progress",message:"Privacy heuristics applied",progress:80}),console.log(" SLPM Privacy: Final result:",{inputProofs:t.length,outputProofs:a.length,privacyFeaturesApplied:[e.enableRandomizedMints&&"multi-mint",e.enableSplitOutputs&&"split-outputs",e.enableTimeDelays&&"time-delays",e.enableAmountObfuscation&&"amount-obfuscation",e.enableDecoyTx&&"decoy-tx"].filter(Boolean)}),console.log(" SLPM Privacy: Step completed successfully"),a}catch(r){throw console.error(" SLPM Privacy: Step failed:",r),console.error(" SLPM Privacy: Error details:",{message:r instanceof Error?r.message:"Unknown error",stack:r instanceof Error?r.stack:void 0,context:{proofsCount:t.length,hasManager:!!n,configuration:{enableRandomizedMints:e.enableRandomizedMints,enableSplitOutputs:e.enableSplitOutputs,splitCount:e.splitCount}}}),r}}function delay(e){return new Promise(t=>setTimeout(t,e))}function jitter(e){let t=Math.floor(.3*e);return e+Math.floor(Math.random()*t)}var __TURBOPACK__imported__module__53438__2=__TURBOPACK__imported__module__53438__,__TURBOPACK__imported__module__919822__7=__TURBOPACK__imported__module__919822__;async function serverSideCashuMelt(e,t,r){try{console.log(" Server-side Cashu Melt: Starting single-API melt with retry...");let r=await fetch("/api/cashu/receive-and-melt",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({encodedToken:e,invoice:t})}),n=await r.json();if(!r.ok){if(console.error(" Server-side Cashu Melt: API error:",n),"INSUFFICIENT_BALANCE"===n.error)return{success:!1,error:"Insufficient balance for invoice + fees",details:n.details};return{success:!1,error:n.error||"Server-side melt failed"}}return console.log(" Server-side Cashu Melt: Completed successfully:",n.result),{success:!0,result:n.result}}catch(e){return console.error(" Server-side Cashu Melt: Network error:",e),{success:!1,error:e instanceof Error?e.message:"Network error during melt"}}}async function calculateMaxInvoiceAmount(e){try{console.log(" Calculating max invoice amount from token balance...");let{getDecodedToken:t}=await __turbopack_context__.A(39642),r=t(e).proofs.reduce((e,t)=>e+t.amount,0),n=0;for(let e=1;e<=r;e++){let t=Math.max(2,Math.ceil(.01*e))+1;if(e+t<=r)n=e;else break}return console.log(" Max invoice calculation:",{availableBalance:r,maxAmount:n,estimatedFee:Math.max(2,Math.ceil(.01*n))+1}),{success:!0,maxAmount:n,availableBalance:r}}catch(e){return console.error(" Failed to calculate max invoice amount:",e),{success:!1,error:e instanceof Error?e.message:"Calculation failed"}}}async function getEncodedTokenFromStorage(e){console.log(" Getting encoded token from storage for quote:",e);try{try{let{default:t}=await __turbopack_context__.A(501336),r=await t.get(e);if(r?.token)return console.log(" Found token in server vault"),r.token}catch(e){console.warn(" Could not access server vault:",e)}return console.warn(" No encoded token found for quote:",e),null}catch(e){return console.error(" Error retrieving encoded token:",e),null}}var __TURBOPACK__imported__module__675962__1=__TURBOPACK__imported__module__675962__;async function stepSwapBack(e,t,r,n,o){console.log(" SLPM SwapBack: Starting SIMPLIFIED Cashu redemption (no mixing/splitting/delays)");let i=e.reduce((e,t)=>e+Number(t.amount),0),a=t[0],s=(0,__TURBOPACK__imported__module__675962__1.getSharedSwapAddress)();console.log(" SLPM SwapBack: SIMPLIFIED Parameters:",{proofsCount:e.length,totalSats:i,singleDestination:a?.slice(0,10)+"...",network:__TURBOPACK__imported__module__919822__7.ENV.NETWORK,mintUrl:__TURBOPACK__imported__module__919822__7.ENV.CASHU_DEFAULT_MINT});try{n({type:"mix:progress",message:"Converting ALL ecash to Lightning and STRK (single transaction)...",progress:80});let t=new __TURBOPACK__imported__module__53438__2.RealAtomiqSwapClient(__TURBOPACK__imported__module__919822__7.ENV.NETWORK);n({type:"mix:progress",message:"Calculating optimal invoice amount and melting ALL ecash proofs...",progress:85});let{finalInvoice:r,finalSwapId:l,meltResult:c}=await redeemAllCashuToInvoice(e,i,s||a,t,n,o);console.log(" SLPM SwapBack: ALL Cashu proofs melted:",{invoiceAmount:r.slice(0,30)+"...",changeProofs:c.change?.length||0,totalRedeemed:c.usedAmount}),n({type:"mix:progress",message:"Waiting for Lightning payment to complete...",progress:90}),console.log(" SLPM SwapBack: Waiting for Lightning payment...");let u=await t.waitLightningToStrkCompletion(l,3e5),d="FAILED";if(u){console.log(" SLPM SwapBack: Lightning payment confirmed, claiming STRK...");try{if(await t.claimLightningToStrkSwap(l),d="CLAIMED",console.log(" SLPM SwapBack: STRK claimed to single destination"),console.log(" SLPM SwapBack: STRK claimed to swap destination"),s&&s.toLowerCase()!==a.toLowerCase())try{let e=(await t.getStatus(l)).amountOut??0n;console.log(" SLPM SwapBack: Forwarding STRK from shared to final recipient...",{from:s,to:a,amountWei:e.toString()}),await (0,__TURBOPACK__imported__module__675962__1.transferStrkFromShared)(a,e),console.log(" SLPM SwapBack: Forward transfer submitted")}catch(e){console.error(" SLPM SwapBack: Forward transfer failed:",e),d="PAYMENT_CONFIRMED_CLAIM_FAILED"}}catch(e){console.error(" SLPM SwapBack: Claim failed:",e),e instanceof Error&&/Invalid signer provided/i.test(e.message)&&console.error(" SLPM SwapBack: Signer invalid. Ensure SHARED_SWAP_ACCOUNT_PRIVATE_KEY and SHARED_SWAP_ACCOUNT_ADDRESS are set and correspond to a deployed Starknet account with funds for fees."),d="PAYMENT_CONFIRMED_CLAIM_FAILED"}}else console.warn(" SLPM SwapBack: Lightning payment did not complete in time");let g=[{destination:a,satsRedeemed:Number(c.usedAmount||i),strkSent:Number(c.usedAmount||i),txId:l,status:d}];return console.log(" SLPM SwapBack: SIMPLIFIED Final result:",{destination:a,totalSatsRedeemed:g[0].satsRedeemed,totalStrkSent:g[0].strkSent,status:d}),n({type:"mix:progress",message:"Simplified swap completed",progress:95}),g}catch(e){throw console.error(" SLPM SwapBack: SIMPLIFIED Critical error:",e),e}}async function redeemAllCashuToInvoice(e,t,r,n,o,i){console.log(" SLPM SwapBack: Starting SIMPLIFIED Cashu redemption (using encoded token like standalone)");let a=e.reduce((e,t)=>e+Number(t.amount),0);console.log(" SLPM SwapBack: ALL Available proofs:",{count:e.length,totalAmount:a,mintUrl:__TURBOPACK__imported__module__919822__7.ENV.CASHU_DEFAULT_MINT});try{console.log(" SLPM SwapBack: Retrieving encoded token for standalone pattern...");let e=null;if(i&&(console.log(" SLPM SwapBack: Looking for token with quote ID:",i),e=await getEncodedTokenFromStorage(i)),e||console.warn(" No encoded token found for quote ID, trying localStorage scan..."),!e)throw console.warn(" No encoded token found anywhere, this may cause issues"),Error("No encoded token available - cannot use standalone script pattern");console.log(" Successfully retrieved encoded token for direct melt"),console.log(" SLPM SwapBack: Calculating maximum invoice amount from token balance...");let a=await calculateMaxInvoiceAmount(e);if(!a.success)throw Error(`Failed to calculate max invoice amount: ${a.error}`);console.log(" SLPM SwapBack: Token balance analysis:",{availableBalance:a.availableBalance,maxInvoiceAmount:a.maxAmount,originalInvoiceAmount:t}),console.log(" SLPM SwapBack: Getting optimized Atomiq quote for max safe amount..."),console.log(`   Using calculated safe amount: ${a.maxAmount} sats (original was ${t} sats)`);let s=await n.beginLightningToStrkSwap(a.maxAmount,r);console.log(" SLPM SwapBack: Got optimized Atomiq quote:",{swapId:s.id.slice(0,20)+"...",safeAmount:a.maxAmount,invoicePrefix:s.invoice.slice(0,30)+"..."});let l=s.invoice,c=s.id;console.log(" SLPM SwapBack: Full Atomiq invoice (copy):",l),console.log(" SLPM SwapBack: Running server-side melt with built-in retry..."),o({type:"mix:progress",message:"Melting ecash to Lightning (with retry capability)...",progress:88});let u=await serverSideCashuMelt(e,l,i);if(!u.success){if(u.details?.shortfall)throw console.log(" SLPM SwapBack: Invoice too large for available proofs"),console.log(`   Required: ${u.details.required} sats, Available: ${u.details.available} sats`),Error(`Invoice too large for available balance. Required: ${u.details.required}, Available: ${u.details.available}`);throw Error(`Server-side melt failed: ${u.error}`)}console.log(" SLPM SwapBack: Server-side melt completed successfully"),console.log(" SLPM SwapBack: Server-side melt completed successfully!",{invoiceAmount:u.result.invoiceAmount,changeAmount:u.result.changeAmount,changeCount:u.result.change?.length||0});let d=(u.result.change||[]).map(e=>({secret:e.secret,signature:e.C,amount:BigInt(e.amount),currency:"SAT",keysetId:e.id}));return{finalInvoice:l,finalSwapId:c,meltResult:{change:d,usedAmount:u.result.invoiceAmount}}}catch(e){throw console.error(" SLPM SwapBack: SIMPLIFIED melt failed:",e),Error(`Failed to melt ALL proofs: ${e}`)}}var __TURBOPACK__imported__module__919822__8=__TURBOPACK__imported__module__919822__;async function startMix(e,t){console.log(" SLPM: Starting privacy mix operation"),console.log(" SLPM: Mix request:",{amount:e.amountStrk,destinations:e.destinations.length,privacyLevel:e.privacyLevel,features:{timeDelays:e.enableTimeDelays,splitOutputs:e.enableSplitOutputs,randomizedMints:e.enableRandomizedMints,amountObfuscation:e.enableAmountObfuscation,decoyTx:e.enableDecoyTx}});let r=null,n=null;try{let o,i;console.log(` SLPM: Validating ${__TURBOPACK__imported__module__919822__8.ENV.NETWORK} configuration...`);let a=(0,__TURBOPACK__imported__module__919822__8.getNetworkStatus)();if(console.log(` SLPM: ${__TURBOPACK__imported__module__919822__8.ENV.NETWORK} status:`,a),!a.ready)throw console.error(` SLPM: ${__TURBOPACK__imported__module__919822__8.ENV.NETWORK} configuration incomplete`),console.error("Warnings:",a.warnings),Error(`${__TURBOPACK__imported__module__919822__8.ENV.NETWORK} configuration incomplete. Check environment variables.`);console.log(` SLPM: ${__TURBOPACK__imported__module__919822__8.ENV.NETWORK} configuration validated`),t({type:"mix:progress",message:`Starting privacy mix on ${__TURBOPACK__imported__module__919822__8.ENV.NETWORK}`,progress:0}),console.log(" SLPM: Privacy mix operation initiated"),console.log(" SLPM: Step 1 - Depositing STRK to privacy mixer contract"),r=await stepDeposit(e.amountStrk,t),console.log(" SLPM: Step 1 complete - STRK deposited to privacy mixer:",{commitment:r.commitmentHash.slice(0,10)+"...",amount:r.amount,mixerContract:r.mixerContractAddress}),console.log(" SLPM: Step 1.5 - Withdrawing from privacy mixer for mixing pipeline");let s=await stepWithdrawForMixing(r,t);if(!s||!s.withdrawalTxHash)throw Error("Withdrawal step returned no transaction hash");let l="string"==typeof s.withdrawalTxHash?s.withdrawalTxHash.slice(0,10)+"...":"n/a",c="string"==typeof s.controllingWallet?s.controllingWallet.slice(0,10)+"...":"n/a";console.log(" SLPM: Step 1.5 complete - Funds withdrawn and ready for mixing:",{withdrawalTx:l,availableForSwap:s.availableForSwap??!1,controllingWallet:c}),console.log(" SLPM: Step 2 - Dynamic STRK  sats estimation (real-time if possible)..."),t({type:"mix:progress",message:"Estimating sats from STRK input...",progress:15});let u=await stepDynamicEstimateSats(s.amount,t);console.log(" SLPM: Dynamic estimation result:",u),console.log(` SLPM: Estimated ${s.amount} STRK -> ${u.satsOut} sats (source: ${u.source}, rate: ${u.rate.toFixed(2)})`),t({type:"mix:progress",message:"Creating Cashu mint invoice...",progress:18});let d=await stepCreateMintInvoice(u.satsOut,t);console.log(" SLPM: Step 3 - Swapping STRK to Lightning..."),t({type:"mix:progress",message:"Swapping STRK to Lightning BTC...",progress:25}),n=await stepSwapToLightning(s.amount,{walletAddress:s.originalDeposit.walletAddress,mixerContractAddress:s.originalDeposit.mixerContractAddress,fundsAvailable:s.availableForSwap},d,t),console.log(" SLPM: Step 4 - Claiming Cashu proofs..."),t({type:"mix:progress",message:"Claiming Cashu proofs...",progress:45});let g=await stepClaimCashuProofs(d.mintQuote,d.cashu,u.satsOut,t);console.log(" SLPM: Cashu proofs claimed:",{count:g.length,totalValue:g.reduce((e,t)=>e+Number(t.amount),0)});let h=d.cashu,m=d.cashuManager;console.log(" SLPM: Step 5 - Applying privacy techniques..."),t({type:"mix:progress",message:"Applying privacy mixing...",progress:60});let p=await stepPrivacy(e,g,h,m,t);console.log(" SLPM: Privacy mixing complete:",{finalProofsCount:p.length,privacyLevel:e.privacyLevel,anonymityEnhanced:!0}),console.log(" SLPM: Step 6 - Converting mixed tokens back and distributing..."),t({type:"mix:progress",message:"Converting mixed e-cash back and distributing to destinations",progress:80});let f=await stepSwapBack(p,e.destinations,h,t,d.mintQuote.quote),w=f.filter(e=>"CLAIMED"===e.status).length,y=f.length,M=f.reduce((e,t)=>e+t.strkSent,0);if(console.log(" SLPM: Distribution results:",{totalDestinations:y,successfulDistributions:w,totalStrkDistributed:M,failedDistributions:y-w}),0===w)throw Error(`All ${y} destination distributions failed - no STRK was successfully delivered`);w<y?console.warn(` SLPM: Partial success - only ${w}/${y} destinations received STRK`):console.log(" SLPM: All distributions completed successfully"),console.log(" SLPM: Privacy mixing completed with distribution results"),console.log(" SLPM: Calculating final privacy metrics");let b=estimateAnonymitySetLocal(e),v=scorePrivacy(e,b);return console.log(" SLPM: Final privacy metrics:",{anonymitySetSize:b,privacyScore:v,privacyLevel:e.privacyLevel,mixingPath:"STRK  Lightning  Cashu  Lightning  STRK",destinationAccounts:e.destinations.length,totalFees:n.fee||0,privacyGuarantees:{unlinkability:"Account linkability broken via mixer contract",temporalPrivacy:"Time delays and batching applied",amountObfuscation:"Amount split across destinations",routingDiversification:"Multiple Cashu mints used"}}),w===y?(o=`Privacy mix complete! ${M} STRK distributed to ${w} destinations through ${b}-member anonymity set`,i="mix:complete"):w>0?(o=`Privacy mix partially complete - ${M} STRK delivered to ${w}/${y} destinations`,i="mix:partial"):(o="Privacy mix failed - no STRK was successfully delivered to any destination",i="mix:failed"),t({type:i,message:o,progress:w===y?100:90}),console.log(` SLPM: Privacy mix operation result - ${w}/${y} destinations successful`),{success:w>0,totalDestinations:y,successfulDistributions:w,totalStrkDistributed:M,distributionResults:f}}catch(e){throw console.error(" SLPM: Privacy mix operation failed:",e),console.error(" SLPM: Error details:",{message:e instanceof Error?e.message:"Unknown error",stack:e instanceof Error?e.stack:void 0,step:"Privacy mixing flow",progress:"Check individual step logs above"}),t({type:"mix:error",message:e instanceof Error?e.message:"Privacy mix failed"}),e}}function estimateAnonymitySetLocal(e){return("maximum"===e.privacyLevel?120:"enhanced"===e.privacyLevel?60:20)+((e.enableSplitOutputs?e.splitCount:0)+10*!!e.enableRandomizedMints)}function scorePrivacy(e,t){let r=50+Math.min(40,Math.floor(t/4));return e.enableTimeDelays&&(r+=3),e.enableSplitOutputs&&e.splitCount>1&&(r+=3),e.enableRandomizedMints&&(r+=2),e.enableAmountObfuscation&&(r+=1),e.enableDecoyTx&&(r+=1),Math.min(100,r)}let MixSchema=__TURBOPACK__imported__module__322632__.z.object({amountStrk:__TURBOPACK__imported__module__322632__.z.number().positive(),destinations:__TURBOPACK__imported__module__322632__.z.array(__TURBOPACK__imported__module__322632__.z.string()).default([]),privacyLevel:__TURBOPACK__imported__module__322632__.z.enum(["standard","enhanced","maximum"]).default("standard"),enableTimeDelays:__TURBOPACK__imported__module__322632__.z.boolean().default(!0),enableSplitOutputs:__TURBOPACK__imported__module__322632__.z.boolean().default(!0),splitCount:__TURBOPACK__imported__module__322632__.z.number().int().min(1).max(8).default(2),enableRandomizedMints:__TURBOPACK__imported__module__322632__.z.boolean().default(!0),enableAmountObfuscation:__TURBOPACK__imported__module__322632__.z.boolean().default(!0),enableDecoyTx:__TURBOPACK__imported__module__322632__.z.boolean().default(!0)});async function POST(e){try{let t=await e.json(),r=MixSchema.parse(t),n=[];return await startMix(r,e=>n.push(e)),__TURBOPACK__imported__module__89171__.NextResponse.json({ok:!0,events:n})}catch(e){return __TURBOPACK__imported__module__89171__.NextResponse.json({ok:!1,error:e?.message||"Unknown error"},{status:400})}}var __TURBOPACK__imported__module__151739__=__turbopack_context__.i(151739);let nextConfigOutput="",routeModule=new __TURBOPACK__imported__module__747909__.AppRouteRouteModule({definition:{kind:__TURBOPACK__imported__module__174017__.RouteKind.APP_ROUTE,page:"/api/mix/route",pathname:"/api/mix",filename:"route",bundlePath:""},distDir:".next",relativeProjectDir:"",resolvedPagePath:"[project]/src/app/api/mix/route.ts",nextConfigOutput,userland:__TURBOPACK__imported__module__151739__}),{workAsyncStorage,workUnitAsyncStorage,serverHooks}=routeModule;function patchFetch(){return(0,__TURBOPACK__imported__module__996250__.patchFetch)({workAsyncStorage,workUnitAsyncStorage})}async function handler(e,t,r){var n;let o="/api/mix/route";o=o.replace(/\/index$/,"")||"/";let i=!1,a=await routeModule.prepare(e,t,{srcPage:o,multiZoneDraftMode:i});if(!a)return t.statusCode=400,t.end("Bad Request"),null==r.waitUntil||r.waitUntil.call(r,Promise.resolve()),null;let{buildId:s,params:l,nextConfig:c,isDraftMode:u,prerenderManifest:d,routerServerContext:g,isOnDemandRevalidate:h,revalidateOnlyGenerated:m,resolvedPathname:p}=a,f=(0,__TURBOPACK__imported__module__869741__.normalizeAppPath)(o),w=!!(d.dynamicRoutes[f]||d.routes[p]);if(w&&!u){let e=!!d.routes[p],t=d.dynamicRoutes[f];if(t&&!1===t.fallback&&!e)throw new __TURBOPACK__imported__module__193695__.NoFallbackError}let y=null;!w||routeModule.isDev||u||(y="/index"===(y=p)?"/":y);let M=!0===routeModule.isDev||!w,b=w&&!M,v=e.method||"GET",I=(0,__TURBOPACK__imported__module__561916__.getTracer)(),A=I.getActiveScopeSpan(),S={params:l,prerenderManifest:d,renderOpts:{experimental:{cacheComponents:!!c.experimental.cacheComponents,authInterrupts:!!c.experimental.authInterrupts},supportsDynamicResponse:M,incrementalCache:(0,__TURBOPACK__imported__module__759756__.getRequestMeta)(e,"incrementalCache"),cacheLifeProfiles:null==(n=c.experimental)?void 0:n.cacheLife,isRevalidate:b,waitUntil:r.waitUntil,onClose:e=>{t.on("close",e)},onAfterTaskError:void 0,onInstrumentationRequestError:(t,r,n)=>routeModule.onRequestError(e,t,n,g)},sharedContext:{buildId:s}},N=new __TURBOPACK__imported__module__316795__.NodeNextRequest(e),D=new __TURBOPACK__imported__module__316795__.NodeNextResponse(t),x=__TURBOPACK__imported__module__487718__.NextRequestAdapter.fromNodeNextRequest(N,(0,__TURBOPACK__imported__module__487718__.signalFromNodeResponse)(t));try{let n=async r=>routeModule.handle(x,S).finally(()=>{if(!r)return;r.setAttributes({"http.status_code":t.statusCode,"next.rsc":!1});let n=I.getRootSpanAttributes();if(!n)return;if(n.get("next.span_type")!==__TURBOPACK__imported__module__995169__.BaseServerSpan.handleRequest)return void console.warn(`Unexpected root span type '${n.get("next.span_type")}'. Please report this Next.js issue https://github.com/vercel/next.js`);let o=n.get("next.route");if(o){let e=`${v} ${o}`;r.setAttributes({"next.route":o,"http.route":o,"next.span_name":e}),r.updateName(e)}else r.updateName(`${v} ${e.url}`)}),i=async i=>{var a,s;let l=async({previousCacheEntry:a})=>{try{if(!(0,__TURBOPACK__imported__module__759756__.getRequestMeta)(e,"minimalMode")&&h&&m&&!a)return t.statusCode=404,t.setHeader("x-nextjs-cache","REVALIDATED"),t.end("This page could not be found"),null;let o=await n(i);e.fetchMetrics=S.renderOpts.fetchMetrics;let s=S.renderOpts.pendingWaitUntil;s&&r.waitUntil&&(r.waitUntil(s),s=void 0);let l=S.renderOpts.collectedTags;if(!w)return await (0,__TURBOPACK__imported__module__666012__.sendResponse)(N,D,o,S.renderOpts.pendingWaitUntil),null;{let e=await o.blob(),t=(0,__TURBOPACK__imported__module__570101__.toNodeOutgoingHttpHeaders)(o.headers);l&&(t[__TURBOPACK__imported__module__10372__.NEXT_CACHE_TAGS_HEADER]=l),!t["content-type"]&&e.type&&(t["content-type"]=e.type);let r=void 0!==S.renderOpts.collectedRevalidate&&!(S.renderOpts.collectedRevalidate>=__TURBOPACK__imported__module__10372__.INFINITE_CACHE)&&S.renderOpts.collectedRevalidate,n=void 0===S.renderOpts.collectedExpire||S.renderOpts.collectedExpire>=__TURBOPACK__imported__module__10372__.INFINITE_CACHE?void 0:S.renderOpts.collectedExpire;return{value:{kind:__TURBOPACK__imported__module__600220__.CachedRouteKind.APP_ROUTE,status:o.status,body:Buffer.from(await e.arrayBuffer()),headers:t},cacheControl:{revalidate:r,expire:n}}}}catch(t){throw(null==a?void 0:a.isStale)&&await routeModule.onRequestError(e,t,{routerKind:"App Router",routePath:o,routeType:"route",revalidateReason:(0,__TURBOPACK__imported__module__47587__.getRevalidateReason)({isRevalidate:b,isOnDemandRevalidate:h})},g),t}},p=await routeModule.handleResponse({req:e,nextConfig:c,cacheKey:y,routeKind:__TURBOPACK__imported__module__174017__.RouteKind.APP_ROUTE,isFallback:!1,prerenderManifest:d,isRoutePPREnabled:!1,isOnDemandRevalidate:h,revalidateOnlyGenerated:m,responseGenerator:l,waitUntil:r.waitUntil});if(!w)return null;if((null==p||null==(a=p.value)?void 0:a.kind)!==__TURBOPACK__imported__module__600220__.CachedRouteKind.APP_ROUTE)throw Object.defineProperty(Error(`Invariant: app-route received invalid cache entry ${null==p||null==(s=p.value)?void 0:s.kind}`),"__NEXT_ERROR_CODE",{value:"E701",enumerable:!1,configurable:!0});(0,__TURBOPACK__imported__module__759756__.getRequestMeta)(e,"minimalMode")||t.setHeader("x-nextjs-cache",h?"REVALIDATED":p.isMiss?"MISS":p.isStale?"STALE":"HIT"),u&&t.setHeader("Cache-Control","private, no-cache, no-store, max-age=0, must-revalidate");let f=(0,__TURBOPACK__imported__module__570101__.fromNodeOutgoingHttpHeaders)(p.value.headers);return(0,__TURBOPACK__imported__module__759756__.getRequestMeta)(e,"minimalMode")&&w||f.delete(__TURBOPACK__imported__module__10372__.NEXT_CACHE_TAGS_HEADER),!p.cacheControl||t.getHeader("Cache-Control")||f.get("Cache-Control")||f.set("Cache-Control",(0,__TURBOPACK__imported__module__626937__.getCacheControlHeader)(p.cacheControl)),await (0,__TURBOPACK__imported__module__666012__.sendResponse)(N,D,new Response(p.value.body,{headers:f,status:p.value.status||200})),null};A?await i(A):await I.withPropagatedContext(e.headers,()=>I.trace(__TURBOPACK__imported__module__995169__.BaseServerSpan.handleRequest,{spanName:`${v} ${e.url}`,kind:__TURBOPACK__imported__module__561916__.SpanKind.SERVER,attributes:{"http.method":v,"http.target":e.url}},i))}catch(t){if(A||t instanceof __TURBOPACK__imported__module__193695__.NoFallbackError||await routeModule.onRequestError(e,t,{routerKind:"App Router",routePath:f,routeType:"route",revalidateReason:(0,__TURBOPACK__imported__module__47587__.getRevalidateReason)({isRevalidate:b,isOnDemandRevalidate:h})}),w)throw t;return await (0,__TURBOPACK__imported__module__666012__.sendResponse)(N,D,new Response(null,{status:500})),null}}}];

//# sourceMappingURL=node_modules_next_dist_esm_build_templates_app-route_a6243aa3.js.map