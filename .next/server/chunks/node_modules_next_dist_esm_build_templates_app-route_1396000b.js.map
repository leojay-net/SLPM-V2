{"version":3,"sources":["turbopack:///[project]/src/app/api/cross-chain/route.ts","turbopack:///[project]/node_modules/uuid/dist/esm/native.js","turbopack:///[project]/node_modules/next/dist/esm/build/templates/app-route.js","turbopack:///[project]/node_modules/uuid/dist/esm/regex.js","turbopack:///[project]/node_modules/uuid/dist/esm/rng.js","turbopack:///[project]/node_modules/uuid/dist/esm/validate.js","turbopack:///[project]/node_modules/uuid/dist/esm/stringify.js","turbopack:///[project]/node_modules/uuid/dist/esm/v4.js","turbopack:///[project]/src/integrations/zcash/swap-service.ts","turbopack:///[project]/src/integrations/cross-chain/bridge.ts","turbopack:///[project]/src/integrations/zcash/fixedfloat-client.ts"],"sourcesContent":["/**\n * Cross-Chain Swap API\n * Handles ZEC ‚Üî STRK swap initiation and status\n */\n\nimport { NextRequest, NextResponse } from 'next/server';\nimport { CrossChainBridge } from '@/integrations/cross-chain/bridge';\nimport { ENV } from '@/config/env';\n\n// Initialize bridge (server-side)\nlet bridge: CrossChainBridge | null = null;\n\nfunction getBridge(): CrossChainBridge {\n    if (!bridge) {\n        bridge = new CrossChainBridge({\n            fixedFloat: {\n                apiKey: process.env.FIXEDFLOAT_API_KEY || '',\n                apiSecret: process.env.FIXEDFLOAT_API_SECRET || ''\n            },\n            atomiq: {\n                environment: ENV.NETWORK === 'MAINNET' ? 'mainnet' : 'testnet'\n            },\n            starknet: {\n                rpcUrl: process.env.STARKNET_RPC || process.env.NEXT_PUBLIC_STARKNET_RPC || '',\n                mixerAddress: process.env.MIXER_CONTRACT_ADDRESS || process.env.NEXT_PUBLIC_MIXER_CONTRACT_ADDRESS || '',\n                verifierAddress: process.env.VERIFIER_CONTRACT_ADDRESS || ''\n            }\n        });\n    }\n    return bridge;\n}\n\nexport async function POST(request: NextRequest) {\n    try {\n        const body = await request.json();\n        const { action, ...params } = body;\n\n        switch (action) {\n            case 'quote-zec-to-strk': {\n                const { zecAmount } = params;\n                if (!zecAmount || zecAmount <= 0) {\n                    return NextResponse.json({ success: false, error: 'Invalid ZEC amount' }, { status: 400 });\n                }\n\n                const bridge = getBridge();\n                const quote = await bridge.getZecToStrkQuote(zecAmount);\n                \n                return NextResponse.json({\n                    success: true,\n                    quote: {\n                        zecAmount: quote.zecAmount,\n                        lightningAmount: quote.lightningAmount,\n                        strkAmount: quote.strkAmount,\n                        totalFeePercent: quote.totalFeePercent,\n                        legs: {\n                            first: {\n                                from: 'ZEC',\n                                to: 'Lightning',\n                                rate: quote.legs.zecToLightning.rate,\n                                fee: quote.legs.zecToLightning.fee\n                            },\n                            second: {\n                                from: 'Lightning',\n                                to: 'STRK',\n                                rate: quote.legs.lightningToStrk.rate,\n                                fee: quote.legs.lightningToStrk.fee\n                            }\n                        }\n                    }\n                });\n            }\n\n            case 'quote-strk-to-zec': {\n                const { strkAmount } = params;\n                if (!strkAmount || strkAmount <= 0) {\n                    return NextResponse.json({ success: false, error: 'Invalid STRK amount' }, { status: 400 });\n                }\n\n                const bridge = getBridge();\n                const quote = await bridge.getStrkToZecQuote(strkAmount);\n                \n                return NextResponse.json({\n                    success: true,\n                    quote: {\n                        strkAmount: quote.strkAmount,\n                        lightningAmount: quote.lightningAmount,\n                        zecAmount: quote.zecAmount,\n                        totalFeePercent: quote.totalFeePercent,\n                        legs: {\n                            first: {\n                                from: 'STRK',\n                                to: 'Lightning',\n                                rate: quote.legs.strkToLightning.rate,\n                                fee: quote.legs.strkToLightning.fee\n                            },\n                            second: {\n                                from: 'Lightning',\n                                to: 'ZEC',\n                                rate: quote.legs.lightningToZec.rate,\n                                fee: quote.legs.lightningToZec.fee\n                            }\n                        }\n                    }\n                });\n            }\n\n            case 'initiate-zec-to-strk': {\n                const { zecAmount, recipientAddress, usePrivacyMixer, useCashuFlow } = params;\n                \n                if (!zecAmount || zecAmount <= 0) {\n                    return NextResponse.json({ success: false, error: 'Invalid ZEC amount' }, { status: 400 });\n                }\n                if (!recipientAddress) {\n                    return NextResponse.json({ success: false, error: 'Recipient address required' }, { status: 400 });\n                }\n\n                const bridge = getBridge();\n                const transfer = await bridge.initiateZecToStrk({\n                    zecAmount,\n                    recipientAddress,\n                    usePrivacyMixer: usePrivacyMixer || false,\n                    useCashuFlow: useCashuFlow || false\n                });\n\n                // Find the deposit address from steps (stored in data field)\n                const depositStep = transfer.steps.find(s => s.name === 'fixedfloat-order');\n                const depositAddress = depositStep?.data?.depositAddress as string | undefined;\n                const expectedAmount = depositStep?.data?.expectedAmount as string | undefined;\n\n                return NextResponse.json({\n                    success: true,\n                    transfer: {\n                        id: transfer.id,\n                        status: transfer.status,\n                        direction: transfer.direction,\n                        depositAddress,\n                        expectedAmount: expectedAmount || zecAmount,\n                        steps: transfer.steps.map((s: { name: string; description: string; status: string }) => ({\n                            name: s.name,\n                            description: s.description,\n                            status: s.status\n                        }))\n                    }\n                });\n            }\n\n            case 'initiate-strk-to-zec': {\n                const { strkAmount, zecAddress, usePrivacyMixer } = params;\n                \n                if (!strkAmount || strkAmount <= 0) {\n                    return NextResponse.json({ success: false, error: 'Invalid STRK amount' }, { status: 400 });\n                }\n                if (!zecAddress) {\n                    return NextResponse.json({ success: false, error: 'ZEC address required' }, { status: 400 });\n                }\n\n                const bridge = getBridge();\n                const transfer = await bridge.initiateStrkToZec({\n                    strkAmount,\n                    zecAddress,\n                    usePrivacyMixer: usePrivacyMixer || false\n                });\n\n                return NextResponse.json({\n                    success: true,\n                    transfer: {\n                        id: transfer.id,\n                        status: transfer.status,\n                        direction: transfer.direction,\n                        steps: transfer.steps.map(s => ({\n                            name: s.name,\n                            description: s.description,\n                            status: s.status\n                        }))\n                    }\n                });\n            }\n\n            case 'status': {\n                const { transferId } = params;\n                if (!transferId) {\n                    return NextResponse.json({ success: false, error: 'Transfer ID required' }, { status: 400 });\n                }\n\n                const bridge = getBridge();\n                const transfer = bridge.getTransfer(transferId);\n                \n                if (!transfer) {\n                    return NextResponse.json({ success: false, error: 'Transfer not found' }, { status: 404 });\n                }\n\n                return NextResponse.json({\n                    success: true,\n                    transfer: {\n                        id: transfer.id,\n                        status: transfer.status,\n                        direction: transfer.direction,\n                        steps: transfer.steps.map((s: { name: string; description: string; status: string; data?: Record<string, unknown> }) => ({\n                            name: s.name,\n                            description: s.description,\n                            status: s.status,\n                            data: s.data\n                        })),\n                        error: transfer.error\n                    }\n                });\n            }\n\n            default:\n                return NextResponse.json({ success: false, error: `Unknown action: ${action}` }, { status: 400 });\n        }\n\n    } catch (error) {\n        console.error('Cross-chain API error:', error);\n        return NextResponse.json({\n            success: false,\n            error: error instanceof Error ? error.message : 'Internal server error'\n        }, { status: 500 });\n    }\n}\n\nexport async function GET() {\n    return NextResponse.json({\n        service: 'Cross-Chain Swap API',\n        description: 'ZEC ‚Üî STRK atomic swaps via Lightning',\n        actions: {\n            'quote-zec-to-strk': 'Get quote for ZEC ‚Üí STRK swap',\n            'quote-strk-to-zec': 'Get quote for STRK ‚Üí ZEC swap',\n            'initiate-zec-to-strk': 'Start ZEC ‚Üí STRK swap (returns deposit address)',\n            'initiate-strk-to-zec': 'Start STRK ‚Üí ZEC swap',\n            'status': 'Check transfer status'\n        },\n        network: ENV.NETWORK\n    });\n}\n","import { randomUUID } from 'crypto';\nexport default { randomUUID };\n","import { AppRouteRouteModule } from \"next/dist/esm/server/route-modules/app-route/module.compiled\";\nimport { RouteKind } from \"next/dist/esm/server/route-kind\";\nimport { patchFetch as _patchFetch } from \"next/dist/esm/server/lib/patch-fetch\";\nimport { getRequestMeta } from \"next/dist/esm/server/request-meta\";\nimport { getTracer, SpanKind } from \"next/dist/esm/server/lib/trace/tracer\";\nimport { normalizeAppPath } from \"next/dist/esm/shared/lib/router/utils/app-paths\";\nimport { NodeNextRequest, NodeNextResponse } from \"next/dist/esm/server/base-http/node\";\nimport { NextRequestAdapter, signalFromNodeResponse } from \"next/dist/esm/server/web/spec-extension/adapters/next-request\";\nimport { BaseServerSpan } from \"next/dist/esm/server/lib/trace/constants\";\nimport { getRevalidateReason } from \"next/dist/esm/server/instrumentation/utils\";\nimport { sendResponse } from \"next/dist/esm/server/send-response\";\nimport { fromNodeOutgoingHttpHeaders, toNodeOutgoingHttpHeaders } from \"next/dist/esm/server/web/utils\";\nimport { getCacheControlHeader } from \"next/dist/esm/server/lib/cache-control\";\nimport { INFINITE_CACHE, NEXT_CACHE_TAGS_HEADER } from \"next/dist/esm/lib/constants\";\nimport { NoFallbackError } from \"next/dist/esm/shared/lib/no-fallback-error.external\";\nimport { CachedRouteKind } from \"next/dist/esm/server/response-cache\";\nimport * as userland from \"INNER_APP_ROUTE\";\n// We inject the nextConfigOutput here so that we can use them in the route\n// module.\nconst nextConfigOutput = \"\"\nconst routeModule = new AppRouteRouteModule({\n    definition: {\n        kind: RouteKind.APP_ROUTE,\n        page: \"/api/cross-chain/route\",\n        pathname: \"/api/cross-chain\",\n        filename: \"route\",\n        bundlePath: \"\"\n    },\n    distDir: process.env.__NEXT_RELATIVE_DIST_DIR || '',\n    relativeProjectDir: process.env.__NEXT_RELATIVE_PROJECT_DIR || '',\n    resolvedPagePath: \"[project]/src/app/api/cross-chain/route.ts\",\n    nextConfigOutput,\n    userland\n});\n// Pull out the exports that we need to expose from the module. This should\n// be eliminated when we've moved the other routes to the new format. These\n// are used to hook into the route.\nconst { workAsyncStorage, workUnitAsyncStorage, serverHooks } = routeModule;\nfunction patchFetch() {\n    return _patchFetch({\n        workAsyncStorage,\n        workUnitAsyncStorage\n    });\n}\nexport { routeModule, workAsyncStorage, workUnitAsyncStorage, serverHooks, patchFetch,  };\nexport async function handler(req, res, ctx) {\n    var _nextConfig_experimental;\n    let srcPage = \"/api/cross-chain/route\";\n    // turbopack doesn't normalize `/index` in the page name\n    // so we need to to process dynamic routes properly\n    // TODO: fix turbopack providing differing value from webpack\n    if (process.env.TURBOPACK) {\n        srcPage = srcPage.replace(/\\/index$/, '') || '/';\n    } else if (srcPage === '/index') {\n        // we always normalize /index specifically\n        srcPage = '/';\n    }\n    const multiZoneDraftMode = process.env.__NEXT_MULTI_ZONE_DRAFT_MODE;\n    const prepareResult = await routeModule.prepare(req, res, {\n        srcPage,\n        multiZoneDraftMode\n    });\n    if (!prepareResult) {\n        res.statusCode = 400;\n        res.end('Bad Request');\n        ctx.waitUntil == null ? void 0 : ctx.waitUntil.call(ctx, Promise.resolve());\n        return null;\n    }\n    const { buildId, params, nextConfig, isDraftMode, prerenderManifest, routerServerContext, isOnDemandRevalidate, revalidateOnlyGenerated, resolvedPathname } = prepareResult;\n    const normalizedSrcPage = normalizeAppPath(srcPage);\n    let isIsr = Boolean(prerenderManifest.dynamicRoutes[normalizedSrcPage] || prerenderManifest.routes[resolvedPathname]);\n    if (isIsr && !isDraftMode) {\n        const isPrerendered = Boolean(prerenderManifest.routes[resolvedPathname]);\n        const prerenderInfo = prerenderManifest.dynamicRoutes[normalizedSrcPage];\n        if (prerenderInfo) {\n            if (prerenderInfo.fallback === false && !isPrerendered) {\n                throw new NoFallbackError();\n            }\n        }\n    }\n    let cacheKey = null;\n    if (isIsr && !routeModule.isDev && !isDraftMode) {\n        cacheKey = resolvedPathname;\n        // ensure /index and / is normalized to one key\n        cacheKey = cacheKey === '/index' ? '/' : cacheKey;\n    }\n    const supportsDynamicResponse = // If we're in development, we always support dynamic HTML\n    routeModule.isDev === true || // If this is not SSG or does not have static paths, then it supports\n    // dynamic HTML.\n    !isIsr;\n    // This is a revalidation request if the request is for a static\n    // page and it is not being resumed from a postponed render and\n    // it is not a dynamic RSC request then it is a revalidation\n    // request.\n    const isRevalidate = isIsr && !supportsDynamicResponse;\n    const method = req.method || 'GET';\n    const tracer = getTracer();\n    const activeSpan = tracer.getActiveScopeSpan();\n    const context = {\n        params,\n        prerenderManifest,\n        renderOpts: {\n            experimental: {\n                cacheComponents: Boolean(nextConfig.experimental.cacheComponents),\n                authInterrupts: Boolean(nextConfig.experimental.authInterrupts)\n            },\n            supportsDynamicResponse,\n            incrementalCache: getRequestMeta(req, 'incrementalCache'),\n            cacheLifeProfiles: (_nextConfig_experimental = nextConfig.experimental) == null ? void 0 : _nextConfig_experimental.cacheLife,\n            isRevalidate,\n            waitUntil: ctx.waitUntil,\n            onClose: (cb)=>{\n                res.on('close', cb);\n            },\n            onAfterTaskError: undefined,\n            onInstrumentationRequestError: (error, _request, errorContext)=>routeModule.onRequestError(req, error, errorContext, routerServerContext)\n        },\n        sharedContext: {\n            buildId\n        }\n    };\n    const nodeNextReq = new NodeNextRequest(req);\n    const nodeNextRes = new NodeNextResponse(res);\n    const nextReq = NextRequestAdapter.fromNodeNextRequest(nodeNextReq, signalFromNodeResponse(res));\n    try {\n        const invokeRouteModule = async (span)=>{\n            return routeModule.handle(nextReq, context).finally(()=>{\n                if (!span) return;\n                span.setAttributes({\n                    'http.status_code': res.statusCode,\n                    'next.rsc': false\n                });\n                const rootSpanAttributes = tracer.getRootSpanAttributes();\n                // We were unable to get attributes, probably OTEL is not enabled\n                if (!rootSpanAttributes) {\n                    return;\n                }\n                if (rootSpanAttributes.get('next.span_type') !== BaseServerSpan.handleRequest) {\n                    console.warn(`Unexpected root span type '${rootSpanAttributes.get('next.span_type')}'. Please report this Next.js issue https://github.com/vercel/next.js`);\n                    return;\n                }\n                const route = rootSpanAttributes.get('next.route');\n                if (route) {\n                    const name = `${method} ${route}`;\n                    span.setAttributes({\n                        'next.route': route,\n                        'http.route': route,\n                        'next.span_name': name\n                    });\n                    span.updateName(name);\n                } else {\n                    span.updateName(`${method} ${req.url}`);\n                }\n            });\n        };\n        const handleResponse = async (currentSpan)=>{\n            var _cacheEntry_value;\n            const responseGenerator = async ({ previousCacheEntry })=>{\n                try {\n                    if (!getRequestMeta(req, 'minimalMode') && isOnDemandRevalidate && revalidateOnlyGenerated && !previousCacheEntry) {\n                        res.statusCode = 404;\n                        // on-demand revalidate always sets this header\n                        res.setHeader('x-nextjs-cache', 'REVALIDATED');\n                        res.end('This page could not be found');\n                        return null;\n                    }\n                    const response = await invokeRouteModule(currentSpan);\n                    req.fetchMetrics = context.renderOpts.fetchMetrics;\n                    let pendingWaitUntil = context.renderOpts.pendingWaitUntil;\n                    // Attempt using provided waitUntil if available\n                    // if it's not we fallback to sendResponse's handling\n                    if (pendingWaitUntil) {\n                        if (ctx.waitUntil) {\n                            ctx.waitUntil(pendingWaitUntil);\n                            pendingWaitUntil = undefined;\n                        }\n                    }\n                    const cacheTags = context.renderOpts.collectedTags;\n                    // If the request is for a static response, we can cache it so long\n                    // as it's not edge.\n                    if (isIsr) {\n                        const blob = await response.blob();\n                        // Copy the headers from the response.\n                        const headers = toNodeOutgoingHttpHeaders(response.headers);\n                        if (cacheTags) {\n                            headers[NEXT_CACHE_TAGS_HEADER] = cacheTags;\n                        }\n                        if (!headers['content-type'] && blob.type) {\n                            headers['content-type'] = blob.type;\n                        }\n                        const revalidate = typeof context.renderOpts.collectedRevalidate === 'undefined' || context.renderOpts.collectedRevalidate >= INFINITE_CACHE ? false : context.renderOpts.collectedRevalidate;\n                        const expire = typeof context.renderOpts.collectedExpire === 'undefined' || context.renderOpts.collectedExpire >= INFINITE_CACHE ? undefined : context.renderOpts.collectedExpire;\n                        // Create the cache entry for the response.\n                        const cacheEntry = {\n                            value: {\n                                kind: CachedRouteKind.APP_ROUTE,\n                                status: response.status,\n                                body: Buffer.from(await blob.arrayBuffer()),\n                                headers\n                            },\n                            cacheControl: {\n                                revalidate,\n                                expire\n                            }\n                        };\n                        return cacheEntry;\n                    } else {\n                        // send response without caching if not ISR\n                        await sendResponse(nodeNextReq, nodeNextRes, response, context.renderOpts.pendingWaitUntil);\n                        return null;\n                    }\n                } catch (err) {\n                    // if this is a background revalidate we need to report\n                    // the request error here as it won't be bubbled\n                    if (previousCacheEntry == null ? void 0 : previousCacheEntry.isStale) {\n                        await routeModule.onRequestError(req, err, {\n                            routerKind: 'App Router',\n                            routePath: srcPage,\n                            routeType: 'route',\n                            revalidateReason: getRevalidateReason({\n                                isRevalidate,\n                                isOnDemandRevalidate\n                            })\n                        }, routerServerContext);\n                    }\n                    throw err;\n                }\n            };\n            const cacheEntry = await routeModule.handleResponse({\n                req,\n                nextConfig,\n                cacheKey,\n                routeKind: RouteKind.APP_ROUTE,\n                isFallback: false,\n                prerenderManifest,\n                isRoutePPREnabled: false,\n                isOnDemandRevalidate,\n                revalidateOnlyGenerated,\n                responseGenerator,\n                waitUntil: ctx.waitUntil\n            });\n            // we don't create a cacheEntry for ISR\n            if (!isIsr) {\n                return null;\n            }\n            if ((cacheEntry == null ? void 0 : (_cacheEntry_value = cacheEntry.value) == null ? void 0 : _cacheEntry_value.kind) !== CachedRouteKind.APP_ROUTE) {\n                var _cacheEntry_value1;\n                throw Object.defineProperty(new Error(`Invariant: app-route received invalid cache entry ${cacheEntry == null ? void 0 : (_cacheEntry_value1 = cacheEntry.value) == null ? void 0 : _cacheEntry_value1.kind}`), \"__NEXT_ERROR_CODE\", {\n                    value: \"E701\",\n                    enumerable: false,\n                    configurable: true\n                });\n            }\n            if (!getRequestMeta(req, 'minimalMode')) {\n                res.setHeader('x-nextjs-cache', isOnDemandRevalidate ? 'REVALIDATED' : cacheEntry.isMiss ? 'MISS' : cacheEntry.isStale ? 'STALE' : 'HIT');\n            }\n            // Draft mode should never be cached\n            if (isDraftMode) {\n                res.setHeader('Cache-Control', 'private, no-cache, no-store, max-age=0, must-revalidate');\n            }\n            const headers = fromNodeOutgoingHttpHeaders(cacheEntry.value.headers);\n            if (!(getRequestMeta(req, 'minimalMode') && isIsr)) {\n                headers.delete(NEXT_CACHE_TAGS_HEADER);\n            }\n            // If cache control is already set on the response we don't\n            // override it to allow users to customize it via next.config\n            if (cacheEntry.cacheControl && !res.getHeader('Cache-Control') && !headers.get('Cache-Control')) {\n                headers.set('Cache-Control', getCacheControlHeader(cacheEntry.cacheControl));\n            }\n            await sendResponse(nodeNextReq, nodeNextRes, new Response(cacheEntry.value.body, {\n                headers,\n                status: cacheEntry.value.status || 200\n            }));\n            return null;\n        };\n        // TODO: activeSpan code path is for when wrapped by\n        // next-server can be removed when this is no longer used\n        if (activeSpan) {\n            await handleResponse(activeSpan);\n        } else {\n            await tracer.withPropagatedContext(req.headers, ()=>tracer.trace(BaseServerSpan.handleRequest, {\n                    spanName: `${method} ${req.url}`,\n                    kind: SpanKind.SERVER,\n                    attributes: {\n                        'http.method': method,\n                        'http.target': req.url\n                    }\n                }, handleResponse));\n        }\n    } catch (err) {\n        // if we aren't wrapped by base-server handle here\n        if (!activeSpan && !(err instanceof NoFallbackError)) {\n            await routeModule.onRequestError(req, err, {\n                routerKind: 'App Router',\n                routePath: normalizedSrcPage,\n                routeType: 'route',\n                revalidateReason: getRevalidateReason({\n                    isRevalidate,\n                    isOnDemandRevalidate\n                })\n            });\n        }\n        // rethrow so that we can handle serving error page\n        // If this is during static generation, throw the error again.\n        if (isIsr) throw err;\n        // Otherwise, send a 500 response.\n        await sendResponse(nodeNextReq, nodeNextRes, new Response(null, {\n            status: 500\n        }));\n        return null;\n    }\n}\n\n//# sourceMappingURL=app-route.js.map\n","export default /^(?:[0-9a-f]{8}-[0-9a-f]{4}-[1-8][0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}|00000000-0000-0000-0000-000000000000|ffffffff-ffff-ffff-ffff-ffffffffffff)$/i;\n","import { randomFillSync } from 'crypto';\nconst rnds8Pool = new Uint8Array(256);\nlet poolPtr = rnds8Pool.length;\nexport default function rng() {\n    if (poolPtr > rnds8Pool.length - 16) {\n        randomFillSync(rnds8Pool);\n        poolPtr = 0;\n    }\n    return rnds8Pool.slice(poolPtr, (poolPtr += 16));\n}\n","import REGEX from './regex.js';\nfunction validate(uuid) {\n    return typeof uuid === 'string' && REGEX.test(uuid);\n}\nexport default validate;\n","import validate from './validate.js';\nconst byteToHex = [];\nfor (let i = 0; i < 256; ++i) {\n    byteToHex.push((i + 0x100).toString(16).slice(1));\n}\nexport function unsafeStringify(arr, offset = 0) {\n    return (byteToHex[arr[offset + 0]] +\n        byteToHex[arr[offset + 1]] +\n        byteToHex[arr[offset + 2]] +\n        byteToHex[arr[offset + 3]] +\n        '-' +\n        byteToHex[arr[offset + 4]] +\n        byteToHex[arr[offset + 5]] +\n        '-' +\n        byteToHex[arr[offset + 6]] +\n        byteToHex[arr[offset + 7]] +\n        '-' +\n        byteToHex[arr[offset + 8]] +\n        byteToHex[arr[offset + 9]] +\n        '-' +\n        byteToHex[arr[offset + 10]] +\n        byteToHex[arr[offset + 11]] +\n        byteToHex[arr[offset + 12]] +\n        byteToHex[arr[offset + 13]] +\n        byteToHex[arr[offset + 14]] +\n        byteToHex[arr[offset + 15]]).toLowerCase();\n}\nfunction stringify(arr, offset = 0) {\n    const uuid = unsafeStringify(arr, offset);\n    if (!validate(uuid)) {\n        throw TypeError('Stringified UUID is invalid');\n    }\n    return uuid;\n}\nexport default stringify;\n","import native from './native.js';\nimport rng from './rng.js';\nimport { unsafeStringify } from './stringify.js';\nfunction v4(options, buf, offset) {\n    if (native.randomUUID && !buf && !options) {\n        return native.randomUUID();\n    }\n    options = options || {};\n    const rnds = options.random ?? options.rng?.() ?? rng();\n    if (rnds.length < 16) {\n        throw new Error('Random bytes length must be >= 16');\n    }\n    rnds[6] = (rnds[6] & 0x0f) | 0x40;\n    rnds[8] = (rnds[8] & 0x3f) | 0x80;\n    if (buf) {\n        offset = offset || 0;\n        if (offset < 0 || offset + 16 > buf.length) {\n            throw new RangeError(`UUID byte range ${offset}:${offset + 15} is out of buffer bounds`);\n        }\n        for (let i = 0; i < 16; ++i) {\n            buf[offset + i] = rnds[i];\n        }\n        return buf;\n    }\n    return unsafeStringify(rnds);\n}\nexport default v4;\n","/**\n * ZEC Swap Service\n * High-level service for ZEC ‚Üî Lightning swaps\n * Handles provider abstraction and error handling\n */\n\nimport { FixedFloatClient } from './fixedfloat-client';\nimport { SwapQuote, SwapOrder, ZecSwapConfig, SwapStatusSimple } from './types';\n\nexport interface ZecSwapServiceConfig {\n    fixedFloat: ZecSwapConfig;\n    // Future: Add SideShift, ChangeNow as fallbacks\n}\n\nexport class ZecSwapService {\n    private fixedFloat: FixedFloatClient;\n\n    constructor(config: ZecSwapServiceConfig) {\n        this.fixedFloat = new FixedFloatClient(config.fixedFloat);\n    }\n\n    // ============ Quote Methods ============\n\n    /**\n     * Get quote for ZEC ‚Üí Lightning swap\n     * @param zecAmount Amount in ZEC\n     * @returns Quote with expected BTC amount\n     */\n    async getZecToLightningQuote(zecAmount: number): Promise<SwapQuote> {\n        try {\n            return await this.fixedFloat.getZecToLightningQuote(zecAmount);\n        } catch (error) {\n            console.error('Failed to get ZEC‚ÜíLN quote:', error);\n            throw new Error(`Failed to get quote: ${(error as Error).message}`);\n        }\n    }\n\n    /**\n     * Get quote for Lightning ‚Üí ZEC swap\n     * @param satoshis Amount in satoshis\n     * @returns Quote with expected ZEC amount\n     */\n    async getLightningToZecQuote(satoshis: number): Promise<SwapQuote> {\n        try {\n            return await this.fixedFloat.getLightningToZecQuote(satoshis);\n        } catch (error) {\n            console.error('Failed to get LN‚ÜíZEC quote:', error);\n            throw new Error(`Failed to get quote: ${(error as Error).message}`);\n        }\n    }\n\n    // ============ Swap Methods ============\n\n    /**\n     * Create ZEC ‚Üí Lightning swap\n     * \n     * Flow:\n     * 1. User sends ZEC to returned deposit address\n     * 2. Once confirmed, Lightning payment is sent to provided invoice\n     * \n     * @param zecAmount Amount in ZEC to swap\n     * @param lightningInvoice BOLT11 invoice to receive BTC\n     * @param refundAddress Optional ZEC address for refunds\n     */\n    async swapZecToLightning(\n        zecAmount: number,\n        lightningInvoice: string,\n        refundAddress?: string\n    ): Promise<SwapOrder> {\n        // Validate Lightning invoice\n        if (!FixedFloatClient.isValidLightningInvoice(lightningInvoice)) {\n            throw new Error('Invalid Lightning invoice format');\n        }\n\n        try {\n            const order = await this.fixedFloat.createZecToLightningOrder(\n                zecAmount,\n                lightningInvoice,\n                refundAddress\n            );\n\n            console.log(`Created ZEC‚ÜíLN swap order: ${order.id}`);\n            console.log(`Deposit ${zecAmount} ZEC to: ${order.from.address}`);\n            console.log(`You will receive Lightning payment to your invoice`);\n\n            return order;\n        } catch (error) {\n            console.error('Failed to create ZEC‚ÜíLN swap:', error);\n            throw error;\n        }\n    }\n\n    /**\n     * Create Lightning ‚Üí ZEC swap\n     * \n     * Flow:\n     * 1. Pay the returned Lightning invoice\n     * 2. ZEC is sent to provided address\n     * \n     * @param satoshis Amount in satoshis to swap\n     * @param zecAddress ZEC address to receive (use z-address for privacy!)\n     */\n    async swapLightningToZec(\n        satoshis: number,\n        zecAddress: string\n    ): Promise<SwapOrder> {\n        // Validate ZEC address\n        if (!FixedFloatClient.isValidZecAddress(zecAddress)) {\n            throw new Error('Invalid ZEC address format');\n        }\n\n        // Warn if using transparent address\n        if (!FixedFloatClient.isShieldedAddress(zecAddress)) {\n            console.warn('‚ö†Ô∏è  Using transparent t-address. Consider using a shielded z-address for privacy!');\n        }\n\n        try {\n            const order = await this.fixedFloat.createLightningToZecOrder(\n                satoshis,\n                zecAddress\n            );\n\n            console.log(`Created LN‚ÜíZEC swap order: ${order.id}`);\n            console.log(`Pay this Lightning invoice: ${order.from.address}`);\n            console.log(`You will receive ZEC at: ${zecAddress}`);\n\n            return order;\n        } catch (error) {\n            console.error('Failed to create LN‚ÜíZEC swap:', error);\n            throw error;\n        }\n    }\n\n    // ============ Status Methods ============\n\n    /**\n     * Get swap order status\n     */\n    async getSwapStatus(orderId: string, token: string): Promise<SwapOrder> {\n        return this.fixedFloat.getOrderStatus(orderId, token);\n    }\n\n    /**\n     * Wait for swap to complete\n     */\n    async waitForSwapComplete(\n        orderId: string,\n        token: string,\n        onStatusChange?: (order: SwapOrder, simpleStatus: SwapStatusSimple) => void\n    ): Promise<SwapOrder> {\n        return this.fixedFloat.waitForOrderComplete(\n            orderId,\n            token,\n            60 * 60 * 1000, // 60 min timeout\n            15_000,         // 15 sec poll\n            (order) => {\n                const simpleStatus = FixedFloatClient.toSimpleStatus(order.status);\n                onStatusChange?.(order, simpleStatus);\n            }\n        );\n    }\n\n    // ============ Utility Methods ============\n\n    /**\n     * Convert satoshis to BTC string\n     */\n    static satsToBtc(satoshis: number): string {\n        return (satoshis / 100_000_000).toFixed(8);\n    }\n\n    /**\n     * Convert BTC string to satoshis\n     */\n    static btcToSats(btc: string | number): number {\n        return Math.floor(Number(btc) * 100_000_000);\n    }\n\n    /**\n     * Convert ZEC string to zatoshis (smallest unit)\n     */\n    static zecToZatoshis(zec: string | number): number {\n        return Math.floor(Number(zec) * 100_000_000);\n    }\n\n    /**\n     * Convert zatoshis to ZEC string\n     */\n    static zatoshisToZec(zatoshis: number): string {\n        return (zatoshis / 100_000_000).toFixed(8);\n    }\n}\n\nexport default ZecSwapService;\n","/**\n * Cross-Chain Bridge\n * Orchestrates ZEC ‚Üî STRK transfers using:\n * - FixedFloat (ZEC ‚Üî Lightning)\n * - Atomiq (Lightning ‚Üî STRK)\n * - Privacy Mixer (Optional)\n * - Cashu (Optional)\n */\n\nimport { v4 as uuidv4 } from 'uuid';\nimport {\n    CrossChainTransfer,\n    CrossChainStep,\n    ZecToStrkParams,\n    StrkToZecParams,\n    CrossChainConfig\n} from './types';\nimport { ZecSwapService, ZecSwapServiceConfig } from '../zcash';\nimport { RealAtomiqSwapClient } from '../swaps/atomiq';\nimport { SwapQuote, SwapOrder } from '../zcash/types';\n\nexport class CrossChainBridge {\n    private zecService: ZecSwapService;\n    private atomiqClient: RealAtomiqSwapClient;\n    private config: CrossChainConfig;\n\n    // Track active transfers\n    private activeTransfers: Map<string, CrossChainTransfer> = new Map();\n\n    constructor(config: CrossChainConfig) {\n        this.config = config;\n\n        // Initialize ZEC swap service (FixedFloat)\n        const zecConfig: ZecSwapServiceConfig = {\n            fixedFloat: {\n                apiKey: config.fixedFloat.apiKey,\n                apiSecret: config.fixedFloat.apiSecret\n            }\n        };\n        this.zecService = new ZecSwapService(zecConfig);\n\n        // Initialize Atomiq client\n        const network = config.atomiq.environment === 'mainnet' ? 'MAINNET' : 'TESTNET';\n        this.atomiqClient = new RealAtomiqSwapClient(network, config.starknet.rpcUrl);\n    }\n\n    /**\n     * Get a quote for ZEC ‚Üí STRK transfer\n     * Returns estimated amounts and fees for each leg\n     */\n    async getZecToStrkQuote(zecAmount: number): Promise<{\n        zecAmount: number;\n        lightningAmount: number;\n        strkAmount: number;\n        totalFeePercent: number;\n        legs: {\n            zecToLightning: { rate: number; fee: number; quote: SwapQuote };\n            lightningToStrk: { rate: number; fee: number };\n        };\n    }> {\n        // Step 1: Get ZEC ‚Üí Lightning quote from FixedFloat\n        const zecToLnQuote = await this.zecService.getZecToLightningQuote(zecAmount);\n        const lightningBtc = parseFloat(zecToLnQuote.to.amount);\n        const lightningAmount = Math.floor(lightningBtc * 100000000); // Convert BTC to sats\n\n        // Step 2: Get Lightning ‚Üí STRK quote from Atomiq\n        // Note: Atomiq expects sats as input\n        const lnToStrkQuote = await this.atomiqClient.getQuote('BTC_LN', 'STRK', BigInt(lightningAmount), true);\n        const strkAmountWei = lnToStrkQuote.amountOut;\n        const strkAmount = Number(strkAmountWei) / 1e18;\n\n        // Calculate fees\n        const zecInAmount = parseFloat(zecToLnQuote.from.amount);\n        const zecFeePercent = ((zecInAmount - lightningBtc) / zecInAmount) * 100;\n        const lnFeePercent = (Number(lnToStrkQuote.fee) / lightningAmount) * 100;\n        const totalFeePercent = zecFeePercent + lnFeePercent;\n\n        return {\n            zecAmount,\n            lightningAmount,\n            strkAmount,\n            totalFeePercent,\n            legs: {\n                zecToLightning: {\n                    rate: parseFloat(zecToLnQuote.from.rate),\n                    fee: zecFeePercent,\n                    quote: zecToLnQuote\n                },\n                lightningToStrk: {\n                    rate: Number(lnToStrkQuote.amountOut) / lightningAmount,\n                    fee: lnFeePercent\n                }\n            }\n        };\n    }\n\n    /**\n     * Get a quote for STRK ‚Üí ZEC transfer\n     */\n    async getStrkToZecQuote(strkAmount: number): Promise<{\n        strkAmount: number;\n        lightningAmount: number;\n        zecAmount: number;\n        totalFeePercent: number;\n        legs: {\n            strkToLightning: { rate: number; fee: number };\n            lightningToZec: { rate: number; fee: number; quote: SwapQuote };\n        };\n    }> {\n        // Step 1: Get STRK ‚Üí Lightning quote from Atomiq\n        const strkAmountWei = BigInt(Math.floor(strkAmount * 1e18));\n        const strkToLnQuote = await this.atomiqClient.getQuote('STRK', 'BTC_LN', strkAmountWei, true);\n        const lightningAmount = Number(strkToLnQuote.amountOut); // sats\n\n        // Step 2: Get Lightning ‚Üí ZEC quote from FixedFloat\n        const satoshis = lightningAmount;\n        const lnToZecQuote = await this.zecService.getLightningToZecQuote(satoshis);\n        const zecAmount = parseFloat(lnToZecQuote.to.amount);\n\n        // Calculate fees\n        const strkFeePercent = (Number(strkToLnQuote.fee) / Number(strkAmountWei)) * 100;\n        const lnInAmount = parseFloat(lnToZecQuote.from.amount);\n        const zecFeePercent = ((lnInAmount - zecAmount) / lnInAmount) * 100;\n        const totalFeePercent = strkFeePercent + zecFeePercent;\n\n        return {\n            strkAmount,\n            lightningAmount,\n            zecAmount,\n            totalFeePercent,\n            legs: {\n                strkToLightning: {\n                    rate: lightningAmount / strkAmount,\n                    fee: strkFeePercent\n                },\n                lightningToZec: {\n                    rate: parseFloat(lnToZecQuote.from.rate),\n                    fee: zecFeePercent,\n                    quote: lnToZecQuote\n                }\n            }\n        };\n    }\n\n    /**\n     * Initiate ZEC ‚Üí STRK transfer\n     * Full flow: ZEC ‚Üí FixedFloat ‚Üí Lightning ‚Üí Atomiq ‚Üí STRK\n     */\n    async initiateZecToStrk(params: ZecToStrkParams): Promise<CrossChainTransfer> {\n        const { zecAmount, recipientAddress, useCashuFlow = false, usePrivacyMixer = false, onProgress } = params;\n\n        // Create transfer record\n        const transfer: CrossChainTransfer = {\n            id: uuidv4(),\n            direction: 'zec-to-strk',\n            from: {\n                currency: 'ZEC',\n                amount: zecAmount.toString()\n            },\n            to: {\n                currency: 'STRK',\n                amount: '0', // Will be updated\n                address: recipientAddress\n            },\n            steps: this.createZecToStrkSteps(usePrivacyMixer, useCashuFlow),\n            currentStepIndex: 0,\n            status: 'pending',\n            options: { useCashuFlow, usePrivacyMixer },\n            createdAt: Date.now()\n        };\n\n        this.activeTransfers.set(transfer.id, transfer);\n        this.notifyProgress(transfer, onProgress);\n\n        try {\n            // Execute the transfer flow\n            await this.executeZecToStrkFlow(transfer, onProgress);\n            return transfer;\n        } catch (error) {\n            transfer.status = 'failed';\n            transfer.error = error instanceof Error ? error.message : String(error);\n            this.notifyProgress(transfer, onProgress);\n            throw error;\n        }\n    }\n\n    /**\n     * Execute the ZEC ‚Üí STRK flow step by step\n     */\n    private async executeZecToStrkFlow(\n        transfer: CrossChainTransfer,\n        onProgress?: (transfer: CrossChainTransfer) => void\n    ): Promise<void> {\n        const zecAmount = parseFloat(transfer.from.amount);\n\n        // Step 1: Create Atomiq Lightning ‚Üí STRK swap to get invoice\n        this.updateStep(transfer, 0, 'in-progress', 'Creating Atomiq Lightning swap...');\n        this.notifyProgress(transfer, onProgress);\n\n        // First get a quote to know how many sats we'll receive from FixedFloat\n        const zecToLnQuote = await this.zecService.getZecToLightningQuote(zecAmount);\n        const lightningBtc = parseFloat(zecToLnQuote.to.amount);\n        const expectedSats = Math.floor(lightningBtc * 100000000);\n\n        // Create Atomiq swap with that amount - get the Lightning invoice\n        const atomiqSwap = await this.atomiqClient.beginLightningToStrkSwap(\n            expectedSats,\n            transfer.to.address\n        );\n\n        transfer.atomiqSwapId = atomiqSwap.id;\n        this.updateStep(transfer, 0, 'complete', 'Atomiq swap created', { swapId: atomiqSwap.id });\n        this.notifyProgress(transfer, onProgress);\n\n        // Step 2: Create FixedFloat order with Atomiq's Lightning invoice as destination\n        this.updateStep(transfer, 1, 'in-progress', 'Creating ZEC ‚Üí Lightning order...');\n        this.notifyProgress(transfer, onProgress);\n\n        // Create the ZEC ‚Üí Lightning swap with Atomiq's invoice\n        const fixedFloatOrder = await this.zecService.swapZecToLightning(\n            zecAmount,\n            atomiqSwap.invoice  // This is the key - FixedFloat pays Atomiq's invoice\n        );\n\n        transfer.zecSwapOrderId = fixedFloatOrder.id;\n        this.updateStep(transfer, 1, 'complete', 'FixedFloat order created', {\n            orderId: fixedFloatOrder.id,\n            depositAddress: fixedFloatOrder.from.address\n        });\n        this.notifyProgress(transfer, onProgress);\n\n        // Step 3: Wait for ZEC deposit (user sends ZEC to FixedFloat address)\n        this.updateStep(transfer, 2, 'in-progress', 'Waiting for ZEC deposit...', {\n            depositAddress: fixedFloatOrder.from.address,\n            expectedAmount: fixedFloatOrder.from.amount\n        });\n        this.notifyProgress(transfer, onProgress);\n\n        // Return here - the user must send ZEC to the deposit address\n        // Further steps will be polled/triggered by checkTransferStatus\n        console.log(`\\nüîî ACTION REQUIRED: Send ${zecAmount} ZEC to ${fixedFloatOrder.from.address}`);\n        console.log(`Transfer ID: ${transfer.id}`);\n        console.log(`Use checkTransferStatus('${transfer.id}') to continue after deposit\\n`);\n    }\n\n    /**\n     * Continue ZEC ‚Üí STRK transfer after deposit\n     * Call this after the user has sent ZEC to the deposit address\n     */\n    async continueZecToStrkTransfer(\n        transferId: string,\n        onProgress?: (transfer: CrossChainTransfer) => void\n    ): Promise<CrossChainTransfer> {\n        const transfer = this.activeTransfers.get(transferId);\n        if (!transfer) {\n            throw new Error(`Transfer ${transferId} not found`);\n        }\n\n        if (transfer.direction !== 'zec-to-strk') {\n            throw new Error('This method is only for ZEC ‚Üí STRK transfers');\n        }\n\n        try {\n            // Check deposit status\n            const orderStatus = await this.zecService.getSwapStatus(\n                transfer.zecSwapOrderId!,\n                transfer.zecSwapToken || ''\n            );\n\n            console.log(`üìä FixedFloat order status: ${orderStatus.status}`);\n\n            // Wait for deposit to be confirmed\n            if (orderStatus.status === 'new' || orderStatus.status === 'pending') {\n                this.updateStep(transfer, 2, 'in-progress', `Waiting for ZEC deposit (status: ${orderStatus.status})`);\n                this.notifyProgress(transfer, onProgress);\n                return transfer;\n            }\n\n            if (orderStatus.status === 'expired' || orderStatus.status === 'emergency') {\n                throw new Error(`FixedFloat order ${orderStatus.status}`);\n            }\n\n            // Deposit confirmed\n            this.updateStep(transfer, 2, 'complete', 'ZEC deposit confirmed');\n            this.notifyProgress(transfer, onProgress);\n\n            // Step 4: Wait for Lightning payment to Atomiq\n            this.updateStep(transfer, 3, 'in-progress', 'Waiting for Lightning payment to Atomiq...');\n            this.notifyProgress(transfer, onProgress);\n\n            // Poll Atomiq for payment\n            const atomiqStatus = await this.atomiqClient.getStatus(transfer.atomiqSwapId!);\n            console.log(`üìä Atomiq swap status: ${atomiqStatus.status}`);\n\n            if (atomiqStatus.status === 'CREATED' || atomiqStatus.status === 'QUOTED') {\n                // Lightning not yet paid\n                this.updateStep(transfer, 3, 'in-progress', 'Waiting for FixedFloat to pay Lightning invoice...');\n                this.notifyProgress(transfer, onProgress);\n                return transfer;\n            }\n\n            if (atomiqStatus.status === 'EXPIRED' || atomiqStatus.status === 'FAILED' || atomiqStatus.status === 'REFUNDED') {\n                throw new Error(`Atomiq swap ${atomiqStatus.status}`);\n            }\n\n            this.updateStep(transfer, 3, 'complete', 'Lightning payment received by Atomiq');\n            this.notifyProgress(transfer, onProgress);\n\n            // Step 5: Claim STRK from Atomiq\n            this.updateStep(transfer, 4, 'in-progress', 'Claiming STRK on Starknet...');\n            this.notifyProgress(transfer, onProgress);\n\n            const claimResult = await this.atomiqClient.claimLightningToStrkSwap(transfer.atomiqSwapId!);\n\n            this.updateStep(transfer, 4, 'complete', 'STRK claimed successfully', {\n                txId: claimResult.txId\n            });\n            this.notifyProgress(transfer, onProgress);\n\n            // Get final amount from Atomiq status\n            const finalStatus = await this.atomiqClient.getStatus(transfer.atomiqSwapId!);\n            if (finalStatus.amountOut) {\n                transfer.to.amount = (Number(finalStatus.amountOut) / 1e18).toString();\n            }\n\n            // Mark transfer complete\n            transfer.status = 'complete';\n            transfer.completedAt = Date.now();\n            this.notifyProgress(transfer, onProgress);\n\n            return transfer;\n\n        } catch (error) {\n            transfer.status = 'failed';\n            transfer.error = error instanceof Error ? error.message : String(error);\n            this.notifyProgress(transfer, onProgress);\n            throw error;\n        }\n    }\n\n    /**\n     * Initiate STRK ‚Üí ZEC transfer\n     * Full flow: STRK ‚Üí Atomiq ‚Üí Lightning ‚Üí FixedFloat ‚Üí ZEC\n     */\n    async initiateStrkToZec(params: StrkToZecParams): Promise<CrossChainTransfer> {\n        const { strkAmount, zecAddress, useCashuFlow = false, usePrivacyMixer = false, onProgress } = params;\n\n        const transfer: CrossChainTransfer = {\n            id: uuidv4(),\n            direction: 'strk-to-zec',\n            from: {\n                currency: 'STRK',\n                amount: strkAmount.toString()\n            },\n            to: {\n                currency: 'ZEC',\n                amount: '0',\n                address: zecAddress\n            },\n            steps: this.createStrkToZecSteps(usePrivacyMixer, useCashuFlow),\n            currentStepIndex: 0,\n            status: 'pending',\n            options: { useCashuFlow, usePrivacyMixer },\n            createdAt: Date.now()\n        };\n\n        this.activeTransfers.set(transfer.id, transfer);\n        this.notifyProgress(transfer, onProgress);\n\n        try {\n            await this.executeStrkToZecFlow(transfer, onProgress);\n            return transfer;\n        } catch (error) {\n            transfer.status = 'failed';\n            transfer.error = error instanceof Error ? error.message : String(error);\n            this.notifyProgress(transfer, onProgress);\n            throw error;\n        }\n    }\n\n    /**\n     * Execute the STRK ‚Üí ZEC flow step by step\n     */\n    private async executeStrkToZecFlow(\n        transfer: CrossChainTransfer,\n        onProgress?: (transfer: CrossChainTransfer) => void\n    ): Promise<void> {\n        const strkAmount = BigInt(transfer.from.amount);\n        const strkAmountNum = Number(strkAmount) / 1e18;\n\n        // Step 1: Get Lightning invoice from FixedFloat for ZEC output\n        this.updateStep(transfer, 0, 'in-progress', 'Creating Lightning ‚Üí ZEC order...');\n        this.notifyProgress(transfer, onProgress);\n\n        // First estimate sats we'll get from STRK\n        const estimate = await this.atomiqClient.estimateLightningSatsFromStrk(strkAmountNum);\n        const estimatedSats = estimate.satsOut;\n\n        // Create FixedFloat order for Lightning ‚Üí ZEC\n        const fixedFloatOrder = await this.zecService.swapLightningToZec(\n            estimatedSats,\n            transfer.to.address  // ZEC address (should be z-address for privacy)\n        );\n\n        transfer.zecSwapOrderId = fixedFloatOrder.id;\n\n        // The Lightning invoice to pay is in the order\n        const lightningInvoice = fixedFloatOrder.from.address; // FixedFloat's LN invoice\n\n        this.updateStep(transfer, 0, 'complete', 'FixedFloat order created', {\n            orderId: fixedFloatOrder.id,\n            invoice: lightningInvoice\n        });\n        this.notifyProgress(transfer, onProgress);\n\n        // Step 2: Execute STRK ‚Üí Lightning swap via Atomiq, paying FixedFloat's invoice\n        this.updateStep(transfer, 1, 'in-progress', 'Executing STRK ‚Üí Lightning swap...');\n        this.notifyProgress(transfer, onProgress);\n\n        // Get the source address for the swap (shared account)\n        const { getSharedSwapAccount } = await import('../starknet/sharedAccount');\n        const sharedSigner = getSharedSwapAccount();\n        const sourceAddress = sharedSigner?.getAddress() || '';\n\n        if (!sourceAddress) {\n            throw new Error('No shared swap account configured - cannot execute STRK ‚Üí Lightning swap');\n        }\n\n        const atomiqResult = await this.atomiqClient.swapStrkToLightning(\n            strkAmountNum,\n            lightningInvoice,\n            sourceAddress\n        );\n\n        if (!atomiqResult.success) {\n            throw new Error(`Atomiq swap failed: ${atomiqResult.error}`);\n        }\n\n        this.updateStep(transfer, 1, 'complete', 'STRK ‚Üí Lightning swap complete', {\n            txId: atomiqResult.txId\n        });\n        this.notifyProgress(transfer, onProgress);\n\n        // Step 3: Wait for FixedFloat to process and send ZEC\n        this.updateStep(transfer, 2, 'in-progress', 'Waiting for ZEC delivery...');\n        this.notifyProgress(transfer, onProgress);\n\n        // Poll for ZEC delivery\n        console.log(`\\nüîî Waiting for FixedFloat to deliver ZEC to ${transfer.to.address}`);\n        console.log(`Transfer ID: ${transfer.id}`);\n        console.log(`Use checkTransferStatus('${transfer.id}') to check delivery status\\n`);\n    }\n\n    /**\n     * Continue STRK ‚Üí ZEC transfer (check ZEC delivery status)\n     */\n    async continueStrkToZecTransfer(\n        transferId: string,\n        onProgress?: (transfer: CrossChainTransfer) => void\n    ): Promise<CrossChainTransfer> {\n        const transfer = this.activeTransfers.get(transferId);\n        if (!transfer) {\n            throw new Error(`Transfer ${transferId} not found`);\n        }\n\n        if (transfer.direction !== 'strk-to-zec') {\n            throw new Error('This method is only for STRK ‚Üí ZEC transfers');\n        }\n\n        try {\n            // Check ZEC delivery status\n            const orderStatus = await this.zecService.getSwapStatus(\n                transfer.zecSwapOrderId!,\n                transfer.zecSwapToken || ''\n            );\n\n            console.log(`üìä FixedFloat ZEC delivery status: ${orderStatus.status}`);\n\n            if (orderStatus.status === 'done') {\n                transfer.to.amount = orderStatus.to.amount;\n\n                this.updateStep(transfer, 2, 'complete', 'ZEC delivered', {\n                    amount: orderStatus.to.amount,\n                    txId: orderStatus.to.txId\n                });\n                this.notifyProgress(transfer, onProgress);\n\n                transfer.status = 'complete';\n                transfer.completedAt = Date.now();\n                this.notifyProgress(transfer, onProgress);\n\n                return transfer;\n            }\n\n            if (orderStatus.status === 'expired' || orderStatus.status === 'emergency') {\n                throw new Error(`FixedFloat order ${orderStatus.status}`);\n            }\n\n            this.updateStep(transfer, 2, 'in-progress', `Waiting for ZEC delivery (status: ${orderStatus.status})`);\n            this.notifyProgress(transfer, onProgress);\n\n            return transfer;\n\n        } catch (error) {\n            transfer.status = 'failed';\n            transfer.error = error instanceof Error ? error.message : String(error);\n            this.notifyProgress(transfer, onProgress);\n            throw error;\n        }\n    }\n\n    /**\n     * Get transfer status\n     */\n    getTransfer(id: string): CrossChainTransfer | undefined {\n        return this.activeTransfers.get(id);\n    }\n\n    /**\n     * List all transfers\n     */\n    listTransfers(): CrossChainTransfer[] {\n        return Array.from(this.activeTransfers.values());\n    }\n\n    // Helper methods\n\n    private createZecToStrkSteps(usePrivacyMixer: boolean, useCashuFlow: boolean): CrossChainStep[] {\n        const steps: CrossChainStep[] = [\n            { id: 1, name: 'atomiq-swap-create', description: 'Create Atomiq Lightning swap', status: 'pending' },\n            { id: 2, name: 'fixedfloat-order', description: 'Create ZEC ‚Üí Lightning order', status: 'pending' },\n            { id: 3, name: 'zec-deposit', description: 'Waiting for ZEC deposit', status: 'pending' },\n            { id: 4, name: 'lightning-payment', description: 'Lightning payment to Atomiq', status: 'pending' },\n            { id: 5, name: 'strk-claim', description: 'Claim STRK on Starknet', status: 'pending' }\n        ];\n\n        if (usePrivacyMixer) {\n            steps.push({\n                id: steps.length + 1,\n                name: 'privacy-mixer',\n                description: 'Process through privacy mixer',\n                status: 'pending'\n            });\n        }\n\n        if (useCashuFlow) {\n            steps.push({\n                id: steps.length + 1,\n                name: 'cashu-flow',\n                description: 'Process through Cashu ecash',\n                status: 'pending'\n            });\n        }\n\n        return steps;\n    }\n\n    private createStrkToZecSteps(usePrivacyMixer: boolean, useCashuFlow: boolean): CrossChainStep[] {\n        const steps: CrossChainStep[] = [\n            { id: 1, name: 'fixedfloat-order', description: 'Create Lightning ‚Üí ZEC order', status: 'pending' },\n            { id: 2, name: 'strk-to-lightning', description: 'STRK ‚Üí Lightning swap via Atomiq', status: 'pending' },\n            { id: 3, name: 'zec-delivery', description: 'Wait for ZEC delivery', status: 'pending' }\n        ];\n\n        if (usePrivacyMixer) {\n            steps.unshift({\n                id: 0,\n                name: 'privacy-mixer',\n                description: 'Process through privacy mixer',\n                status: 'pending'\n            });\n        }\n\n        return steps;\n    }\n\n    private updateStep(\n        transfer: CrossChainTransfer,\n        stepIndex: number,\n        status: CrossChainStep['status'],\n        description?: string,\n        data?: Record<string, unknown>\n    ): void {\n        const step = transfer.steps[stepIndex];\n        if (step) {\n            step.status = status;\n            if (description) step.description = description;\n            if (data) step.data = data;\n            if (status === 'in-progress') step.startedAt = Date.now();\n            if (status === 'complete' || status === 'failed') step.completedAt = Date.now();\n\n            if (status === 'in-progress') {\n                transfer.currentStepIndex = stepIndex;\n                transfer.status = 'in-progress';\n            }\n        }\n    }\n\n    private notifyProgress(\n        transfer: CrossChainTransfer,\n        onProgress?: (transfer: CrossChainTransfer) => void\n    ): void {\n        if (onProgress) {\n            // Send a copy to prevent mutation issues\n            onProgress({ ...transfer, steps: [...transfer.steps] });\n        }\n    }\n}\n\n/**\n * Create a CrossChainBridge instance with environment config\n */\nexport function createCrossChainBridge(): CrossChainBridge {\n    // Load config from environment\n    const config: CrossChainConfig = {\n        fixedFloat: {\n            apiKey: process.env.FIXEDFLOAT_API_KEY || '',\n            apiSecret: process.env.FIXEDFLOAT_API_SECRET || ''\n        },\n        starknet: {\n            rpcUrl: process.env.STARKNET_RPC_URL || 'https://starknet-mainnet.public.blastapi.io',\n            mixerAddress: process.env.PRIVACY_MIXER_ADDRESS || '',\n            verifierAddress: process.env.VERIFIER_ADDRESS || ''\n        },\n        atomiq: {\n            environment: (process.env.ATOMIQ_ENVIRONMENT || 'mainnet') as 'testnet' | 'mainnet'\n        }\n    };\n\n    if (!config.fixedFloat.apiKey || !config.fixedFloat.apiSecret) {\n        throw new Error('FIXEDFLOAT_API_KEY and FIXEDFLOAT_API_SECRET must be set');\n    }\n\n    return new CrossChainBridge(config);\n}\n","/**\n * FixedFloat API Client\n * Handles ZEC ‚Üî Lightning (BTCLN) swaps via FixedFloat service\n * \n * API Docs: https://fixedfloat.com/api\n */\n\nimport crypto from 'crypto';\nimport {\n    SwapQuote,\n    SwapOrder,\n    SwapStatus,\n    SwapStatusSimple,\n    ZecSwapConfig,\n    FixedFloatPriceResponse,\n    FixedFloatOrderResponse,\n    FixedFloatStatusResponse,\n} from './types';\n\nexport class FixedFloatClient {\n    private apiKey: string;\n    private apiSecret: string;\n    private baseUrl: string;\n\n    constructor(config: ZecSwapConfig) {\n        this.apiKey = config.apiKey;\n        this.apiSecret = config.apiSecret;\n        this.baseUrl = config.baseUrl || 'https://ff.io/api/v2';\n    }\n\n    /**\n     * Generate HMAC-SHA256 signature for API authentication\n     */\n    private generateSignature(body: string): string {\n        return crypto\n            .createHmac('sha256', this.apiSecret)\n            .update(body)\n            .digest('hex');\n    }\n\n    /**\n     * Make authenticated request to FixedFloat API\n     */\n    private async request<T>(endpoint: string, data: object): Promise<T> {\n        const body = JSON.stringify(data);\n        const signature = this.generateSignature(body);\n\n        const response = await fetch(`${this.baseUrl}${endpoint}`, {\n            method: 'POST',\n            headers: {\n                'Content-Type': 'application/json',\n                'X-API-KEY': this.apiKey,\n                'X-API-SIGN': signature,\n            },\n            body,\n        });\n\n        if (!response.ok) {\n            throw new Error(`FixedFloat API error: ${response.status} ${response.statusText}`);\n        }\n\n        const result = await response.json();\n\n        if (result.code !== 0) {\n            throw new Error(`FixedFloat error: ${result.msg} (code: ${result.code})`);\n        }\n\n        return result as T;\n    }\n\n    // ============ Price/Quote Methods ============\n\n    /**\n     * Get exchange rate and quote for ZEC ‚Üí Lightning\n     * @param zecAmount Amount in ZEC (e.g., 1.5)\n     */\n    async getZecToLightningQuote(zecAmount: number): Promise<SwapQuote> {\n        const response = await this.request<FixedFloatPriceResponse>('/price', {\n            fromCcy: 'ZEC',\n            toCcy: 'BTCLN',\n            amount: zecAmount.toString(),\n            direction: 'from', // We specify the \"from\" amount\n            type: 'float',     // Float rate (or 'fixed' for locked rate)\n        });\n\n        if (response.data.errors && response.data.errors.length > 0) {\n            throw new Error(`Quote error: ${response.data.errors.join(', ')}`);\n        }\n\n        return {\n            id: crypto.randomUUID(),\n            from: {\n                currency: 'ZEC',\n                amount: response.data.from.amount,\n                rate: response.data.from.rate,\n            },\n            to: {\n                currency: 'BTCLN',\n                amount: response.data.to.amount,\n                rate: response.data.to.rate,\n            },\n            minerFee: '0', // Included in rate\n            serviceFee: '0',\n            expiresAt: Date.now() + 30 * 60 * 1000, // 30 min validity\n        };\n    }\n\n    /**\n     * Get exchange rate and quote for Lightning ‚Üí ZEC\n     * @param satoshis Amount in satoshis\n     */\n    async getLightningToZecQuote(satoshis: number): Promise<SwapQuote> {\n        const btcAmount = satoshis / 100_000_000;\n\n        const response = await this.request<FixedFloatPriceResponse>('/price', {\n            fromCcy: 'BTCLN',\n            toCcy: 'ZEC',\n            amount: btcAmount.toString(),\n            direction: 'from',\n            type: 'float',\n        });\n\n        if (response.data.errors && response.data.errors.length > 0) {\n            throw new Error(`Quote error: ${response.data.errors.join(', ')}`);\n        }\n\n        return {\n            id: crypto.randomUUID(),\n            from: {\n                currency: 'BTCLN',\n                amount: response.data.from.amount,\n                rate: response.data.from.rate,\n            },\n            to: {\n                currency: 'ZEC',\n                amount: response.data.to.amount,\n                rate: response.data.to.rate,\n            },\n            minerFee: '0',\n            serviceFee: '0',\n            expiresAt: Date.now() + 30 * 60 * 1000,\n        };\n    }\n\n    // ============ Order Methods ============\n\n    /**\n     * Create ZEC ‚Üí Lightning swap order\n     * User sends ZEC to deposit address, receives Lightning payment\n     * \n     * @param zecAmount Amount in ZEC to swap\n     * @param lightningInvoice BOLT11 invoice to receive BTC\n     * @param refundAddress Optional ZEC address for refunds\n     */\n    async createZecToLightningOrder(\n        zecAmount: number,\n        lightningInvoice: string,\n        refundAddress?: string\n    ): Promise<SwapOrder> {\n        const response = await this.request<FixedFloatOrderResponse>('/order', {\n            fromCcy: 'ZEC',\n            toCcy: 'BTCLN',\n            amount: zecAmount.toString(),\n            direction: 'from',\n            type: 'float',\n            toAddress: lightningInvoice,\n            refundAddress: refundAddress,\n        });\n\n        return this.mapOrderResponse(response);\n    }\n\n    /**\n     * Create Lightning ‚Üí ZEC swap order\n     * User pays Lightning invoice, receives ZEC to address\n     * \n     * @param satoshis Amount in satoshis to swap\n     * @param zecAddress ZEC address to receive (use z-address for privacy!)\n     */\n    async createLightningToZecOrder(\n        satoshis: number,\n        zecAddress: string\n    ): Promise<SwapOrder> {\n        const btcAmount = satoshis / 100_000_000;\n\n        const response = await this.request<FixedFloatOrderResponse>('/order', {\n            fromCcy: 'BTCLN',\n            toCcy: 'ZEC',\n            amount: btcAmount.toString(),\n            direction: 'from',\n            type: 'float',\n            toAddress: zecAddress,\n        });\n\n        return this.mapOrderResponse(response);\n    }\n\n    // ============ Status Methods ============\n\n    /**\n     * Get current status of a swap order\n     * @param orderId The order ID returned from createOrder\n     * @param token The token returned from createOrder (for security)\n     */\n    async getOrderStatus(orderId: string, token: string): Promise<SwapOrder> {\n        const response = await this.request<FixedFloatOrderResponse>('/status', {\n            id: orderId,\n            token: token,\n        });\n\n        return this.mapOrderResponse(response);\n    }\n\n    /**\n     * Poll order status until complete or timeout\n     * @param orderId Order ID\n     * @param token Order token\n     * @param timeoutMs Timeout in milliseconds (default: 60 min)\n     * @param pollIntervalMs Poll interval (default: 15 sec)\n     * @param onStatusChange Callback on status change\n     */\n    async waitForOrderComplete(\n        orderId: string,\n        token: string,\n        timeoutMs: number = 60 * 60 * 1000,\n        pollIntervalMs: number = 15_000,\n        onStatusChange?: (order: SwapOrder) => void\n    ): Promise<SwapOrder> {\n        const startTime = Date.now();\n        let lastStatus: SwapStatus | null = null;\n\n        while (Date.now() - startTime < timeoutMs) {\n            const order = await this.getOrderStatus(orderId, token);\n\n            if (lastStatus !== order.status) {\n                lastStatus = order.status;\n                onStatusChange?.(order);\n            }\n\n            if (order.status === 'done') {\n                return order;\n            }\n\n            if (order.status === 'expired' || order.status === 'emergency') {\n                throw new Error(`Order ${orderId} failed with status: ${order.status}`);\n            }\n\n            await this.sleep(pollIntervalMs);\n        }\n\n        throw new Error(`Order ${orderId} timed out after ${timeoutMs}ms`);\n    }\n\n    // ============ Helper Methods ============\n\n    /**\n     * Map FixedFloat API response to our SwapOrder type\n     */\n    private mapOrderResponse(response: FixedFloatOrderResponse): SwapOrder {\n        const data = response.data;\n\n        return {\n            id: data.id,\n            status: data.status as SwapStatus,\n            from: {\n                currency: data.from.currency as 'ZEC' | 'BTCLN',\n                amount: data.from.amount,\n                address: data.from.address,\n                txId: data.from.tx.id || undefined,\n                confirmations: data.from.tx.confirmations || undefined,\n            },\n            to: {\n                currency: data.to.currency as 'ZEC' | 'BTCLN',\n                amount: data.to.amount,\n                address: data.to.address,\n                txId: data.to.tx.id || undefined,\n            },\n            createdAt: data.time.reg * 1000,\n            expiresAt: data.time.expiration * 1000,\n            emergency: data.back.address ? {\n                address: data.back.address,\n            } : undefined,\n        };\n    }\n\n    /**\n     * Convert FixedFloat status to simple status\n     */\n    static toSimpleStatus(status: SwapStatus): SwapStatusSimple {\n        const statusMap: Record<SwapStatus, SwapStatusSimple> = {\n            'new': 'waiting',\n            'pending': 'confirming',\n            'exchange': 'exchanging',\n            'withdraw': 'sending',\n            'done': 'complete',\n            'expired': 'failed',\n            'emergency': 'failed',\n        };\n        return statusMap[status] || 'waiting';\n    }\n\n    /**\n     * Sleep helper\n     */\n    private sleep(ms: number): Promise<void> {\n        return new Promise(resolve => setTimeout(resolve, ms));\n    }\n\n    // ============ Validation Methods ============\n\n    /**\n     * Validate a ZEC address\n     * t-addresses start with 't1' (mainnet) or 'tm' (testnet)\n     * z-addresses start with 'zs' (mainnet) or 'ztestsapling' (testnet)\n     */\n    static isValidZecAddress(address: string): boolean {\n        // Transparent addresses\n        if (address.startsWith('t1') || address.startsWith('t3')) {\n            return address.length === 35;\n        }\n        // Shielded addresses (recommended for privacy)\n        if (address.startsWith('zs')) {\n            return address.length === 78;\n        }\n        // Testnet addresses\n        if (address.startsWith('tm') || address.startsWith('ztestsapling')) {\n            return true;\n        }\n        return false;\n    }\n\n    /**\n     * Check if address is shielded (z-address)\n     * Shielded addresses provide better privacy\n     */\n    static isShieldedAddress(address: string): boolean {\n        return address.startsWith('zs') || address.startsWith('ztestsapling');\n    }\n\n    /**\n     * Validate a Lightning invoice (BOLT11)\n     */\n    static isValidLightningInvoice(invoice: string): boolean {\n        const lowerInvoice = invoice.toLowerCase();\n        // Mainnet invoices start with 'lnbc'\n        // Testnet invoices start with 'lntb'\n        // Regtest invoices start with 'lnbcrt'\n        return lowerInvoice.startsWith('lnbc') ||\n            lowerInvoice.startsWith('lntb') ||\n            lowerInvoice.startsWith('lnbcrt');\n    }\n}\n\nexport default FixedFloatClient;\n"],"names":[],"mappings":"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","ignoreList":[1,2,3,4,5,6,7]}