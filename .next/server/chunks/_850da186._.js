module.exports=[741495,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},741143,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},934818,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},961434,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},134551,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},818310,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},474621,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BigIntBufferUtils=void 0;let n=e.r(500874);r.BigIntBufferUtils={toBuffer:(e,t="be",r)=>{let a=Array(r);for(let t=0;t<r;t++)a[t]=Number(255n&e),e>>=8n;let i=n.Buffer.from(a);return"be"===t&&i.reverse(),i},fromBuffer:(e,t="be")=>{if("le"===t){let t=n.Buffer.alloc(e.length);e.copy(t),t.reverse(),e=t}let r=0n;for(let t of e)r<<=8n,r|=BigInt(t);return r}}},970273,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StatePredictorUtils=void 0;let n=e.r(500874),a=e.r(474621);class i{static gtBuffer(e,t){for(let r=0;r<e.length;r++){if(e[r]>t[r])return!0;if(e[r]<t[r])break}return!1}static divInPlace(e,t){let r=0;for(let n=0;n<32;n++){let a=e[n]+r,i=Math.floor(a/t);r=a%t*256,e[n]=i}}static addInPlace(e,t){let r=0;for(let n=0;n<32;n++){let a=31-n,i=e[a]+t[a]+r,s=255&i;r=i>>8,e[a]=s}}static nbitsToTarget(e){let t=n.Buffer.alloc(32,0),r=[e>>16&127,e>>8&255,255&e],a=32-(e>>24&255);for(let e=0;e<3;e++)a+e<32&&(t[a+e]=r[e]);return t}static getDifficulty(e){let t=i.nbitsToTarget(e),r=0;for(let e=0;e<32;e++)if(t[e]>0){r=e;break}let a=32-r-3,s=0;for(let e=0;e<3;e++)s|=t[r+e]<<(2-e)*8;let o=n.Buffer.from("00000000FFFF0000000000000000000000000000000000000000000000000000","hex");i.divInPlace(o,s);let l=n.Buffer.alloc(32,0);for(let e=0;e<32-a;e++)l[e+a]=o[e];return l}static getChainwork(e){let t=i.nbitsToTarget(e),r=a.BigIntBufferUtils.fromBuffer(t);return a.BigIntBufferUtils.toBuffer((0xffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffffn&~r)/(r+1n)+1n,"be",32)}}r.StatePredictorUtils=i,i.DIFF_ADJUSTMENT_PERIOD=2016},721365,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},706889,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ChainEvent=void 0,r.ChainEvent=class{}},84150,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SwapEvent=r.SwapEventType=void 0;let n=e.r(706889);!function(e){e[e.INITIALIZE=0]="INITIALIZE",e[e.REFUND=1]="REFUND",e[e.CLAIM=2]="CLAIM"}(r.SwapEventType||(r.SwapEventType={}));class a extends n.ChainEvent{constructor(e){super(),this.escrowHash=e}}r.SwapEvent=a},943193,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ClaimEvent=void 0;let n=e.r(84150);class a extends n.SwapEvent{constructor(e,t){super(e),this.result=t}}r.ClaimEvent=a},641467,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.InitializeEvent=void 0;let n=e.r(84150);class a extends n.SwapEvent{constructor(e,t,r){super(e),this.swapType=t,this.swapData=r}}r.InitializeEvent=a},66131,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RefundEvent=void 0;let n=e.r(84150);class a extends n.SwapEvent{}r.RefundEvent=a},146113,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Lockable=void 0,r.Lockable=class{constructor(){this.lockedTill=0,this.lockNonce=0}lock(e){if(this.isLocked())return null;this.lockedTill=Date.now()+1e3*e,this.lockNonce++;let t=this.lockNonce;return()=>this.lockNonce===t&&(this.lockedTill=0,!0)}isLocked(){return this.lockedTill>Date.now()}}},738650,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},856015,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},990411,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},83797,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SwapData=void 0;class n{static deserialize(e){let t=n.deserializers[e.type];if(null!=t)return new t(e);throw Error(`No deserializer found for swap data type: ${e.type}`)}}r.SwapData=n,n.deserializers={}},647330,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ChainSwapType=void 0,function(e){e[e.HTLC=0]="HTLC",e[e.CHAIN=1]="CHAIN",e[e.CHAIN_NONCED=2]="CHAIN_NONCED",e[e.CHAIN_TXID=3]="CHAIN_TXID"}(r.ChainSwapType||(r.ChainSwapType={}))},154224,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SwapCommitStateType=void 0,function(e){e[e.EXPIRED=0]="EXPIRED",e[e.NOT_COMMITED=1]="NOT_COMMITED",e[e.COMMITED=2]="COMMITED",e[e.PAID=3]="PAID",e[e.REFUNDABLE=4]="REFUNDABLE"}(r.SwapCommitStateType||(r.SwapCommitStateType={}))},558120,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SignatureVerificationError=void 0;class n extends Error{constructor(e){super(e),Object.setPrototypeOf(this,n.prototype)}}r.SignatureVerificationError=n},680592,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.CannotInitializeATAError=void 0;class n extends Error{constructor(e){super(e),Object.setPrototypeOf(this,n.prototype)}}r.CannotInitializeATAError=n},204626,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SwapDataVerificationError=void 0;class n extends Error{constructor(e){super(e),Object.setPrototypeOf(this,n.prototype)}}r.SwapDataVerificationError=n},362457,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},223961,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},589026,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BitcoinNetwork=void 0,function(e){e[e.MAINNET=0]="MAINNET",e[e.TESTNET=1]="TESTNET",e[e.TESTNET4=2]="TESTNET4",e[e.REGTEST=3]="REGTEST"}(r.BitcoinNetwork||(r.BitcoinNetwork={}))},35281,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},555526,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},121316,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpvVaultData=void 0;class n{static deserialize(e){if(null!=n.deserializers[e.type])return new n.deserializers[e.type](e)}calculateStateAfter(e){let t=[...this.getBalances()],r=this.getWithdrawalCount(),n=this.getUtxo();for(let a of e){if(a.getSpentVaultUtxo()!==n)throw Error("Invalid transaction, doesn't spend prior vault UTXO!");a.getTotalOutput().forEach((e,r)=>{if(null==t[r])throw Error("Tried to withdraw non-existing token!");if(t[r].rawAmount-=e,t[r].rawAmount<0n)throw Error("Prior transaction withdrew more than available in vault")}),n=a.getCreatedVaultUtxo(),r++}return t.forEach(e=>{e.scaledAmount=e.rawAmount*e.multiplier}),{withdrawalCount:r,balances:t}}}r.SpvVaultData=n,n.deserializers={}},255532,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpvWithdrawalStateType=void 0,function(e){e[e.CLOSED=-1]="CLOSED",e[e.NOT_FOUND=0]="NOT_FOUND",e[e.CLAIMED=1]="CLAIMED",e[e.FRONTED=2]="FRONTED"}(r.SpvWithdrawalStateType||(r.SpvWithdrawalStateType={}))},476403,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpvWithdrawalTransactionData=void 0;let n=e.r(500874);class a{static deserialize(e){if(null!=a.deserializers[e.type])return new a.deserializers[e.type](e)}constructor(e){let t;if(e.ins.length<2)throw Error("Need at least 2 inputs");if(e.outs.length<2)throw Error("Need at least 2 outputs");let r=BigInt(e.ins[0].sequence),a=BigInt(e.ins[1].sequence);if((2147483648n&r)!=2147483648n||(2147483648n&a)!=2147483648n)throw Error("nSequence0 high bit not set!");let i=e.locktime+1e9;if(i>=0x100000000)throw Error("Execution expiry overflow");let s=e.outs[1],o=n.Buffer.from(s.scriptPubKey.hex,"hex");if(0===o.length)throw Error("Output 1 empty script");if(106!==o.at(0))throw Error("Output 1 is not OP_RETURN");if(0===o.at(1))throw Error("Output 1 OP_RETURN followed by OP_0");if(76===o.at(1)){let e=o.at(2);if((t=o.subarray(3,3+e)).length!==e)throw Error("Output 1 OP_RETURN data length mismatch!")}else if(75>=o.at(1)){let e=o.at(1);if((t=o.subarray(2,2+e)).length!==e)throw Error("Output 1 OP_RETURN data length mismatch!")}else throw Error("Output 1 invalid push opcode");let l=this.fromOpReturnData(t);this.recipient=l.recipient,this.rawAmounts=l.rawAmounts,this.callerFeeRate=1048575n&r,this.frontingFeeRate=r>>10n&1047552n|a>>20n&1023n,this.executionFeeRate=1048575n&a,this.executionHash=l.executionHash,this.executionExpiry=i,this.btcTx=e}serialize(){return this.btcTx}getRecipient(){return this.recipient}getOutputWithoutFees(){return this.rawAmounts}getCallerFee(){return this.rawAmounts.map(e=>e*this.callerFeeRate/100000n)}getFrontingFee(){return this.rawAmounts.map(e=>e*this.frontingFeeRate/100000n)}getExecutionFee(){return[this.rawAmounts[0]*this.executionFeeRate/100000n]}getTotalOutput(){let e=[...this.getOutputWithoutFees()],t=this.getCallerFee();null!=t&&t.forEach((t,r)=>{if(null!=t&&0n!==t){if(null==e[r])throw Error("Caller fee token out of bounds");e[r]+=t}});let r=this.getFrontingFee();null!=r&&r.forEach((t,r)=>{if(null!=t&&0n!==t){if(null==e[r])throw Error("Fronting fee token out of bounds");e[r]+=t}});let n=this.getExecutionFee();return null!=n&&n.forEach((t,r)=>{if(null!=t&&0n!==t){if(null==e[r])throw Error("Execution fee token out of bounds");e[r]+=t}}),e.forEach((e,t)=>{if(e>=2n**64n)throw Error("Token "+t+" amount out of bounds")}),e}getExecutionData(){return null==this.executionHash?null:{executionHash:this.executionHash,executionExpiry:this.executionExpiry}}getTxId(){return this.btcTx.txid}getSpentVaultUtxo(){let e=this.btcTx.ins[0];return e.txid+":"+e.vout}getCreatedVaultUtxo(){return this.getTxId()+":0"}getNewVaultScript(){return n.Buffer.from(this.btcTx.outs[0].scriptPubKey.hex,"hex")}getNewVaultBtcAmount(){return this.btcTx.outs[0].value}}r.SpvWithdrawalTransactionData=a,a.deserializers={}},920209,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpvVaultEvent=r.SpvVaultEventType=void 0;let n=e.r(706889);!function(e){e[e.OPEN=0]="OPEN",e[e.DEPOSIT=1]="DEPOSIT",e[e.CLAIM=2]="CLAIM",e[e.CLOSE=3]="CLOSE",e[e.FRONT=4]="FRONT"}(r.SpvVaultEventType||(r.SpvVaultEventType={}));class a extends n.ChainEvent{constructor(e,t){super(),this.owner=e,this.vaultId=t}}r.SpvVaultEvent=a},347107,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpvVaultCloseEvent=void 0;let n=e.r(920209);class a extends n.SpvVaultEvent{constructor(e,t,r,a){super(e,t),this.eventType=n.SpvVaultEventType.CLOSE,this.btcTxId=r,this.error=a}}r.SpvVaultCloseEvent=a},766175,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpvVaultClaimEvent=void 0;let n=e.r(920209);class a extends n.SpvVaultEvent{constructor(e,t,r,a,i,s,o,l,c){super(e,t),this.eventType=n.SpvVaultEventType.CLAIM,this.btcTxId=r,this.recipient=a,this.executionHash=i,this.amounts=s,this.caller=o,this.frontingAddress=l,this.withdrawCount=c}}r.SpvVaultClaimEvent=a},533880,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpvVaultDepositEvent=void 0;let n=e.r(920209);class a extends n.SpvVaultEvent{constructor(e,t,r,a){super(e,t),this.eventType=n.SpvVaultEventType.DEPOSIT,this.amounts=r,this.depositCount=a}}r.SpvVaultDepositEvent=a},86199,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpvVaultOpenEvent=void 0;let n=e.r(920209);class a extends n.SpvVaultEvent{constructor(e,t,r,a){super(e,t),this.eventType=n.SpvVaultEventType.OPEN,this.btcTxId=r,this.vout=a}}r.SpvVaultOpenEvent=a},391532,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpvVaultFrontEvent=void 0;let n=e.r(920209);class a extends n.SpvVaultEvent{constructor(e,t,r,a,i,s,o){super(e,t),this.eventType=n.SpvVaultEventType.FRONT,this.btcTxId=r,this.recipient=a,this.executionHash=i,this.amounts=s,this.frontingAddress=o}}r.SpvVaultFrontEvent=a},154585,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),a(e.r(741495),r),a(e.r(741143),r),a(e.r(934818),r),a(e.r(961434),r),a(e.r(134551),r),a(e.r(818310),r),a(e.r(970273),r),a(e.r(721365),r),a(e.r(943193),r),a(e.r(641467),r),a(e.r(66131),r),a(e.r(84150),r),a(e.r(146113),r),a(e.r(738650),r),a(e.r(856015),r),a(e.r(990411),r),a(e.r(83797),r),a(e.r(647330),r),a(e.r(154224),r),a(e.r(558120),r),a(e.r(680592),r),a(e.r(204626),r),a(e.r(362457),r),a(e.r(223961),r),a(e.r(474621),r),a(e.r(589026),r),a(e.r(35281),r),a(e.r(555526),r),a(e.r(121316),r),a(e.r(255532),r),a(e.r(476403),r),a(e.r(706889),r),a(e.r(920209),r),a(e.r(347107),r),a(e.r(766175),r),a(e.r(533880),r),a(e.r(86199),r),a(e.r(391532),r)},258093,(e,t,r)=>{"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function a(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}Object.defineProperty(r,"__esModule",{value:!0}),r.anumber=n,r.abytes=a,r.ahash=function(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)},r.aexists=function(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")},r.aoutput=function(e,t){a(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}},963412,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=void 0;let n=e.r(666680);r.crypto=n&&"object"==typeof n&&"webcrypto"in n?n.webcrypto:n&&"object"==typeof n&&"randomBytes"in n?n:void 0},260003,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Hash=r.nextTick=r.byteSwapIfBE=r.isLE=void 0,r.isBytes=function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name},r.u8=function(e){return new Uint8Array(e.buffer,e.byteOffset,e.byteLength)},r.u32=function(e){return new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4))},r.createView=function(e){return new DataView(e.buffer,e.byteOffset,e.byteLength)},r.rotr=function(e,t){return e<<32-t|e>>>t},r.rotl=function(e,t){return e<<t|e>>>32-t>>>0},r.byteSwap=i,r.byteSwap32=function(e){for(let t=0;t<e.length;t++)e[t]=i(e[t])},r.bytesToHex=function(e){if((0,a.abytes)(e),s)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=o[e[r]];return t},r.hexToBytes=function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(s)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,a=0;t<r;t++,a+=2){let r=c(e.charCodeAt(a)),i=c(e.charCodeAt(a+1));if(void 0===r||void 0===i)throw Error('hex string expected, got non-hex character "'+(e[a]+e[a+1])+'" at index '+a);n[t]=16*r+i}return n},r.asyncLoop=u,r.utf8ToBytes=d,r.toBytes=h,r.concatBytes=function(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];(0,a.abytes)(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let a=e[t];r.set(a,n),n+=a.length}return r},r.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==({}).toString.call(t))throw Error("Options should be object or undefined");return Object.assign(e,t)},r.wrapConstructor=function(e){let t=t=>e().update(h(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},r.wrapConstructorWithOpts=function(e){let t=(t,r)=>e(r).update(h(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.wrapXOFConstructorWithOpts=function(e){let t=(t,r)=>e(r).update(h(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.randomBytes=function(e=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(e));if(n.crypto&&"function"==typeof n.crypto.randomBytes)return Uint8Array.from(n.crypto.randomBytes(e));throw Error("crypto.getRandomValues must be defined")};let n=e.r(963412),a=e.r(258093);function i(e){return e<<24&0xff000000|e<<8&0xff0000|e>>>8&65280|e>>>24&255}r.isLE=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],r.byteSwapIfBE=r.isLE?e=>e:e=>i(e);let s="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,o=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),l={_0:48,_9:57,A:65,F:70,a:97,f:102};function c(e){return e>=l._0&&e<=l._9?e-l._0:e>=l.A&&e<=l.F?e-(l.A-10):e>=l.a&&e<=l.f?e-(l.a-10):void 0}async function u(e,t,n){let a=Date.now();for(let i=0;i<e;i++){n(i);let e=Date.now()-a;e>=0&&e<t||(await (0,r.nextTick)(),a+=e)}}function d(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function h(e){return"string"==typeof e&&(e=d(e)),(0,a.abytes)(e),e}r.nextTick=async()=>{},r.Hash=class{clone(){return this._cloneInto()}}},49760,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HashMD=void 0,r.setBigUint64=i,r.Chi=function(e,t,r){return e&t^~e&r},r.Maj=function(e,t,r){return e&t^e&r^t&r};let n=e.r(258093),a=e.r(260003);function i(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let a=BigInt(32),i=BigInt(0xffffffff),s=Number(r>>a&i),o=Number(r&i),l=4*!!n,c=4*!n;e.setUint32(t+l,s,n),e.setUint32(t+c,o,n)}class s extends a.Hash{constructor(e,t,r,n){super(),this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.buffer=new Uint8Array(e),this.view=(0,a.createView)(this.buffer)}update(e){(0,n.aexists)(this);let{view:t,buffer:r,blockLen:i}=this,s=(e=(0,a.toBytes)(e)).length;for(let n=0;n<s;){let o=Math.min(i-this.pos,s-n);if(o===i){let t=(0,a.createView)(e);for(;i<=s-n;n+=i)this.process(t,n);continue}r.set(e.subarray(n,n+o),this.pos),this.pos+=o,n+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.aexists)(this),(0,n.aoutput)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:s,isLE:o}=this,{pos:l}=this;t[l++]=128,this.buffer.subarray(l).fill(0),this.padOffset>s-l&&(this.process(r,0),l=0);for(let e=l;e<s;e++)t[e]=0;i(r,s-8,BigInt(8*this.length),o),this.process(r,0);let c=(0,a.createView)(e),u=this.outputLen;if(u%4)throw Error("_sha2: outputLen should be aligned to 32bit");let d=u/4,h=this.get();if(d>h.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<d;e++)c.setUint32(4*e,h[e],o)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:a,destroyed:i,pos:s}=this;return e.length=n,e.pos=s,e.finished=a,e.destroyed=i,n%t&&e.buffer.set(r),e}}r.HashMD=s},737898,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sha224=r.sha256=r.SHA256=void 0;let n=e.r(49760),a=e.r(260003),i=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),s=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),o=new Uint32Array(64);class l extends n.HashMD{constructor(e=32){super(64,e,8,!1),this.A=0|s[0],this.B=0|s[1],this.C=0|s[2],this.D=0|s[3],this.E=0|s[4],this.F=0|s[5],this.G=0|s[6],this.H=0|s[7]}get(){let{A:e,B:t,C:r,D:n,E:a,F:i,G:s,H:o}=this;return[e,t,r,n,a,i,s,o]}set(e,t,r,n,a,i,s,o){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|a,this.F=0|i,this.G=0|s,this.H=0|o}process(e,t){for(let r=0;r<16;r++,t+=4)o[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=o[e-15],r=o[e-2],n=(0,a.rotr)(t,7)^(0,a.rotr)(t,18)^t>>>3,i=(0,a.rotr)(r,17)^(0,a.rotr)(r,19)^r>>>10;o[e]=i+o[e-7]+n+o[e-16]|0}let{A:r,B:s,C:l,D:c,E:u,F:d,G:h,H:f}=this;for(let e=0;e<64;e++){let t=f+((0,a.rotr)(u,6)^(0,a.rotr)(u,11)^(0,a.rotr)(u,25))+(0,n.Chi)(u,d,h)+i[e]+o[e]|0,p=((0,a.rotr)(r,2)^(0,a.rotr)(r,13)^(0,a.rotr)(r,22))+(0,n.Maj)(r,s,l)|0;f=h,h=d,d=u,u=c+t|0,c=l,l=s,s=r,r=t+p|0}r=r+this.A|0,s=s+this.B|0,l=l+this.C|0,c=c+this.D|0,u=u+this.E|0,d=d+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(r,s,l,c,u,d,h,f)}roundClean(){o.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}r.SHA256=l;class c extends l{constructor(){super(28),this.A=-0x3efa6128,this.B=0x367cd507,this.C=0x3070dd17,this.D=-0x8f1a6c7,this.E=-4191439,this.F=0x68581511,this.G=0x64f98fa7,this.H=-0x4105b05c}}r.sha256=(0,a.wrapConstructor)(()=>new l),r.sha224=(0,a.wrapConstructor)(()=>new c)},371719,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.add5L=r.add5H=r.add4H=r.add4L=r.add3H=r.add3L=r.rotlBL=r.rotlBH=r.rotlSL=r.rotlSH=r.rotr32L=r.rotr32H=r.rotrBL=r.rotrBH=r.rotrSL=r.rotrSH=r.shrSL=r.shrSH=r.toBig=void 0,r.fromBig=i,r.split=s,r.add=w;let n=BigInt(0x100000000-1),a=BigInt(32);function i(e,t=!1){return t?{h:Number(e&n),l:Number(e>>a&n)}:{h:0|Number(e>>a&n),l:0|Number(e&n)}}function s(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let a=0;a<e.length;a++){let{h:s,l:o}=i(e[a],t);[r[a],n[a]]=[s,o]}return[r,n]}let o=(e,t)=>BigInt(e>>>0)<<a|BigInt(t>>>0);r.toBig=o;let l=(e,t,r)=>e>>>r;r.shrSH=l;let c=(e,t,r)=>e<<32-r|t>>>r;r.shrSL=c;let u=(e,t,r)=>e>>>r|t<<32-r;r.rotrSH=u;let d=(e,t,r)=>e<<32-r|t>>>r;r.rotrSL=d;let h=(e,t,r)=>e<<64-r|t>>>r-32;r.rotrBH=h;let f=(e,t,r)=>e>>>r-32|t<<64-r;r.rotrBL=f;let p=(e,t)=>t;r.rotr32H=p;let g=(e,t)=>e;r.rotr32L=g;let m=(e,t,r)=>e<<r|t>>>32-r;r.rotlSH=m;let y=(e,t,r)=>t<<r|e>>>32-r;r.rotlSL=y;let b=(e,t,r)=>t<<r-32|e>>>64-r;r.rotlBH=b;let _=(e,t,r)=>e<<r-32|t>>>64-r;function w(e,t,r,n){let a=(t>>>0)+(n>>>0);return{h:e+r+(a/0x100000000|0)|0,l:0|a}}r.rotlBL=_;let E=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);r.add3L=E;let v=(e,t,r,n)=>t+r+n+(e/0x100000000|0)|0;r.add3H=v;let S=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);r.add4L=S;let x=(e,t,r,n,a)=>t+r+n+a+(e/0x100000000|0)|0;r.add4H=x;let T=(e,t,r,n,a)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(a>>>0);r.add5L=T;let A=(e,t,r,n,a,i)=>t+r+n+a+i+(e/0x100000000|0)|0;r.add5H=A,r.default={fromBig:i,split:s,toBig:o,shrSH:l,shrSL:c,rotrSH:u,rotrSL:d,rotrBH:h,rotrBL:f,rotr32H:p,rotr32L:g,rotlSH:m,rotlSL:y,rotlBH:b,rotlBL:_,add:w,add3L:E,add3H:v,add4L:S,add4H:x,add5H:A,add5L:T}},187920,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sha384=r.sha512_256=r.sha512_224=r.sha512=r.SHA384=r.SHA512_256=r.SHA512_224=r.SHA512=void 0;let n=e.r(49760),a=e.r(371719),i=e.r(260003),[s,o]=a.default.split(["0x428a2f98d728ae22","0x7137449123ef65cd","0xb5c0fbcfec4d3b2f","0xe9b5dba58189dbbc","0x3956c25bf348b538","0x59f111f1b605d019","0x923f82a4af194f9b","0xab1c5ed5da6d8118","0xd807aa98a3030242","0x12835b0145706fbe","0x243185be4ee4b28c","0x550c7dc3d5ffb4e2","0x72be5d74f27b896f","0x80deb1fe3b1696b1","0x9bdc06a725c71235","0xc19bf174cf692694","0xe49b69c19ef14ad2","0xefbe4786384f25e3","0x0fc19dc68b8cd5b5","0x240ca1cc77ac9c65","0x2de92c6f592b0275","0x4a7484aa6ea6e483","0x5cb0a9dcbd41fbd4","0x76f988da831153b5","0x983e5152ee66dfab","0xa831c66d2db43210","0xb00327c898fb213f","0xbf597fc7beef0ee4","0xc6e00bf33da88fc2","0xd5a79147930aa725","0x06ca6351e003826f","0x142929670a0e6e70","0x27b70a8546d22ffc","0x2e1b21385c26c926","0x4d2c6dfc5ac42aed","0x53380d139d95b3df","0x650a73548baf63de","0x766a0abb3c77b2a8","0x81c2c92e47edaee6","0x92722c851482353b","0xa2bfe8a14cf10364","0xa81a664bbc423001","0xc24b8b70d0f89791","0xc76c51a30654be30","0xd192e819d6ef5218","0xd69906245565a910","0xf40e35855771202a","0x106aa07032bbd1b8","0x19a4c116b8d2d0c8","0x1e376c085141ab53","0x2748774cdf8eeb99","0x34b0bcb5e19b48a8","0x391c0cb3c5c95a63","0x4ed8aa4ae3418acb","0x5b9cca4f7763e373","0x682e6ff3d6b2b8a3","0x748f82ee5defb2fc","0x78a5636f43172f60","0x84c87814a1f0ab72","0x8cc702081a6439ec","0x90befffa23631e28","0xa4506cebde82bde9","0xbef9a3f7b2c67915","0xc67178f2e372532b","0xca273eceea26619c","0xd186b8c721c0c207","0xeada7dd6cde0eb1e","0xf57d4f7fee6ed178","0x06f067aa72176fba","0x0a637dc5a2c898a6","0x113f9804bef90dae","0x1b710b35131c471b","0x28db77f523047d84","0x32caab7b40c72493","0x3c9ebe0a15c9bebc","0x431d67c49c100d4c","0x4cc5d4becb3e42b6","0x597f299cfc657e2a","0x5fcb6fab3ad6faec","0x6c44198c4a475817"].map(e=>BigInt(e))),l=new Uint32Array(80),c=new Uint32Array(80);class u extends n.HashMD{constructor(e=64){super(128,e,16,!1),this.Ah=0x6a09e667,this.Al=-0xc4336f8,this.Bh=-0x4498517b,this.Bl=-0x7b3558c5,this.Ch=0x3c6ef372,this.Cl=-0x16b07d5,this.Dh=-0x5ab00ac6,this.Dl=0x5f1d36f1,this.Eh=0x510e527f,this.El=-0x52197d2f,this.Fh=-0x64fa9774,this.Fl=0x2b3e6c1f,this.Gh=0x1f83d9ab,this.Gl=-0x4be4295,this.Hh=0x5be0cd19,this.Hl=0x137e2179}get(){let{Ah:e,Al:t,Bh:r,Bl:n,Ch:a,Cl:i,Dh:s,Dl:o,Eh:l,El:c,Fh:u,Fl:d,Gh:h,Gl:f,Hh:p,Hl:g}=this;return[e,t,r,n,a,i,s,o,l,c,u,d,h,f,p,g]}set(e,t,r,n,a,i,s,o,l,c,u,d,h,f,p,g){this.Ah=0|e,this.Al=0|t,this.Bh=0|r,this.Bl=0|n,this.Ch=0|a,this.Cl=0|i,this.Dh=0|s,this.Dl=0|o,this.Eh=0|l,this.El=0|c,this.Fh=0|u,this.Fl=0|d,this.Gh=0|h,this.Gl=0|f,this.Hh=0|p,this.Hl=0|g}process(e,t){for(let r=0;r<16;r++,t+=4)l[r]=e.getUint32(t),c[r]=e.getUint32(t+=4);for(let e=16;e<80;e++){let t=0|l[e-15],r=0|c[e-15],n=a.default.rotrSH(t,r,1)^a.default.rotrSH(t,r,8)^a.default.shrSH(t,r,7),i=a.default.rotrSL(t,r,1)^a.default.rotrSL(t,r,8)^a.default.shrSL(t,r,7),s=0|l[e-2],o=0|c[e-2],u=a.default.rotrSH(s,o,19)^a.default.rotrBH(s,o,61)^a.default.shrSH(s,o,6),d=a.default.rotrSL(s,o,19)^a.default.rotrBL(s,o,61)^a.default.shrSL(s,o,6),h=a.default.add4L(i,d,c[e-7],c[e-16]),f=a.default.add4H(h,n,u,l[e-7],l[e-16]);l[e]=0|f,c[e]=0|h}let{Ah:r,Al:n,Bh:i,Bl:u,Ch:d,Cl:h,Dh:f,Dl:p,Eh:g,El:m,Fh:y,Fl:b,Gh:_,Gl:w,Hh:E,Hl:v}=this;for(let e=0;e<80;e++){let t=a.default.rotrSH(g,m,14)^a.default.rotrSH(g,m,18)^a.default.rotrBH(g,m,41),S=a.default.rotrSL(g,m,14)^a.default.rotrSL(g,m,18)^a.default.rotrBL(g,m,41),x=g&y^~g&_,T=m&b^~m&w,A=a.default.add5L(v,S,T,o[e],c[e]),k=a.default.add5H(A,E,t,x,s[e],l[e]),I=0|A,C=a.default.rotrSH(r,n,28)^a.default.rotrBH(r,n,34)^a.default.rotrBH(r,n,39),B=a.default.rotrSL(r,n,28)^a.default.rotrBL(r,n,34)^a.default.rotrBL(r,n,39),O=r&i^r&d^i&d,N=n&u^n&h^u&h;E=0|_,v=0|w,_=0|y,w=0|b,y=0|g,b=0|m,({h:g,l:m}=a.default.add(0|f,0|p,0|k,0|I)),f=0|d,p=0|h,d=0|i,h=0|u,i=0|r,u=0|n;let P=a.default.add3L(I,B,N);r=a.default.add3H(P,k,C,O),n=0|P}({h:r,l:n}=a.default.add(0|this.Ah,0|this.Al,0|r,0|n)),({h:i,l:u}=a.default.add(0|this.Bh,0|this.Bl,0|i,0|u)),({h:d,l:h}=a.default.add(0|this.Ch,0|this.Cl,0|d,0|h)),({h:f,l:p}=a.default.add(0|this.Dh,0|this.Dl,0|f,0|p)),({h:g,l:m}=a.default.add(0|this.Eh,0|this.El,0|g,0|m)),({h:y,l:b}=a.default.add(0|this.Fh,0|this.Fl,0|y,0|b)),({h:_,l:w}=a.default.add(0|this.Gh,0|this.Gl,0|_,0|w)),({h:E,l:v}=a.default.add(0|this.Hh,0|this.Hl,0|E,0|v)),this.set(r,n,i,u,d,h,f,p,g,m,y,b,_,w,E,v)}roundClean(){l.fill(0),c.fill(0)}destroy(){this.buffer.fill(0),this.set(0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0)}}r.SHA512=u;class d extends u{constructor(){super(28),this.Ah=-0x73c2c838,this.Al=0x19544da2,this.Bh=0x73e19966,this.Bl=-0x76232b2a,this.Ch=0x1dfab7ae,this.Cl=0x32ff9c82,this.Dh=0x679dd514,this.Dl=0x582f9fcf,this.Eh=0xf6d2b69,this.El=0x7bd44da8,this.Fh=0x77e36f73,this.Fl=0x4c48942,this.Gh=0x3f9d85a8,this.Gl=0x6a1d36c8,this.Hh=0x1112e6ad,this.Hl=-0x6e296d5f}}r.SHA512_224=d;class h extends u{constructor(){super(32),this.Ah=0x22312194,this.Al=-0x3d408d4,this.Bh=-0x60aaa05d,this.Bl=-0x37b39b3e,this.Ch=0x2393b86b,this.Cl=0x6f53b151,this.Dh=-0x69c788e7,this.Dl=0x5940eabd,this.Eh=-0x69d7c11e,this.El=-0x5771001d,this.Fh=-0x41a1e1db,this.Fl=0x53863992,this.Gh=0x2b0199fc,this.Gl=0x2c85b8aa,this.Hh=0xeb72ddc,this.Hl=-0x7e3ad35e}}r.SHA512_256=h;class f extends u{constructor(){super(48),this.Ah=-0x344462a3,this.Al=-0x3efa6128,this.Bh=0x629a292a,this.Bl=0x367cd507,this.Ch=-0x6ea6fea6,this.Cl=0x3070dd17,this.Dh=0x152fecd8,this.Dl=-0x8f1a6c7,this.Eh=0x67332667,this.El=-4191439,this.Fh=-0x714bb579,this.Fl=0x68581511,this.Gh=-0x24f3d1f3,this.Gl=0x64f98fa7,this.Hh=0x47b5481d,this.Hl=-0x4105b05c}}r.SHA384=f,r.sha512=(0,i.wrapConstructor)(()=>new u),r.sha512_224=(0,i.wrapConstructor)(()=>new d),r.sha512_256=(0,i.wrapConstructor)(()=>new h),r.sha384=(0,i.wrapConstructor)(()=>new f)},330541,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sha512_256=r.sha512_224=r.sha512=r.sha384=r.sha256=r.sha224=void 0;var n=e.r(737898);Object.defineProperty(r,"sha224",{enumerable:!0,get:function(){return n.sha224}}),Object.defineProperty(r,"sha256",{enumerable:!0,get:function(){return n.sha256}});var a=e.r(187920);Object.defineProperty(r,"sha384",{enumerable:!0,get:function(){return a.sha384}}),Object.defineProperty(r,"sha512",{enumerable:!0,get:function(){return a.sha512}}),Object.defineProperty(r,"sha512_224",{enumerable:!0,get:function(){return a.sha512_224}}),Object.defineProperty(r,"sha512_256",{enumerable:!0,get:function(){return a.sha512_256}})},824460,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hmac=r.HMAC=void 0;let n=e.r(258093),a=e.r(260003);class i extends a.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,n.ahash)(e);let r=(0,a.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return(0,n.aexists)(this),this.iHash.update(e),this}digestInto(e){(0,n.aexists)(this),(0,n.abytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:a,blockLen:i,outputLen:s}=this;return e.finished=n,e.destroyed=a,e.blockLen=i,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}r.HMAC=i,r.hmac=(e,t,r)=>new i(e,t).update(r).digest(),r.hmac.create=(e,t)=>new i(e,t)},703790,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.notImplemented=r.bitMask=void 0,r.isBytes=i,r.abytes=s,r.abool=function(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)},r.numberToHexUnpadded=o,r.hexToNumber=l,r.bytesToHex=d,r.hexToBytes=p,r.bytesToNumberBE=function(e){return l(d(e))},r.bytesToNumberLE=function(e){return s(e),l(d(Uint8Array.from(e).reverse()))},r.numberToBytesBE=g,r.numberToBytesLE=function(e,t){return g(e,t).reverse()},r.numberToVarBytesBE=function(e){return p(o(e))},r.ensureBytes=function(e,t,r){let n;if("string"==typeof t)try{n=p(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(i(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let a=n.length;if("number"==typeof r&&a!==r)throw Error(e+" of length "+r+" expected, got "+a);return n},r.concatBytes=m,r.equalBytes=function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r},r.utf8ToBytes=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))},r.inRange=b,r.aInRange=function(e,t,r,n){if(!b(t,r,n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)},r.bitLen=function(e){let t;for(t=0;e>n;e>>=a,t+=1);return t},r.bitGet=function(e,t){return e>>BigInt(t)&a},r.bitSet=function(e,t,r){return e|(r?a:n)<<BigInt(t)},r.createHmacDrbg=function(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=_(e),a=_(e),i=0,s=()=>{n.fill(1),a.fill(0),i=0},o=(...e)=>r(a,n,...e),l=(e=_(0))=>{a=o(w([0]),e),n=o(),0!==e.length&&(a=o(w([1]),e),n=o())},c=()=>{if(i++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=o()).slice();r.push(t),e+=n.length}return m(...r)};return(e,t)=>{let r;for(s(),l(e);!(r=t(c()));)l();return s(),r}},r.validateObject=function(e,t,r={}){let n=(t,r,n)=>{let a=E[r];if("function"!=typeof a)throw Error("invalid validator function");let i=e[t];if((!n||void 0!==i)&&!a(i,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+i)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e},r.memoized=function(e){let t=new WeakMap;return(r,...n)=>{let a=t.get(r);if(void 0!==a)return a;let i=e(r,...n);return t.set(r,i),i}};let n=BigInt(0),a=BigInt(1);function i(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function s(e){if(!i(e))throw Error("Uint8Array expected")}function o(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function l(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?n:BigInt("0x"+e)}let c="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex,u=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function d(e){if(s(e),c)return e.toHex();let t="";for(let r=0;r<e.length;r++)t+=u[e[r]];return t}let h={_0:48,_9:57,A:65,F:70,a:97,f:102};function f(e){return e>=h._0&&e<=h._9?e-h._0:e>=h.A&&e<=h.F?e-(h.A-10):e>=h.a&&e<=h.f?e-(h.a-10):void 0}function p(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);if(c)return Uint8Array.fromHex(e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,a=0;t<r;t++,a+=2){let r=f(e.charCodeAt(a)),i=f(e.charCodeAt(a+1));if(void 0===r||void 0===i)throw Error('hex string expected, got non-hex character "'+(e[a]+e[a+1])+'" at index '+a);n[t]=16*r+i}return n}function g(e,t){return p(e.toString(16).padStart(2*t,"0"))}function m(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];s(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let a=e[t];r.set(a,n),n+=a.length}return r}let y=e=>"bigint"==typeof e&&n<=e;function b(e,t,r){return y(e)&&y(t)&&y(r)&&t<=e&&e<r}r.bitMask=e=>(a<<BigInt(e))-a;let _=e=>new Uint8Array(e),w=e=>Uint8Array.from(e),E={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||i(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};r.notImplemented=()=>{throw Error("not implemented")}},538596,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isNegativeLE=void 0,r.mod=d,r.pow=h,r.pow2=function(e,t,r){let n=e;for(;t-- >a;)n*=n,n%=r;return n},r.invert=f,r.tonelliShanks=p,r.FpSqrt=g,r.validateField=function(e){let t=m.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,n.validateObject)(e,t)},r.FpPow=y,r.FpInvertBatch=b,r.FpDiv=function(e,t,r){return e.mul(t,"bigint"==typeof r?f(r,e.ORDER):e.inv(r))},r.FpLegendre=_,r.FpIsSquare=function(e){let t=_(e.ORDER);return r=>{let n=t(e,r);return e.eql(n,e.ZERO)||e.eql(n,e.ONE)}},r.nLength=w,r.Field=function(e,t,r=!1,s={}){let o;if(e<=a)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:l,nByteLength:c}=w(e,t);if(c>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let u=Object.freeze({ORDER:e,isLE:r,BITS:l,BYTES:c,MASK:(0,n.bitMask)(l),ZERO:a,ONE:i,create:t=>d(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return a<=t&&t<e},is0:e=>e===a,isOdd:e=>(e&i)===i,neg:t=>d(-t,e),eql:(e,t)=>e===t,sqr:t=>d(t*t,e),add:(t,r)=>d(t+r,e),sub:(t,r)=>d(t-r,e),mul:(t,r)=>d(t*r,e),pow:(e,t)=>y(u,e,t),div:(t,r)=>d(t*f(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>f(t,e),sqrt:s.sqrt||(t=>(o||(o=g(e)),o(u,t))),invertBatch:e=>b(u,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?(0,n.numberToBytesLE)(e,c):(0,n.numberToBytesBE)(e,c),fromBytes:e=>{if(e.length!==c)throw Error("Field.fromBytes: expected "+c+" bytes, got "+e.length);return r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e)}});return Object.freeze(u)},r.FpSqrtOdd=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)},r.FpSqrtEven=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r},r.hashToPrivateScalar=function(e,t,r=!1){let a=(e=(0,n.ensureBytes)("privateHash",e)).length,s=w(t).nByteLength+8;if(s<24||a<s||a>1024)throw Error("hashToPrivateScalar: expected "+s+"-1024 bytes of input, got "+a);return d(r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e),t-i)+i},r.getFieldBytesLength=E,r.getMinHashLength=v,r.mapHashToField=function(e,t,r=!1){let a=e.length,s=E(t),o=v(t);if(a<16||a<o||a>1024)throw Error("expected "+o+"-1024 bytes of input, got "+a);let l=d(r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e),t-i)+i;return r?(0,n.numberToBytesLE)(l,s):(0,n.numberToBytesBE)(l,s)};let n=e.r(703790),a=BigInt(0),i=BigInt(1),s=BigInt(2),o=BigInt(3),l=BigInt(4),c=BigInt(5),u=BigInt(8);function d(e,t){let r=e%t;return r>=a?r:t+r}function h(e,t,r){if(t<a)throw Error("invalid exponent, negatives unsupported");if(r<=a)throw Error("invalid modulus");if(r===i)return a;let n=i;for(;t>a;)t&i&&(n=n*e%r),e=e*e%r,t>>=i;return n}function f(e,t){if(e===a)throw Error("invert: expected non-zero number");if(t<=a)throw Error("invert: expected positive modulus, got "+t);let r=d(e,t),n=t,s=a,o=i,l=i,c=a;for(;r!==a;){let e=n/r,t=n%r,a=s-l*e,i=o-c*e;n=r,r=t,s=l,o=c,l=a,c=i}if(n!==i)throw Error("invert: does not exist");return d(s,t)}function p(e){let t,r,n,o=(e-i)/s;for(t=e-i,r=0;t%s===a;t/=s,r++);for(n=s;n<e&&h(n,o,e)!==e-i;n++)if(n>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+i)/l;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let c=(t+i)/s;return function(e,a){if(e.pow(a,o)===e.neg(e.ONE))throw Error("Cannot find square root");let s=r,l=e.pow(e.mul(e.ONE,n),t),u=e.pow(a,c),d=e.pow(a,t);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(d);t<s&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,i<<BigInt(s-t-1));l=e.sqr(r),u=e.mul(u,r),d=e.mul(d,l),s=t}return u}}function g(e){if(e%l===o){let t=(e+i)/l;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%u===c){let t=(e-c)/u;return function(e,r){let n=e.mul(r,s),a=e.pow(n,t),i=e.mul(r,a),o=e.mul(e.mul(i,s),a),l=e.mul(i,e.sub(o,e.ONE));if(!e.eql(e.sqr(l),r))throw Error("Cannot find square root");return l}}return p(e)}r.isNegativeLE=(e,t)=>(d(e,t)&i)===i;let m=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function y(e,t,r){if(r<a)throw Error("invalid exponent, negatives unsupported");if(r===a)return e.ONE;if(r===i)return t;let n=e.ONE,s=t;for(;r>a;)r&i&&(n=e.mul(n,s)),s=e.sqr(s),r>>=i;return n}function b(e,t){let r=Array(t.length),n=t.reduce((t,n,a)=>e.is0(n)?t:(r[a]=t,e.mul(t,n)),e.ONE),a=e.inv(n);return t.reduceRight((t,n,a)=>e.is0(n)?t:(r[a]=e.mul(t,r[a]),e.mul(t,n)),a),r}function _(e){let t=(e-i)/s;return(e,r)=>e.pow(r,t)}function w(e,t){let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function E(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function v(e){let t=E(e);return t+Math.ceil(t/2)}},201122,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.wNAF=function(e,t){return{constTimeNegate:o,hasPrecomputes:e=>1!==g(e),unsafeLadder(t,r,n=e.ZERO){let a=t;for(;r>i;)r&s&&(n=n.add(a)),a=a.double(),r>>=s;return n},precomputeWindow(e,r){let{windows:n,windowSize:a}=c(r,t),i=[],s=e,o=s;for(let e=0;e<n;e++){o=s,i.push(o);for(let e=1;e<a;e++)o=o.add(s),i.push(o);s=o.double()}return i},wNAF(r,n,a){let i=e.ZERO,s=e.BASE,l=c(r,t);for(let e=0;e<l.windows;e++){let{nextN:t,offset:r,isZero:c,isNeg:d,isNegF:h,offsetF:f}=u(a,e,l);a=t,c?s=s.add(o(h,n[f])):i=i.add(o(d,n[r]))}return{p:i,f:s}},wNAFUnsafe(r,n,a,s=e.ZERO){let o=c(r,t);for(let e=0;e<o.windows&&a!==i;e++){let{nextN:t,offset:r,isZero:i,isNeg:l}=u(a,e,o);if(a=t,!i){let e=n[r];s=s.add(l?e.negate():e)}}return s},getPrecomputes(e,t,r){let n=f.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&f.set(t,r(n))),n},wNAFCached(e,t,r){let n=g(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){let a=g(e);return 1===a?this.unsafeLadder(e,t,n):this.wNAFUnsafe(a,this.getPrecomputes(a,e,r),t,n)},setWindowSize(e,r){l(r,t),p.set(e,r),f.delete(e)}}},r.pippenger=function(e,t,r,n){if(d(r,e),h(n,t),r.length!==n.length)throw Error("arrays of points and scalars must have equal length");let i=e.ZERO,s=(0,a.bitLen)(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,l=(0,a.bitMask)(o),c=Array(Number(l)+1).fill(i),u=Math.floor((t.BITS-1)/o)*o,f=i;for(let e=u;e>=0;e-=o){c.fill(i);for(let t=0;t<n.length;t++){let a=Number(n[t]>>BigInt(e)&l);c[a]=c[a].add(r[t])}let t=i;for(let e=c.length-1,r=i;e>0;e--)r=r.add(c[e]),t=t.add(r);if(f=f.add(t),0!==e)for(let e=0;e<o;e++)f=f.double()}return f},r.precomputeMSMUnsafe=function(e,t,r,n){l(n,t.BITS),d(r,e);let i=e.ZERO,s=2**n-1,o=Math.ceil(t.BITS/n),c=(0,a.bitMask)(n),u=r.map(e=>{let t=[];for(let r=0,n=e;r<s;r++)t.push(n),n=n.add(e);return t});return e=>{if(h(e,t),e.length>r.length)throw Error("array of scalars must be smaller than array of points");let a=i;for(let t=0;t<o;t++){if(a!==i)for(let e=0;e<n;e++)a=a.double();let r=BigInt(o*n-(t+1)*n);for(let t=0;t<e.length;t++){let n=Number(e[t]>>r&c);n&&(a=a.add(u[t][n-1]))}}return a}},r.validateBasic=function(e){return(0,n.validateField)(e.Fp),(0,a.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,n.nLength)(e.n,e.nBitLength),...e,...{p:e.Fp.ORDER}})};let n=e.r(538596),a=e.r(703790),i=BigInt(0),s=BigInt(1);function o(e,t){let r=t.negate();return e?r:t}function l(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function c(e,t){l(e,t);let r=Math.ceil(t/e)+1,n=2**(e-1),i=2**e;return{windows:r,windowSize:n,mask:(0,a.bitMask)(e),maxNumber:i,shiftBy:BigInt(e)}}function u(e,t,r){let{windowSize:n,mask:a,maxNumber:i,shiftBy:o}=r,l=Number(e&a),c=e>>o;l>n&&(l-=i,c+=s);let u=t*n,d=u+Math.abs(l)-1,h=0===l;return{nextN:c,offset:d,isZero:h,isNeg:l<0,isNegF:t%2!=0,offsetF:u}}function d(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}function h(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}let f=new WeakMap,p=new WeakMap;function g(e){return p.get(e)||1}},479686,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DER=r.DERErr=void 0,r.weierstrassPoints=f,r.weierstrass=function(e){let t=function(e){let t=(0,n.validateBasic)(e);return(0,i.validateObject)(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:o,n:u}=t,d=o.BYTES+1,h=2*o.BYTES+1;function p(e){return(0,a.mod)(e,u)}function g(e){return(0,a.invert)(e,u)}let{ProjectivePoint:m,normPrivateKeyToScalar:y,weierstrassEquation:b,isWithinCurveOrder:_}=f({...t,toBytes(e,t,r){let n=t.toAffine(),a=o.toBytes(n.x),s=i.concatBytes;return((0,i.abool)("isCompressed",r),r)?s(Uint8Array.from([t.hasEvenY()?2:3]),a):s(Uint8Array.from([4]),a,o.toBytes(n.y))},fromBytes(e){let t=e.length,r=e[0],n=e.subarray(1);if(t===d&&(2===r||3===r)){let e,t=(0,i.bytesToNumberBE)(n);if(!(0,i.inRange)(t,c,o.ORDER))throw Error("Point is not on curve");let a=b(t);try{e=o.sqrt(a)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&r)==1!=((e&c)===c)&&(e=o.neg(e)),{x:t,y:e}}if(t===h&&4===r)return{x:o.fromBytes(n.subarray(0,o.BYTES)),y:o.fromBytes(n.subarray(o.BYTES,2*o.BYTES))};throw Error("invalid Point, expected length of "+d+", or uncompressed "+h+", got "+t)}}),w=e=>(0,i.bytesToHex)((0,i.numberToBytesBE)(e,t.nByteLength)),E=(e,t,r)=>(0,i.bytesToNumberBE)(e.slice(t,r));class v{constructor(e,t,r){(0,i.aInRange)("r",e,c,u),(0,i.aInRange)("s",t,c,u),this.r=e,this.s=t,null!=r&&(this.recovery=r),Object.freeze(this)}static fromCompact(e){let r=t.nByteLength;return new v(E(e=(0,i.ensureBytes)("compactSignature",e,2*r),0,r),E(e,r,2*r))}static fromDER(e){let{r:t,s:n}=r.DER.toSig((0,i.ensureBytes)("DER",e));return new v(t,n)}assertValidity(){}addRecoveryBit(e){return new v(this.r,this.s,e)}recoverPublicKey(e){let{r,s:n,recovery:a}=this,s=T((0,i.ensureBytes)("msgHash",e));if(null==a||![0,1,2,3].includes(a))throw Error("recovery id invalid");let l=2===a||3===a?r+t.n:r;if(l>=o.ORDER)throw Error("recovery id 2 or 3 invalid");let c=(1&a)==0?"02":"03",u=m.fromHex(c+w(l)),d=g(l),h=p(-s*d),f=p(n*d),y=m.BASE.multiplyAndAddUnsafe(u,h,f);if(!y)throw Error("point at infinify");return y.assertValidity(),y}hasHighS(){return this.s>u>>c}normalizeS(){return this.hasHighS()?new v(this.r,p(-this.s),this.recovery):this}toDERRawBytes(){return(0,i.hexToBytes)(this.toDERHex())}toDERHex(){return r.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return(0,i.hexToBytes)(this.toCompactHex())}toCompactHex(){return w(this.r)+w(this.s)}}function S(e){let t=(0,i.isBytes)(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===d||n===h:r?n===2*d||n===2*h:e instanceof m}let x=t.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let r=(0,i.bytesToNumberBE)(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},T=t.bits2int_modN||function(e){return p(x(e))},A=(0,i.bitMask)(t.nBitLength);function k(e){return(0,i.aInRange)("num < 2^"+t.nBitLength,e,l,A),(0,i.numberToBytesBE)(e,t.nByteLength)}let I={lowS:t.lowS,prehash:!1},C={lowS:t.lowS,prehash:!1};return m.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return m.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(S(e))throw Error("first arg must be private key");if(!S(t))throw Error("second arg must be public key");return m.fromHex(t).multiply(y(e)).toRawBytes(r)},sign:function(e,r,n=I){let{seed:a,k2sig:d}=function(e,r,n=I){if(["recovered","canonical"].some(e=>e in n))throw Error("sign() legacy options not supported");let{hash:a,randomBytes:d}=t,{lowS:h,prehash:f,extraEntropy:b}=n;null==h&&(h=!0),e=(0,i.ensureBytes)("msgHash",e),s(n),f&&(e=(0,i.ensureBytes)("prehashed msgHash",a(e)));let w=T(e),E=y(r),S=[k(E),k(w)];if(null!=b&&!1!==b){let e=!0===b?d(o.BYTES):b;S.push((0,i.ensureBytes)("extraEntropy",e))}return{seed:(0,i.concatBytes)(...S),k2sig:function(e){var t;let r=x(e);if(!_(r))return;let n=g(r),a=m.BASE.multiply(r).toAffine(),i=p(a.x);if(i===l)return;let s=p(n*p(w+i*E));if(s===l)return;let o=2*(a.x!==i)|Number(a.y&c),d=s;return h&&s>u>>c&&(d=(t=s)>u>>c?p(-t):t,o^=1),new v(i,d,o)}}}(e,r,n);return(0,i.createHmacDrbg)(t.hash.outputLen,t.nByteLength,t.hmac)(a,d)},verify:function(e,n,a,o=C){let l,c;n=(0,i.ensureBytes)("msgHash",n),a=(0,i.ensureBytes)("publicKey",a);let{lowS:u,prehash:d,format:h}=o;if(s(o),"strict"in o)throw Error("options.strict was renamed to lowS");if(void 0!==h&&"compact"!==h&&"der"!==h)throw Error("format must be compact or der");let f="string"==typeof e||(0,i.isBytes)(e),y=!f&&!h&&"object"==typeof e&&null!==e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!f&&!y)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(y&&(c=new v(e.r,e.s)),f){try{"compact"!==h&&(c=v.fromDER(e))}catch(e){if(!(e instanceof r.DER.Err))throw e}c||"der"===h||(c=v.fromCompact(e))}l=m.fromHex(a)}catch(e){return!1}if(!c||u&&c.hasHighS())return!1;d&&(n=t.hash(n));let{r:b,s:_}=c,w=T(n),E=g(_),S=p(w*E),x=p(b*E),A=m.BASE.multiplyAndAddUnsafe(l,S,x)?.toAffine();return!!A&&p(A.x)===b},ProjectivePoint:m,Signature:v,utils:{isValidPrivateKey(e){try{return y(e),!0}catch(e){return!1}},normPrivateKeyToScalar:y,randomPrivateKey:()=>{let e=(0,a.getMinHashLength)(t.n);return(0,a.mapHashToField)(t.randomBytes(e),t.n)},precompute:(e=8,t=m.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}},r.SWUFpSqrtRatio=p,r.mapToCurveSimpleSWU=function(e,t){if((0,a.validateField)(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let r=p(e,t.Z);if(!e.isOdd)throw Error("Fp.isOdd is not implemented!");return n=>{let a,i,s,o,l,c,u,d;a=e.sqr(n),a=e.mul(a,t.Z),i=e.sqr(a),i=e.add(i,a),s=e.add(i,e.ONE),s=e.mul(s,t.B),o=e.cmov(t.Z,e.neg(i),!e.eql(i,e.ZERO)),o=e.mul(o,t.A),i=e.sqr(s),c=e.sqr(o),l=e.mul(c,t.A),i=e.add(i,l),i=e.mul(i,s),c=e.mul(c,o),l=e.mul(c,t.B),i=e.add(i,l),u=e.mul(a,s);let{isValid:h,value:f}=r(i,c);d=e.mul(a,n),d=e.mul(d,f),u=e.cmov(u,s,h),d=e.cmov(d,f,h);let p=e.isOdd(n)===e.isOdd(d);return d=e.cmov(e.neg(d),d,p),{x:u=e.div(u,o),y:d}}};let n=e.r(201122),a=e.r(538596),i=e.r(703790);function s(e){void 0!==e.lowS&&(0,i.abool)("lowS",e.lowS),void 0!==e.prehash&&(0,i.abool)("prehash",e.prehash)}class o extends Error{constructor(e=""){super(e)}}r.DERErr=o,r.DER={Err:o,_tlv:{encode:(e,t)=>{let{Err:n}=r.DER;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");let a=t.length/2,s=(0,i.numberToHexUnpadded)(a);if(s.length/2&128)throw new n("tlv.encode: long form length too big");let o=a>127?(0,i.numberToHexUnpadded)(s.length/2|128):"";return(0,i.numberToHexUnpadded)(e)+o+s+t},decode(e,t){let{Err:n}=r.DER,a=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[a++]!==e)throw new n("tlv.decode: wrong tlv");let i=t[a++],s=0;if(128&i){let e=127&i;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");let r=t.subarray(a,a+e);if(r.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===r[0])throw new n("tlv.decode(long): zero leftmost byte");for(let e of r)s=s<<8|e;if(a+=e,s<128)throw new n("tlv.decode(long): not minimal encoding")}else s=i;let o=t.subarray(a,a+s);if(o.length!==s)throw new n("tlv.decode: wrong value length");return{v:o,l:t.subarray(a+s)}}},_int:{encode(e){let{Err:t}=r.DER;if(e<l)throw new t("integer: negative integers are not allowed");let n=(0,i.numberToHexUnpadded)(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){let{Err:t}=r.DER;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return(0,i.bytesToNumberBE)(e)}},toSig(e){let{Err:t,_int:n,_tlv:a}=r.DER,s=(0,i.ensureBytes)("signature",e),{v:o,l:l}=a.decode(48,s);if(l.length)throw new t("invalid signature: left bytes after parsing");let{v:c,l:u}=a.decode(2,o),{v:d,l:h}=a.decode(2,u);if(h.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(c),s:n.decode(d)}},hexFromSig(e){let{_tlv:t,_int:n}=r.DER,a=t.encode(2,n.encode(e.r)),i=t.encode(2,n.encode(e.s));return t.encode(48,a+i)}};let l=BigInt(0),c=BigInt(1),u=BigInt(2),d=BigInt(3),h=BigInt(4);function f(e){let t=function(e){let t=(0,n.validateBasic)(e);(0,i.validateObject)(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:a,a:s}=t;if(r){if(!a.eql(s,a.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,s=(0,a.Field)(t.n,t.nBitLength),o=t.toBytes||((e,t,n)=>{let a=t.toAffine();return(0,i.concatBytes)(Uint8Array.from([4]),r.toBytes(a.x),r.toBytes(a.y))}),u=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function h(e){let{a:n,b:a}=t,i=r.sqr(e),s=r.mul(i,e);return r.add(r.add(s,r.mul(e,n)),a)}if(!r.eql(r.sqr(t.Gy),h(t.Gx)))throw Error("bad generator point: equation left != right");function f(e){let r,{allowedPrivateKeyLengths:n,nByteLength:s,wrapPrivateKey:o,n:l}=t;if(n&&"bigint"!=typeof e){if((0,i.isBytes)(e)&&(e=(0,i.bytesToHex)(e)),"string"!=typeof e||!n.includes(e.length))throw Error("invalid private key");e=e.padStart(2*s,"0")}try{r="bigint"==typeof e?e:(0,i.bytesToNumberBE)((0,i.ensureBytes)("private key",e,s))}catch(t){throw Error("invalid private key, expected hex or "+s+" bytes, got "+typeof e)}return o&&(r=(0,a.mod)(r,l)),(0,i.aInRange)("private key",r,c,l),r}function p(e){if(!(e instanceof y))throw Error("ProjectivePoint expected")}let g=(0,i.memoized)((e,t)=>{let{px:n,py:a,pz:i}=e;if(r.eql(i,r.ONE))return{x:n,y:a};let s=e.is0();null==t&&(t=s?r.ONE:r.inv(i));let o=r.mul(n,t),l=r.mul(a,t),c=r.mul(i,t);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(c,r.ONE))throw Error("invZ was invalid");return{x:o,y:l}}),m=(0,i.memoized)(e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw Error("bad point: ZERO")}let{x:n,y:a}=e.toAffine();if(!r.isValid(n)||!r.isValid(a))throw Error("bad point: x or y not FE");let i=r.sqr(a),s=h(n);if(!r.eql(i,s))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class y{constructor(e,t,n){if(null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required");this.px=e,this.py=t,this.pz=n,Object.freeze(this)}static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof y)throw Error("projective point not allowed");let a=e=>r.eql(e,r.ZERO);return a(t)&&a(n)?y.ZERO:new y(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(y.fromAffine)}static fromHex(e){let t=y.fromAffine(u((0,i.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return y.BASE.multiply(f(e))}static msm(e,t){return(0,n.pippenger)(y,s,e,t)}_setWindowSize(e){_.setWindowSize(this,e)}assertValidity(){m(this)}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){p(e);let{px:t,py:n,pz:a}=this,{px:i,py:s,pz:o}=e,l=r.eql(r.mul(t,o),r.mul(i,a)),c=r.eql(r.mul(n,o),r.mul(s,a));return l&&c}negate(){return new y(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:n}=t,a=r.mul(n,d),{px:i,py:s,pz:o}=this,l=r.ZERO,c=r.ZERO,u=r.ZERO,h=r.mul(i,i),f=r.mul(s,s),p=r.mul(o,o),g=r.mul(i,s);return g=r.add(g,g),u=r.mul(i,o),u=r.add(u,u),l=r.mul(e,u),c=r.mul(a,p),c=r.add(l,c),l=r.sub(f,c),c=r.add(f,c),c=r.mul(l,c),l=r.mul(g,l),u=r.mul(a,u),p=r.mul(e,p),g=r.sub(h,p),g=r.mul(e,g),g=r.add(g,u),u=r.add(h,h),h=r.add(u,h),h=r.add(h,p),h=r.mul(h,g),c=r.add(c,h),p=r.mul(s,o),p=r.add(p,p),h=r.mul(p,g),l=r.sub(l,h),u=r.mul(p,f),u=r.add(u,u),new y(l,c,u=r.add(u,u))}add(e){p(e);let{px:n,py:a,pz:i}=this,{px:s,py:o,pz:l}=e,c=r.ZERO,u=r.ZERO,h=r.ZERO,f=t.a,g=r.mul(t.b,d),m=r.mul(n,s),b=r.mul(a,o),_=r.mul(i,l),w=r.add(n,a),E=r.add(s,o);w=r.mul(w,E),E=r.add(m,b),w=r.sub(w,E),E=r.add(n,i);let v=r.add(s,l);return E=r.mul(E,v),v=r.add(m,_),E=r.sub(E,v),v=r.add(a,i),c=r.add(o,l),v=r.mul(v,c),c=r.add(b,_),v=r.sub(v,c),h=r.mul(f,E),c=r.mul(g,_),h=r.add(c,h),c=r.sub(b,h),h=r.add(b,h),u=r.mul(c,h),b=r.add(m,m),b=r.add(b,m),_=r.mul(f,_),E=r.mul(g,E),b=r.add(b,_),_=r.sub(m,_),_=r.mul(f,_),E=r.add(E,_),m=r.mul(b,E),u=r.add(u,m),m=r.mul(v,E),c=r.mul(w,c),c=r.sub(c,m),m=r.mul(w,b),h=r.mul(v,h),new y(c,u,h=r.add(h,m))}subtract(e){return this.add(e.negate())}is0(){return this.equals(y.ZERO)}wNAF(e){return _.wNAFCached(this,e,y.normalizeZ)}multiplyUnsafe(e){let{endo:n,n:a}=t;(0,i.aInRange)("scalar",e,l,a);let s=y.ZERO;if(e===l)return s;if(this.is0()||e===c)return this;if(!n||_.hasPrecomputes(this))return _.wNAFCachedUnsafe(this,e,y.normalizeZ);let{k1neg:o,k1:u,k2neg:d,k2:h}=n.splitScalar(e),f=s,p=s,g=this;for(;u>l||h>l;)u&c&&(f=f.add(g)),h&c&&(p=p.add(g)),g=g.double(),u>>=c,h>>=c;return o&&(f=f.negate()),d&&(p=p.negate()),p=new y(r.mul(p.px,n.beta),p.py,p.pz),f.add(p)}multiply(e){let n,a,{endo:s,n:o}=t;if((0,i.aInRange)("scalar",e,c,o),s){let{k1neg:t,k1:i,k2neg:o,k2:l}=s.splitScalar(e),{p:c,f:u}=this.wNAF(i),{p:d,f:h}=this.wNAF(l);c=_.constTimeNegate(t,c),d=_.constTimeNegate(o,d),d=new y(r.mul(d.px,s.beta),d.py,d.pz),n=c.add(d),a=u.add(h)}else{let{p:t,f:r}=this.wNAF(e);n=t,a=r}return y.normalizeZ([n,a])[0]}multiplyAndAddUnsafe(e,t,r){let n=y.BASE,a=(e,t)=>t!==l&&t!==c&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),i=a(this,t).add(a(e,r));return i.is0()?void 0:i}toAffine(e){return g(this,e)}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===c)return!0;if(r)return r(y,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===c?this:r?r(y,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return(0,i.abool)("isCompressed",e),this.assertValidity(),o(y,this,e)}toHex(e=!0){return(0,i.abool)("isCompressed",e),(0,i.bytesToHex)(this.toRawBytes(e))}}y.BASE=new y(t.Gx,t.Gy,r.ONE),y.ZERO=new y(r.ZERO,r.ONE,r.ZERO);let b=t.nBitLength,_=(0,n.wNAF)(y,t.endo?Math.ceil(b/2):b);return{CURVE:t,ProjectivePoint:y,normPrivateKeyToScalar:f,weierstrassEquation:h,isWithinCurveOrder:function(e){return(0,i.inRange)(e,c,t.n)}}}function p(e,t){let r=e.ORDER,n=l;for(let e=r-c;e%u===l;e/=u)n+=c;let a=n,i=u<<a-c-c,s=i*u,o=(r-c)/s,f=(o-c)/u,p=s-c,g=e.pow(t,o),m=e.pow(t,(o+c)/u),y=(t,r)=>{let n=g,s=e.pow(r,p),o=e.sqr(s);o=e.mul(o,r);let l=e.mul(t,o);l=e.pow(l,f),l=e.mul(l,s),s=e.mul(l,r),o=e.mul(l,t);let d=e.mul(o,s);l=e.pow(d,i);let h=e.eql(l,e.ONE);s=e.mul(o,m),l=e.mul(d,n),o=e.cmov(s,o,h),d=e.cmov(l,d,h);for(let t=a;t>c;t--){let r=t-u;r=u<<r-c;let a=e.pow(d,r),i=e.eql(a,e.ONE);s=e.mul(o,n),n=e.mul(n,n),a=e.mul(d,n),o=e.cmov(s,o,i),d=e.cmov(a,d,i)}return{isValid:h,value:o}};if(e.ORDER%h===d){let r=(e.ORDER-d)/h,n=e.sqrt(e.neg(t));y=(t,a)=>{let i=e.sqr(a),s=e.mul(t,a);i=e.mul(i,s);let o=e.pow(i,r);o=e.mul(o,s);let l=e.mul(o,n),c=e.mul(e.sqr(o),a),u=e.eql(c,t),d=e.cmov(l,o,u);return{isValid:u,value:d}}}return y}},482352,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getHash=s,r.createCurve=function(e,t){let r=t=>(0,i.weierstrass)({...e,...s(t)});return{...r(t),create:r}};let n=e.r(824460),a=e.r(260003),i=e.r(479686);function s(e){return{hash:e,hmac:(t,...r)=>(0,n.hmac)(e,t,(0,a.concatBytes)(...r)),randomBytes:a.randomBytes}}},305305,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.expand_message_xmd=l,r.expand_message_xof=c,r.hash_to_field=u,r.isogenyMap=function(e,t){let r=t.map(e=>Array.from(e).reverse());return(t,n)=>{let[a,i,s,o]=r.map(r=>r.reduce((r,n)=>e.add(e.mul(r,t),n)));if(e.is0(i)||e.is0(o))throw Error("bad point: ZERO");return t=e.div(a,i),n=e.mul(n,e.div(s,o)),{x:t,y:n}}},r.createHasher=function(e,t,r){if("function"!=typeof t)throw Error("mapToCurve() must be defined");return{hashToCurve(n,a){let i=u(n,2,{...r,DST:r.DST,...a}),s=e.fromAffine(t(i[0])),o=e.fromAffine(t(i[1])),l=s.add(o).clearCofactor();return l.assertValidity(),l},encodeToCurve(n,a){let i=u(n,1,{...r,DST:r.encodeDST,...a}),s=e.fromAffine(t(i[0])).clearCofactor();return s.assertValidity(),s},mapToCurve(r){if(!Array.isArray(r))throw Error("mapToCurve: expected array of bigints");for(let e of r)if("bigint"!=typeof e)throw Error("mapToCurve: expected array of bigints");let n=e.fromAffine(t(r)).clearCofactor();return n.assertValidity(),n}}};let n=e.r(538596),a=e.r(703790),i=a.bytesToNumberBE;function s(e,t){if(o(e),o(t),e<0||e>=1<<8*t)throw Error("invalid I2OSP input: "+e);let r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=255&e,e>>>=8;return new Uint8Array(r)}function o(e){if(!Number.isSafeInteger(e))throw Error("number expected")}function l(e,t,r,n){(0,a.abytes)(e),(0,a.abytes)(t),o(r),t.length>255&&(t=n((0,a.concatBytes)((0,a.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));let{outputLen:i,blockLen:l}=n,c=Math.ceil(r/i);if(r>65535||c>255)throw Error("expand_message_xmd: invalid lenInBytes");let u=(0,a.concatBytes)(t,s(t.length,1)),d=s(0,l),h=s(r,2),f=Array(c),p=n((0,a.concatBytes)(d,e,h,s(0,1),u));f[0]=n((0,a.concatBytes)(p,s(1,1),u));for(let e=1;e<=c;e++){let t=[function(e,t){let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}(p,f[e-1]),s(e+1,1),u];f[e]=n((0,a.concatBytes)(...t))}return(0,a.concatBytes)(...f).slice(0,r)}function c(e,t,r,n,i){if((0,a.abytes)(e),(0,a.abytes)(t),o(r),t.length>255){let e=Math.ceil(2*n/8);t=i.create({dkLen:e}).update((0,a.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(e).update(s(r,2)).update(t).update(s(t.length,1)).digest()}function u(e,t,r){let s;(0,a.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:u,k:d,m:h,hash:f,expand:p,DST:g}=r;(0,a.abytes)(e),o(t);let m="string"==typeof g?(0,a.utf8ToBytes)(g):g,y=Math.ceil((u.toString(2).length+d)/8),b=t*h*y;if("xmd"===p)s=l(e,m,b,f);else if("xof"===p)s=c(e,m,b,d,f);else if("_internal_pass"===p)s=e;else throw Error('expand must be "xmd" or "xof"');let _=Array(t);for(let e=0;e<t;e++){let t=Array(h);for(let r=0;r<h;r++){let a=y*(r+e*h),o=s.subarray(a,a+y);t[r]=(0,n.mod)(i(o),u)}_[e]=t}return _}},342070,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.encodeToCurve=r.hashToCurve=r.schnorr=r.secp256k1=void 0;let n=e.r(330541),a=e.r(260003),i=e.r(482352),s=e.r(305305),o=e.r(538596),l=e.r(703790),c=e.r(479686),u=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),d=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h=BigInt(1),f=BigInt(2),p=(e,t)=>(e+t/f)/t;function g(e){let t=BigInt(3),r=BigInt(6),n=BigInt(11),a=BigInt(22),i=BigInt(23),s=BigInt(44),l=BigInt(88),c=e*e*e%u,d=c*c*e%u,h=(0,o.pow2)(d,t,u)*d%u,p=(0,o.pow2)(h,t,u)*d%u,g=(0,o.pow2)(p,f,u)*c%u,y=(0,o.pow2)(g,n,u)*g%u,b=(0,o.pow2)(y,a,u)*y%u,_=(0,o.pow2)(b,s,u)*b%u,w=(0,o.pow2)(_,l,u)*_%u,E=(0,o.pow2)(w,s,u)*b%u,v=(0,o.pow2)(E,t,u)*d%u,S=(0,o.pow2)(v,i,u)*y%u,x=(0,o.pow2)(S,r,u)*c%u,T=(0,o.pow2)(x,f,u);if(!m.eql(m.sqr(T),e))throw Error("Cannot find square root");return T}let m=(0,o.Field)(u,void 0,void 0,{sqrt:g});r.secp256k1=(0,i.createCurve)({a:BigInt(0),b:BigInt(7),Fp:m,n:d,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-h*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=BigInt("0x100000000000000000000000000000000"),i=p(t*e,d),s=p(-r*e,d),l=(0,o.mod)(e-i*t-s*n,d),c=(0,o.mod)(-i*r-s*t,d),u=l>a,f=c>a;if(u&&(l=d-l),f&&(c=d-c),l>a||c>a)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:u,k1:l,k2neg:f,k2:c}}}},n.sha256);let y=BigInt(0),b={};function _(e,...t){let r=b[e];if(void 0===r){let t=(0,n.sha256)(Uint8Array.from(e,e=>e.charCodeAt(0)));r=(0,l.concatBytes)(t,t),b[e]=r}return(0,n.sha256)((0,l.concatBytes)(r,...t))}let w=e=>e.toRawBytes(!0).slice(1),E=e=>(0,l.numberToBytesBE)(e,32),v=e=>(0,o.mod)(e,u),S=e=>(0,o.mod)(e,d),x=r.secp256k1.ProjectivePoint;function T(e){let t=r.secp256k1.utils.normPrivateKeyToScalar(e),n=x.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:S(-t),bytes:w(n)}}function A(e){(0,l.aInRange)("x",e,h,u);let t=v(e*e),r=g(v(t*e+BigInt(7)));r%f!==y&&(r=v(-r));let n=new x(e,r,h);return n.assertValidity(),n}let k=l.bytesToNumberBE;function I(...e){return S(k(_("BIP0340/challenge",...e)))}function C(e,t,r){let n=(0,l.ensureBytes)("signature",e,64),a=(0,l.ensureBytes)("message",t),i=(0,l.ensureBytes)("publicKey",r,32);try{let e,t=A(k(i)),r=k(n.subarray(0,32));if(!(0,l.inRange)(r,h,u))return!1;let s=k(n.subarray(32,64));if(!(0,l.inRange)(s,h,d))return!1;let o=I(E(r),w(t),a),c=(e=S(-o),x.BASE.multiplyAndAddUnsafe(t,s,e));if(!c||!c.hasEvenY()||c.toAffine().x!==r)return!1;return!0}catch(e){return!1}}r.schnorr={getPublicKey:function(e){return T(e).bytes},sign:function(e,t,r=(0,a.randomBytes)(32)){let n=(0,l.ensureBytes)("message",e),{bytes:i,scalar:s}=T(t),o=E(s^k(_("BIP0340/aux",(0,l.ensureBytes)("auxRand",r,32)))),c=S(k(_("BIP0340/nonce",o,i,n)));if(c===y)throw Error("sign failed: k is zero");let{bytes:u,scalar:d}=T(c),h=I(u,i,n),f=new Uint8Array(64);if(f.set(u,0),f.set(E(S(d+h*s)),32),!C(f,n,i))throw Error("sign: Invalid signature produced");return f},verify:C,utils:{randomPrivateKey:r.secp256k1.utils.randomPrivateKey,lift_x:A,pointToBytes:w,numberToBytesBE:l.numberToBytesBE,bytesToNumberBE:l.bytesToNumberBE,taggedHash:_,mod:o.mod}};let B=(0,s.isogenyMap)(m,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e)))),O=(0,c.mapToCurveSimpleSWU)(m,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:m.create(BigInt("-11"))}),N=(0,s.createHasher)(r.secp256k1.ProjectivePoint,e=>{let{x:t,y:r}=O(m.create(e[0]));return B(t,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:m.ORDER,m:1,k:128,expand:"xmd",hash:n.sha256});r.hashToCurve=N.hashToCurve,r.encodeToCurve=N.encodeToCurve},797750,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ripemd160=r.RIPEMD160=void 0;let n=e.r(49760),a=e.r(260003),i=new Uint8Array([7,4,13,1,10,6,15,3,12,0,9,5,2,14,11,8]),s=new Uint8Array(Array(16).fill(0).map((e,t)=>t)),o=s.map(e=>(9*e+5)%16),l=[s],c=[o];for(let e=0;e<4;e++)for(let t of[l,c])t.push(t[e].map(e=>i[e]));let u=[[11,14,15,12,5,8,7,9,11,13,14,15,6,7,9,8],[12,13,11,15,6,9,9,7,12,15,11,13,7,8,7,7],[13,15,14,11,7,7,6,8,13,14,13,12,5,5,6,9],[14,11,12,14,8,6,5,5,15,12,15,14,9,9,8,6],[15,12,13,13,9,5,8,6,14,11,12,11,8,6,5,5]].map(e=>new Uint8Array(e)),d=l.map((e,t)=>e.map(e=>u[t][e])),h=c.map((e,t)=>e.map(e=>u[t][e])),f=new Uint32Array([0,0x5a827999,0x6ed9eba1,0x8f1bbcdc,0xa953fd4e]),p=new Uint32Array([0x50a28be6,0x5c4dd124,0x6d703ef3,0x7a6d76e9,0]);function g(e,t,r,n){return 0===e?t^r^n:1===e?t&r|~t&n:2===e?(t|~r)^n:3===e?t&n|r&~n:t^(r|~n)}let m=new Uint32Array(16);class y extends n.HashMD{constructor(){super(64,20,8,!0),this.h0=0x67452301,this.h1=-0x10325477,this.h2=-0x67452302,this.h3=0x10325476,this.h4=-0x3c2d1e10}get(){let{h0:e,h1:t,h2:r,h3:n,h4:a}=this;return[e,t,r,n,a]}set(e,t,r,n,a){this.h0=0|e,this.h1=0|t,this.h2=0|r,this.h3=0|n,this.h4=0|a}process(e,t){for(let r=0;r<16;r++,t+=4)m[r]=e.getUint32(t,!0);let r=0|this.h0,n=r,i=0|this.h1,s=i,o=0|this.h2,u=o,y=0|this.h3,b=y,_=0|this.h4,w=_;for(let e=0;e<5;e++){let t=4-e,E=f[e],v=p[e],S=l[e],x=c[e],T=d[e],A=h[e];for(let t=0;t<16;t++){let n=(0,a.rotl)(r+g(e,i,o,y)+m[S[t]]+E,T[t])+_|0;r=_,_=y,y=0|(0,a.rotl)(o,10),o=i,i=n}for(let e=0;e<16;e++){let r=(0,a.rotl)(n+g(t,s,u,b)+m[x[e]]+v,A[e])+w|0;n=w,w=b,b=0|(0,a.rotl)(u,10),u=s,s=r}}this.set(this.h1+o+b|0,this.h2+y+w|0,this.h3+_+n|0,this.h4+r+s|0,this.h0+i+u|0)}roundClean(){m.fill(0)}destroy(){this.destroyed=!0,this.buffer.fill(0),this.set(0,0,0,0,0)}}r.RIPEMD160=y,r.ripemd160=(0,a.wrapConstructor)(()=>new y)},942340,(e,t,r)=>{"use strict";function n(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function a(e,...t){if(!n(e))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function i(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function s(e){if("function"!=typeof e)throw Error("function expected");return!0}function o(e,t){if("string"!=typeof t)throw Error(`${e}: string expected`);return!0}function l(e){if(!Number.isSafeInteger(e))throw Error(`invalid integer: ${e}`)}function c(e){if(!Array.isArray(e))throw Error("array expected")}function u(e,t){if(!i(!0,t))throw Error(`${e}: array of strings expected`)}function d(e,t){if(!i(!1,t))throw Error(`${e}: array of numbers expected`)}function h(...e){let t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map(e=>e.encode).reduceRight(r,t),decode:e.map(e=>e.decode).reduce(r,t)}}function f(e){let t="string"==typeof e?e.split(""):e,r=t.length;u("alphabet",t);let n=new Map(t.map((e,t)=>[e,t]));return{encode:n=>(c(n),n.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw Error(`alphabet.encode: digit index outside alphabet "${n}". Allowed: ${e}`);return t[n]})),decode:t=>(c(t),t.map(t=>{o("alphabet.decode",t);let r=n.get(t);if(void 0===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}function p(e=""){return o("join",e),{encode:t=>(u("join.decode",t),t.join(e)),decode:t=>(o("join.decode",t),t.split(e))}}function g(e,t="="){return l(e),o("padding",t),{encode(r){for(u("padding.encode",r);r.length*e%8;)r.push(t);return r},decode(r){u("padding.decode",r);let n=r.length;if(n*e%8)throw Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if((n-1)*e%8==0)throw Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}function m(e){return s(e),{encode:e=>e,decode:t=>e(t)}}function y(e,t,r){if(t<2)throw Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(r<2)throw Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(c(e),!e.length)return[];let n=0,a=[],i=Array.from(e,e=>{if(l(e),e<0||e>=t)throw Error(`invalid integer: ${e}`);return e}),s=i.length;for(;;){let e=0,o=!0;for(let a=n;a<s;a++){let s=i[a],l=t*e,c=l+s;if(!Number.isSafeInteger(c)||l/t!==e||c-s!==l)throw Error("convertRadix: carry overflow");let u=c/r;e=c%r;let d=Math.floor(u);if(i[a]=d,!Number.isSafeInteger(d)||d*r+e!==c)throw Error("convertRadix: carry overflow");o&&(d?o=!1:n=a)}if(a.push(e),o)break}for(let t=0;t<e.length-1&&0===e[t];t++)a.push(0);return a.reverse()}Object.defineProperty(r,"__esModule",{value:!0}),r.bytes=r.stringToBytes=r.str=r.bytesToString=r.hex=r.utf8=r.bech32m=r.bech32=r.base58check=r.createBase58check=r.base58xmr=r.base58xrp=r.base58flickr=r.base58=r.base64urlnopad=r.base64url=r.base64nopad=r.base64=r.base32crockford=r.base32hexnopad=r.base32hex=r.base32nopad=r.base32=r.base16=r.utils=void 0;let b=(e,t)=>0===t?e:b(t,e%t),_=(e,t)=>e+(t-b(e,t)),w=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function E(e,t,r,n){if(c(e),t<=0||t>32)throw Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw Error(`convertRadix2: wrong to=${r}`);if(_(t,r)>32)throw Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${_(t,r)}`);let a=0,i=0,s=w[t],o=w[r]-1,u=[];for(let n of e){if(l(n),n>=s)throw Error(`convertRadix2: invalid data word=${n} from=${t}`);if(a=a<<t|n,i+t>32)throw Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=r;i-=r)u.push((a>>i-r&o)>>>0);let e=w[i];if(void 0===e)throw Error("invalid carry");a&=e-1}if(a=a<<r-i&o,!n&&i>=t)throw Error("Excess padding");if(!n&&a>0)throw Error(`Non-zero padding: ${a}`);return n&&i>0&&u.push(a>>>0),u}function v(e){return l(e),{encode:t=>{if(!n(t))throw Error("radix.encode input should be Uint8Array");return y(Array.from(t),256,e)},decode:t=>(d("radix.decode",t),Uint8Array.from(y(t,e,256)))}}function S(e,t=!1){if(l(e),e<=0||e>32)throw Error("radix2: bits should be in (0..32]");if(_(8,e)>32||_(e,8)>32)throw Error("radix2: carry overflow");return{encode:r=>{if(!n(r))throw Error("radix2.encode input should be Uint8Array");return E(Array.from(r),8,e,!t)},decode:r=>(d("radix2.decode",r),Uint8Array.from(E(r,e,8,t)))}}function x(e){return s(e),function(...t){try{return e.apply(null,t)}catch(e){}}}function T(e,t){return l(e),s(t),{encode(r){if(!n(r))throw Error("checksum.encode: input should be Uint8Array");let a=t(r).slice(0,e),i=new Uint8Array(r.length+e);return i.set(r),i.set(a,r.length),i},decode(r){if(!n(r))throw Error("checksum.decode: input should be Uint8Array");let a=r.slice(0,-e),i=r.slice(-e),s=t(a).slice(0,e);for(let t=0;t<e;t++)if(s[t]!==i[t])throw Error("Invalid checksum");return a}}}r.utils={alphabet:f,chain:h,checksum:T,convertRadix:y,convertRadix2:E,radix:v,radix2:S,join:p,padding:g},r.base16=h(S(4),f("0123456789ABCDEF"),p("")),r.base32=h(S(5),f("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),g(5),p("")),r.base32nopad=h(S(5),f("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),p("")),r.base32hex=h(S(5),f("0123456789ABCDEFGHIJKLMNOPQRSTUV"),g(5),p("")),r.base32hexnopad=h(S(5),f("0123456789ABCDEFGHIJKLMNOPQRSTUV"),p("")),r.base32crockford=h(S(5),f("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),p(""),m(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1")));let A="function"==typeof Uint8Array.from([]).toBase64&&"function"==typeof Uint8Array.fromBase64,k=(e,t)=>{if(o("base64",e),e.length>0&&!(t?/^[A-Za-z0-9=_-]+$/:/^[A-Za-z0-9=+/]+$/).test(e))throw Error("invalid base64");return Uint8Array.fromBase64(e,{alphabet:t?"base64url":"base64",lastChunkHandling:"strict"})};r.base64=A?{encode:e=>(a(e),e.toBase64()),decode:e=>k(e,!1)}:h(S(6),f("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),g(6),p("")),r.base64nopad=h(S(6),f("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),p("")),r.base64url=A?{encode:e=>(a(e),e.toBase64({alphabet:"base64url"})),decode:e=>k(e,!0)}:h(S(6),f("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),g(6),p("")),r.base64urlnopad=h(S(6),f("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),p(""));let I=e=>h(v(58),f(e),p(""));r.base58=I("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),r.base58flickr=I("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),r.base58xrp=I("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");let C=[0,2,3,5,6,7,9,10,11];r.base58xmr={encode(e){let t="";for(let n=0;n<e.length;n+=8){let a=e.subarray(n,n+8);t+=r.base58.encode(a).padStart(C[a.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){let a=e.slice(n,n+11),i=C.indexOf(a.length),s=r.base58.decode(a);for(let e=0;e<s.length-i;e++)if(0!==s[e])throw Error("base58xmr: wrong padding");t=t.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(t)}},r.createBase58check=e=>h(T(4,t=>e(e(t))),r.base58),r.base58check=r.createBase58check;let B=h(f("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),p("")),O=[0x3b6a57b2,0x26508e6d,0x1ea119fa,0x3d4233dd,0x2a1462b3];function N(e){let t=e>>25,r=(0x1ffffff&e)<<5;for(let e=0;e<O.length;e++)(t>>e&1)==1&&(r^=O[e]);return r}function P(e,t,r=1){let n=e.length,a=1;for(let t=0;t<n;t++){let r=e.charCodeAt(t);if(r<33||r>126)throw Error(`Invalid prefix (${e})`);a=N(a)^r>>5}a=N(a);for(let t=0;t<n;t++)a=N(a)^31&e.charCodeAt(t);for(let e of t)a=N(a)^e;for(let e=0;e<6;e++)a=N(a);return a^=r,B.encode(E([a%w[30]],30,5,!1))}function D(e){let t="bech32"===e?1:0x2bc830a3,r=S(5),a=r.decode,i=r.encode,s=x(a);function l(e,r,a=90){o("bech32.encode prefix",e),n(r)&&(r=Array.from(r)),d("bech32.encode",r);let i=e.length;if(0===i)throw TypeError(`Invalid prefix length ${i}`);let s=i+7+r.length;if(!1!==a&&s>a)throw TypeError(`Length ${s} exceeds limit ${a}`);let c=e.toLowerCase(),u=P(c,r,t);return`${c}1${B.encode(r)}${u}`}function c(e,r=90){o("bech32.decode input",e);let n=e.length;if(n<8||!1!==r&&n>r)throw TypeError(`invalid string length: ${n} (${e}). Expected (8..${r})`);let a=e.toLowerCase();if(e!==a&&e!==e.toUpperCase())throw Error("String must be lowercase or uppercase");let i=a.lastIndexOf("1");if(0===i||-1===i)throw Error('Letter "1" must be present between prefix and data only');let s=a.slice(0,i),l=a.slice(i+1);if(l.length<6)throw Error("Data must be at least 6 characters long");let u=B.decode(l).slice(0,-6),d=P(s,u,t);if(!l.endsWith(d))throw Error(`Invalid checksum in ${e}: expected "${d}"`);return{prefix:s,words:u}}let u=x(c);return{encode:l,decode:c,encodeFromBytes:function(e,t){return l(e,i(t))},decodeToBytes:function(e){let{prefix:t,words:r}=c(e,!1);return{prefix:t,words:r,bytes:a(r)}},decodeUnsafe:u,fromWords:a,fromWordsUnsafe:s,toWords:i}}r.bech32=D("bech32"),r.bech32m=D("bech32m"),r.utf8={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},r.hex="function"==typeof Uint8Array.from([]).toHex&&"function"==typeof Uint8Array.fromHex?{encode:e=>(a(e),e.toHex()),decode:e=>(o("hex",e),Uint8Array.fromHex(e))}:h(S(4),f("0123456789abcdef"),p(""),m(e=>{if("string"!=typeof e||e.length%2!=0)throw TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));let R={utf8:r.utf8,hex:r.hex,base16:r.base16,base32:r.base32,base64:r.base64,base64url:r.base64url,base58:r.base58,base58xmr:r.base58xmr},L="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";r.bytesToString=(e,t)=>{if("string"!=typeof e||!R.hasOwnProperty(e))throw TypeError(L);if(!n(t))throw TypeError("bytesToString() expects Uint8Array");return R[e].encode(t)},r.str=r.bytesToString,r.stringToBytes=(e,t)=>{if(!R.hasOwnProperty(e))throw TypeError(L);if("string"!=typeof t)throw TypeError("stringToBytes() expects string");return R[e].decode(t)},r.bytes=r.stringToBytes},743618,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r._TEST=r.ZeroPad=r.magicBytes=r.flag=r.cstring=r.string=r.hex=r.bytes=r.bool=r.F64LE=r.F64BE=r.F32LE=r.F32BE=r.I8=r.U8=r.I16BE=r.I16LE=r.U16BE=r.U16LE=r.I32BE=r.I32LE=r.U32BE=r.U32LE=r.int=r.I64BE=r.I64LE=r.U64BE=r.U64LE=r.I128BE=r.I128LE=r.U128BE=r.U128LE=r.I256BE=r.I256LE=r.U256BE=r.U256LE=r.bigint=r.bits=r.coders=r.wrap=r.utils=r.NULL=r.EMPTY=void 0,r.validate=y,r.isCoder=_,r.prefix=function(e,t){if(!_(t))throw Error(`prefix: invalid inner value ${t}`);return A(T(e),w(t))},r.apply=A,r.lazy=function(e){if("function"!=typeof e)throw Error(`lazy: expected function, got ${typeof e}`);return(0,r.wrap)({encodeStream:(t,r)=>e().encodeStream(t,r),decodeStream:t=>e().decodeStream(t)})},r.flagged=function(e,t,n){if(!_(t))throw Error(`flagged: invalid inner value ${t}`);if("string"!=typeof e&&!_(t))throw Error(`flagged: wrong path=${e}`);return(0,r.wrap)({encodeStream:(r,a)=>{"string"==typeof e?d.resolve(r.stack,e)?t.encodeStream(r,a):n&&t.encodeStream(r,n):(e.encodeStream(r,!!a),a?t.encodeStream(r,a):n&&t.encodeStream(r,n))},decodeStream:r=>{if("string"==typeof e?!!d.resolve(r.stack,e):e.decodeStream(r))return t.decodeStream(r);n&&t.decodeStream(r)}})},r.optional=function(e,t,n){if(!_(e)||!_(t))throw Error(`optional: invalid flag or inner value flag=${e} inner=${t}`);return(0,r.wrap)({size:void 0!==n&&e.size&&t.size?e.size+t.size:void 0,encodeStream:(r,a)=>{e.encodeStream(r,!!a),a?t.encodeStream(r,a):void 0!==n&&t.encodeStream(r,n)},decodeStream:r=>{if(e.decodeStream(r))return t.decodeStream(r);void 0!==n&&t.decodeStream(r)}})},r.magic=k,r.constant=function(e){return(0,r.wrap)({encodeStream:(t,r)=>{if(r!==e)throw Error(`constant: invalid value ${r} (exp: ${e})`)},decodeStream:t=>e})},r.struct=function(e){if(!o(e))throw Error(`struct: expected plain object, got ${e}`);for(let t in e)if(!_(e[t]))throw Error(`struct: field ${t} is not CoderType`);return(0,r.wrap)({size:I(Object.values(e)),encodeStream:(t,r)=>{t.pushObj(r,n=>{for(let a in e)n(a,()=>e[a].encodeStream(t,r[a]))})},decodeStream:t=>{let r={};return t.pushObj(r,n=>{for(let a in e)n(a,()=>r[a]=e[a].decodeStream(t))}),r},validate:e=>{if("object"!=typeof e||null===e)throw Error(`struct: invalid value ${e}`);return e}})},r.tuple=function(e){if(!Array.isArray(e))throw Error(`Packed.Tuple: got ${typeof e} instead of array`);for(let t=0;t<e.length;t++)if(!_(e[t]))throw Error(`tuple: field ${t} is not CoderType`);return(0,r.wrap)({size:I(e),encodeStream:(t,r)=>{if(!Array.isArray(r))throw t.err(`tuple: invalid value ${r}`);t.pushObj(r,n=>{for(let a=0;a<e.length;a++)n(`${a}`,()=>e[a].encodeStream(t,r[a]))})},decodeStream:t=>{let r=[];return t.pushObj(r,n=>{for(let a=0;a<e.length;a++)n(`${a}`,()=>r.push(e[a].decodeStream(t)))}),r},validate:t=>{if(!Array.isArray(t))throw Error(`tuple: invalid value ${t}`);if(t.length!==e.length)throw Error(`tuple: wrong length=${t.length}, expected ${e.length}`);return t}})},r.array=function(e,t){if(!_(t))throw Error(`array: invalid inner value ${t}`);let n=c("string"==typeof e?`../${e}`:e);return(0,r.wrap)({size:"number"==typeof e&&t.size?e*t.size:void 0,encodeStream:(r,s)=>{r.pushObj(s,o=>{i(e)||n.encodeStream(r,s.length);for(let n=0;n<s.length;n++)o(`${n}`,()=>{let o=s[n],l=r.pos;if(t.encodeStream(r,o),i(e)){if(e.length>r.pos-l)return;let t=r.finish(!1).subarray(l,r.pos);if(a(t.subarray(0,e.length),e))throw r.err(`array: inner element encoding same as separator. elm=${o} data=${t}`)}})}),i(e)&&r.bytes(e)},decodeStream:r=>{let s=[];return r.pushObj(s,o=>{if(null===e)for(let e=0;!r.isEnd()&&(o(`${e}`,()=>s.push(t.decodeStream(r))),!t.size||!(r.leftBytes<t.size));e++);else if(i(e))for(let n=0;;n++){if(a(r.bytes(e.length,!0),e)){r.bytes(e.length);break}o(`${n}`,()=>s.push(t.decodeStream(r)))}else{let e;o("arrayLen",()=>e=n.decodeStream(r));for(let n=0;n<e;n++)o(`${n}`,()=>s.push(t.decodeStream(r)))}}),s},validate:e=>{if(!Array.isArray(e))throw Error(`array: invalid value ${e}`);return e}})},r.map=C,r.tag=B,r.mappedTag=function(e,t){if(!_(e))throw Error(`mappedTag: invalid tag value ${B}`);if(!o(t))throw Error("mappedTag: variants should be plain object");let r={},n={};for(let e in t){let a=t[e];r[e]=a[0],n[e]=a[1]}return B(C(e,r),n)},r.bitset=function(e,t=!1){if("boolean"!=typeof t)throw Error(`bitset/pad: expected boolean, got ${typeof t}`);if(!Array.isArray(e))throw Error("bitset/names: expected array");for(let t of e)if("string"!=typeof t)throw Error("bitset/names: expected array of strings");return(0,r.wrap)({encodeStream:(r,n)=>{for(let t=0;t<e.length;t++)r.bits(+n[e[t]],1);t&&e.length%8&&r.bits(0,8-e.length%8)},decodeStream:r=>{let n={};for(let t=0;t<e.length;t++)n[e[t]]=!!r.bits(1);return t&&e.length%8&&r.bits(8-e.length%8),n},validate:e=>{if(!o(e))throw Error(`bitset: invalid value ${e}`);for(let t of Object.values(e))if("boolean"!=typeof t)throw Error("expected boolean");return e}})},r.padLeft=function(e,t,n){if(!l(e)||e<=0)throw Error(`padLeft: wrong blockSize=${e}`);if(!_(t))throw Error(`padLeft: invalid inner value ${t}`);if(void 0!==n&&"function"!=typeof n)throw Error(`padLeft: wrong padFn=${typeof n}`);let a=n||r.ZeroPad;if(!t.size)throw Error("padLeft cannot have dynamic size");return(0,r.wrap)({size:t.size+O(e,t.size),encodeStream:(r,n)=>{let i=O(e,t.size);for(let e=0;e<i;e++)r.byte(a(e));t.encodeStream(r,n)},decodeStream:r=>(r.bytes(O(e,t.size)),t.decodeStream(r))})},r.padRight=function(e,t,n){if(!_(t))throw Error(`padRight: invalid inner value ${t}`);if(!l(e)||e<=0)throw Error(`padLeft: wrong blockSize=${e}`);if(void 0!==n&&"function"!=typeof n)throw Error(`padRight: wrong padFn=${typeof n}`);let a=n||r.ZeroPad;return(0,r.wrap)({size:t.size?t.size+O(e,t.size):void 0,encodeStream:(r,n)=>{let i=r.pos;t.encodeStream(r,n);let s=O(e,r.pos-i);for(let e=0;e<s;e++)r.byte(a(e))},decodeStream:r=>{let n=r.pos,a=t.decodeStream(r);return r.bytes(O(e,r.pos-n)),a}})},r.pointer=function(e,t,n=!1){if(!_(e))throw Error(`pointer: invalid ptr value ${e}`);if(!_(t))throw Error(`pointer: invalid inner value ${t}`);if("boolean"!=typeof n)throw Error(`pointer/sized: expected boolean, got ${typeof n}`);if(!e.size)throw Error("unsized pointer");return(0,r.wrap)({size:n?e.size:void 0,encodeStream:(r,n)=>{let a=r.pos;e.encodeStream(r,0),r.ptrs.push({pos:a,ptr:e,buffer:t.encode(n)})},decodeStream:r=>{let n=e.decodeStream(r);return r._enablePointers(),t.decodeStream(r.offsetReader(n))}})};let n=e.r(942340);function a(e,t){if(e.length!==t.length)return!1;for(let r=0;r<e.length;r++)if(e[r]!==t[r])return!1;return!0}function i(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}r.EMPTY=new Uint8Array,r.NULL=new Uint8Array([0]);let s=e=>new DataView(e.buffer,e.byteOffset,e.byteLength);function o(e){return"[object Object]"===Object.prototype.toString.call(e)}function l(e){return Number.isSafeInteger(e)}r.utils={equalBytes:a,isBytes:i,isCoder:_,checkBounds:g,concatBytes:function(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];if(!i(n))throw Error("Uint8Array expected");t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let a=e[t];r.set(a,n),n+=a.length}return r},createView:s,isPlainObject:o};let c=e=>{if(null!==e&&"string"!=typeof e&&!_(e)&&!i(e)&&!l(e))throw Error(`lengthCoder: expected null | number | Uint8Array | CoderType, got ${e} (${typeof e})`);return{encodeStream(t,r){let n;if(null!==e){if(_(e))return e.encodeStream(t,r);if("number"==typeof e?n=e:"string"==typeof e&&(n=d.resolve(t.stack,e)),"bigint"==typeof n&&(n=Number(n)),void 0===n||n!==r)throw t.err(`Wrong length: ${n} len=${e} exp=${r} (${typeof r})`)}},decodeStream(t){let r;if(_(e)?r=Number(e.decodeStream(t)):"number"==typeof e?r=e:"string"==typeof e&&(r=d.resolve(t.stack,e)),"bigint"==typeof r&&(r=Number(r)),"number"!=typeof r)throw t.err(`Wrong length: ${r}`);return r}}},u={BITS:32,FULL_MASK:0xffffffff,len:e=>Math.ceil(e/32),create:e=>new Uint32Array(u.len(e)),clean:e=>e.fill(0),debug:e=>Array.from(e).map(e=>(e>>>0).toString(2).padStart(32,"0")),checkLen:(e,t)=>{if(u.len(t)!==e.length)throw Error(`wrong length=${e.length}. Expected: ${u.len(t)}`)},chunkLen:(e,t,r)=>{if(t<0)throw Error(`wrong pos=${t}`);if(t+r>e)throw Error(`wrong range=${t}/${r} of ${e}`)},set:(e,t,r,n=!0)=>(!!n||(e[t]&r)==0)&&(e[t]|=r,!0),pos:(e,t)=>({chunk:Math.floor((e+t)/32),mask:1<<32-(e+t)%32-1}),indices:(e,t,r=!1)=>{u.checkLen(e,t);let{FULL_MASK:n,BITS:a}=u,i=a-t%a,s=i?n>>>i<<i:n,o=[];for(let t=0;t<e.length;t++){let n=e[t];if(r&&(n=~n),t===e.length-1&&(n&=s),0!==n)for(let e=0;e<a;e++)n&1<<a-e-1&&o.push(t*a+e)}return o},range:e=>{let t,r=[];for(let n of e)void 0===t||n!==t.pos+t.length?r.push(t={pos:n,length:1}):t.length+=1;return r},rangeDebug:(e,t,r=!1)=>`[${u.range(u.indices(e,t,r)).map(e=>`(${e.pos}/${e.length})`).join(", ")}]`,setRange:(e,t,r,n,a=!0)=>{u.chunkLen(t,r,n);let{FULL_MASK:i,BITS:s}=u,o=r%s?Math.floor(r/s):void 0,l=r+n,c=l%s?Math.floor(l/s):void 0;if(void 0!==o&&o===c)return u.set(e,o,i>>>s-n<<s-n-r,a);if(void 0!==o&&!u.set(e,o,i>>>r%s,a))return!1;let d=void 0!==o?o+1:r/s,h=void 0!==c?c:l/s;for(let t=d;t<h;t++)if(!u.set(e,t,i,a))return!1;return void 0===c||o===c||!!u.set(e,c,i<<s-l%s,a)}},d={pushObj:(e,t,r)=>{let n={obj:t};e.push(n),r((e,t)=>{n.field=e,t(),n.field=void 0}),e.pop()},path:e=>{let t=[];for(let r of e)void 0!==r.field&&t.push(r.field);return t.join("/")},err:(e,t,r)=>{let n=Error(`${e}(${d.path(t)}): ${"string"==typeof r?r:r.message}`);return r instanceof Error&&r.stack&&(n.stack=r.stack),n},resolve:(e,t)=>{let r=t.split("/"),n=e.map(e=>e.obj),a=0;for(;a<r.length;a++)if(".."===r[a])n.pop();else break;let i=n.pop();for(;a<r.length;a++){if(!i||void 0===i[r[a]])return;i=i[r[a]]}return i}};class h{constructor(e,t={},r=[],n,a=0){this.pos=0,this.bitBuf=0,this.bitPos=0,this.data=e,this.opts=t,this.stack=r,this.parent=n,this.parentOffset=a,this.view=s(e)}_enablePointers(){if(this.parent)return this.parent._enablePointers();this.bs||(this.bs=u.create(this.data.length),u.setRange(this.bs,this.data.length,0,this.pos,this.opts.allowMultipleReads))}markBytesBS(e,t){return this.parent?this.parent.markBytesBS(this.parentOffset+e,t):!t||!this.bs||u.setRange(this.bs,this.data.length,e,t,!1)}markBytes(e){let t=this.pos;this.pos+=e;let r=this.markBytesBS(t,e);if(!this.opts.allowMultipleReads&&!r)throw this.err(`multiple read pos=${this.pos} len=${e}`);return r}pushObj(e,t){return d.pushObj(this.stack,e,t)}readView(e,t){if(!Number.isFinite(e))throw this.err(`readView: wrong length=${e}`);if(this.pos+e>this.data.length)throw this.err("readView: Unexpected end of buffer");let r=t(this.view,this.pos);return this.markBytes(e),r}absBytes(e){if(e>this.data.length)throw Error("Unexpected end of buffer");return this.data.subarray(e)}finish(){if(!this.opts.allowUnreadBytes){if(this.bitPos)throw this.err(`${this.bitPos} bits left after unpack: ${n.hex.encode(this.data.slice(this.pos))}`);if(this.bs&&!this.parent){let e=u.indices(this.bs,this.data.length,!0);if(!e.length)return;{let t=u.range(e).map(({pos:e,length:t})=>`(${e}/${t})[${n.hex.encode(this.data.subarray(e,e+t))}]`).join(", ");throw this.err(`unread byte ranges: ${t} (total=${this.data.length})`)}}if(!this.isEnd())throw this.err(`${this.leftBytes} bytes ${this.bitPos} bits left after unpack: ${n.hex.encode(this.data.slice(this.pos))}`)}}err(e){return d.err("Reader",this.stack,e)}offsetReader(e){if(e>this.data.length)throw this.err("offsetReader: Unexpected end of buffer");return new h(this.absBytes(e),this.opts,this.stack,this,e)}bytes(e,t=!1){if(this.bitPos)throw this.err("readBytes: bitPos not empty");if(!Number.isFinite(e))throw this.err(`readBytes: wrong length=${e}`);if(this.pos+e>this.data.length)throw this.err("readBytes: Unexpected end of buffer");let r=this.data.subarray(this.pos,this.pos+e);return t||this.markBytes(e),r}byte(e=!1){if(this.bitPos)throw this.err("readByte: bitPos not empty");if(this.pos+1>this.data.length)throw this.err("readBytes: Unexpected end of buffer");let t=this.data[this.pos];return e||this.markBytes(1),t}get leftBytes(){return this.data.length-this.pos}get totalBytes(){return this.data.length}isEnd(){return this.pos>=this.data.length&&!this.bitPos}bits(e){if(e>32)throw this.err("BitReader: cannot read more than 32 bits in single call");let t=0;for(;e;){this.bitPos||(this.bitBuf=this.byte(),this.bitPos=8);let r=Math.min(e,this.bitPos);this.bitPos-=r,t=t<<r|this.bitBuf>>this.bitPos&2**r-1,this.bitBuf&=2**this.bitPos-1,e-=r}return t>>>0}find(e,t=this.pos){if(!i(e))throw this.err(`find: needle is not bytes! ${e}`);if(this.bitPos)throw this.err("findByte: bitPos not empty");if(!e.length)throw this.err("find: needle is empty");for(let r=t;-1!==(r=this.data.indexOf(e[0],r))&&-1!==r&&!(this.data.length-r<e.length);r++)if(a(e,this.data.subarray(r,r+e.length)))return r}}class f{constructor(e=[]){this.pos=0,this.buffers=[],this.ptrs=[],this.bitBuf=0,this.bitPos=0,this.viewBuf=new Uint8Array(8),this.finished=!1,this.stack=e,this.view=s(this.viewBuf)}pushObj(e,t){return d.pushObj(this.stack,e,t)}writeView(e,t){if(this.finished)throw this.err("buffer: finished");if(!l(e)||e>8)throw Error(`wrong writeView length=${e}`);t(this.view),this.bytes(this.viewBuf.slice(0,e)),this.viewBuf.fill(0)}err(e){if(this.finished)throw this.err("buffer: finished");return d.err("Reader",this.stack,e)}bytes(e){if(this.finished)throw this.err("buffer: finished");if(this.bitPos)throw this.err("writeBytes: ends with non-empty bit buffer");this.buffers.push(e),this.pos+=e.length}byte(e){if(this.finished)throw this.err("buffer: finished");if(this.bitPos)throw this.err("writeByte: ends with non-empty bit buffer");this.buffers.push(new Uint8Array([e])),this.pos++}finish(e=!0){if(this.finished)throw this.err("buffer: finished");if(this.bitPos)throw this.err("buffer: ends with non-empty bit buffer");let t=this.buffers.concat(this.ptrs.map(e=>e.buffer)),r=new Uint8Array(t.map(e=>e.length).reduce((e,t)=>e+t,0));for(let e=0,n=0;e<t.length;e++){let a=t[e];r.set(a,n),n+=a.length}for(let e=this.pos,t=0;t<this.ptrs.length;t++){let n=this.ptrs[t];r.set(n.ptr.encode(e),n.pos),e+=n.buffer.length}if(e){for(let e of(this.buffers=[],this.ptrs))e.buffer.fill(0);this.ptrs=[],this.finished=!0,this.bitBuf=0}return r}bits(e,t){if(t>32)throw this.err("writeBits: cannot write more than 32 bits in single call");if(e>=2**t)throw this.err(`writeBits: value (${e}) >= 2**bits (${t})`);for(;t;){let r=Math.min(t,8-this.bitPos);this.bitBuf=this.bitBuf<<r|e>>t-r,this.bitPos+=r,t-=r,e&=2**t-1,8===this.bitPos&&(this.bitPos=0,this.buffers.push(new Uint8Array([this.bitBuf])),this.pos++)}}}let p=e=>Uint8Array.from(e).reverse();function g(e,t,r){if(r){let r=2n**(t-1n);if(e<-r||e>=r)throw Error(`value out of signed bounds. Expected ${-r} <= ${e} < ${r}`)}else if(0n>e||e>=2n**t)throw Error(`value out of unsigned bounds. Expected 0 <= ${e} < ${2n**t}`)}function m(e){return{encodeStream:e.encodeStream,decodeStream:e.decodeStream,size:e.size,encode:t=>{let r=new f;return e.encodeStream(r,t),r.finish()},decode:(t,r={})=>{let n=new h(t,r),a=e.decodeStream(n);return n.finish(),a}}}function y(e,t){if(!_(e))throw Error(`validate: invalid inner value ${e}`);if("function"!=typeof t)throw Error("validate: fn should be function");return m({size:e.size,encodeStream:(r,n)=>{let a;try{a=t(n)}catch(e){throw r.err(e)}e.encodeStream(r,a)},decodeStream:r=>{let n=e.decodeStream(r);try{return t(n)}catch(e){throw r.err(e)}}})}r.wrap=e=>{let t=m(e);return e.validate?y(t,e.validate):t};let b=e=>o(e)&&"function"==typeof e.decode&&"function"==typeof e.encode;function _(e){return o(e)&&b(e)&&"function"==typeof e.encodeStream&&"function"==typeof e.decodeStream&&(void 0===e.size||l(e.size))}let w=e=>{if(!b(e))throw Error("BaseCoder expected");return{encode:e.decode,decode:e.encode}};r.coders={dict:function(){return{encode:e=>{if(!Array.isArray(e))throw Error("array expected");let t={};for(let r of e){if(!Array.isArray(r)||2!==r.length)throw Error("array of two elements expected");let e=r[0],n=r[1];if(void 0!==t[e])throw Error(`key(${e}) appears twice in struct`);t[e]=n}return t},decode:e=>{if(!o(e))throw Error(`expected plain object, got ${e}`);return Object.entries(e)}}},numberBigint:{encode:e=>{if("bigint"!=typeof e)throw Error(`expected bigint, got ${typeof e}`);if(e>BigInt(Number.MAX_SAFE_INTEGER))throw Error(`element bigger than MAX_SAFE_INTEGER=${e}`);return Number(e)},decode:e=>{if(!l(e))throw Error("element is not a safe integer");return BigInt(e)}},tsEnum:function(e){if(!o(e))throw Error("plain object expected");return{encode:t=>{if(!l(t)||!(t in e))throw Error(`wrong value ${t}`);return e[t]},decode:t=>{if("string"!=typeof t)throw Error(`wrong value ${typeof t}`);return e[t]}}},decimal:function(e,t=!1){if(!l(e))throw Error(`decimal/precision: wrong value ${e}`);if("boolean"!=typeof t)throw Error(`decimal/round: expected boolean, got ${typeof t}`);let r=10n**BigInt(e);return{encode:t=>{if("bigint"!=typeof t)throw Error(`expected bigint, got ${typeof t}`);let r=(t<0n?-t:t).toString(10),n=r.length-e;n<0&&(r=r.padStart(r.length-n,"0"),n=0);let a=r.length-1;for(;a>=n&&"0"===r[a];a--);let i=r.slice(0,n),s=r.slice(n,a+1);return(i||(i="0"),t<0n&&(i="-"+i),s)?`${i}.${s}`:i},decode:n=>{if("string"!=typeof n)throw Error(`expected string, got ${typeof n}`);if("-0"===n)throw Error("negative zero is not allowed");let a=!1;if(n.startsWith("-")&&(a=!0,n=n.slice(1)),!/^(0|[1-9]\d*)(\.\d+)?$/.test(n))throw Error(`wrong string value=${n}`);let i=n.indexOf(".");i=-1===i?n.length:i;let s=n.slice(0,i),o=n.slice(i+1).replace(/0+$/,""),l=BigInt(s)*r;if(!t&&o.length>e)throw Error(`fractional part cannot be represented with this precision (num=${n}, prec=${e})`);let c=Math.min(o.length,e),u=l+BigInt(o.slice(0,c))*10n**BigInt(e-c);return a?-u:u}}},match:function(e){if(!Array.isArray(e))throw Error(`expected array, got ${typeof e}`);for(let t of e)if(!b(t))throw Error(`wrong base coder ${t}`);return{encode:t=>{for(let r of e){let e=r.encode(t);if(void 0!==e)return e}throw Error(`match/encode: cannot find match in ${t}`)},decode:t=>{for(let r of e){let e=r.decode(t);if(void 0!==e)return e}throw Error(`match/decode: cannot find match in ${t}`)}}},reverse:w},r.bits=e=>{if(!l(e))throw Error(`bits: wrong length ${e} (${typeof e})`);return(0,r.wrap)({encodeStream:(t,r)=>t.bits(r,e),decodeStream:t=>t.bits(e),validate:e=>{if(!l(e))throw Error(`bits: wrong value ${e}`);return e}})},r.bigint=(e,t=!1,n=!1,a=!0)=>{if(!l(e))throw Error(`bigint/size: wrong value ${e}`);if("boolean"!=typeof t)throw Error(`bigint/le: expected boolean, got ${typeof t}`);if("boolean"!=typeof n)throw Error(`bigint/signed: expected boolean, got ${typeof n}`);if("boolean"!=typeof a)throw Error(`bigint/sized: expected boolean, got ${typeof a}`);let i=BigInt(e),s=2n**(8n*i-1n);return(0,r.wrap)({size:a?e:void 0,encodeStream:(r,i)=>{n&&i<0&&(i|=s);let o=[];for(let t=0;t<e;t++)o.push(Number(255n&i)),i>>=8n;let l=new Uint8Array(o).reverse();if(!a){let e=0;for(e=0;e<l.length&&0===l[e];e++);l=l.subarray(e)}r.bytes(t?l.reverse():l)},decodeStream:r=>{let i=r.bytes(a?e:Math.min(e,r.leftBytes)),o=t?i:p(i),l=0n;for(let e=0;e<o.length;e++)l|=BigInt(o[e])<<8n*BigInt(e);return n&&l&s&&(l=(l^s)-s),l},validate:e=>{if("bigint"!=typeof e)throw Error(`bigint: invalid value: ${e}`);return g(e,8n*i,!!n),e}})},r.U256LE=(0,r.bigint)(32,!0),r.U256BE=(0,r.bigint)(32,!1),r.I256LE=(0,r.bigint)(32,!0,!0),r.I256BE=(0,r.bigint)(32,!1,!0),r.U128LE=(0,r.bigint)(16,!0),r.U128BE=(0,r.bigint)(16,!1),r.I128LE=(0,r.bigint)(16,!0,!0),r.I128BE=(0,r.bigint)(16,!1,!0),r.U64LE=(0,r.bigint)(8,!0),r.U64BE=(0,r.bigint)(8,!1),r.I64LE=(0,r.bigint)(8,!0,!0),r.I64BE=(0,r.bigint)(8,!1,!0),r.int=(e,t=!1,n=!1,a=!0)=>{if(!l(e))throw Error(`int/size: wrong value ${e}`);if("boolean"!=typeof t)throw Error(`int/le: expected boolean, got ${typeof t}`);if("boolean"!=typeof n)throw Error(`int/signed: expected boolean, got ${typeof n}`);if("boolean"!=typeof a)throw Error(`int/sized: expected boolean, got ${typeof a}`);if(e>6)throw Error("int supports size up to 6 bytes (48 bits): use bigints instead");return A((0,r.bigint)(e,t,n,a),r.coders.numberBigint)};let E=(e,t)=>(0,r.wrap)({size:e,encodeStream:(r,n)=>r.writeView(e,e=>t.write(e,n)),decodeStream:r=>r.readView(e,t.read),validate:e=>{if("number"!=typeof e)throw Error(`viewCoder: expected number, got ${typeof e}`);return t.validate&&t.validate(e),e}}),v=(e,t,r)=>{let n=8*e,a=2**(n-1),i=2**n;return E(e,{write:r.write,read:r.read,validate:t?e=>{if(!l(e))throw Error(`sintView: value is not safe integer: ${e}`);if(e<-a||e>=a)throw Error(`sintView: value out of bounds. Expected ${-a} <= ${e} < ${a}`)}:e=>{if(!l(e))throw Error(`uintView: value is not safe integer: ${e}`);if(0>e||e>=i)throw Error(`uintView: value out of bounds. Expected 0 <= ${e} < ${i}`)}})};r.U32LE=v(4,!1,{read:(e,t)=>e.getUint32(t,!0),write:(e,t)=>e.setUint32(0,t,!0)}),r.U32BE=v(4,!1,{read:(e,t)=>e.getUint32(t,!1),write:(e,t)=>e.setUint32(0,t,!1)}),r.I32LE=v(4,!0,{read:(e,t)=>e.getInt32(t,!0),write:(e,t)=>e.setInt32(0,t,!0)}),r.I32BE=v(4,!0,{read:(e,t)=>e.getInt32(t,!1),write:(e,t)=>e.setInt32(0,t,!1)}),r.U16LE=v(2,!1,{read:(e,t)=>e.getUint16(t,!0),write:(e,t)=>e.setUint16(0,t,!0)}),r.U16BE=v(2,!1,{read:(e,t)=>e.getUint16(t,!1),write:(e,t)=>e.setUint16(0,t,!1)}),r.I16LE=v(2,!0,{read:(e,t)=>e.getInt16(t,!0),write:(e,t)=>e.setInt16(0,t,!0)}),r.I16BE=v(2,!0,{read:(e,t)=>e.getInt16(t,!1),write:(e,t)=>e.setInt16(0,t,!1)}),r.U8=v(1,!1,{read:(e,t)=>e.getUint8(t),write:(e,t)=>e.setUint8(0,t)}),r.I8=v(1,!0,{read:(e,t)=>e.getInt8(t),write:(e,t)=>e.setInt8(0,t)});let S=e=>E(4,{read:(t,r)=>t.getFloat32(r,e),write:(t,r)=>t.setFloat32(0,r,e),validate:e=>{if(Math.fround(e)!==e&&!Number.isNaN(e))throw Error(`f32: wrong value=${e}`)}}),x=e=>E(8,{read:(t,r)=>t.getFloat64(r,e),write:(t,r)=>t.setFloat64(0,r,e)});r.F32BE=S(!1),r.F32LE=S(!0),r.F64BE=x(!1),r.F64LE=x(!0),r.bool=(0,r.wrap)({size:1,encodeStream:(e,t)=>e.byte(+!!t),decodeStream:e=>{let t=e.byte();if(0!==t&&1!==t)throw e.err(`bool: invalid value ${t}`);return 1===t},validate:e=>{if("boolean"!=typeof e)throw Error(`bool: invalid value ${e}`);return e}});let T=(e,t=!1)=>{if("boolean"!=typeof t)throw Error(`bytes/le: expected boolean, got ${typeof t}`);let n=c(e),a=i(e);return(0,r.wrap)({size:"number"==typeof e?e:void 0,encodeStream:(r,i)=>{a||n.encodeStream(r,i.length),r.bytes(t?p(i):i),a&&r.bytes(e)},decodeStream:r=>{let i;if(a){let t=r.find(e);if(!t)throw r.err("bytes: cannot find terminator");i=r.bytes(t-r.pos),r.bytes(e.length)}else i=r.bytes(null===e?r.leftBytes:n.decodeStream(r));return t?p(i):i},validate:e=>{if(!i(e))throw Error(`bytes: invalid value ${e}`);return e}})};function A(e,t){if(!_(e))throw Error(`apply: invalid inner value ${e}`);if(!b(t))throw Error(`apply: invalid base value ${e}`);return(0,r.wrap)({size:e.size,encodeStream:(r,n)=>{let a;try{a=t.decode(n)}catch(e){throw r.err(""+e)}return e.encodeStream(r,a)},decodeStream:r=>{let n=e.decodeStream(r);try{return t.encode(n)}catch(e){throw r.err(""+e)}}})}function k(e,t,n=!0){if(!_(e))throw Error(`magic: invalid inner value ${e}`);if("boolean"!=typeof n)throw Error(`magic: expected boolean, got ${typeof n}`);return(0,r.wrap)({size:e.size,encodeStream:(r,n)=>e.encodeStream(r,t),decodeStream:r=>{let s=e.decodeStream(r);if(n&&"object"!=typeof s&&s!==t||i(t)&&!a(t,s))throw r.err(`magic: invalid value: ${s} !== ${t}`)},validate:e=>{if(void 0!==e)throw Error(`magic: wrong value=${typeof e}`);return e}})}function I(e){let t=0;for(let r of e){if(void 0===r.size)return;if(!l(r.size))throw Error(`sizeof: wrong element size=${t}`);t+=r.size}return t}function C(e,t){if(!_(e))throw Error(`map: invalid inner value ${e}`);if(!o(t))throw Error("map: variants should be plain object");let n=new Map;for(let e in t)n.set(t[e],e);return(0,r.wrap)({size:e.size,encodeStream:(r,n)=>e.encodeStream(r,t[n]),decodeStream:t=>{let r=e.decodeStream(t),a=n.get(r);if(void 0===a)throw t.err(`Enum: unknown value: ${r} ${Array.from(n.keys())}`);return a},validate:e=>{if("string"!=typeof e)throw Error(`map: invalid value ${e}`);if(!(e in t))throw Error(`Map: unknown variant: ${e}`);return e}})}function B(e,t){if(!_(e))throw Error(`tag: invalid tag value ${e}`);if(!o(t))throw Error("tag: variants should be plain object");for(let e in t)if(!_(t[e]))throw Error(`tag: variant ${e} is not CoderType`);return(0,r.wrap)({size:e.size,encodeStream:(r,n)=>{let{TAG:a,data:i}=n,s=t[a];e.encodeStream(r,a),s.encodeStream(r,i)},decodeStream:r=>{let n=e.decodeStream(r),a=t[n];if(!a)throw r.err(`Tag: invalid tag ${n}`);return{TAG:n,data:a.decodeStream(r)}},validate:e=>{let{TAG:r}=e;if(!t[r])throw Error(`Tag: invalid tag ${r.toString()}`);return e}})}function O(e,t){return t%e==0?0:e-t%e}r.bytes=T,r.string=(e,t=!1)=>y(A(T(e,t),n.utf8),e=>{if("string"!=typeof e)throw Error(`expected string, got ${typeof e}`);return e}),r.cstring=(0,r.string)(r.NULL),r.hex=(e,t={isLE:!1,with0x:!1})=>{let r=A(T(e,t.isLE),n.hex),a=t.with0x;if("boolean"!=typeof a)throw Error(`hex/with0x: expected boolean, got ${typeof a}`);return a&&(r=A(r,{encode:e=>`0x${e}`,decode:e=>{if(!e.startsWith("0x"))throw Error("hex(with0x=true).encode input should start with 0x");return e.slice(2)}})),r},r.flag=(e,t=!1)=>{if(!i(e))throw Error(`flag/flagValue: expected Uint8Array, got ${typeof e}`);if("boolean"!=typeof t)throw Error(`flag/xor: expected boolean, got ${typeof t}`);return(0,r.wrap)({size:e.length,encodeStream:(r,n)=>{!!n!==t&&r.bytes(e)},decodeStream:r=>{let n=r.leftBytes>=e.length;return n&&(n=a(r.bytes(e.length,!0),e))&&r.bytes(e.length),n!==t},validate:e=>{if(void 0!==e&&"boolean"!=typeof e)throw Error(`flag: expected boolean value or undefined, got ${typeof e}`);return e}})},r.magicBytes=e=>{let t="string"==typeof e?n.utf8.decode(e):e;return k(T(t.length),t)},r.ZeroPad=e=>0,r._TEST={_bitset:u,_Reader:h,_Writer:f,Path:d}},196225,(e,t,r)=>{"use strict";var n;Object.defineProperty(r,"__esModule",{value:!0}),r.TEST_NETWORK=r.NETWORK=r.TAPROOT_UNSPENDABLE_KEY=r.PubT=r.tagSchnorr=r.signSchnorr=r.pubECDSA=r.pubSchnorr=r.randomPrivateKeyBytes=r.sha256x2=r.hash160=r.sha256=r.isBytes=r.equalBytes=r.concatBytes=void 0,r.signECDSA=function(e,t,r=!1){let n=a.secp256k1.sign(e,t);if(r&&!h(n)){let r=new Uint8Array(32),i=0;for(;!h(n);)if(r.set(o.U32LE.encode(i++)),n=a.secp256k1.sign(e,t,{extraEntropy:r}),i>0xffffffff)throw Error("lowR counter overflow: report the error")}return n.toDERRawBytes()},r.validatePubkey=function(e,t){let r=e.length;if(t===n.ecdsa){if(32===r)throw Error("Expected non-Schnorr key");return l.fromHex(e),e}if(t===n.schnorr){if(32!==r)throw Error("Expected 32-byte Schnorr key");return a.schnorr.utils.lift_x(a.schnorr.utils.bytesToNumberBE(e)),e}throw Error("Unknown key type")},r.tapTweak=f,r.taprootTweakPrivKey=function(e,t=new Uint8Array){let r=a.schnorr.utils,n=r.bytesToNumberBE(e),i=l.fromPrivateKey(n),s=i.hasEvenY()?n:r.mod(-n,c),o=f(r.pointToBytes(i),t);return r.numberToBytesBE(r.mod(s+o,c),32)},r.taprootTweakPubkey=function(e,t){let r=a.schnorr.utils,n=f(e,t),i=r.lift_x(r.bytesToNumberBE(e)).add(l.fromPrivateKey(n)),s=+!i.hasEvenY();return[r.pointToBytes(i),s]},r.compareBytes=function(e,t){if(!u(e)||!u(t))throw Error(`cmp: wrong type a=${typeof e} b=${typeof t}`);let r=Math.min(e.length,t.length);for(let n=0;n<r;n++)if(e[n]!=t[n])return Math.sign(e[n]-t[n]);return Math.sign(e.length-t.length)};let a=e.r(342070),i=e.r(797750),s=e.r(737898);Object.defineProperty(r,"sha256",{enumerable:!0,get:function(){return s.sha256}});let o=e.r(743618),l=a.secp256k1.ProjectivePoint,c=a.secp256k1.CURVE.n,u=o.utils.isBytes;r.isBytes=u;let d=o.utils.concatBytes;r.concatBytes=d,r.equalBytes=o.utils.equalBytes,r.hash160=e=>(0,i.ripemd160)((0,s.sha256)(e)),r.sha256x2=(...e)=>(0,s.sha256)((0,s.sha256)(d(...e))),r.randomPrivateKeyBytes=a.schnorr.utils.randomPrivateKey,r.pubSchnorr=a.schnorr.getPublicKey,r.pubECDSA=a.secp256k1.getPublicKey;let h=e=>e.r<c/2n;function f(e,t){let r=a.schnorr.utils,n=r.taggedHash("TapTweak",e,t),i=r.bytesToNumberBE(n);if(i>=c)throw Error("tweak higher than curve order");return i}r.signSchnorr=a.schnorr.sign,r.tagSchnorr=a.schnorr.utils.taggedHash,function(e){e[e.ecdsa=0]="ecdsa",e[e.schnorr=1]="schnorr"}(n||(r.PubT=n={})),r.TAPROOT_UNSPENDABLE_KEY=(0,s.sha256)(l.BASE.toRawBytes(!1)),r.NETWORK={bech32:"bc",pubKeyHash:0,scriptHash:5,wif:128},r.TEST_NETWORK={bech32:"tb",pubKeyHash:111,scriptHash:196,wif:239}},629086,(e,t,r)=>{"use strict";var n;Object.defineProperty(r,"__esModule",{value:!0}),r.RawOldTx=r.RawTx=r.RawOutput=r.RawInput=r.BTCArray=r.RawWitness=r.VarBytes=r.CompactSizeLen=r.CompactSize=r.Script=r.OP=r.MAX_SCRIPT_BYTE_LENGTH=void 0,r.ScriptNum=s,r.OpToNum=function(e,t=4,r=!0){if("number"==typeof e)return e;if((0,i.isBytes)(e))try{let n=s(t,r).decode(e);if(n>Number.MAX_SAFE_INTEGER)return;return Number(n)}catch(e){}};let a=e.r(743618),i=e.r(196225);function s(e=6,t=!1){return a.wrap({encodeStream:(e,t)=>{if(0n===t)return;let r=t<0,n=BigInt(t),a=[];for(let e=r?-n:n;e;e>>=8n)a.push(Number(255n&e));a[a.length-1]>=128?a.push(128*!!r):r&&(a[a.length-1]|=128),e.bytes(new Uint8Array(a))},decodeStream:r=>{let n=r.leftBytes;if(n>e)throw Error(`ScriptNum: number (${n}) bigger than limit=${e}`);if(0===n)return 0n;if(t){let e=r.bytes(n,!0);if((127&e[e.length-1])==0&&(n<=1||(128&e[e.length-2])==0))throw Error("Non-minimally encoded ScriptNum")}let a=0,i=0n;for(let e=0;e<n;++e)i|=BigInt(a=r.byte())<<8n*BigInt(e);return a>=128&&(i&=2n**BigInt(8*n)-1n>>1n,i=-i),i}})}r.MAX_SCRIPT_BYTE_LENGTH=520,function(e){e[e.OP_0=0]="OP_0",e[e.PUSHDATA1=76]="PUSHDATA1",e[e.PUSHDATA2=77]="PUSHDATA2",e[e.PUSHDATA4=78]="PUSHDATA4",e[e["1NEGATE"]=79]="1NEGATE",e[e.RESERVED=80]="RESERVED",e[e.OP_1=81]="OP_1",e[e.OP_2=82]="OP_2",e[e.OP_3=83]="OP_3",e[e.OP_4=84]="OP_4",e[e.OP_5=85]="OP_5",e[e.OP_6=86]="OP_6",e[e.OP_7=87]="OP_7",e[e.OP_8=88]="OP_8",e[e.OP_9=89]="OP_9",e[e.OP_10=90]="OP_10",e[e.OP_11=91]="OP_11",e[e.OP_12=92]="OP_12",e[e.OP_13=93]="OP_13",e[e.OP_14=94]="OP_14",e[e.OP_15=95]="OP_15",e[e.OP_16=96]="OP_16",e[e.NOP=97]="NOP",e[e.VER=98]="VER",e[e.IF=99]="IF",e[e.NOTIF=100]="NOTIF",e[e.VERIF=101]="VERIF",e[e.VERNOTIF=102]="VERNOTIF",e[e.ELSE=103]="ELSE",e[e.ENDIF=104]="ENDIF",e[e.VERIFY=105]="VERIFY",e[e.RETURN=106]="RETURN",e[e.TOALTSTACK=107]="TOALTSTACK",e[e.FROMALTSTACK=108]="FROMALTSTACK",e[e["2DROP"]=109]="2DROP",e[e["2DUP"]=110]="2DUP",e[e["3DUP"]=111]="3DUP",e[e["2OVER"]=112]="2OVER",e[e["2ROT"]=113]="2ROT",e[e["2SWAP"]=114]="2SWAP",e[e.IFDUP=115]="IFDUP",e[e.DEPTH=116]="DEPTH",e[e.DROP=117]="DROP",e[e.DUP=118]="DUP",e[e.NIP=119]="NIP",e[e.OVER=120]="OVER",e[e.PICK=121]="PICK",e[e.ROLL=122]="ROLL",e[e.ROT=123]="ROT",e[e.SWAP=124]="SWAP",e[e.TUCK=125]="TUCK",e[e.CAT=126]="CAT",e[e.SUBSTR=127]="SUBSTR",e[e.LEFT=128]="LEFT",e[e.RIGHT=129]="RIGHT",e[e.SIZE=130]="SIZE",e[e.INVERT=131]="INVERT",e[e.AND=132]="AND",e[e.OR=133]="OR",e[e.XOR=134]="XOR",e[e.EQUAL=135]="EQUAL",e[e.EQUALVERIFY=136]="EQUALVERIFY",e[e.RESERVED1=137]="RESERVED1",e[e.RESERVED2=138]="RESERVED2",e[e["1ADD"]=139]="1ADD",e[e["1SUB"]=140]="1SUB",e[e["2MUL"]=141]="2MUL",e[e["2DIV"]=142]="2DIV",e[e.NEGATE=143]="NEGATE",e[e.ABS=144]="ABS",e[e.NOT=145]="NOT",e[e["0NOTEQUAL"]=146]="0NOTEQUAL",e[e.ADD=147]="ADD",e[e.SUB=148]="SUB",e[e.MUL=149]="MUL",e[e.DIV=150]="DIV",e[e.MOD=151]="MOD",e[e.LSHIFT=152]="LSHIFT",e[e.RSHIFT=153]="RSHIFT",e[e.BOOLAND=154]="BOOLAND",e[e.BOOLOR=155]="BOOLOR",e[e.NUMEQUAL=156]="NUMEQUAL",e[e.NUMEQUALVERIFY=157]="NUMEQUALVERIFY",e[e.NUMNOTEQUAL=158]="NUMNOTEQUAL",e[e.LESSTHAN=159]="LESSTHAN",e[e.GREATERTHAN=160]="GREATERTHAN",e[e.LESSTHANOREQUAL=161]="LESSTHANOREQUAL",e[e.GREATERTHANOREQUAL=162]="GREATERTHANOREQUAL",e[e.MIN=163]="MIN",e[e.MAX=164]="MAX",e[e.WITHIN=165]="WITHIN",e[e.RIPEMD160=166]="RIPEMD160",e[e.SHA1=167]="SHA1",e[e.SHA256=168]="SHA256",e[e.HASH160=169]="HASH160",e[e.HASH256=170]="HASH256",e[e.CODESEPARATOR=171]="CODESEPARATOR",e[e.CHECKSIG=172]="CHECKSIG",e[e.CHECKSIGVERIFY=173]="CHECKSIGVERIFY",e[e.CHECKMULTISIG=174]="CHECKMULTISIG",e[e.CHECKMULTISIGVERIFY=175]="CHECKMULTISIGVERIFY",e[e.NOP1=176]="NOP1",e[e.CHECKLOCKTIMEVERIFY=177]="CHECKLOCKTIMEVERIFY",e[e.CHECKSEQUENCEVERIFY=178]="CHECKSEQUENCEVERIFY",e[e.NOP4=179]="NOP4",e[e.NOP5=180]="NOP5",e[e.NOP6=181]="NOP6",e[e.NOP7=182]="NOP7",e[e.NOP8=183]="NOP8",e[e.NOP9=184]="NOP9",e[e.NOP10=185]="NOP10",e[e.CHECKSIGADD=186]="CHECKSIGADD",e[e.INVALID=255]="INVALID"}(n||(r.OP=n={})),r.Script=a.wrap({encodeStream:(e,t)=>{for(let r of t){if("string"==typeof r){if(void 0===n[r])throw Error(`Unknown opcode=${r}`);e.byte(n[r]);continue}if("number"==typeof r){if(0===r){e.byte(0);continue}else if(1<=r&&r<=16){e.byte(n.OP_1-1+r);continue}}if("number"==typeof r&&(r=s().encode(BigInt(r))),!(0,i.isBytes)(r))throw Error(`Wrong Script OP=${r} (${typeof r})`);let t=r.length;t<n.PUSHDATA1?e.byte(t):t<=255?(e.byte(n.PUSHDATA1),e.byte(t)):t<=65535?(e.byte(n.PUSHDATA2),e.bytes(a.U16LE.encode(t))):(e.byte(n.PUSHDATA4),e.bytes(a.U32LE.encode(t))),e.bytes(r)}},decodeStream:e=>{let t=[];for(;!e.isEnd();){let r=e.byte();if(n.OP_0<r&&r<=n.PUSHDATA4){let i;if(r<n.PUSHDATA1)i=r;else if(r===n.PUSHDATA1)i=a.U8.decodeStream(e);else if(r===n.PUSHDATA2)i=a.U16LE.decodeStream(e);else if(r===n.PUSHDATA4)i=a.U32LE.decodeStream(e);else throw Error("Should be not possible");t.push(e.bytes(i))}else if(0===r)t.push(0);else if(n.OP_1<=r&&r<=n.OP_16)t.push(r-(n.OP_1-1));else{let e=n[r];if(void 0===e)throw Error(`Unknown opcode=${r.toString(16)}`);t.push(e)}}return t}});let o={253:[253,2,253n,65535n],254:[254,4,65536n,4294967295n],255:[255,8,4294967296n,0xffffffffffffffffn]};r.CompactSize=a.wrap({encodeStream:(e,t)=>{if("number"==typeof t&&(t=BigInt(t)),0n<=t&&t<=252n)return e.byte(Number(t));for(let[r,n,a,i]of Object.values(o))if(!(a>t)&&!(t>i)){e.byte(r);for(let r=0;r<n;r++)e.byte(Number(t>>8n*BigInt(r)&255n));return}throw e.err(`VarInt too big: ${t}`)},decodeStream:e=>{let t=e.byte();if(t<=252)return BigInt(t);let[r,n,a]=o[t],i=0n;for(let t=0;t<n;t++)i|=BigInt(e.byte())<<8n*BigInt(t);if(i<a)throw e.err(`Wrong CompactSize(${8*n})`);return i}}),r.CompactSizeLen=a.apply(r.CompactSize,a.coders.numberBigint),r.VarBytes=a.bytes(r.CompactSize),r.RawWitness=a.array(r.CompactSizeLen,r.VarBytes),r.BTCArray=e=>a.array(r.CompactSize,e),r.RawInput=a.struct({txid:a.bytes(32,!0),index:a.U32LE,finalScriptSig:r.VarBytes,sequence:a.U32LE}),r.RawOutput=a.struct({amount:a.U64LE,script:r.VarBytes});let l=a.struct({version:a.I32LE,segwitFlag:a.flag(new Uint8Array([0,1])),inputs:(0,r.BTCArray)(r.RawInput),outputs:(0,r.BTCArray)(r.RawOutput),witnesses:a.flagged("segwitFlag",a.array("inputs/length",r.RawWitness)),lockTime:a.U32LE});r.RawTx=a.validate(l,function(e){if(e.segwitFlag&&e.witnesses&&!e.witnesses.length)throw Error("Segwit flag with empty witnesses array");return e}),r.RawOldTx=a.struct({version:a.I32LE,inputs:(0,r.BTCArray)(r.RawInput),outputs:(0,r.BTCArray)(r.RawOutput),lockTime:a.U32LE})},434577,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r._Estimator=r._cmpBig=r.toVsize=void 0,r.getPrevOut=u,r.normalizeInput=d,r.getInputType=h,r.selectUTXO=function(e,t,r,n){return new g(e,t,{createTx:!0,bip69:!0,...n}).result(r)};let n=e.r(942340),a=e.r(743618),i=e.r(818601),s=e.r(867241),o=e.r(629086),l=e.r(128887),c=e.r(196225);function u(e){if(e.nonWitnessUtxo){if(void 0===e.index)throw Error("Unknown input index");return e.nonWitnessUtxo.outputs[e.index]}if(e.witnessUtxo)return e.witnessUtxo;throw Error("Cannot find previous output info")}function d(e,t,r,a=!1){let u,{nonWitnessUtxo:h,txid:f}=e;"string"==typeof h&&(h=n.hex.decode(h)),(0,c.isBytes)(h)&&(h=o.RawTx.decode(h)),"nonWitnessUtxo"in e||void 0!==h||(h=t?.nonWitnessUtxo),"string"==typeof f&&(f=n.hex.decode(f)),void 0===f&&(f=t?.txid);let p={...t,...e,nonWitnessUtxo:h,txid:f};return"nonWitnessUtxo"in e||void 0!==p.nonWitnessUtxo||delete p.nonWitnessUtxo,void 0===p.sequence&&(p.sequence=l.DEFAULT_SEQUENCE),null===p.tapMerkleRoot&&delete p.tapMerkleRoot,p=s.mergeKeyMap(s.PSBTInput,p,t,r),s.PSBTInputCoder.encode(p),p.nonWitnessUtxo&&void 0!==p.index?u=p.nonWitnessUtxo.outputs[p.index]:p.witnessUtxo&&(u=p.witnessUtxo),u&&!a&&(0,i.checkScript)(u&&u.script,p.redeemScript,p.witnessScript),p}function h(e,t=!1){let r="legacy",n=l.SignatureHash.ALL,a=u(e),s=i.OutScript.decode(a.script),o=s.type,c=s,d=[s];if("tr"===s.type)return n=l.SignatureHash.DEFAULT,{txType:"taproot",type:"tr",last:s,lastScript:a.script,defaultSighash:n,sighash:e.sighashType||n};{if(("wpkh"===s.type||"wsh"===s.type)&&(r="segwit"),"sh"===s.type){if(!e.redeemScript)throw Error("inputType: sh without redeemScript");let t=i.OutScript.decode(e.redeemScript);("wpkh"===t.type||"wsh"===t.type)&&(r="segwit"),d.push(t),c=t,o+=`-${t.type}`}if("wsh"===c.type){if(!e.witnessScript)throw Error("inputType: wsh without witnessScript");let t=i.OutScript.decode(e.witnessScript);"wsh"===t.type&&(r="segwit"),d.push(t),c=t,o+=`-${t.type}`}let a=d[d.length-1];if("sh"===a.type||"wsh"===a.type)throw Error("inputType: sh/wsh cannot be terminal type");let l=i.OutScript.encode(a),u={type:o,txType:r,last:a,lastScript:l,defaultSighash:n,sighash:e.sighashType||n};if("legacy"===r&&!t&&!e.nonWitnessUtxo)throw Error("Transaction/sign: legacy input without nonWitnessUtxo, can result in attack that forces paying higher fees. Pass allowLegacyWitnessUtxo=true, if you sure");return u}}r.toVsize=e=>Math.ceil(e/4);let f=e=>s.TaprootControlBlock.encode(e);function p(e,t={},r=c.NETWORK){let n;if("script"in e&&(0,c.isBytes)(e.script)&&(n=e.script),"address"in e){if("string"!=typeof e.address)throw Error(`Estimator: wrong output address=${e.address}`);n=i.OutScript.encode((0,i.Address)(r).decode(e.address))}if(!n)throw Error("Estimator: wrong output script");if("bigint"!=typeof e.amount)throw Error(`Estimator: wrong output amount=${e.amount}, should be of type bigint but got ${typeof e.amount}.`);if(n&&!t.allowUnknownOutputs&&"unknown"===i.OutScript.decode(n).type)throw Error("Estimator: unknown output script type, there is a chance that input is unspendable. Pass allowUnknownOutputs=true, if you sure");return t.disableScriptCheck||(0,i.checkScript)(n),n}r._cmpBig=(e,t)=>{let r=e-t;return r<0n?-1:+(r>0n)};class g{constructor(e,t,s){if(this.outputs=t,this.opts=s,this.requiredIndices=[],"bigint"!=typeof s.feePerByte)throw Error(`Estimator: wrong feePerByte=${s.feePerByte}, should be of type bigint but got ${typeof s.feePerByte}.`);let g=void 0===s.dust?BigInt(182):s.dust;if("bigint"!=typeof g)throw Error(`Estimator: wrong dust=${s.dust}, should be of type bigint but got ${typeof s.dust}.`);let m=void 0===s.dustRelayFeeRate?3n:s.dustRelayFeeRate;if("bigint"!=typeof m)throw Error(`Estimator: wrong dustRelayFeeRate=${s.dustRelayFeeRate}, should be of type bigint but got ${typeof s.dustRelayFeeRate}.`);if(this.dust=g*m,void 0!==s.requiredInputs&&!Array.isArray(s.requiredInputs))throw Error(`Estimator: wrong required inputs=${s.requiredInputs}`);let y=s.network||c.NETWORK,b=0n,_=32;for(let e of t){let t=p(e,s,s.network);_+=32+4*o.VarBytes.encode(t).length,b+=e.amount}if("string"!=typeof s.changeAddress)throw Error(`Estimator: wrong change address=${s.changeAddress}`);let w=_+32+4*o.VarBytes.encode(i.OutScript.encode((0,i.Address)(y).decode(s.changeAddress))).length;_+=4*o.CompactSizeLen.encode(t.length).length,w+=4*o.CompactSizeLen.encode(t.length+1).length,this.baseWeight=_,this.changeWeight=w,this.amount=b;let E=Array.from(e);if(s.requiredInputs)for(let e=0;e<s.requiredInputs.length;e++)this.requiredIndices.push(E.push(s.requiredInputs[e])-1);let v=new Set;this.normalizedInputs=E.map(e=>{let t=d(e,void 0,void 0,s.disableScriptCheck);(0,l.inputBeforeSign)(t);let p=`${n.hex.encode(t.txid)}:${t.index}`;if(!s.allowSameUtxo&&v.has(p))throw Error(`Estimator: same input passed multiple times: ${p}`);v.add(p);let g=h(t,s.allowLegacyWitnessUtxo),m=u(t),y=function(e,t,r){let n,s=a.EMPTY;if("taproot"===e.txType){let s=e.sighash!==l.SignatureHash.DEFAULT?65:64;if(t.tapInternalKey&&!(0,c.equalBytes)(t.tapInternalKey,c.TAPROOT_UNSPENDABLE_KEY))n=[new Uint8Array(s)];else if(t.tapLeafScript)n=function(e,t,r){if(!e||!e.length)throw Error("no leafs");let n=()=>new Uint8Array(t);for(let[t,s]of e.sort((e,t)=>f(e[0]).length-f(t[0]).length)){let e=s.slice(0,-1),l=s[s.length-1],u=i.OutScript.decode(e),d=[];if("tr_ms"===u.type){let e=u.m,t=u.pubkeys.length-e;for(let t=0;t<e;t++)d.push(n());for(let e=0;e<t;e++)d.push(a.EMPTY)}else if("tr_ns"===u.type)for(let e of u.pubkeys)d.push(n());else{if(!r)throw Error("Finalize: Unknown tapLeafScript");let a=(0,i.tapLeafHash)(e,l);for(let i of r){if(!i.finalizeTaproot)continue;let r=o.Script.decode(e),s=i.encode(r);if(void 0===s)continue;let l=r.filter(e=>{if(!(0,c.isBytes)(e))return!1;try{return(0,c.validatePubkey)(e,c.PubT.schnorr),!0}catch(e){return!1}}),u=i.finalizeTaproot(e,s,l.map(e=>[{pubKey:e,leafHash:a},n()]));if(u)return u.concat(f(t))}}return d.reverse().concat([e,f(t)])}throw Error("there was no witness")}(t.tapLeafScript,s,r.customScripts);else throw Error("estimateInput/taproot: unknown input")}else{let t=()=>new Uint8Array(72),i=()=>new Uint8Array(33),l=a.EMPTY,u=[],d=e.last.type;if("ms"===d){let r=e.last.m,n=[0];for(let e=0;e<r;e++)n.push(t());l=o.Script.encode(n)}else if("pk"===d)l=o.Script.encode([t()]);else if("pkh"===d)l=o.Script.encode([t(),i()]);else if("wpkh"===d)l=a.EMPTY,u=[t(),i()];else if("unknown"===d&&!r.allowUnknownInputs)throw Error("Unknown inputs are not allowed");e.type.includes("wsh-")&&(l.length&&e.lastScript.length&&(u=o.Script.decode(l).map(e=>{if(0===e)return a.EMPTY;if((0,c.isBytes)(e))return e;throw Error(`Wrong witness op=${e}`)})),u=u.concat(e.lastScript)),"segwit"===e.txType&&(n=u),e.type.startsWith("sh-wsh-")?s=o.Script.encode([o.Script.encode([0,new Uint8Array(c.sha256.outputLen)])]):e.type.startsWith("sh-")?s=o.Script.encode([...o.Script.decode(l),e.lastScript]):e.type.startsWith("wsh-")||"segwit"!==e.txType&&(s=l)}let u=160+4*o.VarBytes.encode(s).length,d=!1;return n&&(u+=o.RawWitness.encode(n).length,d=!0),{weight:u,hasWitnesses:d}}(g,t,this.opts),b=m.amount-s.feePerByte*BigInt((0,r.toVsize)(y.weight));return{inputType:g,normalized:t,amount:m.amount,value:b,estimate:y}})}checkInputIdx(e){if(!Number.isSafeInteger(e)||0>e||e>=this.normalizedInputs.length)throw Error(`Wrong input index=${e}`);return e}sortIndices(e){return e.slice().sort((e,t)=>{let r=this.normalizedInputs[this.checkInputIdx(e)],n=this.normalizedInputs[this.checkInputIdx(t)],a=(0,c.compareBytes)(r.normalized.txid,n.normalized.txid);return 0!==a?a:r.normalized.index-n.normalized.index})}sortOutputs(e){let t=e.map(e=>p(e,this.opts,this.opts.network));return e.map((e,t)=>t).sort((n,a)=>{let i=e[n].amount,s=e[a].amount,o=(0,r._cmpBig)(i,s);return 0!==o?o:(0,c.compareBytes)(t[n],t[a])})}getSatoshi(e){return this.opts.feePerByte*BigInt((0,r.toVsize)(e))}get biggest(){return this.normalizedInputs.map((e,t)=>t).sort((e,t)=>(0,r._cmpBig)(this.normalizedInputs[t].value,this.normalizedInputs[e].value))}get smallest(){return this.biggest.reverse()}get oldest(){return this.normalizedInputs.map((e,t)=>t)}get newest(){return this.oldest.reverse()}accumulate(e,t=!1,r=!0,n=!1){let a,i=this.opts.alwaysChange?this.changeWeight:this.baseWeight,s=!1,l=0,c=0n,u=this.amount,d=[];for(let e of this.requiredIndices){this.checkInputIdx(e);let{estimate:t,amount:r}=this.normalizedInputs[e],h=i+t.weight;!s&&t.hasWitnesses&&(h+=2);let f=h+4*o.CompactSizeLen.encode(l).length;if(a=this.getSatoshi(f),i=h,t.hasWitnesses&&(s=!0),l++,c+=r,d.push(e),!n&&u+a<=c)return{indices:d,fee:a,weight:f,total:c}}for(let h of e){this.checkInputIdx(h);let{estimate:e,amount:f,value:p}=this.normalizedInputs[h],g=i+e.weight;!s&&e.hasWitnesses&&(g+=2);let m=g+4*o.CompactSizeLen.encode(l).length;if((a=this.getSatoshi(m),!t||!(f+c>u+a+this.dust))&&(!r||!(p<=0n))&&(i=g,e.hasWitnesses&&(s=!0),l++,c+=f,d.push(h),!n&&u+a<=c))return{indices:d,fee:a,weight:m,total:c}}if(n)return{indices:d,fee:a,weight:i+4*o.CompactSizeLen.encode(l).length,total:c}}default(){let{biggest:e}=this,t=this.accumulate(e,!0,!1);return t||this.accumulate(e)}select(e){if("all"===e)return this.accumulate(this.normalizedInputs.map((e,t)=>t),!1,!0,!0);if("default"===e)return this.default();let t={Oldest:()=>this.oldest,Newest:()=>this.newest,Smallest:()=>this.smallest,Biggest:()=>this.biggest};if(e.startsWith("exact")){let[r,n]=e.slice(5).split("/");if(!t[r])throw Error(`Estimator.select: wrong strategy=${e}`);e=n;let a=this.accumulate(t[r](),!0,!0);if(a)return a}if(e.startsWith("accum")){let r=e.slice(5);if(!t[r])throw Error(`Estimator.select: wrong strategy=${e}`);return this.accumulate(t[r]())}throw Error(`Estimator.select: wrong strategy=${e}`)}result(e){let t,r=this.select(e);if(!r)return;let{indices:n,weight:a,total:i}=r,s=this.opts.alwaysChange,o=this.opts.alwaysChange?a:a+(this.changeWeight-this.baseWeight),c=this.getSatoshi(o),u=r.fee,d=i-this.amount-c;d>this.dust&&(s=!0);let h=n,f=Array.from(this.outputs);if(s){if(u=c,d<0n)throw Error(`Estimator.result: negative change=${d}`);f.push({address:this.opts.changeAddress,amount:d})}this.opts.bip69&&(h=this.sortIndices(h),f=this.sortOutputs(f).map(e=>f[e]));let g={inputs:h.map(e=>this.normalizedInputs[e].normalized),outputs:f,fee:u,weight:this.opts.alwaysChange?r.weight:o,change:!!s};if(this.opts.createTx){let{inputs:e,outputs:r}=g;for(let r of(t=new l.Transaction(this.opts),e))t.addInput(r);for(let e of r)t.addOutput({...e,script:p(e,this.opts,this.opts.network)})}return Object.assign(g,{tx:t})}}r._Estimator=g},128887,(e,t,r)=>{"use strict";var n,a;Object.defineProperty(r,"__esModule",{value:!0}),r.Transaction=r.SigHash=r.SignatureHash=r.def=r.Decimal=r.DEFAULT_SEQUENCE=r.DEFAULT_LOCKTIME=r.DEFAULT_VERSION=r.PRECISION=void 0,r.cloneDeep=g,r.inputBeforeSign=y,r.PSBTCombine=function(e){if(!e||!Array.isArray(e)||!e.length)throw Error("PSBTCombine: wrong PSBT list");let t=v.fromPSBT(e[0]);for(let r=1;r<e.length;r++)t.combine(v.fromPSBT(e[r]));return t.toPSBT()},r.bip32Path=function(e){let t=[];if(!/^[mM]'?/.test(e))throw Error('Path must start with "m" or "M"');if(/^[mM]'?$/.test(e))return t;for(let r of e.replace(/^[mM]'?\//,"").split("/")){let e=/^(\d+)('?)$/.exec(r);if(!e||3!==e.length)throw Error(`Invalid child index: ${r}`);let n=+e[1];if(!Number.isSafeInteger(n)||n>=0x80000000)throw Error("Invalid index");"'"===e[2]&&(n+=0x80000000),t.push(n)}return t};let i=e.r(942340),s=e.r(743618),o=e.r(818601),l=e.r(867241),c=e.r(629086),u=e.r(196225),d=e.r(196225),h=e.r(434577),f=new Uint8Array(32),p={amount:0xffffffffffffffffn,script:s.EMPTY};function g(e){if(Array.isArray(e))return e.map(e=>g(e));if((0,d.isBytes)(e))return Uint8Array.from(e);if(["number","bigint","boolean","string","undefined"].includes(typeof e))return e;if(null===e)return e;if("object"==typeof e)return Object.fromEntries(Object.entries(e).map(([e,t])=>[e,g(t)]));throw Error(`cloneDeep: unknown type=${e} (${typeof e})`)}function m(e){if(void 0===e.script||void 0===e.amount)throw Error("Transaction/output: script and amount required");return{script:e.script,amount:e.amount}}function y(e){if(void 0===e.txid||void 0===e.index)throw Error("Transaction/input: txid and index required");return{txid:e.txid,index:e.index,sequence:(0,r.def)(e.sequence,r.DEFAULT_SEQUENCE),finalScriptSig:(0,r.def)(e.finalScriptSig,s.EMPTY)}}function b(e){for(let t in e)l.PSBTInputFinalKeys.includes(t)||delete e[t]}r.PRECISION=8,r.DEFAULT_VERSION=2,r.DEFAULT_LOCKTIME=0,r.DEFAULT_SEQUENCE=0xffffffff,r.Decimal=s.coders.decimal(r.PRECISION),r.def=(e,t)=>void 0===e?t:e,function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.ANYONECANPAY=128]="ANYONECANPAY"}(n||(r.SignatureHash=n={})),function(e){e[e.DEFAULT=0]="DEFAULT",e[e.ALL=1]="ALL",e[e.NONE=2]="NONE",e[e.SINGLE=3]="SINGLE",e[e.DEFAULT_ANYONECANPAY=128]="DEFAULT_ANYONECANPAY",e[e.ALL_ANYONECANPAY=129]="ALL_ANYONECANPAY",e[e.NONE_ANYONECANPAY=130]="NONE_ANYONECANPAY",e[e.SINGLE_ANYONECANPAY=131]="SINGLE_ANYONECANPAY"}(a||(r.SigHash=a={}));let _=s.struct({txid:s.bytes(32,!0),index:s.U32LE});function w(e){if("number"!=typeof e||"string"!=typeof a[e])throw Error(`Invalid SigHash=${e}`);return e}function E(e){let t=31&e;return{isAny:!!(e&n.ANYONECANPAY),isNone:t===n.NONE,isSingle:t===n.SINGLE}}class v{constructor(e={}){this.global={},this.inputs=[],this.outputs=[];let t=this.opts=function(e){if(void 0!==e&&"[object Object]"!==({}).toString.call(e))throw Error(`Wrong object type for transaction options: ${e}`);let t={...e,version:(0,r.def)(e.version,r.DEFAULT_VERSION),lockTime:(0,r.def)(e.lockTime,0),PSBTVersion:(0,r.def)(e.PSBTVersion,0)};if(void 0!==t.allowUnknowInput&&(e.allowUnknownInputs=t.allowUnknowInput),void 0!==t.allowUnknowOutput&&(e.allowUnknownOutputs=t.allowUnknowOutput),![-1,0,1,2,3].includes(t.version))throw Error(`Unknown version: ${t.version}`);if("number"!=typeof t.lockTime)throw Error("Transaction lock time should be number");if(s.U32LE.encode(t.lockTime),0!==t.PSBTVersion&&2!==t.PSBTVersion)throw Error(`Unknown PSBT version ${t.PSBTVersion}`);for(let e of["allowUnknownOutputs","allowUnknownInputs","disableScriptCheck","bip174jsCompat","allowLegacyWitnessUtxo","lowR"]){let r=t[e];if(void 0!==r&&"boolean"!=typeof r)throw Error(`Transation options wrong type: ${e}=${r} (${typeof r})`)}if(void 0!==t.customScripts){let e=t.customScripts;if(!Array.isArray(e))throw Error(`wrong custom scripts type (expected array): customScripts=${e} (${typeof e})`);for(let t of e)if("function"!=typeof t.encode||"function"!=typeof t.decode||void 0!==t.finalizeTaproot&&"function"!=typeof t.finalizeTaproot)throw Error(`wrong script=${t} (${typeof t})`)}return Object.freeze(t)}(e);t.lockTime!==r.DEFAULT_LOCKTIME&&(this.global.fallbackLocktime=t.lockTime),this.global.txVersion=t.version}static fromRaw(e,t={}){let r=c.RawTx.decode(e),n=new v({...t,version:r.version,lockTime:r.lockTime});for(let e of r.outputs)n.addOutput(e);if(n.outputs=r.outputs,n.inputs=r.inputs,r.witnesses)for(let e=0;e<r.witnesses.length;e++)n.inputs[e].finalScriptWitness=r.witnesses[e];return n}static fromPSBT(e,t={}){let n;try{n=l.RawPSBTV0.decode(e)}catch(t){try{n=l.RawPSBTV2.decode(e)}catch(e){throw t}}let a=n.global.version||0;if(0!==a&&2!==a)throw Error(`Wrong PSBT version=${a}`);let i=n.global.unsignedTx,o=0===a?i?.version:n.global.txVersion,c=0===a?i?.lockTime:n.global.fallbackLocktime,u=new v({...t,version:o,lockTime:c,PSBTVersion:a}),d=0===a?i?.inputs.length:n.global.inputCount;u.inputs=n.inputs.slice(0,d).map((e,t)=>({finalScriptSig:s.EMPTY,...n.global.unsignedTx?.inputs[t],...e}));let h=0===a?i?.outputs.length:n.global.outputCount;return u.outputs=n.outputs.slice(0,h).map((e,t)=>({...e,...n.global.unsignedTx?.outputs[t]})),u.global={...n.global,txVersion:o},c!==r.DEFAULT_LOCKTIME&&(u.global.fallbackLocktime=c),u}toPSBT(e=this.opts.PSBTVersion){if(0!==e&&2!==e)throw Error(`Wrong PSBT version=${e}`);let t=this.inputs.map(t=>l.cleanPSBTFields(e,l.PSBTInput,t));for(let e of t)e.partialSig&&!e.partialSig.length&&delete e.partialSig,e.finalScriptSig&&!e.finalScriptSig.length&&delete e.finalScriptSig,e.finalScriptWitness&&!e.finalScriptWitness.length&&delete e.finalScriptWitness;let n=this.outputs.map(t=>l.cleanPSBTFields(e,l.PSBTOutput,t)),a={...this.global};return 0===e?(a.unsignedTx=c.RawOldTx.decode(c.RawOldTx.encode({version:this.version,lockTime:this.lockTime,inputs:this.inputs.map(y).map(e=>({...e,finalScriptSig:s.EMPTY})),outputs:this.outputs.map(m)})),delete a.fallbackLocktime,delete a.txVersion):(a.version=e,a.txVersion=this.version,a.inputCount=this.inputs.length,a.outputCount=this.outputs.length,a.fallbackLocktime&&a.fallbackLocktime===r.DEFAULT_LOCKTIME&&delete a.fallbackLocktime),this.opts.bip174jsCompat&&(t.length||t.push({}),n.length||n.push({})),(0===e?l.RawPSBTV0:l.RawPSBTV2).encode({global:a,inputs:t,outputs:n})}get lockTime(){let e=r.DEFAULT_LOCKTIME,t=0,n=r.DEFAULT_LOCKTIME,a=0;for(let r of this.inputs)r.requiredHeightLocktime&&(e=Math.max(e,r.requiredHeightLocktime),t++),r.requiredTimeLocktime&&(n=Math.max(n,r.requiredTimeLocktime),a++);return t&&t>=a?e:n!==r.DEFAULT_LOCKTIME?n:this.global.fallbackLocktime||r.DEFAULT_LOCKTIME}get version(){if(void 0===this.global.txVersion)throw Error("No global.txVersion");return this.global.txVersion}inputStatus(e){this.checkInputIdx(e);let t=this.inputs[e];return t.finalScriptSig&&t.finalScriptSig.length||t.finalScriptWitness&&t.finalScriptWitness.length?"finalized":t.tapKeySig||t.tapScriptSig&&t.tapScriptSig.length||t.partialSig&&t.partialSig.length?"signed":"unsigned"}inputSighash(e){this.checkInputIdx(e);let t=this.inputs[e].sighashType,r=void 0===t?n.DEFAULT:t,a=r===n.DEFAULT?n.ALL:3&r;return{sigInputs:r&n.ANYONECANPAY,sigOutputs:a}}signStatus(){let e=!0,t=!0,r=[],a=[];for(let i=0;i<this.inputs.length;i++){if("unsigned"===this.inputStatus(i))continue;let{sigInputs:s,sigOutputs:o}=this.inputSighash(i);if(s===n.ANYONECANPAY?r.push(i):e=!1,o===n.ALL)t=!1;else if(o===n.SINGLE)a.push(i);else if(o===n.NONE);else throw Error(`Wrong signature hash output type: ${o}`)}return{addInput:e,addOutput:t,inputs:r,outputs:a}}get isFinal(){for(let e=0;e<this.inputs.length;e++)if("finalized"!==this.inputStatus(e))return!1;return!0}get hasWitnesses(){let e=!1;for(let t of this.inputs)t.finalScriptWitness&&t.finalScriptWitness.length&&(e=!0);return e}get weight(){if(!this.isFinal)throw Error("Transaction is not finalized");let e=32,t=this.outputs.map(m);for(let r of(e+=4*c.CompactSizeLen.encode(this.outputs.length).length,t))e+=32+4*c.VarBytes.encode(r.script).length;for(let t of(this.hasWitnesses&&(e+=2),e+=4*c.CompactSizeLen.encode(this.inputs.length).length,this.inputs))e+=160+4*c.VarBytes.encode(t.finalScriptSig||s.EMPTY).length,this.hasWitnesses&&t.finalScriptWitness&&(e+=c.RawWitness.encode(t.finalScriptWitness).length);return e}get vsize(){return(0,h.toVsize)(this.weight)}toBytes(e=!1,t=!1){return c.RawTx.encode({version:this.version,lockTime:this.lockTime,inputs:this.inputs.map(y).map(t=>({...t,finalScriptSig:e&&t.finalScriptSig||s.EMPTY})),outputs:this.outputs.map(m),witnesses:this.inputs.map(e=>e.finalScriptWitness||[]),segwitFlag:t&&this.hasWitnesses})}get unsignedTx(){return this.toBytes(!1,!1)}get hex(){return i.hex.encode(this.toBytes(!0,this.hasWitnesses))}get hash(){if(!this.isFinal)throw Error("Transaction is not finalized");return i.hex.encode(u.sha256x2(this.toBytes(!0)))}get id(){if(!this.isFinal)throw Error("Transaction is not finalized");return i.hex.encode(u.sha256x2(this.toBytes(!0)).reverse())}checkInputIdx(e){if(!Number.isSafeInteger(e)||0>e||e>=this.inputs.length)throw Error(`Wrong input index=${e}`)}getInput(e){return this.checkInputIdx(e),g(this.inputs[e])}get inputsLength(){return this.inputs.length}addInput(e,t=!1){if(!t&&!this.signStatus().addInput)throw Error("Tx has signed inputs, cannot add new one");return this.inputs.push((0,h.normalizeInput)(e,void 0,void 0,this.opts.disableScriptCheck)),this.inputs.length-1}updateInput(e,t,r=!1){let n;if(this.checkInputIdx(e),!r){let t=this.signStatus();(!t.addInput||t.inputs.includes(e))&&(n=l.PSBTInputUnsignedKeys)}this.inputs[e]=(0,h.normalizeInput)(t,this.inputs[e],n,this.opts.disableScriptCheck)}checkOutputIdx(e){if(!Number.isSafeInteger(e)||0>e||e>=this.outputs.length)throw Error(`Wrong output index=${e}`)}getOutput(e){return this.checkOutputIdx(e),g(this.outputs[e])}getOutputAddress(e,t=d.NETWORK){let r=this.getOutput(e);if(r.script)return(0,o.Address)(t).encode(o.OutScript.decode(r.script))}get outputsLength(){return this.outputs.length}normalizeOutput(e,t,r){let{amount:n,script:a}=e;if(void 0===n&&(n=t?.amount),"bigint"!=typeof n)throw Error(`Wrong amount type, should be of type bigint in sats, but got ${n} of type ${typeof n}`);"string"==typeof a&&(a=i.hex.decode(a)),void 0===a&&(a=t?.script);let s={...t,...e,amount:n,script:a};if(void 0===s.amount&&delete s.amount,s=l.mergeKeyMap(l.PSBTOutput,s,t,r),l.PSBTOutputCoder.encode(s),s.script&&!this.opts.allowUnknownOutputs&&"unknown"===o.OutScript.decode(s.script).type)throw Error("Transaction/output: unknown output script type, there is a chance that input is unspendable. Pass allowUnknownOutputs=true, if you sure");return this.opts.disableScriptCheck||(0,o.checkScript)(s.script,s.redeemScript,s.witnessScript),s}addOutput(e,t=!1){if(!t&&!this.signStatus().addOutput)throw Error("Tx has signed outputs, cannot add new one");return this.outputs.push(this.normalizeOutput(e)),this.outputs.length-1}updateOutput(e,t,r=!1){let n;if(this.checkOutputIdx(e),!r){let t=this.signStatus();(!t.addOutput||t.outputs.includes(e))&&(n=l.PSBTOutputUnsignedKeys)}this.outputs[e]=this.normalizeOutput(t,this.outputs[e],n)}addOutputAddress(e,t,r=d.NETWORK){return this.addOutput({script:o.OutScript.encode((0,o.Address)(r).decode(e)),amount:t})}get fee(){let e=0n;for(let t of this.inputs){let r=(0,h.getPrevOut)(t);if(!r)throw Error("Empty input amount");e+=r.amount}for(let t of this.outputs.map(m))e-=t.amount;return e}preimageLegacy(e,t,r){let{isAny:n,isNone:a,isSingle:i}=E(r);if(e<0||!Number.isSafeInteger(e))throw Error(`Invalid input idx=${e}`);if(i&&e>=this.outputs.length||e>=this.inputs.length)return s.U256BE.encode(1n);t=c.Script.encode(c.Script.decode(t).filter(e=>"CODESEPARATOR"!==e));let o=this.inputs.map(y).map((r,n)=>({...r,finalScriptSig:n===e?t:s.EMPTY}));n?o=[o[e]]:(a||i)&&(o=o.map((t,r)=>({...t,sequence:r===e?t.sequence:0})));let l=this.outputs.map(m);a?l=[]:i&&(l=l.slice(0,e).fill(p).concat([l[e]]));let d=c.RawTx.encode({lockTime:this.lockTime,version:this.version,segwitFlag:!1,inputs:o,outputs:l});return u.sha256x2(d,s.I32LE.encode(r))}preimageWitnessV0(e,t,r,n){let{isAny:a,isNone:i,isSingle:o}=E(r),l=f,d=f,h=f,p=this.inputs.map(y),g=this.outputs.map(m);a||(l=u.sha256x2(...p.map(_.encode))),a||o||i||(d=u.sha256x2(...p.map(e=>s.U32LE.encode(e.sequence)))),o||i?o&&e<g.length&&(h=u.sha256x2(c.RawOutput.encode(g[e]))):h=u.sha256x2(...g.map(c.RawOutput.encode));let b=p[e];return u.sha256x2(s.I32LE.encode(this.version),l,d,s.bytes(32,!0).encode(b.txid),s.U32LE.encode(b.index),c.VarBytes.encode(t),s.U64LE.encode(n),s.U32LE.encode(b.sequence),h,s.U32LE.encode(this.lockTime),s.U32LE.encode(r))}preimageWitnessV1(e,t,r,a,i=-1,l,h=192,p){if(!Array.isArray(a)||this.inputs.length!==a.length)throw Error(`Invalid amounts array=${a}`);if(!Array.isArray(t)||this.inputs.length!==t.length)throw Error(`Invalid prevOutScript array=${t}`);let g=[s.U8.encode(0),s.U8.encode(r),s.I32LE.encode(this.version),s.U32LE.encode(this.lockTime)],b=r===n.DEFAULT?n.ALL:3&r,w=r&n.ANYONECANPAY,E=this.inputs.map(y),v=this.outputs.map(m);w!==n.ANYONECANPAY&&g.push(...[E.map(_.encode),a.map(s.U64LE.encode),t.map(c.VarBytes.encode),E.map(e=>s.U32LE.encode(e.sequence))].map(e=>u.sha256((0,d.concatBytes)(...e)))),b===n.ALL&&g.push(u.sha256((0,d.concatBytes)(...v.map(c.RawOutput.encode))));let S=!!p|2*!!l;if(g.push(new Uint8Array([S])),w===n.ANYONECANPAY){let r=E[e];g.push(_.encode(r),s.U64LE.encode(a[e]),c.VarBytes.encode(t[e]),s.U32LE.encode(r.sequence))}else g.push(s.U32LE.encode(e));return 1&S&&g.push(u.sha256(c.VarBytes.encode(p||s.EMPTY))),b===n.SINGLE&&g.push(e<v.length?u.sha256(c.RawOutput.encode(v[e])):f),l&&g.push((0,o.tapLeafHash)(l,h),s.U8.encode(0),s.I32LE.encode(i)),u.tagSchnorr("TapSighash",...g)}signIdx(e,t,r,a){this.checkInputIdx(t);let i=this.inputs[t],l=(0,h.getInputType)(i,this.opts.allowLegacyWitnessUtxo);if(!(0,d.isBytes)(e)){if(!i.bip32Derivation||!i.bip32Derivation.length)throw Error("bip32Derivation: empty");let r=i.bip32Derivation.filter(t=>t[1].fingerprint==e.fingerprint).map(([t,{path:r}])=>{let n=e;for(let e of r)n=n.deriveChild(e);if(!(0,d.equalBytes)(n.publicKey,t))throw Error("bip32Derivation: wrong pubKey");if(!n.privateKey)throw Error("bip32Derivation: no privateKey");return n});if(!r.length)throw Error(`bip32Derivation: no items with fingerprint=${e.fingerprint}`);let n=!1;for(let e of r)this.signIdx(e.privateKey,t)&&(n=!0);return n}r?r.forEach(w):r=[l.defaultSighash];let f=l.sighash;if(!r.includes(f))throw Error(`Input with not allowed sigHash=${f}. Allowed: ${r.join(", ")}`);let{sigOutputs:p}=this.inputSighash(t);if(p===n.SINGLE&&t>=this.outputs.length)throw Error(`Input with sighash SINGLE, but there is no output with corresponding index=${t}`);let g=(0,h.getPrevOut)(i);if("taproot"===l.txType){let r=this.inputs.map(h.getPrevOut),l=r.map(e=>e.script),p=r.map(e=>e.amount),g=!1,m=u.pubSchnorr(e),y=i.tapMerkleRoot||s.EMPTY;if(i.tapInternalKey){let{pubKey:r,privKey:o}=function(e,t,r,n=s.EMPTY){return(0,d.equalBytes)(r,t)&&(e=u.taprootTweakPrivKey(e,n),t=u.pubSchnorr(e)),{privKey:e,pubKey:t}}(e,m,i.tapInternalKey,y),[c,h]=u.taprootTweakPubkey(i.tapInternalKey,y);if((0,d.equalBytes)(c,r)){let e=this.preimageWitnessV1(t,l,f,p),r=(0,d.concatBytes)(u.signSchnorr(e,o,a),f!==n.DEFAULT?new Uint8Array([f]):s.EMPTY);this.updateInput(t,{tapKeySig:r},!0),g=!0}}if(i.tapLeafScript)for(let[r,h]of(i.tapScriptSig=i.tapScriptSig||[],i.tapLeafScript)){let r=h.subarray(0,-1),i=c.Script.decode(r),y=h[h.length-1],b=(0,o.tapLeafHash)(r,y);if(-1===i.findIndex(e=>(0,d.isBytes)(e)&&(0,d.equalBytes)(e,m)))continue;let _=this.preimageWitnessV1(t,l,f,p,void 0,r,y),w=(0,d.concatBytes)(u.signSchnorr(_,e,a),f!==n.DEFAULT?new Uint8Array([f]):s.EMPTY);this.updateInput(t,{tapScriptSig:[[{pubKey:m,leafHash:b},w]]},!0),g=!0}if(!g)throw Error("No taproot scripts signed")}else{let r,n=u.pubECDSA(e),a=!1,i=u.hash160(n);for(let e of c.Script.decode(l.lastScript))(0,d.isBytes)(e)&&((0,d.equalBytes)(e,n)||(0,d.equalBytes)(e,i))&&(a=!0);if(!a)throw Error(`Input script doesn't have pubKey: ${l.lastScript}`);if("legacy"===l.txType)r=this.preimageLegacy(t,l.lastScript,f);else if("segwit"===l.txType){let e=l.lastScript;"wpkh"===l.last.type&&(e=o.OutScript.encode({type:"pkh",hash:l.last.hash})),r=this.preimageWitnessV0(t,e,f,g.amount)}else throw Error(`Transaction/sign: unknown tx type: ${l.txType}`);let s=u.signECDSA(r,e,this.opts.lowR);this.updateInput(t,{partialSig:[[n,(0,d.concatBytes)(s,new Uint8Array([f]))]]},!0)}return!0}sign(e,t,r){let n=0;for(let a=0;a<this.inputs.length;a++)try{this.signIdx(e,a,t,r)&&n++}catch(e){}if(!n)throw Error("No inputs signed");return n}finalizeIdx(e){let t,r;if(this.checkInputIdx(e),this.fee<0n)throw Error("Outputs spends more than inputs amount");let n=this.inputs[e],a=(0,h.getInputType)(n,this.opts.allowLegacyWitnessUtxo);if("taproot"===a.txType){if(n.tapKeySig)n.finalScriptWitness=[n.tapKeySig];else if(n.tapLeafScript&&n.tapScriptSig){for(let[e,t]of n.tapLeafScript.sort((e,t)=>l.TaprootControlBlock.encode(e[0]).length-l.TaprootControlBlock.encode(t[0]).length)){let r=t.slice(0,-1),a=t[t.length-1],i=o.OutScript.decode(r),u=(0,o.tapLeafHash)(r,a),h=n.tapScriptSig.filter(e=>(0,d.equalBytes)(e[0].leafHash,u)),f=[];if("tr_ms"===i.type){let e=i.m,t=i.pubkeys,r=0;for(let n of t){let t=h.findIndex(e=>(0,d.equalBytes)(e[0].pubKey,n));if(r===e||-1===t){f.push(s.EMPTY);continue}f.push(h[t][1]),r++}if(r!==e)continue}else if("tr_ns"===i.type){for(let e of i.pubkeys){let t=h.findIndex(t=>(0,d.equalBytes)(t[0].pubKey,e));-1!==t&&f.push(h[t][1])}if(f.length!==i.pubkeys.length)continue}else if("unknown"===i.type&&this.opts.allowUnknownInputs){let e=c.Script.decode(r);if(!(f=h.map(([{pubKey:t},r])=>{let n=e.findIndex(e=>(0,d.isBytes)(e)&&(0,d.equalBytes)(e,t));if(-1===n)throw Error("finalize/taproot: cannot find position of pubkey in script");return{signature:r,pos:n}}).sort((e,t)=>e.pos-t.pos).map(e=>e.signature)).length)continue}else{let t=this.opts.customScripts;if(t)for(let a of t){if(!a.finalizeTaproot)continue;let t=c.Script.decode(r),i=a.encode(t);if(void 0===i)continue;let o=a.finalizeTaproot(r,i,h);if(o){n.finalScriptWitness=o.concat(l.TaprootControlBlock.encode(e)),n.finalScriptSig=s.EMPTY,b(n);return}}throw Error("Finalize: Unknown tapLeafScript")}n.finalScriptWitness=f.reverse().concat([r,l.TaprootControlBlock.encode(e)]);break}if(!n.finalScriptWitness)throw Error("finalize/taproot: empty witness")}else throw Error("finalize/taproot: unknown input");n.finalScriptSig=s.EMPTY,b(n);return}if(!n.partialSig||!n.partialSig.length)throw Error("Not enough partial sign");let i=s.EMPTY,f=[];if("ms"===a.last.type){let e=a.last.m,t=a.last.pubkeys,r=[];for(let e of t){let t=n.partialSig.find(t=>(0,d.equalBytes)(e,t[0]));t&&r.push(t[1])}if((r=r.slice(0,e)).length!==e)throw Error(`Multisig: wrong signatures count, m=${e} n=${t.length} signatures=${r.length}`);i=c.Script.encode([0,...r])}else if("pk"===a.last.type)i=c.Script.encode([n.partialSig[0][1]]);else if("pkh"===a.last.type)i=c.Script.encode([n.partialSig[0][1],n.partialSig[0][0]]);else if("wpkh"===a.last.type)i=s.EMPTY,f=[n.partialSig[0][1],n.partialSig[0][0]];else if("unknown"===a.last.type&&!this.opts.allowUnknownInputs)throw Error("Unknown inputs not allowed");if(a.type.includes("wsh-")&&(i.length&&a.lastScript.length&&(f=c.Script.decode(i).map(e=>{if(0===e)return s.EMPTY;if((0,d.isBytes)(e))return e;throw Error(`Wrong witness op=${e}`)})),f=f.concat(a.lastScript)),"segwit"===a.txType&&(r=f),a.type.startsWith("sh-wsh-")?t=c.Script.encode([c.Script.encode([0,u.sha256(a.lastScript)])]):a.type.startsWith("sh-")?t=c.Script.encode([...c.Script.decode(i),a.lastScript]):a.type.startsWith("wsh-")||"segwit"!==a.txType&&(t=i),!t&&!r)throw Error("Unknown error finalizing input");t&&(n.finalScriptSig=t),r&&(n.finalScriptWitness=r),b(n)}finalize(){for(let e=0;e<this.inputs.length;e++)this.finalizeIdx(e)}extract(){if(!this.isFinal)throw Error("Transaction has unfinalized inputs");if(!this.outputs.length)throw Error("Transaction has no outputs");if(this.fee<0n)throw Error("Outputs spends more than inputs amount");return this.toBytes(!0,!0)}combine(e){for(let t of["PSBTVersion","version","lockTime"])if(this.opts[t]!==e.opts[t])throw Error(`Transaction/combine: different ${t} this=${this.opts[t]} other=${e.opts[t]}`);for(let t of["inputs","outputs"])if(this[t].length!==e[t].length)throw Error(`Transaction/combine: different ${t} length this=${this[t].length} other=${e[t].length}`);let t=this.global.unsignedTx?c.RawOldTx.encode(this.global.unsignedTx):s.EMPTY,r=e.global.unsignedTx?c.RawOldTx.encode(e.global.unsignedTx):s.EMPTY;if(!(0,d.equalBytes)(t,r))throw Error("Transaction/combine: different unsigned tx");this.global=l.mergeKeyMap(l.PSBTGlobal,this.global,e.global);for(let t=0;t<this.inputs.length;t++)this.updateInput(t,e.inputs[t],!0);for(let t=0;t<this.outputs.length;t++)this.updateOutput(t,e.outputs[t],!0);return this}clone(){return v.fromPSBT(this.toPSBT(this.opts.PSBTVersion),this.opts)}}r.Transaction=v},867241,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RawPSBTV2=r.RawPSBTV0=r._DebugPSBT=r._RawPSBTV2=r._RawPSBTV0=r.PSBTOutputCoder=r.PSBTInputCoder=r.PSBTOutputUnsignedKeys=r.PSBTOutput=r.PSBTInputUnsignedKeys=r.PSBTInputFinalKeys=r.PSBTInput=r.PSBTGlobal=r.TaprootControlBlock=void 0,r.cleanPSBTFields=function(e,t,r){let n={};for(let a in r){if("unknown"!==a){if(!t[a])continue;let{allowInc:r,silentIgnore:n}=E(t[a]);if(!r.includes(e)){if(n)continue;throw Error(`Failed to serialize in PSBTv${e}: ${a} but versions allows inclusion=${r}`)}}n[a]=r[a]}return n},r.mergeKeyMap=function(e,t,r,a){let i={...r,...t};for(let s in e){let l=s,[c,u,d]=e[l],h=a&&!a.includes(s);if(void 0===t[s]&&s in t){if(h)throw Error(`Cannot remove signed field=${s}`);delete i[s]}else if(u){let e=r&&r[s]?r[s]:[],a=t[l];if(a){if(!Array.isArray(a))throw Error(`keyMap(${s}): KV pairs should be [k, v][]`);a=a.map(e=>{if(2!==e.length)throw Error(`keyMap(${s}): KV pairs should be [k, v][]`);return["string"==typeof e[0]?u.decode(n.hex.decode(e[0])):e[0],"string"==typeof e[1]?d.decode(n.hex.decode(e[1])):e[1]]});let t={},r=(e,r,a)=>{if(void 0===t[e]){t[e]=[r,a];return}let i=n.hex.encode(d.encode(t[e][1])),s=n.hex.encode(d.encode(a));if(i!==s)throw Error(`keyMap(${l}): same key=${e} oldVal=${i} newVal=${s}`)};for(let[t,a]of e)r(n.hex.encode(u.encode(t)),t,a);for(let[e,i]of a){let a=n.hex.encode(u.encode(e));if(void 0===i){if(h)throw Error(`Cannot remove signed field=${l}/${e}`);delete t[a]}else r(a,e,i)}i[l]=Object.values(t)}}else if("string"==typeof i[s])i[s]=d.decode(n.hex.decode(i[s]));else if(h&&s in t&&r&&void 0!==r[s]&&!(0,o.equalBytes)(d.encode(t[s]),d.encode(r[s])))throw Error(`Cannot change signed field=${s}`)}for(let t in i)e[t]||delete i[t];return i};let n=e.r(942340),a=e.r(743618),i=e.r(629086),s=e.r(128887),o=e.r(196225),l=a.validate(a.bytes(null),e=>(0,o.validatePubkey)(e,o.PubT.ecdsa)),c=a.validate(a.bytes(32),e=>(0,o.validatePubkey)(e,o.PubT.schnorr)),u=a.validate(a.bytes(null),e=>{if(64!==e.length&&65!==e.length)throw Error("Schnorr signature should be 64 or 65 bytes long");return e}),d=a.struct({fingerprint:a.U32BE,path:a.array(null,a.U32LE)}),h=a.struct({hashes:a.array(i.CompactSizeLen,a.bytes(32)),der:d}),f=a.bytes(78),p=a.struct({pubKey:c,leafHash:a.bytes(32)}),g=a.struct({version:a.U8,internalKey:a.bytes(32),merklePath:a.array(null,a.bytes(32))});r.TaprootControlBlock=a.validate(g,e=>{if(e.merklePath.length>128)throw Error("TaprootControlBlock: merklePath should be of length 0..128 (inclusive)");return e});let m=a.array(null,a.struct({depth:a.U8,version:a.U8,script:i.VarBytes})),y=a.bytes(null),b=a.bytes(20),_=a.bytes(32);r.PSBTGlobal={unsignedTx:[0,!1,i.RawOldTx,[0],[0],!1],xpub:[1,f,d,[],[0,2],!1],txVersion:[2,!1,a.U32LE,[2],[2],!1],fallbackLocktime:[3,!1,a.U32LE,[],[2],!1],inputCount:[4,!1,i.CompactSizeLen,[2],[2],!1],outputCount:[5,!1,i.CompactSizeLen,[2],[2],!1],txModifiable:[6,!1,a.U8,[],[2],!1],version:[251,!1,a.U32LE,[],[0,2],!1],proprietary:[252,y,y,[],[0,2],!1]},r.PSBTInput={nonWitnessUtxo:[0,!1,i.RawTx,[],[0,2],!1],witnessUtxo:[1,!1,i.RawOutput,[],[0,2],!1],partialSig:[2,l,y,[],[0,2],!1],sighashType:[3,!1,a.U32LE,[],[0,2],!1],redeemScript:[4,!1,y,[],[0,2],!1],witnessScript:[5,!1,y,[],[0,2],!1],bip32Derivation:[6,l,d,[],[0,2],!1],finalScriptSig:[7,!1,y,[],[0,2],!1],finalScriptWitness:[8,!1,i.RawWitness,[],[0,2],!1],porCommitment:[9,!1,y,[],[0,2],!1],ripemd160:[10,b,y,[],[0,2],!1],sha256:[11,_,y,[],[0,2],!1],hash160:[12,b,y,[],[0,2],!1],hash256:[13,_,y,[],[0,2],!1],txid:[14,!1,_,[2],[2],!0],index:[15,!1,a.U32LE,[2],[2],!0],sequence:[16,!1,a.U32LE,[],[2],!0],requiredTimeLocktime:[17,!1,a.U32LE,[],[2],!1],requiredHeightLocktime:[18,!1,a.U32LE,[],[2],!1],tapKeySig:[19,!1,u,[],[0,2],!1],tapScriptSig:[20,p,u,[],[0,2],!1],tapLeafScript:[21,r.TaprootControlBlock,y,[],[0,2],!1],tapBip32Derivation:[22,_,h,[],[0,2],!1],tapInternalKey:[23,!1,c,[],[0,2],!1],tapMerkleRoot:[24,!1,_,[],[0,2],!1],proprietary:[252,y,y,[],[0,2],!1]},r.PSBTInputFinalKeys=["txid","sequence","index","witnessUtxo","nonWitnessUtxo","finalScriptSig","finalScriptWitness","unknown"],r.PSBTInputUnsignedKeys=["partialSig","finalScriptSig","finalScriptWitness","tapKeySig","tapScriptSig"],r.PSBTOutput={redeemScript:[0,!1,y,[],[0,2],!1],witnessScript:[1,!1,y,[],[0,2],!1],bip32Derivation:[2,l,d,[],[0,2],!1],amount:[3,!1,a.I64LE,[2],[2],!0],script:[4,!1,y,[2],[2],!0],tapInternalKey:[5,!1,c,[],[0,2],!1],tapTree:[6,!1,m,[],[0,2],!1],tapBip32Derivation:[7,c,h,[],[0,2],!1],proprietary:[252,y,y,[],[0,2],!1]},r.PSBTOutputUnsignedKeys=[];let w=a.array(a.NULL,a.struct({key:a.prefix(i.CompactSizeLen,a.struct({type:i.CompactSizeLen,key:a.bytes(null)})),value:a.bytes(i.CompactSizeLen)}));function E(e){let[t,r,n,a,i,s]=e;return{type:t,kc:r,vc:n,reqInc:a,allowInc:i,silentIgnore:s}}function v(e){let t={};for(let r in e){let[n,a,i]=e[r];t[n]=[r,a,i]}return a.wrap({encodeStream:(t,r)=>{let n=[];for(let t in e){let i=r[t];if(void 0===i)continue;let[s,l,c]=e[t];if(l){let e=i.map(([e,t])=>[l.encode(e),c.encode(t)]);for(let[t,r]of(e.sort((e,t)=>(0,o.compareBytes)(e[0],t[0])),e))n.push({key:{key:t,type:s},value:r})}else n.push({key:{type:s,key:a.EMPTY},value:c.encode(i)})}if(r.unknown)for(let[e,t]of(r.unknown.sort((e,t)=>(0,o.compareBytes)(e[0].key,t[0].key)),r.unknown))n.push({key:e,value:t});w.encodeStream(t,n)},decodeStream:e=>{let r=w.decodeStream(e),a={},i={};for(let e of r){let r="unknown",s=e.key.key,o=e.value;if(t[e.key.type]){let[l,c,u]=t[e.key.type];if(r=l,!c&&s.length)throw Error(`PSBT: Non-empty key for ${r} (key=${n.hex.encode(s)} value=${n.hex.encode(o)}`);if(s=c?c.decode(s):void 0,o=u.decode(o),!c){if(a[r])throw Error(`PSBT: Same keys: ${r} (key=${s} value=${o})`);a[r]=o,i[r]=!0;continue}}else s={type:e.key.type,key:e.key.key};if(i[r])throw Error(`PSBT: Key type with empty key and no key=${r} val=${o}`);a[r]||(a[r]=[]),a[r].push([s,o])}return a}})}a.struct({type:i.CompactSizeLen,key:a.bytes(null)}),r.PSBTInputCoder=a.validate(v(r.PSBTInput),e=>{if(e.finalScriptWitness&&!e.finalScriptWitness.length)throw Error("validateInput: empty finalScriptWitness");if(e.partialSig&&!e.partialSig.length)throw Error("Empty partialSig");if(e.partialSig)for(let[t]of e.partialSig)(0,o.validatePubkey)(t,o.PubT.ecdsa);if(e.bip32Derivation)for(let[t]of e.bip32Derivation)(0,o.validatePubkey)(t,o.PubT.ecdsa);if(void 0!==e.requiredTimeLocktime&&e.requiredTimeLocktime<5e8)throw Error(`validateInput: wrong timeLocktime=${e.requiredTimeLocktime}`);if(void 0!==e.requiredHeightLocktime&&(e.requiredHeightLocktime<=0||e.requiredHeightLocktime>=5e8))throw Error(`validateInput: wrong heighLocktime=${e.requiredHeightLocktime}`);if(e.nonWitnessUtxo&&void 0!==e.index){let t=e.nonWitnessUtxo.outputs.length-1;if(e.index>t)throw Error(`validateInput: index(${e.index}) not in nonWitnessUtxo`);let r=e.nonWitnessUtxo.outputs[e.index];if(e.witnessUtxo&&(!(0,o.equalBytes)(e.witnessUtxo.script,r.script)||e.witnessUtxo.amount!==r.amount))throw Error("validateInput: witnessUtxo different from nonWitnessUtxo")}if(e.tapLeafScript)for(let[t,r]of e.tapLeafScript){if((254&t.version)!==r[r.length-1])throw Error("validateInput: tapLeafScript version mimatch");if(1&r[r.length-1])throw Error("validateInput: tapLeafScript version has parity bit!")}if(e.nonWitnessUtxo&&void 0!==e.index&&e.txid){if(e.nonWitnessUtxo.outputs.length-1<e.index)throw Error("nonWitnessUtxo: incorect output index");let t=s.Transaction.fromRaw(i.RawTx.encode(e.nonWitnessUtxo),{allowUnknownOutputs:!0,disableScriptCheck:!0,allowUnknownInputs:!0}),r=n.hex.encode(e.txid);if(t.isFinal&&t.id!==r)throw Error(`nonWitnessUtxo: wrong txid, exp=${r} got=${t.id}`)}return e}),r.PSBTOutputCoder=a.validate(v(r.PSBTOutput),e=>{if(e.bip32Derivation)for(let[t]of e.bip32Derivation)(0,o.validatePubkey)(t,o.PubT.ecdsa);return e});let S=a.validate(v(r.PSBTGlobal),e=>{if(0===(e.version||0)){if(!e.unsignedTx)throw Error("PSBTv0: missing unsignedTx");for(let t of e.unsignedTx.inputs)if(t.finalScriptSig&&t.finalScriptSig.length)throw Error("PSBTv0: input scriptSig found in unsignedTx")}return e});function x(e,t,r){for(let n in r){if("unknown"===n||!t[n])continue;let{allowInc:r}=E(t[n]);if(!r.includes(e))throw Error(`PSBTv${e}: field ${n} is not allowed`)}for(let n in t){let{reqInc:a}=E(t[n]);if(a.includes(e)&&void 0===r[n])throw Error(`PSBTv${e}: missing required field ${n}`)}}function T(e){let t=e&&e.global&&e.global.version||0;for(let n of(x(t,r.PSBTGlobal,e.global),e.inputs))x(t,r.PSBTInput,n);for(let n of e.outputs)x(t,r.PSBTOutput,n);let n=t?e.global.inputCount:e.global.unsignedTx.inputs.length;if(e.inputs.length<n)throw Error("Not enough inputs");let a=e.inputs.slice(n);if(a.length>1||a.length&&Object.keys(a[0]).length)throw Error(`Unexpected inputs left in tx=${a}`);let i=t?e.global.outputCount:e.global.unsignedTx.outputs.length;if(e.outputs.length<i)throw Error("Not outputs inputs");let s=e.outputs.slice(i);if(s.length>1||s.length&&Object.keys(s[0]).length)throw Error(`Unexpected outputs left in tx=${s}`);return e}r._RawPSBTV0=a.struct({magic:a.magic(a.string(new Uint8Array([255])),"psbt"),global:S,inputs:a.array("global/unsignedTx/inputs/length",r.PSBTInputCoder),outputs:a.array(null,r.PSBTOutputCoder)}),r._RawPSBTV2=a.struct({magic:a.magic(a.string(new Uint8Array([255])),"psbt"),global:S,inputs:a.array("global/inputCount",r.PSBTInputCoder),outputs:a.array("global/outputCount",r.PSBTOutputCoder)}),r._DebugPSBT=a.struct({magic:a.magic(a.string(new Uint8Array([255])),"psbt"),items:a.array(null,a.apply(a.array(a.NULL,a.tuple([a.hex(i.CompactSizeLen),a.bytes(i.CompactSize)])),a.coders.dict()))}),r.RawPSBTV0=a.validate(r._RawPSBTV0,T),r.RawPSBTV2=a.validate(r._RawPSBTV2,T)},818601,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r._sortPubkeys=r.p2tr_pk=r.p2tr_ns=r.tapLeafHash=r.TAP_LEAF_VERSION=r.p2ms=r.p2wpkh=r.p2wsh=r.p2sh=r.p2pkh=r.p2pk=r.OutScript=void 0,r.checkScript=f,r.taprootListToTree=g,r.p2tr=m,r.combinations=y,r.p2tr_ms=function(e,t,n=!1){return n||p(t),{type:"tr_ms",script:r.OutScript.encode({type:"tr_ms",pubkeys:t,m:e})}},r.getAddress=function(e,t,n=l.NETWORK){if("tr"===e)return m(o.pubSchnorr(t),void 0,n).address;let a=o.pubECDSA(t);if("pkh"===e)return(0,r.p2pkh)(a,n).address;if("wpkh"===e)return(0,r.p2wpkh)(a,n).address;throw Error(`getAddress: unknown type=${e}`)},r.multisig=b,r.sortedMultisig=function(e,t,r=!1,n=l.NETWORK){return b(e,t,!0,r,n)},r.WIF=function(e=l.NETWORK){return{encode:t=>v(o.concatBytes(t,new Uint8Array([1])).subarray(0,33),[e.wif]),decode(t){let r=_.decode(t);if(r[0]!==e.wif)throw Error("Wrong WIF prefix");if(33!==(r=r.subarray(1)).length)throw Error("Wrong WIF length");if(1!==r[32])throw Error("Wrong WIF postfix");return r.subarray(0,-1)}}},r.Address=S;let n=e.r(942340),a=e.r(743618),i=e.r(867241),s=e.r(629086),o=e.r(196225),l=e.r(196225);function c(e,t){try{return o.validatePubkey(e,t),!0}catch(e){return!1}}let u=[{encode(e){if(2===e.length&&1===e[0]&&o.isBytes(e[1])&&"4e73"===n.hex.encode(e[1]))return{type:"p2a",script:s.Script.encode(e)}},decode:e=>{if("p2a"===e.type)return[1,n.hex.decode("4e73")]}},{encode(e){if(2===e.length&&o.isBytes(e[0])&&c(e[0],o.PubT.ecdsa)&&"CHECKSIG"===e[1])return{type:"pk",pubkey:e[0]}},decode:e=>"pk"===e.type?[e.pubkey,"CHECKSIG"]:void 0},{encode(e){if(5===e.length&&"DUP"===e[0]&&"HASH160"===e[1]&&o.isBytes(e[2])&&"EQUALVERIFY"===e[3]&&"CHECKSIG"===e[4])return{type:"pkh",hash:e[2]}},decode:e=>"pkh"===e.type?["DUP","HASH160",e.hash,"EQUALVERIFY","CHECKSIG"]:void 0},{encode(e){if(3===e.length&&"HASH160"===e[0]&&o.isBytes(e[1])&&"EQUAL"===e[2])return{type:"sh",hash:e[1]}},decode:e=>"sh"===e.type?["HASH160",e.hash,"EQUAL"]:void 0},{encode(e){if(2===e.length&&0===e[0]&&o.isBytes(e[1])&&32===e[1].length)return{type:"wsh",hash:e[1]}},decode:e=>"wsh"===e.type?[0,e.hash]:void 0},{encode(e){if(2===e.length&&0===e[0]&&o.isBytes(e[1])&&20===e[1].length)return{type:"wpkh",hash:e[1]}},decode:e=>"wpkh"===e.type?[0,e.hash]:void 0},{encode(e){let t=e.length-1;if("CHECKMULTISIG"!==e[t])return;let r=e[0],n=e[t-1];if("number"!=typeof r||"number"!=typeof n)return;let a=e.slice(1,-2);if(n===a.length){for(let e of a)if(!o.isBytes(e))return;return{type:"ms",m:r,pubkeys:a}}},decode:e=>"ms"===e.type?[e.m,...e.pubkeys,e.pubkeys.length,"CHECKMULTISIG"]:void 0},{encode(e){if(2===e.length&&1===e[0]&&o.isBytes(e[1]))return{type:"tr",pubkey:e[1]}},decode:e=>"tr"===e.type?[1,e.pubkey]:void 0},{encode(e){let t=e.length-1;if("CHECKSIG"!==e[t])return;let r=[];for(let n=0;n<t;n++){let a=e[n];if(1&n){if("CHECKSIGVERIFY"!==a||n===t-1)return;continue}if(!o.isBytes(a))return;r.push(a)}return{type:"tr_ns",pubkeys:r}},decode:e=>{if("tr_ns"!==e.type)return;let t=[];for(let r=0;r<e.pubkeys.length-1;r++)t.push(e.pubkeys[r],"CHECKSIGVERIFY");return t.push(e.pubkeys[e.pubkeys.length-1],"CHECKSIG"),t}},{encode(e){let t=e.length-1;if("NUMEQUAL"!==e[t]||"CHECKSIG"!==e[1])return;let r=[],n=(0,s.OpToNum)(e[t-1]);if("number"==typeof n){for(let n=0;n<t-1;n++){let t=e[n];if(1&n){if(t!==(1===n?"CHECKSIG":"CHECKSIGADD"))throw Error("OutScript.encode/tr_ms: wrong element");continue}if(!o.isBytes(t))throw Error("OutScript.encode/tr_ms: wrong key element");r.push(t)}return{type:"tr_ms",pubkeys:r,m:n}}},decode:e=>{if("tr_ms"!==e.type)return;let t=[e.pubkeys[0],"CHECKSIG"];for(let r=1;r<e.pubkeys.length;r++)t.push(e.pubkeys[r],"CHECKSIGADD");return t.push(e.m,"NUMEQUAL"),t}},{encode:e=>({type:"unknown",script:s.Script.encode(e)}),decode:e=>"unknown"===e.type?s.Script.decode(e.script):void 0}],d=a.apply(s.Script,a.coders.match(u));function h(e,t){if(!o.equalBytes(e.hash,o.sha256(t)))throw Error("checkScript: wsh wrong witnessScript hash");let n=r.OutScript.decode(t);if("tr"===n.type||"tr_ns"===n.type||"tr_ms"===n.type)throw Error(`checkScript: P2${n.type} cannot be wrapped in P2SH`);if("wpkh"===n.type||"sh"===n.type)throw Error(`checkScript: P2${n.type} cannot be wrapped in P2WSH`)}function f(e,t,n){if(e){let a=r.OutScript.decode(e);if("tr_ns"===a.type||"tr_ms"===a.type||"ms"===a.type||"pk"==a.type)throw Error(`checkScript: non-wrapped ${a.type}`);if("sh"===a.type&&t){if(!o.equalBytes(a.hash,o.hash160(t)))throw Error("checkScript: sh wrong redeemScript hash");let e=r.OutScript.decode(t);if("tr"===e.type||"tr_ns"===e.type||"tr_ms"===e.type)throw Error(`checkScript: P2${e.type} cannot be wrapped in P2SH`);if("sh"===e.type)throw Error("checkScript: P2SH cannot be wrapped in P2SH")}"wsh"===a.type&&n&&h(a,n)}if(t){let e=r.OutScript.decode(t);"wsh"===e.type&&n&&h(e,n)}}function p(e){let t={};for(let r of e){let a=n.hex.encode(r);if(t[a])throw Error(`Multisig: non-uniq pubkey: ${e.map(n.hex.encode)}`);t[a]=!0}}function g(e){let t=Array.from(e);for(;t.length>=2;){t.sort((e,t)=>(t.weight||1)-(e.weight||1));let e=t.pop(),r=t.pop(),n=(r?.weight||1)+(e?.weight||1);t.push({weight:n,childs:[r?.childs||r,e?.childs||e]})}let r=t[0];return r?.childs||r}function m(e,t,u=l.NETWORK,d=!1,h){let f,p;if(!e&&!t)throw Error("p2tr: should have pubKey or scriptTree (or both)");let y="string"==typeof e?n.hex.decode(e):e||o.TAPROOT_UNSPENDABLE_KEY;if(!c(y,o.PubT.schnorr))throw Error("p2tr: non-schnorr pubkey");let b=t?function e(t,r=[]){if(!t)throw Error("taprootAddPath: empty tree");if("leaf"===t.type)return{...t,path:r};if("branch"!==t.type)throw Error(`taprootAddPath: wrong type=${t}`);return{...t,path:r,left:e(t.left,[t.right.hash,...r]),right:e(t.right,[t.left.hash,...r])}}(function e(t,i,l=!1,c){if(!t)throw Error("taprootHashTree: empty tree");if(Array.isArray(t)&&1===t.length&&(t=t[0]),!Array.isArray(t)){let{leafVersion:e,script:u}=t;if(t.tapLeafScript||t.tapMerkleRoot&&!o.equalBytes(t.tapMerkleRoot,a.EMPTY))throw Error("P2TR: tapRoot leafScript cannot have tree");let d="string"==typeof u?n.hex.decode(u):u;if(!o.isBytes(d))throw Error(`checkScript: wrong script type=${d}`);return!function(e,t,n=!1,i){let l=r.OutScript.decode(e);if("unknown"===l.type){if(i){let t=a.apply(s.Script,a.coders.match(i)).decode(e);if(void 0!==t){if("string"!=typeof t.type||!t.type.startsWith("tr_"))throw Error(`P2TR: invalid custom type=${t.type}`);return}}if(n)return}if(!["tr_ns","tr_ms"].includes(l.type))throw Error(`P2TR: invalid leaf script=${l.type}`);if(!n&&l.pubkeys)for(let e of l.pubkeys){if(o.equalBytes(e,o.TAPROOT_UNSPENDABLE_KEY))throw Error("Unspendable taproot key in leaf script");if(o.equalBytes(e,t))throw Error("Using P2TR with leaf script with same key as internal key is not supported")}}(d,i,l,c),{type:"leaf",version:e,script:d,hash:(0,r.tapLeafHash)(d,e)}}if(2!==t.length&&(t=g(t)),2!==t.length)throw Error("hashTree: non binary tree!");let u=e(t[0],i,l,c),d=e(t[1],i,l,c),[h,f]=[u.hash,d.hash];return -1===o.compareBytes(f,h)&&([h,f]=[f,h]),{type:"branch",left:u,right:d,hash:o.tagSchnorr("TapBranch",h,f)}}(t,y,d,h)):void 0,_=b?b.hash:void 0,[w,E]=o.taprootTweakPubkey(y,_||a.EMPTY);b&&(f=(function e(t){if(!t)throw Error("taprootAddPath: empty tree");if("leaf"===t.type)return[t];if("branch"!==t.type)throw Error(`taprootWalkTree: wrong type=${t}`);return[...e(t.left),...e(t.right)]})(b).map(e=>({...e,controlBlock:i.TaprootControlBlock.encode({version:(e.version||r.TAP_LEAF_VERSION)+E,internalKey:y,merklePath:e.path})}))),f&&(p=f.map(e=>[i.TaprootControlBlock.decode(e.controlBlock),o.concatBytes(e.script,new Uint8Array([e.version||r.TAP_LEAF_VERSION]))]));let v={type:"tr",script:r.OutScript.encode({type:"tr",pubkey:w}),address:S(u).encode({type:"tr",pubkey:w}),tweakedPubkey:w,tapInternalKey:y};return f&&(v.leaves=f),p&&(v.tapLeafScript=p),_&&(v.tapMerkleRoot=_),v}function y(e,t){let r=[];if(!Array.isArray(t))throw Error("combinations: lst arg should be array");let n=t.length;if(e>n)throw Error("combinations: m > lst.length, no combinations possible");let a=Array.from({length:e},(e,t)=>t),i=a.length-1;e:for(;;){r.push(a.map(e=>t[e])),a[i]+=1;let s=i;for(;s>=0&&a[s]>n-e+s;s--){if(a[s]=0,0===s)break e;a[s-1]+=1}for(s+=1;s<a.length;s++)a[s]=a[s-1]+1}return r}function b(e,t,n=!1,a=!1,i=l.NETWORK){let s=(0,r.p2ms)(e,n?(0,r._sortPubkeys)(t):t);return a?(0,r.p2wsh)(s,i):(0,r.p2sh)(s,i)}r.OutScript=a.validate(d,e=>{if("pk"===e.type&&!c(e.pubkey,o.PubT.ecdsa))throw Error("OutScript/pk: wrong key");if(("pkh"===e.type||"sh"===e.type||"wpkh"===e.type)&&(!o.isBytes(e.hash)||20!==e.hash.length))throw Error(`OutScript/${e.type}: wrong hash`);if("wsh"===e.type&&(!o.isBytes(e.hash)||32!==e.hash.length))throw Error("OutScript/wsh: wrong hash");if("tr"===e.type&&(!o.isBytes(e.pubkey)||!c(e.pubkey,o.PubT.schnorr)))throw Error("OutScript/tr: wrong taproot public key");if(("ms"===e.type||"tr_ns"===e.type||"tr_ms"===e.type)&&!Array.isArray(e.pubkeys))throw Error("OutScript/multisig: wrong pubkeys array");if("ms"===e.type){let t=e.pubkeys.length;for(let t of e.pubkeys)if(!c(t,o.PubT.ecdsa))throw Error("OutScript/multisig: wrong pubkey");if(e.m<=0||t>16||e.m>t)throw Error("OutScript/multisig: invalid params")}if("tr_ns"===e.type||"tr_ms"===e.type){for(let t of e.pubkeys)if(!c(t,o.PubT.schnorr))throw Error(`OutScript/${e.type}: wrong pubkey`)}if("tr_ms"===e.type){let t=e.pubkeys.length;if(e.m<=0||t>999||e.m>t)throw Error("OutScript/tr_ms: invalid params")}return e}),r.p2pk=(e,t=l.NETWORK)=>{if(!c(e,o.PubT.ecdsa))throw Error("P2PK: invalid publicKey");return{type:"pk",script:r.OutScript.encode({type:"pk",pubkey:e})}},r.p2pkh=(e,t=l.NETWORK)=>{if(!c(e,o.PubT.ecdsa))throw Error("P2PKH: invalid publicKey");let n=o.hash160(e);return{type:"pkh",script:r.OutScript.encode({type:"pkh",hash:n}),address:S(t).encode({type:"pkh",hash:n})}},r.p2sh=(e,t=l.NETWORK)=>{let n=e.script;if(!o.isBytes(n))throw Error(`Wrong script: ${typeof e.script}, expected Uint8Array`);let a=o.hash160(n);f(r.OutScript.encode({type:"sh",hash:a}),n,e.witnessScript);let i={type:"sh",redeemScript:n,script:r.OutScript.encode({type:"sh",hash:a}),address:S(t).encode({type:"sh",hash:a})};return e.witnessScript&&(i.witnessScript=e.witnessScript),i},r.p2wsh=(e,t=l.NETWORK)=>{let n=e.script;if(!o.isBytes(n))throw Error(`Wrong script: ${typeof n}, expected Uint8Array`);let a=o.sha256(n);return f(r.OutScript.encode({type:"wsh",hash:a}),void 0,n),{type:"wsh",witnessScript:n,script:r.OutScript.encode({type:"wsh",hash:a}),address:S(t).encode({type:"wsh",hash:a})}},r.p2wpkh=(e,t=l.NETWORK)=>{if(!c(e,o.PubT.ecdsa))throw Error("P2WPKH: invalid publicKey");if(65===e.length)throw Error("P2WPKH: uncompressed public key");let n=o.hash160(e);return{type:"wpkh",script:r.OutScript.encode({type:"wpkh",hash:n}),address:S(t).encode({type:"wpkh",hash:n})}},r.p2ms=(e,t,n=!1)=>(n||p(t),{type:"ms",script:r.OutScript.encode({type:"ms",pubkeys:t,m:e})}),r.TAP_LEAF_VERSION=192,r.tapLeafHash=(e,t=r.TAP_LEAF_VERSION)=>o.tagSchnorr("TapLeaf",new Uint8Array([t]),s.VarBytes.encode(e)),r.p2tr_ns=(e,t,n=!1)=>(n||p(t),y(e,t).map(e=>({type:"tr_ns",script:r.OutScript.encode({type:"tr_ns",pubkeys:e})}))),r.p2tr_pk=e=>(0,r.p2tr_ns)(1,[e],void 0)[0],r._sortPubkeys=e=>Array.from(e).sort(o.compareBytes);let _=(0,n.createBase58check)(o.sha256);function w(e,t){if(t.length<2||t.length>40)throw Error("Witness: invalid length");if(e>16)throw Error("Witness: invalid version");if(0===e&&20!==t.length&&32!==t.length)throw Error("Witness: invalid length for version")}function E(e,t,r=l.NETWORK){w(e,t);let a=0===e?n.bech32:n.bech32m;return a.encode(r.bech32,[e].concat(a.toWords(t)))}function v(e,t){return _.encode(o.concatBytes(Uint8Array.from(t),e))}function S(e=l.NETWORK){return{encode(t){let{type:r}=t;if("wpkh"===r||"wsh"===r)return E(0,t.hash,e);if("tr"===r)return E(1,t.pubkey,e);if("pkh"===r)return v(t.hash,[e.pubKeyHash]);if("sh"===r)return v(t.hash,[e.scriptHash]);throw Error(`Unknown address type=${r}`)},decode(t){if(t.length<14||t.length>74)throw Error("Invalid address length");if(e.bech32&&t.toLowerCase().startsWith(`${e.bech32}1`)){let r;try{if(r=n.bech32.decode(t),0!==r.words[0])throw Error(`bech32: wrong version=${r.words[0]}`)}catch(e){if(0===(r=n.bech32m.decode(t)).words[0])throw Error(`bech32m: wrong version=${r.words[0]}`)}if(r.prefix!==e.bech32)throw Error(`wrong bech32 prefix=${r.prefix}`);let[a,...i]=r.words,s=n.bech32.fromWords(i);if(w(a,s),0===a&&32===s.length)return{type:"wsh",hash:s};if(0===a&&20===s.length)return{type:"wpkh",hash:s};if(1===a&&32===s.length)return{type:"tr",pubkey:s};else throw Error("Unknown witness program")}let r=_.decode(t);if(21!==r.length)throw Error("Invalid base58 address");if(r[0]===e.pubKeyHash)return{type:"pkh",hash:r.slice(1)};if(r[0]===e.scriptHash)return{type:"sh",hash:r.slice(1)};throw Error(`Invalid address prefix=${r[0]}`)}}}},839596,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r._Estimator=r._cmpBig=r.SigHash=r.PSBTCombine=r.DEFAULT_SEQUENCE=r.Decimal=r.bip32Path=r.TaprootControlBlock=r._DebugPSBT=r.WIF=r.taprootListToTree=r.sortedMultisig=r.OutScript=r.getAddress=r.combinations=r.Address=r._sortPubkeys=r.utils=r.selectUTXO=r.getInputType=r.TEST_NETWORK=r.TAPROOT_UNSPENDABLE_KEY=r.NETWORK=r.Transaction=r.ScriptNum=r.Script=r.RawWitness=r.RawTx=r.OP=r.MAX_SCRIPT_BYTE_LENGTH=r.CompactSize=r.p2wsh=r.p2wpkh=r.p2tr_pk=r.p2tr_ns=r.p2tr_ms=r.p2tr=r.p2sh=r.p2pkh=r.p2pk=r.p2ms=r.multisig=void 0;let n=e.r(196225);var a=e.r(818601);Object.defineProperty(r,"multisig",{enumerable:!0,get:function(){return a.multisig}}),Object.defineProperty(r,"p2ms",{enumerable:!0,get:function(){return a.p2ms}}),Object.defineProperty(r,"p2pk",{enumerable:!0,get:function(){return a.p2pk}}),Object.defineProperty(r,"p2pkh",{enumerable:!0,get:function(){return a.p2pkh}}),Object.defineProperty(r,"p2sh",{enumerable:!0,get:function(){return a.p2sh}}),Object.defineProperty(r,"p2tr",{enumerable:!0,get:function(){return a.p2tr}}),Object.defineProperty(r,"p2tr_ms",{enumerable:!0,get:function(){return a.p2tr_ms}}),Object.defineProperty(r,"p2tr_ns",{enumerable:!0,get:function(){return a.p2tr_ns}}),Object.defineProperty(r,"p2tr_pk",{enumerable:!0,get:function(){return a.p2tr_pk}}),Object.defineProperty(r,"p2wpkh",{enumerable:!0,get:function(){return a.p2wpkh}}),Object.defineProperty(r,"p2wsh",{enumerable:!0,get:function(){return a.p2wsh}});var i=e.r(629086);Object.defineProperty(r,"CompactSize",{enumerable:!0,get:function(){return i.CompactSize}}),Object.defineProperty(r,"MAX_SCRIPT_BYTE_LENGTH",{enumerable:!0,get:function(){return i.MAX_SCRIPT_BYTE_LENGTH}}),Object.defineProperty(r,"OP",{enumerable:!0,get:function(){return i.OP}}),Object.defineProperty(r,"RawTx",{enumerable:!0,get:function(){return i.RawTx}}),Object.defineProperty(r,"RawWitness",{enumerable:!0,get:function(){return i.RawWitness}}),Object.defineProperty(r,"Script",{enumerable:!0,get:function(){return i.Script}}),Object.defineProperty(r,"ScriptNum",{enumerable:!0,get:function(){return i.ScriptNum}});var s=e.r(128887);Object.defineProperty(r,"Transaction",{enumerable:!0,get:function(){return s.Transaction}});var o=e.r(196225);Object.defineProperty(r,"NETWORK",{enumerable:!0,get:function(){return o.NETWORK}}),Object.defineProperty(r,"TAPROOT_UNSPENDABLE_KEY",{enumerable:!0,get:function(){return o.TAPROOT_UNSPENDABLE_KEY}}),Object.defineProperty(r,"TEST_NETWORK",{enumerable:!0,get:function(){return o.TEST_NETWORK}});var l=e.r(434577);Object.defineProperty(r,"getInputType",{enumerable:!0,get:function(){return l.getInputType}}),Object.defineProperty(r,"selectUTXO",{enumerable:!0,get:function(){return l.selectUTXO}}),r.utils={isBytes:n.isBytes,concatBytes:n.concatBytes,compareBytes:n.compareBytes,pubSchnorr:n.pubSchnorr,randomPrivateKeyBytes:n.randomPrivateKeyBytes,taprootTweakPubkey:n.taprootTweakPubkey};var c=e.r(818601);Object.defineProperty(r,"_sortPubkeys",{enumerable:!0,get:function(){return c._sortPubkeys}}),Object.defineProperty(r,"Address",{enumerable:!0,get:function(){return c.Address}}),Object.defineProperty(r,"combinations",{enumerable:!0,get:function(){return c.combinations}}),Object.defineProperty(r,"getAddress",{enumerable:!0,get:function(){return c.getAddress}}),Object.defineProperty(r,"OutScript",{enumerable:!0,get:function(){return c.OutScript}}),Object.defineProperty(r,"sortedMultisig",{enumerable:!0,get:function(){return c.sortedMultisig}}),Object.defineProperty(r,"taprootListToTree",{enumerable:!0,get:function(){return c.taprootListToTree}}),Object.defineProperty(r,"WIF",{enumerable:!0,get:function(){return c.WIF}});var u=e.r(867241);Object.defineProperty(r,"_DebugPSBT",{enumerable:!0,get:function(){return u._DebugPSBT}}),Object.defineProperty(r,"TaprootControlBlock",{enumerable:!0,get:function(){return u.TaprootControlBlock}});var d=e.r(128887);Object.defineProperty(r,"bip32Path",{enumerable:!0,get:function(){return d.bip32Path}}),Object.defineProperty(r,"Decimal",{enumerable:!0,get:function(){return d.Decimal}}),Object.defineProperty(r,"DEFAULT_SEQUENCE",{enumerable:!0,get:function(){return d.DEFAULT_SEQUENCE}}),Object.defineProperty(r,"PSBTCombine",{enumerable:!0,get:function(){return d.PSBTCombine}}),Object.defineProperty(r,"SigHash",{enumerable:!0,get:function(){return d.SigHash}});var h=e.r(434577);Object.defineProperty(r,"_cmpBig",{enumerable:!0,get:function(){return h._cmpBig}}),Object.defineProperty(r,"_Estimator",{enumerable:!0,get:function(){return h._Estimator}})},859219,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},951662,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},640480,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},187800,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},509104,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},63663,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ETransactionVersion3=r.ETransactionVersion2=r.ETransactionVersion=r.EDAMode=r.EDataAvailabilityMode=r.EBlockTag=r.ETransactionExecutionStatus=r.ETransactionFinalityStatus=r.ETransactionStatus=r.ESimulationFlag=r.ETransactionType=r.CALL_TYPE=r.L1_DA_MODE=r.PRICE_UNIT_FRI=r.PRICE_UNIT_WEI=r.STATE_MUTABILITY_EXTERNAL=r.STATE_MUTABILITY_VIEW=r.ABI_TYPE_ENUM=r.ABI_TYPE_L1_HANDLER=r.ABI_TYPE_CONSTRUCTOR=r.ABI_TYPE_FUNCTION=r.EVENT_ABI_TYPE=r.STRUCT_ABI_TYPE=r.TXN_TYPE_L1_HANDLER=r.TXN_TYPE_INVOKE=r.TXN_TYPE_DEPLOY_ACCOUNT=r.TXN_TYPE_DEPLOY=r.TXN_TYPE_DECLARE=r.STATUS_RECEIVED=r.STATUS_REJECTED=r.STATUS_PENDING=r.STATUS_REVERTED=r.STATUS_SUCCEEDED=r.STATUS_ACCEPTED_ON_L1=r.STATUS_ACCEPTED_ON_L2=void 0,r.STATUS_ACCEPTED_ON_L2="ACCEPTED_ON_L2",r.STATUS_ACCEPTED_ON_L1="ACCEPTED_ON_L1",r.STATUS_SUCCEEDED="SUCCEEDED",r.STATUS_REVERTED="REVERTED",r.STATUS_PENDING="PENDING",r.STATUS_REJECTED="REJECTED",r.STATUS_RECEIVED="RECEIVED",r.TXN_TYPE_DECLARE="DECLARE",r.TXN_TYPE_DEPLOY="DEPLOY",r.TXN_TYPE_DEPLOY_ACCOUNT="DEPLOY_ACCOUNT",r.TXN_TYPE_INVOKE="INVOKE",r.TXN_TYPE_L1_HANDLER="L1_HANDLER",r.STRUCT_ABI_TYPE="struct",r.EVENT_ABI_TYPE="event",r.ABI_TYPE_FUNCTION="function",r.ABI_TYPE_CONSTRUCTOR="constructor",r.ABI_TYPE_L1_HANDLER="l1_handler",r.ABI_TYPE_ENUM="enum",r.STATE_MUTABILITY_VIEW="view",r.STATE_MUTABILITY_EXTERNAL="external",r.PRICE_UNIT_WEI="WEI",r.PRICE_UNIT_FRI="FRI",r.L1_DA_MODE={BLOB:"BLOB",CALLDATA:"CALLDATA"},r.CALL_TYPE={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},r.ETransactionType={DECLARE:r.TXN_TYPE_DECLARE,DEPLOY:r.TXN_TYPE_DEPLOY,DEPLOY_ACCOUNT:r.TXN_TYPE_DEPLOY_ACCOUNT,INVOKE:r.TXN_TYPE_INVOKE,L1_HANDLER:r.TXN_TYPE_L1_HANDLER},r.ESimulationFlag={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},r.ETransactionStatus={RECEIVED:r.STATUS_RECEIVED,REJECTED:r.STATUS_REJECTED,ACCEPTED_ON_L2:r.STATUS_ACCEPTED_ON_L2,ACCEPTED_ON_L1:r.STATUS_ACCEPTED_ON_L1},r.ETransactionFinalityStatus={ACCEPTED_ON_L2:r.STATUS_ACCEPTED_ON_L2,ACCEPTED_ON_L1:r.STATUS_ACCEPTED_ON_L1},r.ETransactionExecutionStatus={SUCCEEDED:r.STATUS_SUCCEEDED,REVERTED:r.STATUS_REVERTED},r.EBlockTag={LATEST:"latest",PENDING:"pending"},r.EDataAvailabilityMode={L1:"L1",L2:"L2"},r.EDAMode={L1:0,L2:1},r.ETransactionVersion={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},r.ETransactionVersion2={V0:r.ETransactionVersion.V0,V1:r.ETransactionVersion.V1,V2:r.ETransactionVersion.V2,F0:r.ETransactionVersion.F0,F1:r.ETransactionVersion.F1,F2:r.ETransactionVersion.F2},r.ETransactionVersion3={V3:r.ETransactionVersion.V3,F3:r.ETransactionVersion.F3}},682256,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},507739,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},927003,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.CONTRACT=void 0,a(e.r(859219),r),r.CONTRACT=e.r(951662),a(e.r(640480),r),a(e.r(187800),r),a(e.r(509104),r),a(e.r(63663),r),a(e.r(682256),r),a(e.r(507739),r)},777547,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Permission=void 0,r.Permission={ACCOUNTS:"accounts"}},636268,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TypedDataRevision=void 0,r.TypedDataRevision={ACTIVE:"1",LEGACY:"0"}},668384,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},852777,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},542558,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},958438,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},939077,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},457787,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),a(e.r(777547),r),a(e.r(636268),r),a(e.r(668384),r),a(e.r(852777),r),a(e.r(542558),r),a(e.r(958438),r),a(e.r(939077),r)},252032,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},360047,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},233977,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},358069,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},548204,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),a(e.r(252032),r),a(e.r(360047),r),a(e.r(233977),r),a(e.r(358069),r)},425909,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.PAYMASTER_API=r.WALLET_API=r.API=void 0,a(e.r(927003),r),r.API=e.r(927003),a(e.r(457787),r),r.WALLET_API=e.r(457787),r.PAYMASTER_API=e.r(548204)},848376,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},796717,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},24785,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},582160,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ETransactionVersion3=r.ETransactionVersion2=r.ETransactionVersion=r.EDAMode=r.EDataAvailabilityMode=r.EBlockTag=r.ETransactionExecutionStatus=r.ETransactionFinalityStatus=r.ETransactionStatus=r.ESimulationFlag=r.ETransactionType=void 0,r.ETransactionType={DECLARE:"DECLARE",DEPLOY:"DEPLOY",DEPLOY_ACCOUNT:"DEPLOY_ACCOUNT",INVOKE:"INVOKE",L1_HANDLER:"L1_HANDLER"},r.ESimulationFlag={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},r.ETransactionStatus={RECEIVED:"RECEIVED",REJECTED:"REJECTED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},r.ETransactionFinalityStatus={ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},r.ETransactionExecutionStatus={SUCCEEDED:"SUCCEEDED",REVERTED:"REVERTED"},r.EBlockTag={LATEST:"latest",PENDING:"pending"},r.EDataAvailabilityMode={L1:"L1",L2:"L2"},r.EDAMode={L1:0,L2:1},r.ETransactionVersion={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},r.ETransactionVersion2={V0:"0x0",V1:"0x1",V2:"0x2",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002"},r.ETransactionVersion3={V3:"0x3",F3:"0x100000000000000000000000000000003"}},757744,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.SPEC=r.Errors=void 0,a(e.r(848376),r),r.Errors=e.r(796717),r.SPEC=e.r(24785),a(e.r(582160),r)},473601,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Permission=void 0,r.Permission={ACCOUNTS:"accounts"}},783423,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TypedDataRevision=void 0,r.TypedDataRevision={ACTIVE:"1",LEGACY:"0"}},934819,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},954043,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},43648,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},191178,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},865317,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},788430,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),a(e.r(473601),r),a(e.r(783423),r),a(e.r(934819),r),a(e.r(954043),r),a(e.r(43648),r),a(e.r(191178),r),a(e.r(865317),r)},275790,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),r.WALLET_API=r.API=void 0,a(e.r(757744),r),r.API=e.r(757744),a(e.r(788430),r),r.WALLET_API=e.r(788430)},479328,(e,t,r)=>{"use strict";function n(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function a(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function i(e){if("function"!=typeof e)throw Error("function expected");return!0}function s(e,t){if("string"!=typeof t)throw Error(`${e}: string expected`);return!0}function o(e){if(!Number.isSafeInteger(e))throw Error(`invalid integer: ${e}`)}function l(e){if(!Array.isArray(e))throw Error("array expected")}function c(e,t){if(!a(!0,t))throw Error(`${e}: array of strings expected`)}function u(e,t){if(!a(!1,t))throw Error(`${e}: array of numbers expected`)}function d(...e){let t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map(e=>e.encode).reduceRight(r,t),decode:e.map(e=>e.decode).reduce(r,t)}}function h(e){let t="string"==typeof e?e.split(""):e,r=t.length;c("alphabet",t);let n=new Map(t.map((e,t)=>[e,t]));return{encode:n=>(l(n),n.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw Error(`alphabet.encode: digit index outside alphabet "${n}". Allowed: ${e}`);return t[n]})),decode:t=>(l(t),t.map(t=>{s("alphabet.decode",t);let r=n.get(t);if(void 0===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}function f(e=""){return s("join",e),{encode:t=>(c("join.decode",t),t.join(e)),decode:t=>(s("join.decode",t),t.split(e))}}function p(e,t="="){return o(e),s("padding",t),{encode(r){for(c("padding.encode",r);r.length*e%8;)r.push(t);return r},decode(r){c("padding.decode",r);let n=r.length;if(n*e%8)throw Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if((n-1)*e%8==0)throw Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}function g(e){return i(e),{encode:e=>e,decode:t=>e(t)}}function m(e,t,r){if(t<2)throw Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(r<2)throw Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(l(e),!e.length)return[];let n=0,a=[],i=Array.from(e,e=>{if(o(e),e<0||e>=t)throw Error(`invalid integer: ${e}`);return e}),s=i.length;for(;;){let e=0,o=!0;for(let a=n;a<s;a++){let s=i[a],l=t*e,c=l+s;if(!Number.isSafeInteger(c)||l/t!==e||c-s!==l)throw Error("convertRadix: carry overflow");let u=c/r;e=c%r;let d=Math.floor(u);if(i[a]=d,!Number.isSafeInteger(d)||d*r+e!==c)throw Error("convertRadix: carry overflow");o&&(d?o=!1:n=a)}if(a.push(e),o)break}for(let t=0;t<e.length-1&&0===e[t];t++)a.push(0);return a.reverse()}Object.defineProperty(r,"__esModule",{value:!0}),r.bytes=r.stringToBytes=r.str=r.bytesToString=r.hex=r.utf8=r.bech32m=r.bech32=r.base58check=r.createBase58check=r.base58xmr=r.base58xrp=r.base58flickr=r.base58=r.base64urlnopad=r.base64url=r.base64nopad=r.base64=r.base32crockford=r.base32hexnopad=r.base32hex=r.base32nopad=r.base32=r.base16=r.utils=r.assertNumber=void 0,r.assertNumber=o;let y=(e,t)=>0===t?e:y(t,e%t),b=(e,t)=>e+(t-y(e,t)),_=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function w(e,t,r,n){if(l(e),t<=0||t>32)throw Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw Error(`convertRadix2: wrong to=${r}`);if(b(t,r)>32)throw Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${b(t,r)}`);let a=0,i=0,s=_[t],c=_[r]-1,u=[];for(let n of e){if(o(n),n>=s)throw Error(`convertRadix2: invalid data word=${n} from=${t}`);if(a=a<<t|n,i+t>32)throw Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=r;i-=r)u.push((a>>i-r&c)>>>0);let e=_[i];if(void 0===e)throw Error("invalid carry");a&=e-1}if(a=a<<r-i&c,!n&&i>=t)throw Error("Excess padding");if(!n&&a>0)throw Error(`Non-zero padding: ${a}`);return n&&i>0&&u.push(a>>>0),u}function E(e){return o(e),{encode:t=>{if(!n(t))throw Error("radix.encode input should be Uint8Array");return m(Array.from(t),256,e)},decode:t=>(u("radix.decode",t),Uint8Array.from(m(t,e,256)))}}function v(e,t=!1){if(o(e),e<=0||e>32)throw Error("radix2: bits should be in (0..32]");if(b(8,e)>32||b(e,8)>32)throw Error("radix2: carry overflow");return{encode:r=>{if(!n(r))throw Error("radix2.encode input should be Uint8Array");return w(Array.from(r),8,e,!t)},decode:r=>(u("radix2.decode",r),Uint8Array.from(w(r,e,8,t)))}}function S(e){return i(e),function(...t){try{return e.apply(null,t)}catch(e){}}}function x(e,t){return o(e),i(t),{encode(r){if(!n(r))throw Error("checksum.encode: input should be Uint8Array");let a=t(r).slice(0,e),i=new Uint8Array(r.length+e);return i.set(r),i.set(a,r.length),i},decode(r){if(!n(r))throw Error("checksum.decode: input should be Uint8Array");let a=r.slice(0,-e),i=r.slice(-e),s=t(a).slice(0,e);for(let t=0;t<e;t++)if(s[t]!==i[t])throw Error("Invalid checksum");return a}}}r.utils={alphabet:h,chain:d,checksum:x,convertRadix:m,convertRadix2:w,radix:E,radix2:v,join:f,padding:p},r.base16=d(v(4),h("0123456789ABCDEF"),f("")),r.base32=d(v(5),h("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),p(5),f("")),r.base32nopad=d(v(5),h("ABCDEFGHIJKLMNOPQRSTUVWXYZ234567"),f("")),r.base32hex=d(v(5),h("0123456789ABCDEFGHIJKLMNOPQRSTUV"),p(5),f("")),r.base32hexnopad=d(v(5),h("0123456789ABCDEFGHIJKLMNOPQRSTUV"),f("")),r.base32crockford=d(v(5),h("0123456789ABCDEFGHJKMNPQRSTVWXYZ"),f(""),g(e=>e.toUpperCase().replace(/O/g,"0").replace(/[IL]/g,"1"))),r.base64=d(v(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),p(6),f("")),r.base64nopad=d(v(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),f("")),r.base64url=d(v(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),p(6),f("")),r.base64urlnopad=d(v(6),h("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_"),f(""));let T=e=>d(E(58),h(e),f(""));r.base58=T("123456789ABCDEFGHJKLMNPQRSTUVWXYZabcdefghijkmnopqrstuvwxyz"),r.base58flickr=T("123456789abcdefghijkmnopqrstuvwxyzABCDEFGHJKLMNPQRSTUVWXYZ"),r.base58xrp=T("rpshnaf39wBUDNEGHJKLM4PQRST7VWXYZ2bcdeCg65jkm8oFqi1tuvAxyz");let A=[0,2,3,5,6,7,9,10,11];r.base58xmr={encode(e){let t="";for(let n=0;n<e.length;n+=8){let a=e.subarray(n,n+8);t+=r.base58.encode(a).padStart(A[a.length],"1")}return t},decode(e){let t=[];for(let n=0;n<e.length;n+=11){let a=e.slice(n,n+11),i=A.indexOf(a.length),s=r.base58.decode(a);for(let e=0;e<s.length-i;e++)if(0!==s[e])throw Error("base58xmr: wrong padding");t=t.concat(Array.from(s.slice(s.length-i)))}return Uint8Array.from(t)}},r.createBase58check=e=>d(x(4,t=>e(e(t))),r.base58),r.base58check=r.createBase58check;let k=d(h("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),f("")),I=[0x3b6a57b2,0x26508e6d,0x1ea119fa,0x3d4233dd,0x2a1462b3];function C(e){let t=e>>25,r=(0x1ffffff&e)<<5;for(let e=0;e<I.length;e++)(t>>e&1)==1&&(r^=I[e]);return r}function B(e,t,r=1){let n=e.length,a=1;for(let t=0;t<n;t++){let r=e.charCodeAt(t);if(r<33||r>126)throw Error(`Invalid prefix (${e})`);a=C(a)^r>>5}a=C(a);for(let t=0;t<n;t++)a=C(a)^31&e.charCodeAt(t);for(let e of t)a=C(a)^e;for(let e=0;e<6;e++)a=C(a);return a^=r,k.encode(w([a%_[30]],30,5,!1))}function O(e){let t="bech32"===e?1:0x2bc830a3,r=v(5),a=r.decode,i=r.encode,o=S(a);function l(e,r,a=90){s("bech32.encode prefix",e),n(r)&&(r=Array.from(r)),u("bech32.encode",r);let i=e.length;if(0===i)throw TypeError(`Invalid prefix length ${i}`);let o=i+7+r.length;if(!1!==a&&o>a)throw TypeError(`Length ${o} exceeds limit ${a}`);let c=e.toLowerCase(),d=B(c,r,t);return`${c}1${k.encode(r)}${d}`}function c(e,r=90){s("bech32.decode input",e);let n=e.length;if(n<8||!1!==r&&n>r)throw TypeError(`invalid string length: ${n} (${e}). Expected (8..${r})`);let a=e.toLowerCase();if(e!==a&&e!==e.toUpperCase())throw Error("String must be lowercase or uppercase");let i=a.lastIndexOf("1");if(0===i||-1===i)throw Error('Letter "1" must be present between prefix and data only');let o=a.slice(0,i),l=a.slice(i+1);if(l.length<6)throw Error("Data must be at least 6 characters long");let u=k.decode(l).slice(0,-6),d=B(o,u,t);if(!l.endsWith(d))throw Error(`Invalid checksum in ${e}: expected "${d}"`);return{prefix:o,words:u}}let d=S(c);return{encode:l,decode:c,encodeFromBytes:function(e,t){return l(e,i(t))},decodeToBytes:function(e){let{prefix:t,words:r}=c(e,!1);return{prefix:t,words:r,bytes:a(r)}},decodeUnsafe:d,fromWords:a,fromWordsUnsafe:o,toWords:i}}r.bech32=O("bech32"),r.bech32m=O("bech32m"),r.utf8={encode:e=>new TextDecoder().decode(e),decode:e=>new TextEncoder().encode(e)},r.hex=d(v(4),h("0123456789abcdef"),f(""),g(e=>{if("string"!=typeof e||e.length%2!=0)throw TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()}));let N={utf8:r.utf8,hex:r.hex,base16:r.base16,base32:r.base32,base64:r.base64,base64url:r.base64url,base58:r.base58,base58xmr:r.base58xmr},P="Invalid encoding type. Available types: utf8, hex, base16, base32, base64, base64url, base58, base58xmr";r.bytesToString=(e,t)=>{if("string"!=typeof e||!N.hasOwnProperty(e))throw TypeError(P);if(!n(t))throw TypeError("bytesToString() expects Uint8Array");return N[e].encode(t)},r.str=r.bytesToString,r.stringToBytes=(e,t)=>{if(!N.hasOwnProperty(e))throw TypeError(P);if("string"!=typeof t)throw TypeError("stringToBytes() expects string");return N[e].decode(t)},r.bytes=r.stringToBytes},414322,(e,t,r)=>{e.e,function(e){"use strict";var t;function r(e){return n.test(e)}let n=/^-?[0-9]+$/;function a(e){return i.test(e)}let i=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function s(e,t){if(r(e))return Number.isSafeInteger(Number.parseInt(e,10));let n=String(Number.parseFloat(e));if(e===n)return!0;let a=d(e),i=d(n);return!!(a===i||!0===t?.approx&&!r(e)&&i.length>=14&&a.startsWith(i.substring(0,14)))||!1}let o=((t={}).underflow="underflow",t.overflow="overflow",t.truncate_integer="truncate_integer",t.truncate_float="truncate_float",t);function l(e){if(s(e,{approx:!1}))return;if(r(e))return o.truncate_integer;let t=Number.parseFloat(e);return Number.isFinite(t)?0===t?o.underflow:o.truncate_float:o.overflow}function c(e){let t=e.match(/^(-?)(\d+\.?\d*)([eE]([+-]?\d+))?$/);if(!t)throw SyntaxError(`Invalid number: ${e}`);let r=t[1],n=t[2],a=void 0!==t[4]?Number.parseInt(t[4],10):0,i=n.indexOf(".");a+=-1!==i?i-1:n.length-1;let s=n.replace(".","").replace(/^0*/,e=>(a-=e.length,"")).replace(/0*$/,"");return s.length>0?{sign:r,digits:s,exponent:a}:{sign:r,digits:"0",exponent:a+1}}function u(e,t){if(e===t)return 0;let r=c(e),n=c(t),a="-"===r.sign?-1:1;return r.sign!==n.sign?"0"===r.digits&&"0"===n.digits?0:a:r.exponent!==n.exponent?r.exponent>n.exponent?a:r.exponent<n.exponent?-a:0:r.digits>n.digits?a:r.digits<n.digits?-a:0}function d(e){let{start:t,end:r}=h(e),n=e.substring(t,r),a=n.indexOf(".");return -1===a?n:n.substring(0,a)+n.substring(a+1)}function h(e){let t=0;for("-"===e[0]&&t++;"0"===e[t]||"."===e[t];)t++;let r=e.lastIndexOf("e");for(-1===r&&(r=e.lastIndexOf("E")),-1===r&&(r=e.length);("0"===e[r-1]||"."===e[r-1])&&r>t;)r--;return{start:t,end:r}}class f{isLosslessNumber=!0;constructor(e){if(!a(e))throw Error(`Invalid number (value: "${e}")`);this.value=e}valueOf(){let e=l(this.value);if(void 0===e||e===o.truncate_float)return Number.parseFloat(this.value);if(r(this.value))return BigInt(this.value);throw Error(`Cannot safely convert to number: the value '${this.value}' would ${e} and become ${Number.parseFloat(this.value)}`)}toString(){return this.value}}function p(e){return e&&"object"==typeof e&&e.isLosslessNumber||!1}function g(e){return new f(e)}function m(e){return e>=w&&e<=E||e>=v&&e<=x||e>=S&&e<=T}function y(e){return e>=w&&e<=E}function b(e){return"object"==typeof e&&null!==e}let _={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},w=48,E=57,v=65,S=97,x=70,T=102,A=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/;e.LosslessNumber=f,e.UnsafeNumberReason=o,e.compareLosslessNumber=function(e,t){return u(e.value,t.value)},e.compareNumber=u,e.config=function(e){throw Error("config is deprecated, support for circularRefs is removed from the library. If you encounter circular references in your data structures, please rethink your datastructures: better prevent circular references in the first place.")},e.getUnsafeNumberReason=l,e.isInteger=r,e.isLosslessNumber=p,e.isNumber=a,e.isSafeNumber=s,e.parse=function(e,t,r){let n="function"==typeof r?{parseNumber:r}:r,a=n?.parseNumber??g,i=n?.onDuplicateKey??function(e){let{key:t,position:r}=e;throw SyntaxError(`Duplicate key '${t}' encountered at position ${r}`)},s=0,o=function t(){c();let r=u()??function(){var t;let r=s;if(45===e.charCodeAt(s)&&(s++,h(r)),e.charCodeAt(s)===w)s++;else if((t=e.charCodeAt(s))>=49&&t<=E)for(s++;y(e.charCodeAt(s));)s++;if(46===e.charCodeAt(s))for(s++,h(r);y(e.charCodeAt(s));)s++;if(101===e.charCodeAt(s)||69===e.charCodeAt(s))for(s++,45!==e.charCodeAt(s)&&43!==e.charCodeAt(s)||s++,h(r);y(e.charCodeAt(s));)s++;if(s>r)return a(e.slice(r,s))}()??function(){if(123===e.charCodeAt(s)){s++,c();let r={},n=!0;for(;s<e.length&&125!==e.charCodeAt(s);){n?n=!1:(d(),c());let a=s,o=u();if(void 0===o)return void function(){throw SyntaxError(`Quoted object key expected ${v()}`)}();c(),function(){if(58!==e.charCodeAt(s))throw SyntaxError(`Colon ':' expected after property name ${v()}`);s++}();let l=t();if(void 0===l)return void function(){throw SyntaxError(`Object value expected after ':' ${f()}`)}();if(Object.prototype.hasOwnProperty.call(r,o)&&!function e(t,r){return t===r||(Array.isArray(t)&&Array.isArray(r)?t.length===r.length&&t.every((t,n)=>e(t,r[n])):!!(b(t)&&b(r))&&[...new Set([...Object.keys(t),...Object.keys(r)])].every(n=>e(t[n],r[n])))}(l,r[o])){let e=i({key:o,position:a+1,oldValue:r[o],newValue:l});void 0!==e&&(r[o]=e)}else r[o]=l}return 125!==e.charCodeAt(s)&&function(){throw SyntaxError(`Quoted object key or end of object '}' expected ${v()}`)}(),s++,r}}()??function(){if(91===e.charCodeAt(s)){s++,c();let r=[],n=!0;for(;s<e.length&&93!==e.charCodeAt(s);){n?n=!1:d();let e=t();(function(e){if(void 0===e)throw SyntaxError(`Array item expected ${v()}`)})(e),r.push(e)}return 93!==e.charCodeAt(s)&&function(){throw SyntaxError(`Array item or end of array ']' expected ${v()}`)}(),s++,r}}()??l("true",!0)??l("false",!1)??l("null",null);return c(),r}();return function(e){if(void 0===e)throw SyntaxError(`JSON value expected ${v()}`)}(o),function(){if(s<e.length)throw SyntaxError(`Expected end of input ${v()}`)}(),t?function e(t,r,n,a){return Array.isArray(n)?a.call(t,r,function(t,r){for(let n=0;n<t.length;n++)t[n]=e(t,String(n),t[n],r);return t}(n,a)):n&&"object"==typeof n&&!p(n)?a.call(t,r,function(t,r){for(let n of Object.keys(t)){let a=e(t,n,t[n],r);void 0!==a?t[n]=a:delete t[n]}return t}(n,a)):a.call(t,r,n)}({"":o},"",o,t):o;function l(t,r){if(e.slice(s,s+t.length)===t)return s+=t.length,r}function c(){for(var t;32===(t=e.charCodeAt(s))||10===t||9===t||13===t;)s++}function u(){var t;if(34===e.charCodeAt(s)){s++;let r="";for(;s<e.length&&34!==e.charCodeAt(s);){if(92===e.charCodeAt(s)){let t=e[s+1],n=_[t];void 0!==n?(r+=n,s++):"u"===t?m(e.charCodeAt(s+2))&&m(e.charCodeAt(s+3))&&m(e.charCodeAt(s+4))&&m(e.charCodeAt(s+5))?(r+=String.fromCharCode(Number.parseInt(e.slice(s+2,s+6),16)),s+=5):function(t){let r=e.slice(t,t+6);throw SyntaxError(`Invalid unicode character '${r}' ${f()}`)}(s):function(t){let r=e.slice(t,t+2);throw SyntaxError(`Invalid escape character '${r}' ${f()}`)}(s)}else(t=e.charCodeAt(s))>=32&&t<=1114111?r+=e[s]:function(e){throw SyntaxError(`Invalid character '${e}' ${f()}`)}(e[s]);s++}return function(){if(34!==e.charCodeAt(s))throw SyntaxError(`End of string '"' expected ${v()}`)}(),s++,r}}function d(){if(44!==e.charCodeAt(s))throw SyntaxError(`Comma ',' expected after value ${v()}`);s++}function h(t){if(!y(e.charCodeAt(s))){let r=e.slice(t,s);throw SyntaxError(`Invalid number '${r}', expecting a digit ${v()}`)}}function f(){return`at position ${s}`}function v(){return`${s<e.length?`but got '${e[s]}'`:"but reached end of input"} ${f()}`}},e.parseLosslessNumber=g,e.parseNumberAndBigInt=function(e){return r(e)?BigInt(e):Number.parseFloat(e)},e.reviveDate=function(e,t){return"string"==typeof t&&A.test(t)?new Date(t):t},e.splitNumber=c,e.stringify=function e(t,r,n,i){let s="number"==typeof n?" ".repeat(n):"string"==typeof n&&""!==n?n:void 0;return function t(o,l){if(Array.isArray(i)){let e=i.find(e=>e.test(o));if(e){let t=e.stringify(o);if("string"!=typeof t||!a(t))throw Error(`Invalid JSON number: output of a number stringifier must be a string containing a JSON number (output: ${t})`);return t}}return"boolean"==typeof o||"number"==typeof o||"string"==typeof o||null===o||o instanceof Date||o instanceof Boolean||o instanceof Number||o instanceof String?JSON.stringify(o):o?.isLosslessNumber||"bigint"==typeof o?o.toString():Array.isArray(o)?function(e,n){if(0===e.length)return"[]";let a=s?n+s:void 0,i=s?"[\n":"[";for(let n=0;n<e.length;n++){let o="function"==typeof r?r.call(e,String(n),e[n]):e[n];s&&(i+=a),i+=void 0!==o&&"function"!=typeof o?t(o,a):"null",n<e.length-1&&(i+=s?",\n":",")}return i+(s?`
${n}]`:"]")}(o,l):o&&"object"==typeof o?function(a,i){if("function"==typeof a.toJSON)return e(a.toJSON(),r,n,void 0);let o=Array.isArray(r)?r.map(String):Object.keys(a);if(0===o.length)return"{}";let l=s?i+s:void 0,c=!0,u=s?"{\n":"{";for(let e of o){var d,h;let n="function"==typeof r?r.call(a,e,a[e]):a[e];if(d=0,void 0!==(h=n)&&"function"!=typeof h&&"symbol"!=typeof h){c?c=!1:u+=s?",\n":",";let r=JSON.stringify(e);u+=s?`${l+r}: `:`${r}:`,u+=t(n,l)}}return u+(s?`
${i}}`:"}")}(o,l):void 0}("function"==typeof r?r.call({"":t},"",t):t,"")},e.toLosslessNumber=function(e){if(function(e){let{start:t,end:r}=h(e),n=e.indexOf(".");return -1===n||n<t||n>r?r-t:r-t-1}(String(e))>15)throw Error(`Invalid number: contains more than 15 digits and is most likely truncated and unsafe by itself (value: ${e})`);if(Number.isNaN(e))throw Error("Invalid number: NaN");if(!Number.isFinite(e))throw Error(`Invalid number: ${e}`);return new f(String(e))},e.toSafeNumberOrThrow=function(e,t){let r=Number.parseFloat(e),n=l(e);if(!0===t?.approx?n&&n!==o.truncate_float:n){let t=n?.replace(/_\w+$/,"");throw Error(`Cannot safely convert to number: the value '${e}' would ${t} and become ${r}`)}return r}}(r)},144554,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.notImplemented=r.bitMask=void 0,r.isBytes=s,r.abytes=o,r.abool=function(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)},r.bytesToHex=c,r.numberToHexUnpadded=u,r.hexToNumber=d,r.hexToBytes=p,r.bytesToNumberBE=function(e){return d(c(e))},r.bytesToNumberLE=function(e){return o(e),d(c(Uint8Array.from(e).reverse()))},r.numberToBytesBE=g,r.numberToBytesLE=function(e,t){return g(e,t).reverse()},r.numberToVarBytesBE=function(e){return p(u(e))},r.ensureBytes=function(e,t,r){let n;if("string"==typeof t)try{n=p(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(s(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let a=n.length;if("number"==typeof r&&a!==r)throw Error(e+" of length "+r+" expected, got "+a);return n},r.concatBytes=m,r.equalBytes=function(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r},r.utf8ToBytes=function(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))},r.inRange=b,r.aInRange=function(e,t,r,n){if(!b(t,r,n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)},r.bitLen=function(e){let t;for(t=0;e>n;e>>=a,t+=1);return t},r.bitGet=function(e,t){return e>>BigInt(t)&a},r.bitSet=function(e,t,r){return e|(r?a:n)<<BigInt(t)},r.createHmacDrbg=function(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=_(e),a=_(e),i=0,s=()=>{n.fill(1),a.fill(0),i=0},o=(...e)=>r(a,n,...e),l=(e=_())=>{a=o(w([0]),e),n=o(),0!==e.length&&(a=o(w([1]),e),n=o())},c=()=>{if(i++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=o()).slice();r.push(t),e+=n.length}return m(...r)};return(e,t)=>{let r;for(s(),l(e);!(r=t(c()));)l();return s(),r}},r.validateObject=function(e,t,r={}){let n=(t,r,n)=>{let a=E[r];if("function"!=typeof a)throw Error("invalid validator function");let i=e[t];if((!n||void 0!==i)&&!a(i,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+i)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e},r.memoized=function(e){let t=new WeakMap;return(r,...n)=>{let a=t.get(r);if(void 0!==a)return a;let i=e(r,...n);return t.set(r,i),i}};let n=BigInt(0),a=BigInt(1),i=BigInt(2);function s(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function o(e){if(!s(e))throw Error("Uint8Array expected")}let l=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function c(e){o(e);let t="";for(let r=0;r<e.length;r++)t+=l[e[r]];return t}function u(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function d(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?n:BigInt("0x"+e)}let h={_0:48,_9:57,A:65,F:70,a:97,f:102};function f(e){return e>=h._0&&e<=h._9?e-h._0:e>=h.A&&e<=h.F?e-(h.A-10):e>=h.a&&e<=h.f?e-(h.a-10):void 0}function p(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,a=0;t<r;t++,a+=2){let r=f(e.charCodeAt(a)),i=f(e.charCodeAt(a+1));if(void 0===r||void 0===i)throw Error('hex string expected, got non-hex character "'+(e[a]+e[a+1])+'" at index '+a);n[t]=16*r+i}return n}function g(e,t){return p(e.toString(16).padStart(2*t,"0"))}function m(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];o(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let a=e[t];r.set(a,n),n+=a.length}return r}let y=e=>"bigint"==typeof e&&n<=e;function b(e,t,r){return y(e)&&y(t)&&y(r)&&t<=e&&e<r}r.bitMask=e=>(i<<BigInt(e-1))-a;let _=e=>new Uint8Array(e),w=e=>Uint8Array.from(e),E={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||s(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};r.notImplemented=()=>{throw Error("not implemented")}},107612,(e,t,r)=>{"use strict";function n(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function a(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function i(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");n(e.outputLen),n(e.blockLen)}function s(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function o(e,t){a(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}Object.defineProperty(r,"__esModule",{value:!0}),r.anumber=n,r.number=n,r.abytes=a,r.bytes=a,r.ahash=i,r.aexists=s,r.aoutput=o,r.default={number:n,bytes:a,hash:i,exists:s,output:o}},486102,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.crypto=void 0;let n=e.r(666680);r.crypto=n&&"object"==typeof n&&"webcrypto"in n?n.webcrypto:n&&"object"==typeof n&&"randomBytes"in n?n:void 0},606380,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.Hash=r.nextTick=r.byteSwapIfBE=r.byteSwap=r.isLE=r.rotl=r.rotr=r.createView=r.u32=r.u8=void 0,r.isBytes=function(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name},r.byteSwap32=function(e){for(let t=0;t<e.length;t++)e[t]=(0,r.byteSwap)(e[t])},r.bytesToHex=function(e){(0,a.abytes)(e);let t="";for(let r=0;r<e.length;r++)t+=i[e[r]];return t},r.hexToBytes=function(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("padded hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,a=0;t<r;t++,a+=2){let r=o(e.charCodeAt(a)),i=o(e.charCodeAt(a+1));if(void 0===r||void 0===i)throw Error('hex string expected, got non-hex character "'+(e[a]+e[a+1])+'" at index '+a);n[t]=16*r+i}return n},r.asyncLoop=l,r.utf8ToBytes=c,r.toBytes=u,r.concatBytes=function(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];(0,a.abytes)(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let a=e[t];r.set(a,n),n+=a.length}return r},r.checkOpts=function(e,t){if(void 0!==t&&"[object Object]"!==({}).toString.call(t))throw Error("Options should be object or undefined");return Object.assign(e,t)},r.wrapConstructor=function(e){let t=t=>e().update(u(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t},r.wrapConstructorWithOpts=function(e){let t=(t,r)=>e(r).update(u(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.wrapXOFConstructorWithOpts=function(e){let t=(t,r)=>e(r).update(u(t)).digest(),r=e({});return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=t=>e(t),t},r.randomBytes=function(e=32){if(n.crypto&&"function"==typeof n.crypto.getRandomValues)return n.crypto.getRandomValues(new Uint8Array(e));if(n.crypto&&"function"==typeof n.crypto.randomBytes)return n.crypto.randomBytes(e);throw Error("crypto.getRandomValues must be defined")};let n=e.r(486102),a=e.r(107612);r.u8=e=>new Uint8Array(e.buffer,e.byteOffset,e.byteLength),r.u32=e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)),r.createView=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),r.rotr=(e,t)=>e<<32-t|e>>>t,r.rotl=(e,t)=>e<<t|e>>>32-t>>>0,r.isLE=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],r.byteSwap=e=>e<<24&0xff000000|e<<8&0xff0000|e>>>8&65280|e>>>24&255,r.byteSwapIfBE=r.isLE?e=>e:e=>(0,r.byteSwap)(e);let i=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0")),s={_0:48,_9:57,A:65,F:70,a:97,f:102};function o(e){return e>=s._0&&e<=s._9?e-s._0:e>=s.A&&e<=s.F?e-(s.A-10):e>=s.a&&e<=s.f?e-(s.a-10):void 0}async function l(e,t,n){let a=Date.now();for(let i=0;i<e;i++){n(i);let e=Date.now()-a;e>=0&&e<t||(await (0,r.nextTick)(),a+=e)}}function c(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function u(e){return"string"==typeof e&&(e=c(e)),(0,a.abytes)(e),e}r.nextTick=async()=>{},r.Hash=class{clone(){return this._cloneInto()}}},686655,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HashMD=r.Maj=r.Chi=void 0;let n=e.r(107612),a=e.r(606380);r.Chi=(e,t,r)=>e&t^~e&r,r.Maj=(e,t,r)=>e&t^e&r^t&r;class i extends a.Hash{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=(0,a.createView)(this.buffer)}update(e){(0,n.aexists)(this);let{view:t,buffer:r,blockLen:i}=this,s=(e=(0,a.toBytes)(e)).length;for(let n=0;n<s;){let o=Math.min(i-this.pos,s-n);if(o===i){let t=(0,a.createView)(e);for(;i<=s-n;n+=i)this.process(t,n);continue}r.set(e.subarray(n,n+o),this.pos),this.pos+=o,n+=o,this.pos===i&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){(0,n.aexists)(this),(0,n.aoutput)(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:i,isLE:s}=this,{pos:o}=this;t[o++]=128,this.buffer.subarray(o).fill(0),this.padOffset>i-o&&(this.process(r,0),o=0);for(let e=o;e<i;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let a=BigInt(32),i=BigInt(0xffffffff),s=Number(r>>a&i),o=Number(r&i),l=4*!!n,c=4*!n;e.setUint32(t+l,s,n),e.setUint32(t+c,o,n)}(r,i-8,BigInt(8*this.length),s),this.process(r,0);let l=(0,a.createView)(e),c=this.outputLen;if(c%4)throw Error("_sha2: outputLen should be aligned to 32bit");let u=c/4,d=this.get();if(u>d.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<u;e++)l.setUint32(4*e,d[e],s)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:a,destroyed:i,pos:s}=this;return e.length=n,e.pos=s,e.finished=a,e.destroyed=i,n%t&&e.buffer.set(r),e}}r.HashMD=i},859695,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.sha224=r.sha256=r.SHA256=void 0;let n=e.r(686655),a=e.r(606380),i=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),s=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),o=new Uint32Array(64);class l extends n.HashMD{constructor(){super(64,32,8,!1),this.A=0|s[0],this.B=0|s[1],this.C=0|s[2],this.D=0|s[3],this.E=0|s[4],this.F=0|s[5],this.G=0|s[6],this.H=0|s[7]}get(){let{A:e,B:t,C:r,D:n,E:a,F:i,G:s,H:o}=this;return[e,t,r,n,a,i,s,o]}set(e,t,r,n,a,i,s,o){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|a,this.F=0|i,this.G=0|s,this.H=0|o}process(e,t){for(let r=0;r<16;r++,t+=4)o[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=o[e-15],r=o[e-2],n=(0,a.rotr)(t,7)^(0,a.rotr)(t,18)^t>>>3,i=(0,a.rotr)(r,17)^(0,a.rotr)(r,19)^r>>>10;o[e]=i+o[e-7]+n+o[e-16]|0}let{A:r,B:s,C:l,D:c,E:u,F:d,G:h,H:f}=this;for(let e=0;e<64;e++){let t=f+((0,a.rotr)(u,6)^(0,a.rotr)(u,11)^(0,a.rotr)(u,25))+(0,n.Chi)(u,d,h)+i[e]+o[e]|0,p=((0,a.rotr)(r,2)^(0,a.rotr)(r,13)^(0,a.rotr)(r,22))+(0,n.Maj)(r,s,l)|0;f=h,h=d,d=u,u=c+t|0,c=l,l=s,s=r,r=t+p|0}r=r+this.A|0,s=s+this.B|0,l=l+this.C|0,c=c+this.D|0,u=u+this.E|0,d=d+this.F|0,h=h+this.G|0,f=f+this.H|0,this.set(r,s,l,c,u,d,h,f)}roundClean(){o.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}r.SHA256=l;class c extends l{constructor(){super(),this.A=-0x3efa6128,this.B=0x367cd507,this.C=0x3070dd17,this.D=-0x8f1a6c7,this.E=-4191439,this.F=0x68581511,this.G=0x64f98fa7,this.H=-0x4105b05c,this.outputLen=28}}r.sha256=(0,a.wrapConstructor)(()=>new l),r.sha224=(0,a.wrapConstructor)(()=>new c)},971682,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.add5L=r.add5H=r.add4H=r.add4L=r.add3H=r.add3L=r.rotlBL=r.rotlBH=r.rotlSL=r.rotlSH=r.rotr32L=r.rotr32H=r.rotrBL=r.rotrBH=r.rotrSL=r.rotrSH=r.shrSL=r.shrSH=r.toBig=void 0,r.fromBig=i,r.split=s,r.add=w;let n=BigInt(0x100000000-1),a=BigInt(32);function i(e,t=!1){return t?{h:Number(e&n),l:Number(e>>a&n)}:{h:0|Number(e>>a&n),l:0|Number(e&n)}}function s(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let a=0;a<e.length;a++){let{h:s,l:o}=i(e[a],t);[r[a],n[a]]=[s,o]}return[r,n]}let o=(e,t)=>BigInt(e>>>0)<<a|BigInt(t>>>0);r.toBig=o;let l=(e,t,r)=>e>>>r;r.shrSH=l;let c=(e,t,r)=>e<<32-r|t>>>r;r.shrSL=c;let u=(e,t,r)=>e>>>r|t<<32-r;r.rotrSH=u;let d=(e,t,r)=>e<<32-r|t>>>r;r.rotrSL=d;let h=(e,t,r)=>e<<64-r|t>>>r-32;r.rotrBH=h;let f=(e,t,r)=>e>>>r-32|t<<64-r;r.rotrBL=f;let p=(e,t)=>t;r.rotr32H=p;let g=(e,t)=>e;r.rotr32L=g;let m=(e,t,r)=>e<<r|t>>>32-r;r.rotlSH=m;let y=(e,t,r)=>t<<r|e>>>32-r;r.rotlSL=y;let b=(e,t,r)=>t<<r-32|e>>>64-r;r.rotlBH=b;let _=(e,t,r)=>e<<r-32|t>>>64-r;function w(e,t,r,n){let a=(t>>>0)+(n>>>0);return{h:e+r+(a/0x100000000|0)|0,l:0|a}}r.rotlBL=_;let E=(e,t,r)=>(e>>>0)+(t>>>0)+(r>>>0);r.add3L=E;let v=(e,t,r,n)=>t+r+n+(e/0x100000000|0)|0;r.add3H=v;let S=(e,t,r,n)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0);r.add4L=S;let x=(e,t,r,n,a)=>t+r+n+a+(e/0x100000000|0)|0;r.add4H=x;let T=(e,t,r,n,a)=>(e>>>0)+(t>>>0)+(r>>>0)+(n>>>0)+(a>>>0);r.add5L=T;let A=(e,t,r,n,a,i)=>t+r+n+a+i+(e/0x100000000|0)|0;r.add5H=A,r.default={fromBig:i,split:s,toBig:o,shrSH:l,shrSL:c,rotrSH:u,rotrSL:d,rotrBH:h,rotrBL:f,rotr32H:p,rotr32L:g,rotlSH:m,rotlSL:y,rotlBH:b,rotlBL:_,add:w,add3L:E,add3H:v,add4L:S,add4H:x,add5H:A,add5L:T}},996723,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.shake256=r.shake128=r.keccak_512=r.keccak_384=r.keccak_256=r.keccak_224=r.sha3_512=r.sha3_384=r.sha3_256=r.sha3_224=r.Keccak=void 0,r.keccakP=_;let n=e.r(107612),a=e.r(971682),i=e.r(606380),s=[],o=[],l=[],c=BigInt(0),u=BigInt(1),d=BigInt(2),h=BigInt(7),f=BigInt(256),p=BigInt(113);for(let e=0,t=u,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],s.push(2*(5*n+r)),o.push((e+1)*(e+2)/2%64);let a=c;for(let e=0;e<7;e++)(t=(t<<u^(t>>h)*p)%f)&d&&(a^=u<<(u<<BigInt(e))-u);l.push(a)}let[g,m]=(0,a.split)(l,!0),y=(e,t,r)=>r>32?(0,a.rotlBH)(e,t,r):(0,a.rotlSH)(e,t,r),b=(e,t,r)=>r>32?(0,a.rotlBL)(e,t,r):(0,a.rotlSL)(e,t,r);function _(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,a=(t+2)%10,i=r[a],s=r[a+1],o=y(i,s,1)^r[n],l=b(i,s,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=o,e[t+r+1]^=l}let t=e[2],a=e[3];for(let r=0;r<24;r++){let n=o[r],i=y(t,a,n),l=b(t,a,n),c=s[r];t=e[c],a=e[c+1],e[c]=i,e[c+1]=l}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=g[n],e[1]^=m[n]}r.fill(0)}class w extends i.Hash{constructor(e,t,r,a=!1,s=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=a,this.rounds=s,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,(0,n.anumber)(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(0,i.u32)(this.state)}keccak(){i.isLE||(0,i.byteSwap32)(this.state32),_(this.state32,this.rounds),i.isLE||(0,i.byteSwap32)(this.state32),this.posOut=0,this.pos=0}update(e){(0,n.aexists)(this);let{blockLen:t,state:r}=this,a=(e=(0,i.toBytes)(e)).length;for(let n=0;n<a;){let i=Math.min(t-this.pos,a-n);for(let t=0;t<i;t++)r[this.pos++]^=e[n++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,(128&t)!=0&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){(0,n.aexists)(this,!1),(0,n.abytes)(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,a=e.length;n<a;){this.posOut>=r&&this.keccak();let i=Math.min(r-this.posOut,a-n);e.set(t.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return(0,n.anumber)(e),this.xofInto(new Uint8Array(e))}digestInto(e){if((0,n.aoutput)(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:a,enableXOF:i}=this;return e||(e=new w(t,r,n,i,a)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=a,e.suffix=r,e.outputLen=n,e.enableXOF=i,e.destroyed=this.destroyed,e}}r.Keccak=w;let E=(e,t,r)=>(0,i.wrapConstructor)(()=>new w(t,e,r));r.sha3_224=E(6,144,28),r.sha3_256=E(6,136,32),r.sha3_384=E(6,104,48),r.sha3_512=E(6,72,64),r.keccak_224=E(1,144,28),r.keccak_256=E(1,136,32),r.keccak_384=E(1,104,48),r.keccak_512=E(1,72,64);let v=(e,t,r)=>(0,i.wrapXOFConstructorWithOpts)((n={})=>new w(t,e,void 0===n.dkLen?r:n.dkLen,!0));r.shake128=v(31,168,16),r.shake256=v(31,136,32)},366837,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.isNegativeLE=void 0,r.mod=d,r.pow=h,r.pow2=function(e,t,r){let n=e;for(;t-- >a;)n*=n,n%=r;return n},r.invert=f,r.tonelliShanks=p,r.FpSqrt=g,r.validateField=function(e){let t=m.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"});return(0,n.validateObject)(e,t)},r.FpPow=y,r.FpInvertBatch=b,r.FpDiv=function(e,t,r){return e.mul(t,"bigint"==typeof r?f(r,e.ORDER):e.inv(r))},r.FpLegendre=_,r.FpIsSquare=function(e){let t=_(e.ORDER);return r=>{let n=t(e,r);return e.eql(n,e.ZERO)||e.eql(n,e.ONE)}},r.nLength=w,r.Field=function(e,t,r=!1,s={}){let o;if(e<=a)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:l,nByteLength:c}=w(e,t);if(c>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let u=Object.freeze({ORDER:e,BITS:l,BYTES:c,MASK:(0,n.bitMask)(l),ZERO:a,ONE:i,create:t=>d(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return a<=t&&t<e},is0:e=>e===a,isOdd:e=>(e&i)===i,neg:t=>d(-t,e),eql:(e,t)=>e===t,sqr:t=>d(t*t,e),add:(t,r)=>d(t+r,e),sub:(t,r)=>d(t-r,e),mul:(t,r)=>d(t*r,e),pow:(e,t)=>y(u,e,t),div:(t,r)=>d(t*f(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>f(t,e),sqrt:s.sqrt||(t=>(o||(o=g(e)),o(u,t))),invertBatch:e=>b(u,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?(0,n.numberToBytesLE)(e,c):(0,n.numberToBytesBE)(e,c),fromBytes:e=>{if(e.length!==c)throw Error("Field.fromBytes: expected "+c+" bytes, got "+e.length);return r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e)}});return Object.freeze(u)},r.FpSqrtOdd=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?r:e.neg(r)},r.FpSqrtEven=function(e,t){if(!e.isOdd)throw Error("Field doesn't have isOdd");let r=e.sqrt(t);return e.isOdd(r)?e.neg(r):r},r.hashToPrivateScalar=function(e,t,r=!1){let a=(e=(0,n.ensureBytes)("privateHash",e)).length,s=w(t).nByteLength+8;if(s<24||a<s||a>1024)throw Error("hashToPrivateScalar: expected "+s+"-1024 bytes of input, got "+a);return d(r?(0,n.bytesToNumberLE)(e):(0,n.bytesToNumberBE)(e),t-i)+i},r.getFieldBytesLength=E,r.getMinHashLength=v,r.mapHashToField=function(e,t,r=!1){let a=e.length,s=E(t),o=v(t);if(a<16||a<o||a>1024)throw Error("expected "+o+"-1024 bytes of input, got "+a);let l=d(r?(0,n.bytesToNumberBE)(e):(0,n.bytesToNumberLE)(e),t-i)+i;return r?(0,n.numberToBytesLE)(l,s):(0,n.numberToBytesBE)(l,s)};let n=e.r(144554),a=BigInt(0),i=BigInt(1),s=BigInt(2),o=BigInt(3),l=BigInt(4),c=BigInt(5),u=BigInt(8);function d(e,t){let r=e%t;return r>=a?r:t+r}function h(e,t,r){if(t<a)throw Error("invalid exponent, negatives unsupported");if(r<=a)throw Error("invalid modulus");if(r===i)return a;let n=i;for(;t>a;)t&i&&(n=n*e%r),e=e*e%r,t>>=i;return n}function f(e,t){if(e===a)throw Error("invert: expected non-zero number");if(t<=a)throw Error("invert: expected positive modulus, got "+t);let r=d(e,t),n=t,s=a,o=i,l=i,c=a;for(;r!==a;){let e=n/r,t=n%r,a=s-l*e,i=o-c*e;n=r,r=t,s=l,o=c,l=a,c=i}if(n!==i)throw Error("invert: does not exist");return d(s,t)}function p(e){let t,r,n,o=(e-i)/s;for(t=e-i,r=0;t%s===a;t/=s,r++);for(n=s;n<e&&h(n,o,e)!==e-i;n++)if(n>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+i)/l;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let c=(t+i)/s;return function(e,a){if(e.pow(a,o)===e.neg(e.ONE))throw Error("Cannot find square root");let s=r,l=e.pow(e.mul(e.ONE,n),t),u=e.pow(a,c),d=e.pow(a,t);for(;!e.eql(d,e.ONE);){if(e.eql(d,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(d);t<s&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,i<<BigInt(s-t-1));l=e.sqr(r),u=e.mul(u,r),d=e.mul(d,l),s=t}return u}}function g(e){if(e%l===o){let t=(e+i)/l;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%u===c){let t=(e-c)/u;return function(e,r){let n=e.mul(r,s),a=e.pow(n,t),i=e.mul(r,a),o=e.mul(e.mul(i,s),a),l=e.mul(i,e.sub(o,e.ONE));if(!e.eql(e.sqr(l),r))throw Error("Cannot find square root");return l}}return p(e)}r.isNegativeLE=(e,t)=>(d(e,t)&i)===i;let m=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function y(e,t,r){if(r<a)throw Error("invalid exponent, negatives unsupported");if(r===a)return e.ONE;if(r===i)return t;let n=e.ONE,s=t;for(;r>a;)r&i&&(n=e.mul(n,s)),s=e.sqr(s),r>>=i;return n}function b(e,t){let r=Array(t.length),n=t.reduce((t,n,a)=>e.is0(n)?t:(r[a]=t,e.mul(t,n)),e.ONE),a=e.inv(n);return t.reduceRight((t,n,a)=>e.is0(n)?t:(r[a]=e.mul(t,r[a]),e.mul(t,n)),a),r}function _(e){let t=(e-i)/s;return(e,r)=>e.pow(r,t)}function w(e,t){let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function E(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function v(e){let t=E(e);return t+Math.ceil(t/2)}},733742,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.validateOpts=a,r.splitConstants=function(e,t){if("number"!=typeof t)throw Error("poseidonSplitConstants: invalid t");if(!Array.isArray(e)||e.length%t)throw Error("poseidonSplitConstants: invalid rc");let r=[],n=[];for(let a=0;a<e.length;a++)n.push(e[a]),n.length===t&&(r.push(n),n=[]);return r},r.poseidon=function(e){let t=a(e),{Fp:r,mds:n,roundConstants:i,rounds:s,roundsPartial:o,sboxFn:l,t:c}=t,u=t.roundsFull/2,d=t.reversePartialPowIdx?c-1:0,h=(e,t,a)=>(e=e.map((e,t)=>r.add(e,i[a][t])),t?e=e.map(e=>l(e)):e[d]=l(e[d]),e=n.map(t=>t.reduce((t,n,a)=>r.add(t,r.mulN(n,e[a])),r.ZERO))),f=function(e){if(!Array.isArray(e)||e.length!==c)throw Error("invalid values, expected array of bigints with length "+c);e=e.map(e=>{if("bigint"!=typeof e)throw Error("invalid bigint="+e);return r.create(e)});let t=0;for(let r=0;r<u;r++)e=h(e,!0,t++);for(let r=0;r<o;r++)e=h(e,!1,t++);for(let r=0;r<u;r++)e=h(e,!0,t++);if(t!==s)throw Error("invalid number of rounds");return e};return f.roundConstants=i,f};let n=e.r(366837);function a(e){let{Fp:t,mds:r,reversePartialPowIdx:a,roundConstants:i}=e,{roundsFull:s,roundsPartial:o,sboxPower:l,t:c}=e;for(let r of((0,n.validateField)(t),["t","roundsFull","roundsPartial"]))if("number"!=typeof e[r]||!Number.isSafeInteger(e[r]))throw Error("invalid number "+r);if(!Array.isArray(r)||r.length!==c)throw Error("Poseidon: invalid MDS matrix");let u=r.map(e=>{if(!Array.isArray(e)||e.length!==c)throw Error("invalid MDS matrix row: "+e);return e.map(e=>{if("bigint"!=typeof e)throw Error("invalid MDS matrix bigint: "+e);return t.create(e)})});if(void 0!==a&&"boolean"!=typeof a)throw Error("invalid param reversePartialPowIdx="+a);if(1&s)throw Error("roundsFull is not even"+s);let d=s+o;if(!Array.isArray(i)||i.length!==d)throw Error("Poseidon: invalid round constants");let h=i.map(e=>{if(!Array.isArray(e)||e.length!==c)throw Error("invalid round constants");return e.map(e=>{if("bigint"!=typeof e||!t.isValid(e))throw Error("invalid round constant");return t.create(e)})});if(!l||![3,5,7].includes(l))throw Error("invalid sboxPower");let f=BigInt(l),p=e=>(0,n.FpPow)(t,e,f);return 3===l?p=e=>t.mul(t.sqrN(e),e):5===l&&(p=e=>t.mul(t.sqrN(t.sqrN(e)),e)),Object.freeze({...e,rounds:d,sboxFn:p,roundConstants:h,mds:u})}},726204,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.wNAF=function(e,t){return{constTimeNegate:o,hasPrecomputes:e=>1!==p(e),unsafeLadder(t,r,n=e.ZERO){let a=t;for(;r>i;)r&s&&(n=n.add(a)),a=a.double(),r>>=s;return n},precomputeWindow(e,r){let{windows:n,windowSize:a}=c(r,t),i=[],s=e,o=s;for(let e=0;e<n;e++){o=s,i.push(o);for(let e=1;e<a;e++)o=o.add(s),i.push(o);s=o.double()}return i},wNAF(r,n,a){let{windows:i,windowSize:l}=c(r,t),u=e.ZERO,d=e.BASE,h=BigInt(2**r-1),f=2**r,p=BigInt(r);for(let e=0;e<i;e++){let t=e*l,r=Number(a&h);a>>=p,r>l&&(r-=f,a+=s);let i=t+Math.abs(r)-1,c=e%2!=0,g=r<0;0===r?d=d.add(o(c,n[t])):u=u.add(o(g,n[i]))}return{p:u,f:d}},wNAFUnsafe(r,n,a,o=e.ZERO){let{windows:l,windowSize:u}=c(r,t),d=BigInt(2**r-1),h=2**r,f=BigInt(r);for(let e=0;e<l;e++){let t=e*u;if(a===i)break;let r=Number(a&d);if(a>>=f,r>u&&(r-=h,a+=s),0===r)continue;let l=n[t+Math.abs(r)-1];r<0&&(l=l.negate()),o=o.add(l)}return o},getPrecomputes(e,t,r){let n=h.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&h.set(t,r(n))),n},wNAFCached(e,t,r){let n=p(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){let a=p(e);return 1===a?this.unsafeLadder(e,t,n):this.wNAFUnsafe(a,this.getPrecomputes(a,e,r),t,n)},setWindowSize(e,r){l(r,t),f.set(e,r),h.delete(e)}}},r.pippenger=function(e,t,r,n){if(u(r,e),d(n,t),r.length!==n.length)throw Error("arrays of points and scalars must have equal length");let i=e.ZERO,s=(0,a.bitLen)(BigInt(r.length)),o=s>12?s-3:s>4?s-2:s?2:1,l=(1<<o)-1,c=Array(l+1).fill(i),h=Math.floor((t.BITS-1)/o)*o,f=i;for(let e=h;e>=0;e-=o){c.fill(i);for(let t=0;t<n.length;t++){let a=Number(n[t]>>BigInt(e)&BigInt(l));c[a]=c[a].add(r[t])}let t=i;for(let e=c.length-1,r=i;e>0;e--)r=r.add(c[e]),t=t.add(r);if(f=f.add(t),0!==e)for(let e=0;e<o;e++)f=f.double()}return f},r.precomputeMSMUnsafe=function(e,t,r,n){l(n,t.BITS),u(r,e);let a=e.ZERO,i=2**n-1,s=Math.ceil(t.BITS/n),o=BigInt((1<<n)-1),c=r.map(e=>{let t=[];for(let r=0,n=e;r<i;r++)t.push(n),n=n.add(e);return t});return e=>{if(d(e,t),e.length>r.length)throw Error("array of scalars must be smaller than array of points");let i=a;for(let t=0;t<s;t++){if(i!==a)for(let e=0;e<n;e++)i=i.double();let r=BigInt(s*n-(t+1)*n);for(let t=0;t<e.length;t++){let n=Number(e[t]>>r&o);n&&(i=i.add(c[t][n-1]))}}return i}},r.validateBasic=function(e){return(0,n.validateField)(e.Fp),(0,a.validateObject)(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...(0,n.nLength)(e.n,e.nBitLength),...e,...{p:e.Fp.ORDER}})};let n=e.r(366837),a=e.r(144554),i=BigInt(0),s=BigInt(1);function o(e,t){let r=t.negate();return e?r:t}function l(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function c(e,t){return l(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}function u(e,t){if(!Array.isArray(e))throw Error("array expected");e.forEach((e,r)=>{if(!(e instanceof t))throw Error("invalid point at index "+r)})}function d(e,t){if(!Array.isArray(e))throw Error("array of scalars expected");e.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)})}let h=new WeakMap,f=new WeakMap;function p(e){return f.get(e)||1}},589569,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.DER=void 0,r.weierstrassPoints=g,r.weierstrass=function(e){let t=function(e){let t=(0,n.validateBasic)(e);return i.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:l,n:c}=t,h=l.BYTES+1,f=2*l.BYTES+1;function p(e){return a.mod(e,c)}function m(e){return a.invert(e,c)}let{ProjectivePoint:y,normPrivateKeyToScalar:b,weierstrassEquation:_,isWithinCurveOrder:w}=g({...t,toBytes(e,t,r){let n=t.toAffine(),a=l.toBytes(n.x),o=i.concatBytes;return((0,s.abool)("isCompressed",r),r)?o(Uint8Array.from([t.hasEvenY()?2:3]),a):o(Uint8Array.from([4]),a,l.toBytes(n.y))},fromBytes(e){let t=e.length,r=e[0],n=e.subarray(1);if(t===h&&(2===r||3===r)){let e,t=i.bytesToNumberBE(n);if(!i.inRange(t,d,l.ORDER))throw Error("Point is not on curve");let a=_(t);try{e=l.sqrt(a)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&r)==1!=((e&d)===d)&&(e=l.neg(e)),{x:t,y:e}}if(t===f&&4===r)return{x:l.fromBytes(n.subarray(0,l.BYTES)),y:l.fromBytes(n.subarray(l.BYTES,2*l.BYTES))};throw Error("invalid Point, expected length of "+h+", or uncompressed "+f+", got "+t)}}),E=e=>i.bytesToHex(i.numberToBytesBE(e,t.nByteLength)),v=(e,t,r)=>i.bytesToNumberBE(e.slice(t,r));class S{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new S(v(e=(0,s.ensureBytes)("compactSignature",e,2*r),0,r),v(e,r,2*r))}static fromDER(e){let{r:t,s:n}=r.DER.toSig((0,s.ensureBytes)("DER",e));return new S(t,n)}assertValidity(){i.aInRange("r",this.r,d,c),i.aInRange("s",this.s,d,c)}addRecoveryBit(e){return new S(this.r,this.s,e)}recoverPublicKey(e){let{r,s:n,recovery:a}=this,i=A((0,s.ensureBytes)("msgHash",e));if(null==a||![0,1,2,3].includes(a))throw Error("recovery id invalid");let o=2===a||3===a?r+t.n:r;if(o>=l.ORDER)throw Error("recovery id 2 or 3 invalid");let c=(1&a)==0?"02":"03",u=y.fromHex(c+E(o)),d=m(o),h=p(-i*d),f=p(n*d),g=y.BASE.multiplyAndAddUnsafe(u,h,f);if(!g)throw Error("point at infinify");return g.assertValidity(),g}hasHighS(){return this.s>c>>d}normalizeS(){return this.hasHighS()?new S(this.r,p(-this.s),this.recovery):this}toDERRawBytes(){return i.hexToBytes(this.toDERHex())}toDERHex(){return r.DER.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return i.hexToBytes(this.toCompactHex())}toCompactHex(){return E(this.r)+E(this.s)}}function x(e){let t=i.isBytes(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===h||n===f:r?n===2*h||n===2*f:e instanceof y}let T=t.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let r=i.bytesToNumberBE(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},A=t.bits2int_modN||function(e){return p(T(e))},k=i.bitMask(t.nBitLength);function I(e){return i.aInRange("num < 2^"+t.nBitLength,e,u,k),i.numberToBytesBE(e,t.nByteLength)}let C={lowS:t.lowS,prehash:!1},B={lowS:t.lowS,prehash:!1};return y.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return y.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(x(e))throw Error("first arg must be private key");if(!x(t))throw Error("second arg must be public key");return y.fromHex(t).multiply(b(e)).toRawBytes(r)},sign:function(e,r,n=C){let{seed:a,k2sig:h}=function(e,r,n=C){if(["recovered","canonical"].some(e=>e in n))throw Error("sign() legacy options not supported");let{hash:a,randomBytes:h}=t,{lowS:f,prehash:g,extraEntropy:_}=n;null==f&&(f=!0),e=(0,s.ensureBytes)("msgHash",e),o(n),g&&(e=(0,s.ensureBytes)("prehashed msgHash",a(e)));let E=A(e),v=b(r),x=[I(v),I(E)];if(null!=_&&!1!==_){let e=!0===_?h(l.BYTES):_;x.push((0,s.ensureBytes)("extraEntropy",e))}return{seed:i.concatBytes(...x),k2sig:function(e){var t;let r=T(e);if(!w(r))return;let n=m(r),a=y.BASE.multiply(r).toAffine(),i=p(a.x);if(i===u)return;let s=p(n*p(E+i*v));if(s===u)return;let o=2*(a.x!==i)|Number(a.y&d),l=s;return f&&s>c>>d&&(l=(t=s)>c>>d?p(-t):t,o^=1),new S(i,l,o)}}}(e,r,n);return i.createHmacDrbg(t.hash.outputLen,t.nByteLength,t.hmac)(a,h)},verify:function(e,n,a,l=B){let c,u;n=(0,s.ensureBytes)("msgHash",n),a=(0,s.ensureBytes)("publicKey",a);let{lowS:d,prehash:h,format:f}=l;if(o(l),"strict"in l)throw Error("options.strict was renamed to lowS");if(void 0!==f&&"compact"!==f&&"der"!==f)throw Error("format must be compact or der");let g="string"==typeof e||i.isBytes(e),b=!g&&!f&&"object"==typeof e&&null!==e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!g&&!b)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(b&&(u=new S(e.r,e.s)),g){try{"compact"!==f&&(u=S.fromDER(e))}catch(e){if(!(e instanceof r.DER.Err))throw e}u||"der"===f||(u=S.fromCompact(e))}c=y.fromHex(a)}catch(e){return!1}if(!u||d&&u.hasHighS())return!1;h&&(n=t.hash(n));let{r:_,s:w}=u,E=A(n),v=m(w),x=p(E*v),T=p(_*v),k=y.BASE.multiplyAndAddUnsafe(c,x,T)?.toAffine();return!!k&&p(k.x)===_},ProjectivePoint:y,Signature:S,utils:{isValidPrivateKey(e){try{return b(e),!0}catch(e){return!1}},normPrivateKeyToScalar:b,randomPrivateKey:()=>{let e=a.getMinHashLength(t.n);return a.mapHashToField(t.randomBytes(e),t.n)},precompute:(e=8,t=y.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}},r.SWUFpSqrtRatio=m,r.mapToCurveSimpleSWU=function(e,t){if(a.validateField(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let r=m(e,t.Z);if(!e.isOdd)throw Error("Fp.isOdd is not implemented!");return n=>{let a,i,s,o,l,c,u,d;a=e.sqr(n),a=e.mul(a,t.Z),i=e.sqr(a),i=e.add(i,a),s=e.add(i,e.ONE),s=e.mul(s,t.B),o=e.cmov(t.Z,e.neg(i),!e.eql(i,e.ZERO)),o=e.mul(o,t.A),i=e.sqr(s),c=e.sqr(o),l=e.mul(c,t.A),i=e.add(i,l),i=e.mul(i,s),c=e.mul(c,o),l=e.mul(c,t.B),i=e.add(i,l),u=e.mul(a,s);let{isValid:h,value:f}=r(i,c);d=e.mul(a,n),d=e.mul(d,f),u=e.cmov(u,s,h),d=e.cmov(d,f,h);let p=e.isOdd(n)===e.isOdd(d);return d=e.cmov(e.neg(d),d,p),{x:u=e.div(u,o),y:d}}};let n=e.r(726204),a=e.r(366837),i=e.r(144554),s=e.r(144554);function o(e){void 0!==e.lowS&&(0,s.abool)("lowS",e.lowS),void 0!==e.prehash&&(0,s.abool)("prehash",e.prehash)}let{bytesToNumberBE:l,hexToBytes:c}=i;r.DER={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,t)=>{let{Err:n}=r.DER;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(1&t.length)throw new n("tlv.encode: unpadded data");let a=t.length/2,s=i.numberToHexUnpadded(a);if(s.length/2&128)throw new n("tlv.encode: long form length too big");let o=a>127?i.numberToHexUnpadded(s.length/2|128):"";return i.numberToHexUnpadded(e)+o+s+t},decode(e,t){let{Err:n}=r.DER,a=0;if(e<0||e>256)throw new n("tlv.encode: wrong tag");if(t.length<2||t[a++]!==e)throw new n("tlv.decode: wrong tlv");let i=t[a++],s=0;if(128&i){let e=127&i;if(!e)throw new n("tlv.decode(long): indefinite length not supported");if(e>4)throw new n("tlv.decode(long): byte length is too big");let r=t.subarray(a,a+e);if(r.length!==e)throw new n("tlv.decode: length bytes not complete");if(0===r[0])throw new n("tlv.decode(long): zero leftmost byte");for(let e of r)s=s<<8|e;if(a+=e,s<128)throw new n("tlv.decode(long): not minimal encoding")}else s=i;let o=t.subarray(a,a+s);if(o.length!==s)throw new n("tlv.decode: wrong value length");return{v:o,l:t.subarray(a+s)}}},_int:{encode(e){let{Err:t}=r.DER;if(e<u)throw new t("integer: negative integers are not allowed");let n=i.numberToHexUnpadded(e);if(8&Number.parseInt(n[0],16)&&(n="00"+n),1&n.length)throw new t("unexpected DER parsing assertion: unpadded hex");return n},decode(e){let{Err:t}=r.DER;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return l(e)}},toSig(e){let{Err:t,_int:n,_tlv:a}=r.DER,s="string"==typeof e?c(e):e;i.abytes(s);let{v:o,l:l}=a.decode(48,s);if(l.length)throw new t("invalid signature: left bytes after parsing");let{v:u,l:d}=a.decode(2,o),{v:h,l:f}=a.decode(2,d);if(f.length)throw new t("invalid signature: left bytes after parsing");return{r:n.decode(u),s:n.decode(h)}},hexFromSig(e){let{_tlv:t,_int:n}=r.DER,a=t.encode(2,n.encode(e.r)),i=t.encode(2,n.encode(e.s));return t.encode(48,a+i)}};let u=BigInt(0),d=BigInt(1),h=BigInt(2),f=BigInt(3),p=BigInt(4);function g(e){let t=function(e){let t=(0,n.validateBasic)(e);i.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:a,a:s}=t;if(r){if(!a.eql(s,a.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:r}=t,o=a.Field(t.n,t.nBitLength),l=t.toBytes||((e,t,n)=>{let a=t.toAffine();return i.concatBytes(Uint8Array.from([4]),r.toBytes(a.x),r.toBytes(a.y))}),c=t.fromBytes||(e=>{let t=e.subarray(1);return{x:r.fromBytes(t.subarray(0,r.BYTES)),y:r.fromBytes(t.subarray(r.BYTES,2*r.BYTES))}});function h(e){let{a:n,b:a}=t,i=r.sqr(e),s=r.mul(i,e);return r.add(r.add(s,r.mul(e,n)),a)}if(!r.eql(r.sqr(t.Gy),h(t.Gx)))throw Error("bad generator point: equation left != right");function p(e){let r,{allowedPrivateKeyLengths:n,nByteLength:o,wrapPrivateKey:l,n:c}=t;if(n&&"bigint"!=typeof e){if(i.isBytes(e)&&(e=i.bytesToHex(e)),"string"!=typeof e||!n.includes(e.length))throw Error("invalid private key");e=e.padStart(2*o,"0")}try{r="bigint"==typeof e?e:i.bytesToNumberBE((0,s.ensureBytes)("private key",e,o))}catch(t){throw Error("invalid private key, expected hex or "+o+" bytes, got "+typeof e)}return l&&(r=a.mod(r,c)),i.aInRange("private key",r,d,c),r}function g(e){if(!(e instanceof b))throw Error("ProjectivePoint expected")}let m=(0,s.memoized)((e,t)=>{let{px:n,py:a,pz:i}=e;if(r.eql(i,r.ONE))return{x:n,y:a};let s=e.is0();null==t&&(t=s?r.ONE:r.inv(i));let o=r.mul(n,t),l=r.mul(a,t),c=r.mul(i,t);if(s)return{x:r.ZERO,y:r.ZERO};if(!r.eql(c,r.ONE))throw Error("invZ was invalid");return{x:o,y:l}}),y=(0,s.memoized)(e=>{if(e.is0()){if(t.allowInfinityPoint&&!r.is0(e.py))return;throw Error("bad point: ZERO")}let{x:n,y:a}=e.toAffine();if(!r.isValid(n)||!r.isValid(a))throw Error("bad point: x or y not FE");let i=r.sqr(a),s=h(n);if(!r.eql(i,s))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class b{constructor(e,t,n){if(this.px=e,this.py=t,this.pz=n,null==e||!r.isValid(e))throw Error("x required");if(null==t||!r.isValid(t))throw Error("y required");if(null==n||!r.isValid(n))throw Error("z required");Object.freeze(this)}static fromAffine(e){let{x:t,y:n}=e||{};if(!e||!r.isValid(t)||!r.isValid(n))throw Error("invalid affine point");if(e instanceof b)throw Error("projective point not allowed");let a=e=>r.eql(e,r.ZERO);return a(t)&&a(n)?b.ZERO:new b(t,n,r.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=r.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(b.fromAffine)}static fromHex(e){let t=b.fromAffine(c((0,s.ensureBytes)("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return b.BASE.multiply(p(e))}static msm(e,t){return(0,n.pippenger)(b,o,e,t)}_setWindowSize(e){w.setWindowSize(this,e)}assertValidity(){y(this)}hasEvenY(){let{y:e}=this.toAffine();if(r.isOdd)return!r.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){g(e);let{px:t,py:n,pz:a}=this,{px:i,py:s,pz:o}=e,l=r.eql(r.mul(t,o),r.mul(i,a)),c=r.eql(r.mul(n,o),r.mul(s,a));return l&&c}negate(){return new b(this.px,r.neg(this.py),this.pz)}double(){let{a:e,b:n}=t,a=r.mul(n,f),{px:i,py:s,pz:o}=this,l=r.ZERO,c=r.ZERO,u=r.ZERO,d=r.mul(i,i),h=r.mul(s,s),p=r.mul(o,o),g=r.mul(i,s);return g=r.add(g,g),u=r.mul(i,o),u=r.add(u,u),l=r.mul(e,u),c=r.mul(a,p),c=r.add(l,c),l=r.sub(h,c),c=r.add(h,c),c=r.mul(l,c),l=r.mul(g,l),u=r.mul(a,u),p=r.mul(e,p),g=r.sub(d,p),g=r.mul(e,g),g=r.add(g,u),u=r.add(d,d),d=r.add(u,d),d=r.add(d,p),d=r.mul(d,g),c=r.add(c,d),p=r.mul(s,o),p=r.add(p,p),d=r.mul(p,g),l=r.sub(l,d),u=r.mul(p,h),u=r.add(u,u),new b(l,c,u=r.add(u,u))}add(e){g(e);let{px:n,py:a,pz:i}=this,{px:s,py:o,pz:l}=e,c=r.ZERO,u=r.ZERO,d=r.ZERO,h=t.a,p=r.mul(t.b,f),m=r.mul(n,s),y=r.mul(a,o),_=r.mul(i,l),w=r.add(n,a),E=r.add(s,o);w=r.mul(w,E),E=r.add(m,y),w=r.sub(w,E),E=r.add(n,i);let v=r.add(s,l);return E=r.mul(E,v),v=r.add(m,_),E=r.sub(E,v),v=r.add(a,i),c=r.add(o,l),v=r.mul(v,c),c=r.add(y,_),v=r.sub(v,c),d=r.mul(h,E),c=r.mul(p,_),d=r.add(c,d),c=r.sub(y,d),d=r.add(y,d),u=r.mul(c,d),y=r.add(m,m),y=r.add(y,m),_=r.mul(h,_),E=r.mul(p,E),y=r.add(y,_),_=r.sub(m,_),_=r.mul(h,_),E=r.add(E,_),m=r.mul(y,E),u=r.add(u,m),m=r.mul(v,E),c=r.mul(w,c),c=r.sub(c,m),m=r.mul(w,y),d=r.mul(v,d),new b(c,u,d=r.add(d,m))}subtract(e){return this.add(e.negate())}is0(){return this.equals(b.ZERO)}wNAF(e){return w.wNAFCached(this,e,b.normalizeZ)}multiplyUnsafe(e){let{endo:n,n:a}=t;i.aInRange("scalar",e,u,a);let s=b.ZERO;if(e===u)return s;if(this.is0()||e===d)return this;if(!n||w.hasPrecomputes(this))return w.wNAFCachedUnsafe(this,e,b.normalizeZ);let{k1neg:o,k1:l,k2neg:c,k2:h}=n.splitScalar(e),f=s,p=s,g=this;for(;l>u||h>u;)l&d&&(f=f.add(g)),h&d&&(p=p.add(g)),g=g.double(),l>>=d,h>>=d;return o&&(f=f.negate()),c&&(p=p.negate()),p=new b(r.mul(p.px,n.beta),p.py,p.pz),f.add(p)}multiply(e){let n,a,{endo:s,n:o}=t;if(i.aInRange("scalar",e,d,o),s){let{k1neg:t,k1:i,k2neg:o,k2:l}=s.splitScalar(e),{p:c,f:u}=this.wNAF(i),{p:d,f:h}=this.wNAF(l);c=w.constTimeNegate(t,c),d=w.constTimeNegate(o,d),d=new b(r.mul(d.px,s.beta),d.py,d.pz),n=c.add(d),a=u.add(h)}else{let{p:t,f:r}=this.wNAF(e);n=t,a=r}return b.normalizeZ([n,a])[0]}multiplyAndAddUnsafe(e,t,r){let n=b.BASE,a=(e,t)=>t!==u&&t!==d&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),i=a(this,t).add(a(e,r));return i.is0()?void 0:i}toAffine(e){return m(this,e)}isTorsionFree(){let{h:e,isTorsionFree:r}=t;if(e===d)return!0;if(r)return r(b,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:r}=t;return e===d?this:r?r(b,this):this.multiplyUnsafe(t.h)}toRawBytes(e=!0){return(0,s.abool)("isCompressed",e),this.assertValidity(),l(b,this,e)}toHex(e=!0){return(0,s.abool)("isCompressed",e),i.bytesToHex(this.toRawBytes(e))}}b.BASE=new b(t.Gx,t.Gy,r.ONE),b.ZERO=new b(r.ZERO,r.ONE,r.ZERO);let _=t.nBitLength,w=(0,n.wNAF)(b,t.endo?Math.ceil(_/2):_);return{CURVE:t,ProjectivePoint:b,normPrivateKeyToScalar:p,weierstrassEquation:h,isWithinCurveOrder:function(e){return i.inRange(e,d,t.n)}}}function m(e,t){let r=e.ORDER,n=u;for(let e=r-d;e%h===u;e/=h)n+=d;let a=n,i=h<<a-d-d,s=i*h,o=(r-d)/s,l=(o-d)/h,c=s-d,g=e.pow(t,o),m=e.pow(t,(o+d)/h),y=(t,r)=>{let n=g,s=e.pow(r,c),o=e.sqr(s);o=e.mul(o,r);let u=e.mul(t,o);u=e.pow(u,l),u=e.mul(u,s),s=e.mul(u,r),o=e.mul(u,t);let f=e.mul(o,s);u=e.pow(f,i);let p=e.eql(u,e.ONE);s=e.mul(o,m),u=e.mul(f,n),o=e.cmov(s,o,p),f=e.cmov(u,f,p);for(let t=a;t>d;t--){let r=t-h;r=h<<r-d;let a=e.pow(f,r),i=e.eql(a,e.ONE);s=e.mul(o,n),n=e.mul(n,n),a=e.mul(f,n),o=e.cmov(s,o,i),f=e.cmov(a,f,i)}return{isValid:p,value:o}};if(e.ORDER%p===f){let r=(e.ORDER-f)/p,n=e.sqrt(e.neg(t));y=(t,a)=>{let i=e.sqr(a),s=e.mul(t,a);i=e.mul(i,s);let o=e.pow(i,r);o=e.mul(o,s);let l=e.mul(o,n),c=e.mul(e.sqr(o),a),u=e.eql(c,t),d=e.cmov(l,o,u);return{isValid:u,value:d}}}return y}},807753,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.hmac=r.HMAC=void 0;let n=e.r(107612),a=e.r(606380);class i extends a.Hash{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,(0,n.ahash)(e);let r=(0,a.toBytes)(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let i=this.blockLen,s=new Uint8Array(i);s.set(r.length>i?e.create().update(r).digest():r);for(let e=0;e<s.length;e++)s[e]^=54;this.iHash.update(s),this.oHash=e.create();for(let e=0;e<s.length;e++)s[e]^=106;this.oHash.update(s),s.fill(0)}update(e){return(0,n.aexists)(this),this.iHash.update(e),this}digestInto(e){(0,n.aexists)(this),(0,n.abytes)(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:a,blockLen:i,outputLen:s}=this;return e.finished=n,e.destroyed=a,e.blockLen=i,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}r.HMAC=i,r.hmac=(e,t,r)=>new i(e,t).update(r).digest(),r.hmac.create=(e,t)=>new i(e,t)},915316,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.getHash=s,r.createCurve=function(e,t){let r=t=>(0,i.weierstrass)({...e,...s(t)});return Object.freeze({...r(t),create:r})};let n=e.r(807753),a=e.r(606380),i=e.r(589569);function s(e){return{hash:e,hmac:(t,...r)=>(0,n.hmac)(e,t,(0,a.concatBytes)(...r)),randomBytes:a.randomBytes}}},499369,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.poseidonSmall=r.Fp251=r.keccak=r.computeHashOnElements=r.utils=r.Signature=r.ProjectivePoint=r.CURVE=r._starkCurve=r.MAX_VALUE=void 0,r.normalizePrivateKey=m,r.getPublicKey=y,r.getSharedSecret=function(e,t){return p.getSharedSecret(m(e),t)},r.sign=function(e,t,r){let n=p.sign(_(e),m(t),r);return b(n),n},r.verify=function(e,t,r){if(!(e instanceof v)){let t=g(e);try{e=v.fromDER(t)}catch(r){if(!(r instanceof l.DER.Err))throw r;e=v.fromCompact(t)}}return b(e),p.verify(e,_(t),g(r))},r.grindKey=A,r.getStarkKey=function(e){return x(y(e,!0))},r.ethSigToPrivate=function(e){if(130!==(e=T(e)).length)throw Error("Wrong ethereum signature");return A(e.substring(0,64))},r.getAccountPath=function(e,t,r,n){let a=I(L(e)),i=I(L(t)),s=c.hexToNumber(T(r));return`m/2645'/${a}'/${i}'/${I(s)}'/${I(s>>31n)}'/${n}`},r.pedersen=D,r._poseidonMDS=V,r.poseidonBasic=H,r.poseidonCreate=function(e,t=0){let r=e.rate+e.capacity;if(!Number.isSafeInteger(t))throw Error(`Wrong mdsAttempt=${t}`);return H(e,V(e.Fp,"HadesMDS",r,t))},r.poseidonHash=M,r.poseidonHashFunc=function(e,t,n=r.poseidonSmall){return c.numberToVarBytesBE(M(c.bytesToNumberBE(e),c.bytesToNumberBE(t),n))},r.poseidonHashSingle=function(e,t=r.poseidonSmall){return t([e,0n,1n])[0]},r.poseidonHashMany=function(e,t=r.poseidonSmall){let{m:n,rate:a}=t;if(!Array.isArray(e))throw Error("bigint array expected in values");let i=Array.from(e);for(i.push(1n);i.length%a!=0;)i.push(0n);let s=Array(n).fill(0n);for(let e=0;e<i.length;e+=a){for(let t=0;t<a;t++){let r=i[e+t];if(void 0===r)throw Error("invalid index");if(void 0===s[t])throw Error("state[j] is undefined");s[t]=s[t]+r}s=t(s)}return s[0]};let n=e.r(996723),a=e.r(859695),i=e.r(606380),s=e.r(366837),o=e.r(733742),l=e.r(589569),c=e.r(144554),u=e.r(915316),d=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583");function h(e){for(;0===e[0];)e=e.subarray(1);let t=8*e.length-252,r=c.bytesToNumberBE(e);return t>0?r>>BigInt(t):r}function f(e){return"string"==typeof e&&1&(e=T(e)).length&&(e="0"+e),c.hexToBytes(e)}r.MAX_VALUE=BigInt("0x800000000000000000000000000000000000000000000000000000000000000");let p=(0,l.weierstrass)({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:(0,s.Field)(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:d,nBitLength:252,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,...(0,u.getHash)(a.sha256),bits2int:h,bits2int_modN:e=>{let t=c.bytesToNumberBE(e).toString(16);return 63===t.length&&(e=f(t+"0")),(0,s.mod)(h(e),d)}});function g(e){return c.ensureBytes("","string"==typeof e?f(e):e)}function m(e){return c.bytesToHex(g(e)).padStart(64,"0")}function y(e,t=!1){return p.getPublicKey(m(e),t)}function b(e){let{r:t,s:n}=e;if(t<0n||t>=r.MAX_VALUE)throw Error(`Signature.r should be [1, ${r.MAX_VALUE})`);let a=(0,s.invert)(n,d);if(a<0n||a>=r.MAX_VALUE)throw Error(`inv(Signature.s) should be [1, ${r.MAX_VALUE})`)}function _(e){let t=g(e);if(c.bytesToNumberBE(t)>=r.MAX_VALUE)throw Error(`msgHash should be [0, ${r.MAX_VALUE})`);return t}r._starkCurve=p;let{CURVE:w,ProjectivePoint:E,Signature:v,utils:S}=p;function x(e){let t=c.bytesToHex(e.subarray(1)).replace(/^0+/gm,"");return`0x${t}`}function T(e){return e.replace(/^0x/i,"")}function A(e){let t=g(e),r=2n**256n,n=r-(0,s.mod)(r,d);for(let e=0;;e++){let r=L(c.concatBytes(t,c.numberToVarBytesBE(BigInt(e))));if(r<n)return(0,s.mod)(r,d).toString(16);if(1e5===e)throw Error("grindKey is broken: tried 100k vals")}}r.CURVE=w,r.ProjectivePoint=E,r.Signature=v,r.utils=S;let k=2n**31n-1n,I=e=>Number(e&k),C=[new E(0x49ee3eba8c1600700ee1b87eb599f16716b0b1022947733551fde4050ca6804n,0x3ca0cfe4b3bc6ddf346d49d06ea0ed34e621062c0e056c1d0405d266e10268an,1n),new E(0x234287dcbaffe7f969c748655fca9e58fa8120b6d56eb0c1080d17957ebe47bn,0x3b056f100f96fb21e889527d41f4e39940135dd7a6c94cc6ed0268ee89e5615n,1n),new E(0x4fa56f376c83db33f9dab2656558f3399099ec1de5e3018b7a6932dba8aa378n,0x3fa0984c931c9e38113e0c0e47e4401562761f92a7a23b45168f4e80ff5b54dn,1n),new E(0x4ba4cc166be8dec764910f75b45f74b40c690c74709e90f3aa372f0bd2d6997n,0x40301cf5c1751f4b971e46c4ede85fcac5c59a5ce5ae7c48151f27b24b219cn,1n),new E(0x54302dcb0e6cc1c6e44cca8f61a63bb2ca65048d53fb325d36ff12c49a58202n,0x1b77b3e37d13504b348046268d8ae25ce98ad783c25561a879dcc77e99c2426n,1n)];function B(e,t){let r=[],n=e;for(let e=0;e<248;e++)r.push(n),n=n.double();n=t;for(let e=0;e<4;e++)r.push(n),n=n.double();return r}let O=B(C[1],C[2]),N=B(C[3],C[4]);function P(e,t,r){let n=function(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e){if(!Number.isSafeInteger(e))throw Error(`Invalid pedersenArg: ${e}`);t=BigInt(e)}else t=c.bytesToNumberBE(g(e));if(!(0n<=t&&t<p.CURVE.Fp.ORDER))throw Error(`PedersenArg should be 0 <= value < CURVE.P: ${t}`);return t}(t);for(let t=0;t<252;t++){let a=r[t];if(!a)throw Error("invalid constant index");if(a.equals(e))throw Error("Same point");(1n&n)!==0n&&(e=e.add(a)),n>>=1n}return e}function D(e,t){let r=C[0];return r=P(r,e,O),x((r=P(r,t,N)).toRawBytes(!0))}r.computeHashOnElements=(e,t=D)=>[0,...e,e.length].reduce((e,r)=>t(e,r));let R=c.bitMask(250);r.keccak=e=>c.bytesToNumberBE((0,n.keccak_256)(e))&R;let L=e=>c.bytesToNumberBE((0,a.sha256)(e));function U(e,t,r){let n=e.fromBytes((0,a.sha256)((0,i.utf8ToBytes)(`${t}${r}`)));return e.create(n)}function V(e,t,r,n=0){let a=[],i=[];for(let s=0;s<r;s++)a.push(U(e,`${t}x`,n*r+s)),i.push(U(e,`${t}y`,n*r+s));if(new Set([...a,...i]).size!==2*r)throw Error("X and Y values are not distinct");return a.map(t=>i.map(r=>e.inv(e.sub(t,r))))}r.Fp251=(0,s.Field)(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));let F=[[3,1,1],[1,-1,1],[1,1,-2]].map(e=>e.map(BigInt));function H(e,t){if((0,s.validateField)(e.Fp),!Number.isSafeInteger(e.rate)||!Number.isSafeInteger(e.capacity))throw Error(`Wrong poseidon opts: ${e}`);let r=e.rate+e.capacity,n=e.roundsFull+e.roundsPartial,a=[];for(let t=0;t<n;t++){let n=[];for(let a=0;a<r;a++)n.push(U(e.Fp,"Hades",r*t+a));a.push(n)}let i=(0,o.poseidon)({...e,t:r,sboxPower:3,reversePartialPowIdx:!0,mds:t,roundConstants:a});return i.m=r,i.rate=e.rate,i.capacity=e.capacity,i}function M(e,t,n=r.poseidonSmall){return n([e,t,2n])[0]}r.poseidonSmall=H({Fp:r.Fp251,rate:2,capacity:1,roundsFull:8,roundsPartial:83},F)},902848,(e,t,r)=>{"use strict";t.exports={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8}},566462,(e,t,r)=>{"use strict";let n,a,i;function s(e){let t=e.length;for(;--t>=0;)e[t]=0}let o=573,l=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),c=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),u=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),d=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),h=Array(576);s(h);let f=Array(60);s(f);let p=Array(512);s(p);let g=Array(256);s(g);let m=Array(29);s(m);let y=Array(30);function b(e,t,r,n,a){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}function _(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}s(y);let w=e=>e<256?p[e]:p[256+(e>>>7)],E=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},v=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,E(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},S=(e,t,r)=>{v(e,r[2*t],r[2*t+1])},x=(e,t)=>{let r=0;do r|=1&e,e>>>=1,r<<=1;while(--t>0)return r>>>1},T=(e,t,r)=>{let n,a,i=Array(16),s=0;for(n=1;n<=15;n++)s=s+r[n-1]<<1,i[n]=s;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=x(i[t]++,t))}},A=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},k=e=>{e.bi_valid>8?E(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},I=(e,t,r,n)=>{let a=2*t,i=2*r;return e[a]<e[i]||e[a]===e[i]&&n[t]<=n[r]},C=(e,t,r)=>{let n=e.heap[r],a=r<<1;for(;a<=e.heap_len&&(a<e.heap_len&&I(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!I(t,n,e.heap[a],e.depth));)e.heap[r]=e.heap[a],r=a,a<<=1;e.heap[r]=n},B=(e,t,r)=>{let n,a,i,s,o=0;if(0!==e.sym_next)do n=(255&e.pending_buf[e.sym_buf+o++])+((255&e.pending_buf[e.sym_buf+o++])<<8),a=e.pending_buf[e.sym_buf+o++],0===n?S(e,a,t):(S(e,(i=g[a])+256+1,t),0!==(s=l[i])&&v(e,a-=m[i],s),S(e,i=w(--n),r),0!==(s=c[i])&&v(e,n-=y[i],s));while(o<e.sym_next)S(e,256,t)},O=(e,t)=>{let r,n,a,i=t.dyn_tree,s=t.stat_desc.static_tree,l=t.stat_desc.has_stree,c=t.stat_desc.elems,u=-1;for(r=0,e.heap_len=0,e.heap_max=o;r<c;r++)0!==i[2*r]?(e.heap[++e.heap_len]=u=r,e.depth[r]=0):i[2*r+1]=0;for(;e.heap_len<2;)i[2*(a=e.heap[++e.heap_len]=u<2?++u:0)]=1,e.depth[a]=0,e.opt_len--,l&&(e.static_len-=s[2*a+1]);for(t.max_code=u,r=e.heap_len>>1;r>=1;r--)C(e,i,r);a=c;do r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],C(e,i,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,i[2*a]=i[2*r]+i[2*n],e.depth[a]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,i[2*r+1]=i[2*n+1]=a,e.heap[1]=a++,C(e,i,1);while(e.heap_len>=2)e.heap[--e.heap_max]=e.heap[1],((e,t)=>{let r,n,a,i,s,l,c=t.dyn_tree,u=t.max_code,d=t.stat_desc.static_tree,h=t.stat_desc.has_stree,f=t.stat_desc.extra_bits,p=t.stat_desc.extra_base,g=t.stat_desc.max_length,m=0;for(i=0;i<=15;i++)e.bl_count[i]=0;for(c[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<o;r++)(i=c[2*c[2*(n=e.heap[r])+1]+1]+1)>g&&(i=g,m++),c[2*n+1]=i,!(n>u)&&(e.bl_count[i]++,s=0,n>=p&&(s=f[n-p]),l=c[2*n],e.opt_len+=l*(i+s),h&&(e.static_len+=l*(d[2*n+1]+s)));if(0!==m){do{for(i=g-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[g]--,m-=2}while(m>0)for(i=g;0!==i;i--)for(n=e.bl_count[i];0!==n;)!((a=e.heap[--r])>u)&&(c[2*a+1]!==i&&(e.opt_len+=(i-c[2*a+1])*c[2*a],c[2*a+1]=i),n--)}})(e,t),T(i,u,e.bl_count)},N=(e,t,r)=>{let n,a,i=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)a=s,s=t[(n+1)*2+1],++o<l&&a===s||(o<c?e.bl_tree[2*a]+=o:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,i=a,0===s?(l=138,c=3):a===s?(l=6,c=3):(l=7,c=4))},P=(e,t,r)=>{let n,a,i=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),n=0;n<=r;n++)if(a=s,s=t[(n+1)*2+1],!(++o<l)||a!==s){if(o<c)do S(e,a,e.bl_tree);while(0!=--o)else 0!==a?(a!==i&&(S(e,a,e.bl_tree),o--),S(e,16,e.bl_tree),v(e,o-3,2)):o<=10?(S(e,17,e.bl_tree),v(e,o-3,3)):(S(e,18,e.bl_tree),v(e,o-11,7));o=0,i=a,0===s?(l=138,c=3):a===s?(l=6,c=3):(l=7,c=4)}},D=!1,R=(e,t,r,n)=>{v(e,0+ +!!n,3),k(e),E(e,r),E(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r};t.exports._tr_init=e=>{D||((()=>{let e,t,r,s,o,d=Array(16);for(s=0,r=0;s<28;s++)for(e=0,m[s]=r;e<1<<l[s];e++)g[r++]=s;for(g[r-1]=s,o=0,s=0;s<16;s++)for(e=0,y[s]=o;e<1<<c[s];e++)p[o++]=s;for(o>>=7;s<30;s++)for(e=0,y[s]=o<<7;e<1<<c[s]-7;e++)p[256+o++]=s;for(t=0;t<=15;t++)d[t]=0;for(e=0;e<=143;)h[2*e+1]=8,e++,d[8]++;for(;e<=255;)h[2*e+1]=9,e++,d[9]++;for(;e<=279;)h[2*e+1]=7,e++,d[7]++;for(;e<=287;)h[2*e+1]=8,e++,d[8]++;for(T(h,287,d),e=0;e<30;e++)f[2*e+1]=5,f[2*e]=x(e,5);n=new b(h,l,257,286,15),a=new b(f,c,0,30,15),i=new b([],u,0,19,7)})(),D=!0),e.l_desc=new _(e.dyn_ltree,n),e.d_desc=new _(e.dyn_dtree,a),e.bl_desc=new _(e.bl_tree,i),e.bi_buf=0,e.bi_valid=0,A(e)},t.exports._tr_stored_block=R,t.exports._tr_flush_block=(e,t,r,n)=>{let a,i,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,r=0xf3ffc07f;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),O(e,e.l_desc),O(e,e.d_desc),s=(e=>{let t;for(N(e,e.dyn_ltree,e.l_desc.max_code),N(e,e.dyn_dtree,e.d_desc.max_code),O(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*d[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),a=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=a&&(a=i)):a=i=r+5,r+4<=a&&-1!==t?R(e,t,r,n):4===e.strategy||i===a?(v(e,2+ +!!n,3),B(e,h,f)):(v(e,4+ +!!n,3),((e,t,r,n)=>{let a;for(v(e,t-257,5),v(e,r-1,5),v(e,n-4,4),a=0;a<n;a++)v(e,e.bl_tree[2*d[a]+1],3);P(e,e.dyn_ltree,t-1),P(e,e.dyn_dtree,r-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),B(e,e.dyn_ltree,e.dyn_dtree)),A(e),n&&k(e)},t.exports._tr_tally=(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[(g[r]+256+1)*2]++,e.dyn_dtree[2*w(t)]++),e.sym_next===e.sym_end),t.exports._tr_align=e=>{v(e,2,3),S(e,256,h),(e=>{16===e.bi_valid?(E(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},97830,(e,t,r)=>{"use strict";t.exports=(e,t,r,n)=>{let a=65535&e,i=e>>>16&65535,s=0;for(;0!==r;){s=r>2e3?2e3:r,r-=s;do i=i+(a=a+t[n++]|0)|0;while(--s)a%=65521,i%=65521}return a|i<<16}},156641,(e,t,r)=>{"use strict";let n=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?0xedb88320^e>>>1:e>>>1;t[r]=e}return t})());t.exports=(e,t,r,a)=>{let i=a+r;e^=-1;for(let r=a;r<i;r++)e=e>>>8^n[(e^t[r])&255];return -1^e}},532187,(e,t,r)=>{"use strict";t.exports={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"}},296844,(e,t,r)=>{"use strict";let{_tr_init:n,_tr_stored_block:a,_tr_flush_block:i,_tr_tally:s,_tr_align:o}=e.r(566462),l=e.r(97830),c=e.r(156641),u=e.r(532187),{Z_NO_FLUSH:d,Z_PARTIAL_FLUSH:h,Z_FULL_FLUSH:f,Z_FINISH:p,Z_BLOCK:g,Z_OK:m,Z_STREAM_END:y,Z_STREAM_ERROR:b,Z_DATA_ERROR:_,Z_BUF_ERROR:w,Z_DEFAULT_COMPRESSION:E,Z_FILTERED:v,Z_HUFFMAN_ONLY:S,Z_RLE:x,Z_FIXED:T,Z_DEFAULT_STRATEGY:A,Z_UNKNOWN:k,Z_DEFLATED:I}=e.r(902848),C=573,B=(e,t)=>(e.msg=u[t],t),O=e=>2*e-9*(e>4),N=e=>{let t=e.length;for(;--t>=0;)e[t]=0},P=e=>{let t,r,n,a=e.w_size;n=t=e.hash_size;do r=e.head[--n],e.head[n]=r>=a?r-a:0;while(--t)n=t=a;do r=e.prev[--n],e.prev[n]=r>=a?r-a:0;while(--t)},D=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,R=e=>{let t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},L=(e,t)=>{i(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,R(e.strm)},U=(e,t)=>{e.pending_buf[e.pending++]=t},V=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},F=(e,t,r,n)=>{let a=e.avail_in;return(a>n&&(a=n),0===a)?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),r),1===e.state.wrap?e.adler=l(e.adler,t,a,r):2===e.state.wrap&&(e.adler=c(e.adler,t,a,r)),e.next_in+=a,e.total_in+=a,a)},H=(e,t)=>{let r,n,a=e.max_chain_length,i=e.strstart,s=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,c=e.window,u=e.w_mask,d=e.prev,h=e.strstart+258,f=c[i+s-1],p=c[i+s];e.prev_length>=e.good_match&&(a>>=2),o>e.lookahead&&(o=e.lookahead);do{if(c[(r=t)+s]!==p||c[r+s-1]!==f||c[r]!==c[i]||c[++r]!==c[i+1])continue;i+=2,r++;do;while(c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<h)if(n=258-(h-i),i=h-258,n>s){if(e.match_start=t,s=n,n>=o)break;f=c[i+s-1],p=c[i+s]}}while((t=d[t&u])>l&&0!=--a)return s<=e.lookahead?s:e.lookahead},M=e=>{let t,r,n,a=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-262)&&(e.window.set(e.window.subarray(a,a+a-r),0),e.match_start-=a,e.strstart-=a,e.block_start-=a,e.insert>e.strstart&&(e.insert=e.strstart),P(e),r+=a),0===e.strm.avail_in)break;if(t=F(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=t,e.lookahead+e.insert>=3)for(n=e.strstart-e.insert,e.ins_h=e.window[n],e.ins_h=D(e,e.ins_h,e.window[n+1]);e.insert&&(e.ins_h=D(e,e.ins_h,e.window[n+3-1]),e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},$=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,i,s,o=0,l=e.strm.avail_in;do{if(n=65535,s=e.bi_valid+42>>3,e.strm.avail_out<s||(s=e.strm.avail_out-s,n>(i=e.strstart-e.block_start)+e.strm.avail_in&&(n=i+e.strm.avail_in),n>s&&(n=s),n<r&&(0===n&&t!==p||t===d||n!==i+e.strm.avail_in)))break;o=+(t===p&&n===i+e.strm.avail_in),a(e,0,0,o),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,R(e.strm),i&&(i>n&&(i=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+i),e.strm.next_out),e.strm.next_out+=i,e.strm.avail_out-=i,e.strm.total_out+=i,e.block_start+=i,n-=i),n&&(F(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===o)return((l-=e.strm.avail_in)&&(l>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=l&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-l,e.strm.next_in),e.strstart),e.strstart+=l,e.insert+=l>e.w_size-e.insert?e.w_size-e.insert:l),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),o)?4:t!==d&&t!==p&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(s=e.window_size-e.strstart,e.strm.avail_in>s&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,s+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),s>e.strm.avail_in&&(s=e.strm.avail_in),s&&(F(e.strm,e.window,e.strstart,s),e.strstart+=s,e.insert+=s>e.w_size-e.insert?e.w_size-e.insert:s),e.high_water<e.strstart&&(e.high_water=e.strstart),s=e.bi_valid+42>>3,r=(s=e.pending_buf_size-s>65535?65535:e.pending_buf_size-s)>e.w_size?e.w_size:s,((i=e.strstart-e.block_start)>=r||(i||t===p)&&t!==d&&0===e.strm.avail_in&&i<=s)&&(n=i>s?s:i,o=+(t===p&&0===e.strm.avail_in&&n===i),a(e,e.block_start,n,o),e.block_start+=n,R(e.strm)),o?3:1)},j=(e,t)=>{let r,n;for(;;){if(e.lookahead<262){if(M(e),e.lookahead<262&&t===d)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=D(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-262&&(e.match_length=H(e,r)),e.match_length>=3)if(n=s(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=D(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length)e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=D(e,e.ins_h,e.window[e.strstart+1]);else n=s(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(L(e,!1),0===e.strm.avail_out))return 1}return(e.insert=e.strstart<2?e.strstart:2,t===p)?(L(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(L(e,!1),0===e.strm.avail_out)?1:2},z=(e,t)=>{let r,n,a;for(;;){if(e.lookahead<262){if(M(e),e.lookahead<262&&t===d)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=D(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-262&&(e.match_length=H(e,r),e.match_length<=5&&(e.strategy===v||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,n=s(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=D(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length)if(e.match_available=0,e.match_length=2,e.strstart++,n&&(L(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=s(e,0,e.window[e.strstart-1]))&&L(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return(e.match_available&&(n=s(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===p)?(L(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(L(e,!1),0===e.strm.avail_out)?1:2};function W(e,t,r,n,a){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=a}let G=[new W(0,0,0,0,$),new W(4,4,8,4,j),new W(4,5,16,8,j),new W(4,6,32,32,j),new W(4,4,16,16,z),new W(8,16,32,32,z),new W(8,16,128,128,z),new W(8,32,128,256,z),new W(32,128,258,1024,z),new W(32,258,258,4096,z)];function q(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=I,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*C),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),N(this.dyn_ltree),N(this.dyn_dtree),N(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),N(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),N(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let K=e=>{if(!e)return 1;let t=e.state;return t&&t.strm===e&&(42===t.status||57===t.status||69===t.status||73===t.status||91===t.status||103===t.status||113===t.status||666===t.status)?0:1},Y=e=>{if(K(e))return B(e,b);e.total_in=e.total_out=0,e.data_type=k;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=+(2!==t.wrap),t.last_flush=-2,n(t),m},Z=e=>{let t=Y(e);return t===m&&(e=>{e.window_size=2*e.w_size,N(e.head),e.max_lazy_match=G[e.level].max_lazy,e.good_match=G[e.level].good_length,e.nice_match=G[e.level].nice_length,e.max_chain_length=G[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t},X=(e,t,r,n,a,i)=>{if(!e)return b;let s=1;if(t===E&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),a<1||a>9||r!==I||n<8||n>15||t<0||t>9||i<0||i>T||8===n&&1!==s)return B(e,b);8===n&&(n=9);let o=new q;return e.state=o,o.strm=e,o.status=42,o.wrap=s,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=t,o.strategy=i,o.method=r,Z(e)};t.exports.deflateInit=(e,t)=>X(e,t,I,15,8,A),t.exports.deflateInit2=X,t.exports.deflateReset=Z,t.exports.deflateResetKeep=Y,t.exports.deflateSetHeader=(e,t)=>K(e)||2!==e.state.wrap?b:(e.state.gzhead=t,m),t.exports.deflate=(e,t)=>{if(K(e)||t>g||t<0)return e?B(e,b):b;let r=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===r.status&&t!==p)return B(e,0===e.avail_out?w:b);let n=r.last_flush;if(r.last_flush=t,0!==r.pending){if(R(e),0===e.avail_out)return r.last_flush=-1,m}else if(0===e.avail_in&&O(t)<=O(n)&&t!==p)return B(e,w);if(666===r.status&&0!==e.avail_in)return B(e,w);if(42===r.status&&0===r.wrap&&(r.status=113),42===r.status){let t=I+(r.w_bits-8<<4)<<8;if(t|=(r.strategy>=S||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(t|=32),V(r,t+=31-t%31),0!==r.strstart&&(V(r,e.adler>>>16),V(r,65535&e.adler)),e.adler=1,r.status=113,R(e),0!==r.pending)return r.last_flush=-1,m}if(57===r.status){if(e.adler=0,U(r,31),U(r,139),U(r,8),r.gzhead)U(r,+!!r.gzhead.text+2*!!r.gzhead.hcrc+4*!!r.gzhead.extra+8*!!r.gzhead.name+16*!!r.gzhead.comment),U(r,255&r.gzhead.time),U(r,r.gzhead.time>>8&255),U(r,r.gzhead.time>>16&255),U(r,r.gzhead.time>>24&255),U(r,9===r.level?2:4*(r.strategy>=S||r.level<2)),U(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(U(r,255&r.gzhead.extra.length),U(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=c(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(U(r,0),U(r,0),U(r,0),U(r,0),U(r,0),U(r,9===r.level?2:4*(r.strategy>=S||r.level<2)),U(r,3),r.status=113,R(e),0!==r.pending)return r.last_flush=-1,m}if(69===r.status){if(r.gzhead.extra){let t=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){let a=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+a),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>t&&(e.adler=c(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex+=a,R(e),0!==r.pending)return r.last_flush=-1,m;t=0,n-=a}let a=new Uint8Array(r.gzhead.extra);r.pending_buf.set(a.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>t&&(e.adler=c(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=c(e.adler,r.pending_buf,r.pending-n,n)),R(e),0!==r.pending)return r.last_flush=-1,m;n=0}t=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,U(r,t)}while(0!==t)r.gzhead.hcrc&&r.pending>n&&(e.adler=c(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=c(e.adler,r.pending_buf,r.pending-n,n)),R(e),0!==r.pending)return r.last_flush=-1,m;n=0}t=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,U(r,t)}while(0!==t)r.gzhead.hcrc&&r.pending>n&&(e.adler=c(e.adler,r.pending_buf,r.pending-n,n))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(R(e),0!==r.pending))return r.last_flush=-1,m;U(r,255&e.adler),U(r,e.adler>>8&255),e.adler=0}if(r.status=113,R(e),0!==r.pending)return r.last_flush=-1,m}if(0!==e.avail_in||0!==r.lookahead||t!==d&&666!==r.status){let n=0===r.level?$(r,t):r.strategy===S?((e,t)=>{let r;for(;;){if(0===e.lookahead&&(M(e),0===e.lookahead)){if(t===d)return 1;break}if(e.match_length=0,r=s(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(L(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===p)?(L(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(L(e,!1),0===e.strm.avail_out)?1:2})(r,t):r.strategy===x?((e,t)=>{let r,n,a,i,o=e.window;for(;;){if(e.lookahead<=258){if(M(e),e.lookahead<=258&&t===d)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(n=o[a=e.strstart-1])===o[++a]&&n===o[++a]&&n===o[++a]){i=e.strstart+258;do;while(n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&n===o[++a]&&a<i)e.match_length=258-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=s(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=s(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(L(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===p)?(L(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(L(e,!1),0===e.strm.avail_out)?1:2})(r,t):G[r.level].func(r,t);if((3===n||4===n)&&(r.status=666),1===n||3===n)return 0===e.avail_out&&(r.last_flush=-1),m;if(2===n&&(t===h?o(r):t!==g&&(a(r,0,0,!1),t===f&&(N(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),R(e),0===e.avail_out))return r.last_flush=-1,m}return t!==p?m:r.wrap<=0?y:(2===r.wrap?(U(r,255&e.adler),U(r,e.adler>>8&255),U(r,e.adler>>16&255),U(r,e.adler>>24&255),U(r,255&e.total_in),U(r,e.total_in>>8&255),U(r,e.total_in>>16&255),U(r,e.total_in>>24&255)):(V(r,e.adler>>>16),V(r,65535&e.adler)),R(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?m:y)},t.exports.deflateEnd=e=>{if(K(e))return b;let t=e.state.status;return e.state=null,113===t?B(e,_):m},t.exports.deflateSetDictionary=(e,t)=>{let r=t.length;if(K(e))return b;let n=e.state,a=n.wrap;if(2===a||1===a&&42!==n.status||n.lookahead)return b;if(1===a&&(e.adler=l(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===a&&(N(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}let i=e.avail_in,s=e.next_in,o=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,M(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do n.ins_h=D(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++;while(--t)n.strstart=e,n.lookahead=2,M(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=s,e.input=o,e.avail_in=i,n.wrap=a,m},t.exports.deflateInfo="pako deflate (from Nodeca project)"},330843,(e,t,r)=>{"use strict";let n=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);t.exports.assign=function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let r=t.shift();if(r){if("object"!=typeof r)throw TypeError(r+"must be non-object");for(let t in r)n(r,t)&&(e[t]=r[t])}}return e},t.exports.flattenChunks=e=>{let t=0;for(let r=0,n=e.length;r<n;r++)t+=e[r].length;let r=new Uint8Array(t);for(let t=0,n=0,a=e.length;t<a;t++){let a=e[t];r.set(a,n),n+=a.length}return r}},21789,(e,t,r)=>{"use strict";let n=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){n=!1}let a=new Uint8Array(256);for(let e=0;e<256;e++)a[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;a[254]=a[254]=1,t.exports.string2buf=e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,a,i,s=e.length,o=0;for(a=0;a<s;a++)(64512&(r=e.charCodeAt(a)))==55296&&a+1<s&&(64512&(n=e.charCodeAt(a+1)))==56320&&(r=65536+(r-55296<<10)+(n-56320),a++),o+=r<128?1:r<2048?2:r<65536?3:4;for(i=0,t=new Uint8Array(o),a=0;i<o;a++)(64512&(r=e.charCodeAt(a)))==55296&&a+1<s&&(64512&(n=e.charCodeAt(a+1)))==56320&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?t[i++]=r:(r<2048?t[i++]=192|r>>>6:(r<65536?t[i++]=224|r>>>12:(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63),t[i++]=128|r>>>6&63),t[i++]=128|63&r);return t},t.exports.buf2string=(e,t)=>{let r,i,s=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let o=Array(2*s);for(i=0,r=0;r<s;){let t=e[r++];if(t<128){o[i++]=t;continue}let n=a[t];if(n>4){o[i++]=65533,r+=n-1;continue}for(t&=2===n?31:3===n?15:7;n>1&&r<s;)t=t<<6|63&e[r++],n--;if(n>1){o[i++]=65533;continue}t<65536?o[i++]=t:(t-=65536,o[i++]=55296|t>>10&1023,o[i++]=56320|1023&t)}return((e,t)=>{if(t<65534&&e.subarray&&n)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r})(o,i)},t.exports.utf8border=(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(192&e[r])==128;)r--;return r<0||0===r?t:r+a[e[r]]>t?r:t}},3483,(e,t,r)=>{"use strict";t.exports=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0}},858863,(e,t,r)=>{"use strict";let n=e.r(296844),a=e.r(330843),i=e.r(21789),s=e.r(532187),o=e.r(3483),l=Object.prototype.toString,{Z_NO_FLUSH:c,Z_SYNC_FLUSH:u,Z_FULL_FLUSH:d,Z_FINISH:h,Z_OK:f,Z_STREAM_END:p,Z_DEFAULT_COMPRESSION:g,Z_DEFAULT_STRATEGY:m,Z_DEFLATED:y}=e.r(902848);function b(e){this.options=a.assign({level:g,method:y,chunkSize:16384,windowBits:15,memLevel:8,strategy:m},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;let r=n.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==f)throw Error(s[r]);if(t.header&&n.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?i.string2buf(t.dictionary):"[object ArrayBuffer]"===l.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=n.deflateSetDictionary(this.strm,e))!==f)throw Error(s[r]);this._dict_set=!0}}function _(e,t){let r=new b(t);if(r.push(e,!0),r.err)throw r.msg||s[r.err];return r.result}b.prototype.push=function(e,t){let r,a,s=this.strm,o=this.options.chunkSize;if(this.ended)return!1;for(a=t===~~t?t:!0===t?h:c,"string"==typeof e?s.input=i.string2buf(e):"[object ArrayBuffer]"===l.call(e)?s.input=new Uint8Array(e):s.input=e,s.next_in=0,s.avail_in=s.input.length;;){if(0===s.avail_out&&(s.output=new Uint8Array(o),s.next_out=0,s.avail_out=o),(a===u||a===d)&&s.avail_out<=6){this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;continue}if((r=n.deflate(s,a))===p)return s.next_out>0&&this.onData(s.output.subarray(0,s.next_out)),r=n.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===f;if(0===s.avail_out){this.onData(s.output);continue}if(a>0&&s.next_out>0){this.onData(s.output.subarray(0,s.next_out)),s.avail_out=0;continue}if(0===s.avail_in)break}return!0},b.prototype.onData=function(e){this.chunks.push(e)},b.prototype.onEnd=function(e){e===f&&(this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.exports.Deflate=b,t.exports.deflate=_,t.exports.deflateRaw=function(e,t){return(t=t||{}).raw=!0,_(e,t)},t.exports.gzip=function(e,t){return(t=t||{}).gzip=!0,_(e,t)},t.exports.constants=e.r(902848)},398220,(e,t,r)=>{"use strict";t.exports=function(e,t){let r,n,a,i,s,o,l,c,u,d,h,f,p,g,m,y,b,_,w,E,v,S,x,T,A=e.state;r=e.next_in,x=e.input,n=r+(e.avail_in-5),a=e.next_out,T=e.output,i=a-(t-e.avail_out),s=a+(e.avail_out-257),o=A.dmax,l=A.wsize,c=A.whave,u=A.wnext,d=A.window,h=A.hold,f=A.bits,p=A.lencode,g=A.distcode,m=(1<<A.lenbits)-1,y=(1<<A.distbits)-1;t:do for(f<15&&(h+=x[r++]<<f,f+=8,h+=x[r++]<<f,f+=8),b=p[h&m];;){if(h>>>=_=b>>>24,f-=_,0==(_=b>>>16&255))T[a++]=65535&b;else if(16&_)for(w=65535&b,(_&=15)&&(f<_&&(h+=x[r++]<<f,f+=8),w+=h&(1<<_)-1,h>>>=_,f-=_),f<15&&(h+=x[r++]<<f,f+=8,h+=x[r++]<<f,f+=8),b=g[h&y];;){if(h>>>=_=b>>>24,f-=_,16&(_=b>>>16&255)){if(E=65535&b,f<(_&=15)&&(h+=x[r++]<<f,(f+=8)<_&&(h+=x[r++]<<f,f+=8)),(E+=h&(1<<_)-1)>o){e.msg="invalid distance too far back",A.mode=16209;break t}if(h>>>=_,f-=_,E>(_=a-i)){if((_=E-_)>c&&A.sane){e.msg="invalid distance too far back",A.mode=16209;break t}if(v=0,S=d,0===u){if(v+=l-_,_<w){w-=_;do T[a++]=d[v++];while(--_)v=a-E,S=T}}else if(u<_){if(v+=l+u-_,(_-=u)<w){w-=_;do T[a++]=d[v++];while(--_)if(v=0,u<w){w-=_=u;do T[a++]=d[v++];while(--_)v=a-E,S=T}}}else if(v+=u-_,_<w){w-=_;do T[a++]=d[v++];while(--_)v=a-E,S=T}for(;w>2;)T[a++]=S[v++],T[a++]=S[v++],T[a++]=S[v++],w-=3;w&&(T[a++]=S[v++],w>1&&(T[a++]=S[v++]))}else{v=a-E;do T[a++]=T[v++],T[a++]=T[v++],T[a++]=T[v++],w-=3;while(w>2)w&&(T[a++]=T[v++],w>1&&(T[a++]=T[v++]))}}else if((64&_)==0){b=g[(65535&b)+(h&(1<<_)-1)];continue}else{e.msg="invalid distance code",A.mode=16209;break t}break}else if((64&_)==0){b=p[(65535&b)+(h&(1<<_)-1)];continue}else if(32&_){A.mode=16191;break t}else{e.msg="invalid literal/length code",A.mode=16209;break t}break}while(r<n&&a<s)r-=w=f>>3,f-=w<<3,h&=(1<<f)-1,e.next_in=r,e.next_out=a,e.avail_in=r<n?5+(n-r):5-(r-n),e.avail_out=a<s?257+(s-a):257-(a-s),A.hold=h,A.bits=f}},985396,(e,t,r)=>{"use strict";let n=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),a=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),i=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),s=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);t.exports=(e,t,r,o,l,c,u,d)=>{let h,f,p,g,m,y,b,_,w,E=d.bits,v=0,S=0,x=0,T=0,A=0,k=0,I=0,C=0,B=0,O=0,N=null,P=new Uint16Array(16),D=new Uint16Array(16),R=null;for(v=0;v<=15;v++)P[v]=0;for(S=0;S<o;S++)P[t[r+S]]++;for(T=15,A=E;T>=1&&0===P[T];T--);if(A>T&&(A=T),0===T)return l[c++]=0x1400000,l[c++]=0x1400000,d.bits=1,0;for(x=1;x<T&&0===P[x];x++);for(A<x&&(A=x),C=1,v=1;v<=15;v++)if(C<<=1,(C-=P[v])<0)return -1;if(C>0&&(0===e||1!==T))return -1;for(v=1,D[1]=0;v<15;v++)D[v+1]=D[v]+P[v];for(S=0;S<o;S++)0!==t[r+S]&&(u[D[t[r+S]]++]=S);if(0===e?(N=R=u,y=20):1===e?(N=n,R=a,y=257):(N=i,R=s,y=0),O=0,S=0,v=x,m=c,k=A,I=0,p=-1,g=(B=1<<A)-1,1===e&&B>852||2===e&&B>592)return 1;for(;;){b=v-I,u[S]+1<y?(_=0,w=u[S]):u[S]>=y?(_=R[u[S]-y],w=N[u[S]-y]):(_=96,w=0),h=1<<v-I,x=f=1<<k;do l[m+(O>>I)+(f-=h)]=b<<24|_<<16|w;while(0!==f)for(h=1<<v-1;O&h;)h>>=1;if(0!==h?(O&=h-1,O+=h):O=0,S++,0==--P[v]){if(v===T)break;v=t[r+u[S]]}if(v>A&&(O&g)!==p){for(0===I&&(I=A),m+=x,C=1<<(k=v-I);k+I<T&&!((C-=P[k+I])<=0);)k++,C<<=1;if(B+=1<<k,1===e&&B>852||2===e&&B>592)return 1;l[p=O&g]=A<<24|k<<16|m-c}}return 0!==O&&(l[m+O]=v-I<<24|4194304),d.bits=A,0}},738628,(e,t,r)=>{"use strict";let n,a,i=e.r(97830),s=e.r(156641),o=e.r(398220),l=e.r(985396),{Z_FINISH:c,Z_BLOCK:u,Z_TREES:d,Z_OK:h,Z_STREAM_END:f,Z_NEED_DICT:p,Z_STREAM_ERROR:g,Z_DATA_ERROR:m,Z_MEM_ERROR:y,Z_BUF_ERROR:b,Z_DEFLATED:_}=e.r(902848),w=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function E(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}let v=e=>{if(!e)return 1;let t=e.state;return+(!t||t.strm!==e||t.mode<16180||t.mode>16211)},S=e=>{if(v(e))return g;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,h},x=e=>{if(v(e))return g;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,S(e)},T=(e,t)=>{let r;if(v(e))return g;let n=e.state;return(t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15))?g:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,x(e))},A=(e,t)=>{if(!e)return g;let r=new E;e.state=r,r.strm=e,r.window=null,r.mode=16180;let n=T(e,t);return n!==h&&(e.state=null),n},k=!0,I=e=>{if(k){n=new Int32Array(512),a=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(l(1,e.lens,0,288,n,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;l(2,e.lens,0,32,a,0,e.work,{bits:5}),k=!1}e.lencode=n,e.lenbits=9,e.distcode=a,e.distbits=5},C=(e,t,r,n)=>{let a,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>n&&(a=n),i.window.set(t.subarray(r-n,r-n+a),i.wnext),(n-=a)?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0};t.exports.inflateReset=x,t.exports.inflateReset2=T,t.exports.inflateResetKeep=S,t.exports.inflateInit=e=>A(e,15),t.exports.inflateInit2=A,t.exports.inflate=(e,t)=>{let r,n,a,E,S,x,T,A,k,B,O,N,P,D,R,L,U,V,F,H,M,$,j,z,W=0,G=new Uint8Array(4),q=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(v(e)||!e.output||!e.input&&0!==e.avail_in)return g;16191===(r=e.state).mode&&(r.mode=16192),S=e.next_out,a=e.output,T=e.avail_out,E=e.next_in,n=e.input,x=e.avail_in,A=r.hold,k=r.bits,B=x,O=T,$=h;r:for(;;)switch(r.mode){case 16180:if(0===r.wrap){r.mode=16192;break}for(;k<16;){if(0===x)break r;x--,A+=n[E++]<<k,k+=8}if(2&r.wrap&&35615===A){0===r.wbits&&(r.wbits=15),r.check=0,G[0]=255&A,G[1]=A>>>8&255,r.check=s(r.check,G,2,0),A=0,k=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&A)<<8)+(A>>8))%31){e.msg="incorrect header check",r.mode=16209;break}if((15&A)!==_){e.msg="unknown compression method",r.mode=16209;break}if(A>>>=4,k-=4,M=(15&A)+8,0===r.wbits&&(r.wbits=M),M>15||M>r.wbits){e.msg="invalid window size",r.mode=16209;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&A?16189:16191,A=0,k=0;break;case 16181:for(;k<16;){if(0===x)break r;x--,A+=n[E++]<<k,k+=8}if(r.flags=A,(255&r.flags)!==_){e.msg="unknown compression method",r.mode=16209;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=16209;break}r.head&&(r.head.text=A>>8&1),512&r.flags&&4&r.wrap&&(G[0]=255&A,G[1]=A>>>8&255,r.check=s(r.check,G,2,0)),A=0,k=0,r.mode=16182;case 16182:for(;k<32;){if(0===x)break r;x--,A+=n[E++]<<k,k+=8}r.head&&(r.head.time=A),512&r.flags&&4&r.wrap&&(G[0]=255&A,G[1]=A>>>8&255,G[2]=A>>>16&255,G[3]=A>>>24&255,r.check=s(r.check,G,4,0)),A=0,k=0,r.mode=16183;case 16183:for(;k<16;){if(0===x)break r;x--,A+=n[E++]<<k,k+=8}r.head&&(r.head.xflags=255&A,r.head.os=A>>8),512&r.flags&&4&r.wrap&&(G[0]=255&A,G[1]=A>>>8&255,r.check=s(r.check,G,2,0)),A=0,k=0,r.mode=16184;case 16184:if(1024&r.flags){for(;k<16;){if(0===x)break r;x--,A+=n[E++]<<k,k+=8}r.length=A,r.head&&(r.head.extra_len=A),512&r.flags&&4&r.wrap&&(G[0]=255&A,G[1]=A>>>8&255,r.check=s(r.check,G,2,0)),A=0,k=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&((N=r.length)>x&&(N=x),N&&(r.head&&(M=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(E,E+N),M)),512&r.flags&&4&r.wrap&&(r.check=s(r.check,n,N,E)),x-=N,E+=N,r.length-=N),r.length))break r;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===x)break r;N=0;do M=n[E+N++],r.head&&M&&r.length<65536&&(r.head.name+=String.fromCharCode(M));while(M&&N<x)if(512&r.flags&&4&r.wrap&&(r.check=s(r.check,n,N,E)),x-=N,E+=N,M)break r}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===x)break r;N=0;do M=n[E+N++],r.head&&M&&r.length<65536&&(r.head.comment+=String.fromCharCode(M));while(M&&N<x)if(512&r.flags&&4&r.wrap&&(r.check=s(r.check,n,N,E)),x-=N,E+=N,M)break r}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;k<16;){if(0===x)break r;x--,A+=n[E++]<<k,k+=8}if(4&r.wrap&&A!==(65535&r.check)){e.msg="header crc mismatch",r.mode=16209;break}A=0,k=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=16191;break;case 16189:for(;k<32;){if(0===x)break r;x--,A+=n[E++]<<k,k+=8}e.adler=r.check=w(A),A=0,k=0,r.mode=16190;case 16190:if(0===r.havedict)return e.next_out=S,e.avail_out=T,e.next_in=E,e.avail_in=x,r.hold=A,r.bits=k,p;e.adler=r.check=1,r.mode=16191;case 16191:if(t===u||t===d)break r;case 16192:if(r.last){A>>>=7&k,k-=7&k,r.mode=16206;break}for(;k<3;){if(0===x)break r;x--,A+=n[E++]<<k,k+=8}switch(r.last=1&A,k-=1,3&(A>>>=1)){case 0:r.mode=16193;break;case 1:if(I(r),r.mode=16199,t===d){A>>>=2,k-=2;break r}break;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=16209}A>>>=2,k-=2;break;case 16193:for(A>>>=7&k,k-=7&k;k<32;){if(0===x)break r;x--,A+=n[E++]<<k,k+=8}if((65535&A)!=(A>>>16^65535)){e.msg="invalid stored block lengths",r.mode=16209;break}if(r.length=65535&A,A=0,k=0,r.mode=16194,t===d)break r;case 16194:r.mode=16195;case 16195:if(N=r.length){if(N>x&&(N=x),N>T&&(N=T),0===N)break r;a.set(n.subarray(E,E+N),S),x-=N,E+=N,T-=N,S+=N,r.length-=N;break}r.mode=16191;break;case 16196:for(;k<14;){if(0===x)break r;x--,A+=n[E++]<<k,k+=8}if(r.nlen=(31&A)+257,k-=5,r.ndist=(31&(A>>>=5))+1,k-=5,r.ncode=(15&(A>>>=5))+4,A>>>=4,k-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=16209;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;k<3;){if(0===x)break r;x--,A+=n[E++]<<k,k+=8}r.lens[q[r.have++]]=7&A,A>>>=3,k-=3}for(;r.have<19;)r.lens[q[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,j={bits:r.lenbits},$=l(0,r.lens,0,19,r.lencode,0,r.work,j),r.lenbits=j.bits,$){e.msg="invalid code lengths set",r.mode=16209;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;R=(W=r.lencode[A&(1<<r.lenbits)-1])>>>24,L=W>>>16&255,U=65535&W,!(R<=k);){if(0===x)break r;x--,A+=n[E++]<<k,k+=8}if(U<16)A>>>=R,k-=R,r.lens[r.have++]=U;else{if(16===U){for(z=R+2;k<z;){if(0===x)break r;x--,A+=n[E++]<<k,k+=8}if(A>>>=R,k-=R,0===r.have){e.msg="invalid bit length repeat",r.mode=16209;break}M=r.lens[r.have-1],N=3+(3&A),A>>>=2,k-=2}else if(17===U){for(z=R+3;k<z;){if(0===x)break r;x--,A+=n[E++]<<k,k+=8}A>>>=R,k-=R,M=0,N=3+(7&A),A>>>=3,k-=3}else{for(z=R+7;k<z;){if(0===x)break r;x--,A+=n[E++]<<k,k+=8}A>>>=R,k-=R,M=0,N=11+(127&A),A>>>=7,k-=7}if(r.have+N>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=16209;break}for(;N--;)r.lens[r.have++]=M}}if(16209===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=16209;break}if(r.lenbits=9,j={bits:r.lenbits},$=l(1,r.lens,0,r.nlen,r.lencode,0,r.work,j),r.lenbits=j.bits,$){e.msg="invalid literal/lengths set",r.mode=16209;break}if(r.distbits=6,r.distcode=r.distdyn,j={bits:r.distbits},$=l(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,j),r.distbits=j.bits,$){e.msg="invalid distances set",r.mode=16209;break}if(r.mode=16199,t===d)break r;case 16199:r.mode=16200;case 16200:if(x>=6&&T>=258){e.next_out=S,e.avail_out=T,e.next_in=E,e.avail_in=x,r.hold=A,r.bits=k,o(e,O),S=e.next_out,a=e.output,T=e.avail_out,E=e.next_in,n=e.input,x=e.avail_in,A=r.hold,k=r.bits,16191===r.mode&&(r.back=-1);break}for(r.back=0;R=(W=r.lencode[A&(1<<r.lenbits)-1])>>>24,L=W>>>16&255,U=65535&W,!(R<=k);){if(0===x)break r;x--,A+=n[E++]<<k,k+=8}if(L&&(240&L)==0){for(V=R,F=L,H=U;R=(W=r.lencode[H+((A&(1<<V+F)-1)>>V)])>>>24,L=W>>>16&255,U=65535&W,!(V+R<=k);){if(0===x)break r;x--,A+=n[E++]<<k,k+=8}A>>>=V,k-=V,r.back+=V}if(A>>>=R,k-=R,r.back+=R,r.length=U,0===L){r.mode=16205;break}if(32&L){r.back=-1,r.mode=16191;break}if(64&L){e.msg="invalid literal/length code",r.mode=16209;break}r.extra=15&L,r.mode=16201;case 16201:if(r.extra){for(z=r.extra;k<z;){if(0===x)break r;x--,A+=n[E++]<<k,k+=8}r.length+=A&(1<<r.extra)-1,A>>>=r.extra,k-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;R=(W=r.distcode[A&(1<<r.distbits)-1])>>>24,L=W>>>16&255,U=65535&W,!(R<=k);){if(0===x)break r;x--,A+=n[E++]<<k,k+=8}if((240&L)==0){for(V=R,F=L,H=U;R=(W=r.distcode[H+((A&(1<<V+F)-1)>>V)])>>>24,L=W>>>16&255,U=65535&W,!(V+R<=k);){if(0===x)break r;x--,A+=n[E++]<<k,k+=8}A>>>=V,k-=V,r.back+=V}if(A>>>=R,k-=R,r.back+=R,64&L){e.msg="invalid distance code",r.mode=16209;break}r.offset=U,r.extra=15&L,r.mode=16203;case 16203:if(r.extra){for(z=r.extra;k<z;){if(0===x)break r;x--,A+=n[E++]<<k,k+=8}r.offset+=A&(1<<r.extra)-1,A>>>=r.extra,k-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=16209;break}r.mode=16204;case 16204:if(0===T)break r;if(N=O-T,r.offset>N){if((N=r.offset-N)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=16209;break}N>r.wnext?(N-=r.wnext,P=r.wsize-N):P=r.wnext-N,N>r.length&&(N=r.length),D=r.window}else D=a,P=S-r.offset,N=r.length;N>T&&(N=T),T-=N,r.length-=N;do a[S++]=D[P++];while(--N)0===r.length&&(r.mode=16200);break;case 16205:if(0===T)break r;a[S++]=r.length,T--,r.mode=16200;break;case 16206:if(r.wrap){for(;k<32;){if(0===x)break r;x--,A|=n[E++]<<k,k+=8}if(O-=T,e.total_out+=O,r.total+=O,4&r.wrap&&O&&(e.adler=r.check=r.flags?s(r.check,a,O,S-O):i(r.check,a,O,S-O)),O=T,4&r.wrap&&(r.flags?A:w(A))!==r.check){e.msg="incorrect data check",r.mode=16209;break}A=0,k=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;k<32;){if(0===x)break r;x--,A+=n[E++]<<k,k+=8}if(4&r.wrap&&A!==(0|r.total)){e.msg="incorrect length check",r.mode=16209;break}A=0,k=0}r.mode=16208;case 16208:$=f;break r;case 16209:$=m;break r;case 16210:return y;default:return g}return e.next_out=S,e.avail_out=T,e.next_in=E,e.avail_in=x,r.hold=A,r.bits=k,(r.wsize||O!==e.avail_out&&r.mode<16209&&(r.mode<16206||t!==c))&&C(e,e.output,e.next_out,O-e.avail_out),B-=e.avail_in,O-=e.avail_out,e.total_in+=B,e.total_out+=O,r.total+=O,4&r.wrap&&O&&(e.adler=r.check=r.flags?s(r.check,a,O,e.next_out-O):i(r.check,a,O,e.next_out-O)),e.data_type=r.bits+64*!!r.last+128*(16191===r.mode)+256*(16199===r.mode||16194===r.mode),(0===B&&0===O||t===c)&&$===h&&($=b),$},t.exports.inflateEnd=e=>{if(v(e))return g;let t=e.state;return t.window&&(t.window=null),e.state=null,h},t.exports.inflateGetHeader=(e,t)=>{if(v(e))return g;let r=e.state;return(2&r.wrap)==0?g:(r.head=t,t.done=!1,h)},t.exports.inflateSetDictionary=(e,t)=>{let r,n=t.length;return v(e)||0!==(r=e.state).wrap&&16190!==r.mode?g:16190===r.mode&&i(1,t,n,0)!==r.check?m:C(e,t,n,n)?(r.mode=16210,y):(r.havedict=1,h)},t.exports.inflateInfo="pako inflate (from Nodeca project)"},485633,(e,t,r)=>{"use strict";t.exports=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1}},382533,(e,t,r)=>{"use strict";let n=e.r(738628),a=e.r(330843),i=e.r(21789),s=e.r(532187),o=e.r(3483),l=e.r(485633),c=Object.prototype.toString,{Z_NO_FLUSH:u,Z_FINISH:d,Z_OK:h,Z_STREAM_END:f,Z_NEED_DICT:p,Z_STREAM_ERROR:g,Z_DATA_ERROR:m,Z_MEM_ERROR:y}=e.r(902848);function b(e){this.options=a.assign({chunkSize:65536,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits)==0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new o,this.strm.avail_out=0;let r=n.inflateInit2(this.strm,t.windowBits);if(r!==h||(this.header=new l,n.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=i.string2buf(t.dictionary):"[object ArrayBuffer]"===c.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw)&&(r=n.inflateSetDictionary(this.strm,t.dictionary))!==h))throw Error(s[r])}function _(e,t){let r=new b(t);if(r.push(e),r.err)throw r.msg||s[r.err];return r.result}b.prototype.push=function(e,t){let r,a,s,o=this.strm,l=this.options.chunkSize,b=this.options.dictionary;if(this.ended)return!1;for(a=t===~~t?t:!0===t?d:u,"[object ArrayBuffer]"===c.call(e)?o.input=new Uint8Array(e):o.input=e,o.next_in=0,o.avail_in=o.input.length;;){for(0===o.avail_out&&(o.output=new Uint8Array(l),o.next_out=0,o.avail_out=l),(r=n.inflate(o,a))===p&&b&&((r=n.inflateSetDictionary(o,b))===h?r=n.inflate(o,a):r===m&&(r=p));o.avail_in>0&&r===f&&o.state.wrap>0&&0!==e[o.next_in];)n.inflateReset(o),r=n.inflate(o,a);switch(r){case g:case m:case p:case y:return this.onEnd(r),this.ended=!0,!1}if(s=o.avail_out,o.next_out&&(0===o.avail_out||r===f))if("string"===this.options.to){let e=i.utf8border(o.output,o.next_out),t=o.next_out-e,r=i.buf2string(o.output,e);o.next_out=t,o.avail_out=l-t,t&&o.output.set(o.output.subarray(e,e+t),0),this.onData(r)}else this.onData(o.output.length===o.next_out?o.output:o.output.subarray(0,o.next_out));if(r!==h||0!==s){if(r===f)return r=n.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===o.avail_in)break}}return!0},b.prototype.onData=function(e){this.chunks.push(e)},b.prototype.onEnd=function(e){e===h&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=a.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg},t.exports.Inflate=b,t.exports.inflate=_,t.exports.inflateRaw=function(e,t){return(t=t||{}).raw=!0,_(e,t)},t.exports.ungzip=_,t.exports.constants=e.r(902848)},434724,(e,t,r)=>{"use strict";let{Deflate:n,deflate:a,deflateRaw:i,gzip:s}=e.r(858863),{Inflate:o,inflate:l,inflateRaw:c,ungzip:u}=e.r(382533),d=e.r(902848);t.exports.Deflate=n,t.exports.deflate=a,t.exports.deflateRaw=i,t.exports.gzip=s,t.exports.Inflate=o,t.exports.inflate=l,t.exports.inflateRaw=c,t.exports.ungzip=u,t.exports.constants=d},387535,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.expand_message_xmd=l,r.expand_message_xof=c,r.hash_to_field=u,r.isogenyMap=function(e,t){let r=t.map(e=>Array.from(e).reverse());return(t,n)=>{let[a,i,s,o]=r.map(r=>r.reduce((r,n)=>e.add(e.mul(r,t),n)));return t=e.div(a,i),n=e.mul(n,e.div(s,o)),{x:t,y:n}}},r.createHasher=function(e,t,r){if("function"!=typeof t)throw Error("mapToCurve() must be defined");return{hashToCurve(n,a){let i=u(n,2,{...r,DST:r.DST,...a}),s=e.fromAffine(t(i[0])),o=e.fromAffine(t(i[1])),l=s.add(o).clearCofactor();return l.assertValidity(),l},encodeToCurve(n,a){let i=u(n,1,{...r,DST:r.encodeDST,...a}),s=e.fromAffine(t(i[0])).clearCofactor();return s.assertValidity(),s},mapToCurve(r){if(!Array.isArray(r))throw Error("mapToCurve: expected array of bigints");for(let e of r)if("bigint"!=typeof e)throw Error("mapToCurve: expected array of bigints");let n=e.fromAffine(t(r)).clearCofactor();return n.assertValidity(),n}}};let n=e.r(366837),a=e.r(144554),i=a.bytesToNumberBE;function s(e,t){if(o(e),o(t),e<0||e>=1<<8*t)throw Error("invalid I2OSP input: "+e);let r=Array.from({length:t}).fill(0);for(let n=t-1;n>=0;n--)r[n]=255&e,e>>>=8;return new Uint8Array(r)}function o(e){if(!Number.isSafeInteger(e))throw Error("number expected")}function l(e,t,r,n){(0,a.abytes)(e),(0,a.abytes)(t),o(r),t.length>255&&(t=n((0,a.concatBytes)((0,a.utf8ToBytes)("H2C-OVERSIZE-DST-"),t)));let{outputLen:i,blockLen:l}=n,c=Math.ceil(r/i);if(r>65535||c>255)throw Error("expand_message_xmd: invalid lenInBytes");let u=(0,a.concatBytes)(t,s(t.length,1)),d=s(0,l),h=s(r,2),f=Array(c),p=n((0,a.concatBytes)(d,e,h,s(0,1),u));f[0]=n((0,a.concatBytes)(p,s(1,1),u));for(let e=1;e<=c;e++){let t=[function(e,t){let r=new Uint8Array(e.length);for(let n=0;n<e.length;n++)r[n]=e[n]^t[n];return r}(p,f[e-1]),s(e+1,1),u];f[e]=n((0,a.concatBytes)(...t))}return(0,a.concatBytes)(...f).slice(0,r)}function c(e,t,r,n,i){if((0,a.abytes)(e),(0,a.abytes)(t),o(r),t.length>255){let e=Math.ceil(2*n/8);t=i.create({dkLen:e}).update((0,a.utf8ToBytes)("H2C-OVERSIZE-DST-")).update(t).digest()}if(r>65535||t.length>255)throw Error("expand_message_xof: invalid lenInBytes");return i.create({dkLen:r}).update(e).update(s(r,2)).update(t).update(s(t.length,1)).digest()}function u(e,t,r){let s;(0,a.validateObject)(r,{DST:"stringOrUint8Array",p:"bigint",m:"isSafeInteger",k:"isSafeInteger",hash:"hash"});let{p:u,k:d,m:h,hash:f,expand:p,DST:g}=r;(0,a.abytes)(e),o(t);let m="string"==typeof g?(0,a.utf8ToBytes)(g):g,y=Math.ceil((u.toString(2).length+d)/8),b=t*h*y;if("xmd"===p)s=l(e,m,b,f);else if("xof"===p)s=c(e,m,b,d,f);else if("_internal_pass"===p)s=e;else throw Error('expand must be "xmd" or "xof"');let _=Array(t);for(let e=0;e<t;e++){let t=Array(h);for(let r=0;r<h;r++){let a=y*(r+e*h),o=s.subarray(a,a+y);t[r]=(0,n.mod)(i(o),u)}_[e]=t}return _}},678911,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.encodeToCurve=r.hashToCurve=r.schnorr=r.secp256k1=void 0;let n=e.r(859695),a=e.r(606380),i=e.r(915316),s=e.r(387535),o=e.r(366837),l=e.r(144554),c=e.r(589569),u=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),d=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),h=BigInt(1),f=BigInt(2),p=(e,t)=>(e+t/f)/t;function g(e){let t=BigInt(3),r=BigInt(6),n=BigInt(11),a=BigInt(22),i=BigInt(23),s=BigInt(44),l=BigInt(88),c=e*e*e%u,d=c*c*e%u,h=(0,o.pow2)(d,t,u)*d%u,p=(0,o.pow2)(h,t,u)*d%u,g=(0,o.pow2)(p,f,u)*c%u,y=(0,o.pow2)(g,n,u)*g%u,b=(0,o.pow2)(y,a,u)*y%u,_=(0,o.pow2)(b,s,u)*b%u,w=(0,o.pow2)(_,l,u)*_%u,E=(0,o.pow2)(w,s,u)*b%u,v=(0,o.pow2)(E,t,u)*d%u,S=(0,o.pow2)(v,i,u)*y%u,x=(0,o.pow2)(S,r,u)*c%u,T=(0,o.pow2)(x,f,u);if(!m.eql(m.sqr(T),e))throw Error("Cannot find square root");return T}let m=(0,o.Field)(u,void 0,void 0,{sqrt:g});r.secp256k1=(0,i.createCurve)({a:BigInt(0),b:BigInt(7),Fp:m,n:d,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-h*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=BigInt("0x100000000000000000000000000000000"),i=p(t*e,d),s=p(-r*e,d),l=(0,o.mod)(e-i*t-s*n,d),c=(0,o.mod)(-i*r-s*t,d),u=l>a,f=c>a;if(u&&(l=d-l),f&&(c=d-c),l>a||c>a)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:u,k1:l,k2neg:f,k2:c}}}},n.sha256);let y=BigInt(0),b={};function _(e,...t){let r=b[e];if(void 0===r){let t=(0,n.sha256)(Uint8Array.from(e,e=>e.charCodeAt(0)));r=(0,l.concatBytes)(t,t),b[e]=r}return(0,n.sha256)((0,l.concatBytes)(r,...t))}let w=e=>e.toRawBytes(!0).slice(1),E=e=>(0,l.numberToBytesBE)(e,32),v=e=>(0,o.mod)(e,u),S=e=>(0,o.mod)(e,d),x=r.secp256k1.ProjectivePoint;function T(e){let t=r.secp256k1.utils.normPrivateKeyToScalar(e),n=x.fromPrivateKey(t);return{scalar:n.hasEvenY()?t:S(-t),bytes:w(n)}}function A(e){(0,l.aInRange)("x",e,h,u);let t=v(e*e),r=g(v(t*e+BigInt(7)));r%f!==y&&(r=v(-r));let n=new x(e,r,h);return n.assertValidity(),n}let k=l.bytesToNumberBE;function I(...e){return S(k(_("BIP0340/challenge",...e)))}function C(e,t,r){let n=(0,l.ensureBytes)("signature",e,64),a=(0,l.ensureBytes)("message",t),i=(0,l.ensureBytes)("publicKey",r,32);try{let e,t=A(k(i)),r=k(n.subarray(0,32));if(!(0,l.inRange)(r,h,u))return!1;let s=k(n.subarray(32,64));if(!(0,l.inRange)(s,h,d))return!1;let o=I(E(r),w(t),a),c=(e=S(-o),x.BASE.multiplyAndAddUnsafe(t,s,e));if(!c||!c.hasEvenY()||c.toAffine().x!==r)return!1;return!0}catch(e){return!1}}r.schnorr={getPublicKey:function(e){return T(e).bytes},sign:function(e,t,r=(0,a.randomBytes)(32)){let n=(0,l.ensureBytes)("message",e),{bytes:i,scalar:s}=T(t),o=E(s^k(_("BIP0340/aux",(0,l.ensureBytes)("auxRand",r,32)))),c=S(k(_("BIP0340/nonce",o,i,n)));if(c===y)throw Error("sign failed: k is zero");let{bytes:u,scalar:d}=T(c),h=I(u,i,n),f=new Uint8Array(64);if(f.set(u,0),f.set(E(S(d+h*s)),32),!C(f,n,i))throw Error("sign: Invalid signature produced");return f},verify:C,utils:{randomPrivateKey:r.secp256k1.utils.randomPrivateKey,lift_x:A,pointToBytes:w,numberToBytesBE:l.numberToBytesBE,bytesToNumberBE:l.bytesToNumberBE,taggedHash:_,mod:o.mod}};let B=(0,s.isogenyMap)(m,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e)))),O=(0,c.mapToCurveSimpleSWU)(m,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:m.create(BigInt("-11"))}),N=(0,s.createHasher)(r.secp256k1.ProjectivePoint,e=>{let{x:t,y:r}=O(m.create(e[0]));return B(t,r)},{DST:"secp256k1_XMD:SHA-256_SSWU_RO_",encodeDST:"secp256k1_XMD:SHA-256_SSWU_NU_",p:m.ORDER,m:1,k:128,expand:"xmd",hash:n.sha256});r.hashToCurve=N.hashToCurve,r.encodeToCurve=N.encodeToCurve},419630,e=>{"use strict";e.s(["Mixin",()=>y,"decorate",()=>m,"hasMixin",()=>u,"mix",()=>_,"settings",()=>o]);let t=(e,t,r=[])=>{let n=Object.getOwnPropertyDescriptors(t);for(let e of r)delete n[e];Object.defineProperties(e,n)},r=(e,t=[e])=>{let n=Object.getPrototypeOf(e);return null===n?t:r(n,[...t,n])},n=(e,n,a=[])=>{var i;let s=null!=(i=((...e)=>{let t;if(0===e.length)return;let n=e.map(e=>r(e));for(;n.every(e=>e.length>0);){let e=n.map(e=>e.pop()),r=e[0];if(e.every(e=>e===r))t=r;else break}return t})(...e))?i:Object.prototype,o=Object.create(s),l=r(s);for(let n of e){let e=r(n);for(let r=e.length-1;r>=0;r--){let n=e[r];-1===l.indexOf(n)&&(t(o,n,["constructor",...a]),l.push(n))}}return o.constructor=n,o},a=e=>e.filter((t,r)=>e.indexOf(t)==r),i=(e,t)=>{let n=t.map(e=>r(e)),a=0,i=!0;for(;i;){i=!1;for(let r=t.length-1;r>=0;r--){let t=n[r][a];if(null!=t&&(i=!0,void 0!=Object.getOwnPropertyDescriptor(t,e)))return n[r][0]}a++}},s=(e,t=Object.prototype)=>new Proxy({},{getPrototypeOf:()=>t,setPrototypeOf(){throw Error("Cannot set prototype of Proxies created by ts-mixer")},getOwnPropertyDescriptor:(t,r)=>Object.getOwnPropertyDescriptor(i(r,e)||{},r),defineProperty(){throw Error("Cannot define new properties on Proxies created by ts-mixer")},has:(r,n)=>void 0!==i(n,e)||void 0!==t[n],get:(r,n)=>(i(n,e)||t)[n],set(t,r,n){let a=i(r,e);if(void 0===a)throw Error("Cannot set new properties on Proxies created by ts-mixer");return a[r]=n,!0},deleteProperty(){throw Error("Cannot delete properties on Proxies created by ts-mixer")},ownKeys:()=>e.map(Object.getOwnPropertyNames).reduce((e,t)=>t.concat(e.filter(e=>0>t.indexOf(e))))}),o={initFunction:null,staticsStrategy:"copy",prototypeStrategy:"copy",decoratorInheritance:"deep"},l=new WeakMap,c=e=>l.get(e),u=(e,t)=>{if(e instanceof t)return!0;let n=e.constructor,a=new Set,i=new Set;for(i.add(n);i.size>0;){if(i.has(t))return!0;i.forEach(e=>a.add(e));let e=new Set;i.forEach(t=>{var n;let s=null!=(n=l.get(t))?n:r(t.prototype).map(e=>e.constructor).filter(e=>null!==e);s&&s.forEach(t=>{a.has(t)||i.has(t)||e.add(t)})}),i=e}return!1},d=(e,t)=>{var r,n;let i=a([...Object.getOwnPropertyNames(e),...Object.getOwnPropertyNames(t)]),s={};for(let o of i)s[o]=a([...null!=(r=null==e?void 0:e[o])?r:[],...null!=(n=null==t?void 0:t[o])?n:[]]);return s},h=(e,t)=>{var r,n,a,i;return{property:d(null!=(r=null==e?void 0:e.property)?r:{},null!=(n=null==t?void 0:t.property)?n:{}),method:d(null!=(a=null==e?void 0:e.method)?a:{},null!=(i=null==t?void 0:t.method)?i:{})}},f=(e,t)=>{var r,n,i,s,o,l;return{class:a([...null!=(r=null==e?void 0:e.class)?r:[],...null!=(n=null==t?void 0:t.class)?n:[]]),static:h(null!=(i=null==e?void 0:e.static)?i:{},null!=(s=null==t?void 0:t.static)?s:{}),instance:h(null!=(o=null==e?void 0:e.instance)?o:{},null!=(l=null==t?void 0:t.instance)?l:{})}},p=new Map,g=e=>{let t=p.get(e);return t||(t={},p.set(e,t)),t},m=e=>(...t)=>1===t.length?(e=>t=>{let r=g(t),n=r.class;return n||(r.class=n=[]),n.push(e),e(t)})(e)(t[0]):(e=>(t,r,...n)=>{var a,i,s;let o="function"==typeof t?"static":"instance",l="function"==typeof t[r]?"method":"property",c=g("static"===o?t:t.constructor),u=null!=(a=null==c?void 0:c[o])?a:{};c[o]=u;let d=null!=(i=null==u?void 0:u[l])?i:{};u[l]=d;let h=null!=(s=null==d?void 0:d[r])?s:[];return d[r]=h,h.push(e),e(t,r,...n)})(e)(...t);function y(...e){var a,i,u;let d,h=e.map(e=>e.prototype),m=o.initFunction;if(null!==m){let e=h.map(e=>e[m]).filter(e=>"function"==typeof e);h.push({[m]:function(...t){for(let r of e)r.apply(this,t)}})}function _(...r){for(let n of e)t(this,new n(...r));null!==m&&"function"==typeof this[m]&&this[m].apply(this,r)}_.prototype="copy"===o.prototypeStrategy?n(h,_):s([...h,{constructor:_}]),Object.setPrototypeOf(_,"copy"===o.staticsStrategy?n(e,null,["prototype"]):s(e,Function.prototype));let w=_;if("none"!==o.decoratorInheritance){let t="deep"===o.decoratorInheritance?((...e)=>{let t=((...e)=>{var t;let n=new Set,a=new Set([...e]);for(;a.size>0;)for(let e of a){for(let i of[...r(e.prototype).map(e=>e.constructor),...null!=(t=c(e))?t:[]].filter(e=>!n.has(e)))a.add(i);n.add(e),a.delete(e)}return[...n]})(...e).map(e=>p.get(e)).filter(e=>!!e);return 0==t.length?{}:1==t.length?t[0]:t.reduce((e,t)=>f(e,t))})(...e):((...e)=>{let t=e.map(e=>g(e));return 0===t.length?{}:1===t.length?t[0]:t.reduce((e,t)=>f(e,t))})(...e);for(let e of null!=(a=null==t?void 0:t.class)?a:[]){let t=e(w);t&&(w=t)}b(null!=(i=null==t?void 0:t.static)?i:{},w),b(null!=(u=null==t?void 0:t.instance)?u:{},w.prototype)}return d=w,l.set(d,e),w}let b=(e,t)=>{let r=e.property,n=e.method;if(r)for(let e in r)for(let n of r[e])n(t,e);if(n)for(let e in n)for(let r of n[e])r(t,e,Object.getOwnPropertyDescriptor(t,e))},_=(...e)=>t=>{let r=y(...e.concat([t]));return Object.defineProperty(r,"name",{value:t.name,writable:!1}),r}},84642,(e,t,r)=>{"use strict";var n=Object.create,a=Object.defineProperty,i=Object.getOwnPropertyDescriptor,s=Object.getOwnPropertyNames,o=Object.getPrototypeOf,l=Object.prototype.hasOwnProperty,c=(e,t)=>{for(var r in t)a(e,r,{get:t[r],enumerable:!0})},u=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let o of s(t))l.call(e,o)||o===r||a(e,o,{get:()=>t[o],enumerable:!(n=i(t,o))||n.enumerable});return e},d=(e,t,r)=>(r=null!=e?n(o(e)):{},u(!t&&e&&e.__esModule?r:a(r,"default",{value:e,enumerable:!0}),e)),h={};c(h,{Account:()=>st,AccountInterface:()=>sr,BatchClient:()=>eW,BlockStatus:()=>eb,BlockTag:()=>e_,CairoCustomEnum:()=>rm,CairoFixedArray:()=>rI,CairoOption:()=>rb,CairoOptionVariant:()=>ry,CairoResult:()=>rw,CairoResultVariant:()=>r_,CairoUint256:()=>tq,CairoUint512:()=>tX,CallData:()=>rj,Contract:()=>sE,ContractFactory:()=>sS,ContractInterface:()=>sv,EDAMode:()=>eT,EDataAvailabilityMode:()=>ex,ETH_ADDRESS:()=>eP,ETransactionExecutionStatus:()=>eC,ETransactionStatus:()=>eI,ETransactionVersion:()=>eE,ETransactionVersion2:()=>ev,ETransactionVersion3:()=>eS,EntryPointType:()=>ep,EthSigner:()=>iI,LedgerSigner:()=>iC,LedgerSigner111:()=>iC,LedgerSigner221:()=>iL,LedgerSigner231:()=>iV,LibraryError:()=>n8,Literal:()=>eN,LogLevelIndex:()=>eu,NON_ZERO_PREFIX:()=>eD,OutsideExecutionTypesV1:()=>eR,OutsideExecutionTypesV2:()=>eL,OutsideExecutionVersion:()=>eU,PaymasterInterface:()=>i9,PaymasterRpc:()=>i7,Provider:()=>ib,ProviderInterface:()=>i_,RPC:()=>p,RPC07:()=>eh,RPC08:()=>aS,RPCResponseParser:()=>aB,ReceiptTx:()=>aO,ResponseParser:()=>sx,RpcChannel:()=>aT,RpcError:()=>n4,RpcProvider:()=>ib,Signer:()=>iv,SignerInterface:()=>iE,Subscription:()=>aI,TimeoutError:()=>n7,TransactionExecutionStatus:()=>ey,TransactionFinalityStatus:()=>em,TransactionType:()=>eg,TypedDataRevision:()=>eV.TypedDataRevision,UINT_128_MAX:()=>tH,UINT_128_MIN:()=>tZ,UINT_256_HIGH_MAX:()=>tz,UINT_256_HIGH_MIN:()=>tG,UINT_256_LOW_MAX:()=>tj,UINT_256_LOW_MIN:()=>tW,UINT_256_MAX:()=>tM,UINT_256_MIN:()=>t$,UINT_512_MAX:()=>tK,UINT_512_MIN:()=>tY,Uint:()=>eO,ValidateType:()=>eB,WalletAccount:()=>sy,WebSocketChannel:()=>aC,WebSocketNotConnectedError:()=>n9,addAddressPadding:()=>iN,byteArray:()=>tR,cairo:()=>tV,config:()=>ec,constants:()=>f,contractClassResponseToLegacyCompiledContract:()=>n5,defaultPaymaster:()=>se,defaultProvider:()=>iw,ec:()=>rq,encode:()=>_,eth:()=>ae,events:()=>iF,extractContractHashes:()=>n2,getCalldata:()=>sw,getChecksumAddress:()=>iD,getLedgerPathBuffer:()=>iB,getLedgerPathBuffer111:()=>iB,getLedgerPathBuffer221:()=>iU,hash:()=>rz,isPendingBlock:()=>nU,isPendingStateUpdate:()=>nF,isPendingTransaction:()=>nV,isRPC08_FeeEstimate:()=>eA,isRPC08_ResourceBounds:()=>ek,isSierra:()=>n1,isSupportedSpecVersion:()=>nD,isV3Tx:()=>nN,isVersion:()=>nP,json:()=>eF,logger:()=>ed,merkle:()=>aP,num:()=>eK,outsideExecution:()=>iz,parseCalldataField:()=>rO,paymaster:()=>i0,provider:()=>ai,selector:()=>tp,shortString:()=>tT,src5:()=>iJ,stark:()=>nC,starknetId:()=>aQ,toAnyPatchVersion:()=>nR,toApiVersion:()=>nL,transaction:()=>ap,typedData:()=>aN,types:()=>ef,uint256:()=>ix,units:()=>sT,v2hash:()=>rG,v3hash:()=>r2,validateAndParseAddress:()=>iP,validateChecksumAddress:()=>iR,wallet:()=>sn}),t.exports=u(a({},"__esModule",{value:!0}),h);var f={};c(f,{ADDR_BOUND:()=>j,API_VERSION:()=>H,BaseUrl:()=>ee,DEFAULT_GLOBAL_CONFIG:()=>ei,HARDENING_4BYTES:()=>Q,HARDENING_BYTE:()=>J,IS_BROWSER:()=>E,MASK_250:()=>V,MASK_31:()=>F,MAX_STORAGE_ITEM_SIZE:()=>$,NetworkName:()=>et,OutsideExecutionCallerAny:()=>Y,PAYMASTER_RPC_NODES:()=>eo,PRIME:()=>M,RANGE_FELT:()=>W,RANGE_I128:()=>G,RANGE_U128:()=>q,RPC_DEFAULT_NODES:()=>es,SNIP9_V1_INTERFACE_ID:()=>Z,SNIP9_V2_INTERFACE_ID:()=>X,SYSTEM_MESSAGES:()=>el,StarknetChainId:()=>er,SupportedRpcVersion:()=>ea,TEXT_TO_FELT_MAX_LEN:()=>R,TRANSACTION_VERSION:()=>L,TransactionHashPrefix:()=>en,UDC:()=>K,ZERO:()=>U});var p={};c(p,{JRPC:()=>g,PAYMASTER_API:()=>b.PAYMASTER_API,RPCSPEC07:()=>m,RPCSPEC08:()=>y});var g={},m=d(e.r(275790)),y=d(e.r(425909)),b=e.r(425909);((e,t,r)=>(u(e,t,"default"),r&&u(r,t,"default")))(p,e.r(425909));var _={};c(_,{IS_BROWSER:()=>E,addHexPrefix:()=>I,arrayBufferToString:()=>v,atobUniversal:()=>x,btoaUniversal:()=>T,buf2hex:()=>A,calcByteLength:()=>B,concatenateArrayBuffer:()=>D,padLeft:()=>C,pascalToSnake:()=>P,removeHexPrefix:()=>k,sanitizeBytes:()=>O,sanitizeHex:()=>N,utf8ToArray:()=>S});var w=e.r(479328),E=!1;function v(e){return new Uint8Array(e).reduce((e,t)=>e+String.fromCharCode(t),"")}function S(e){return new TextEncoder().encode(e)}function x(e){return w.base64.decode(e)}function T(e){return w.base64.encode(new Uint8Array(e))}function A(e){return e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}function k(e){return e.replace(/^0x/i,"")}function I(e){return`0x${k(e)}`}function C(e,t,r="0"){return function(e,t,r,n="0"){let a=t-e.length,i=e;if(a>0){let t=n.repeat(a);i=r?t+e:e+t}return i}(e,t,!0,r)}function B(e,t=8){let{length:r}=e,n=r%t;return n?(r-n)/t*t+t:r}function O(e,t=8,r="0"){return C(e,B(e,t),r)}function N(e){let t=O(k(e),2);return t?I(t):t}var P=e=>/[a-z]/.test(e)?e.split(/(?=[A-Z])/).join("_").toUpperCase():e;function D(e){let t=new Uint8Array(e.reduce((e,t)=>e+t.byteLength,0)),r=0;return e.forEach(e=>{t.set(e,r),r+=e.byteLength}),t}var R=31,{ETransactionVersion:L}=y,U=0n,V=2n**250n-1n,F=2n**31n-1n,H=U,M=2n**251n+17n*2n**192n+1n,$=256n,j=2n**251n-$,z=(e,t)=>({min:e,max:t}),W=z(U,M-1n),G=z(-(2n**127n),2n**127n-1n),q=z(U,2n**128n-1n),K={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},Y="0x414e595f43414c4c4552",Z="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",X="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",J=128,Q=2147483648n,ee={SN_MAIN:"https://alpha-mainnet.starknet.io",SN_SEPOLIA:"https://alpha-sepolia.starknet.io"},et={SN_MAIN:"SN_MAIN",SN_SEPOLIA:"SN_SEPOLIA"},er={SN_MAIN:"0x534e5f4d41494e",SN_SEPOLIA:"0x534e5f5345504f4c4941"},en={DECLARE:"0x6465636c617265",DEPLOY:"0x6465706c6f79",DEPLOY_ACCOUNT:"0x6465706c6f795f6163636f756e74",INVOKE:"0x696e766f6b65",L1_HANDLER:"0x6c315f68616e646c6572"},ea={"0.7.1":"0.7.1","0.8.1":"0.8.1",v0_7_1:"0.7.1",v0_8_1:"0.8.1"},ei={legacyMode:!1,rpcVersion:"0.8.1",transactionVersion:p.ETransactionVersion.V3,logLevel:"INFO",feeMarginPercentage:{bounds:{l1_gas:{max_amount:50,max_price_per_unit:50},l1_data_gas:{max_amount:50,max_price_per_unit:50},l2_gas:{max_amount:50,max_price_per_unit:50}},maxFee:50},fetch:void 0,websocket:void 0},es={SN_MAIN:["https://starknet-mainnet.public.blastapi.io/rpc/"],SN_SEPOLIA:["https://starknet-sepolia.public.blastapi.io/rpc/"]},eo={SN_MAIN:["https://starknet.paymaster.avnu.fi"],SN_SEPOLIA:["https://sepolia.paymaster.avnu.fi"]},el={legacyTxWarningMessage:"You are using a deprecated transaction version (V0,V1,V2)!\nUpdate to the latest V3 transactions!",legacyTxRPC08Message:"RPC 0.8 do not support legacy transactions",SWOldV3:"RPC 0.7 V3 tx (improper resource bounds) not supported in RPC 0.8",channelVersionMismatch:"Channel specification version is not compatible with the connected node Specification Version",unsupportedSpecVersion:"The connected node specification version is not supported by this library",maxFeeInV3:"maxFee is not supported in V3 transactions, use resourceBounds instead"},ec=(class e{static instance;config;constructor(){this.initialize()}initialize(){this.config={...ei}}static getInstance(){return e.instance||(e.instance=new e),e.instance}get(e,t){return this.config[e]??t}set(e,t){this.config[e]=t}update(e){this.config={...this.config,...e}}getAll(){return{...this.config}}reset(){this.initialize()}delete(e){delete this.config[e]}hasKey(e){return e in this.config}}).getInstance(),eu={DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,OFF:0},ed=(class e{static instance;config;constructor(){this.config=ec}static getInstance(){return e.instance||(e.instance=new e),e.instance}getTimestamp(){return new Date().toISOString()}shouldLog(e){return e<=eu[this.config.get("logLevel","INFO")]}formatMessage(e){let{level:t,message:r,timestamp:n,data:a}=e,i=`[${n}] ${t}: ${r}`;if(a)try{i+=`
${JSON.stringify(a,null,2)}`}catch(e){i+=`
[JSON.stringify Error/Circular]: ${e}`}return i}log(e,t,r){if(!this.shouldLog(eu[e]))return;let n={level:e,message:t,timestamp:this.getTimestamp(),data:r},a=this.formatMessage(n);switch(e){case"DEBUG":console.debug(a);break;case"INFO":console.info(a);break;case"WARN":console.warn(a);break;case"ERROR":case"FATAL":console.error(a);break;case"OFF":break;default:console.log(a)}}debug(e,t){this.log("DEBUG",e,t)}info(e,t){this.log("INFO",e,t)}warn(e,t){this.log("WARN",e,t)}error(e,t){this.log("ERROR",e,t)}fatal(e,t){this.log("FATAL",e,t)}setLogLevel(e){this.config.set("logLevel",e)}getLogLevel(){return this.config.get("logLevel","INFO")}getEnabledLogLevels(){return Object.keys(eu).filter(e=>this.shouldLog(eu[e])&&"OFF"!==e)}}).getInstance(),eh={};c(eh,{RpcChannel:()=>av});var ef={};c(ef,{BlockStatus:()=>eb,BlockTag:()=>e_,EDAMode:()=>eT,EDataAvailabilityMode:()=>ex,ETH_ADDRESS:()=>eP,ETransactionExecutionStatus:()=>eC,ETransactionStatus:()=>eI,ETransactionVersion:()=>eE,ETransactionVersion2:()=>ev,ETransactionVersion3:()=>eS,EntryPointType:()=>ep,Literal:()=>eN,NON_ZERO_PREFIX:()=>eD,OutsideExecutionTypesV1:()=>eR,OutsideExecutionTypesV2:()=>eL,OutsideExecutionVersion:()=>eU,RPC:()=>p,TransactionExecutionStatus:()=>ey,TransactionFinalityStatus:()=>em,TransactionType:()=>eg,TypedDataRevision:()=>eV.TypedDataRevision,Uint:()=>eO,ValidateType:()=>eB,isRPC08_FeeEstimate:()=>eA,isRPC08_ResourceBounds:()=>ek});var ep={EXTERNAL:"EXTERNAL",L1_HANDLER:"L1_HANDLER",CONSTRUCTOR:"CONSTRUCTOR"},eg={DECLARE:"DECLARE",DEPLOY:"DEPLOY",DEPLOY_ACCOUNT:"DEPLOY_ACCOUNT",INVOKE:"INVOKE_FUNCTION"},em={NOT_RECEIVED:"NOT_RECEIVED",RECEIVED:"RECEIVED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},ey={REJECTED:"REJECTED",REVERTED:"REVERTED",SUCCEEDED:"SUCCEEDED"},eb={PENDING:"PENDING",ACCEPTED_ON_L1:"ACCEPTED_ON_L1",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",REJECTED:"REJECTED"},e_={PENDING:"pending",LATEST:"latest"},ew=d(e.r(425909)),{ETransactionVersion:eE}=ew,{ETransactionVersion2:ev}=ew,{ETransactionVersion3:eS}=ew,{EDataAvailabilityMode:ex}=ew,{EDAMode:eT}=ew;function eA(e){return"l1_data_gas_consumed"in e}function ek(e){return"l1_data_gas"in e}var{ETransactionStatus:eI}=ew,{ETransactionExecutionStatus:eC}=ew,eB={DEPLOY:"DEPLOY",CALL:"CALL",INVOKE:"INVOKE"},eO={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},eN={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},eP="core::starknet::eth_address::EthAddress",eD="core::zeroable::NonZero::",eR={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},eL={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]},eU={UNSUPPORTED:"0",V1:"1",V2:"2"},eV=e.r(275790),eF={};c(eF,{parse:()=>e$,parseAlwaysAsBig:()=>ej,stringify:()=>ez});var eH=d(e.r(414322)),eM=e=>{if(!eH.isInteger(e))return parseFloat(e);let t=parseInt(e,10);return Number.isSafeInteger(t)?t:BigInt(e)},e$=e=>eH.parse(String(e),void 0,eM),ej=e=>eH.parse(String(e),void 0,eH.parseNumberAndBigInt),ez=(e,t,r,n)=>eH.stringify(e,t,r,n),eW=class{nodeUrl;headers;interval;requestId=0;pendingRequests={};batchPromises={};delayTimer;delayPromise;delayPromiseResolve;baseFetch;constructor(e){this.nodeUrl=e.nodeUrl,this.headers=e.headers,this.interval=e.interval,this.baseFetch=e.baseFetch}async wait(){return this.delayPromise&&this.delayPromiseResolve||(this.delayPromise=new Promise(e=>{this.delayPromiseResolve=e})),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout(()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)},this.interval),this.delayPromise}addPendingRequest(e,t,r){let n={id:r??`batched_${this.requestId+=1}`,jsonrpc:"2.0",method:e,params:t??void 0};return this.pendingRequests[n.id]=n,n.id}async sendBatch(e){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:ez(e),headers:this.headers})).json()}async fetch(e,t,r){let n=this.addPendingRequest(e,t,r);await this.wait();let a=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[n]){let e=this.sendBatch(Object.values(a));Object.keys(a).forEach(t=>{this.batchPromises[t]=e})}let i=await this.batchPromises[n];delete this.batchPromises[n];let s=i.find(e=>e.id===n);if(!s)throw Error(`Couldn't find the result for the request. Method: ${e}`);return s}};function eG(e,t){if(!e)throw Error(t||"Assertion failure")}function eq(e,t){if(!e)if(0===t.length)t();else throw Error("AssertionX failure: message function should not require arguments")}var eK={};c(eK,{addPercent:()=>td,assertInRange:()=>tr,bigNumberishArrayToDecimalStringArray:()=>tn,bigNumberishArrayToHexadecimalStringArray:()=>ta,cleanHex:()=>tt,getDecimalString:()=>ts,getHexString:()=>to,getHexStringArray:()=>tl,hexToBytes:()=>tu,hexToDecimalString:()=>te,isBigNumberish:()=>tf,isHex:()=>e5,isStringWholeNumber:()=>ti,stringToSha256ToArrayBuff4:()=>th,toBigInt:()=>e6,toCairoBool:()=>tc,toHex:()=>e8,toHex64:()=>e9,toHexString:()=>e4,toStorageKey:()=>e7,tryToBigInt:()=>e3});var eY=e.r(144554),eZ=e.r(859695),eX=e=>void 0===e||void 0===e;function eJ(e){return"number"==typeof e}function eQ(e){return"boolean"==typeof e}function e0(e){return"bigint"==typeof e}function e1(e){return"string"==typeof e}function e2(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function e5(e){return/^0x[0-9a-f]*$/i.test(e)}function e6(e){return BigInt(e)}function e3(e){return e?BigInt(e):void 0}function e8(e){return I(e6(e).toString(16))}var e4=e8;function e7(e){return I(e6(e).toString(16).padStart(64,"0"))}function e9(e){let t=I(e6(e).toString(16).padStart(64,"0"));if(66!==t.length)throw TypeError("number is too big for hex 0x(64) representation");return t}function te(e){return BigInt(I(e)).toString(10)}function tt(e){return e.toLowerCase().replace(/^(0x)0+/,"$1")}function tr(e,t,r,n=""){let a=""===n?"invalid length":`invalid ${n} length`,i=BigInt(e),s=BigInt(t),o=BigInt(r);eG(i>=s&&i<=o,`Message not signable, ${a}.`)}function tn(e){return e.map(e=>e6(e).toString(10))}function ta(e){return e.map(e=>e8(e))}function ti(e){return/^\d+$/.test(e)}function ts(e){if(e5(e))return te(e);if(ti(e))return e;throw Error(`${e} needs to be a hex-string or whole-number-string`)}function to(e){if(e5(e))return e;if(ti(e))return e4(e);throw Error(`${e} needs to be a hex-string or whole-number-string`)}function tl(e){return e.map(to)}function tc(e){return(+e).toString()}function tu(e){if(!e5(e))throw Error(`${e} needs to be a hex-string`);let t=k(e);return t.length%2!=0&&(t=`0${t}`),(0,eY.hexToBytes)(t)}function td(e,t){let r=BigInt(e);return r+r*BigInt(t)/100n}function th(e){return tu(e8(Number(BigInt(I(A((0,eZ.sha256)(e))))&F)))}function tf(e){return eJ(e)||e0(e)||e1(e)&&(e5(e)||ti(e))}var tp={};c(tp,{getL1MessageHash:()=>tx,getL2MessageHash:()=>tS,getSelector:()=>tE,getSelectorFromName:()=>tw,keccakBn:()=>tb,solidityUint256PackedKeccak256:()=>tv,starknetKeccak:()=>t_});var tg=e.r(499369),tm=e.r(996723),ty=e.r(144554);function tb(e){let t=k(e8(BigInt(e))),r=t.length%2==0?t:`0${t}`;return I((0,tg.keccak)(tu(I(r))).toString(16))}function t_(e){return BigInt(I((0,tg.keccak)(S(e)).toString(16)))&V}function tw(e){return e8(t_(e))}function tE(e){return eJ(e)||e0(e)?e8(e):e5(e)?e:ti(e)?e8(e):tw(e)}function tv(e){let t=I(e.reduce((e,t)=>e+k(e8(t)).padStart(64,"0"),""));return I((0,ty.bytesToHex)((0,tm.keccak_256)(tu(t))))}function tS(e,t,r,n,a){return tv([e,t,a,r,n.length,...n])}function tx(e,t,r){return tv([e,t,r.length,...r])}var tT={};function tA(e){return/^[\x00-\x7F]*$/.test(e)}function tk(e){return e.length<=R}function tI(e){return/^[0-9]*$/i.test(e)}function tC(e){return e1(e)&&!e5(e)&&!ti(e)}c(tT,{decodeShortString:()=>tD,encodeShortString:()=>tP,isASCII:()=>tA,isDecimalString:()=>tI,isLongText:()=>tO,isShortString:()=>tk,isShortText:()=>tB,isText:()=>tC,splitLongString:()=>tN});var tB=e=>tC(e)&&tk(e),tO=e=>tC(e)&&!tk(e);function tN(e){let t=RegExp(`[^]{1,${R}}`,"g");return e.match(t)||[]}function tP(e){if(!tA(e))throw Error(`${e} is not an ASCII string`);if(!tk(e))throw Error(`${e} is too long`);return I(e.replace(/./g,e=>e.charCodeAt(0).toString(16)))}function tD(e){if(!tA(e))throw Error(`${e} is not an ASCII string`);if(e5(e))return k(e).replace(/.{2}/g,e=>String.fromCharCode(parseInt(e,16)));if(tI(e))return tD("0X".concat(BigInt(e).toString(16)));throw Error(`${e} is not Hex or decimal`)}var tR={};function tL(e){let t=0n===BigInt(e.pending_word)?"":tD(e8(e.pending_word));return e.data.reduce((e,t)=>e+(0n===BigInt(t)?"":tD(e8(t))),"")+t}function tU(e){let t=tN(e),r=t[t.length-1],n=t.map(tP),[a,i]=void 0===r||31===r.length?["0x00",0]:[n.pop(),r.length];return{data:0===n.length?[]:n,pending_word:a,pending_word_len:i}}c(tR,{byteArrayFromString:()=>tU,stringFromByteArray:()=>tL});var tV={};function tF(e){if(e0(e)||Number.isInteger(e))return e.toString();if(e1(e)){if(e5(e))return BigInt(e).toString();if(tC(e)){if(!tk(e))throw Error(`${e} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(tP(e)).toString()}if(ti(e))return e}if(eQ(e))return`${+e}`;throw Error(`${e} can't be computed by felt()`)}c(tV,{felt:()=>rg,getAbiContractVersion:()=>rd,getArrayType:()=>rl,isCairo1Abi:()=>rc,isCairo1Type:()=>ro,isLen:()=>tJ,isTypeArray:()=>t0,isTypeBool:()=>re,isTypeByteArray:()=>ra,isTypeBytes31:()=>rn,isTypeContractAddress:()=>rt,isTypeEnum:()=>t6,isTypeEthAddress:()=>rr,isTypeFelt:()=>tQ,isTypeLiteral:()=>t9,isTypeNamedTuple:()=>t2,isTypeNonZero:()=>ru,isTypeOption:()=>t3,isTypeResult:()=>t8,isTypeSecp256k1Point:()=>rs,isTypeStruct:()=>t5,isTypeTuple:()=>t1,isTypeU96:()=>ri,isTypeUint:()=>t4,isTypeUint256:()=>t7,tuple:()=>rp,uint256:()=>rh,uint512:()=>rf});var tH=(1n<<128n)-1n,tM=(1n<<256n)-1n,t$=0n,tj=0xffffffffffffffffffffffffffffffffn,tz=0xffffffffffffffffffffffffffffffffn,tW=0n,tG=0n,tq=class e{low;high;static abiSelector="core::integer::u256";constructor(...t){if("object"==typeof t[0]&&1===t.length&&"low"in t[0]&&"high"in t[0]){let r=e.validateProps(t[0].low,t[0].high);this.low=r.low,this.high=r.high}else if(1===t.length){let r=e.validate(t[0]);this.low=r&tH,this.high=r>>128n}else if(2===t.length){let r=e.validateProps(t[0],t[1]);this.low=r.low,this.high=r.high}else throw Error("Incorrect constructor parameters")}static validate(e){let t=BigInt(e);if(t<t$)throw Error("bigNumberish is smaller than UINT_256_MIN");if(t>tM)throw Error("bigNumberish is bigger than UINT_256_MAX");return t}static validateProps(e,t){let r=BigInt(e),n=BigInt(t);if(r<tW||r>tj)throw Error("low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX");if(n<tG||n>tz)throw Error("high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX");return{low:r,high:n}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:I(this.low.toString(16)),high:I(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[tF(this.low),tF(this.high)]}},tK=(1n<<512n)-1n,tY=0n,tZ=0n,tX=class e{limb0;limb1;limb2;limb3;static abiSelector="core::integer::u512";constructor(...t){if("object"==typeof t[0]&&1===t.length&&"limb0"in t[0]&&"limb1"in t[0]&&"limb2"in t[0]&&"limb3"in t[0]){let r=e.validateProps(t[0].limb0,t[0].limb1,t[0].limb2,t[0].limb3);this.limb0=r.limb0,this.limb1=r.limb1,this.limb2=r.limb2,this.limb3=r.limb3}else if(1===t.length){let r=e.validate(t[0]);this.limb0=r&tH,this.limb1=(r&tH<<128n)>>128n,this.limb2=(r&tH<<256n)>>256n,this.limb3=r>>384n}else if(4===t.length){let r=e.validateProps(t[0],t[1],t[2],t[3]);this.limb0=r.limb0,this.limb1=r.limb1,this.limb2=r.limb2,this.limb3=r.limb3}else throw Error("Incorrect Uint512 constructor parameters")}static validate(e){let t=BigInt(e);if(t<tY)throw Error("bigNumberish is smaller than UINT_512_MIN.");if(t>tK)throw Error("bigNumberish is bigger than UINT_512_MAX.");return t}static validateProps(e,t,r,n){let a=BigInt(e),i=BigInt(t),s=BigInt(r),o=BigInt(n);return[a,i,s,o].forEach((e,t)=>{if(e<tZ||e>tH)throw Error(`limb${t} is not in the range of a u128 number`)}),{limb0:a,limb1:i,limb2:s,limb3:o}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:I(this.limb0.toString(16)),limb1:I(this.limb1.toString(16)),limb2:I(this.limb2.toString(16)),limb3:I(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[tF(this.limb0),tF(this.limb1),tF(this.limb2),tF(this.limb3)]}},tJ=e=>/_len$/.test(e),tQ=e=>"felt"===e||"core::felt252"===e,t0=e=>/\*/.test(e)||e.startsWith("core::array::Array::")||e.startsWith("core::array::Span::"),t1=e=>/^\(.*\)$/i.test(e),t2=e=>/\(.*\)/i.test(e)&&e.includes(":"),t5=(e,t)=>e in t,t6=(e,t)=>e in t,t3=e=>e.startsWith("core::option::Option::"),t8=e=>e.startsWith("core::result::Result::"),t4=e=>Object.values(eO).includes(e),t7=e=>tq.isAbiType(e),t9=e=>Object.values(eN).includes(e),re=e=>"core::bool"===e,rt=e=>e===eN.ContractAddress,rr=e=>e===eP,rn=e=>"core::bytes_31::bytes31"===e,ra=e=>"core::byte_array::ByteArray"===e,ri=e=>"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"===e,rs=e=>e===eN.Secp256k1Point,ro=e=>e.includes("::"),rl=e=>ro(e)?e.substring(e.indexOf("<")+1,e.lastIndexOf(">")):e.replace("*","");function rc(e){let{cairo:t}=rd(e);if(void 0===t)throw Error("Unable to determine Cairo version");return"1"===t}function ru(e){return e.startsWith(eD)}function rd(e){if(e.find(e=>"interface"===e.type))return{cairo:"1",compiler:"2"};let t=e.find(e=>("function"===e.type||"constructor"===e.type)&&(e.inputs.length||e.outputs.length));return t?ro((t.inputs.length?t.inputs:t.outputs)[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}:{cairo:void 0,compiler:void 0}}var rh=e=>new tq(e).toUint256DecimalString(),rf=e=>new tX(e).toUint512DecimalString(),rp=(...e)=>({...e});function rg(e){return tF(e)}var rm=class{variant;constructor(e){let t=Object.values(e);if(0===t.length)throw Error("This Enum must have at least 1 variant");if(1!==t.filter(e=>!eX(e)).length)throw Error("This Enum must have exactly one active variant");this.variant=e}unwrap(){return Object.values(this.variant).find(e=>!eX(e))}activeVariant(){let e=Object.entries(this.variant).find(e=>!eX(e[1]));return eX(e)?"":e[0]}},ry={Some:0,None:1},rb=class{Some;None;constructor(e,t){if(!(e in Object.values(ry)))throw Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(e===ry.Some){if(eX(t))throw Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=t,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){return this.None?void 0:this.Some}isSome(){return!eX(this.Some)}isNone(){return!0===this.None}},r_={Ok:0,Err:1},rw=class{Ok;Err;constructor(e,t){if(!(e in Object.values(r_)))throw Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");e===r_.Ok?(this.Ok=t,this.Err=void 0):(this.Ok=void 0,this.Err=t)}unwrap(){if(!eX(this.Ok))return this.Ok;if(!eX(this.Err))return this.Err;throw Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!eX(this.Ok)}isErr(){return!eX(this.Err)}},rE={isBN:(e,t,r)=>{if(!e0(e[r]))throw Error(`Data and formatter mismatch on ${r}:${t[r]}, expected response data ${r}:${e[r]} to be BN instead it is ${typeof e[r]}`)},unknown:(e,t,r)=>{throw Error(`Unhandled formatter type on ${r}:${t[r]} for data ${r}:${e[r]}`)}},rv=class{abi;constructor(e){this.abi=e}methodInputsLength(e){return e.inputs.reduce((e,t)=>tJ(t.name)?e:e+1,0)}getMethod(e){return this.abi.find(t=>t.name===e)}getLegacyFormat(){return this.abi}},rS=class{abi;constructor(e){this.abi=e}methodInputsLength(e){return e.inputs.length}getMethod(e){let t=this.abi.find(e=>"interface"===e.type);return t?.items?.find(t=>t.name===e)}getLegacyFormat(){return this.abi.flatMap(e=>"interface"===e.type?e.items:e)}};function rx(e){var t;let r=(t=e).find(e=>"interface"===e.type)?2:+!!rc(t);if(0===r||1===r)return new rv(e);if(2===r)return new rS(e);throw Error(`Unsupported ABI version ${r}`)}function rT(e,t,r){return"constructor"===e&&!r&&!t.length}function rA(e,t,r){for(let n=0,a=0;n<e.length;n++)if(e[n]===t)a++;else if(e[n]===r&&0==--a)return n;return 1/0}function rk(e){return ro(e)?function(e){let t,r=e.slice(1,-1),n=[],a=0;for(;a<r.length;){switch(!0){case"("===r[a]:t=a+rA(r.slice(a),"(",")")+1;break;case r.startsWith("core::result::Result::<",a)||r.startsWith("core::array::Array::<",a)||r.startsWith("core::option::Option::<",a):t=a+rA(r.slice(a),"<",">")+1;break;default:{let e=r.indexOf(",",a);t=-1!==e?e:1/0}}n.push(r.slice(a,t)),a=t+2}return n}(e):function(e){let{subTuple:t,result:r}=function(e){if(!e.includes("("))return{subTuple:[],result:e};let t=[],r="",n=0;for(;n<e.length;){if("("===e[n]){let a=1,i=n;for(n++;a;)")"===e[n]&&a--,"("===e[n]&&a++,n++;t.push(e.substring(i,n)),r+=" ",n--}else r+=e[n];n++}return{subTuple:t,result:r}}(e.replace(/\s/g,"").slice(1,-1)),n=r.split(",").map(e=>t.length?e.replace(" ",t.shift()):e);return t2(e)&&(n=n.reduce((e,t)=>e.concat(function(e){let t=e.substring(0,e.indexOf(":")),r=e.substring(t.length+1);return{name:t,type:r}}(t)),[])),n}(e)}var rI=class e{content;arrayType;constructor(t,r){eG(e.isTypeFixedArray(r),`The type ${r} is not a Cairo fixed array. Needs [type; length].`);try{e.getFixedArrayType(r)}catch{throw Error(`The type ${r} do not includes any content type. Needs [type; length].`)}try{e.getFixedArraySize(r)}catch{throw Error(`The type ${r} type do not includes any length. Needs [type; length].`)}eG(e.getFixedArraySize(r)===t.length,`The ABI type ${r} is expecting ${e.getFixedArraySize(r)} items. ${t.length} items provided.`),this.content=t,this.arrayType=r}static getFixedArraySize(e){let t=e.match(/(?<=; )\d+(?=\])/);if(null===t)throw Error(`ABI type ${e} do not includes a valid number after ';' character.`);return Number(t[0])}getFixedArraySize(){return e.getFixedArraySize(this.arrayType)}static getFixedArrayType=e=>{let t=e.match(/(?<=\[).+(?=;)/);if(null===t)throw Error(`ABI type ${e} do not includes a valid type of data.`);return t[0]};getFixedArrayType(){return e.getFixedArrayType(this.arrayType)}static compile(e){return e.reduce((e,t,r)=>(e[r]=t,e),{})}compile(){return e.compile(this.content)}static isTypeFixedArray(e){return/^\[.*;\s.*\]$/.test(e)&&/(?<=\[).+(?=;)/.test(e)&&/(?<=; )\d+(?=\])/.test(e)}};function rC(e,t){switch(!0){case tq.isAbiType(e):return new tq(t).toApiRequest();case tX.isAbiType(e):return new tX(t).toApiRequest();case rn(e):return tP(t.toString());case rs(e):{let e=k(e8(t)).padStart(128,"0"),r=rh(I(e.slice(-64))),n=rh(I(e.slice(0,-64)));return[tF(n.low),tF(n.high),tF(r.low),tF(r.high)]}default:return tF(t)}}function rB(e,t,r,n){if(void 0===e)throw Error(`Missing parameter for type ${t}`);if(rI.isTypeFixedArray(t)){let a=rI.getFixedArrayType(t),i=[];if(Array.isArray(e))i=new rI(e,t).content;else if("object"==typeof e)eG((i=Object.values(e)).length===rI.getFixedArraySize(t),`ABI type ${t}: object provided do not includes  ${rI.getFixedArraySize(t)} items. ${i.length} items provided.`);else throw Error(`ABI type ${t}: not an Array representing a cairo.fixedArray() provided.`);return i.reduce((e,t)=>e.concat(rB(t,a,r,n)),[])}if(Array.isArray(e)){let a=[];a.push(tF(e.length));let i=rl(t);return e.reduce((e,t)=>e.concat(rB(t,i,r,n)),a)}if(r[t]&&r[t].members.length){if(tq.isAbiType(t))return new tq(e).toApiRequest();if(tX.isAbiType(t))return new tX(e).toApiRequest();if(rr(t))return rC(t,e);if(ra(t)){let t=tU(e);return[t.data.length.toString(),...t.data.map(e=>e.toString()),t.pending_word.toString(),t.pending_word_len.toString()]}let{members:a}=r[t];return a.reduce((t,a)=>t.concat(rB(e[a.name],a.type,r,n)),[])}if(t1(t))return(function(e,t){let r=rk(t),n=Object.values(e);if(n.length!==r.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.
      provided: ${n}
      expected: ${r}`);return r.map((e,t)=>({element:n[t],type:e.type??e}))})(e,t).reduce((e,t)=>{let a=rB(t.element,t.type,r,n);return e.concat(a)},[]);if(tq.isAbiType(t))return new tq(e).toApiRequest();if(tX.isAbiType(t))return new tX(e).toApiRequest();if(t6(t,n)){let{variants:a}=n[t];if(t3(t)){if(e.isSome()){let t=a.find(e=>"Some"===e.name);if(eX(t))throw Error("Error in abi : Option has no 'Some' variant.");let i=t.type;if("()"===i)return ry.Some.toString();let s=rB(e.unwrap(),i,r,n);return Array.isArray(s)?[ry.Some.toString(),...s]:[ry.Some.toString(),s]}return ry.None.toString()}if(t8(t)){if(e.isOk()){let t=a.find(e=>"Ok"===e.name);if(eX(t))throw Error("Error in abi : Result has no 'Ok' variant.");let i=t.type;if("()"===i)return r_.Ok.toString();let s=rB(e.unwrap(),i,r,n);return Array.isArray(s)?[r_.Ok.toString(),...s]:[r_.Ok.toString(),s]}let t=a.find(e=>"Err"===e.name);if(eX(t))throw Error("Error in abi : Result has no 'Err' variant.");let i=t.type;if("()"===i)return r_.Err.toString();let s=rB(e.unwrap(),i,r,n);return Array.isArray(s)?[r_.Err.toString(),...s]:[r_.Err.toString(),s]}let i=e.activeVariant(),s=a.find(e=>e.name===i);if(eX(s))throw Error(`Not find in abi : Enum has no '${i}' variant.`);let o=s.type,l=a.findIndex(e=>e.name===i);if("()"===o)return l.toString();let c=rB(e.unwrap(),o,r,n);return Array.isArray(c)?[l.toString(),...c]:[l.toString(),c]}if(ru(t))return rC(rl(t),e);if("object"==typeof e)throw Error(`Parameter ${e} do not align with abi parameter ${t}`);return rC(t,e)}function rO(e,t,r,n){let{name:a,type:i}=t,{value:s}=e.next();switch(!0){case rI.isTypeFixedArray(i):if(!Array.isArray(s)&&"object"!=typeof s)throw Error(`ABI expected parameter ${a} to be an array or an object, got ${s}`);return rB(s,t.type,r,n);case t0(i):if(!Array.isArray(s)&&!tC(s))throw Error(`ABI expected parameter ${a} to be array or long string, got ${s}`);return e1(s)&&(s=tN(s)),rB(s,t.type,r,n);case ru(i):return rC(rl(i),s);case rr(i):return rC(i,s);case t5(i,r)||t1(i)||tq.isAbiType(i):case t6(i,n):return rB(s,i,r,n);default:return rC(i,s)}}function rN(e,t){switch(!0){case re(e):return!!BigInt(t.next().value);case tq.isAbiType(e):return new tq(t.next().value,t.next().value).toBigInt();case tX.isAbiType(e):let r=t.next().value,n=t.next().value;return new tX(r,n,t.next().value,t.next().value).toBigInt();case rr(e):return BigInt(t.next().value);case rn(e):return tD(t.next().value);case rs(e):let a=k(t.next().value).padStart(32,"0"),i=k(t.next().value).padStart(32,"0"),s=k(t.next().value).padStart(32,"0");return BigInt(I(i+a+k(t.next().value).padStart(32,"0")+s));default:return BigInt(t.next().value)}}function rP(e,t,r,n){if("()"===t.type)return{};if(tq.isAbiType(t.type))return new tq(e.next().value,e.next().value).toBigInt();if(tX.isAbiType(t.type)){let t=e.next().value,r=e.next().value;return new tX(t,r,e.next().value,e.next().value).toBigInt()}if(ra(t.type)){let t=[],r=BigInt(e.next().value);for(;t.length<r;)t.push(e8(e.next().value));let n=e8(e.next().value);return tL({data:t,pending_word:n,pending_word_len:BigInt(e.next().value)})}if(rI.isTypeFixedArray(t.type)){let a=[],i={name:"",type:rI.getFixedArrayType(t.type)},s=rI.getFixedArraySize(t.type);for(;a.length<s;)a.push(rP(e,i,r,n));return a}if(t0(t.type)){let a=[],i={name:"",type:rl(t.type)},s=BigInt(e.next().value);for(;a.length<s;)a.push(rP(e,i,r,n));return a}if(ru(t.type))return rP(e,{name:"",type:rl(t.type)},r,n);if(r&&t.type in r&&r[t.type])return rr(t.type)?rN(t.type,e):r[t.type].members.reduce((t,a)=>(t[a.name]=rP(e,a,r,n),t),{});if(n&&t.type in n&&n[t.type]){let a=Number(e.next().value),i=n[t.type].variants.reduce((t,i,s)=>(s===a?t[i.name]=rP(e,{name:"",type:i.type},r,n):t[i.name]=void 0,t),{});if(t.type.startsWith("core::option::Option")){let e=a===ry.Some?i.Some:void 0;return new rb(a,e)}if(t.type.startsWith("core::result::Result")){let e;return e=a===r_.Ok?i.Ok:i.Err,new rw(a,e)}return new rm(i)}if(t1(t.type))return rk(t.type).reduce((t,a,i)=>{let s=a?.name?a.name:i,o=a?.type?a.type:a;return t[s]=rP(e,{name:s,type:o},r,n),t},{});if(t0(t.type)){let a=[],i={name:"",type:rl(t.type)},s=BigInt(e.next().value);for(;a.length<s;)a.push(rP(e,i,r,n));return a}return rN(t.type,e)}function rD(e,t,r,n,a){let{name:i,type:s}=t;switch(!0){case tJ(i):return BigInt(e.next().value);case r&&s in r||t1(s):case n&&t6(s,n):case rI.isTypeFixedArray(s):return rP(e,t,r,n);case t0(s):if(ro(s))return rP(e,t,r,n);let o=[];if(a&&a[`${i}_len`]){let s=a[`${i}_len`];for(;o.length<s;)o.push(rP(e,{name:i,type:t.type.replace("*","")},r,n))}return o;case ru(s):return rP(e,t,r,n);default:return rN(s,e)}}var rR=(e,t)=>{if(eG(e1(e)||eJ(e)||e0(e),`Validate: arg ${t.name} should be a felt typed as (String, Number or BigInt)`),e1(e)&&!e5(e))return;let r=BigInt(e.toString(10));eG(r>=0n&&r<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`)},rL=(e,t)=>{let r;switch(eJ(e)&&eG(e<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),eG(e1(e)||eJ(e)||e0(e)||e2(e)&&"low"in e&&"high"in e||e2(e)&&["limb0","limb1","limb2","limb3"].every(t=>t in e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (String, Number or BigInt), but is ${typeof e} ${e}.`),t.type){case eO.u256:r=new tq(e).toBigInt();break;case eO.u512:r=new tX(e).toBigInt();break;default:r=e6(e)}switch(t.type){case eO.u8:eG(r>=0n&&r<=255n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0 - 255]`);break;case eO.u16:eG(r>=0n&&r<=65535n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 65535]`);break;case eO.u32:eG(r>=0n&&r<=4294967295n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 4294967295]`);break;case eO.u64:eG(r>=0n&&r<=2n**64n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^64-1]`);break;case eO.u128:eG(r>=0n&&r<=2n**128n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^128-1]`);break;case eO.u256:eG(r>=0n&&r<=2n**256n-1n,`Validate: arg ${t.name} is ${t.type} should be in range 0 - 2^256-1`);break;case eO.u512:eG(tX.is(r),`Validate: arg ${t.name} is ${t.type} should be in range 0 - 2^512-1`);break;case eN.ClassHash:case eN.ContractAddress:eG(r>=0n&&r<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`);break;case eN.Secp256k1Point:eG(r>=0n&&r<=2n**512n-1n,`Validate: arg ${t.name} must be ${t.type} : a 512 bits number.`);break;case eN.U96:eG(r>=0n&&r<=2n**96n-1n,`Validate: arg ${t.name} must be ${t.type} : a 96 bits number.`)}},rU=(e,t)=>{eG(eQ(e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (Boolean)`)},rV=(e,t,r)=>{if(t.type===eO.u256||t.type===eO.u512)return void rL(e,t);if(rr(t.type)){eG(!e2(e),`EthAddress type is waiting a BigNumberish. Got "${e}"`);let r=BigInt(e.toString(10));eG(r>=0n&&r<=2n**160n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^160-1]`);return}eG(e2(e),`Validate: arg ${t.name} is cairo type struct (${t.type}), and should be defined as a js object (not array)`),r[t.type].members.forEach(({name:r})=>{eG(Object.keys(e).includes(r),`Validate: arg ${t.name} should have a property ${r}`)})},rF=(e,t)=>{eG(e2(e),`Validate: arg ${t.name} is cairo type Enum (${t.type}), and should be defined as a js object (not array)`);let r=Object.getOwnPropertyNames(Object.getPrototypeOf(e)),n=[...Object.getOwnPropertyNames(e),...r];if(!(t3(t.type)&&n.includes("isSome")&&n.includes("isNone")||t8(t.type)&&n.includes("isOk")&&n.includes("isErr"))&&!(n.includes("variant")&&n.includes("activeVariant")))throw Error(`Validate Enum: argument ${t.name}, type ${t.type}, value received "${e}", is not an Enum.`)},rH=(e,t)=>{eG(e2(e),`Validate: arg ${t.name} should be a tuple (defined as object)`)},rM=(e,t,r,n)=>{let a=t0(t.type),i=a?rl(t.type):rI.getFixedArrayType(t.type);if(a&&tQ(i)&&tO(e))return;let s=[];if(a)eG(Array.isArray(e),`Validate: arg ${t.name} should be an Array`),s=e;else switch(!0){case Array.isArray(e):s=e;break;case"object"==typeof e:s=Object.values(e);break;default:throw Error(`Validate: arg ${t.name} should be an Array or an object.`)}switch(!0){case tQ(i):s.forEach(e=>rR(e,t));break;case t1(i):s.forEach(e=>rH(e,{name:t.name,type:i}));break;case t0(i):s.forEach(e=>rM(e,{name:"",type:i},r,n));break;case t5(i,r):s.forEach(e=>rV(e,{name:t.name,type:i},r));break;case t6(i,n):s.forEach(e=>rF(e,{name:t.name,type:i}));break;case t4(i)||t9(i):s.forEach(e=>rL(e,{name:"",type:i}));break;case re(i):s.forEach(e=>rU(e,t));break;default:throw Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value ${s}`)}};function r$(e,t,r,n){e.inputs.reduce((e,a)=>{let i=t[e];switch(!0){case tJ(a.name):return e;case tQ(a.type):rR(i,a);break;case rn(a.type):eG(e1(i),`Validate: arg ${a.name} should be a string.`),eG(i.length<32,`Validate: arg ${a.name} cairo typed ${a.type} should be a string of less than 32 characters.`);break;case t4(a.type)||t9(a.type):rL(i,a);break;case re(a.type):rU(i,a);break;case ra(a.type):eG(e1(i),`Validate: arg ${a.name} should be a string.`);break;case t0(a.type)||rI.isTypeFixedArray(a.type):rM(i,a,r,n);break;case t5(a.type,r):rV(i,a,r);break;case t6(a.type,n):rF(i,a);break;case t1(a.type):rH(i,a);break;case ru(a.type):let s=rl(a.type);switch(eG(t4(s)&&s!==tX.abiSelector||tQ(s),`Validate: ${a.name} type is not authorized for NonZero type.`),!0){case tQ(s):rR(i,a),eG(BigInt(i.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case t4(s):rL(i,{name:"",type:s}),s===eO.u256?eG(new tq(i).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):eG(e6(i)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw Error(`Validate Unhandled: argument ${a.name}, type ${a.type}, value "${i}"`)}break;default:throw Error(`Validate Unhandled: argument ${a.name}, type ${a.type}, value ${i}`)}return e+1},0)}var rj=class e{abi;parser;structs;enums;constructor(t){this.structs=e.getAbiStruct(t),this.enums=e.getAbiEnum(t),this.parser=rx(t),this.abi=this.parser.getLegacyFormat()}validate(e,t,r=[]){e!==eB.DEPLOY&&eG(this.abi.filter(t=>{if("function"!==t.type)return!1;let r="view"===t.stateMutability||"view"===t.state_mutability;return e===eB.INVOKE?!r:r}).map(e=>e.name).includes(t),`${e===eB.INVOKE?"invocable":"viewable"} method not found in abi`);let n=this.abi.find(r=>e===eB.DEPLOY?r.name===t&&"constructor"===r.type:r.name===t&&"function"===r.type);if(rT(t,r,n))return;let a=this.parser.methodInputsLength(n);if(r.length!==a)throw Error(`Invalid number of arguments, expected ${a} arguments, but got ${r.length}`);r$(n,r,this.structs,this.enums)}compile(e,t){let r,n=this.abi.find(t=>t.name===e);if(rT(e,t,n))return[];Array.isArray(t)?r=t:(r=Object.values(function(e,t,r,n){let a=(e,t)=>{if(rI.isTypeFixedArray(t)){var o,l=e,c=t;let r=rI.getFixedArrayType(c),n=rI.getFixedArraySize(c);if(Array.isArray(l)){if(n!==l.length)throw Error(`ABI type ${c}: array provided do not includes  ${n} items. ${l.length} items provided.`);return l.map(e=>a(e,r))}if(n!==Object.keys(l).length)throw Error(`ABI type ${c}: object provided do not includes  ${n} properties. ${Object.keys(l).length} items provided.`);return a(l,r)}if(t0(t)){var u=e,d=t;let r=rl(d);return e1(u)?u:u.map(e=>a(e,r))}if(t6(t,n))return s(e,n[t]);if(t1(t)){return o=e,rk(t).reduce((e,t,r)=>{let n,i=Object.keys(o),s=t?.type?t.type:t;return n=a(o[i[r]],s),Object.defineProperty(e,r.toString(),{enumerable:!0,value:n??o[i[r]]}),e},{})}if(rr(t)||ru(t)||ra(t)||ri(t)||rs(t))return e;if(tq.isAbiType(t)){if("object"!=typeof e)return e;if(!("low"in e&&"high"in e))throw Error(`Your object includes the property : ${t}, containing an Uint256 object without the 'low' and 'high' keys.`);return{low:e.low,high:e.high}}if(tX.isAbiType(t)){if("object"!=typeof e)return e;if(!["limb0","limb1","limb2","limb3"].every(t=>t in e))throw Error(`Your object includes the property : ${t}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`);return{limb0:e.limb0,limb1:e.limb1,limb2:e.limb2,limb3:e.limb3}}return t5(t,r)?i(e,r[t].members):e},i=(e,t)=>t.reduce((t,r)=>{let n;if("undefined"===e[r.name]&&(ro(r.type)||!tJ(r.name)))throw Error(`Your object needs a property with key : ${r.name} .`);return n=a(e[r.name],r.type),Object.defineProperty(t,r.name,{enumerable:!0,value:n??e[r.name]}),t},{}),s=(e,t)=>{if(t8(t.name)){let r=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(",")),n=t.name.substring(t.name.indexOf(",")+1,t.name.lastIndexOf(">"));return e.isOk()?new rw(r_.Ok,a(e.unwrap(),r)):new rw(r_.Err,a(e.unwrap(),n))}if(t3(t.name)){let r=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(">"));return e.isSome()?new rb(ry.Some,a(e.unwrap(),r)):new rb(ry.None,{})}return new rm(Object.fromEntries(Object.entries(e.variant).map(r=>{if(eX(r[1]))return r;let n=t.type.substring(t.type.lastIndexOf("<")+1,t.type.lastIndexOf(">"));return"()"===n?r:[r[0],a(e.unwrap(),n)]})))};return t.reduce((t,r)=>{let n;return tJ(r.name)&&!ro(r.type)?t:(n=a(e[r.name],r.type),Object.defineProperty(t,r.name,{enumerable:!0,value:n}),t)},{})}(t,n.inputs,this.structs,this.enums)),r$(n,r,this.structs,this.enums));let a=r[Symbol.iterator](),i=n.inputs.reduce((e,t)=>tJ(t.name)&&!ro(t.type)?e:e.concat(rO(a,t,this.structs,this.enums)),[]);return Object.defineProperty(i,"__compiled__",{enumerable:!1,writable:!1,value:!0}),i}static compile(e){let t,r=e=>{let t=(e,r=".")=>{let n=Array.isArray(e)?[e.length.toString(),...e]:e;return Object.entries(n).flatMap(([e,a])=>{let i=a;"entrypoint"===e?i=tw(i):tO(i)&&(i=tU(i));let s=Array.isArray(n)&&"0"===e?"$$len":e;if(e0(i))return[[`${r}${s}`,tF(i)]];if(Object(i)===i){let e=Object.getOwnPropertyNames(Object.getPrototypeOf(i)),n=[...Object.getOwnPropertyNames(i),...e];if(n.includes("isSome")&&n.includes("isNone")){let e=i,n=e.isSome()?ry.Some:ry.None;return e.isSome()?t({0:n,1:e.unwrap()},`${r}${s}.`):[[`${r}${s}`,tF(n)]]}if(n.includes("isOk")&&n.includes("isErr")){let e=i;return t({0:e.isOk()?r_.Ok:r_.Err,1:e.unwrap()},`${r}${s}.`)}if(n.includes("variant")&&n.includes("activeVariant")){let e=i,n=e.activeVariant(),a=Object.keys(e.variant).findIndex(e=>e===n);return"object"==typeof e.unwrap()&&0===Object.keys(e.unwrap()).length?[[`${r}${s}`,tF(a)]]:t({0:a,1:e.unwrap()},`${r}${s}.`)}return t(i,`${r}${s}.`)}return[[`${r}${s}`,tF(i)]]})};return Object.fromEntries(t(e))};return Object.defineProperty(t=Array.isArray(e)?Object.values(r({...e})):Object.values(r(e)),"__compiled__",{enumerable:!1,writable:!1,value:!0}),t}parse(e,t){let{outputs:r}=this.abi.find(t=>t.name===e),n=t.flat()[Symbol.iterator](),a=r.flat().reduce((e,t,r)=>{let a=t.name??r;return e[a]=rD(n,t,this.structs,this.enums,e),e[a]&&e[`${a}_len`]&&delete e[`${a}_len`],e},{});return 1===Object.keys(a).length&&0 in a?a[0]:a}format(e,t,r){return function e(t,r,n){return Object.entries(t).reduce((a,[i,s])=>{let o=n??r[i];if(!(i in r)&&!n)return a[i]=s,a;if("string"===o){if(Array.isArray(t[i])){let r=e(t[i],t[i].map(e=>o));return a[i]=Object.values(r).join(""),a}return rE.isBN(t,r,i),a[i]=tD(s),a}if("number"===o)return rE.isBN(t,r,i),a[i]=Number(s),a;if("function"==typeof o)return a[i]=o(s),a;if(Array.isArray(o)){let r=e(t[i],o,o[0]);return a[i]=Object.values(r),a}return e2(o)?a[i]=e(t[i],o):rE.unknown(t,r,i),a},{})}(this.parse(e,t),r)}static getAbiStruct(e){return e.filter(e=>"struct"===e.type).reduce((e,t)=>({...e,[t.name]:t}),{})}static getAbiEnum(e){let t=e.filter(e=>"enum"===e.type).reduce((e,t)=>({...e,[t.name]:t}),{});return delete t["core::bool"],t}static toCalldata(t=[]){return e.compile(t)}static toHex(t=[]){return e.compile(t).map(e=>e8(e))}decodeParameters(e,t){let r=Array.isArray(e)?e:[e],n=t.flat()[Symbol.iterator](),a=r.map(e=>rD(n,{name:"",type:e},this.structs,this.enums));return 1===a.length?a[0]:a}},rz={};c(rz,{calculateContractAddressFromHash:()=>nb,calculateDeclareTransactionHash:()=>nu,calculateDeployAccountTransactionHash:()=>nd,calculateInvokeTransactionHash:()=>nc,calculateL2MessageTxHash:()=>r1,computeCompiledClassHash:()=>nT,computeContractClassHash:()=>nI,computeHashOnElements:()=>ng,computeHintedClassHash:()=>nE,computeLegacyContractClassHash:()=>nv,computePedersenHash:()=>nf,computePedersenHashOnElements:()=>nm,computePoseidonHash:()=>np,computePoseidonHashOnElements:()=>ny,computeSierraContractClassHash:()=>nk,formatSpaces:()=>nw,getL1MessageHash:()=>tx,getL2MessageHash:()=>tS,getSelector:()=>tE,getSelectorFromName:()=>tw,hashByteCodeSegments:()=>nx,keccakBn:()=>tb,poseidon:()=>rW,solidityUint256PackedKeccak256:()=>tv,starknetKeccak:()=>t_});var rW=d(e.r(733742)),rG={};c(rG,{calculateDeclareTransactionHash:()=>rJ,calculateDeployAccountTransactionHash:()=>rQ,calculateL2MessageTxHash:()=>r1,calculateTransactionHash:()=>r0,calculateTransactionHashCommon:()=>rX,computeHashOnElements:()=>rZ});var rq={};c(rq,{starkCurve:()=>rK,weierstrass:()=>rY});var rK=d(e.r(499369)),rY=d(e.r(589569));function rZ(e){return[...e,e.length].reduce((e,t)=>rK.pedersen(e6(e),e6(t)),0).toString()}function rX(e,t,r,n,a,i,s,o=[]){let l=[e,t,r,n,rZ(a),i,s,...o];return rZ(l)}function rJ(e,t,r,n,a,i,s){return rX(en.DECLARE,r,t,0,[e],n,a,[i,...s?[s]:[]])}function rQ(e,t,r,n,a,i,s,o){let l=[t,n,...r];return rX(en.DEPLOY_ACCOUNT,a,e,0,l,i,s,[o])}function r0(e,t,r,n,a,i){return rX(en.INVOKE,t,e,0,r,n,a,[i])}function r1(e,t,r,n,a,i){let s=[e,...n];return rX(en.L1_HANDLER,0,t,tE(r),s,0,a,[i])}var r2={};c(r2,{calculateDeclareTransactionHash:()=>no,calculateDeployAccountTransactionHash:()=>ns,calculateInvokeTransactionHash:()=>nl,calculateTransactionHashCommon:()=>ni,encodeDataResourceBoundsL1:()=>nr,encodeResourceBoundsL1:()=>ne,encodeResourceBoundsL2:()=>nt,hashDAMode:()=>r9,hashFeeField:()=>nn,hashFeeFieldV3B3:()=>na});var r5=e.r(499369),r6=e=>e.map(e=>BigInt(e)),r3=64n+128n,r8=BigInt(tP("L1_GAS")),r4=BigInt(tP("L2_GAS")),r7=BigInt(tP("L1_DATA"));function r9(e,t){return(BigInt(e)<<32n)+BigInt(t)}function ne(e){return(r8<<r3)+(BigInt(e.l1_gas.max_amount)<<128n)+BigInt(e.l1_gas.max_price_per_unit)}function nt(e){return(r4<<r3)+(BigInt(e.l2_gas.max_amount)<<128n)+BigInt(e.l2_gas.max_price_per_unit)}function nr(e){return(r7<<r3)+(BigInt(e.l1_data_gas.max_amount)<<128n)+BigInt(e.l1_data_gas.max_price_per_unit)}function nn(e,t){let r=ne(t),n=nt(t);return(0,r5.poseidonHashMany)([BigInt(e),r,n])}function na(e,t){let r=ne(t),n=nt(t),a=nr(t);return(0,r5.poseidonHashMany)([BigInt(e),r,n,a])}function ni(e,t,r,n,a,i,s,o,l,c,u=[]){let d=ek(c)?na(i,c):nn(i,c),h=r9(o,l),f=r6([e,t,r,d,(0,r5.poseidonHashMany)(r6(s)),n,a,h,...r6(u)]);return e8((0,r5.poseidonHashMany)(f))}function ns(e,t,r,n,a,i,s,o,l,c,u,d){return ni(en.DEPLOY_ACCOUNT,a,e,i,s,u,d,o,l,c,[(0,r5.poseidonHashMany)(r6(r)),t,n])}function no(e,t,r,n,a,i,s,o,l,c,u,d){return ni(en.DECLARE,n,r,a,i,u,r6(d),o,l,c,[(0,r5.poseidonHashMany)(r6(s)),e,t])}function nl(e,t,r,n,a,i,s,o,l,c,u){return ni(en.INVOKE,t,e,n,a,c,u,s,o,l,[(0,r5.poseidonHashMany)(r6(i)),(0,r5.poseidonHashMany)(r6(r))])}function nc(e){return[p.ETransactionVersion.V3,p.ETransactionVersion.F3].includes(e.version)?nl(e.senderAddress,e.version,e.compiledCalldata,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):r0(e.senderAddress,e.version,e.compiledCalldata,e.maxFee,e.chainId,e.nonce)}function nu(e){return[p.ETransactionVersion.V3,p.ETransactionVersion.F3].includes(e.version)?no(e.classHash,e.compiledClassHash,e.senderAddress,e.version,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):rJ(e.classHash,e.senderAddress,e.version,e.maxFee,e.chainId,e.nonce,e.compiledClassHash)}function nd(e){return[p.ETransactionVersion.V3,p.ETransactionVersion.F3].includes(e.version)?ns(e.contractAddress,e.classHash,e.compiledConstructorCalldata,e.salt,e.version,e.chainId,e.nonce,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):rQ(e.contractAddress,e.classHash,e.constructorCalldata,e.salt,e.version,e.maxFee,e.chainId,e.nonce)}var nh=e.r(499369);function nf(e,t){return rK.pedersen(BigInt(e),BigInt(t))}function np(e,t){return e8(rK.poseidonHash(BigInt(e),BigInt(t)))}function ng(e){return[...e,e.length].reduce((e,t)=>rK.pedersen(BigInt(e),BigInt(t)),0).toString()}var nm=ng;function ny(e){return e8((0,nh.poseidonHashMany)(e.map(e=>BigInt(e))))}function nb(e,t,r,n){let a=ng(rj.compile(r));return e8(BigInt(ng([tF("0x535441524b4e45545f434f4e54524143545f41444452455353"),n,e,t,a]))%j)}function n_(e,t){return"attributes"===e||"accessible_scopes"===e?Array.isArray(t)&&0===t.length?void 0:t:"debug_info"===e?null:null===t?void 0:t}function nw(e){let t=!1,r=[];for(let n of e)'"'===n&&!1==(r.length>0&&"\\"===r.slice(-1)[0])&&(t=!t),t?r.push(n):r.push(":"===n?": ":","===n?", ":n);return r.join("")}function nE(e){let{abi:t,program:r}=e,n=nw(ez({abi:t,program:r},n_));return I(rK.keccak(S(n)).toString(16))}function nv(e){let t=e1(e)?e$(e):e,r=e8(H),n=ng(t.entry_points_by_type.EXTERNAL.flatMap(e=>[e.selector,e.offset])),a=ng(t.entry_points_by_type.L1_HANDLER.flatMap(e=>[e.selector,e.offset])),i=ng(t.entry_points_by_type.CONSTRUCTOR.flatMap(e=>[e.selector,e.offset])),s=ng(t.program.builtins.map(e=>tP(e))),o=nE(t),l=ng(t.program.data);return ng([r,n,a,i,s,o,l])}function nS(e){let t=e.flatMap(e=>{var t;return[BigInt(e.selector),BigInt(e.offset),(t=e.builtins,(0,nh.poseidonHashMany)(t.flatMap(e=>BigInt(tP(e)))))]});return(0,nh.poseidonHashMany)(t)}function nx(e){let t=e.bytecode.map(e=>BigInt(e)),r=e.bytecode_segment_lengths??[],n=0,a=r.flatMap(e=>{let r=t.slice(n,n+=e);return[BigInt(e),(0,nh.poseidonHashMany)(r)]});return 1n+(0,nh.poseidonHashMany)(a)}function nT(e){let t=BigInt(tP("COMPILED_CLASS_V1")),r=nS(e.entry_points_by_type.EXTERNAL),n=nS(e.entry_points_by_type.L1_HANDLER),a=nS(e.entry_points_by_type.CONSTRUCTOR),i=e.bytecode_segment_lengths?nx(e):(0,nh.poseidonHashMany)(e.bytecode.map(e=>BigInt(e)));return e8((0,nh.poseidonHashMany)([t,r,n,a,i]))}function nA(e){let t=e.flatMap(e=>[BigInt(e.selector),BigInt(e.function_idx)]);return(0,nh.poseidonHashMany)(t)}function nk(e){let t=BigInt(tP("CONTRACT_CLASS_V0.1.0")),r=nA(e.entry_points_by_type.EXTERNAL),n=nA(e.entry_points_by_type.L1_HANDLER),a=nA(e.entry_points_by_type.CONSTRUCTOR),i=function(e){let t=nw(ez(e.abi,null));return BigInt(I(rK.keccak(S(t)).toString(16)))}(e),s=(0,nh.poseidonHashMany)(e.sierra_program.map(e=>BigInt(e)));return e8((0,nh.poseidonHashMany)([t,r,n,a,i,s]))}function nI(e){let t=e1(e)?e$(e):e;return"sierra_program"in t?nk(t):nv(t)}var nC={};c(nC,{ZEROFee:()=>nK,compressProgram:()=>nH,decompressProgram:()=>nM,estimateFeeToBounds:()=>nq,estimatedFeeToMaxFee:()=>nG,formatSignature:()=>nj,getFullPublicKey:()=>n0,intDAM:()=>nY,randomAddress:()=>n$,reduceV2:()=>nQ,signatureToDecimalArray:()=>nz,signatureToHexArray:()=>nW,toFeeVersion:()=>nX,toTransactionVersion:()=>nZ,v3Details:()=>nJ});var nB=e.r(499369),nO=e.r(434724);function nN(e){let t=e.version?e8(e.version):eE.V3;return t===eE.V3||t===eE.F3}function nP(e,t){let r=e.split("."),n=t.split(".");return r.every((e,t)=>"*"===e||e===n[t])}function nD(e,t={allowAnyPatchVersion:!1}){return Object.values(ea).some(r=>nP(t.allowAnyPatchVersion?nR(r):r,e))}function nR(e){let t=e.split(".");return t.length<3?e:`${t[0]}.${t[1]}.*`}function nL(e){let[t,r]=e.replace(/^v/,"").split(".");return`v${t}_${r}`}function nU(e){return"PENDING"===e.status}function nV(e){return!("block_hash"in e)}function nF(e){return!("block_hash"in e)}function nH(e){let t=e1(e)?e:ez(e);return T((0,nO.gzip)(t))}function nM(e){return Array.isArray(e)?e:e$(v((0,nO.ungzip)(x(e))))}function n$(){let e=nB.utils.randomPrivateKey();return(0,nB.getStarkKey)(e)}function nj(e){if(!e)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(e))return e.map(e=>e8(e));try{let{r:t,s:r}=e;return[e8(t),e8(r)]}catch(e){throw Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function nz(e){return tn(nj(e))}function nW(e){return ta(nj(e))}function nG(e,t=ec.get("feeMarginPercentage").maxFee){return td(e,t)}function nq(e,t=ec.get("feeMarginPercentage").bounds,r){if(e0(e))return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},...r&&nP("0.8",r)&&{l1_data_gas:{max_amount:"0x0",max_price_per_unit:"0x0"}}};if(eA(e))return{l2_gas:{max_amount:e8(td(e.l2_gas_consumed,t.l2_gas.max_amount)),max_price_per_unit:e8(td(e.l2_gas_price,t.l2_gas.max_price_per_unit))},l1_gas:{max_amount:e8(td(e.l1_gas_consumed,t.l1_gas.max_amount)),max_price_per_unit:e8(td(e.l1_gas_price,t.l1_gas.max_price_per_unit))},l1_data_gas:{max_amount:e8(td(e.l1_data_gas_consumed,t.l1_data_gas.max_amount)),max_price_per_unit:e8(td(e.l1_data_gas_price,t.l1_data_gas.max_price_per_unit))}};return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:void 0!==e.data_gas_consumed&&void 0!==e.data_gas_price?e8(td(BigInt(e.overall_fee)/BigInt(e.gas_price),t.l1_gas.max_amount)):e8(td(e.gas_consumed,t.l1_gas.max_amount)),max_price_per_unit:e8(td(e.gas_price,t.l1_gas.max_price_per_unit))}}}function nK(e){return{l1_gas_consumed:0n,l1_gas_price:0n,l1_data_gas_consumed:0n,l1_data_gas_price:0n,l2_gas_consumed:0n,l2_gas_price:0n,overall_fee:U,unit:"FRI",suggestedMaxFee:U,resourceBounds:nq(U,void 0,e)}}function nY(e){if(e===ex.L1)return eT.L1;if(e===ex.L2)return eT.L2;throw Error("EDAM conversion")}function nZ(e,t){let r=t?e8(t):void 0,n=e8(e);if(t&&!Object.values(eE).includes(r))throw Error(`providedVersion ${t} is not ETransactionVersion`);if(!Object.values(eE).includes(n))throw Error(`defaultVersion ${e} is not ETransactionVersion`);return t?r:n}function nX(e){if(!e)return;let t=e8(e);if(t===eE.V0)return eE.F0;if(t===eE.V1)return eE.F1;if(t===eE.V2)return eE.F2;if(t===eE.V3)return eE.F3;throw Error(`toFeeVersion: ${t} is not supported`)}function nJ(e,t){return{tip:e.tip||0,paymasterData:e.paymasterData||[],accountDeploymentData:e.accountDeploymentData||[],nonceDataAvailabilityMode:e.nonceDataAvailabilityMode||ex.L1,feeDataAvailabilityMode:e.feeDataAvailabilityMode||ex.L1,resourceBounds:e.resourceBounds??nq(U,void 0,t)}}function nQ(e){return e===eE.F2?eE.F1:e===eE.V2?eE.V1:e}function n0(e){let t=e8(e);return I(A((0,nB.getPublicKey)(t,!1)))}function n1(e){return"sierra_program"in(e1(e)?e$(e):e)}function n2(e){let t={...e};if(n1(e.contract)&&(!e.compiledClassHash&&e.casm&&(t.compiledClassHash=nT(e.casm)),!t.compiledClassHash))throw Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(t.classHash=e.classHash??nI(e.contract),!t.classHash)throw Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return t}function n5(e){if(n1(e))throw Error("ContractClassResponse need to be LegacyContractClass (cairo0 response class)");return{...e,program:nM(e.program)}}var n6={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,ENTRYPOINT_NOT_FOUND:21,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,STORAGE_PROOF_NOT_SUPPORTED:42,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_RESOURCES_FOR_VALIDATE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63,INVALID_SUBSCRIPTION_ID:66,TOO_MANY_ADDRESSES_IN_FILTER:67,TOO_MANY_BLOCKS_BACK:68,COMPILATION_ERROR:100,INVALID_ADDRESS:150,TOKEN_NOT_SUPPORTED:151,INVALID_SIGNATURE:153,MAX_AMOUNT_TOO_LOW:154,CLASS_HASH_NOT_SUPPORTED:155,PAYMASTER_TRANSACTION_EXECUTION_ERROR:156,INVALID_TIME_BOUNDS:157,INVALID_DEPLOYMENT_DATA:158,INVALID_CLASS_HASH:159,INVALID_ID:160,UNKNOWN_ERROR:163},n3=class extends Error{name;constructor(e){super(e),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(e,t){let{setPrototypeOf:r}=Object;r?r(e,t):e.__proto__=t}(this,new.target.prototype),function(e,t=e.constructor){let{captureStackTrace:r}=Error;r&&r(e,t)}(this)}},n8=class extends n3{},n4=class extends n8{constructor(e,t,r){super(`RPC: ${t} with params ${ez(r,null,2)}

      ${e.code}: ${e.message}: ${ez(e.data)}`),this.baseError=e,this.request={method:t,params:r}}request;get code(){return this.baseError.code}isType(e){return n6[e]===this.code}},n7=class extends n8{constructor(e){super(e),this.name="TimeoutError"}},n9=class extends n8{constructor(e){super(e),this.name="WebSocketNotConnectedError"}},ae={};c(ae,{ethRandomPrivateKey:()=>ar,validateAndParseEthAddress:()=>an});var at=e.r(678911);function ar(){return N(A(at.secp256k1.utils.randomPrivateKey()))}function an(e){tr(e,U,2n**160n-1n,"Ethereum Address ");let t=I(k(e8(e)).padStart(40,"0"));return eG(!!t.match(/^(0x)?[0-9a-f]{40}$/),"Invalid Ethereum Address Format"),t}var aa="undefined"!=typeof globalThis&&globalThis.fetch.bind(globalThis)||e.g.fetch.bind(e.g)||(()=>{throw new n8("'fetch()' not detected, use the 'baseFetch' constructor parameter to set it")}),ai={};function as(e){return new Promise(t=>{setTimeout(t,e)})}function ao(e){let t={...e};return delete t.sierra_program_debug_info,t.abi=nw(ez(e.abi)),t.sierra_program=nw(ez(e.sierra_program)),t.sierra_program=nH(t.sierra_program),t}function al(e){let t=e1(e)?e$(e):e;return n1(e)?ao(t):{...t,..."program"in t&&{program:nH(t.program)}}}c(ai,{Block:()=>af,createSierraContractClass:()=>ao,getDefaultNodeUrl:()=>ac,getDefaultNodes:()=>au,getSupportedRpcVersions:()=>ad,parseContract:()=>al,validBlockTags:()=>ah,wait:()=>as});var ac=(e,t=!1,r)=>{t||ed.info("Using default public node url, please provide nodeUrl in provider options!");let n=au(r??ec.get("rpcVersion"))[e??et.SN_SEPOLIA],a=Math.floor(Math.random()*n.length);return n[a]};function au(e){let t={...es};return Object.keys(t).forEach(function(r,n){t[r]=t[r].map(t=>`${t}${nL(e)}`)}),t}function ad(){return[...new Set(Object.values(ea))]}var ah=Object.values(e_),af=class{hash=null;number=null;tag=null;setIdentifier(e){if(e1(e))if(tI(e))this.number=parseInt(e,10);else if(e5(e))this.hash=e;else if(ah.includes(e))this.tag=e;else throw TypeError(`Block identifier unmanaged: ${e}`);else e0(e)?this.hash=e8(e):eJ(e)?this.number=e:this.tag=e_.PENDING;if(eJ(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}constructor(e){this.setIdentifier(e)}get queryIdentifier(){return null!==this.number?`blockNumber=${this.number}`:null!==this.hash?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(e){this.setIdentifier(e)}valueOf=()=>this.number;toString=()=>this.hash},ap={};c(ap,{buildUDCCall:()=>a_,fromCallsToExecuteCalldata:()=>am,fromCallsToExecuteCalldata_cairo1:()=>ay,getExecuteCalldata:()=>ab,getVersionsByType:()=>aw,transformCallsToMulticallArrays:()=>ag});var ag=e=>{let t=[],r=[];return e.forEach(e=>{let n=rj.compile(e.calldata||[]);t.push({to:e6(e.contractAddress).toString(10),selector:e6(tw(e.entrypoint)).toString(10),data_offset:r.length.toString(),data_len:n.length.toString()}),r.push(...n)}),{callArray:t,calldata:rj.compile({calldata:r})}},am=e=>{let{callArray:t,calldata:r}=ag(e);return[...rj.compile({callArray:t}),...r]},ay=e=>{let t=e.map(e=>({contractAddress:e.contractAddress,entrypoint:e.entrypoint,calldata:Array.isArray(e.calldata)&&"__compiled__"in e.calldata?e.calldata:rj.compile(e.calldata)}));return rj.compile({orderCalls:t})},ab=(e,t="0")=>"1"===t?ay(e):am(e);function a_(e,t){let r=[].concat(e).map(e=>{let{classHash:r,salt:n,unique:a=!0,constructorCalldata:i=[]}=e,s=rj.compile(i),o=n??n$();return{call:{contractAddress:K.ADDRESS,entrypoint:K.ENTRYPOINT,calldata:[r,o,tc(a),s.length,...s]},address:nb(a?rK.pedersen(t,o):o,r,s,a?K.ADDRESS:0)}});return{calls:r.map(e=>e.call),addresses:r.map(e=>e.address)}}function aw(e){return"fee"===e?{v1:eE.F1,v2:eE.F2,v3:eE.F3}:{v1:eE.V1,v2:eE.V2,v3:eE.V3}}var aE={headers:{"Content-Type":"application/json"},blockIdentifier:e_.PENDING,retries:200},av=class{id="RPC071";channelSpecVersion=ea.v0_7_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(e){let{baseFetch:t,batch:r,blockIdentifier:n,chainId:a,headers:i,nodeUrl:s,retries:o,specVersion:l,transactionRetryIntervalFallback:c,waitMode:u}=e||{};Object.values(et).includes(s)?this.nodeUrl=ac(s,e?.default,this.channelSpecVersion):s?this.nodeUrl=s:this.nodeUrl=ac(void 0,e?.default,this.channelSpecVersion),this.baseFetch=t||ec.get("fetch")||aa,this.blockIdentifier=n??aE.blockIdentifier,this.chainId=a,this.headers={...aE.headers,...i},this.retries=o??aE.retries,this.specVersion=l,this.transactionRetryIntervalFallback=c,this.waitMode=u??!1,this.requestId=0,"number"==typeof r&&(this.batchClient=new eW({nodeUrl:this.nodeUrl,headers:this.headers,interval:r,baseFetch:this.baseFetch})),ed.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,r=0){let n={id:r,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:ez(n),headers:this.headers})}errorHandler(e,t,r,n){if(r)throw new n4(r,e,t);if(n instanceof n8)throw n;if(n)throw Error(n.message)}async fetchEndpoint(e,t){try{if(this.batchClient){let{error:r,result:n}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,r),n}let r=await this.fetch(e,t,this.requestId+=1),{error:n,result:a}=await r.json();return this.errorHandler(e,t,n),a}catch(r){throw this.errorHandler(e,t,r?.response?.data,r),r}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){let e=await this.fetchEndpoint("starknet_specVersion");if(nP(this.channelSpecVersion,e)||ed.error(el.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!nD(e))throw new n8(`${el.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=e}return this.specVersion}getNonceForAddress(e,t=this.blockIdentifier){let r=e8(e),n=new af(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){let t=new af(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){let t=new af(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){let t=new af(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){let t=new af(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){let t=new af(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){let t=new af(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){let t=e8(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){let r=new af(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:t})}getTransactionReceipt(e){let t=e8(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){let t=e8(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){let t=e8(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){let{blockIdentifier:r=this.blockIdentifier,skipValidate:n=!0,skipFeeCharge:a=!0}=t,i=new af(r).identifier,s=[];return n&&s.push(m.ESimulationFlag.SKIP_VALIDATE),a&&s.push(m.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map(e=>this.buildTransaction(e)),simulation_flags:s})}async waitForTransaction(e,t){let r,n=e8(e),{retries:a}=this,i=!1,s=!1,o=t?.retryInterval??this.transactionRetryIntervalDefault,l=t?.errorStates??[m.ETransactionStatus.REJECTED],c=t?.successStates??[m.ETransactionExecutionStatus.SUCCEEDED,m.ETransactionStatus.ACCEPTED_ON_L2,m.ETransactionStatus.ACCEPTED_ON_L1];for(;!i;){await as(o);try{let e=(r=await this.getTransactionStatus(n)).execution_status,t=r.finality_status;if(!t)throw Error("waiting for transaction status");if(l.includes(e)||l.includes(t)){let n=`${e}: ${t}`,a=Error(n);throw a.response=r,s=!0,a}(c.includes(e)||c.includes(t))&&(i=!0)}catch(e){if(e instanceof Error&&s)throw e;if(a<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}a-=1}let u=null;for(;null===u;){try{u=await this.getTransactionReceipt(n)}catch(e){if(a<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}a-=1,await as(o)}return u}getStorageAt(e,t,r=this.blockIdentifier){let n=e8(e),a=e7(t),i=new af(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:a,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){let r=e8(e),n=new af(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}getClass(e,t=this.blockIdentifier){let r=e8(e),n=new af(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n})}getClassAt(e,t=this.blockIdentifier){let r=e8(e),n=new af(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:r=!0}){let n=new af(t).identifier,a={simulation_flags:r?[m.ESimulationFlag.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:e.map(e=>this.buildTransaction(e,"fee")),block_id:n,...a})}async invoke(e,t){let r;return nN(t)?(r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:m.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:rj.toHex(e.calldata),version:m.ETransactionVersion.V3,signature:nW(e.signature),nonce:e8(t.nonce),resource_bounds:t.resourceBounds,tip:e8(t.tip),paymaster_data:t.paymasterData.map(e=>e8(e)),account_deployment_data:t.accountDeploymentData.map(e=>e8(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}),eq(!t.maxFee,()=>{ed.warn(el.maxFeeInV3,{type:m.ETransactionType.INVOKE})})):(r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:rj.toHex(e.calldata),type:m.ETransactionType.INVOKE,max_fee:e8(t.maxFee||0),version:m.ETransactionVersion.V1,signature:nW(e.signature),nonce:e8(t.nonce)}}),ed.warn(el.legacyTxWarningMessage,{version:m.ETransactionVersion.V1,type:m.ETransactionType.INVOKE})),this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare({contract:e,signature:t,senderAddress:r,compiledClassHash:n},a){let i;if(n1(e)||nN(a))if(n1(e)&&!nN(a))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:m.ETransactionType.DECLARE,contract_class:{sierra_program:nM(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},compiled_class_hash:n||"",version:m.ETransactionVersion.V2,max_fee:e8(a.maxFee||0),signature:nW(t),sender_address:r,nonce:e8(a.nonce)}}),ed.warn(el.legacyTxWarningMessage,{version:m.ETransactionVersion.V2,type:m.ETransactionType.DECLARE});else if(n1(e)&&nN(a))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:m.ETransactionType.DECLARE,sender_address:r,compiled_class_hash:n||"",version:m.ETransactionVersion.V3,signature:nW(t),nonce:e8(a.nonce),contract_class:{sierra_program:nM(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:a.resourceBounds,tip:e8(a.tip),paymaster_data:a.paymasterData.map(e=>e8(e)),account_deployment_data:a.accountDeploymentData.map(e=>e8(e)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}}),eq(!a.maxFee,()=>{ed.warn(el.maxFeeInV3,{type:m.ETransactionType.DECLARE})});else throw Error("declare unspotted parameters");else i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:m.ETransactionType.DECLARE,contract_class:{program:e.program,entry_points_by_type:e.entry_points_by_type,abi:e.abi},version:m.ETransactionVersion.V1,max_fee:e8(a.maxFee||0),signature:nW(t),sender_address:r,nonce:e8(a.nonce)}}),ed.warn(el.legacyTxWarningMessage,{version:m.ETransactionVersion.V1,type:m.ETransactionType.DECLARE});return this.waitMode?this.waitForTransaction((await i).transaction_hash):i}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:r,signature:n},a){let i;return nN(a)?(i=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:m.ETransactionType.DEPLOY_ACCOUNT,version:m.ETransactionVersion.V3,signature:nW(n),nonce:e8(a.nonce),contract_address_salt:e8(r||0),constructor_calldata:rj.toHex(t||[]),class_hash:e8(e),resource_bounds:a.resourceBounds,tip:e8(a.tip),paymaster_data:a.paymasterData.map(e=>e8(e)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}}),eq(!a.maxFee,()=>{ed.warn(el.maxFeeInV3,{type:m.ETransactionType.DEPLOY_ACCOUNT})})):(i=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:rj.toHex(t||[]),class_hash:e8(e),contract_address_salt:e8(r||0),type:m.ETransactionType.DEPLOY_ACCOUNT,max_fee:e8(a.maxFee||0),version:m.ETransactionVersion.V1,signature:nW(n),nonce:e8(a.nonce)}}),ed.warn(el.legacyTxWarningMessage,{version:m.ETransactionVersion.V1,type:m.ETransactionType.DEPLOY_ACCOUNT})),this.waitMode?this.waitForTransaction((await i).transaction_hash):i}callContract(e,t=this.blockIdentifier){let r=new af(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:tw(e.entrypoint),calldata:rj.toHex(e.calldata)},block_id:r})}estimateMessageFee(e,t=this.blockIdentifier){let{from_address:r,to_address:n,entry_point_selector:a,payload:i}=e,s={from_address:an(r),to_address:e8(n),entry_point_selector:tE(a),payload:tl(i)},o=new af(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){let r,n=aw(t);if(nN(e)?(r={signature:nW(e.signature),nonce:e8(e.nonce),resource_bounds:e.resourceBounds,tip:e8(e.tip),paymaster_data:e.paymasterData.map(e=>e8(e)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(e=>e8(e))},eq(!e.maxFee,()=>{ed.warn(el.maxFeeInV3,{type:e.type,versionType:t})})):(r={signature:nW(e.signature),nonce:e8(e.nonce),max_fee:e8(e.maxFee||0)},ed.warn(el.legacyTxWarningMessage,{version:e.version,type:e.type})),e.type===eg.INVOKE)return{type:m.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:rj.toHex(e.calldata),version:e8(e.version||n.v3),...r};if(e.type===eg.DECLARE)return n1(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:nM(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:e8(e.version||n.v3),...r}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:e8(e.version||n.v1),...r};if(e.type===eg.DEPLOY_ACCOUNT){let{account_deployment_data:t,...a}=r;return{type:e.type,constructor_calldata:rj.toHex(e.constructorCalldata||[]),class_hash:e8(e.classHash),contract_address_salt:e8(e.addressSalt||0),version:e8(e.version||n.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}},aS={};c(aS,{RpcChannel:()=>aT});var ax={headers:{"Content-Type":"application/json"},blockIdentifier:e_.PENDING,retries:200},aT=class{id="RPC081";channelSpecVersion=ea.v0_8_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(e){let{baseFetch:t,batch:r,blockIdentifier:n,chainId:a,headers:i,nodeUrl:s,retries:o,specVersion:l,transactionRetryIntervalFallback:c,waitMode:u}=e||{};Object.values(et).includes(s)?this.nodeUrl=ac(s,e?.default,this.channelSpecVersion):s?this.nodeUrl=s:this.nodeUrl=ac(void 0,e?.default,this.channelSpecVersion),this.baseFetch=t||ec.get("fetch")||aa,this.blockIdentifier=n??ax.blockIdentifier,this.chainId=a,this.headers={...ax.headers,...i},this.retries=o??ax.retries,this.specVersion=l,this.transactionRetryIntervalFallback=c,this.waitMode=u??!1,this.requestId=0,"number"==typeof r&&(this.batchClient=new eW({nodeUrl:this.nodeUrl,headers:this.headers,interval:r,baseFetch:this.baseFetch})),ed.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,r=0){let n={id:r,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:ez(n),headers:this.headers})}errorHandler(e,t,r,n){if(r)throw new n4(r,e,t);if(n instanceof n8)throw n;if(n)throw Error(n.message)}async fetchEndpoint(e,t){try{if(this.batchClient){let{error:r,result:n}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,r),n}let r=await this.fetch(e,t,this.requestId+=1),{error:n,result:a}=await r.json();return this.errorHandler(e,t,n),a}catch(r){throw this.errorHandler(e,t,r?.response?.data,r),r}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){let e=await this.fetchEndpoint("starknet_specVersion");if(nP(this.channelSpecVersion,e)||ed.error(el.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!nD(e))throw new n8(`${el.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=e}return this.specVersion}getMessagesStatus(e){let t=e8(e);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:t})}getStorageProof(e=[],t=[],r=[],n=this.blockIdentifier){let a=new af(n).identifier,i=ta(e),s=ta(t);return this.fetchEndpoint("starknet_getStorageProof",{block_id:a,class_hashes:i,contract_addresses:s,contracts_storage_keys:r})}getCompiledCasm(e){let t=e8(e);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:t})}getNonceForAddress(e,t=this.blockIdentifier){let r=e8(e),n=new af(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){let t=new af(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){let t=new af(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){let t=new af(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){let t=new af(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){let t=new af(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){let t=new af(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){let t=e8(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){let r=new af(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:t})}getTransactionReceipt(e){let t=e8(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){let t=e8(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){let t=e8(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){let{blockIdentifier:r=this.blockIdentifier,skipValidate:n=!0,skipFeeCharge:a=!0}=t,i=new af(r).identifier,s=[];return n&&s.push(y.ESimulationFlag.SKIP_VALIDATE),a&&s.push(y.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map(e=>this.buildTransaction(e)),simulation_flags:s})}async waitForTransaction(e,t){let r,n=e8(e),{retries:a}=this,i=!1,s=!1,o=t?.retryInterval??this.transactionRetryIntervalDefault,l=t?.errorStates??[y.ETransactionStatus.REJECTED],c=t?.successStates??[y.ETransactionExecutionStatus.SUCCEEDED,y.ETransactionStatus.ACCEPTED_ON_L2,y.ETransactionStatus.ACCEPTED_ON_L1];for(;!i;){await as(o);try{let e=(r=await this.getTransactionStatus(n)).execution_status,t=r.finality_status;if(!t)throw Error("waiting for transaction status");if(l.includes(e)||l.includes(t)){let n=`${e}: ${t}`,a=Error(n);throw a.response=r,s=!0,a}(c.includes(e)||c.includes(t))&&(i=!0)}catch(e){if(e instanceof Error&&s)throw e;if(a<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}a-=1}let u=null;for(;null===u;){try{u=await this.getTransactionReceipt(n)}catch(e){if(a<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}a-=1,await as(o)}return u}getStorageAt(e,t,r=this.blockIdentifier){let n=e8(e),a=e7(t),i=new af(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:a,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){let r=e8(e),n=new af(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}getClass(e,t=this.blockIdentifier){let r=e8(e),n=new af(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n})}getClassAt(e,t=this.blockIdentifier){let r=e8(e),n=new af(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:r=!0}){let n=new af(t).identifier,a={simulation_flags:r?[y.ESimulationFlag.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:e.map(e=>this.buildTransaction(e,"fee")),block_id:n,...a})}async invoke(e,t){let r;if(nN(t))if(ek(t.resourceBounds))r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:y.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:rj.toHex(e.calldata),version:y.ETransactionVersion.V3,signature:nW(e.signature),nonce:e8(t.nonce),resource_bounds:t.resourceBounds,tip:e8(t.tip),paymaster_data:t.paymasterData.map(e=>e8(e)),account_deployment_data:t.accountDeploymentData.map(e=>e8(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}});else throw Error(el.SWOldV3);else throw Error(el.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare({contract:e,signature:t,senderAddress:r,compiledClassHash:n},a){let i;if(n1(e)&&nN(a))if(ek(a.resourceBounds))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:y.ETransactionType.DECLARE,sender_address:r,compiled_class_hash:n||"",version:y.ETransactionVersion.V3,signature:nW(t),nonce:e8(a.nonce),contract_class:{sierra_program:nM(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:a.resourceBounds,tip:e8(a.tip),paymaster_data:a.paymasterData.map(e=>e8(e)),account_deployment_data:a.accountDeploymentData.map(e=>e8(e)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}});else throw Error(el.SWOldV3);else throw Error(el.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await i).transaction_hash):i}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:r,signature:n},a){let i;if(nN(a))if(ek(a.resourceBounds))i=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:y.ETransactionType.DEPLOY_ACCOUNT,version:y.ETransactionVersion.V3,signature:nW(n),nonce:e8(a.nonce),contract_address_salt:e8(r||0),constructor_calldata:rj.toHex(t||[]),class_hash:e8(e),resource_bounds:a.resourceBounds,tip:e8(a.tip),paymaster_data:a.paymasterData.map(e=>e8(e)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}});else throw Error(el.SWOldV3);else throw Error(el.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await i).transaction_hash):i}callContract(e,t=this.blockIdentifier){let r=new af(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:tw(e.entrypoint),calldata:rj.toHex(e.calldata)},block_id:r})}estimateMessageFee(e,t=this.blockIdentifier){let{from_address:r,to_address:n,entry_point_selector:a,payload:i}=e,s={from_address:an(r),to_address:e8(n),entry_point_selector:tE(a),payload:tl(i)},o=new af(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){let r,n=aw(t);if(nN(e))r={signature:nW(e.signature),nonce:e8(e.nonce),resource_bounds:e.resourceBounds,tip:e8(e.tip),paymaster_data:e.paymasterData.map(e=>e8(e)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(e=>e8(e))};else throw Error("v0,v1,v2 tx are not supported on RPC 0.8");if(e.type===eg.INVOKE)return{type:y.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:rj.toHex(e.calldata),version:e8(e.version||n.v3),...r};if(e.type===eg.DECLARE){if(!n1(e.contract))throw ed.error("Cairo 0 -  non Sierra v1 tx are not supported"),Error("Declaring non Sierra contract using RPC 0.8");return{type:e.type,contract_class:{...e.contract,sierra_program:nM(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:e8(e.version||n.v3),...r}}if(e.type===eg.DEPLOY_ACCOUNT){let{account_deployment_data:t,...a}=r;return{type:e.type,constructor_calldata:rj.toHex(e.constructorCalldata||[]),class_hash:e8(e.classHash),contract_address_salt:e8(e.addressSalt||0),version:e8(e.version||n.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}},aA=class{listeners={};on(e,t){this.listeners[e]||(this.listeners[e]=[]),this.listeners[e].push(t)}off(e,t){this.listeners[e]&&(this.listeners[e]=this.listeners[e].filter(e=>e!==t))}emit(e,t){this.listeners[e]&&this.listeners[e].forEach(e=>e(t))}clear(){this.listeners={}}},ak="undefined"!=typeof WebSocket&&WebSocket||"undefined"!=typeof globalThis&&globalThis.WebSocket||e.g.WebSocket||class{constructor(){throw new n8("WebSocket module not detected, use the 'websocket' constructor parameter to set a compatible connection")}},aI=class{channel;method;params;id;events=new aA;buffer=[];maxBufferSize;handler=null;_isClosed=!1;constructor(e,t,r,n,a){this.channel=e,this.method=t,this.params=r,this.id=n,this.maxBufferSize=a}get isClosed(){return this._isClosed}_handleEvent(e){if(this.handler)this.handler(e);else{if(this.buffer.length>=this.maxBufferSize){let e=this.buffer.shift();ed.warn(`Subscription ${this.id}: Buffer full. Dropping oldest event:`,e)}this.buffer.push(e)}}on(e){if(this.handler)throw Error("A handler is already attached to this subscription.");for(this.handler=e;this.buffer.length>0;){let e=this.buffer.shift();e&&this.handler(e)}}async unsubscribe(){if(this._isClosed)return!0;let e=await this.channel.unsubscribe(this.id);return e&&(this._isClosed=!0,this.channel.removeSubscription(this.id),this.events.emit("unsubscribe",void 0),this.events.clear()),e}},aC=class{nodeUrl;websocket;WsImplementation;activeSubscriptions=new Map;maxBufferSize;autoReconnect;reconnectOptions;requestTimeout;isReconnecting=!1;reconnectAttempts=0;userInitiatedClose=!1;reconnectTimeoutId=null;requestQueue=[];events=new aA;openListener=e=>this.events.emit("open",e);closeListener=this.onCloseProxy.bind(this);messageListener=this.onMessageProxy.bind(this);errorListener=e=>this.events.emit("error",e);sendId=0;constructor(e){this.nodeUrl=e.nodeUrl,this.maxBufferSize=e.maxBufferSize??1e3,this.autoReconnect=e.autoReconnect??!0,this.reconnectOptions={retries:e.reconnectOptions?.retries??5,delay:e.reconnectOptions?.delay??2e3},this.requestTimeout=e.requestTimeout??6e4,this.WsImplementation=e.websocket||ec.get("websocket")||ak,this.websocket=new this.WsImplementation(this.nodeUrl),this.websocket.addEventListener("open",this.openListener),this.websocket.addEventListener("close",this.closeListener),this.websocket.addEventListener("message",this.messageListener),this.websocket.addEventListener("error",this.errorListener)}idResolver(e){return e||this.sendId++}send(e,t,r){if(!this.isConnected())throw new n9("WebSocketChannel.send() failed due to socket being disconnected");let n=this.idResolver(r),a={id:n,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.websocket.send(ez(a)),n}sendReceive(e,t){if(this.isReconnecting||!this.isConnected()&&this.autoReconnect&&!this.userInitiatedClose)return ed.info(`WebSocket: Connection unavailable, queueing request: ${e}`),new Promise((r,n)=>{this.requestQueue.push({method:e,params:t,resolve:r,reject:n})});let r=this.send(e,t);return new Promise((t,n)=>{let a;if(!this.websocket||this.websocket.readyState!==ak.OPEN)return void n(new n9("WebSocket not available or not connected."));let i=o=>{if(!e1(o.data))return void ed.warn("WebSocket received non-string message data:",o.data);let l=JSON.parse(o.data);l.id===r&&(clearTimeout(a),this.websocket.removeEventListener("message",i),this.websocket.removeEventListener("error",s),"result"in l?t(l.result):n(Error(`Error on ${e} (id: ${r}): ${JSON.stringify(l.error)}`)))},s=t=>{clearTimeout(a),this.websocket.removeEventListener("message",i),this.websocket.removeEventListener("error",s),n(Error(`WebSocket error during ${e} (id: ${r}): ${t.type||"Unknown error"}`))};this.websocket.addEventListener("message",i),this.websocket.addEventListener("error",s),a=setTimeout(()=>{this.websocket.removeEventListener("message",i),this.websocket.removeEventListener("error",s),n(new n7(`Request ${e} (id: ${r}) timed out after ${this.requestTimeout}ms`))},this.requestTimeout)})}isConnected(){return this.websocket.readyState===ak.OPEN}async waitForConnection(){return this.websocket.readyState!==ak.OPEN?new Promise((e,t)=>{this.websocket&&(this.websocket.onopen=()=>e(this.websocket.readyState),this.websocket.onerror=e=>t(e))}):this.websocket.readyState}disconnect(e,t){this.reconnectTimeoutId&&(clearTimeout(this.reconnectTimeoutId),this.reconnectTimeoutId=null),this.websocket.close(e,t),this.userInitiatedClose=!0}async waitForDisconnection(){return this.websocket.readyState!==ak.CLOSED?new Promise((e,t)=>{this.websocket&&(this.websocket.onclose=()=>e(this.websocket.readyState),this.websocket.onerror=t)}):this.websocket.readyState}async unsubscribe(e){let t=await this.sendReceive("starknet_unsubscribe",{subscription_id:e});return t&&this.events.emit("unsubscribe",e),t}waitForUnsubscription(e){return new Promise(t=>{let r=n=>{n===e&&(this.events.off("unsubscribe",r),t())};this.events.on("unsubscribe",r)})}reconnect(){this.userInitiatedClose=!1,this.websocket=new this.WsImplementation(this.nodeUrl),this.websocket.addEventListener("open",this.openListener),this.websocket.addEventListener("close",this.closeListener),this.websocket.addEventListener("message",this.messageListener),this.websocket.addEventListener("error",this.errorListener)}_processRequestQueue(){for(ed.info(`WebSocket: Processing ${this.requestQueue.length} queued requests.`);this.requestQueue.length>0;){let{method:e,params:t,resolve:r,reject:n}=this.requestQueue.shift();this.sendReceive(e,t).then(r).catch(n)}}async _restoreSubscriptions(){let e=Array.from(this.activeSubscriptions.values());this.activeSubscriptions.clear();let t=e.map(async e=>{try{let t=await this.sendReceive(e.method,e.params);e.id=t,this.activeSubscriptions.set(t,e),ed.info(`Subscription ${e.method} restored with new ID: ${t}`)}catch(t){ed.error(`Failed to restore subscription ${e.method}:`,t)}});await Promise.all(t)}_startReconnect(){if(this.isReconnecting||!this.autoReconnect)return;this.isReconnecting=!0,this.reconnectAttempts=0;let e=()=>{if(this.reconnectAttempts>=this.reconnectOptions.retries){ed.error("WebSocket: Maximum reconnection retries reached. Giving up."),this.isReconnecting=!1;return}this.reconnectAttempts+=1,ed.info(`WebSocket: Connection lost. Attempting to reconnect... (${this.reconnectAttempts}/${this.reconnectOptions.retries})`),this.reconnect(),this.websocket.onopen=async()=>{ed.info("WebSocket: Reconnection successful."),this.isReconnecting=!1,this.reconnectAttempts=0,await this._restoreSubscriptions(),this._processRequestQueue(),this.events.emit("open",new Event("open"))},this.websocket.onerror=()=>{let t=this.reconnectOptions.delay*2**(this.reconnectAttempts-1);ed.info(`WebSocket: Reconnect attempt failed. Retrying in ${t}ms.`),this.reconnectTimeoutId=setTimeout(e,t)}};e()}onCloseProxy(e){this.websocket.removeEventListener("open",this.openListener),this.websocket.removeEventListener("close",this.closeListener),this.websocket.removeEventListener("message",this.messageListener),this.websocket.removeEventListener("error",this.errorListener),this.events.emit("close",e),this.userInitiatedClose||this._startReconnect()}onMessageProxy(e){let t;try{t=JSON.parse(e.data)}catch(t){ed.error(`WebSocketChannel: Error parsing incoming message: ${e.data}, Error: ${t}`);return}if(t.method&&e2(t.params)&&"subscription_id"in t.params){let{result:e,subscription_id:r}=t.params,n=this.activeSubscriptions.get(r);n?n._handleEvent(e):ed.warn(`WebSocketChannel: Received event for untracked subscription ID: ${r}.`)}ed.debug("onMessageProxy:",e.data),this.events.emit("message",e)}async subscribeNewHeads(e){let t="starknet_subscribeNewHeads",r={block_id:e?new af(e).identifier:void 0},n=await this.sendReceive(t,r),a=new aI(this,t,r,n,this.maxBufferSize);return this.activeSubscriptions.set(n,a),a}async subscribeEvents(e,t,r){let n="starknet_subscribeEvents",a={from_address:void 0!==e?e8(e):void 0,keys:t,block_id:r?new af(r).identifier:void 0},i=await this.sendReceive(n,a),s=new aI(this,n,a,i,this.maxBufferSize);return this.activeSubscriptions.set(i,s),s}async subscribeTransactionStatus(e,t){let r="starknet_subscribeTransactionStatus",n={transaction_hash:e8(e),block_id:t?new af(t).identifier:void 0},a=await this.sendReceive(r,n),i=new aI(this,r,n,a,this.maxBufferSize);return this.activeSubscriptions.set(a,i),i}async subscribePendingTransaction(e,t){let r="starknet_subscribePendingTransactions",n={transaction_details:e,sender_address:t&&ta(t)},a=await this.sendReceive(r,n),i=new aI(this,r,n,a,this.maxBufferSize);return this.activeSubscriptions.set(a,i),i}removeSubscription(e){this.activeSubscriptions.delete(e)}on(e,t){this.events.on(e,t)}off(e,t){this.events.off(e,t)}},aB=class{margin;constructor(e){this.margin=e}estimatedFeeToMaxFee(e){return nG(e,this.margin?.maxFee)}estimateFeeToBounds(e){return nq(e,this.margin?.bounds)}parseGetBlockResponse(e){return e}parseTransactionReceipt(e){return e}parseFeeEstimateResponse(e){let t=e[0];return{overall_fee:e6(t.overall_fee),unit:t.unit,l1_gas_consumed:e3(t.l1_gas_consumed)??e3(t.gas_consumed)??0n,l1_gas_price:e3(t.l1_gas_price)??e3(t.gas_price)??0n,l2_gas_consumed:e3(t.l2_gas_consumed)??void 0,l2_gas_price:e3(t.l2_gas_price)??void 0,l1_data_gas_consumed:e3(t.l1_data_gas_consumed)??e3(t.data_gas_consumed)??0n,l1_data_gas_price:e3(t.l1_data_gas_price)??e3(t.gas_price)??0n,suggestedMaxFee:this.estimatedFeeToMaxFee(t.overall_fee),resourceBounds:this.estimateFeeToBounds(t)}}parseFeeEstimateBulkResponse(e){return e.map(e=>({overall_fee:e6(e.overall_fee),unit:e.unit,l1_gas_consumed:e3(e.l1_gas_consumed)??e3(e.gas_consumed)??0n,l1_gas_price:e3(e.l1_gas_price)??e3(e.gas_price)??0n,l2_gas_consumed:e3(e.l2_gas_consumed)??void 0,l2_gas_price:e3(e.l2_gas_price)??void 0,l1_data_gas_consumed:e3(e.l1_data_gas_consumed)??e3(e.data_gas_consumed)??0n,l1_data_gas_price:e3(e.l1_data_gas_price)??e3(e.gas_price)??0n,suggestedMaxFee:this.estimatedFeeToMaxFee(e.overall_fee),resourceBounds:this.estimateFeeToBounds(e)}))}parseSimulateTransactionResponse(e){return e.map(e=>({...e,suggestedMaxFee:this.estimatedFeeToMaxFee(e.fee_estimation.overall_fee),resourceBounds:this.estimateFeeToBounds(e.fee_estimation)}))}parseContractClassResponse(e){return{...e,abi:e1(e.abi)?JSON.parse(e.abi):e.abi}}parseL1GasPriceResponse(e){return e.l1_gas_price.price_in_wei}},aO=class e{statusReceipt;value;constructor(t){for(let[r]of([this.statusReceipt,this.value]=e.isSuccess(t)?["success",t]:e.isReverted(t)?["reverted",t]:["error",Error("Unknown response type")],Object.entries(this)))Object.defineProperty(this,r,{enumerable:!1});for(let[e,r]of Object.entries(t))Object.defineProperty(this,e,{enumerable:!0,writable:!1,value:r})}match(e){return this.statusReceipt in e?e[this.statusReceipt](this.value):e._()}isSuccess(){return"success"===this.statusReceipt}isReverted(){return"reverted"===this.statusReceipt}isError(){return"error"===this.statusReceipt}static isSuccess(e){return e.execution_status===ey.SUCCEEDED}static isReverted(e){return e.execution_status===ey.REVERTED}},aN={};c(aN,{encodeData:()=>aq,encodeType:()=>az,encodeValue:()=>aG,getDependencies:()=>aj,getMessageHash:()=>aY,getStructHash:()=>aK,getTypeHash:()=>aW,isMerkleTreeType:()=>a$,prepareSelector:()=>aM,validateTypedData:()=>aH,verifyMessage:()=>aZ});var aP={};c(aP,{MerkleTree:()=>aD,proofMerklePath:()=>function e(t,r,n,a=nf){if(0===n.length)return t===r;let[i,...s]=n;return e(t,aD.hash(r,i,a),s,a)}});var aD=class e{leaves;branches=[];root;hashMethod;constructor(e,t=nf){this.hashMethod=t,this.leaves=e,this.root=this.build(e)}build(t){if(1===t.length)return t[0];t.length!==this.leaves.length&&this.branches.push(t);let r=[];for(let n=0;n<t.length;n+=2)n+1===t.length?r.push(e.hash(t[n],"0x0",this.hashMethod)):r.push(e.hash(t[n],t[n+1],this.hashMethod));return this.build(r)}static hash(e,t,r=nf){let[n,a]=[BigInt(e),BigInt(t)].sort((e,t)=>e>=t?1:-1);return r(n,a)}getProof(t,r=this.leaves,n=[]){let a=r.indexOf(t);if(-1===a)throw Error("leaf not found");if(1===r.length)return n;let i=a%2==0,s=(i?r[a+1]:r[a-1])??"0x0",o=[...n,s],l=this.leaves.length===r.length?-1:this.branches.findIndex(e=>e.length===r.length),c=this.branches[l+1]??[this.root];return this.getProof(e.hash(i?t:s,i?s:t,this.hashMethod),c,o)}},aR={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},aL={[eV.TypedDataRevision.ACTIVE]:{domain:"StarknetDomain",hashMethod:ny,hashMerkleMethod:np,escapeTypeString:e=>`"${e}"`,presetTypes:aR},[eV.TypedDataRevision.LEGACY]:{domain:"StarkNetDomain",hashMethod:nm,hashMerkleMethod:nf,escapeTypeString:e=>e,presetTypes:{}}};function aU(e,t,{min:r,max:n}){let a=BigInt(e);eG(a>=r&&a<=n,`${a} (${t}) is out of bounds [${r}, ${n}]`)}function aV({types:e,domain:t}){return aL[eV.TypedDataRevision.ACTIVE].domain in e&&t.revision?.toString()===eV.TypedDataRevision.ACTIVE?eV.TypedDataRevision.ACTIVE:aL[eV.TypedDataRevision.LEGACY].domain in e&&(t.revision??eV.TypedDataRevision.LEGACY)===eV.TypedDataRevision.LEGACY?eV.TypedDataRevision.LEGACY:void 0}function aF(e){try{return e8(e)}catch(t){if(e1(e))return e8(tP(e));throw Error(`Invalid BigNumberish: ${e}`)}}function aH(e){return!!(e.message&&e.primaryType&&e.types&&aV(e))}function aM(e){return e5(e)?e:tw(e)}function a$(e){return"merkletree"===e.type}function aj(e,t,r=[],n="",a=eV.TypedDataRevision.LEGACY){let i=[t];return"*"===t[t.length-1]?i=[t.slice(0,-1)]:a===eV.TypedDataRevision.ACTIVE&&("enum"===t?i=[n]:t.match(/^\(.*\)$/)&&(i=t.slice(1,-1).split(",").map(e=>"*"===e[e.length-1]?e.slice(0,-1):e))),i.filter(t=>!r.includes(t)&&e[t]).reduce((t,r)=>[...t,...[r,...e[r].reduce((t,r)=>[...t,...aj(e,r.type,t,r.contains,a).filter(e=>!t.includes(e))],[])].filter(e=>!t.includes(e))],[])}function az(e,t,r=eV.TypedDataRevision.LEGACY){let n=r===eV.TypedDataRevision.ACTIVE?{...e,...aL[r].presetTypes}:e,[a,...i]=aj(n,t,void 0,void 0,r),s=a?[a,...i.sort()]:[],o=aL[r].escapeTypeString;return s.map(e=>{let t=n[e].map(e=>{let t="enum"===e.type&&r===eV.TypedDataRevision.ACTIVE?e.contains:e.type,n=t.match(/^\(.*\)$/)?`(${t.slice(1,-1).split(",").map(e=>e?o(e):e).join(",")})`:o(t);return`${o(e.name)}:${n}`});return`${o(e)}(${t})`}).join("")}function aW(e,t,r=eV.TypedDataRevision.LEGACY){return tw(az(e,t,r))}function aG(e,t,r,n={},a=eV.TypedDataRevision.LEGACY){if(e[t])return[t,aK(e,t,r,a)];if(aL[a].presetTypes[t])return[t,aK(aL[a].presetTypes,t,r,a)];if(t.endsWith("*")){let n=r.map(r=>aG(e,t.slice(0,-1),r,void 0,a)[1]);return[t,aL[a].hashMethod(n)]}switch(t){case"enum":if(a===eV.TypedDataRevision.ACTIVE){let[i,s]=Object.entries(r)[0],o=e[n.parent].find(e=>e.name===n.key),l=e[o.contains],c=l.find(e=>e.name===i),u=l.indexOf(c),d=c.type.slice(1,-1).split(",").map((t,r)=>t?aG(e,t,s[r],void 0,a)[1]:t);return[t,aL[a].hashMethod([u,...d])]}return[t,aF(r)];case"merkletree":{let t=function(e,t){if(t.parent&&t.key){let r=e[t.parent].find(e=>e.name===t.key);if(!a$(r))throw Error(`${t.key} is not a merkle tree`);if(r.contains.endsWith("*"))throw Error(`Merkle tree contain property must not be an array but was given ${t.key}`);return r.contains}return"raw"}(e,n),{root:i}=new aD(r.map(r=>aG(e,t,r,void 0,a)[1]),aL[a].hashMerkleMethod);return["felt",i]}case"selector":return["felt",aM(r)];case"string":if(a===eV.TypedDataRevision.ACTIVE){let e=tU(r),n=[e.data.length,...e.data,e.pending_word,e.pending_word_len];return[t,aL[a].hashMethod(n)]}return[t,aF(r)];case"i128":if(a===eV.TypedDataRevision.ACTIVE){let e=BigInt(r);return aU(e,t,G),[t,aF(e<0n?M+e:e)]}return[t,aF(r)];case"timestamp":case"u128":return a===eV.TypedDataRevision.ACTIVE&&aU(r,t,q),[t,aF(r)];case"felt":case"shortstring":return a===eV.TypedDataRevision.ACTIVE&&aU(aF(r),t,W),[t,aF(r)];case"ClassHash":case"ContractAddress":return a===eV.TypedDataRevision.ACTIVE&&aU(r,t,W),[t,aF(r)];case"bool":return a===eV.TypedDataRevision.ACTIVE&&eG(eQ(r),`Type mismatch for ${t} ${r}`),[t,aF(r)];default:if(a===eV.TypedDataRevision.ACTIVE)throw Error(`Unsupported type: ${t}`);return[t,aF(r)]}}function aq(e,t,r,n=eV.TypedDataRevision.LEGACY){let[a,i]=(e[t]??aL[n].presetTypes[t]).reduce(([a,i],s)=>{if(void 0===r[s.name]||null===r[s.name]&&"enum"!==s.type)throw Error(`Cannot encode data: missing data for '${s.name}'`);let o=r[s.name],l={parent:t,key:s.name},[c,u]=aG(e,s.type,o,l,n);return[[...a,c],[...i,u]]},[["felt"],[aW(e,t,n)]]);return[a,i]}function aK(e,t,r,n=eV.TypedDataRevision.LEGACY){return aL[n].hashMethod(aq(e,t,r,n)[1])}function aY(e,t){if(!aH(e))throw Error("Typed data does not match JSON schema");let r=aV(e),{domain:n,hashMethod:a}=aL[r];return a([tP("StarkNet Message"),aK(e.types,n,e.domain,r),t,aK(e.types,e.primaryType,e.message,r)])}function aZ(e,t,r,n){let a=aH(e);if(!tf(e)&&!a)throw Error("message has a wrong format.");if(a&&void 0===n)throw Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(a&&!tf(n))throw Error("accountAddress shall be a BigNumberish");let i=a?aY(e,n):e8(e),s=Array.isArray(t)?new rK.Signature(BigInt(t[0]),BigInt(t[1])):t,o=e8(r);return rK.verify(s,i,o)}var aX=class{responseParser;channel;constructor(e){if(e&&"channel"in e)this.channel=e.channel,this.responseParser="responseParser"in e?e.responseParser:new aB;else{if(e&&e.specVersion)if(nP("0.8",e.specVersion))this.channel=new aS.RpcChannel({...e,waitMode:!1});else if(nP("0.7",e.specVersion))this.channel=new eh.RpcChannel({...e,waitMode:!1});else throw Error(`unsupported channel for spec version: ${e.specVersion}`);else if(nP("0.8",ec.get("rpcVersion")))this.channel=new aS.RpcChannel({...e,waitMode:!1});else if(nP("0.7",ec.get("rpcVersion")))this.channel=new eh.RpcChannel({...e,waitMode:!1});else throw Error("unable to define spec version for channel");this.responseParser=new aB(e?.feeMarginPercentage)}}static async create(e){let t=new eh.RpcChannel({...e}),r=await t.getSpecVersion();if(nD(r)||ed.warn(`Using incompatible node spec version ${r}`),nP("0.7",r))return new this({...e,specVersion:ea.v0_7_1});if(nP("0.8",r))return new this({...e,specVersion:ea.v0_8_1});throw new n8(`Provided RPC node specification version ${r} is not compatible with the SDK. SDK supported RPC versions ${Object.keys(ea).toString()}`)}fetch(e,t,r=0){return this.channel.fetch(e,t,r)}async getChainId(){return this.channel.getChainId()}readSpecVersion(){return this.channel.readSpecVersion()}async getSpecVersion(){return this.channel.getSpecVersion()}setUpSpecVersion(){return this.channel.setUpSpecVersion()}async getNonceForAddress(e,t){return this.channel.getNonceForAddress(e,t)}async getBlock(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(e){return this.channel.getBlockWithTxHashes(e)}async getBlockWithTxs(e){return this.channel.getBlockWithTxs(e)}async waitForBlock(e="pending",t=5e3){if(e===e_.LATEST)return;let r=await this.getBlockNumber(),n=e===e_.PENDING?r+1:Number(e8(e));if(n<=r)return;let{retries:a}=this.channel,i=a,s=!1;for(;!s;)if(await this.getBlockNumber()===n?s=!0:await as(t),(i-=1)<=0)throw Error(`waitForBlock() timed-out after ${a} tries.`)}async getL1GasPrice(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseL1GasPriceResponse)}async getL1MessageHash(e){let t=await this.channel.getTransactionByHash(e);eG("L1_HANDLER"===t.type,"This L2 transaction is not a L1 message.");let{calldata:r,contract_address:n,entry_point_selector:a,nonce:i}=t;return tv([r[0],n,i,a,r.length-1,...r.slice(1)])}async getBlockWithReceipts(e){return this.channel.getBlockWithReceipts(e)}getStateUpdate=this.getBlockStateUpdate;async getBlockStateUpdate(e){return this.channel.getBlockStateUpdate(e)}async getBlockTransactionsTraces(e){return this.channel.getBlockTransactionsTraces(e)}async getBlockTransactionCount(e){return this.channel.getBlockTransactionCount(e)}async getTransaction(e){return this.channel.getTransactionByHash(e)}async getTransactionByHash(e){return this.channel.getTransactionByHash(e)}async getTransactionByBlockIdAndIndex(e,t){return this.channel.getTransactionByBlockIdAndIndex(e,t)}async getTransactionReceipt(e){let t=await this.channel.getTransactionReceipt(e);return new aO(this.responseParser.parseTransactionReceipt(t))}async getTransactionTrace(e){return this.channel.getTransactionTrace(e)}async getTransactionStatus(e){return this.channel.getTransactionStatus(e)}async getSimulateTransaction(e,t){return this.channel.simulateTransaction(e,t).then(e=>this.responseParser.parseSimulateTransactionResponse(e))}async waitForTransaction(e,t){return new aO(await this.channel.waitForTransaction(e,t))}async getStorageAt(e,t,r){return this.channel.getStorageAt(e,t,r)}async getClassHashAt(e,t){return this.channel.getClassHashAt(e,t)}async getClassByHash(e){return this.getClass(e)}async getClass(e,t){return this.channel.getClass(e,t).then(this.responseParser.parseContractClassResponse)}async getClassAt(e,t){return this.channel.getClassAt(e,t).then(this.responseParser.parseContractClassResponse)}async getContractVersion(e,t,{blockIdentifier:r=this.channel.blockIdentifier,compiler:n=!0}={}){let a;if(e)a=await this.getClassAt(e,r);else if(t)a=await this.getClass(t,r);else throw Error("getContractVersion require contractAddress or classHash");return n1(a)?n?{cairo:"1",compiler:rd(a.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getInvokeEstimateFee(e,t,r,n){return this.channel.getEstimateFee([{type:eg.INVOKE,...e,...t}],{blockIdentifier:r,skipValidate:n}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getDeclareEstimateFee(e,t,r,n){return this.channel.getEstimateFee([{type:eg.DECLARE,...e,...t}],{blockIdentifier:r,skipValidate:n}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getDeployAccountEstimateFee(e,t,r,n){return this.channel.getEstimateFee([{type:eg.DEPLOY_ACCOUNT,...e,...t}],{blockIdentifier:r,skipValidate:n}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getEstimateFeeBulk(e,t){return this.channel.getEstimateFee(e,t).then(e=>this.responseParser.parseFeeEstimateBulkResponse(e))}async invokeFunction(e,t){return this.channel.invoke(e,t)}async declareContract(e,t){return this.channel.declare(e,t)}async deployAccountContract(e,t){return this.channel.deployAccount(e,t)}async callContract(e,t){return this.channel.callContract(e,t)}async estimateMessageFee(e,t){return this.channel.estimateMessageFee(e,t)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(e){return this.channel.getEvents(e)}async verifyMessageInStarknet(e,t,r,n,a){let i,s=aH(e);if(!tf(e)&&!s)throw Error("message has a wrong format.");if(!tf(r))throw Error("accountAddress shall be a BigNumberish");let o=s?aY(e,r):e8(e),l=a||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","0x617267656e742f696e76616c69642d7369676e6174757265","is invalid, with respect to the public key","0x697320696e76616c6964","INVALID_SIG","0x494e56414c49445f534947"]};for(let e of n?[n]:["isValidSignature","is_valid_signature"])try{let n=await this.callContract({contractAddress:e8(r),entrypoint:e,calldata:rj.compile({hash:e6(o).toString(),signature:nj(t)})});if(l.nokResponse.includes(n[0].toString()))return!1;if(0===l.okResponse.length||l.okResponse.includes(n[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(e){if(l.error.some(t=>e.message.includes(t)))return!1;i=e}throw Error(`Signature verification Error: ${i}`)}async isClassDeclared(e,t){let r;if(!e.classHash&&"contract"in e)r=n2(e).classHash;else if(e.classHash)r=e.classHash;else throw Error("contractClassIdentifier type not satisfied");try{return await this.getClass(r,t) instanceof Object}catch(e){if(e instanceof n8)return!1;throw e}}async prepareInvocations(e){let t=[];for(let r of e)r.type===eg.DECLARE?await this.isClassDeclared("payload"in r?r.payload:r)||t.unshift(r):t.push(r);return t}async getL1MessagesStatus(e){if(this.channel instanceof aS.RpcChannel)return this.channel.getMessagesStatus(e);throw new n8("Unsupported method for RPC version")}async getStorageProof(e,t,r,n){if(this.channel instanceof aS.RpcChannel)return this.channel.getStorageProof(e,t,r,n);throw new n8("Unsupported method for RPC version")}async getCompiledCasm(e){if(this.channel instanceof aS.RpcChannel)return this.channel.getCompiledCasm(e);throw new n8("Unsupported method for RPC version")}},aJ=e.r(419630),aQ={};c(aQ,{StarknetIdContract:()=>a9,StarknetIdIdentityContract:()=>it,StarknetIdMulticallContract:()=>ia,StarknetIdPfpContract:()=>il,StarknetIdPopContract:()=>iu,StarknetIdVerifierContract:()=>is,dynamicCallData:()=>ig,dynamicFelt:()=>ip,execution:()=>ih,getStarknetIdContract:()=>ie,getStarknetIdIdentityContract:()=>ir,getStarknetIdMulticallContract:()=>ii,getStarknetIdPfpContract:()=>ic,getStarknetIdPopContract:()=>id,getStarknetIdVerifierContract:()=>io,isStarkDomain:()=>im,useDecoded:()=>a4,useEncoded:()=>a7});var a0="abcdefghijklmnopqrstuvwxyz0123456789-",a1=BigInt(a0.length+1),a2="",a5=BigInt(a0.length),a6=BigInt(a2.length),a3=BigInt(a2.length+1);function a8(e){let t=0;for(;e.endsWith(a2[a2.length-1]);)e=e.substring(0,e.length-1),t+=1;return[e,t]}function a4(e){let t="";return(e.forEach(e=>{for(;e!==U;){let r=e%a1;if(e/=a1,r===BigInt(a0.length)){let r=e/a3;if(r===U){let n=e%a3;e=r,n===U?t+=a0[0]:t+=a2[Number(n)-1]}else t+=a2[Number(e%a6)],e/=a6}else t+=a0[Number(r)]}let[r,n]=a8(t);n&&(t=r+(n%2==0?a2[a2.length-1].repeat(n/2-1)+a2[0]+a0[1]:a2[a2.length-1].repeat((n-1)/2+1))),t+="."}),t)?t.concat("stark"):t}function a7(e){let t=BigInt(0),r=BigInt(1);if(e.endsWith(a2[0]+a0[1])){let[t,r]=a8(e.substring(0,e.length-2));e=t+a2[a2.length-1].repeat(2*(r+1))}else{let[t,r]=a8(e);r&&(e=t+a2[a2.length-1].repeat(1+2*(r-1)))}for(let n=0;n<e.length;n+=1){let a=e[n],i=a0.indexOf(a),s=BigInt(a0.indexOf(a));-1!==i?n===e.length-1&&e[n]===a0[0]?(t+=r*a5,r*=a1*a1):(t+=r*s,r*=a1):-1!==a2.indexOf(a)&&(t+=r*a5,r*=a1,t+=r*BigInt(+(n===e.length-1)+a2.indexOf(a)),r*=a6)}return t}var a9={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function ie(e){switch(e){case er.SN_MAIN:return a9.MAINNET;case er.SN_SEPOLIA:return a9.TESTNET_SEPOLIA;default:throw Error("Starknet.id is not yet deployed on this network")}}var it={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function ir(e){switch(e){case er.SN_MAIN:return it.MAINNET;case er.SN_SEPOLIA:return it.TESTNET_SEPOLIA;default:throw Error("Starknet.id verifier contract is not yet deployed on this network")}}var ia="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function ii(e){switch(e){case er.SN_MAIN:case er.SN_SEPOLIA:return ia;default:throw Error("Starknet.id multicall contract is not yet deployed on this network")}}var is={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function io(e){switch(e){case er.SN_MAIN:return is.MAINNET;case er.SN_SEPOLIA:return is.TESTNET_SEPOLIA;default:throw Error("Starknet.id verifier contract is not yet deployed on this network")}}var il={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function ic(e){switch(e){case er.SN_MAIN:return il.MAINNET;case er.SN_SEPOLIA:return il.TESTNET_SEPOLIA;default:throw Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var iu={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function id(e){switch(e){case er.SN_MAIN:return iu.MAINNET;case er.SN_SEPOLIA:return iu.TESTNET_SEPOLIA;default:throw Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function ih(e,t,r){return new rm({Static:e,IfEqual:t?rp(t[0],t[1],t[2]):void 0,IfNotEqual:r?rp(r[0],r[1],r[2]):void 0})}function ip(e,t){return new rm({Hardcoded:e,Reference:t?rp(t[0],t[1]):void 0})}function ig(e,t,r){return new rm({Hardcoded:e,Reference:t?rp(t[0],t[1]):void 0,ArrayReference:r?rp(r[0],r[1]):void 0})}function im(e){return/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\.)*[a-z0-9-]{1,48}\.stark$/.test(e)}var iy=class e{async getStarkName(t,r){return e.getStarkName(this,t,r)}async getAddressFromStarkName(t,r){return e.getAddressFromStarkName(this,t,r)}async getStarkProfile(t,r,n,a,i,s,o){return e.getStarkProfile(this,t,r,n,a,i,s,o)}static async getStarkName(e,t,r){let n=await e.getChainId(),a=r??ie(n);try{let r=(await e.callContract({contractAddress:a,entrypoint:"address_to_domain",calldata:rj.compile({address:t,hint:[]})})).map(e=>BigInt(e)).slice(1),n=a4(r);if(!n)throw Error("Starkname not found");return n}catch(e){if(e instanceof Error&&"Starkname not found"===e.message)throw e;throw Error("Could not get stark name")}}static async getAddressFromStarkName(e,t,r){let n=t.endsWith(".stark")?t:`${t}.stark`;if(!im(n))throw Error("Invalid domain, must be a valid .stark domain");let a=await e.getChainId(),i=r??ie(a);try{let t=n.replace(".stark","").split(".").map(e=>a7(e).toString(10));return(await e.callContract({contractAddress:i,entrypoint:"domain_to_address",calldata:rj.compile({domain:t,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(e,t,r,n,a,i,s,o){let l=await e.getChainId(),c=r??ie(l),u=n??ir(l),d=a??io(l),h=i??ic(l),f=s??id(l),p=o??ii(l);try{let r=[{execution:ih({}),to:ig(c),selector:ig(tw("address_to_domain")),calldata:[ig(t),ig("0")]},{execution:ih({}),to:ip(c),selector:ip(tw("domain_to_id")),calldata:[ig(void 0,void 0,[0,0])]},{execution:ih({}),to:ip(u),selector:ip(tw("get_verifier_data")),calldata:[ig(void 0,[1,0]),ig(tP("twitter")),ig(d),ig("0")]},{execution:ih({}),to:ip(u),selector:ip(tw("get_verifier_data")),calldata:[ig(void 0,[1,0]),ig(tP("github")),ig(d),ig("0")]},{execution:ih({}),to:ip(u),selector:ip(tw("get_verifier_data")),calldata:[ig(void 0,[1,0]),ig(tP("discord")),ig(d),ig("0")]},{execution:ih({}),to:ip(u),selector:ip(tw("get_verifier_data")),calldata:[ig(void 0,[1,0]),ig(tP("proof_of_personhood")),ig(f),ig("0")]},{execution:ih({}),to:ip(u),selector:ip(tw("get_verifier_data")),calldata:[ig(void 0,[1,0]),ig(tP("nft_pp_contract")),ig(h),ig("0")]},{execution:ih({}),to:ip(u),selector:ip(tw("get_extended_verifier_data")),calldata:[ig(void 0,[1,0]),ig(tP("nft_pp_id")),ig("2"),ig(h),ig("0")]},{execution:ih(void 0,void 0,[6,0,0]),to:ip(void 0,[6,0]),selector:ip(tw("tokenURI")),calldata:[ig(void 0,[7,1]),ig(void 0,[7,2])]}],n=await e.callContract({contractAddress:p,entrypoint:"aggregate",calldata:rj.compile({calls:r})});if(Array.isArray(n)){let e=parseInt(n[0],16),t=[],r=1;for(let a=0;a<e;a+=1)if(r<n.length){let e=parseInt(n[r],16);r+=1;let a=n.slice(r,r+e);t.push(a),r+=e}else break;let a=a4(t[0].slice(1).map(e=>BigInt(e))),i="0x0"!==t[2][0]?BigInt(t[2][0]).toString():void 0,s="0x0"!==t[3][0]?BigInt(t[3][0]).toString():void 0,o="0x0"!==t[4][0]?BigInt(t[4][0]).toString():void 0,l="0x1"===t[5][0],c=("0x9"===n[0]?t[8].slice(1).map(e=>tD(e)).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(t[1][0]).toString()}`;return{name:a,twitter:i,github:s,discord:o,proofOfPersonhood:l,profilePicture:c}}throw Error("Error while calling aggregate function")}catch(e){if(e instanceof Error)throw e;throw Error("Could not get user stark profile data from address")}}},ib=class extends(0,aJ.Mixin)(aX,iy){},i_=class{},iw=new aX({default:!0}),iE=class{},iv=class{pk;constructor(e=rK.utils.randomPrivateKey()){this.pk=e instanceof Uint8Array?A(e):e8(e)}async getPubKey(){return rK.getStarkKey(this.pk)}async signMessage(e,t){let r=aY(e,t);return this.signRaw(r)}async signTransaction(e,t){let r,n=ab(e,t.cairoVersion);if(Object.values(p.ETransactionVersion2).includes(t.version))r=nc({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version});else if(Object.values(p.ETransactionVersion3).includes(t.version))r=nc({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version,nonceDataAvailabilityMode:nY(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:nY(t.feeDataAvailabilityMode)});else throw Error("unsupported signTransaction version");return this.signRaw(r)}async signDeployAccountTransaction(e){let t,r=rj.compile(e.constructorCalldata);if(Object.values(p.ETransactionVersion2).includes(e.version))t=nd({...e,salt:e.addressSalt,constructorCalldata:r,version:e.version});else if(Object.values(p.ETransactionVersion3).includes(e.version))t=nd({...e,salt:e.addressSalt,compiledConstructorCalldata:r,version:e.version,nonceDataAvailabilityMode:nY(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:nY(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeployAccountTransaction version");return this.signRaw(t)}async signDeclareTransaction(e){let t;if(Object.values(p.ETransactionVersion2).includes(e.version))t=nu({...e,version:e.version});else if(Object.values(p.ETransactionVersion3).includes(e.version))t=nu({...e,version:e.version,nonceDataAvailabilityMode:nY(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:nY(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeclareTransaction version");return this.signRaw(t)}async signRaw(e){return rK.sign(e,this.pk)}},iS=e.r(678911),ix={};function iT(e){return new tq(e).toBigInt()}function iA(e){return tq.is(e)}function ik(e){return new tq(e).toUint256HexString()}c(ix,{bnToUint256:()=>ik,isUint256:()=>iA,uint256ToBN:()=>iT});var iI=class{pk;constructor(e=ar()){this.pk=e instanceof Uint8Array?A(e).padStart(64,"0"):k(e8(e)).padStart(64,"0")}async getPubKey(){return I(A(iS.secp256k1.getPublicKey(this.pk,!1)).padStart(130,"0").slice(2))}async signMessage(e,t){let r=aY(e,t),n=iS.secp256k1.sign(k(N(r)),this.pk);return this.formatEthSignature(n)}async signTransaction(e,t){let r,n=ab(e,t.cairoVersion);if(Object.values(p.ETransactionVersion2).includes(t.version))r=nc({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version});else if(Object.values(p.ETransactionVersion3).includes(t.version))r=nc({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version,nonceDataAvailabilityMode:nY(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:nY(t.feeDataAvailabilityMode)});else throw Error("unsupported signTransaction version");let a=iS.secp256k1.sign(k(N(r)),this.pk);return this.formatEthSignature(a)}async signDeployAccountTransaction(e){let t,r=rj.compile(e.constructorCalldata);if(Object.values(p.ETransactionVersion2).includes(e.version))t=nd({...e,salt:e.addressSalt,constructorCalldata:r,version:e.version});else if(Object.values(p.ETransactionVersion3).includes(e.version))t=nd({...e,salt:e.addressSalt,compiledConstructorCalldata:r,version:e.version,nonceDataAvailabilityMode:nY(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:nY(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeployAccountTransaction version");let n=iS.secp256k1.sign(k(N(t)),this.pk);return this.formatEthSignature(n)}async signDeclareTransaction(e){let t;if(Object.values(p.ETransactionVersion2).includes(e.version))t=nu({...e,version:e.version});else if(Object.values(p.ETransactionVersion3).includes(e.version))t=nu({...e,version:e.version,nonceDataAvailabilityMode:nY(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:nY(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeclareTransaction version");let r=iS.secp256k1.sign(k(N(t)),this.pk);return this.formatEthSignature(r)}formatEthSignature(e){let t=ik(e.r),r=ik(e.s);return[e8(t.low),e8(t.high),e8(r.low),e8(r.high),e8(e.recovery)]}},iC=class{transporter;_transporter;accountID;eip2645applicationName;pathBuffer;appVersion;pubKey;fullPubKey;constructor(e,t,r="LedgerW",n=iB){eG(t>=0,"Ledger account ID shall not be a negative number."),eG(t<=F,"Ledger account ID shall be < 2**31."),eG(!!r,"Ledger application name shall not be empty."),this.transporter=e,this._transporter=this.transporter,this.accountID=t,this.pubKey="",this.fullPubKey="",this.eip2645applicationName=r,this.appVersion="",this.pathBuffer=n(this.accountID,this.eip2645applicationName)}async getPubKey(){return this.pubKey||await this.getPublicKeys(),this.pubKey}async getFullPubKey(){return this.fullPubKey||await this.getPublicKeys(),this.fullPubKey}async getAppVersion(){if(!this.appVersion){let e=await this._transporter.send(Number("0x5a"),0,0,0);this.appVersion=`${e[0]}.${e[1]}.${e[2]}`}return this.appVersion}async signMessage(e,t){let r=aY(e,t);return this.signRaw(r)}async signTransaction(e,t){let r,n=ab(e,t.cairoVersion);if(Object.values(p.ETransactionVersion2).includes(t.version))r=nc({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version});else if(Object.values(p.ETransactionVersion3).includes(t.version))r=nc({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version,nonceDataAvailabilityMode:nY(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:nY(t.feeDataAvailabilityMode)});else throw Error("unsupported signTransaction version");return this.signRaw(r)}async signDeployAccountTransaction(e){let t,r=rj.compile(e.constructorCalldata);if(Object.values(p.ETransactionVersion2).includes(e.version))t=nd({...e,salt:e.addressSalt,constructorCalldata:r,version:e.version});else if(Object.values(p.ETransactionVersion3).includes(e.version))t=nd({...e,salt:e.addressSalt,compiledConstructorCalldata:r,version:e.version,nonceDataAvailabilityMode:nY(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:nY(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeployAccountTransaction version");return this.signRaw(t)}async signDeclareTransaction(e){let t;if(Object.values(p.ETransactionVersion2).includes(e.version))t=nu({...e,version:e.version});else if(Object.values(p.ETransactionVersion3).includes(e.version))t=nu({...e,version:e.version,nonceDataAvailabilityMode:nY(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:nY(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeclareTransaction version");return this.signRaw(t)}async signRaw(e){I(A(await this._transporter.send(Number("0x5a"),2,0,0,Buffer.from(this.pathBuffer))));let t=tu(e8(BigInt(e)<<4n)),r=Uint8Array.from(await this._transporter.send(Number("0x5a"),2,1,0,Buffer.from(t))),n=BigInt(I(A(r.subarray(1,33)))),a=BigInt(I(A(r.subarray(33,65)))),i=r[65];return new rK.Signature(n,a).addRecoveryBit(i)}async getPublicKeys(){let e=this.pathBuffer,t=Uint8Array.from(await this._transporter.send(Number("0x5a"),1,0,0,Buffer.from(e)));this.pubKey=I(A(t.subarray(1,33))),this.fullPubKey=I(A(t.subarray(0,65)))}};function iB(e,t="LedgerW"){let r=new Uint8Array([128,0,10,85]),n=new Uint8Array([71,65,233,201]),a="LedgerW"===t?new Uint8Array([43,206,231,219]):th(t),i=new Uint8Array([0,0,0,0]);return D([r,n,a,i,tu(I(k(e8(e)).padStart(8,"0"))),new Uint8Array([0,0,0,0])])}var iO=e.r(144554);function iN(e){let t=k(e8(e1(e)?I(e):e)).padStart(64,"0");return I(t)}function iP(e){let t=iN(e);if(!t.match(/^(0x)?[0-9a-fA-F]{64}$/))throw Error("Invalid Address Format");return tr(t,U,j-1n,"Starknet Address"),t}function iD(e){let t=k(iP(e)).toLowerCase().split(""),r=k(tb(e)),n=(0,iO.hexToBytes)(r.padStart(64,"0"));for(let e=0;e<t.length;e+=2)n[e>>1]>>4>=8&&(t[e]=t[e].toUpperCase()),(15&n[e>>1])>=8&&(t[e+1]=t[e+1].toUpperCase());return I(t.join(""))}function iR(e){return iD(e)===e}var iL=class extends iC{constructor(e,t,r="LedgerW",n=iU){super(e,t,r,n)}async signTransaction(e,t){let r=ab(e,t.cairoVersion);if(Object.values(p.ETransactionVersion2).includes(t.version)){let n=nc({...t,senderAddress:t.walletAddress,compiledCalldata:r,version:t.version}),a=await this.signTxV1(t,e);return eG(e6(n)===a.hash,"The V1 transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),a.signature}if(Object.values(p.ETransactionVersion3).includes(t.version)){let n=nc({...t,senderAddress:t.walletAddress,compiledCalldata:r,version:t.version,nonceDataAvailabilityMode:nY(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:nY(t.feeDataAvailabilityMode)}),a=await this.signTxV3(t,e);return eG(e6(n)===a.hash,"The V3 transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),a.signature}throw Error("unsupported signTransaction version")}async signDeployAccountTransaction(e){let t,r=rj.compile(e.constructorCalldata);if(Object.values(p.ETransactionVersion2).includes(e.version)){t=nd({...e,salt:e.addressSalt,constructorCalldata:r,version:e.version});let n=await this.signDeployAccountV1(e);return eG(e6(t)===n.hash,"The transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),n.signature}if(Object.values(p.ETransactionVersion3).includes(e.version)){t=nd({...e,salt:e.addressSalt,compiledConstructorCalldata:r,version:e.version,nonceDataAvailabilityMode:nY(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:nY(e.feeDataAvailabilityMode)});let n=await this.signDeployAccountV3(e);return eG(e6(t)===n.hash,"The transaction hash calculated by Starknet.js is different from the one calculated by the Ledger."),n.signature}throw Error("unsupported signDeployAccountTransaction version")}convertBnToLedger(e){return tu(iN(e8(e)))}decodeSignatureLedger(e){let t=BigInt(I(A(e.subarray(0,32)))),r=BigInt(I(A(e.subarray(33,65)))),n=BigInt(I(A(e.subarray(65,97)))),a=e[97];return{hash:t,signature:new rK.Signature(r,n).addRecoveryBit(a)}}encodeCall(e){let t=this.convertBnToLedger(e.contractAddress),r=tu(iN(tE(e.entrypoint))),n=new Uint8Array([]);e.calldata&&(n=D(rj.compile(e.calldata).map(e=>this.convertBnToLedger(e))));let a=D([t,r,n]),i=[];for(let e=0;e<a.length;e+=224)i.push(a.subarray(e,e+224));return i}async signTxV1(e,t){await this._transporter.send(Number("0x5a"),4,0,0,Buffer.from(this.pathBuffer));let r=this.convertBnToLedger(e.walletAddress),n=this.convertBnToLedger(e.maxFee),a=D([r,n,this.convertBnToLedger(e.chainId),this.convertBnToLedger(e.nonce)]);await this._transporter.send(Number("0x5a"),4,1,0,Buffer.from(a));let i=this.convertBnToLedger(t.length);await this._transporter.send(Number("0x5a"),4,2,0,Buffer.from(i));let s=new Uint8Array(0);for(let e of t){let t=this.encodeCall(e);await this._transporter.send(Number("0x5a"),4,3,0,Buffer.from(t[0])),t.length>1&&t.slice(1).forEach(async e=>{await this._transporter.send(Number("0x5a"),4,3,1,Buffer.from(e))}),s=await this._transporter.send(Number("0x5a"),4,3,2)}return this.decodeSignatureLedger(s)}async signTxV3(e,t){eG(e.paymasterData.length<=7,"Paymaster data includes more than 7 items."),eG(e.accountDeploymentData.length<=7,"accountDeploymentData includes more than 7 items"),await this._transporter.send(Number("0x5a"),3,0,0,Buffer.from(this.pathBuffer));let r=this.convertBnToLedger(e.walletAddress),n=this.convertBnToLedger(e.tip),a=this.convertBnToLedger(e.chainId),i=this.convertBnToLedger(e.nonce),s=this.convertBnToLedger(r9(e.nonceDataAvailabilityMode===p.EDataAvailabilityMode.L1?p.EDAMode.L1:p.EDAMode.L2,e.feeDataAvailabilityMode===p.EDataAvailabilityMode.L1?p.EDAMode.L1:p.EDAMode.L2)),o=D([r,n,this.convertBnToLedger(ne(e.resourceBounds)),this.convertBnToLedger(nt(e.resourceBounds)),a,i,s]);await this._transporter.send(Number("0x5a"),3,1,0,Buffer.from(o));let l=D(e.paymasterData.map(e=>this.convertBnToLedger(e)));await this._transporter.send(Number("0x5a"),3,2,0,Buffer.from(l));let c=D(e.paymasterData.map(e=>this.convertBnToLedger(e)));await this._transporter.send(Number("0x5a"),3,3,0,Buffer.from(c));let u=this.convertBnToLedger(t.length);await this._transporter.send(Number("0x5a"),3,4,0,Buffer.from(u));let d=new Uint8Array(0);for(let e of t){let t=this.encodeCall(e);await this._transporter.send(Number("0x5a"),3,5,0,Buffer.from(t[0])),t.length>1&&t.slice(1).forEach(async e=>{await this._transporter.send(Number("0x5a"),3,5,1,Buffer.from(e))}),d=await this._transporter.send(Number("0x5a"),3,5,2)}return this.decodeSignatureLedger(d)}async signDeployAccountV1(e){await this._transporter.send(Number("0x5a"),6,0,0,Buffer.from(this.pathBuffer));let t=this.convertBnToLedger(e.contractAddress),r=this.convertBnToLedger(e.classHash),n=this.convertBnToLedger(e.addressSalt),a=D([t,r,n,this.convertBnToLedger(e.chainId),this.convertBnToLedger(e.nonce)]);await this._transporter.send(Number("0x5a"),6,1,0,Buffer.from(a));let i=this.convertBnToLedger(e.maxFee);await this._transporter.send(Number("0x5a"),6,2,0,Buffer.from(i));let s=rj.compile(e.constructorCalldata),o=this.convertBnToLedger(s.length);await this._transporter.send(Number("0x5a"),6,3,0,Buffer.from(o));let l=D(s.map(e=>this.convertBnToLedger(e))),c=[];for(let e=0;e<l.length;e+=224)c.push(l.subarray(e,e+224));let u=new Uint8Array(0);for(let e of c)u=await this._transporter.send(Number("0x5a"),6,4,0,Buffer.from(e));return this.decodeSignatureLedger(u)}async signDeployAccountV3(e){await this._transporter.send(Number("0x5a"),5,0,0,Buffer.from(this.pathBuffer));let t=this.convertBnToLedger(e.contractAddress),r=this.convertBnToLedger(e.chainId),n=this.convertBnToLedger(e.nonce),a=this.convertBnToLedger(r9(e.nonceDataAvailabilityMode===p.EDataAvailabilityMode.L1?p.EDAMode.L1:p.EDAMode.L2,e.feeDataAvailabilityMode===p.EDataAvailabilityMode.L1?p.EDAMode.L1:p.EDAMode.L2)),i=D([t,r,n,a,this.convertBnToLedger(e.classHash),this.convertBnToLedger(e.addressSalt)]);await this._transporter.send(Number("0x5a"),5,1,0,Buffer.from(i));let s=this.convertBnToLedger(e.tip),o=D([s,this.convertBnToLedger(ne(e.resourceBounds)),this.convertBnToLedger(nt(e.resourceBounds))]);await this._transporter.send(Number("0x5a"),5,2,0,Buffer.from(o));let l=D(e.paymasterData.map(e=>this.convertBnToLedger(e)));await this._transporter.send(Number("0x5a"),5,3,0,Buffer.from(l));let c=rj.compile(e.constructorCalldata),u=this.convertBnToLedger(c.length);await this._transporter.send(Number("0x5a"),5,4,0,Buffer.from(u));let d=D(c.map(e=>this.convertBnToLedger(e))),h=[];for(let e=0;e<d.length;e+=224)h.push(d.subarray(e,e+224));let f=new Uint8Array(0);for(let e of h)f=await this._transporter.send(Number("0x5a"),5,5,0,Buffer.from(e));return this.decodeSignatureLedger(f)}};function iU(e,t="LedgerW"){let r=new Uint8Array([J,0,10,85]),n=new Uint8Array([71|J,65,233,201]),a="LedgerW"===t?new Uint8Array([43,206,231,219]):th(t),i=D([new Uint8Array([a[0]|J]),a.subarray(1)]),s=new Uint8Array([J,0,0,0]);return D([r,n,i,s,tu(I(k(e8(BigInt(e)|Q)).padStart(8,"0"))),new Uint8Array([0,0,0,0])])}var iV=class extends iL{constructor(e,t,r="LedgerW",n=iU){super(e,t,r,n)}async signTxV1(e,t){await this._transporter.send(Number("0x5a"),4,0,0,Buffer.from(this.pathBuffer));let r=this.convertBnToLedger(e.walletAddress),n=this.convertBnToLedger(e.maxFee),a=D([r,n,this.convertBnToLedger(e.chainId),this.convertBnToLedger(e.nonce)]);await this._transporter.send(Number("0x5a"),4,1,0,Buffer.from(a));let i=this.convertBnToLedger(t.length);await this._transporter.send(Number("0x5a"),4,2,0,Buffer.from(i));let s=new Uint8Array(0);for(let e of t){let t=this.encodeCall(e);s=await this._transporter.send(Number("0x5a"),4,3,0,Buffer.from(t[0])),t.length>1&&t.slice(1).forEach(async e=>{s=await this._transporter.send(Number("0x5a"),4,3,1,Buffer.from(e))})}return this.decodeSignatureLedger(s)}async signTxV3(e,t){eG(e.paymasterData.length<=7,"Paymaster data includes more than 7 items."),eG(e.accountDeploymentData.length<=7,"accountDeploymentData includes more than 7 items"),await this._transporter.send(Number("0x5a"),3,0,0,Buffer.from(this.pathBuffer));let r=this.convertBnToLedger(e.walletAddress),n=this.convertBnToLedger(e.chainId),a=D([r,n,this.convertBnToLedger(e.nonce),this.convertBnToLedger(r9(nY(e.nonceDataAvailabilityMode),nY(e.feeDataAvailabilityMode)))]);if(await this._transporter.send(Number("0x5a"),3,1,0,Buffer.from(a)),ek(e.resourceBounds)){let t=this.convertBnToLedger(e.tip),r=this.convertBnToLedger(ne(e.resourceBounds)),n=D([t,r,this.convertBnToLedger(nt(e.resourceBounds)),this.convertBnToLedger(nr(e.resourceBounds))]);await this._transporter.send(Number("0x5a"),3,2,0,Buffer.from(n))}else{let t=this.convertBnToLedger(e.tip),r=D([t,this.convertBnToLedger(ne(e.resourceBounds)),this.convertBnToLedger(nt(e.resourceBounds))]);await this._transporter.send(Number("0x5a"),3,2,0,Buffer.from(r))}let i=D(e.paymasterData.map(e=>this.convertBnToLedger(e)));await this._transporter.send(Number("0x5a"),3,3,0,Buffer.from(i));let s=D(e.paymasterData.map(e=>this.convertBnToLedger(e)));await this._transporter.send(Number("0x5a"),3,4,0,Buffer.from(s));let o=this.convertBnToLedger(t.length);await this._transporter.send(Number("0x5a"),3,5,0,Buffer.from(o));let l=new Uint8Array(0);for(let e of t){let t=this.encodeCall(e);l=await this._transporter.send(Number("0x5a"),3,6,0,Buffer.from(t[0])),t.length>1&&t.slice(1).forEach(async e=>{l=await this._transporter.send(Number("0x5a"),3,6,1,Buffer.from(e))})}return this.decodeSignatureLedger(l)}async signDeployAccountV1(e){await this._transporter.send(Number("0x5a"),6,0,0,Buffer.from(this.pathBuffer));let t=this.convertBnToLedger(e.contractAddress),r=this.convertBnToLedger(e.classHash),n=this.convertBnToLedger(e.addressSalt),a=this.convertBnToLedger(e.maxFee),i=D([t,r,n,a,this.convertBnToLedger(e.chainId),this.convertBnToLedger(e.nonce)]);await this._transporter.send(Number("0x5a"),6,1,0,Buffer.from(i));let s=rj.compile(e.constructorCalldata),o=this.convertBnToLedger(s.length);await this._transporter.send(Number("0x5a"),6,2,0,Buffer.from(o));let l=D(s.map(e=>this.convertBnToLedger(e))),c=[];for(let e=0;e<l.length;e+=224)c.push(l.subarray(e,e+224));let u=new Uint8Array(0);for(let e of c)u=await this._transporter.send(Number("0x5a"),6,3,0,Buffer.from(e));return this.decodeSignatureLedger(u)}async signDeployAccountV3(e){await this._transporter.send(Number("0x5a"),5,0,0,Buffer.from(this.pathBuffer));let t=this.convertBnToLedger(e.contractAddress),r=this.convertBnToLedger(e.chainId),n=this.convertBnToLedger(e.nonce),a=this.convertBnToLedger(r9(nY(e.nonceDataAvailabilityMode),nY(e.feeDataAvailabilityMode))),i=D([t,r,n,a,this.convertBnToLedger(e.classHash),this.convertBnToLedger(e.addressSalt)]);if(await this._transporter.send(Number("0x5a"),5,1,0,Buffer.from(i)),ek(e.resourceBounds)){let t=this.convertBnToLedger(e.tip),r=this.convertBnToLedger(ne(e.resourceBounds)),n=D([t,r,this.convertBnToLedger(nt(e.resourceBounds)),this.convertBnToLedger(nr(e.resourceBounds))]);await this._transporter.send(Number("0x5a"),5,2,0,Buffer.from(n))}else{let t=this.convertBnToLedger(e.tip),r=D([t,this.convertBnToLedger(ne(e.resourceBounds)),this.convertBnToLedger(nt(e.resourceBounds))]);await this._transporter.send(Number("0x5a"),5,2,0,Buffer.from(r))}let s=D(e.paymasterData.map(e=>this.convertBnToLedger(e)));await this._transporter.send(Number("0x5a"),5,3,0,Buffer.from(s));let o=rj.compile(e.constructorCalldata),l=this.convertBnToLedger(o.length);await this._transporter.send(Number("0x5a"),5,4,0,Buffer.from(l));let c=D(o.map(e=>this.convertBnToLedger(e))),u=[];for(let e=0;e<c.length;e+=224)u.push(c.subarray(e,e+224));let d=new Uint8Array(0);for(let e of u)d=await this._transporter.send(Number("0x5a"),5,5,0,Buffer.from(e));return this.decodeSignatureLedger(d)}encodeCall(e){let t=this.convertBnToLedger(e.contractAddress),r=tu(iN(tE(e.entrypoint))),n=new Uint8Array([]);if(e.calldata){let t=rj.compile(e.calldata);n=D([this.convertBnToLedger(t.length),...t.map(e=>this.convertBnToLedger(e))])}else n=this.convertBnToLedger("0x00");let a=D([t,r,n]),i=[];for(let e=0;e<a.length;e+=224)i.push(a.subarray(e,e+224));return i}},iF={};function iH(e){return"event"===e.type}function iM(e){return rc(e)?function(e){let t=e.filter(e=>iH(e)&&"struct"===e.kind),r=e.filter(e=>iH(e)&&"enum"===e.kind);return t.reduce((e,t)=>{let n=[],{name:a}=t,i=!1,s=e=>e.type===a;for(;;){let e=r.find(e=>e.variants.some(s));if(eX(e))break;let t=e.variants.find(s);n.unshift(t.name),"flat"===t.kind&&(i=!0),a=e.name}if(0===n.length)throw Error("inconsistency in ABI events definition.");i&&(n=[n[n.length-1]]);let o=n.pop(),l={[I(rK.keccak(S(o)).toString(16))]:t};for(;n.length>0;)l={[I(rK.keccak(S(n.pop())).toString(16))]:l};return function e(t,r){let n={...t};return e2(t)&&e2(r)&&Object.keys(r).forEach(a=>{e2(r[a])&&a in t?n[a]=e(t[a],r[a]):Object.assign(n,{[a]:r[a]})}),n}(e,l={...l})},{})}(e):e.filter(e=>"event"===e.type).reduce((e,t)=>{let r=t.name,n={...t};return n.name=r,{...e,[I(rK.keccak(S(r)).toString(16))]:n}},{})}function i$(e,t,r,n){return e.flat().reduce((e,a)=>{let i=JSON.parse(JSON.stringify(a)),s=t[i.keys.shift()??0];if(!s)return e;for(;!s.name;){let e=i.keys.shift();eG(!!e,'Not enough data in "keys" property of this event.'),s=s[e]}let o={};o[s.name]={};let l=i.keys[Symbol.iterator](),c=i.data[Symbol.iterator](),u=s.members?.filter(e=>"key"===e.kind)||s.keys,d=s.members?.filter(e=>"data"===e.kind)||s.data;return u.forEach(e=>{o[s.name][e.name]=rD(l,e,r,n,o[s.name])}),d.forEach(e=>{o[s.name][e.name]=rD(c,e,r,n,o[s.name])}),"block_hash"in i&&(o.block_hash=i.block_hash),"block_number"in i&&(o.block_number=i.block_number),"transaction_hash"in i&&(o.transaction_hash=i.transaction_hash),e.push(o),e},[])}function ij(e){if(!e.events?.length)throw Error("UDC emitted event is empty");let t=e.events.find(e=>tt(e.from_address)===tt(K.ADDRESS))||{data:[]};return{transaction_hash:e.transaction_hash,contract_address:t.data[0],address:t.data[0],deployer:t.data[1],unique:t.data[2],classHash:t.data[3],calldata_len:t.data[4],calldata:t.data.slice(5,5+parseInt(t.data[4],16)),salt:t.data[t.data.length-1]}}c(iF,{getAbiEvents:()=>iM,isAbiEvent:()=>iH,parseEvents:()=>i$,parseUDCEvent:()=>ij});var iz={};function iW(e){return"calldata_len"in e?{To:e.to,Selector:e.selector,Calldata:e.calldata}:e}function iG(e){let t=e.calldata??[],r=Array.isArray(t)?t:rj.compile(t);return{to:e.contractAddress,selector:tw(e.entrypoint),calldata:r}}function iq(e,t){let r=iG(e);return"1"===t?{...r,calldata_len:r.calldata.length,calldata:r.calldata}:{To:r.to,Selector:r.selector,Calldata:r.calldata}}function iK(e,t){return{name:"Account.execute_from_outside",version:t,chainId:e,..."2"===t?{revision:"1"}:{}}}function iY(e,t,r,n,a){return"1"===a?{types:eR,primaryType:"OutsideExecution",domain:iK(e,a),message:{...t,nonce:r,calls_len:n.length,calls:n.map(e=>iq(e,a))}}:{types:eL,primaryType:"OutsideExecution",domain:iK(e,a),message:{Caller:t.caller,Nonce:r,"Execute After":t.execute_after,"Execute Before":t.execute_before,Calls:n.map(e=>iq(e,a))}}}function iZ(e){let t=e.outsideExecution,r=nj(e.signature);return rj.compile({outside_execution:t,signature:r})}function iX(e){return(Array.isArray(e)?e:[e]).map(e=>{let t;if(e.version===eU.V1)t="execute_from_outside";else if(e.version===eU.V2)t="execute_from_outside_v2";else throw Error("Unsupported OutsideExecution version");return{contractAddress:e8(e.signerAddress),entrypoint:t,calldata:iZ(e)}})}c(iz,{buildExecuteFromOutsideCall:()=>iX,buildExecuteFromOutsideCallData:()=>iZ,getOutsideCall:()=>iG,getTypedData:()=>iY,toOutsideCallV2:()=>iW});var iJ={};async function iQ(e,t,r){let n={contractAddress:e8(t),entrypoint:"supports_interface",calldata:[e8(r)]};try{let t=await e.callContract(n);return 0n!==BigInt(t[0])}catch{return!1}}c(iJ,{supportsInterface:()=>iQ});var i0={};c(i0,{assertCallsAreStrictlyEqual:()=>i2,assertPaymasterTransactionSafety:()=>i5,getDefaultPaymasterNodeUrl:()=>i1});var i1=(e,t=!1)=>{t||ed.info("Using default public node url, please provide nodeUrl in provider options!");let r=eo[e??et.SN_SEPOLIA],n=Math.floor(Math.random()*r.length);return r[n]};function i2(e,t){let r="Provided calls are not strictly equal to the returned calls";eG(t.length-1===e.length,`${r}: Expected ${e.length+1} calls, got ${t.length}`);for(let n=0;n<e.length;n+=1){let a=e[n],i=iW(t[n]),s=e=>e6(e).toString(16).toLowerCase();eG(s(a.contractAddress)===s(i.To),`${r}: Contract address mismatch at call ${n}. Expected: ${a.contractAddress}, Got: ${i.To}`),eG(tw(a.entrypoint)===i.Selector,`${r}: Entrypoint mismatch at call ${n}. Expected: ${a.entrypoint}, Got: ${i.Selector}`);let o=rj.toCalldata(a.calldata),l=rj.toCalldata(i.Calldata);eG(o.length===l.length,`${r}: Calldata length mismatch at call ${n}. Expected length: ${o.length}, Got length: ${l.length}`);for(let e=0;e<o.length;e+=1)eG(BigInt(o[e])===BigInt(l[e]),`${r}: Calldata value mismatch at call ${n}, parameter ${e}. Expected: ${o[e]}, Got: ${l[e]}`)}}var i5=(e,t,r,n)=>{if("sponsored"!==r.feeMode.mode&&("invoke"===e.type||"deploy_and_invoke"===e.type)){let a="calls"in e.typed_data.message?e.typed_data.message.calls:e.typed_data.message.Calls;i2(t,a),((e,t)=>{eG(BigInt(iW(e[e.length-1]).To)===BigInt(t),"Gas token address is not equal to the provided gas token")})(a,r.feeMode.gasToken),n&&(eG(e.fee.suggested_max_fee_in_gas_token<=n,"Gas token price is too high"),((e,t)=>{let r=iW(e[e.length-1]);eG(BigInt(rj.toCalldata(r.Calldata)[1])===BigInt(t),"Gas token value is not equal to the provided gas fees")})(a,e.fee.suggested_max_fee_in_gas_token))}},i6=e=>"sponsored"===e.mode?{mode:"sponsored"}:{mode:"default",gas_token:e.gasToken},i3=e=>e?{execute_after:e.executeAfter||1,execute_before:e.executeBefore}:void 0,i8=e=>({version:e.version,feeMode:(e=>"sponsored"===e.mode?{mode:"sponsored"}:{mode:"default",gasToken:e.gas_token})(e.fee_mode),timeBounds:(e=>e?{executeAfter:e.execute_after,executeBefore:e.execute_before}:void 0)(e.time_bounds)}),i4={headers:{"Content-Type":"application/json"}},i7=class e{nodeUrl;headers;baseFetch;requestId;constructor(t){if(t instanceof e){this.nodeUrl=t.nodeUrl,this.headers={...i4.headers,...t.headers},this.baseFetch=t.baseFetch,this.requestId=t.requestId;return}if(t&&"nodeUrl"in t&&"headers"in t&&"baseFetch"in t){this.nodeUrl=t.nodeUrl??i1(void 0),this.headers={...i4.headers,...t.headers},this.baseFetch=t.baseFetch??aa,this.requestId=0;return}let{nodeUrl:r,headers:n,baseFetch:a}=t||{};r&&Object.values(et).includes(r)?this.nodeUrl=i1(r,t?.default):r?this.nodeUrl=r:this.nodeUrl=i1(void 0,t?.default),this.baseFetch=a??aa,this.headers={...i4.headers,...n},this.requestId=0}fetch(e,t,r=0){let n={id:r,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:ez(n),headers:this.headers})}errorHandler(e,t,r,n){if(r)throw new n4(r,e,t);if(n instanceof n8)throw n;if(n)throw Error(n.message)}async fetchEndpoint(e,t){try{this.requestId+=1;let r=await this.fetch(e,t,this.requestId),{error:n,result:a}=await r.json();return this.errorHandler(e,t,n),a}catch(r){throw this.errorHandler(e,t,r?.response?.data,r),r}}async isAvailable(){return this.fetchEndpoint("paymaster_isAvailable")}async buildTransaction(e,t){let r;switch(e.type){case"invoke":case"deploy_and_invoke":r={...e,invoke:{user_address:e.invoke.userAddress,calls:e.invoke.calls.map(e=>({to:e.contractAddress,selector:tw(e.entrypoint),calldata:rj.toHex(e.calldata)}))}};break;default:r=e}let n={version:t.version,fee_mode:i6(t.feeMode),time_bounds:i3(t.timeBounds)},a=await this.fetchEndpoint("paymaster_buildTransaction",{transaction:r,parameters:n}),i={gas_token_price_in_strk:BigInt(a.fee.gas_token_price_in_strk),estimated_fee_in_strk:BigInt(a.fee.estimated_fee_in_strk),estimated_fee_in_gas_token:BigInt(a.fee.estimated_fee_in_gas_token),suggested_max_fee_in_strk:BigInt(a.fee.suggested_max_fee_in_strk),suggested_max_fee_in_gas_token:BigInt(a.fee.suggested_max_fee_in_gas_token)};switch(a.type){case"invoke":return{type:"invoke",typed_data:a.typed_data,parameters:i8(a.parameters),fee:i};case"deploy_and_invoke":return{type:"deploy_and_invoke",deployment:a.deployment,typed_data:a.typed_data,parameters:i8(a.parameters),fee:i};default:return{type:"deploy",deployment:a.deployment,parameters:i8(a.parameters),fee:i}}}async executeTransaction(e,t){let r;switch(e.type){case"invoke":case"deploy_and_invoke":r={...e,invoke:{user_address:e.invoke.userAddress,typed_data:e.invoke.typedData,signature:nW(e.invoke.signature)}};break;default:r=e}let n={version:t.version,fee_mode:i6(t.feeMode),time_bounds:i3(t.timeBounds)};return this.fetchEndpoint("paymaster_executeTransaction",{transaction:r,parameters:n})}async getSupportedTokens(){return this.fetchEndpoint("paymaster_getSupportedTokens").then(e=>e.map(e=>({token_address:e.token_address,decimals:e.decimals,priceInStrk:BigInt(e.price_in_strk)})))}},i9=class{},se=new i7({default:!0}),st=class extends ib{signer;address;cairoVersion;transactionVersion;paymaster;constructor(e,t,r,n,a=ec.get("transactionVersion"),i){super(e),this.address=t.toLowerCase(),this.signer=e1(r)||r instanceof Uint8Array?new iv(r):r,n&&(this.cairoVersion=n.toString()),this.transactionVersion=a,this.paymaster=i?new i7(i):se,ed.debug("Account setup",{transactionVersion:this.transactionVersion,cairoVersion:this.cairoVersion,channel:this.channel.id})}static async create(){throw new n8("Not supported")}getPreferredVersion(e,t){return this.transactionVersion===eE.V3?t:this.transactionVersion===eE.V2?e:eE.V3}async getNonce(e){return super.getNonceForAddress(this.address,e)}async getNonceSafe(e){try{return e6(e??await this.getNonce())}catch(e){return 0n}}async getCairoVersion(e){if(!this.cairoVersion){let{cairo:t}=e?await super.getContractVersion(void 0,e):await super.getContractVersion(this.address);this.cairoVersion=t}return this.cairoVersion}async estimateFee(e,t={}){return this.estimateInvokeFee(e,t)}async estimateInvokeFee(e,t={}){let{nonce:r,blockIdentifier:n,version:a,skipValidate:i=!0}=t,s=Array.isArray(e)?e:[e],o=e6(r??await this.getNonce()),l=nZ(this.getPreferredVersion(eE.F1,eE.F3),nX(a)),c=await this.getChainId(),u={...nJ(t,await this.channel.setUpSpecVersion()),walletAddress:this.address,nonce:o,maxFee:U,version:l,chainId:c,cairoVersion:await this.getCairoVersion(),skipValidate:i},d=await this.buildInvocation(s,u);return super.getInvokeEstimateFee({...d},{...nJ(t,await this.channel.setUpSpecVersion()),version:l,nonce:o},n,t.skipValidate)}async estimateDeclareFee(e,t={}){let{blockIdentifier:r,nonce:n,version:a,skipValidate:i=!0}=t,s=e6(n??await this.getNonce()),o=nZ(n1(e.contract)?this.getPreferredVersion(eE.F2,eE.F3):eE.F1,nX(a)),l=await this.getChainId(),c=await this.buildDeclarePayload(e,{...nJ(t,await this.channel.setUpSpecVersion()),nonce:s,chainId:l,version:o,walletAddress:this.address,maxFee:U,cairoVersion:void 0,skipValidate:i});return super.getDeclareEstimateFee(c,{...nJ(t,await this.channel.setUpSpecVersion()),version:o,nonce:s},r,t.skipValidate)}async estimateAccountDeployFee({classHash:e,addressSalt:t=0,constructorCalldata:r=[],contractAddress:n},a={}){let{blockIdentifier:i,version:s,skipValidate:o=!0}=a,l=nZ(this.getPreferredVersion(eE.F1,eE.F3),nX(s)),c=await this.getChainId(),u=await this.buildAccountDeployPayload({classHash:e,addressSalt:t,constructorCalldata:r,contractAddress:n},{...nJ(a,await this.channel.setUpSpecVersion()),nonce:U,chainId:c,version:l,walletAddress:this.address,maxFee:U,cairoVersion:void 0,skipValidate:o});return super.getDeployAccountEstimateFee({...u},{...nJ(a,await this.channel.setUpSpecVersion()),version:l,nonce:U},i,a.skipValidate)}async estimateDeployFee(e,t={}){let r=this.buildUDCContractPayload(e);return this.estimateInvokeFee(r,t)}async estimateFeeBulk(e,t={}){if(!e.length)throw TypeError("Invocations should be non-empty array");let{nonce:r,blockIdentifier:n,version:a,skipValidate:i}=t,s=await this.accountInvocationsFactory(e,{...nJ(t,await this.channel.setUpSpecVersion()),versions:[eE.F1,nZ(this.getPreferredVersion(eE.F2,eE.F3),a)],nonce:r,blockIdentifier:n,skipValidate:i});return super.getEstimateFeeBulk(s,{blockIdentifier:n,skipValidate:i})}async simulateTransaction(e,t={}){if(!e.length)throw TypeError("Invocations should be non-empty array");let{nonce:r,blockIdentifier:n,skipValidate:a=!0,skipExecute:i,version:s}=t,o=await this.accountInvocationsFactory(e,{...nJ(t,await this.channel.setUpSpecVersion()),versions:[eE.V1,nZ(this.getPreferredVersion(eE.V2,eE.V3),s)],nonce:r,blockIdentifier:n,skipValidate:a});return super.getSimulateTransaction(o,{blockIdentifier:n,skipValidate:a,skipExecute:i})}async execute(e,t={}){let r=Array.isArray(e)?e:[e],n=e6(t.nonce??await this.getNonce()),a=nZ(this.getPreferredVersion(eE.V1,eE.V3),t.version),i=await this.getUniversalSuggestedFee(a,{type:eg.INVOKE,payload:e},{...t,version:a}),s=await this.getChainId(),o={...nJ(t,await this.channel.setUpSpecVersion()),resourceBounds:i.resourceBounds,walletAddress:this.address,nonce:n,maxFee:i.maxFee,version:a,chainId:s,cairoVersion:await this.getCairoVersion()},l=await this.signer.signTransaction(r,o),c=ab(r,await this.getCairoVersion());return this.invokeFunction({contractAddress:this.address,calldata:c,signature:l},{...nJ(t,await this.channel.setUpSpecVersion()),resourceBounds:i.resourceBounds,nonce:n,maxFee:i.maxFee,version:a})}async buildPaymasterTransaction(e,t){let r;if(!t.deploymentData&&await this.getSnip9Version()===eU.UNSUPPORTED)throw Error("Account is not compatible with SNIP-9");let n={version:"0x1",feeMode:t.feeMode,timeBounds:t.timeBounds};return r=t.deploymentData?e.length>0?{type:"deploy_and_invoke",invoke:{userAddress:this.address,calls:e},deployment:t.deploymentData}:{type:"deploy",deployment:t.deploymentData}:{type:"invoke",invoke:{userAddress:this.address,calls:e}},this.paymaster.buildTransaction(r,n)}async estimatePaymasterTransactionFee(e,t){return(await this.buildPaymasterTransaction(e,t)).fee}async preparePaymasterTransaction(e){let t;switch(e.type){case"deploy_and_invoke":{let r=await this.signMessage(e.typed_data);t={type:"deploy_and_invoke",invoke:{userAddress:this.address,typedData:e.typed_data,signature:nW(r)},deployment:e.deployment};break}case"invoke":{let r=await this.signMessage(e.typed_data);t={type:"invoke",invoke:{userAddress:this.address,typedData:e.typed_data,signature:nW(r)}};break}case"deploy":t={type:"deploy",deployment:e.deployment};break;default:throw Error("Invalid transaction type")}return t}async executePaymasterTransaction(e,t,r){let n=await this.buildPaymasterTransaction(e,t);i5(n,e,t,r);let a=await this.preparePaymasterTransaction(n);return this.paymaster.executeTransaction(a,n.parameters).then(e=>({transaction_hash:e.transaction_hash}))}async declareIfNot(e,t={}){let r=n2(e);try{await this.getClassByHash(r.classHash)}catch(r){return this.declare(e,t)}return{transaction_hash:"",class_hash:r.classHash}}async declare(e,t={}){let r=n2(e),{nonce:n,version:a}=t,i=nZ(n1(e.contract)?this.getPreferredVersion(eE.V2,eE.V3):eE.V1,a),s=await this.getUniversalSuggestedFee(i,{type:eg.DECLARE,payload:r},{...t,version:i}),o={...nJ(t,await this.channel.setUpSpecVersion()),resourceBounds:s.resourceBounds,maxFee:s.maxFee,nonce:e6(n??await this.getNonce()),version:i,chainId:await this.getChainId(),walletAddress:this.address,cairoVersion:void 0},l=await this.buildDeclarePayload(r,o);return this.declareContract(l,o)}async deploy(e,t={}){let{calls:r,addresses:n}=a_(e,this.address);return{...await this.execute(r,t),contract_address:n}}async deployContract(e,t={}){let r=await this.deploy(e,t);return ij(await this.waitForTransaction(r.transaction_hash))}async declareAndDeploy(e,t={}){let{constructorCalldata:r,salt:n,unique:a}=e,i=await this.declareIfNot(e,t);if(""!==i.transaction_hash){let e=await this.waitForTransaction(i.transaction_hash);i={...i,...e}}let s=await this.deployContract({classHash:i.class_hash,salt:n,unique:a,constructorCalldata:r},t);return{declare:{...i},deploy:s}}deploySelf=this.deployAccount;async deployAccount({classHash:e,constructorCalldata:t=[],addressSalt:r=0,contractAddress:n},a={}){let i=nZ(this.getPreferredVersion(eE.V1,eE.V3),a.version),s=await this.getChainId(),o=rj.compile(t),l=n??nb(r,e,o,0),c=await this.getUniversalSuggestedFee(i,{type:eg.DEPLOY_ACCOUNT,payload:{classHash:e,constructorCalldata:o,addressSalt:r,contractAddress:l}},a),u=await this.signer.signDeployAccountTransaction({...nJ(a,await this.channel.setUpSpecVersion()),classHash:e,constructorCalldata:o,contractAddress:l,addressSalt:r,chainId:s,resourceBounds:c.resourceBounds,maxFee:c.maxFee,version:i,nonce:U});return this.deployAccountContract({classHash:e,addressSalt:r,constructorCalldata:t,signature:u},{...nJ(a,await this.channel.setUpSpecVersion()),nonce:U,resourceBounds:c.resourceBounds,maxFee:c.maxFee,version:i})}async signMessage(e){return this.signer.signMessage(e,this.address)}async hashMessage(e){return aY(e,this.address)}async getSnip9Version(){return await iQ(this,this.address,X)?eU.V2:await iQ(this,this.address,Z)?eU.V1:eU.UNSUPPORTED}async isValidSnip9Nonce(e){try{let t={contractAddress:this.address,entrypoint:"is_valid_outside_execution_nonce",calldata:[e8(e)]},r=await this.callContract(t);return 0n!==BigInt(r[0])}catch(e){throw Error(`Failed to check if nonce is valid: ${e}`)}}async getSnip9Nonce(){let e=n$();return await this.isValidSnip9Nonce(e)?e:this.getSnip9Nonce()}async getOutsideTransaction(e,t,r,n){if(!e5(e.caller)&&"ANY_CALLER"!==e.caller)throw Error(`The caller ${e.caller} is not valid.`);let a=e5(e.caller)?e.caller:Y,i=Array.isArray(t)?t:[t],s=r??await this.getSnip9Version();if(!s)throw Error("This account is not handling outside transactions.");let o=n?e8(n):await this.getSnip9Nonce(),l=iY(await this.getChainId(),{caller:a,execute_after:e.execute_after,execute_before:e.execute_before},o,i,s),c=await this.signMessage(l);return{outsideExecution:{caller:a,nonce:o,execute_after:e.execute_after,execute_before:e.execute_before,calls:i.map(iG)},signature:c,signerAddress:this.address,version:s}}async executeFromOutside(e,t){let r=iX(e);return this.execute(r,t)}async getUniversalSuggestedFee(e,{type:t,payload:r},n){let a=0,i=nq(U,void 0,await this.channel.setUpSpecVersion());return e===eE.V3?i=n.resourceBounds??(await this.getSuggestedFee({type:t,payload:r},n)).resourceBounds:a=n.maxFee??(await this.getSuggestedFee({type:t,payload:r},n)).suggestedMaxFee,{maxFee:a,resourceBounds:i}}async getSuggestedFee({type:e,payload:t},r){switch(e){case eg.INVOKE:return this.estimateInvokeFee(t,r);case eg.DECLARE:return this.estimateDeclareFee(t,r);case eg.DEPLOY_ACCOUNT:return this.estimateAccountDeployFee(t,r);case eg.DEPLOY:return this.estimateDeployFee(t,r);default:return nK(await this.channel.setUpSpecVersion())}}async buildInvocation(e,t){let r=ab(e,await this.getCairoVersion()),n=t.skipValidate?[]:await this.signer.signTransaction(e,t);return{...nJ(t,await this.channel.setUpSpecVersion()),contractAddress:this.address,calldata:r,signature:n}}async buildDeclarePayload(e,t){let{classHash:r,contract:n,compiledClassHash:a}=n2(e),i=al(n);if(eX(a)&&(t.version===eS.F3||t.version===eS.V3))throw Error("V3 Transaction work with Cairo1 Contracts and require compiledClassHash");let s=t.skipValidate?[]:await this.signer.signDeclareTransaction({...t,...nJ(t,await this.channel.setUpSpecVersion()),classHash:r,compiledClassHash:a,senderAddress:t.walletAddress});return{senderAddress:t.walletAddress,signature:s,contract:i,compiledClassHash:a}}async buildAccountDeployPayload({classHash:e,addressSalt:t=0,constructorCalldata:r=[],contractAddress:n},a){let i=rj.compile(r),s=n??nb(t,e,i,0),o=a.skipValidate?[]:await this.signer.signDeployAccountTransaction({...a,...nJ(a,await this.channel.setUpSpecVersion()),classHash:e,contractAddress:s,addressSalt:t,constructorCalldata:i});return{...nJ(a,await this.channel.setUpSpecVersion()),classHash:e,addressSalt:t,constructorCalldata:i,signature:o}}buildUDCContractPayload(e){return[].concat(e).map(e=>{let{classHash:t,salt:r="0",unique:n=!0,constructorCalldata:a=[]}=e,i=rj.compile(a);return{contractAddress:K.ADDRESS,entrypoint:K.ENTRYPOINT,calldata:[t,r,tc(n),i.length,...i]}})}async accountInvocationsFactory(e,t){let{nonce:r,blockIdentifier:n,skipValidate:a=!0}=t,i=await this.getNonceSafe(r),s=await this.getChainId(),o=t.versions.map(e=>nZ(e)),l="payload"in e[0]?e[0].payload:e[0],c=e[0].type===eg.DEPLOY_ACCOUNT?await this.getCairoVersion(l.classHash):await this.getCairoVersion();return Promise.all([].concat(e).map(async(e,r)=>{let l="payload"in e?e.payload:e,u={...nJ(t,await this.channel.setUpSpecVersion()),walletAddress:this.address,nonce:e6(Number(i)+r),maxFee:U,chainId:s,cairoVersion:c,version:"",skipValidate:a},d={type:e.type,nonce:e6(Number(i)+r),blockIdentifier:n,version:""};if(e.type===eg.INVOKE){let e=nQ(o[1]);u.version=e,d.version=e;let t=await this.buildInvocation([].concat(l),u);return{...d,...t,...u}}if(e.type===eg.DEPLOY){let e=nQ(o[1]);u.version=e,d.version=e;let t=this.buildUDCContractPayload(l),r=await this.buildInvocation(t,u);return{...d,...r,...u,type:eg.INVOKE}}if(e.type===eg.DECLARE){let e=n1(l.contract)?o[1]:o[0];u.version=e,d.version=e;let t=await this.buildDeclarePayload(l,u);return{...d,...t,...u}}if(e.type===eg.DEPLOY_ACCOUNT){let e=nQ(o[1]);u.version=e,d.version=e;let t=await this.buildAccountDeployPayload(l,u);return{...d,...t,...u}}throw Error(`accountInvocationsFactory: unsupported transaction type: ${e}`)}))}async getStarkName(e=this.address,t){return super.getStarkName(e,t)}},sr=class extends i_{},sn={};function sa(e,t=!1){return e.request({type:"wallet_requestAccounts",params:{silent_mode:t}})}function si(e){return e.request({type:"wallet_getPermissions"})}function ss(e,t){return e.request({type:"wallet_watchAsset",params:t})}function so(e,t){return e.request({type:"wallet_addStarknetChain",params:t})}function sl(e,t){return e.request({type:"wallet_switchStarknetChain",params:{chainId:t}})}function sc(e){return e.request({type:"wallet_requestChainId"})}function su(e){return e.request({type:"wallet_deploymentData"})}function sd(e,t){return e.request({type:"wallet_addInvokeTransaction",params:t})}function sh(e,t){return e.request({type:"wallet_addDeclareTransaction",params:t})}function sf(e,t){return e.request({type:"wallet_signTypedData",params:t})}function sp(e){return e.request({type:"wallet_supportedSpecs"})}function sg(e,t){e.on("accountsChanged",t)}function sm(e,t){e.on("networkChanged",t)}c(sn,{addDeclareTransaction:()=>sh,addInvokeTransaction:()=>sd,addStarknetChain:()=>so,deploymentData:()=>su,getPermissions:()=>si,onAccountChange:()=>sg,onNetworkChanged:()=>sm,requestAccounts:()=>sa,requestChainId:()=>sc,signMessage:()=>sf,supportedSpecs:()=>sp,switchStarknetChain:()=>sl,watchAsset:()=>ss});var sy=class e extends st{walletProvider;constructor(e,t,r,n,a){super(e,r,"",n,void 0,a),this.walletProvider=t,this.walletProvider.on("accountsChanged",e=>{e&&(this.address=e[0].toLowerCase())}),this.walletProvider.on("networkChanged",e=>{e&&this.channel.setChainId(e)})}onAccountChange(e){sg(this.walletProvider,e)}onNetworkChanged(e){sm(this.walletProvider,e)}requestAccounts(e=!1){return sa(this.walletProvider,e)}getPermissions(){return si(this.walletProvider)}switchStarknetChain(e){return sl(this.walletProvider,e)}watchAsset(e){return ss(this.walletProvider,e)}addStarknetChain(e){return so(this.walletProvider,e)}execute(e){let t=[].concat(e).map(e=>{let{contractAddress:t,entrypoint:r,calldata:n}=e;return{contract_address:t,entry_point:r,calldata:n}});return sd(this.walletProvider,{calls:t})}declare(e){let t=n2(e),r=e.contract,n={...r,abi:ez(r.abi)};if(!t.compiledClassHash)throw Error("compiledClassHash is required");let a={compiled_class_hash:t.compiledClassHash,contract_class:n};return sh(this.walletProvider,a)}async deploy(e){let{calls:t,addresses:r}=a_(e,this.address);return{...await this.execute(t),contract_address:r}}signMessage(e){return sf(this.walletProvider,e)}static async connect(t,r,n,a,i=!1){let[s]=await sa(r,i);return new e(t,r,s,n,a)}static async connectSilent(t,r,n,a){return e.connect(t,r,n,a,!0)}};function sb(e,t){return async function(...r){let n={...e.contractOptions};return e.contractOptions=void 0,e.call(t.name,r,{parseRequest:!0,parseResponse:!0,...n})}}function s_(e,t){return"view"===t.stateMutability||"view"===t.state_mutability?sb(e,t):async function(...r){let n={...e.contractOptions};return e.contractOptions=void 0,e.invoke(t.name,r,{parseRequest:!0,...n})}}function sw(e,t){return Array.isArray(e)&&"__compiled__"in e?e:Array.isArray(e)&&Array.isArray(e[0])&&"__compiled__"in e[0]?e[0]:t()}var sE=class{abi;address;providerOrAccount;deployTransactionHash;structs;events;functions;callStatic;populateTransaction;estimateFee;callData;contractOptions;constructor(e,t,r=iw){this.address=t&&t.toLowerCase(),this.providerOrAccount=r,this.callData=new rj(e),this.structs=rj.getAbiStruct(e),this.events=iM(e);let n=rx(e);this.abi=n.getLegacyFormat();let a={enumerable:!0,value:{},writable:!1};Object.defineProperties(this,{functions:{enumerable:!0,value:{},writable:!1},callStatic:{enumerable:!0,value:{},writable:!1},populateTransaction:{enumerable:!0,value:{},writable:!1},estimateFee:{enumerable:!0,value:{},writable:!1}}),this.abi.forEach(e=>{var t,r;if("function"!==e.type)return;let n=e.name;this[n]||Object.defineProperty(this,n,{...a,value:s_(this,e)}),this.functions[n]||Object.defineProperty(this.functions,n,{...a,value:s_(this,e)}),this.callStatic[n]||Object.defineProperty(this.callStatic,n,{...a,value:sb(this,e)}),this.populateTransaction[n]||Object.defineProperty(this.populateTransaction,n,{...a,value:(t=this,function(...r){return t.populate(e.name,r)})}),this.estimateFee[n]||Object.defineProperty(this.estimateFee,n,{...a,value:(r=this,function(...t){return r.estimate(e.name,t)})})})}withOptions(e){return this.contractOptions=e,this}attach(e){this.address=e}connect(e){this.providerOrAccount=e}async deployed(){return this.deployTransactionHash&&(await this.providerOrAccount.waitForTransaction(this.deployTransactionHash),this.deployTransactionHash=void 0),this}async call(e,t=[],{parseRequest:r=!0,parseResponse:n=!0,formatResponse:a,blockIdentifier:i}={}){eG(null!==this.address,"contract is not connected to an address");let s=sw(t,()=>r?(this.callData.validate(eB.CALL,e,t),this.callData.compile(e,t)):(ed.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),t));return this.providerOrAccount.callContract({contractAddress:this.address,calldata:s,entrypoint:e},i).then(t=>n?a?this.callData.format(e,t,a):this.callData.parse(e,t):t)}invoke(e,t=[],{parseRequest:r=!0,signature:n,...a}={}){eG(null!==this.address,"contract is not connected to an address");let i=sw(t,()=>r?(this.callData.validate(eB.INVOKE,e,t),this.callData.compile(e,t)):(ed.warn("Invoke skipped parsing but provided rawArgs, possible malfunction request"),t)),s={contractAddress:this.address,calldata:i,entrypoint:e};if("execute"in this.providerOrAccount)return this.providerOrAccount.execute(s,{...a});if(!a.nonce)throw Error("Nonce is required when invoking a function without an account");return ed.warn(`Invoking ${e} without an account. This will not work on a public node.`),this.providerOrAccount.invokeFunction({...s,signature:n},{...a,nonce:a.nonce})}async estimate(e,t=[]){eG(null!==this.address,"contract is not connected to an address"),sw(t,()=>!1)||this.callData.validate(eB.INVOKE,e,t);let r=this.populate(e,t);if("estimateInvokeFee"in this.providerOrAccount)return this.providerOrAccount.estimateInvokeFee(r);throw Error("Contract must be connected to the account contract to estimate")}populate(e,t=[]){let r=sw(t,()=>this.callData.compile(e,t));return{contractAddress:this.address,entrypoint:e,calldata:r}}parseEvents(e){let t;return e.match({success:e=>{t=i$(e.events?.map(t=>({block_hash:e.block_hash,block_number:e.block_number,transaction_hash:e.transaction_hash,...t})).filter(e=>tt(e.from_address)===tt(this.address),[])||[],this.events,this.structs,rj.getAbiEnum(this.abi))},_:()=>{throw Error("This transaction was not successful.")}}),t}isCairo1(){return tV.isCairo1Abi(this.abi)}async getVersion(){return this.providerOrAccount.getContractVersion(this.address)}typedv2(e){return this}},sv=class{functions;callStatic;populateTransaction;estimateFee},sS=class{compiledContract;account;abi;classHash;casm;compiledClassHash;CallData;contractOptions;constructor(e){this.compiledContract=e.compiledContract,this.account=e.account,this.casm=e.casm,this.abi=e.abi??e.compiledContract.abi,this.classHash=e.classHash,this.compiledClassHash=e.compiledClassHash,this.CallData=new rj(this.abi),this.contractOptions=e.contractOptions}async deploy(...e){let t=sw(e,()=>this.contractOptions?.parseRequest?(this.CallData.validate(eB.DEPLOY,"constructor",e),this.CallData.compile("constructor",e)):(ed.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),e)),{deploy:{contract_address:r,transaction_hash:n}}=await this.account.declareAndDeploy({contract:this.compiledContract,casm:this.casm,classHash:this.classHash,compiledClassHash:this.compiledClassHash,constructorCalldata:t,salt:this.contractOptions?.addressSalt});eG(!!r,"Deployment of the contract failed");let a=new sE(this.compiledContract.abi,r,this.account);return a.deployTransactionHash=n,a}connect(e){return this.account=e,this}attach(e){return new sE(this.abi,e,this.account)}},sx=class{};function sT(e,t="fri"){if("strk"===t){let t="";"bigint"==typeof e?t=e.toString():"string"==typeof e&&(t=e5(e)?BigInt(e).toString():e);let[r,n="0"]=t.split("."),a=n.padEnd(18,"0");return`${r}${a}`.replace(/\b0+/g,"")}let r=BigInt(e).toString();return(r.length<=18?`0.${r.padStart(18,"0")}`:`${r.slice(0,r.length-18)}.${r.slice(r.length-18)}`).replace(/(\.[0-9]*[1-9])0+$|\.0*$/,"$1")}},800524,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.TimelockRefundHandler=void 0;let n=e.r(717065);class a{constructor(e){this.address=e}getCommitment(e){return e}getWitness(e,t){if(a.getExpiry(t)>BigInt(Math.floor(Date.now()/1e3)))throw Error("Not expired yet!");return Promise.resolve({initialTxns:[],witness:[]})}getGas(){return a.gas}static getExpiry(e){return(0,n.bigNumberishToBuffer)(e.refundData,32).readBigUInt64BE(24).valueOf()}}r.TimelockRefundHandler=a,a.gas={l1DataGas:0,l2Gas:4e6,l1Gas:0}},987902,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetSwapData=void 0;let n=e.r(154585),a=e.r(800524),i=e.r(84642),s=e.r(717065);class o extends n.SwapData{static toFlags(e){let t=(0,s.toBigInt)(e);return{sequence:t>>64n,payOut:(1n&t)===1n,payIn:(2n&t)===2n,reputation:(4n&t)===4n}}getFlags(){return(this.sequence<<64n)+(this.payOut?1n:0n)+(this.payIn?2n:0n)+(this.reputation?4n:0n)}constructor(e,t,r,n,a,i,s,o,l,c,u,d,h,f,p,g,m){super(),null!=t||null!=r||null!=n||null!=a||null!=i||null!=s||null!=o||null!=l||null!=c||null!=u||null!=d||null!=h||null!=f||null!=p?(this.offerer=e,this.claimer=t,this.token=r,this.refundHandler=n,this.claimHandler=a,this.payOut=i,this.payIn=s,this.reputation=o,this.sequence=l,this.claimData=c,this.refundData=u,this.amount=d,this.feeToken=h,this.securityDeposit=f,this.claimerBounty=p,this.kind=g,this.extraData=m):(this.offerer=e.offerer,this.claimer=e.claimer,this.token=e.token,this.refundHandler=e.refundHandler,this.claimHandler=e.claimHandler,this.payOut=e.payOut,this.payIn=e.payIn,this.reputation=e.reputation,this.sequence=null==e.sequence?null:BigInt(e.sequence),this.claimData=e.claimData,this.refundData=e.refundData,this.amount=null==e.amount?null:BigInt(e.amount),this.feeToken=e.feeToken,this.securityDeposit=null==e.securityDeposit?null:BigInt(e.securityDeposit),this.claimerBounty=null==e.claimerBounty?null:BigInt(e.claimerBounty),this.kind=e.kind,this.extraData=e.extraData)}getOfferer(){return this.offerer}setOfferer(e){this.offerer=e,this.payIn=!0}getClaimer(){return this.claimer}setClaimer(e){this.claimer=e,this.payIn=!1,this.payOut=!0,this.reputation=!1}serialize(){return{type:"strk",offerer:this.offerer,claimer:this.claimer,token:this.token,refundHandler:this.refundHandler,claimHandler:this.claimHandler,payOut:this.payOut,payIn:this.payIn,reputation:this.reputation,sequence:null==this.sequence?null:this.sequence.toString(10),claimData:this.claimData,refundData:this.refundData,amount:null==this.amount?null:this.amount.toString(10),feeToken:this.feeToken,securityDeposit:null==this.securityDeposit?null:this.securityDeposit.toString(10),claimerBounty:null==this.claimerBounty?null:this.claimerBounty.toString(10),kind:this.kind,extraData:this.extraData}}getAmount(){return this.amount}getToken(){return this.token}isToken(e){return this.token.toLowerCase()===e.toLowerCase()}getType(){return this.kind}getExpiry(){return a.TimelockRefundHandler.getExpiry(this)}isPayIn(){return this.payIn}isPayOut(){return this.payOut}getEscrowHash(){let e=i.cairo.uint256("0x"+this.amount.toString(16)),t=i.cairo.uint256("0x"+this.securityDeposit.toString(16)),r=i.cairo.uint256("0x"+this.claimerBounty.toString(16)),n=i.hash.computePoseidonHashOnElements([this.offerer,this.claimer,this.token,this.refundHandler,this.claimHandler,this.getFlags(),this.claimData,this.refundData,e.low,e.high,this.feeToken,t.low,t.high,r.low,r.high]);return n.startsWith("0x")&&(n=n.slice(2)),n.padStart(64,"0")}getClaimHash(){let e=this.claimData;return e.startsWith("0x")&&(e=e.slice(2)),e.padStart(64,"0")}getSequence(){return this.sequence}getConfirmationsHint(){return null==this.extraData||84!=this.extraData.length?null:parseInt(this.extraData.slice(80),16)}getNonceHint(){return null==this.extraData||84!=this.extraData.length?null:BigInt("0x"+this.extraData.slice(64,80))}getTxoHashHint(){return null==this.extraData||84!=this.extraData.length?null:this.extraData.slice(0,64)}getExtraData(){return this.extraData}setExtraData(e){this.extraData=e}getSecurityDeposit(){return this.securityDeposit}getClaimerBounty(){return this.claimerBounty}getTotalDeposit(){return this.claimerBounty<this.securityDeposit?this.securityDeposit:this.claimerBounty}getDepositToken(){return this.feeToken}isDepositToken(e){return e.startsWith("0x")||(e="0x"+e),(0,s.toHex)(this.feeToken)===(0,s.toHex)(e)}isClaimer(e){return e.startsWith("0x")||(e="0x"+e),(0,s.toHex)(this.claimer)===(0,s.toHex)(e)}isOfferer(e){return e.startsWith("0x")||(e="0x"+e),(0,s.toHex)(this.offerer)===(0,s.toHex)(e)}isRefundHandler(e){return e.startsWith("0x")||(e="0x"+e),(0,s.toHex)(this.refundHandler)===(0,s.toHex)(e)}isClaimHandler(e){return e.startsWith("0x")||(e="0x"+e),(0,s.toHex)(this.claimHandler)===(0,s.toHex)(e)}isClaimData(e){return e.startsWith("0x")||(e="0x"+e),(0,s.toHex)(this.claimData)===(0,s.toHex)(e)}equals(e){return e.offerer.toLowerCase()===this.offerer.toLowerCase()&&e.claimer.toLowerCase()===this.claimer.toLowerCase()&&e.token.toLowerCase()===this.token.toLowerCase()&&e.refundHandler.toLowerCase()===this.refundHandler.toLowerCase()&&e.claimHandler.toLowerCase()===this.claimHandler.toLowerCase()&&e.payIn===this.payIn&&e.payOut===this.payOut&&e.reputation===this.reputation&&this.sequence===e.sequence&&e.claimData.toLowerCase()===this.claimData.toLowerCase()&&e.refundData.toLowerCase()===this.refundData.toLowerCase()&&e.amount===this.amount&&e.securityDeposit===this.securityDeposit&&e.claimerBounty===this.claimerBounty}toEscrowStruct(){return{offerer:this.offerer,claimer:this.claimer,token:this.token,refund_handler:this.refundHandler,claim_handler:this.claimHandler,flags:this.getFlags(),claim_data:this.claimData,refund_data:this.refundData,amount:i.cairo.uint256((0,s.toBigInt)(this.amount)),fee_token:this.feeToken,security_deposit:i.cairo.uint256((0,s.toBigInt)(this.securityDeposit)),claimer_bounty:i.cairo.uint256((0,s.toBigInt)(this.claimerBounty)),success_action:new i.CairoOption(i.CairoOptionVariant.None)}}static fromSerializedFeltArray(e,t){let r=(0,s.toHex)(e.shift()),n=(0,s.toHex)(e.shift()),a=(0,s.toHex)(e.shift()),i=(0,s.toHex)(e.shift()),l=(0,s.toHex)(e.shift()),{payOut:c,payIn:u,reputation:d,sequence:h}=o.toFlags(e.shift()),f=(0,s.toHex)(e.shift()),p=(0,s.toHex)(e.shift()),g=(0,s.toBigInt)({low:e.shift(),high:e.shift()}),m=(0,s.toHex)(e.shift()),y=(0,s.toBigInt)({low:e.shift(),high:e.shift()}),b=(0,s.toBigInt)({low:e.shift(),high:e.shift()});return 0n===(0,s.toBigInt)(e.shift())&&((0,s.toHex)(e.shift()),(0,s.toBigInt)(e.shift()),(0,s.toBigInt)({low:e.shift(),high:e.shift()})),new o(r,n,a,i,l,c,u,d,h,f,p,g,m,y,b,t.getType(),null)}}r.StarknetSwapData=o,n.SwapData.deserializers.strk=o},717065,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.findLastIndex=r.parseInitFunctionCalldata=r.poseidonHashRange=r.bufferToByteArray=r.bufferToBytes31Span=r.bytes31SpanToBuffer=r.toBigInt=r.bigNumberishToBuffer=r.u32ReverseEndianness=r.bufferToU32Array=r.u32ArrayToBuffer=r.calculateHash=r.toHex=r.tryWithRetries=r.getLogger=r.onceAsync=r.timeoutPromise=r.isUint256=void 0;let n=e.r(425909),a=e.r(84642),i=e.r(500874),s=e.r(987902);function o(e){return null!=e.low&&null!=e.high}function l(e,t){return new Promise((r,n)=>{let a=setTimeout(r,e);null!=t&&t.addEventListener("abort",()=>{clearTimeout(a),n(Error("Aborted"))})})}function c(t){return{debug:(r,...n)=>e.g.atomiqLogLevel>=3&&console.debug(t+r,...n),info:(r,...n)=>e.g.atomiqLogLevel>=2&&console.info(t+r,...n),warn:(r,...n)=>(null==e.g.atomiqLogLevel||e.g.atomiqLogLevel>=1)&&console.warn(t+r,...n),error:(r,...n)=>(null==e.g.atomiqLogLevel||e.g.atomiqLogLevel>=0)&&console.error(t+r,...n)}}r.isUint256=o,r.timeoutPromise=l,r.onceAsync=function(e){let t;return()=>null==t?t=e():t.catch(()=>t=e())},r.getLogger=c;let u=c("Utils: ");function d(e,t){if(o(e))return i.Buffer.concat([d(e.high,16),d(e.low,16)]);e="string"==typeof e?e.startsWith("0x")?e.slice(2):BigInt(e).toString(16):e.toString(16),null!=t&&(e=e.padStart(2*t,"0"));let r=i.Buffer.from(e,"hex");return r.length>t?r.slice(r.length-t):r}function h(e){return null==e?null:o(e)?h(e.high)<<128n|h(e.low):"string"==typeof e?(e.startsWith("0x")||(e="0x"+e),BigInt(e)):"bigint"==typeof e?e:BigInt(e)}function f(e,t=0,r=e.length){let n=[];for(let a=t+31;a<r;a+=31)n.push(BigInt("0x"+e.slice(a-31,a).toString("hex")));return r>t+31*n.length&&n.push(BigInt("0x"+e.slice(t+31*n.length,r).toString("hex"))),n}r.tryWithRetries=async function(e,t,r,n){(t=t||{}).maxRetries=t.maxRetries||5,t.delay=t.delay||500,t.exponential=null==t.exponential||t.exponential;let a=null;for(let i=0;i<t.maxRetries;i++){try{return await e()}catch(e){if(null!=r&&r(e))throw e;a=e,u.error("tryWithRetries(): error on try number: "+i,e)}if(null!=n&&n.aborted)throw Error("Aborted");i!==t.maxRetries-1&&await l(t.exponential?t.delay*Math.pow(2,i):t.delay,n)}throw a},r.toHex=function(e,t=64){if(null==e)return null;switch(typeof e){case"string":if(e.startsWith("0x"))return"0x"+e.slice(2).padStart(t,"0").toLowerCase();return"0x"+BigInt(e).toString(16).padStart(t,"0");case"number":case"bigint":return"0x"+e.toString(16).padStart(t,"0")}return"0x"+e.toString("hex").padStart(t,"0")},r.calculateHash=function(e){let t={version:e.details.version,maxFee:e.details.maxFee,chainId:e.details.chainId,nonce:e.details.nonce,accountDeploymentData:"0x3"===e.details.version?e.details.accountDeploymentData:null,nonceDataAvailabilityMode:"0x3"===e.details.version?n.EDAMode[e.details.nonceDataAvailabilityMode]:null,feeDataAvailabilityMode:"0x3"===e.details.version?n.EDAMode[e.details.feeDataAvailabilityMode]:null,resourceBounds:"0x3"===e.details.version?e.details.resourceBounds:null,tip:"0x3"===e.details.version?e.details.tip:null,paymasterData:"0x3"===e.details.version?e.details.paymasterData:null};switch(e.type){case"INVOKE":let r=a.CallData.compile(e.signed.calldata);return e.txId=a.hash.calculateInvokeTransactionHash({senderAddress:e.details.walletAddress,compiledCalldata:r,...t});case"DEPLOY_ACCOUNT":let i=a.CallData.compile(e.signed.constructorCalldata);return e.txId=a.hash.calculateDeployAccountTransactionHash({contractAddress:e.tx.contractAddress,classHash:e.signed.classHash,constructorCalldata:i,compiledConstructorCalldata:i,salt:e.signed.addressSalt,...t});default:throw Error("Unsupported tx type!")}},r.u32ArrayToBuffer=function(e){let t=i.Buffer.alloc(4*e.length);for(let r=0;r<e.length;r++)t.writeUInt32BE(Number(e[r]),4*r);return t},r.bufferToU32Array=function(e){let t=[];for(let r=0;r<e.length;r+=4)t.push(e.readUInt32BE(r));return t},r.u32ReverseEndianness=function(e){let t=BigInt(e);return Number((255n&t)<<24n|(65280n&t)<<8n|t>>8n&65280n|t>>24n&255n)},r.bigNumberishToBuffer=d,r.toBigInt=h,r.bytes31SpanToBuffer=function(e,t){let r=[],n=Math.floor(t/31),a=t-31*n,s=n+ +(0!==a);if(e.length<s)throw Error("Not enough bytes in the felt array!");let o=0;for(;o<n;o++)r.push(d(e[o],31));return 0!==a&&r.push(d(e[o],a)),i.Buffer.concat(r)},r.bufferToBytes31Span=f,r.bufferToByteArray=function(e,t=0,r=e.length){let n=[];for(let a=t+31;a<r;a+=31)n.push(BigInt("0x"+e.slice(a-31,a).toString("hex")));let a=BigInt(0),i=BigInt(r-(t+31*n.length));return i!==BigInt(0)&&(a=BigInt("0x"+e.slice(t+31*n.length,r).toString("hex"))),[BigInt(n.length),...n,a,i]},r.poseidonHashRange=function(e,t=0,r=e.length){return a.hash.computePoseidonHashOnElements(f(e,t,r))},r.parseInitFunctionCalldata=function(e,t){let r=s.StarknetSwapData.fromSerializedFeltArray(e,t),n=Number(h(e.shift())),a=e.splice(0,n),i=h(e.shift()),o=Number(h(e.shift())),l=e.splice(0,o);if(0!==e.length)throw Error("Calldata not read fully!");return{escrow:r,signature:a,timeout:i,extraData:l}},r.findLastIndex=function(e,t){for(let r=e.length-1;r>=0;r--)if(t(e[r],r))return r;return -1}},525232,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetModule=void 0;let n=e.r(717065);r.StarknetModule=class{constructor(e){this.logger=(0,n.getLogger)(this.constructor.name+": "),this.provider=e.provider,this.retryPolicy=e.retryPolicy,this.root=e}}},197026,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.ERC20Abi=void 0,r.ERC20Abi=[{type:"impl",name:"MintableToken",interface_name:"src::mintable_token_interface::IMintableToken"},{type:"struct",name:"core::integer::u256",members:[{name:"low",type:"core::integer::u128"},{name:"high",type:"core::integer::u128"}]},{type:"interface",name:"src::mintable_token_interface::IMintableToken",items:[{type:"function",name:"permissioned_mint",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u256"}],outputs:[],state_mutability:"external"},{type:"function",name:"permissioned_burn",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u256"}],outputs:[],state_mutability:"external"}]},{type:"impl",name:"MintableTokenCamelImpl",interface_name:"src::mintable_token_interface::IMintableTokenCamel"},{type:"interface",name:"src::mintable_token_interface::IMintableTokenCamel",items:[{type:"function",name:"permissionedMint",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u256"}],outputs:[],state_mutability:"external"},{type:"function",name:"permissionedBurn",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u256"}],outputs:[],state_mutability:"external"}]},{type:"impl",name:"Replaceable",interface_name:"src::replaceability_interface::IReplaceable"},{type:"struct",name:"core::array::Span::<core::felt252>",members:[{name:"snapshot",type:"@core::array::Array::<core::felt252>"}]},{type:"struct",name:"src::replaceability_interface::EICData",members:[{name:"eic_hash",type:"core::starknet::class_hash::ClassHash"},{name:"eic_init_data",type:"core::array::Span::<core::felt252>"}]},{type:"enum",name:"core::option::Option::<src::replaceability_interface::EICData>",variants:[{name:"Some",type:"src::replaceability_interface::EICData"},{name:"None",type:"()"}]},{type:"enum",name:"core::bool",variants:[{name:"False",type:"()"},{name:"True",type:"()"}]},{type:"struct",name:"src::replaceability_interface::ImplementationData",members:[{name:"impl_hash",type:"core::starknet::class_hash::ClassHash"},{name:"eic_data",type:"core::option::Option::<src::replaceability_interface::EICData>"},{name:"final",type:"core::bool"}]},{type:"interface",name:"src::replaceability_interface::IReplaceable",items:[{type:"function",name:"get_upgrade_delay",inputs:[],outputs:[{type:"core::integer::u64"}],state_mutability:"view"},{type:"function",name:"get_impl_activation_time",inputs:[{name:"implementation_data",type:"src::replaceability_interface::ImplementationData"}],outputs:[{type:"core::integer::u64"}],state_mutability:"view"},{type:"function",name:"add_new_implementation",inputs:[{name:"implementation_data",type:"src::replaceability_interface::ImplementationData"}],outputs:[],state_mutability:"external"},{type:"function",name:"remove_implementation",inputs:[{name:"implementation_data",type:"src::replaceability_interface::ImplementationData"}],outputs:[],state_mutability:"external"},{type:"function",name:"replace_to",inputs:[{name:"implementation_data",type:"src::replaceability_interface::ImplementationData"}],outputs:[],state_mutability:"external"}]},{type:"impl",name:"AccessControlImplExternal",interface_name:"src::access_control_interface::IAccessControl"},{type:"interface",name:"src::access_control_interface::IAccessControl",items:[{type:"function",name:"has_role",inputs:[{name:"role",type:"core::felt252"},{name:"account",type:"core::starknet::contract_address::ContractAddress"}],outputs:[{type:"core::bool"}],state_mutability:"view"},{type:"function",name:"get_role_admin",inputs:[{name:"role",type:"core::felt252"}],outputs:[{type:"core::felt252"}],state_mutability:"view"}]},{type:"impl",name:"RolesImpl",interface_name:"src::roles_interface::IMinimalRoles"},{type:"interface",name:"src::roles_interface::IMinimalRoles",items:[{type:"function",name:"is_governance_admin",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"}],outputs:[{type:"core::bool"}],state_mutability:"view"},{type:"function",name:"is_upgrade_governor",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"}],outputs:[{type:"core::bool"}],state_mutability:"view"},{type:"function",name:"register_governance_admin",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"}],outputs:[],state_mutability:"external"},{type:"function",name:"remove_governance_admin",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"}],outputs:[],state_mutability:"external"},{type:"function",name:"register_upgrade_governor",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"}],outputs:[],state_mutability:"external"},{type:"function",name:"remove_upgrade_governor",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"}],outputs:[],state_mutability:"external"},{type:"function",name:"renounce",inputs:[{name:"role",type:"core::felt252"}],outputs:[],state_mutability:"external"}]},{type:"impl",name:"ERC20Impl",interface_name:"openzeppelin::token::erc20::interface::IERC20"},{type:"interface",name:"openzeppelin::token::erc20::interface::IERC20",items:[{type:"function",name:"name",inputs:[],outputs:[{type:"core::felt252"}],state_mutability:"view"},{type:"function",name:"symbol",inputs:[],outputs:[{type:"core::felt252"}],state_mutability:"view"},{type:"function",name:"decimals",inputs:[],outputs:[{type:"core::integer::u8"}],state_mutability:"view"},{type:"function",name:"total_supply",inputs:[],outputs:[{type:"core::integer::u256"}],state_mutability:"view"},{type:"function",name:"balance_of",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"}],outputs:[{type:"core::integer::u256"}],state_mutability:"view"},{type:"function",name:"allowance",inputs:[{name:"owner",type:"core::starknet::contract_address::ContractAddress"},{name:"spender",type:"core::starknet::contract_address::ContractAddress"}],outputs:[{type:"core::integer::u256"}],state_mutability:"view"},{type:"function",name:"transfer",inputs:[{name:"recipient",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u256"}],outputs:[{type:"core::bool"}],state_mutability:"external"},{type:"function",name:"transfer_from",inputs:[{name:"sender",type:"core::starknet::contract_address::ContractAddress"},{name:"recipient",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u256"}],outputs:[{type:"core::bool"}],state_mutability:"external"},{type:"function",name:"approve",inputs:[{name:"spender",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u256"}],outputs:[{type:"core::bool"}],state_mutability:"external"}]},{type:"impl",name:"ERC20CamelOnlyImpl",interface_name:"openzeppelin::token::erc20::interface::IERC20CamelOnly"},{type:"interface",name:"openzeppelin::token::erc20::interface::IERC20CamelOnly",items:[{type:"function",name:"totalSupply",inputs:[],outputs:[{type:"core::integer::u256"}],state_mutability:"view"},{type:"function",name:"balanceOf",inputs:[{name:"account",type:"core::starknet::contract_address::ContractAddress"}],outputs:[{type:"core::integer::u256"}],state_mutability:"view"},{type:"function",name:"transferFrom",inputs:[{name:"sender",type:"core::starknet::contract_address::ContractAddress"},{name:"recipient",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u256"}],outputs:[{type:"core::bool"}],state_mutability:"external"}]},{type:"constructor",name:"constructor",inputs:[{name:"name",type:"core::felt252"},{name:"symbol",type:"core::felt252"},{name:"decimals",type:"core::integer::u8"},{name:"initial_supply",type:"core::integer::u256"},{name:"recipient",type:"core::starknet::contract_address::ContractAddress"},{name:"permitted_minter",type:"core::starknet::contract_address::ContractAddress"},{name:"provisional_governance_admin",type:"core::starknet::contract_address::ContractAddress"},{name:"upgrade_delay",type:"core::integer::u64"}]},{type:"function",name:"increase_allowance",inputs:[{name:"spender",type:"core::starknet::contract_address::ContractAddress"},{name:"added_value",type:"core::integer::u256"}],outputs:[{type:"core::bool"}],state_mutability:"external"},{type:"function",name:"decrease_allowance",inputs:[{name:"spender",type:"core::starknet::contract_address::ContractAddress"},{name:"subtracted_value",type:"core::integer::u256"}],outputs:[{type:"core::bool"}],state_mutability:"external"},{type:"function",name:"increaseAllowance",inputs:[{name:"spender",type:"core::starknet::contract_address::ContractAddress"},{name:"addedValue",type:"core::integer::u256"}],outputs:[{type:"core::bool"}],state_mutability:"external"},{type:"function",name:"decreaseAllowance",inputs:[{name:"spender",type:"core::starknet::contract_address::ContractAddress"},{name:"subtractedValue",type:"core::integer::u256"}],outputs:[{type:"core::bool"}],state_mutability:"external"},{type:"event",name:"openzeppelin::token::erc20_v070::erc20::ERC20::Transfer",kind:"struct",members:[{name:"from",type:"core::starknet::contract_address::ContractAddress",kind:"data"},{name:"to",type:"core::starknet::contract_address::ContractAddress",kind:"data"},{name:"value",type:"core::integer::u256",kind:"data"}]},{type:"event",name:"openzeppelin::token::erc20_v070::erc20::ERC20::Approval",kind:"struct",members:[{name:"owner",type:"core::starknet::contract_address::ContractAddress",kind:"data"},{name:"spender",type:"core::starknet::contract_address::ContractAddress",kind:"data"},{name:"value",type:"core::integer::u256",kind:"data"}]},{type:"event",name:"src::replaceability_interface::ImplementationAdded",kind:"struct",members:[{name:"implementation_data",type:"src::replaceability_interface::ImplementationData",kind:"data"}]},{type:"event",name:"src::replaceability_interface::ImplementationRemoved",kind:"struct",members:[{name:"implementation_data",type:"src::replaceability_interface::ImplementationData",kind:"data"}]},{type:"event",name:"src::replaceability_interface::ImplementationReplaced",kind:"struct",members:[{name:"implementation_data",type:"src::replaceability_interface::ImplementationData",kind:"data"}]},{type:"event",name:"src::replaceability_interface::ImplementationFinalized",kind:"struct",members:[{name:"impl_hash",type:"core::starknet::class_hash::ClassHash",kind:"data"}]},{type:"event",name:"src::access_control_interface::RoleGranted",kind:"struct",members:[{name:"role",type:"core::felt252",kind:"data"},{name:"account",type:"core::starknet::contract_address::ContractAddress",kind:"data"},{name:"sender",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"src::access_control_interface::RoleRevoked",kind:"struct",members:[{name:"role",type:"core::felt252",kind:"data"},{name:"account",type:"core::starknet::contract_address::ContractAddress",kind:"data"},{name:"sender",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"src::access_control_interface::RoleAdminChanged",kind:"struct",members:[{name:"role",type:"core::felt252",kind:"data"},{name:"previous_admin_role",type:"core::felt252",kind:"data"},{name:"new_admin_role",type:"core::felt252",kind:"data"}]},{type:"event",name:"src::roles_interface::GovernanceAdminAdded",kind:"struct",members:[{name:"added_account",type:"core::starknet::contract_address::ContractAddress",kind:"data"},{name:"added_by",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"src::roles_interface::GovernanceAdminRemoved",kind:"struct",members:[{name:"removed_account",type:"core::starknet::contract_address::ContractAddress",kind:"data"},{name:"removed_by",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"src::roles_interface::UpgradeGovernorAdded",kind:"struct",members:[{name:"added_account",type:"core::starknet::contract_address::ContractAddress",kind:"data"},{name:"added_by",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"src::roles_interface::UpgradeGovernorRemoved",kind:"struct",members:[{name:"removed_account",type:"core::starknet::contract_address::ContractAddress",kind:"data"},{name:"removed_by",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"openzeppelin::token::erc20_v070::erc20::ERC20::Event",kind:"enum",variants:[{name:"Transfer",type:"openzeppelin::token::erc20_v070::erc20::ERC20::Transfer",kind:"nested"},{name:"Approval",type:"openzeppelin::token::erc20_v070::erc20::ERC20::Approval",kind:"nested"},{name:"ImplementationAdded",type:"src::replaceability_interface::ImplementationAdded",kind:"nested"},{name:"ImplementationRemoved",type:"src::replaceability_interface::ImplementationRemoved",kind:"nested"},{name:"ImplementationReplaced",type:"src::replaceability_interface::ImplementationReplaced",kind:"nested"},{name:"ImplementationFinalized",type:"src::replaceability_interface::ImplementationFinalized",kind:"nested"},{name:"RoleGranted",type:"src::access_control_interface::RoleGranted",kind:"nested"},{name:"RoleRevoked",type:"src::access_control_interface::RoleRevoked",kind:"nested"},{name:"RoleAdminChanged",type:"src::access_control_interface::RoleAdminChanged",kind:"nested"},{name:"GovernanceAdminAdded",type:"src::roles_interface::GovernanceAdminAdded",kind:"nested"},{name:"GovernanceAdminRemoved",type:"src::roles_interface::GovernanceAdminRemoved",kind:"nested"},{name:"UpgradeGovernorAdded",type:"src::roles_interface::UpgradeGovernorAdded",kind:"nested"},{name:"UpgradeGovernorRemoved",type:"src::roles_interface::UpgradeGovernorRemoved",kind:"nested"}]}]},59480,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetAddresses=void 0;let n=e.r(525232),a=e.r(84642);class i extends n.StarknetModule{static isValidAddress(e){if(66!==e.length)return!1;try{return(0,a.validateAndParseAddress)(e),!0}catch(e){return!1}}}r.StarknetAddresses=i},228904,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetTokens=void 0;let n=e.r(525232),a=e.r(613820),i=e.r(197026),s=e.r(84642),o=e.r(717065),l=e.r(59480);class c extends n.StarknetModule{getContract(e){return new s.Contract(i.ERC20Abi,e,this.root.provider).typedv2(i.ERC20Abi)}Transfer(e,t,r,n){let i=this.getContract(r);return new a.StarknetAction(e,this.root,i.populateTransaction.transfer(t,n),c.GasCosts.TRANSFER)}Approve(e,t,r,n){let i=this.getContract(r);return new a.StarknetAction(e,this.root,i.populateTransaction.approve(t,n),c.GasCosts.APPROVE)}isValidToken(e){return l.StarknetAddresses.isValidAddress(e)}async getTokenBalance(e,t){let r=this.getContract(t),n=await r.balance_of(e),a=(0,o.toBigInt)(n);return this.logger.debug("getTokenBalance(): token balance fetched, token: "+t+" address: "+e+" amount: "+a.toString()),a}getNativeCurrencyAddress(){return this.root.Fees.getDefaultGasToken()}async txsTransfer(e,t,r,n,a){let i=this.Transfer(e,n,t,r);return a=a??await this.root.Fees.getFeeRate(),this.logger.debug("txsTransfer(): transfer TX created, recipient: "+n.toString()+" token: "+t.toString()+" amount: "+r.toString(10)),[await i.tx(a)]}}r.StarknetTokens=c,c.ERC20_ETH="0x049d36570d4e46f48e99674bd3fcc84644ddd6b96f7c741b1562b82f9e004dc7",c.ERC20_STRK="0x04718f5a0fc34cc1af16a1cdee98ffb20c31f5cd61d6ab07201858f4287c938d",c.GasCosts={TRANSFER:{l1DataGas:400,l2Gas:4e6,l1Gas:0},APPROVE:{l1DataGas:400,l2Gas:4e6,l1Gas:0}}},201962,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetFees=r.starknetGasAdd=r.starknetGasMul=void 0;let n=e.r(717065),a=e.r(228904);r.starknetGasMul=function(e,t){return{l1Gas:e.l1Gas*t,l2Gas:e.l2Gas*t,l1DataGas:e.l1DataGas*t}},r.starknetGasAdd=function(e,t){return{l1Gas:e.l1Gas+t.l1Gas,l2Gas:e.l2Gas+t.l2Gas,l1DataGas:e.l1DataGas+t.l1DataGas}},r.StarknetFees=class{constructor(e,t={l1GasCost:0x470de4df820000n,l2GasCost:4000000000000000n,l1DataGasCost:0x2386f26fc10000n},r=1.25,a){this.logger=(0,n.getLogger)("StarknetFees: "),this.blockFeeCache=null,this.provider=e,this.maxFeeRate=t,this.feeDA=a?.fee??"L1",this.nonceDA=a?.nonce??"L1",this.feeMultiplierPPM=BigInt(Math.floor(1e6*r))}async _getFeeRate(){let e=await this.provider.getBlock("latest"),t=(0,n.toBigInt)(e.l1_gas_price.price_in_fri)*this.feeMultiplierPPM/1000000n,r=(0,n.toBigInt)(e.l1_data_gas_price.price_in_fri)*this.feeMultiplierPPM/1000000n,a=(0,n.toBigInt)(e.l2_gas_price.price_in_fri)*this.feeMultiplierPPM/1000000n;return this.logger.debug("_getFeeRate(): L1 fee rate: ",[t.toString(10),r.toString(10),a.toString(10)]),{l1GasCost:t,l2GasCost:a,l1DataGasCost:r}}async getFeeRate(){if(null==this.blockFeeCache||Date.now()-this.blockFeeCache.timestamp>5e3){let e={timestamp:Date.now(),feeRate:null};e.feeRate=this._getFeeRate().catch(t=>{throw this.blockFeeCache===e&&(this.blockFeeCache=null),t}),this.blockFeeCache=e}let{l1GasCost:e,l2GasCost:t,l1DataGasCost:r}=await this.blockFeeCache.feeRate;e>this.maxFeeRate.l1GasCost&&(e=this.maxFeeRate.l1GasCost),t>this.maxFeeRate.l2GasCost&&(t=this.maxFeeRate.l2GasCost),r>this.maxFeeRate.l1DataGasCost&&(r=this.maxFeeRate.l1DataGasCost);let n=e.toString(10)+","+t.toString(10)+","+r.toString(10)+";v3";return this.logger.debug("getFeeRate(): calculated fee: "+n),n}getDefaultGasToken(){return a.StarknetTokens.ERC20_STRK}static getGasFee(e,t){if(null==t)return 0n;let[r,n,a]=t.split(";")[0].split(",");return BigInt(e.l1Gas)*BigInt(r)+BigInt(e.l2Gas)*BigInt(n)+BigInt(e.l1DataGas)*BigInt(a)}static getGasToken(e){return null==e?null:"v1"===e.split(";")[1]?a.StarknetTokens.ERC20_ETH:a.StarknetTokens.ERC20_STRK}getFeeDetails(e,t){if(null==t)return null;let[r,a,i]=t.split(";")[0].split(",");return{version:"0x3",resourceBounds:{l1_gas:{max_amount:(0,n.toHex)(e.l1Gas,16),max_price_per_unit:(0,n.toHex)(BigInt(r),16)},l2_gas:{max_amount:(0,n.toHex)(e.l2Gas,16),max_price_per_unit:(0,n.toHex)(BigInt(a),16)},l1_data_gas:{max_amount:(0,n.toHex)(e.l1DataGas,16),max_price_per_unit:(0,n.toHex)(BigInt(i),16)}},tip:"0x0",paymasterData:[],nonceDataAvailabilityMode:this.nonceDA,feeDataAvailabilityMode:this.feeDA}}}},613820,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetAction=void 0;let n=e.r(201962);r.StarknetAction=class{constructor(e,t,r=[],n,a){this.mainSigner=e,this.root=t,this.instructions=Array.isArray(r)?r:[r],this.gas={l1Gas:n?.l1Gas??0,l2Gas:n?.l2Gas??0,l1DataGas:n?.l1DataGas??0},this.feeRate=a}estimateFeeRate(){return this.root.Fees.getFeeRate()}addIx(e,t){this.instructions.push(e),this.gas=(0,n.starknetGasAdd)(this.gas,t)}add(e){return this.addAction(e)}addAction(e,t=this.instructions.length){if(e.mainSigner!==this.mainSigner)throw Error("Actions need to have the same signer!");return null==this.gas.l1Gas&&null!=e.gas.l1Gas&&(this.gas.l1Gas=e.gas.l1Gas),null==this.gas.l2Gas&&null!=e.gas.l2Gas&&(this.gas.l2Gas=e.gas.l2Gas),null==this.gas.l1DataGas&&null!=e.gas.l1DataGas&&(this.gas.l1DataGas=e.gas.l1DataGas),null!=this.gas.l1Gas&&null!=e.gas.l1Gas&&(this.gas.l1Gas+=e.gas.l1Gas),null!=this.gas.l2Gas&&null!=e.gas.l2Gas&&(this.gas.l2Gas+=e.gas.l2Gas),null!=this.gas.l1DataGas&&null!=e.gas.l1DataGas&&(this.gas.l1DataGas+=e.gas.l1DataGas),this.instructions.splice(t,0,...e.instructions),null==this.feeRate&&(this.feeRate=e.feeRate),this}async tx(e){return null==e&&(e=this.feeRate),null==e&&(e=await this.estimateFeeRate()),{type:"INVOKE",tx:this.instructions,details:{...this.root.Fees.getFeeDetails(this.gas,e),walletAddress:this.mainSigner,cairoVersion:"1",chainId:this.root.starknetChainId,nonce:null,accountDeploymentData:[],skipValidate:!1}}}async addToTxs(e,t){e.push(await this.tx(t))}ixsLength(){return this.instructions.length}}},183930,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetTransactions=void 0;let n=e.r(525232),a=e.r(717065);class i extends n.StarknetModule{constructor(){super(...arguments),this.latestConfirmedNonces={}}async confirmTransaction(e,t){let r="pending";for(;"pending"===r||"not_found"===r;)await (0,a.timeoutPromise)(3e3,t),"not_found"===(r=await this._getTxIdStatus(e.txId))&&null!=e.signed&&await this.sendSignedTransaction(e).catch(e=>{e.baseError?.code!==59&&this.logger.error("confirmTransaction(): Error on transaction re-send: ",e)});if("rejected"===r)throw Error("Transaction rejected!");let n=(0,a.toBigInt)(e.details.nonce)+1n,i=this.latestConfirmedNonces[e.details.walletAddress];if((null==i||n>i)&&(this.latestConfirmedNonces[e.details.walletAddress]=n),"reverted"===r)throw Error("Transaction reverted!")}async prepareTransactions(e,t){let r=await e.getNonce(),n=this.latestConfirmedNonces[e.getAddress()];null!=n&&n>r&&(this.logger.debug("prepareTransactions(): Using nonce from local cache!"),r=n),r===BigInt(0)&&e.isWalletAccount()&&(r=BigInt(1));let a=await e.checkAndGetDeployPayload(r);null!=a&&t.unshift(await this.root.Accounts.getAccountDeployTransaction(a));for(let n=0;n<t.length;n++){let a=t[n];null!=a.details.nonce&&(r=BigInt(a.details.nonce)),null==r&&(r=BigInt(await this.root.provider.getNonceForAddress(e.getAddress()))),null==a.details.nonce&&(a.details.nonce=r),this.logger.debug("sendAndConfirm(): transaction prepared ("+(n+1)+"/"+t.length+"), nonce: "+a.details.nonce),r+=BigInt(1),null!=this.cbkBeforeTxSigned&&await this.cbkBeforeTxSigned(a)}}async sendSignedTransaction(e,t,r){let n;if(null!=t&&await t(e.txId,await this.serializeTx(e)),this.logger.debug("sendSignedTransaction(): sending transaction: ",e.txId),null==e.signed){let t;switch(e.type){case"INVOKE":t=(await r.account.execute(e.tx,e.details)).transaction_hash;break;case"DEPLOY_ACCOUNT":t=(await r.account.deployAccount(e.tx,e.details)).transaction_hash;break;default:throw Error("Unsupported tx type!")}return e.txId=t,t}switch(e.type){case"INVOKE":n=await this.provider.channel.invoke(e.signed,e.details).then(e=>e.transaction_hash);break;case"DEPLOY_ACCOUNT":n=await this.provider.channel.deployAccount(e.signed,e.details).then(e=>e.transaction_hash);break;default:throw Error("Unsupported tx type!")}return e.txId!==n&&this.logger.warn("sendSignedTransaction(): sent tx hash not matching the precomputed hash!"),this.logger.info("sendSignedTransaction(): tx sent, expected txHash: "+e.txId+", txHash: "+n),n}async sendAndConfirm(e,t,r,n,i,s){if(await this.prepareTransactions(e,t),!e.isWalletAccount())for(let r=0;r<t.length;r++){let n=t[r];switch(n.type){case"INVOKE":n.signed=await e.account.buildInvocation(n.tx,n.details),(0,a.calculateHash)(n);break;case"DEPLOY_ACCOUNT":n.signed=await e.account.buildAccountDeployPayload(n.tx,n.details),(0,a.calculateHash)(n);break;default:throw Error("Unsupported tx type!")}this.logger.debug("sendAndConfirm(): transaction signed ("+(r+1)+"/"+t.length+"): "+n.txId)}this.logger.debug("sendAndConfirm(): sending transactions, count: "+t.length+" waitForConfirmation: "+r+" parallel: "+i);let o=[];if(i){let a=[];for(let i=0;i<t.length;i++){let l=t[i],c=await this.sendSignedTransaction(l,s,e);r&&a.push(this.confirmTransaction(l,n)),o.push(c),this.logger.debug("sendAndConfirm(): transaction sent ("+(i+1)+"/"+t.length+"): "+l.txId)}a.length>0&&await Promise.all(a)}else for(let a=0;a<t.length;a++){let i=t[a],l=await this.sendSignedTransaction(i,s,e),c=this.confirmTransaction(i,n);this.logger.debug("sendAndConfirm(): transaction sent ("+(a+1)+"/"+t.length+"): "+i.txId),(a<t.length-1||r)&&await c,o.push(l)}return this.logger.info("sendAndConfirm(): sent transactions, count: "+t.length+" waitForConfirmation: "+r+" parallel: "+i),o}serializeTx(e){return Promise.resolve(JSON.stringify(e,(e,t)=>"bigint"==typeof t?(0,a.toHex)(t):t))}deserializeTx(e){return Promise.resolve(JSON.parse(e))}async getTxStatus(e){let t=await this.deserializeTx(e);return await this.getTxIdStatus(t.txId)}async _getTxIdStatus(e){let t=await this.provider.getTransactionStatus(e).catch(e=>{if(null!=e.message&&e.message.includes("29: Transaction hash not found"))return null;throw e});return null==t?"not_found":"RECEIVED"===t.finality_status?"pending":"REJECTED"===t.finality_status?"rejected":"SUCCEEDED"===t.execution_status?"success":"reverted"}async getTxIdStatus(e){let t=await this._getTxIdStatus(e);return"rejected"===t?"reverted":t}onBeforeTxSigned(e){this.cbkBeforeTxSigned=e}offBeforeTxSigned(e){return this.cbkBeforeTxSigned=null,!0}}r.StarknetTransactions=i},587510,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetEvents=void 0;let n=e.r(525232);class a extends n.StarknetModule{constructor(){super(...arguments),this.EVENTS_LIMIT=100,this.FORWARD_BLOCK_RANGE=2e3}async getBlockEvents(e,t,r,n=r,a){let i=[],s=null;for(;null==s||s?.continuation_token!=null;)s=await this.root.provider.getEvents({address:e,from_block:null==r?"pending":{block_number:r},to_block:null==n?"pending":{block_number:n},keys:t,chunk_size:this.EVENTS_LIMIT,continuation_token:s?.continuation_token}),null!=a&&a.throwIfAborted(),i.push(...s.events);return i}async findInEvents(e,t,r,n){let a=await this.provider.getBlockNumber();for(let i=a;i>=0;i-=this.FORWARD_BLOCK_RANGE){let s=await this.getBlockEvents(e,t,Math.max(i-this.FORWARD_BLOCK_RANGE,0),i===a?null:i,n),o=await r(s.reverse());if(null!=o)return o}return null}async findInEventsForward(e,t,r,n,a){(null==a||a>this.EVENTS_LIMIT)&&(a=this.EVENTS_LIMIT);let i=null;for(;null==i||i?.continuation_token!=null;){i=await this.root.provider.getEvents({address:e,to_block:"latest",keys:t,chunk_size:a??this.EVENTS_LIMIT,continuation_token:i?.continuation_token}),null!=n&&n.throwIfAborted();let s=await r(i.events);if(null!=s)return s}return null}}r.StarknetEvents=a},223981,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetSignatures=void 0;let n=e.r(500874),a=e.r(525232),i=e.r(84642),s=e.r(717065),o=e.r(1083),l=[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],c=[{name:"Data hash",type:"u256"}];class u extends a.StarknetModule{constructor(e,t="atomiq.exchange"){super(e),this.domain={name:t,version:"1",chainId:i.shortString.decodeShortString(e.starknetChainId),revision:"1"}}getTypedMessage(e,t,r){return{types:{StarknetDomain:l,[t]:e},primaryType:t,domain:this.domain,message:r}}async signTypedMessage(e,t,r,n){let a=await e.account.signMessage(this.getTypedMessage(t,r,n));return JSON.stringify(i.stark.formatSignature(a))}async isValidSignature(e,t,r,n,a){return this.provider.verifyMessageInStarknet(this.getTypedMessage(r,n,a),JSON.parse(e),t)}getDataSignature(e,t){let r=n.Buffer.from((0,o.sha256)(t));return this.signTypedMessage(e,c,"DataHash",{"Data hash":i.cairo.uint256((0,s.toHex)(r))})}isValidDataSignature(e,t,r){let a=n.Buffer.from((0,o.sha256)(e));return this.isValidSignature(t,r,c,"DataHash",{"Data hash":i.cairo.uint256((0,s.toHex)(a))})}}r.StarknetSignatures=u},393804,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetAccounts=void 0;let n=e.r(525232);class a extends n.StarknetModule{async getAccountDeployTransaction(e){let t={...this.root.Fees.getFeeDetails({l1DataGas:500,l2Gas:2e8,l1Gas:0},await this.root.Fees.getFeeRate()),walletAddress:e.contractAddress,cairoVersion:"1",chainId:this.root.starknetChainId,nonce:0,accountDeploymentData:[],skipValidate:!1};return{type:"DEPLOY_ACCOUNT",tx:e,details:t}}}r.StarknetAccounts=a},640473,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetBlocks=void 0;let n=e.r(525232);class a extends n.StarknetModule{constructor(){super(...arguments),this.BLOCK_CACHE_TIME=5e3,this.blockCache={}}fetchAndSaveBlockTime(e){let t=e.toString(10),r=this.provider.getBlockWithTxHashes(e).then(e=>e.timestamp),n=Date.now();return this.blockCache[t]={blockTime:r,timestamp:n},r.catch(e=>{throw null!=this.blockCache[t]&&this.blockCache[t].blockTime===r&&delete this.blockCache[t],e}),{blockTime:r,timestamp:n}}cleanupBlocks(){let e=Date.now();for(let t in this.blockCache)if(e-this.blockCache[t].timestamp>this.BLOCK_CACHE_TIME)delete this.blockCache[t];else break}getBlockTime(e){this.cleanupBlocks();let t=this.blockCache[e.toString(10)];return(null==t||Date.now()-t.timestamp>this.BLOCK_CACHE_TIME)&&(t=this.fetchAndSaveBlockTime(e)),t.blockTime}}r.StarknetBlocks=a},110284,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetSigner=void 0;let n=e.r(717065);r.StarknetSigner=class{constructor(e){this.isDeployed=null,this.account=e}getPublicKey(){return this.account.signer.getPubKey()}getAddress(){return(0,n.toHex)(this.account.address)}isWalletAccount(){return null!=this.account.walletProvider}async getNonce(){try{return BigInt(await this.account.getNonceForAddress(this.getAddress(),"pending"))}catch(e){if(null!=e.message&&e.message.includes("20: Contract not found"))return BigInt(0);throw e}}async checkAndGetDeployPayload(e){if(this.isDeployed)return null;let t=this.account;return null==t.getDeploymentData||(e??(e=BigInt(await this.getNonce())),this.isDeployed=e!=BigInt(0),this.isDeployed)?null:t.getDeploymentData()}}},981676,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetKeypairWallet=void 0;let n=e.r(84642),a=e.r(717065),i=e.r(500874),s="0x00261c293c8084cd79086214176b33e5911677cec55104fddc8d25b0b736dcad";class o extends n.Account{constructor(e,t){let r=n.ec.starkCurve.getStarkKey((0,a.toHex)(t));super(e,n.hash.calculateContractAddressFromHash(r,s,n.CallData.compile({publicKey:r}),0),t,"1"),this.publicKey=r}getDeploymentData(){return{classHash:s,constructorCalldata:n.CallData.compile({publicKey:this.publicKey}),addressSalt:this.publicKey,contractAddress:this.address}}static generateRandomPrivateKey(){return"0x"+i.Buffer.from(n.ec.starkCurve.utils.randomPrivateKey()).toString("hex")}}r.StarknetKeypairWallet=o},583767,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetChainInterface=void 0;let n=e.r(84642),a=e.r(717065),i=e.r(183930),s=e.r(201962),o=e.r(59480),l=e.r(228904),c=e.r(587510),u=e.r(223981),d=e.r(393804),h=e.r(640473),f=e.r(110284),p=e.r(500874),g=e.r(981676);r.StarknetChainInterface=class{constructor(e,t,r,n=new s.StarknetFees(t)){this.chainId="STARKNET",this.logger=(0,a.getLogger)("StarknetChainInterface: "),this.starknetChainId=e,this.provider=t,this.retryPolicy=r,this.Fees=n,this.Tokens=new l.StarknetTokens(this),this.Transactions=new i.StarknetTransactions(this),this.Signatures=new u.StarknetSignatures(this),this.Events=new c.StarknetEvents(this),this.Accounts=new d.StarknetAccounts(this),this.Blocks=new h.StarknetBlocks(this)}async getBalance(e,t){return await this.Tokens.getTokenBalance(e,t)}getNativeCurrencyAddress(){return this.Tokens.getNativeCurrencyAddress()}isValidToken(e){return this.Tokens.isValidToken(e)}isValidAddress(e){return o.StarknetAddresses.isValidAddress(e)}offBeforeTxReplace(e){return!0}onBeforeTxReplace(e){}onBeforeTxSigned(e){this.Transactions.onBeforeTxSigned(e)}offBeforeTxSigned(e){return this.Transactions.offBeforeTxSigned(e)}randomAddress(){return(0,a.toHex)(n.stark.randomAddress())}randomSigner(){let e="0x"+p.Buffer.from(n.ec.starkCurve.utils.randomPrivateKey()).toString("hex"),t=new g.StarknetKeypairWallet(this.provider,e);return new f.StarknetSigner(t)}sendAndConfirm(e,t,r,n,a,i){return this.Transactions.sendAndConfirm(e,t,r,n,a,i)}serializeTx(e){return this.Transactions.serializeTx(e)}deserializeTx(e){return this.Transactions.deserializeTx(e)}getTxIdStatus(e){return this.Transactions.getTxIdStatus(e)}getTxStatus(e){return this.Transactions.getTxStatus(e)}txsTransfer(e,t,r,n,a){return this.Tokens.txsTransfer(e,t,r,n,a)}async transfer(e,t,r,n,a){let i=await this.Tokens.txsTransfer(e.getAddress(),t,r,n,a?.feeRate),[s]=await this.Transactions.sendAndConfirm(e,i,a?.waitForConfirmation,a?.abortSignal,!1);return s}}},617988,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetBtcHeader=void 0;let n=e.r(500874),a=e.r(717065),i=e.r(1083);class s{constructor(e){this.reversed_version=Number(e.reversed_version),this.previous_blockhash=e.previous_blockhash.map(e=>Number(e)),this.merkle_root=e.merkle_root.map(e=>Number(e)),this.reversed_timestamp=Number(e.reversed_timestamp),this.nbits=Number(e.nbits),this.nonce=Number(e.nonce),this.hash=e.hash}getMerkleRoot(){return(0,a.u32ArrayToBuffer)(this.merkle_root)}getNbits(){return(0,a.u32ReverseEndianness)(this.nbits)}getNonce(){return(0,a.u32ReverseEndianness)(this.nonce)}getReversedPrevBlockhash(){return(0,a.u32ArrayToBuffer)(this.previous_blockhash)}getTimestamp(){return(0,a.u32ReverseEndianness)(this.reversed_timestamp)}getVersion(){return(0,a.u32ReverseEndianness)(this.reversed_version)}getHash(){if(null!=this.hash)return this.hash;let e=n.Buffer.alloc(80);return e.writeUInt32BE(this.reversed_version,0),(0,a.u32ArrayToBuffer)(this.previous_blockhash).copy(e,4),(0,a.u32ArrayToBuffer)(this.merkle_root).copy(e,36),e.writeUInt32BE(this.reversed_timestamp,68),e.writeUInt32BE(this.nbits,72),e.writeUInt32BE(this.nonce,76),n.Buffer.from((0,i.sha256)((0,i.sha256)(e)))}serialize(){return[this.reversed_version,...this.previous_blockhash,...this.merkle_root,this.reversed_timestamp,this.nbits,this.nonce]}static fromSerializedFeltArray(e){let t=(0,a.toHex)(e.shift()),r=e.splice(0,8).map(a.toHex),n=e.splice(0,8).map(a.toHex),i=(0,a.toHex)(e.shift());return new s({reversed_version:t,previous_blockhash:r,merkle_root:n,reversed_timestamp:i,nbits:(0,a.toHex)(e.shift()),nonce:(0,a.toHex)(e.shift())})}}r.StarknetBtcHeader=s},124455,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetBtcStoredHeader=void 0;let n=e.r(154585),a=e.r(617988),i=e.r(500874),s=e.r(84642),o=e.r(717065);class l{constructor(e){this.blockheader=e.blockheader instanceof a.StarknetBtcHeader?e.blockheader:new a.StarknetBtcHeader(e.blockheader),this.block_hash=e.block_hash.map(e=>Number(e)),this.chain_work=(0,o.isUint256)(e.chain_work)?e.chain_work:s.cairo.uint256(e.chain_work),this.block_height=Number(e.block_height),this.last_diff_adjustment=Number(e.last_diff_adjustment),this.prev_block_timestamps=e.prev_block_timestamps.map(e=>Number(e))}getBlockheight(){return this.block_height}getChainWork(){return(0,o.bigNumberishToBuffer)(this.chain_work,32)}getHeader(){return this.blockheader}getLastDiffAdjustment(){return this.last_diff_adjustment}getPrevBlockTimestamps(){return this.prev_block_timestamps}getBlockHash(){return(0,o.u32ArrayToBuffer)(this.block_hash).reverse()}computeNextBlockTimestamps(){let e=[...this.prev_block_timestamps];for(let t=1;t<10;t++)e[t-1]=e[t];return e[9]=this.blockheader.getTimestamp(),e}computeNextChainWork(e){let t=[...this.getChainWork()];return n.StatePredictorUtils.addInPlace(t,[...n.StatePredictorUtils.getChainwork(e)]),i.Buffer.from(t)}computeNextLastDiffAdjustment(e){let t=this.block_height+1,r=this.last_diff_adjustment;return t%n.StatePredictorUtils.DIFF_ADJUSTMENT_PERIOD==0&&(r=e),r}computeNext(e){return new l({chain_work:"0x"+this.computeNextChainWork(e.getNbits()).toString("hex"),prev_block_timestamps:this.computeNextBlockTimestamps(),block_height:this.block_height+1,last_diff_adjustment:this.computeNextLastDiffAdjustment(e.getTimestamp()),block_hash:(0,o.bufferToU32Array)(e.getHash()),blockheader:e})}serialize(){return[...this.blockheader.serialize(),...this.block_hash,this.chain_work.low,this.chain_work.high,this.block_height,this.last_diff_adjustment,...this.prev_block_timestamps]}static fromSerializedFeltArray(e){let t=a.StarknetBtcHeader.fromSerializedFeltArray(e),r=e.splice(0,8).map(o.toHex),n={low:e.shift(),high:e.shift()},i=(0,o.toHex)(e.shift());return new l({blockheader:t,block_hash:r,chain_work:n,block_height:i,last_diff_adjustment:(0,o.toHex)(e.shift()),prev_block_timestamps:e.splice(0,10).map(o.toHex)})}}r.StarknetBtcStoredHeader=l},801947,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetContractEvents=void 0;let n=e.r(587510),a=e.r(84642),i=e.r(717065);class s extends n.StarknetEvents{constructor(e,t,r){super(e),this.contract=t,this.abi=r}toStarknetAbiEvents(e){let t=a.events.getAbiEvents(this.abi),r=a.CallData.getAbiStruct(this.abi),n=a.CallData.getAbiEnum(this.abi),i=a.events.parseEvents(e,t,r,n);if(i.length!==e.length)throw Error("Invalid event detected, please check provided ABI");return i.map((t,r)=>{let n=e[r],a=Object.keys(t)[0];return{name:a,txHash:n.transaction_hash,params:t[a],blockNumber:n.block_number,blockHash:n.block_hash,data:n.data,keys:n.keys}})}toFilter(e,t){let r=[];return r.push(e.map(e=>{let t=e.split(":"),r=t[t.length-1];return(0,i.toHex)(a.hash.starknetKeccak(r))})),null!=t&&t.forEach(e=>r.push(null==e?[]:[e])),r}async getContractBlockEvents(e,t,r,n=r){let a=await super.getBlockEvents(this.contract.contract.address,this.toFilter(e,t),r,n);return this.toStarknetAbiEvents(a)}async findInContractEvents(e,t,r,n){return this.findInEvents(this.contract.contract.address,this.toFilter(e,t),async e=>{for(let t of this.toStarknetAbiEvents(e)){let e=await r(t);if(null!=e)return e}},n)}async findInContractEventsForward(e,t,r,n){return this.findInEventsForward(this.contract.contract.address,this.toFilter(e,t),async e=>{for(let t of this.toStarknetAbiEvents(e)){let e=await r(t);if(null!=e)return e}},n)}}r.StarknetContractEvents=s},406524,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetContractBase=void 0;let n=e.r(84642),a=e.r(801947);r.StarknetContractBase=class{constructor(e,t,r){this.Chain=e,this.contract=new n.Contract(r,t,e.provider).typedv2(r),this.Events=new a.StarknetContractEvents(e,this,r)}}},242954,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BtcRelayAbi=void 0,r.BtcRelayAbi=[{type:"impl",name:"BtcRelayImpl",interface_name:"btc_relay::IBtcRelay"},{type:"struct",name:"btc_relay::structs::blockheader::BlockHeader",members:[{name:"reversed_version",type:"core::integer::u32"},{name:"previous_blockhash",type:"[core::integer::u32; 8]"},{name:"merkle_root",type:"[core::integer::u32; 8]"},{name:"reversed_timestamp",type:"core::integer::u32"},{name:"nbits",type:"core::integer::u32"},{name:"nonce",type:"core::integer::u32"}]},{type:"struct",name:"core::array::Span::<btc_relay::structs::blockheader::BlockHeader>",members:[{name:"snapshot",type:"@core::array::Array::<btc_relay::structs::blockheader::BlockHeader>"}]},{type:"struct",name:"core::integer::u256",members:[{name:"low",type:"core::integer::u128"},{name:"high",type:"core::integer::u128"}]},{type:"struct",name:"btc_relay::structs::stored_blockheader::StoredBlockHeader",members:[{name:"blockheader",type:"btc_relay::structs::blockheader::BlockHeader"},{name:"block_hash",type:"[core::integer::u32; 8]"},{name:"chain_work",type:"core::integer::u256"},{name:"block_height",type:"core::integer::u32"},{name:"last_diff_adjustment",type:"core::integer::u32"},{name:"prev_block_timestamps",type:"[core::integer::u32; 10]"}]},{type:"interface",name:"btc_relay::IBtcRelay",items:[{type:"function",name:"submit_main_blockheaders",inputs:[{name:"block_headers",type:"core::array::Span::<btc_relay::structs::blockheader::BlockHeader>"},{name:"stored_header",type:"btc_relay::structs::stored_blockheader::StoredBlockHeader"}],outputs:[],state_mutability:"external"},{type:"function",name:"submit_short_fork_blockheaders",inputs:[{name:"block_headers",type:"core::array::Span::<btc_relay::structs::blockheader::BlockHeader>"},{name:"stored_header",type:"btc_relay::structs::stored_blockheader::StoredBlockHeader"}],outputs:[],state_mutability:"external"},{type:"function",name:"submit_fork_blockheaders",inputs:[{name:"fork_id",type:"core::felt252"},{name:"block_headers",type:"core::array::Span::<btc_relay::structs::blockheader::BlockHeader>"},{name:"stored_header",type:"btc_relay::structs::stored_blockheader::StoredBlockHeader"}],outputs:[],state_mutability:"external"}]},{type:"impl",name:"BtcRelayReadOnlyImpl",interface_name:"btc_relay::IBtcRelayReadOnly"},{type:"interface",name:"btc_relay::IBtcRelayReadOnly",items:[{type:"function",name:"get_chainwork",inputs:[],outputs:[{type:"core::integer::u256"}],state_mutability:"view"},{type:"function",name:"get_blockheight",inputs:[],outputs:[{type:"core::integer::u32"}],state_mutability:"view"},{type:"function",name:"verify_blockheader",inputs:[{name:"stored_header",type:"btc_relay::structs::stored_blockheader::StoredBlockHeader"}],outputs:[{type:"core::integer::u32"}],state_mutability:"view"},{type:"function",name:"get_commit_hash",inputs:[{name:"height",type:"core::integer::u32"}],outputs:[{type:"core::felt252"}],state_mutability:"view"},{type:"function",name:"get_tip_commit_hash",inputs:[],outputs:[{type:"core::felt252"}],state_mutability:"view"}]},{type:"constructor",name:"constructor",inputs:[{name:"stored_header",type:"btc_relay::structs::stored_blockheader::StoredBlockHeader"}]},{type:"event",name:"btc_relay::events::StoreHeader",kind:"struct",members:[{name:"commit_hash",type:"core::felt252",kind:"key"},{name:"block_hash_poseidon",type:"core::felt252",kind:"key"},{name:"header",type:"btc_relay::structs::stored_blockheader::StoredBlockHeader",kind:"data"}]},{type:"event",name:"btc_relay::events::StoreForkHeader",kind:"struct",members:[{name:"commit_hash",type:"core::felt252",kind:"key"},{name:"block_hash_poseidon",type:"core::felt252",kind:"key"},{name:"fork_id",type:"core::felt252",kind:"key"},{name:"header",type:"btc_relay::structs::stored_blockheader::StoredBlockHeader",kind:"data"}]},{type:"event",name:"btc_relay::events::ChainReorg",kind:"struct",members:[{name:"fork_submitter",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"fork_id",type:"core::felt252",kind:"key"},{name:"tip_block_hash_poseidon",type:"core::felt252",kind:"key"},{name:"tip_commit_hash",type:"core::felt252",kind:"key"},{name:"start_height",type:"core::felt252",kind:"data"}]},{type:"event",name:"btc_relay::BtcRelay::Event",kind:"enum",variants:[{name:"StoreHeader",type:"btc_relay::events::StoreHeader",kind:"nested"},{name:"StoreForkHeader",type:"btc_relay::events::StoreForkHeader",kind:"nested"},{name:"ChainReorg",type:"btc_relay::events::ChainReorg",kind:"nested"}]}]},993048,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetBtcRelay=void 0;let n=e.r(500874),a=e.r(617988),i=e.r(154585),s=e.r(717065),o=e.r(406524),l=e.r(124455),c=e.r(242954),u=e.r(84642),d=e.r(201962),h=e.r(613820);function f(e){return new a.StarknetBtcHeader({reversed_version:(0,s.u32ReverseEndianness)(e.getVersion()),previous_blockhash:(0,s.bufferToU32Array)(n.Buffer.from(e.getPrevBlockhash(),"hex").reverse()),merkle_root:(0,s.bufferToU32Array)(n.Buffer.from(e.getMerkleRoot(),"hex").reverse()),reversed_timestamp:(0,s.u32ReverseEndianness)(e.getTimestamp()),nbits:(0,s.u32ReverseEndianness)(e.getNbits()),nonce:(0,s.u32ReverseEndianness)(e.getNonce()),hash:n.Buffer.from(e.getHash(),"hex").reverse()})}let p={l1DataGas:600,l2Gas:24e6,l1Gas:0},g={l1DataGas:1e3,l2Gas:4e7,l1Gas:0},m={[i.BitcoinNetwork.TESTNET4]:"0x0099b63f39f0cabb767361de3d8d3e97212351a51540e2687c2571f4da490dbe",[i.BitcoinNetwork.TESTNET]:"0x068601c79da2231d21e015ccfd59c243861156fa523a12c9f987ec28eb8dbc8c",[i.BitcoinNetwork.MAINNET]:"0x057b14a4231b82f1e525ff35a722d893ca3dd2bde0baa6cee97937c5be861dbc"};function y(e,t,r){return r.push((0,s.toHex)(e.length)),e.forEach(e=>{r.push(...e.serialize())}),r.push(...t.serialize()),r}let b=(0,s.getLogger)("StarknetBtcRelay: ");class _ extends o.StarknetContractBase{SaveMainHeaders(e,t,r){return new h.StarknetAction(e,this.Chain,{contractAddress:this.contract.address,entrypoint:"submit_main_blockheaders",calldata:y(t,r,[])},(0,d.starknetGasMul)(p,t.length))}SaveShortForkHeaders(e,t,r){return new h.StarknetAction(e,this.Chain,{contractAddress:this.contract.address,entrypoint:"submit_short_fork_blockheaders",calldata:y(t,r,[])},(0,d.starknetGasMul)(p,t.length))}SaveLongForkHeaders(e,t,r,n,a=100){return new h.StarknetAction(e,this.Chain,{contractAddress:this.contract.address,entrypoint:"submit_fork_blockheaders",calldata:y(r,n,[(0,s.toHex)(t)])},(0,d.starknetGasAdd)((0,d.starknetGasMul)(p,r.length),(0,d.starknetGasMul)(g,a)))}constructor(e,t,r,n=m[r]){super(e,n,c.BtcRelayAbi),this.maxHeadersPerTx=100,this.maxForkHeadersPerTx=100,this.maxShortForkHeadersPerTx=100,this.bitcoinRpc=t}computeCommitedHeaders(e,t){let r=[e];for(let e of t)r.push(r[r.length-1].computeNext(e));return r}async _saveHeaders(e,t,r,n,a,s){let o,l=t.map(f);switch(a){case -1:o=this.SaveShortForkHeaders(e,l,r);break;case 0:o=this.SaveMainHeaders(e,l,r);break;default:o=this.SaveLongForkHeaders(e,a,l,r)}let c=await o.tx(s),u=this.computeCommitedHeaders(r,l),d=u[u.length-1];return 0!==a&&i.StatePredictorUtils.gtBuffer(d.getBlockHash(),n)&&(a=0),{forkId:a,lastStoredHeader:d,tx:c,computedCommitedHeaders:u}}getBlock(e,t){let r=[null==e?null:(0,s.toHex)(e)];if(null!=t){let e=u.hash.computePoseidonHashOnElements((0,s.bufferToU32Array)(n.Buffer.from([...t]).reverse()));r.push(e)}return this.Events.findInContractEvents(["btc_relay::events::StoreHeader","btc_relay::events::StoreForkHeader"],r,e=>Promise.resolve([l.StarknetBtcStoredHeader.fromSerializedFeltArray(e.data),BigInt(e.params.commit_hash)]))}async getBlockHeight(){return Number(await this.contract.get_blockheight())}async getTipData(){let e=await this.contract.get_tip_commit_hash();if(null==e||BigInt(e)===BigInt(0))return null;let t=await this.getBlock(e);if(null==t)return null;let[r]=t;return{blockheight:r.getBlockheight(),commitHash:(0,s.bigNumberishToBuffer)(e,32).toString("hex"),blockhash:r.getBlockHash().toString("hex"),chainWork:r.getChainWork()}}async retrieveLogAndBlockheight(e,t){let r=await this.getBlockHeight();if(null!=t&&r<t)return null;let a=await this.getBlock(null,n.Buffer.from(e.blockhash,"hex"));if(null==a)return null;let[i,o]=a;return BigInt(await this.contract.get_commit_hash(i.block_height))!==BigInt(o)?null:(b.debug("retrieveLogAndBlockheight(): block found, commit hash: "+(0,s.toHex)(o)+" blockhash: "+e.blockhash+" current btc relay height: "+r),{header:i,height:r})}async retrieveLogByCommitHash(e,t){let r=await this.getBlock(e,n.Buffer.from(t.blockhash,"hex"));if(null==r)return null;let[a,i]=r;return BigInt(await this.contract.get_commit_hash(a.block_height))!==BigInt(i)?null:(b.debug("retrieveLogByCommitHash(): block found, commit hash: "+e+" blockhash: "+t.blockhash+" height: "+a.block_height),a)}async retrieveLatestKnownBlockLog(){let e=await this.Events.findInContractEvents(["btc_relay::events::StoreHeader","btc_relay::events::StoreForkHeader"],null,async e=>{let t=l.StarknetBtcStoredHeader.fromSerializedFeltArray(e.data),r=t.getBlockHash().toString("hex"),n=e.params.commit_hash,[a,i]=await Promise.all([this.bitcoinRpc.isInMainChain(r).catch(()=>!1),this.contract.get_commit_hash(t.block_height)]);return a&&BigInt(n)===BigInt(i)?{resultStoredHeader:t,resultBitcoinHeader:await this.bitcoinRpc.getBlockHeader(r),commitHash:n}:null});return null!=e&&b.debug("retrieveLatestKnownBlockLog(): block found, commit hash: "+(0,s.toHex)(e.commitHash)+" blockhash: "+e.resultBitcoinHeader.getHash()+" height: "+e.resultStoredHeader.getBlockheight()),e}saveMainHeaders(e,t,r,n){return b.debug("saveMainHeaders(): submitting main blockheaders, count: "+t.length),this._saveHeaders(e,t,r,null,0,n)}async saveNewForkHeaders(e,t,r,n,a){let i=Math.floor(0xffffffffffff*Math.random());return b.debug("saveNewForkHeaders(): submitting new fork & blockheaders, count: "+t.length+" forkId: 0x"+i.toString(16)),await this._saveHeaders(e,t,r,n,i,a)}saveForkHeaders(e,t,r,n,a,i){return b.debug("saveForkHeaders(): submitting blockheaders to existing fork, count: "+t.length+" forkId: 0x"+n.toString(16)),this._saveHeaders(e,t,r,a,n,i)}saveShortForkHeaders(e,t,r,n,a){return b.debug("saveShortForkHeaders(): submitting short fork blockheaders, count: "+t.length),this._saveHeaders(e,t,r,n,-1,a)}async estimateSynchronizeFee(e,t){let r=e-(await this.getTipData()).blockheight;if(r<=0)return 0n;let n=BigInt(r)*await this.getFeePerBlock(t);return b.debug("estimateSynchronizeFee(): required blockheight: "+e+" blockheight delta: "+r+" fee: "+n.toString(10)),n}async getFeePerBlock(e){return e??(e=await this.Chain.Fees.getFeeRate()),d.StarknetFees.getGasFee(p,e)}getMainFeeRate(e){return this.Chain.Fees.getFeeRate()}getForkFeeRate(e,t){return this.Chain.Fees.getFeeRate()}saveInitialHeader(e,t,r,n,a){throw Error("Not supported, starknet contract is initialized with constructor!")}static async getCommitedHeadersAndSynchronize(e,t,r,n,a,i){let o=[],l={};for(let e of r){let r=e.blockheight+e.requiredConfirmations-1,n=await (0,s.tryWithRetries)(()=>t.retrieveLogAndBlockheight({blockhash:e.blockhash},r));null!=n?l[n.header.getBlockHash().toString("hex")]=n.header:o.push(e)}if(0===o.length)return l;if(null==a)return null;let c=await a.syncToLatestTxs(e.toString(),i);for(let e in b.debug("getCommitedHeaderAndSynchronize(): BTC Relay not synchronized to required blockheight, synchronizing ourselves in "+c.txs.length+" txs"),b.debug("getCommitedHeaderAndSynchronize(): BTC Relay computed header map: ",c.computedHeaderMap),n.push(...c.txs),c.computedHeaderMap){let t=c.computedHeaderMap[e];l[t.getBlockHash().toString("hex")]=t}for(let e of o)if(null==l[e.blockhash])return null;return l}}r.StarknetBtcRelay=_},942790,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.EscrowManagerAbi=void 0,r.EscrowManagerAbi=[{type:"impl",name:"EscrowManagerImpl",interface_name:"escrow_manager::IEscrowManager"},{type:"struct",name:"core::integer::u256",members:[{name:"low",type:"core::integer::u128"},{name:"high",type:"core::integer::u128"}]},{type:"struct",name:"escrow_manager::structs::escrow::EscrowExecution",members:[{name:"hash",type:"core::felt252"},{name:"expiry",type:"core::integer::u64"},{name:"fee",type:"core::integer::u256"}]},{type:"enum",name:"core::option::Option::<escrow_manager::structs::escrow::EscrowExecution>",variants:[{name:"Some",type:"escrow_manager::structs::escrow::EscrowExecution"},{name:"None",type:"()"}]},{type:"struct",name:"escrow_manager::structs::escrow::EscrowData",members:[{name:"offerer",type:"core::starknet::contract_address::ContractAddress"},{name:"claimer",type:"core::starknet::contract_address::ContractAddress"},{name:"token",type:"core::starknet::contract_address::ContractAddress"},{name:"refund_handler",type:"core::starknet::contract_address::ContractAddress"},{name:"claim_handler",type:"core::starknet::contract_address::ContractAddress"},{name:"flags",type:"core::integer::u128"},{name:"claim_data",type:"core::felt252"},{name:"refund_data",type:"core::felt252"},{name:"amount",type:"core::integer::u256"},{name:"fee_token",type:"core::starknet::contract_address::ContractAddress"},{name:"security_deposit",type:"core::integer::u256"},{name:"claimer_bounty",type:"core::integer::u256"},{name:"success_action",type:"core::option::Option::<escrow_manager::structs::escrow::EscrowExecution>"}]},{type:"struct",name:"core::array::Span::<core::felt252>",members:[{name:"snapshot",type:"@core::array::Array::<core::felt252>"}]},{type:"interface",name:"escrow_manager::IEscrowManager",items:[{type:"function",name:"initialize",inputs:[{name:"escrow",type:"escrow_manager::structs::escrow::EscrowData"},{name:"signature",type:"core::array::Array::<core::felt252>"},{name:"timeout",type:"core::integer::u64"},{name:"extra_data",type:"core::array::Span::<core::felt252>"}],outputs:[],state_mutability:"external"},{type:"function",name:"claim",inputs:[{name:"escrow",type:"escrow_manager::structs::escrow::EscrowData"},{name:"witness",type:"core::array::Array::<core::felt252>"}],outputs:[],state_mutability:"external"},{type:"function",name:"refund",inputs:[{name:"escrow",type:"escrow_manager::structs::escrow::EscrowData"},{name:"witness",type:"core::array::Array::<core::felt252>"}],outputs:[],state_mutability:"external"},{type:"function",name:"cooperative_refund",inputs:[{name:"escrow",type:"escrow_manager::structs::escrow::EscrowData"},{name:"signature",type:"core::array::Array::<core::felt252>"},{name:"timeout",type:"core::integer::u64"}],outputs:[],state_mutability:"external"}]},{type:"impl",name:"LPVaultImpl",interface_name:"escrow_manager::components::lp_vault::ILPVault"},{type:"struct",name:"core::array::Span::<(core::starknet::contract_address::ContractAddress, core::starknet::contract_address::ContractAddress)>",members:[{name:"snapshot",type:"@core::array::Array::<(core::starknet::contract_address::ContractAddress, core::starknet::contract_address::ContractAddress)>"}]},{type:"interface",name:"escrow_manager::components::lp_vault::ILPVault",items:[{type:"function",name:"deposit",inputs:[{name:"token",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u256"}],outputs:[],state_mutability:"external"},{type:"function",name:"withdraw",inputs:[{name:"token",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"core::integer::u256"},{name:"destination",type:"core::starknet::contract_address::ContractAddress"}],outputs:[],state_mutability:"external"},{type:"function",name:"get_balance",inputs:[{name:"data",type:"core::array::Span::<(core::starknet::contract_address::ContractAddress, core::starknet::contract_address::ContractAddress)>"}],outputs:[{type:"core::array::Array::<core::integer::u256>"}],state_mutability:"view"}]},{type:"impl",name:"ReputationTrackerImpl",interface_name:"escrow_manager::components::reputation::IReputationTracker"},{type:"struct",name:"core::array::Span::<(core::starknet::contract_address::ContractAddress, core::starknet::contract_address::ContractAddress, core::starknet::contract_address::ContractAddress)>",members:[{name:"snapshot",type:"@core::array::Array::<(core::starknet::contract_address::ContractAddress, core::starknet::contract_address::ContractAddress, core::starknet::contract_address::ContractAddress)>"}]},{type:"struct",name:"escrow_manager::state::reputation::Reputation",members:[{name:"amount",type:"core::integer::u256"},{name:"count",type:"core::integer::u128"}]},{type:"interface",name:"escrow_manager::components::reputation::IReputationTracker",items:[{type:"function",name:"get_reputation",inputs:[{name:"data",type:"core::array::Span::<(core::starknet::contract_address::ContractAddress, core::starknet::contract_address::ContractAddress, core::starknet::contract_address::ContractAddress)>"}],outputs:[{type:"core::array::Array::<[escrow_manager::state::reputation::Reputation; 3]>"}],state_mutability:"view"}]},{type:"impl",name:"EscrowStorageImpl",interface_name:"escrow_manager::components::escrow_storage::IEscrowStorage"},{type:"struct",name:"escrow_manager::state::escrow::EscrowState",members:[{name:"init_blockheight",type:"core::integer::u64"},{name:"finish_blockheight",type:"core::integer::u64"},{name:"state",type:"core::integer::u8"}]},{type:"struct",name:"core::array::Span::<escrow_manager::state::escrow::EscrowState>",members:[{name:"snapshot",type:"@core::array::Array::<escrow_manager::state::escrow::EscrowState>"}]},{type:"interface",name:"escrow_manager::components::escrow_storage::IEscrowStorage",items:[{type:"function",name:"get_state",inputs:[{name:"escrow",type:"escrow_manager::structs::escrow::EscrowData"}],outputs:[{type:"escrow_manager::state::escrow::EscrowState"}],state_mutability:"view"},{type:"function",name:"get_hash_state",inputs:[{name:"escrow_hash",type:"core::felt252"}],outputs:[{type:"escrow_manager::state::escrow::EscrowState"}],state_mutability:"view"},{type:"function",name:"get_hash_state_multiple",inputs:[{name:"escrow_hashes",type:"core::array::Span::<core::felt252>"}],outputs:[{type:"core::array::Span::<escrow_manager::state::escrow::EscrowState>"}],state_mutability:"view"}]},{type:"event",name:"escrow_manager::components::lp_vault::lp_vault::Event",kind:"enum",variants:[]},{type:"event",name:"escrow_manager::components::reputation::reputation::Event",kind:"enum",variants:[]},{type:"event",name:"escrow_manager::components::escrow_storage::escrow_storage::Event",kind:"enum",variants:[]},{type:"event",name:"escrow_manager::events::Initialize",kind:"struct",members:[{name:"offerer",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"claimer",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"claim_data",type:"core::felt252",kind:"key"},{name:"escrow_hash",type:"core::felt252",kind:"key"},{name:"claim_handler",type:"core::starknet::contract_address::ContractAddress",kind:"data"},{name:"refund_handler",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"escrow_manager::events::Claim",kind:"struct",members:[{name:"offerer",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"claimer",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"claim_data",type:"core::felt252",kind:"key"},{name:"escrow_hash",type:"core::felt252",kind:"key"},{name:"witness_result",type:"core::array::Span::<core::felt252>",kind:"data"},{name:"claim_handler",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"escrow_manager::events::Refund",kind:"struct",members:[{name:"offerer",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"claimer",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"claim_data",type:"core::felt252",kind:"key"},{name:"escrow_hash",type:"core::felt252",kind:"key"},{name:"witness_result",type:"core::array::Span::<core::felt252>",kind:"data"},{name:"refund_handler",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"escrow_manager::EscrowManager::Event",kind:"enum",variants:[{name:"LPVaultEvent",type:"escrow_manager::components::lp_vault::lp_vault::Event",kind:"nested"},{name:"ReputationTrackerEvent",type:"escrow_manager::components::reputation::reputation::Event",kind:"nested"},{name:"EscrowStorageEvent",type:"escrow_manager::components::escrow_storage::escrow_storage::Event",kind:"nested"},{name:"Initialize",type:"escrow_manager::events::Initialize",kind:"nested"},{name:"Claim",type:"escrow_manager::events::Claim",kind:"nested"},{name:"Refund",type:"escrow_manager::events::Refund",kind:"nested"}]}]},368713,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetContractModule=void 0;let n=e.r(525232);class a extends n.StarknetModule{constructor(e,t){super(e),this.contract=t}}r.StarknetContractModule=a},568784,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetSwapModule=void 0;let n=e.r(368713);class a extends n.StarknetContractModule{constructor(e,t){super(e,t),this.swapContract=t.contract}}r.StarknetSwapModule=a},891628,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetLpVault=void 0;let n=e.r(717065),a=e.r(568784),i=e.r(613820),s=e.r(84642);class o extends a.StarknetSwapModule{Withdraw(e,t,r){return new i.StarknetAction(e,this.root,this.swapContract.populateTransaction.withdraw(t,s.cairo.uint256(r),e),o.GasCosts.WITHDRAW)}Deposit(e,t,r){return new i.StarknetAction(e,this.root,this.swapContract.populateTransaction.deposit(t,s.cairo.uint256(r)),o.GasCosts.WITHDRAW)}async getIntermediaryData(e,t){let[r,n]=await Promise.all([this.getIntermediaryBalance(e,t),this.getIntermediaryReputation(e,t)]);return{balance:r,reputation:n}}async getIntermediaryReputation(e,t){let r=Object.keys(this.contract.claimHandlersByAddress).map(r=>s.cairo.tuple(e,t,r)),a=await this.provider.callContract(this.swapContract.populateTransaction.get_reputation(r));if(Number((0,n.toBigInt)(a.shift()))!==r.length)throw Error("getIntermediaryReputation(): Invalid response length");let i={};return Object.keys(this.contract.claimHandlersByAddress).forEach(e=>{i[this.contract.claimHandlersByAddress[e].getType()]={successVolume:(0,n.toBigInt)({low:a.shift(),high:a.shift()}),successCount:(0,n.toBigInt)(a.shift()),coopCloseVolume:(0,n.toBigInt)({low:a.shift(),high:a.shift()}),coopCloseCount:(0,n.toBigInt)(a.shift()),failVolume:(0,n.toBigInt)({low:a.shift(),high:a.shift()}),failCount:(0,n.toBigInt)(a.shift())}}),i}async getIntermediaryBalance(e,t){let r=(0,n.toBigInt)((await this.swapContract.get_balance([s.cairo.tuple(e,t)]))[0]);return this.logger.debug("getIntermediaryBalance(): token LP balance fetched, token: "+t.toString()+" address: "+e+" amount: "+(null==r?"null":r.toString())),r}async txsWithdraw(e,t,r,n){let a=await this.Withdraw(e,t,r);return n??(n=await this.root.Fees.getFeeRate()),this.logger.debug("txsWithdraw(): withdraw TX created, token: "+t.toString()+" amount: "+r.toString(10)),[await a.tx(n)]}async txsDeposit(e,t,r,n){let a=await this.root.Tokens.Approve(e,this.swapContract.address,t,r);return a.add(this.Deposit(e,t,r)),n??(n=await this.root.Fees.getFeeRate()),this.logger.debug("txsDeposit(): deposit TX created, token: "+t.toString()+" amount: "+r.toString(10)),[await a.tx(n)]}}r.StarknetLpVault=o,o.GasCosts={WITHDRAW:{l1DataGas:500,l2Gas:32e5,l1Gas:0},DEPOSIT:{l1:500,l2Gas:4e6,l1Gas:0}}},304276,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetSwapInit=void 0;let n=e.r(154585),a=e.r(717065),i=e.r(500874),s=e.r(613820),o=e.r(568784),l=e.r(84642),c=e.r(201962),u=[{name:"Swap hash",type:"felt"},{name:"Offerer",type:"ContractAddress"},{name:"Claimer",type:"ContractAddress"},{name:"Token amount",type:"TokenAmount"},{name:"Pay in",type:"bool"},{name:"Pay out",type:"bool"},{name:"Tracking reputation",type:"bool"},{name:"Claim handler",type:"ContractAddress"},{name:"Claim data",type:"felt"},{name:"Refund handler",type:"ContractAddress"},{name:"Refund data",type:"felt"},{name:"Security deposit",type:"TokenAmount"},{name:"Claimer bounty",type:"TokenAmount"},{name:"Claim action hash",type:"felt"},{name:"Deadline",type:"timestamp"}];class d extends o.StarknetSwapModule{Init(e,t,r){return new s.StarknetAction(e.payIn?e.offerer:e.claimer,this.root,this.swapContract.populateTransaction.initialize(e.toEscrowStruct(),r,t,null==e.extraData||""===e.extraData?[]:(0,a.bufferToBytes31Span)(i.Buffer.from(e.extraData,"hex")).map(a.toHex)),e.payIn?d.GasCosts.INIT_PAY_IN:d.GasCosts.INIT)}getAuthPrefix(e){return e.isPayIn()?"claim_initialize":"initialize"}async preFetchForInitSignatureVerification(){return{pendingBlockTime:await this.root.Blocks.getBlockTime("pending")}}async signSwapInitialization(e,t,r){let n=Math.floor(Date.now()/1e3)+r,i=await this.root.Signatures.signTypedMessage(e,u,"Initialize",{"Swap hash":"0x"+t.getEscrowHash(),Offerer:t.offerer,Claimer:t.claimer,"Token amount":{token_address:t.token,amount:l.cairo.uint256(t.amount)},"Pay in":t.isPayIn(),"Pay out":t.isPayOut(),"Tracking reputation":t.reputation,"Refund handler":t.refundHandler,"Claim handler":t.claimHandler,"Claim data":"0x"+t.getClaimHash(),"Refund data":t.refundData.startsWith("0x")?t.refundData:"0x"+t.refundData,"Security deposit":{token_address:t.feeToken,amount:l.cairo.uint256(t.securityDeposit)},"Claimer bounty":{token_address:t.feeToken,amount:l.cairo.uint256(t.claimerBounty)},"Claim action hash":0n,Deadline:(0,a.toHex)(n)});return{prefix:this.getAuthPrefix(t),timeout:n.toString(10),signature:i}}async isSignatureValid(e,t,r,i,s,o){if(!t.isOfferer(e)&&!t.isClaimer(e))throw new n.SignatureVerificationError("TX sender not offerer nor claimer");let c=t.isOfferer(e)?t.claimer:t.offerer;if(!t.isPayIn()&&await this.contract.isExpired(e.toString(),t))throw new n.SignatureVerificationError("Swap will expire too soon!");if(i!==this.getAuthPrefix(t))throw new n.SignatureVerificationError("Invalid prefix");let d=BigInt(Math.floor(Date.now()/1e3)),h=BigInt(r);if(h-d<BigInt(this.contract.authGracePeriod)||await this.isSignatureExpired(r,o))throw new n.SignatureVerificationError("Authorization expired!");if(!await this.root.Signatures.isValidSignature(s,c,u,"Initialize",{"Swap hash":"0x"+t.getEscrowHash(),Offerer:t.offerer,Claimer:t.claimer,"Token amount":{token_address:t.token,amount:l.cairo.uint256(t.amount)},"Pay in":t.isPayIn(),"Pay out":t.isPayOut(),"Tracking reputation":t.reputation,"Refund handler":t.refundHandler,"Claim handler":t.claimHandler,"Claim data":"0x"+t.getClaimHash(),"Refund data":t.refundData.startsWith("0x")?t.refundData:"0x"+t.refundData,"Security deposit":{token_address:t.feeToken,amount:l.cairo.uint256(t.securityDeposit)},"Claimer bounty":{token_address:t.feeToken,amount:l.cairo.uint256(t.claimerBounty)},"Claim action hash":0n,Deadline:(0,a.toHex)(h)}))throw new n.SignatureVerificationError("Invalid signature!");return null}async getSignatureExpiry(e){let t=Date.now(),r=(parseInt(e)-this.contract.authGracePeriod)*1e3;return r<t?0:r}async isSignatureExpired(e,t){return(null==t||null==t.pendingBlockTime)&&(t=await this.preFetchForInitSignatureVerification()),t.pendingBlockTime>parseInt(e)}async txsInit(e,t,r,i,s,o,l){if(!o){let[o,l]=await Promise.all([(0,a.tryWithRetries)(()=>this.isSignatureValid(e,t,r,i,s),this.retryPolicy,e=>e instanceof n.SignatureVerificationError),(0,a.tryWithRetries)(()=>this.contract.getCommitStatus(e,t),this.retryPolicy)]);if(l.type!==n.SwapCommitStateType.NOT_COMMITED)throw new n.SwapDataVerificationError("Invoice already being paid for or paid")}l??(l=await this.root.Fees.getFeeRate());let c=this.Init(t,BigInt(r),JSON.parse(s));return t.payIn&&t.isOfferer(e)&&c.addAction(this.root.Tokens.Approve(e,this.swapContract.address,t.token,t.amount),0),0n!==t.getTotalDeposit()&&c.addAction(this.root.Tokens.Approve(e,this.swapContract.address,t.feeToken,t.getTotalDeposit()),0),this.logger.debug("txsInitPayIn(): create swap init TX, swap: "+t.getClaimHash()+" feerate: "+l),[await c.tx(l)]}async getInitFee(e,t){return t??(t=await this.root.Fees.getFeeRate()),c.StarknetFees.getGasFee(e.payIn?d.GasCosts.INIT_PAY_IN:d.GasCosts.INIT,t)}}r.StarknetSwapInit=d,d.GasCosts={INIT:{l1DataGas:750,l2Gas:8e6,l1Gas:0},INIT_PAY_IN:{l1DataGas:500,l2Gas:48e5,l1Gas:0}}},831396,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetSwapRefund=void 0;let n=e.r(154585),a=e.r(717065),i=e.r(568784),s=e.r(613820),o=e.r(201962),l=[{name:"Swap hash",type:"felt"},{name:"Timeout",type:"timestamp"}];class c extends i.StarknetSwapModule{Refund(e,t,r,n){return new s.StarknetAction(e,this.root,this.swapContract.populateTransaction.refund(t.toEscrowStruct(),r),(0,o.starknetGasAdd)(t.payIn?c.GasCosts.REFUND_PAY_OUT:c.GasCosts.REFUND,n))}RefundWithSignature(e,t,r,n){return new s.StarknetAction(e,this.root,this.swapContract.populateTransaction.cooperative_refund(t.toEscrowStruct(),n,BigInt(r)),t.payIn?c.GasCosts.REFUND_PAY_OUT:c.GasCosts.REFUND)}async signSwapRefund(e,t,r){let n=Math.floor(Date.now()/1e3)+r,i=await this.root.Signatures.signTypedMessage(e,l,"Refund",{"Swap hash":"0x"+t.getEscrowHash(),Timeout:(0,a.toHex)(n)});return{prefix:"refund",timeout:n.toString(10),signature:i}}async isSignatureValid(e,t,r,i){if("refund"!==r)throw new n.SignatureVerificationError("Invalid prefix");let s=BigInt(t);if(s-BigInt(Math.floor(Date.now()/1e3))<BigInt(this.contract.authGracePeriod))throw new n.SignatureVerificationError("Authorization expired!");if(!await this.root.Signatures.isValidSignature(i,e.claimer,l,"Refund",{"Swap hash":"0x"+e.getEscrowHash(),Timeout:(0,a.toHex)(s)}))throw new n.SignatureVerificationError("Invalid signature!");return null}async txsRefund(e,t,r,i,s){let o=this.contract.refundHandlersByAddress[t.refundHandler.toLowerCase()];if(null==o)throw Error("Invalid refund handler");if(r&&!await (0,a.tryWithRetries)(()=>this.contract.isRequestRefundable(t.offerer.toString(),t),this.retryPolicy))throw new n.SwapDataVerificationError("Not refundable yet!");i??(i=await this.root.Fees.getFeeRate());let{initialTxns:l,witness:c}=await o.getWitness(e,t,s,i),u=this.Refund(e,t,c,o.getGas(t));return await u.addToTxs(l,i),this.logger.debug("txsRefund(): creating refund transaction, swap: "+t.getClaimHash()),l}async txsRefundWithAuthorization(e,t,r,i,s,o,l){if(o&&!await (0,a.tryWithRetries)(()=>this.contract.isCommited(t),this.retryPolicy))throw new n.SwapDataVerificationError("Not correctly committed");await (0,a.tryWithRetries)(()=>this.isSignatureValid(t,r,i,s),this.retryPolicy,e=>e instanceof n.SignatureVerificationError);let c=this.RefundWithSignature(e,t,r,JSON.parse(s));return l??(l=await this.root.Fees.getFeeRate()),this.logger.debug("txsRefundWithAuthorization(): creating refund transaction, swap: "+t.getClaimHash()+" auth expiry: "+r+" signature: "+s),[await c.tx(l)]}async getRefundFee(e,t){return t??(t=await this.root.Fees.getFeeRate()),o.StarknetFees.getGasFee(e.payIn?c.GasCosts.REFUND_PAY_OUT:c.GasCosts.REFUND,t)}}r.StarknetSwapRefund=c,c.GasCosts={REFUND:{l1DataGas:750,l2Gas:4e6,l1Gas:0},REFUND_PAY_OUT:{l1DataGas:900,l2Gas:6e6,l1Gas:0}}},455672,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.HashlockClaimHandler=void 0;let n=e.r(717065),a=e.r(84642),i=e.r(154585),s=e.r(500874),o=e.r(1083);class l{constructor(e){this.address=e}getCommitment(e){if(32!==e.length)throw Error("Invalid swap hash");return a.hash.computePoseidonHashOnElements((0,n.bufferToU32Array)(e))}getWitness(e,t,r){if(!t.isClaimHandler(this.address))throw Error("Invalid claim handler");if(64!==r.length)throw Error("Invalid hash secret: string length");let a=s.Buffer.from(r,"hex");if(32!==a.length)throw Error("Invalid hash secret: buff length");let i=s.Buffer.from((0,o.sha256)(a));if(!t.isClaimData((0,n.toHex)(this.getCommitment(i))))throw Error("Invalid hash secret: poseidon hash doesn't match");return Promise.resolve({initialTxns:[],witness:(0,n.bufferToU32Array)(a)})}getGas(){return l.gas}getType(){return l.type}parseWitnessResult(e){return(0,n.u32ArrayToBuffer)(e).toString("hex")}}r.HashlockClaimHandler=l,l.type=i.ChainSwapType.HTLC,l.gas={l1DataGas:0,l2Gas:16e6,l1Gas:0}},496279,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.IBitcoinClaimHandler=void 0;let n=e.r(154585),a=e.r(84642),i=e.r(993048),s=e.r(717065),o=(0,s.getLogger)("IBitcoinClaimHandler: ");class l{constructor(e){this.address=e}serializeCommitment(e){return[e.confirmations,e.btcRelay.contract.address]}getCommitment(e){return a.hash.computePoseidonHashOnElements(this.serializeCommitment(e))}async _getWitness(e,t,{tx:r,btcRelay:n,commitedHeader:l,synchronizer:c,requiredConfirmations:u},d,h){let f=this.serializeCommitment({...d,btcRelay:n,confirmations:u}),p=a.hash.computePoseidonHashOnElements(f);if(!t.isClaimData(p))throw Error("Invalid commit data");let g=await n.bitcoinRpc.getMerkleProof(r.txid,r.blockhash);o.debug("getWitness(): merkle proof computed: ",g);let m=[];if(null==l){let t=await i.StarknetBtcRelay.getCommitedHeadersAndSynchronize(e,n,[{blockheight:r.height,requiredConfirmations:u,blockhash:r.blockhash}],m,c,h);if(null==t)throw Error("Cannot fetch committed header!");l=t[r.blockhash]}return f.push(...l.serialize()),f.push(g.merkle.length,...g.merkle.map(s.bufferToU32Array).flat()),f.push(g.pos),{initialTxns:m,witness:f}}parseWitnessResult(e){return(0,s.u32ArrayToBuffer)(e).toString("hex")}}r.IBitcoinClaimHandler=l,l.address="",l.type=n.ChainSwapType.CHAIN_TXID,l.gas={l1DataGas:0,l2Gas:4e8,l1Gas:0}},221340,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BitcoinTxIdClaimHandler=void 0;let n=e.r(154585),a=e.r(717065),i=e.r(496279),s=e.r(500874);(0,a.getLogger)("BitcoinTxIdClaimHandler: ");class o extends i.IBitcoinClaimHandler{serializeCommitment(e){return[...(0,a.bufferToU32Array)(s.Buffer.from(e.txId,"hex").reverse()),...super.serializeCommitment(e)]}getWitness(e,t,r,n){if(!t.isClaimHandler(this.address))throw Error("Invalid claim handler");return this._getWitness(e,t,r,{txId:r.tx.txid})}getGas(e){return o.gas}getType(){return o.type}}r.BitcoinTxIdClaimHandler=o,o.type=n.ChainSwapType.CHAIN_TXID,o.gas={l1DataGas:0,l2Gas:4e8,l1Gas:0}},476575,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BitcoinOutputClaimHandler=void 0;let n=e.r(154585),a=e.r(84642),i=e.r(717065),s=e.r(496279),o=e.r(839596),l=e.r(500874);(0,i.getLogger)("BitcoinOutputClaimHandler: ");class c extends s.IBitcoinClaimHandler{serializeCommitment(e){return[a.hash.computePoseidonHashOnElements([(0,i.toBigInt)(e.amount),(0,i.poseidonHashRange)(e.output)]),...super.serializeCommitment(e)]}async getWitness(e,t,r,n){if(!t.isClaimHandler(this.address))throw Error("Invalid claim handler");let a=o.Transaction.fromRaw(l.Buffer.from(r.tx.hex,"hex")).getOutput(r.vout),{initialTxns:s,witness:c}=await this._getWitness(e,t,r,{output:l.Buffer.from(a.script),amount:a.amount});return c.push(...(0,i.bufferToByteArray)(l.Buffer.from(r.tx.hex,"hex"))),c.push(BigInt(r.vout)),{initialTxns:s,witness:c}}getGas(e){return c.gas}getType(){return c.type}}r.BitcoinOutputClaimHandler=c,c.type=n.ChainSwapType.CHAIN,c.gas={l1DataGas:0,l2Gas:4e8,l1Gas:0}},428020,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.BitcoinNoncedOutputClaimHandler=void 0;let n=e.r(154585),a=e.r(84642),i=e.r(717065),s=e.r(496279),o=e.r(839596),l=e.r(500874);(0,i.getLogger)("BitcoinNoncedOutputClaimHandler: ");class c extends s.IBitcoinClaimHandler{serializeCommitment(e){return[a.hash.computePoseidonHashOnElements([(0,i.toBigInt)(e.nonce),(0,i.toBigInt)(e.amount),(0,i.poseidonHashRange)(e.output)]),...super.serializeCommitment(e)]}async getWitness(e,t,r,n){if(!t.isClaimHandler(this.address))throw Error("Invalid claim handler");let a=o.Transaction.fromRaw(l.Buffer.from(r.tx.hex,"hex")),s=a.getOutput(r.vout),{initialTxns:c,witness:u}=await this._getWitness(e,t,r,{output:l.Buffer.from(s.script),amount:s.amount,nonce:function(e){let t=BigInt(e.lockTime-5e8);if(t<0n)throw Error("Locktime too low!");return t<<24n|16777215n&BigInt(e.getInput(0).sequence)}(a)});return u.push(...(0,i.bufferToByteArray)(l.Buffer.from(r.tx.hex,"hex"))),u.push(BigInt(r.vout)),{initialTxns:c,witness:u}}getGas(e){return c.gas}getType(){return c.type}}r.BitcoinNoncedOutputClaimHandler=c,c.type=n.ChainSwapType.CHAIN_NONCED,c.gas={l1DataGas:0,l2Gas:4e8,l1Gas:0}},722560,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.claimHandlersList=void 0;let n=e.r(455672),a=e.r(221340),i=e.r(476575),s=e.r(428020);r.claimHandlersList=[n.HashlockClaimHandler,a.BitcoinTxIdClaimHandler,i.BitcoinOutputClaimHandler,s.BitcoinNoncedOutputClaimHandler]},715157,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetSwapClaim=void 0;let n=e.r(154585),a=e.r(717065),i=e.r(568784),s=e.r(613820),o=e.r(201962);class l extends i.StarknetSwapModule{Claim(e,t,r,n){return new s.StarknetAction(e,this.root,this.swapContract.populateTransaction.claim(t.toEscrowStruct(),r),(0,o.starknetGasAdd)(t.payOut?l.GasCosts.CLAIM_PAY_OUT:l.GasCosts.CLAIM,n))}async txsClaimWithSecret(e,t,r,i,s){if(i&&await this.contract.isExpired(t.claimer.toString(),t))throw new n.SwapDataVerificationError("Not enough time to reliably pay the invoice");let o=this.contract.claimHandlersByAddress[(0,a.toHex)(t.claimHandler)];if(null==o)throw new n.SwapDataVerificationError("Unknown claim handler!");if(o.getType()!==n.ChainSwapType.HTLC)throw new n.SwapDataVerificationError("Invalid claim handler!");s??(s=await this.root.Fees.getFeeRate());let{initialTxns:l,witness:c}=await o.getWitness(e,t,r,s),u=this.Claim(e,t,c,o.getGas(t));return await u.addToTxs(l,s),this.logger.debug("txsClaimWithSecret(): creating claim transaction, swap: "+t.getClaimHash()+" witness: ",c.map(a.toHex)),l}async txsClaimWithTxData(e,t,r,i,s,o,l,c){let u=this.contract.claimHandlersByAddress[(0,a.toHex)(t.claimHandler)];if(null==u)throw new n.SwapDataVerificationError("Unknown claim handler!");if(u.getType()!==n.ChainSwapType.CHAIN_NONCED&&u.getType()!==n.ChainSwapType.CHAIN_TXID&&u.getType()!==n.ChainSwapType.CHAIN)throw new n.SwapDataVerificationError("Invalid claim handler!");c??(c=await this.root.Fees.getFeeRate());let{initialTxns:d,witness:h}=await u.getWitness(e,t,{tx:r,vout:s,requiredConfirmations:i,commitedHeader:o,btcRelay:this.contract.btcRelay,synchronizer:l},c),f=this.Claim(e,t,h,u.getGas(t));return await f.addToTxs(d,c),d}async getClaimFee(e,t){t??(t=await this.root.Fees.getFeeRate());let r=e.payOut?l.GasCosts.CLAIM_PAY_OUT:l.GasCosts.CLAIM,n=this.contract.claimHandlersByAddress[(0,a.toHex)(e.claimHandler)];return null!=n&&(r=(0,o.starknetGasAdd)(r,n.getGas(e))),o.StarknetFees.getGasFee(r,t)}}r.StarknetSwapClaim=l,l.GasCosts={CLAIM:{l1DataGas:750,l2Gas:4e6,l1Gas:0},CLAIM_PAY_OUT:{l1DataGas:900,l2Gas:6e6,l1Gas:0}}},885745,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetSwapContract=void 0;let n=e.r(154585),a=e.r(500874),i=e.r(942790),s=e.r(406524),o=e.r(84642),l=e.r(987902),c=e.r(717065),u=e.r(800524),d=e.r(891628),h=e.r(304276),f=e.r(831396),p=e.r(722560),g=e.r(715157),m=e.r(1083),y={[o.constants.StarknetChainId.SN_SEPOLIA]:"0x017bf50dd28b6d823a231355bb25813d4396c8e19d2df03026038714a22f0413",[o.constants.StarknetChainId.SN_MAIN]:"0x04f278e1f19e495c3b1dd35ef307c4f7510768ed95481958fbae588bd173f79a"},b={[o.constants.StarknetChainId.SN_SEPOLIA]:{[n.ChainSwapType.HTLC]:"0x04a57ea54d4637c352aad1bbee046868926a11702216a0aaf7eeec1568be2d7b",[n.ChainSwapType.CHAIN_TXID]:"0x04c7cde88359e14b6f6f779f8b9d8310cee37e91a6f143f855ae29fab33c396e",[n.ChainSwapType.CHAIN]:"0x051bef6f5fd12e2832a7d38653bdfc8eb84ba7eb7a4aada5b87ef38a9999cf17",[n.ChainSwapType.CHAIN_NONCED]:"0x050e50eacd16da414f2c3a7c3570fd5e248974c6fe757d41acbf72d2836fa0a1"},[o.constants.StarknetChainId.SN_MAIN]:{[n.ChainSwapType.HTLC]:"0x07b74b50a883ebee262b6db0e3c0c697670c6f30e3d610e75faf33a89c46aa2a",[n.ChainSwapType.CHAIN_TXID]:"0x016c2db2b03f39cf4fd7f871035000f66b62307d9983056e33a38315da8a44dc",[n.ChainSwapType.CHAIN]:"0x02c45a81c4a48d0645a0a199e620061e8a55dcc9c2b5946d050eaeeddba64e9a",[n.ChainSwapType.CHAIN_NONCED]:"0x0019b5480dd7ed8ded10a09437b0a7a30b8997b4ef139deb24ff8c86f995d84f"}},_={[o.constants.StarknetChainId.SN_SEPOLIA]:{timelock:"0x034b8f28b3ca979036cb2849cfa3af7f67207459224b6ca5ce2474aa398ec3e7"},[o.constants.StarknetChainId.SN_MAIN]:{timelock:"0x06a59659990c2aefbf7239f6d911617b3ae60b79cb3364f3bd242a6ca8f4f4f7"}};class w extends s.StarknetContractBase{constructor(e,t,r=y[e.starknetChainId],n){super(e,r,i.EscrowManagerAbi),this.chainId="STARKNET",this.claimWithSecretTimeout=180,this.claimWithTxDataTimeout=180,this.refundTimeout=180,this.claimGracePeriod=600,this.refundGracePeriod=600,this.authGracePeriod=30,this.claimHandlersByAddress={},this.claimHandlersBySwapType={},this.refundHandlersByAddress={},this.Init=new h.StarknetSwapInit(e,this),this.Refund=new f.StarknetSwapRefund(e,this),this.Claim=new g.StarknetSwapClaim(e,this),this.LpVault=new d.StarknetLpVault(e,this),this.btcRelay=t,n??(n={}),n.refund??(n.refund={}),n.refund={..._[e.starknetChainId],...n.refund},n.claim??(n.claim={}),n.claim={...b[e.starknetChainId],...n.claim},p.claimHandlersList.forEach(e=>{let t=new e(n.claim[e.type]);this.claimHandlersByAddress[(0,c.toHex)(t.address)]=t,this.claimHandlersBySwapType[e.type]=t}),this.timelockRefundHandler=new u.TimelockRefundHandler(n.refund.timelock),this.refundHandlersByAddress[this.timelockRefundHandler.address]=this.timelockRefundHandler}async start(){}preFetchForInitSignatureVerification(){return this.Init.preFetchForInitSignatureVerification()}getInitSignature(e,t,r,n,a){return this.Init.signSwapInitialization(e,t,r)}isValidInitAuthorization(e,t,{timeout:r,prefix:n,signature:a},i,s){return this.Init.isSignatureValid(e,t,r,n,a,s)}getInitAuthorizationExpiry(e,{timeout:t,prefix:r,signature:n},a){return this.Init.getSignatureExpiry(t)}isInitAuthorizationExpired(e,{timeout:t,prefix:r,signature:n}){return this.Init.isSignatureExpired(t)}getRefundSignature(e,t,r){return this.Refund.signSwapRefund(e,t,r)}isValidRefundAuthorization(e,{timeout:t,prefix:r,signature:n}){return this.Refund.isSignatureValid(e,t,r,n)}getDataSignature(e,t){return this.Chain.Signatures.getDataSignature(e,t)}isValidDataSignature(e,t,r){return this.Chain.Signatures.isValidDataSignature(e,t,r)}async isClaimable(e,t){return!(!t.isClaimer(e)||await this.isExpired(e,t))&&await this.isCommited(t)}async isCommited(e){return 1===Number((await this.contract.get_hash_state("0x"+e.getEscrowHash())).state)}isExpired(e,t){let r=BigInt(Math.floor(Date.now()/1e3));return t.isClaimer(e)&&(r+=BigInt(this.claimGracePeriod)),t.isOfferer(e)&&(r-=BigInt(this.refundGracePeriod)),Promise.resolve(t.getExpiry()<r)}async isRequestRefundable(e,t){return!!t.isOfferer(e)&&!!await this.isExpired(e,t)&&await this.isCommited(t)}getHashForTxId(e,t){return(0,c.bigNumberishToBuffer)(this.claimHandlersBySwapType[n.ChainSwapType.CHAIN_TXID].getCommitment({txId:e,confirmations:t,btcRelay:this.btcRelay}),32)}getHashForOnchain(e,t,r,a){let i;return i=null==a||0n===a?this.claimHandlersBySwapType[n.ChainSwapType.CHAIN].getCommitment({output:e,amount:t,confirmations:r,btcRelay:this.btcRelay}):this.claimHandlersBySwapType[n.ChainSwapType.CHAIN_NONCED].getCommitment({output:e,amount:t,nonce:a,confirmations:r,btcRelay:this.btcRelay}),(0,c.bigNumberishToBuffer)(i,32)}getHashForHtlc(e){return(0,c.bigNumberishToBuffer)(this.claimHandlersBySwapType[n.ChainSwapType.HTLC].getCommitment(e),32)}getExtraData(e,t,r,i){null==i&&(i=0n);let s=a.Buffer.from((0,m.sha256)(a.Buffer.concat([n.BigIntBufferUtils.toBuffer(t,"le",8),e])));return a.Buffer.concat([s,n.BigIntBufferUtils.toBuffer(i,"be",8),n.BigIntBufferUtils.toBuffer(BigInt(r),"be",2)])}async getCommitStatus(e,t){let r=t.getEscrowHash(),a=await this.contract.get_hash_state("0x"+r),i=Number(a.state),s=Number(a.finish_blockheight);switch(i){case 1:if(t.isOfferer(e)&&await this.isExpired(e,t))return{type:n.SwapCommitStateType.REFUNDABLE};return{type:n.SwapCommitStateType.COMMITED};case 2:return{type:n.SwapCommitStateType.PAID,getTxBlock:async()=>({blockTime:await this.Chain.Blocks.getBlockTime(s),blockHeight:s}),getClaimTxId:async()=>{let e=await this.Events.getContractBlockEvents(["escrow_manager::events::Claim"],[null,null,null,"0x"+r],s,s);return 0===e.length?null:e[0].txHash},getClaimResult:async()=>{let e=await this.Events.getContractBlockEvents(["escrow_manager::events::Claim"],[null,null,null,"0x"+r],s,s);if(0===e.length)return null;let t=e[0],n=(0,c.toHex)(t.params.claim_handler),a=this.claimHandlersByAddress[n];return null==a?(o.logger.warn("getCommitStatus(): getClaimResult("+r+"): Unknown claim handler with claim: "+n),null):a.parseWitnessResult(t.params.witness_result)}};default:return{type:await this.isExpired(e,t)?n.SwapCommitStateType.EXPIRED:n.SwapCommitStateType.NOT_COMMITED,getTxBlock:async()=>({blockTime:await this.Chain.Blocks.getBlockTime(s),blockHeight:s}),getClaimTxId:async()=>{let e=await this.Events.getContractBlockEvents(["escrow_manager::events::Refund"],[null,null,null,"0x"+r],s,s);return 0===e.length?null:e[0].txHash}}}}async getCommitedData(e){return null}createSwapData(e,t,r,n,a,i,s,o,u,d,h,f,p=this.Chain.Tokens.getNativeCurrencyAddress()){return Promise.resolve(new l.StarknetSwapData(t,r,n,this.timelockRefundHandler.address,this.claimHandlersBySwapType?.[e]?.address,d,u,u,s,"0x"+i,(0,c.toHex)(o),a,p,h,f,e,null))}async getBalance(e,t,r){return r?await this.getIntermediaryBalance(e,t):await this.Chain.getBalance(e,t)}getIntermediaryData(e,t){return this.LpVault.getIntermediaryData(e,t)}getIntermediaryReputation(e,t){return this.LpVault.getIntermediaryReputation(e,t)}getIntermediaryBalance(e,t){return this.LpVault.getIntermediaryBalance(e,t)}async txsClaimWithSecret(e,t,r,n,a,i,s){return this.Claim.txsClaimWithSecret("string"==typeof e?e:e.getAddress(),t,r,n,i)}async txsClaimWithTxData(e,t,r,n,a,i,s,o,l){return this.Claim.txsClaimWithTxData("string"==typeof e?e:e.getAddress(),t,r,n,a,i,s,l)}txsRefund(e,t,r,n,a){return this.Refund.txsRefund(e,t,r,a)}txsRefundWithAuthorization(e,t,{timeout:r,prefix:n,signature:a},i,s,o){return this.Refund.txsRefundWithAuthorization(e,t,r,n,a,i,o)}txsInit(e,t,{timeout:r,prefix:n,signature:a},i,s){return this.Init.txsInit(e,t,r,n,a,i,s)}txsWithdraw(e,t,r,n){return this.LpVault.txsWithdraw(e,t,r,n)}txsDeposit(e,t,r,n){return this.LpVault.txsDeposit(e,t,r,n)}async claimWithSecret(e,t,r,n,a,i){let s=await this.Claim.txsClaimWithSecret(e.getAddress(),t,r,n,i?.feeRate),[o]=await this.Chain.sendAndConfirm(e,s,i?.waitForConfirmation,i?.abortSignal);return o}async claimWithTxData(e,t,r,n,a,i,s,o,l){let c=await this.Claim.txsClaimWithTxData(e.getAddress(),t,r,n,a,i,s,l?.feeRate);if(null===c)throw Error("Btc relay not synchronized to required blockheight!");let[u]=await this.Chain.sendAndConfirm(e,c,l?.waitForConfirmation,l?.abortSignal);return u}async refund(e,t,r,n,a){let i=await this.txsRefund(e.getAddress(),t,r,n,a?.feeRate),[s]=await this.Chain.sendAndConfirm(e,i,a?.waitForConfirmation,a?.abortSignal);return s}async refundWithAuthorization(e,t,r,n,a,i){let s=await this.txsRefundWithAuthorization(e.getAddress(),t,r,n,a,i?.feeRate),[o]=await this.Chain.sendAndConfirm(e,s,i?.waitForConfirmation,i?.abortSignal);return o}async init(e,t,r,n,a){if(t.isPayIn()){if(!t.isOfferer(e.getAddress()))throw Error("Invalid signer provided!")}else if(!t.isClaimer(e.getAddress()))throw Error("Invalid signer provided!");let i=await this.txsInit(e.getAddress(),t,r,n,a?.feeRate),[s]=await this.Chain.sendAndConfirm(e,i,a?.waitForConfirmation,a?.abortSignal);return s}async withdraw(e,t,r,n){let a=await this.LpVault.txsWithdraw(e.getAddress(),t,r,n?.feeRate),[i]=await this.Chain.sendAndConfirm(e,a,n?.waitForConfirmation,n?.abortSignal,!1);return i}async deposit(e,t,r,n){let a=await this.LpVault.txsDeposit(e.getAddress(),t,r,n?.feeRate),[i]=await this.Chain.sendAndConfirm(e,a,n?.waitForConfirmation,n?.abortSignal,!1);return i}getInitPayInFeeRate(e,t,r,n){return this.Chain.Fees.getFeeRate()}getInitFeeRate(e,t,r,n){return this.Chain.Fees.getFeeRate()}getRefundFeeRate(e){return this.Chain.Fees.getFeeRate()}getClaimFeeRate(e,t){return this.Chain.Fees.getFeeRate()}getClaimFee(e,t,r){return this.Claim.getClaimFee(t,r)}getCommitFee(e,t){return this.Init.getInitFee(e,t)}getRefundFee(e,t){return this.Refund.getRefundFee(e,t)}}r.StarknetSwapContract=w},601224,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},706276,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetChainEventsBrowser=void 0;let n=e.r(154585),a=e.r(717065),i=e.r(84642);r.StarknetChainEventsBrowser=class{constructor(e,t,r,n=5){this.listeners=[],this.logger=(0,a.getLogger)("StarknetChainEventsBrowser: "),this.initFunctionName="initialize",this.initEntryPointSelector=BigInt(i.hash.starknetKeccak(this.initFunctionName)),this.provider=e.provider,this.starknetSwapContract=t,this.starknetSpvVaultContract=r,this.pollIntervalSeconds=n}findInitSwapData(e,t,r){if(BigInt(e.contract_address)===BigInt(this.starknetSwapContract.contract.address)&&BigInt(e.entry_point_selector)===this.initEntryPointSelector){let{escrow:n,extraData:i}=(0,a.parseInitFunctionCalldata)(e.calldata,r);if("0x"+n.getEscrowHash()===(0,a.toHex)(t))return 0!==i.length&&n.setExtraData((0,a.bytes31SpanToBuffer)(i,42).toString("hex")),n}for(let n of e.calls){let e=this.findInitSwapData(n,t,r);if(null!=e)return e}return null}getSwapDataGetter(e,t){return async()=>{let r;try{r=await this.provider.getTransactionTrace(e.txHash)}catch(n){this.logger.warn("getSwapDataGetter(): getter: starknet_traceTransaction not supported by the RPC: ",n);let t=(await this.provider.getBlockTransactionsTraces(e.blockHash)).find(t=>(0,a.toHex)(t.transaction_hash)===(0,a.toHex)(e.txHash));if(null==t)throw Error(`Cannot find ${e.txHash} in the block traces, block: ${e.blockHash}`);r=t.trace_root}return null==r||null!=r.execute_invocation.revert_reason?null:this.findInitSwapData(r.execute_invocation,e.params.escrow_hash,t)}}parseInitializeEvent(e){let t=(0,a.bigNumberishToBuffer)(e.params.escrow_hash,32).toString("hex"),r=(0,a.toHex)(e.params.claim_handler),i=this.starknetSwapContract.claimHandlersByAddress[r];if(null==i)return this.logger.warn("parseInitializeEvent("+t+"): Unknown claim handler with claim: "+r),null;let s=i.getType();return this.logger.debug("InitializeEvent claimHash: "+(0,a.toHex)(e.params.claim_data)+" escrowHash: "+t),new n.InitializeEvent(t,s,(0,a.onceAsync)(this.getSwapDataGetter(e,i)))}parseRefundEvent(e){let t=(0,a.bigNumberishToBuffer)(e.params.escrow_hash,32).toString("hex");return this.logger.debug("RefundEvent claimHash: "+(0,a.toHex)(e.params.claim_data)+" escrowHash: "+t),new n.RefundEvent(t)}parseClaimEvent(e){let t=(0,a.bigNumberishToBuffer)(e.params.escrow_hash,32).toString("hex"),r=(0,a.toHex)(e.params.claim_handler),i=this.starknetSwapContract.claimHandlersByAddress[r];if(null==i)return this.logger.warn("parseClaimEvent("+t+"): Unknown claim handler with claim: "+r),null;let s=i.parseWitnessResult(e.params.witness_result);return this.logger.debug("ClaimEvent claimHash: "+(0,a.toHex)(e.params.claim_data)+" witnessResult: "+s+" escrowHash: "+t),new n.ClaimEvent(t,s)}parseSpvOpenEvent(e){let t=(0,a.toHex)(e.params.owner),r=(0,a.toBigInt)(e.params.vault_id),i=(0,a.bigNumberishToBuffer)(e.params.btc_tx_hash,32).reverse().toString("hex"),s=Number((0,a.toBigInt)(e.params.vout));return this.logger.debug("SpvOpenEvent owner: "+t+" vaultId: "+r+" utxo: "+i+":"+s),new n.SpvVaultOpenEvent(t,r,i,s)}parseSpvDepositEvent(e){let t=(0,a.toHex)(e.params.owner),r=(0,a.toBigInt)(e.params.vault_id),i=[(0,a.toBigInt)(e.params.amounts["0"]),(0,a.toBigInt)(e.params.amounts["1"])],s=Number((0,a.toBigInt)(e.params.deposit_count));return this.logger.debug("SpvDepositEvent owner: "+t+" vaultId: "+r+" depositCount: "+s+" amounts: ",i),new n.SpvVaultDepositEvent(t,r,i,s)}parseSpvFrontEvent(e){let t=(0,a.toHex)(e.params.owner),r=(0,a.toBigInt)(e.params.vault_id),i=(0,a.bigNumberishToBuffer)(e.params.btc_tx_hash,32).reverse().toString("hex"),s=(0,a.toHex)(e.params.recipient),o=(0,a.toHex)(e.params.execution_hash),l=[(0,a.toBigInt)(e.params.amounts["0"]),(0,a.toBigInt)(e.params.amounts["1"])],c=(0,a.toHex)(e.params.caller);return this.logger.debug("SpvFrontEvent owner: "+t+" vaultId: "+r+" btcTxId: "+i+" recipient: "+s+" frontedBy: "+c+" amounts: ",l),new n.SpvVaultFrontEvent(t,r,i,s,o,l,c)}parseSpvClaimEvent(e){let t=(0,a.toHex)(e.params.owner),r=(0,a.toBigInt)(e.params.vault_id),i=(0,a.bigNumberishToBuffer)(e.params.btc_tx_hash,32).reverse().toString("hex"),s=(0,a.toHex)(e.params.recipient),o=(0,a.toHex)(e.params.execution_hash),l=[(0,a.toBigInt)(e.params.amounts["0"]),(0,a.toBigInt)(e.params.amounts["1"])],c=(0,a.toHex)(e.params.caller),u=(0,a.toHex)(e.params.fronting_address),d=Number((0,a.toBigInt)(e.params.withdraw_count));return this.logger.debug("SpvClaimEvent owner: "+t+" vaultId: "+r+" btcTxId: "+i+" withdrawCount: "+d+" recipient: "+s+" frontedBy: "+u+" claimedBy: "+c+" amounts: ",l),new n.SpvVaultClaimEvent(t,r,i,s,o,l,c,u,d)}parseSpvCloseEvent(e){let t=(0,a.toHex)(e.params.owner),r=(0,a.toBigInt)(e.params.vault_id),i=(0,a.bigNumberishToBuffer)(e.params.btc_tx_hash,32).reverse().toString("hex"),s=(0,a.bigNumberishToBuffer)(e.params.error).toString();return new n.SpvVaultCloseEvent(t,r,i,s)}async processEvents(e,t,r,n){let a={},i=async e=>{if(e===t)return r;let n=e.toString();return a[n]??(a[n]=(await this.provider.getBlockWithTxHashes(e)).timestamp),a[n]},s=[];for(let t of e){let e;switch(t.name){case"escrow_manager::events::Claim":e=this.parseClaimEvent(t);break;case"escrow_manager::events::Refund":e=this.parseRefundEvent(t);break;case"escrow_manager::events::Initialize":e=this.parseInitializeEvent(t);break;case"spv_swap_vault::events::Opened":e=this.parseSpvOpenEvent(t);break;case"spv_swap_vault::events::Deposited":e=this.parseSpvDepositEvent(t);break;case"spv_swap_vault::events::Fronted":e=this.parseSpvFrontEvent(t);break;case"spv_swap_vault::events::Claimed":e=this.parseSpvClaimEvent(t);break;case"spv_swap_vault::events::Closed":e=this.parseSpvCloseEvent(t)}if(null==e)continue;let r=null==t.blockNumber?n:await i(t.blockNumber);e.meta={blockTime:r,txId:t.txHash,timestamp:r},s.push(e)}for(let e of this.listeners)await e(s)}async checkEventsEcrowManager(e,t,r){let n=r.block_number;t??(t=n);let i=await this.starknetSwapContract.Events.getContractBlockEvents(["escrow_manager::events::Initialize","escrow_manager::events::Claim","escrow_manager::events::Refund"],[],t,null);if(null!=e){let t=(0,a.findLastIndex)(i,t=>t.txHash===e);-1!==t&&i.splice(0,t+1)}return i.length>0&&(await this.processEvents(i,r?.block_number,r?.timestamp,Math.floor(Date.now()/1e3)),e=i[i.length-1].txHash),e}async checkEventsSpvVaults(e,t,r){let n=r.block_number;t??(t=n);let i=await this.starknetSpvVaultContract.Events.getContractBlockEvents(["spv_swap_vault::events::Opened","spv_swap_vault::events::Deposited","spv_swap_vault::events::Closed","spv_swap_vault::events::Fronted","spv_swap_vault::events::Claimed"],[],t,null);if(null!=e){let t=(0,a.findLastIndex)(i,t=>t.txHash===e);-1!==t&&i.splice(0,t+1)}return i.length>0&&(await this.processEvents(i,r?.block_number,r?.timestamp,Math.floor(Date.now()/1e3)),e=i[i.length-1].txHash),e}async checkEvents(e,t){t??(t=[]);let r=await this.provider.getBlockWithTxHashes("latest"),n=r.block_number;return t[0]=await this.checkEventsEcrowManager(t[0],e,r),t[1]=await this.checkEventsSpvVaults(t[1],e,r),{txHashes:t,blockNumber:n}}async setupPoll(e,t,r){let n;this.stopped=!1,n=async()=>{await this.checkEvents(e,t).then(({blockNumber:n,txHashes:a})=>{if(e=n,t=a,null!=r)return r(n,t)}).catch(e=>{this.logger.error("setupPoll(): Failed to fetch starknet log: ",e)}),this.stopped||(this.timeout=setTimeout(n,1e3*this.pollIntervalSeconds))},await n()}init(){return this.setupPoll(),Promise.resolve()}async stop(){this.stopped=!0,null!=this.timeout&&clearTimeout(this.timeout)}registerListener(e){this.listeners.push(e)}unregisterListener(e){let t=this.listeners.indexOf(e);return t>=0&&(this.listeners.splice(t,1),!0)}}},168871,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0})},57417,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.SpvVaultContractAbi=void 0,r.SpvVaultContractAbi=[{type:"impl",name:"SpvVaultManagerImpl",interface_name:"spv_swap_vault::ISpvVaultManager"},{type:"struct",name:"core::integer::u256",members:[{name:"low",type:"core::integer::u128"},{name:"high",type:"core::integer::u128"}]},{type:"struct",name:"spv_swap_vault::structs::BitcoinVaultTransactionData",members:[{name:"recipient",type:"core::starknet::contract_address::ContractAddress"},{name:"amount",type:"(core::integer::u64, core::integer::u64)"},{name:"caller_fee",type:"(core::integer::u64, core::integer::u64)"},{name:"fronting_fee",type:"(core::integer::u64, core::integer::u64)"},{name:"execution_handler_fee_amount_0",type:"core::integer::u64"},{name:"execution_hash",type:"core::felt252"},{name:"execution_expiry",type:"core::integer::u32"}]},{type:"struct",name:"core::byte_array::ByteArray",members:[{name:"data",type:"core::array::Array::<core::bytes_31::bytes31>"},{name:"pending_word",type:"core::felt252"},{name:"pending_word_len",type:"core::integer::u32"}]},{type:"struct",name:"btc_relay::structs::blockheader::BlockHeader",members:[{name:"reversed_version",type:"core::integer::u32"},{name:"previous_blockhash",type:"[core::integer::u32; 8]"},{name:"merkle_root",type:"[core::integer::u32; 8]"},{name:"reversed_timestamp",type:"core::integer::u32"},{name:"nbits",type:"core::integer::u32"},{name:"nonce",type:"core::integer::u32"}]},{type:"struct",name:"btc_relay::structs::stored_blockheader::StoredBlockHeader",members:[{name:"blockheader",type:"btc_relay::structs::blockheader::BlockHeader"},{name:"block_hash",type:"[core::integer::u32; 8]"},{name:"chain_work",type:"core::integer::u256"},{name:"block_height",type:"core::integer::u32"},{name:"last_diff_adjustment",type:"core::integer::u32"},{name:"prev_block_timestamps",type:"[core::integer::u32; 10]"}]},{type:"struct",name:"core::array::Span::<[core::integer::u32; 8]>",members:[{name:"snapshot",type:"@core::array::Array::<[core::integer::u32; 8]>"}]},{type:"interface",name:"spv_swap_vault::ISpvVaultManager",items:[{type:"function",name:"open",inputs:[{name:"vault_id",type:"core::felt252"},{name:"relay_contract",type:"core::starknet::contract_address::ContractAddress"},{name:"utxo",type:"(core::integer::u256, core::integer::u32)"},{name:"confirmations",type:"core::integer::u8"},{name:"token_0",type:"core::starknet::contract_address::ContractAddress"},{name:"token_1",type:"core::starknet::contract_address::ContractAddress"},{name:"token_0_multiplier",type:"core::felt252"},{name:"token_1_multiplier",type:"core::felt252"}],outputs:[],state_mutability:"external"},{type:"function",name:"deposit",inputs:[{name:"owner",type:"core::starknet::contract_address::ContractAddress"},{name:"vault_id",type:"core::felt252"},{name:"raw_token_0_amount",type:"core::integer::u64"},{name:"raw_token_1_amount",type:"core::integer::u64"}],outputs:[],state_mutability:"external"},{type:"function",name:"front",inputs:[{name:"owner",type:"core::starknet::contract_address::ContractAddress"},{name:"vault_id",type:"core::felt252"},{name:"withdraw_sequence",type:"core::integer::u32"},{name:"btc_tx_hash",type:"core::integer::u256"},{name:"data",type:"spv_swap_vault::structs::BitcoinVaultTransactionData"}],outputs:[],state_mutability:"external"},{type:"function",name:"claim",inputs:[{name:"owner",type:"core::starknet::contract_address::ContractAddress"},{name:"vault_id",type:"core::felt252"},{name:"transaction",type:"core::byte_array::ByteArray"},{name:"blockheader",type:"btc_relay::structs::stored_blockheader::StoredBlockHeader"},{name:"merkle_proof",type:"core::array::Span::<[core::integer::u32; 8]>"},{name:"position",type:"core::integer::u32"}],outputs:[],state_mutability:"external"}]},{type:"impl",name:"SpvVaultManagerReadOnlyImpl",interface_name:"spv_swap_vault::ISpvVaultManagerReadOnly"},{type:"struct",name:"spv_swap_vault::state::SpvVaultState",members:[{name:"relay_contract",type:"core::starknet::contract_address::ContractAddress"},{name:"token_0",type:"core::starknet::contract_address::ContractAddress"},{name:"token_1",type:"core::starknet::contract_address::ContractAddress"},{name:"token_0_multiplier",type:"core::felt252"},{name:"token_1_multiplier",type:"core::felt252"},{name:"utxo",type:"(core::integer::u256, core::integer::u32)"},{name:"confirmations",type:"core::integer::u8"},{name:"withdraw_count",type:"core::integer::u32"},{name:"deposit_count",type:"core::integer::u32"},{name:"token_0_amount",type:"core::integer::u64"},{name:"token_1_amount",type:"core::integer::u64"}]},{type:"enum",name:"core::option::Option::<spv_swap_vault::structs::BitcoinVaultTransactionData>",variants:[{name:"Some",type:"spv_swap_vault::structs::BitcoinVaultTransactionData"},{name:"None",type:"()"}]},{type:"interface",name:"spv_swap_vault::ISpvVaultManagerReadOnly",items:[{type:"function",name:"get_vault",inputs:[{name:"owner",type:"core::starknet::contract_address::ContractAddress"},{name:"vault_id",type:"core::felt252"}],outputs:[{type:"spv_swap_vault::state::SpvVaultState"}],state_mutability:"view"},{type:"function",name:"get_fronter_address",inputs:[{name:"owner",type:"core::starknet::contract_address::ContractAddress"},{name:"vault_id",type:"core::felt252"},{name:"btc_tx_hash",type:"core::integer::u256"},{name:"data",type:"spv_swap_vault::structs::BitcoinVaultTransactionData"}],outputs:[{type:"core::starknet::contract_address::ContractAddress"}],state_mutability:"view"},{type:"function",name:"get_fronter_address_by_id",inputs:[{name:"owner",type:"core::starknet::contract_address::ContractAddress"},{name:"vault_id",type:"core::felt252"},{name:"fronting_id",type:"core::felt252"}],outputs:[{type:"core::starknet::contract_address::ContractAddress"}],state_mutability:"view"},{type:"function",name:"parse_bitcoin_tx",inputs:[{name:"transaction",type:"core::byte_array::ByteArray"}],outputs:[{type:"core::option::Option::<spv_swap_vault::structs::BitcoinVaultTransactionData>"}],state_mutability:"view"}]},{type:"constructor",name:"constructor",inputs:[{name:"execution_contract",type:"core::starknet::contract_address::ContractAddress"}]},{type:"event",name:"spv_swap_vault::events::Opened",kind:"struct",members:[{name:"btc_tx_hash",type:"core::integer::u256",kind:"key"},{name:"owner",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"vault_id",type:"core::felt252",kind:"key"},{name:"vout",type:"core::integer::u32",kind:"key"}]},{type:"event",name:"spv_swap_vault::events::Deposited",kind:"struct",members:[{name:"owner",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"vault_id",type:"core::felt252",kind:"key"},{name:"amounts",type:"(core::integer::u64, core::integer::u64)",kind:"data"},{name:"deposit_count",type:"core::integer::u32",kind:"data"}]},{type:"event",name:"spv_swap_vault::events::Claimed",kind:"struct",members:[{name:"btc_tx_hash",type:"core::integer::u256",kind:"key"},{name:"owner",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"vault_id",type:"core::felt252",kind:"key"},{name:"recipient",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"execution_hash",type:"core::felt252",kind:"key"},{name:"caller",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"amounts",type:"(core::integer::u64, core::integer::u64)",kind:"data"},{name:"withdraw_count",type:"core::integer::u32",kind:"data"},{name:"fronting_address",type:"core::starknet::contract_address::ContractAddress",kind:"data"}]},{type:"event",name:"spv_swap_vault::events::Fronted",kind:"struct",members:[{name:"btc_tx_hash",type:"core::integer::u256",kind:"key"},{name:"owner",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"vault_id",type:"core::felt252",kind:"key"},{name:"recipient",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"execution_hash",type:"core::felt252",kind:"key"},{name:"caller",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"amounts",type:"(core::integer::u64, core::integer::u64)",kind:"data"}]},{type:"event",name:"spv_swap_vault::events::Closed",kind:"struct",members:[{name:"btc_tx_hash",type:"core::integer::u256",kind:"key"},{name:"owner",type:"core::starknet::contract_address::ContractAddress",kind:"key"},{name:"vault_id",type:"core::felt252",kind:"key"},{name:"error",type:"core::felt252",kind:"data"}]},{type:"event",name:"spv_swap_vault::SpvVaultManager::Event",kind:"enum",variants:[{name:"Opened",type:"spv_swap_vault::events::Opened",kind:"nested"},{name:"Deposited",type:"spv_swap_vault::events::Deposited",kind:"nested"},{name:"Claimed",type:"spv_swap_vault::events::Claimed",kind:"nested"},{name:"Fronted",type:"spv_swap_vault::events::Fronted",kind:"nested"},{name:"Closed",type:"spv_swap_vault::events::Closed",kind:"nested"}]}]},605996,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetSpvWithdrawalData=void 0;let n=e.r(154585),a=e.r(500874),i=e.r(84642),s=e.r(717065),o=e.r(828121);class l extends n.SpvWithdrawalTransactionData{fromOpReturnData(e){return o.StarknetSpvVaultContract.fromOpReturnData(e)}isRecipient(e){return this.getRecipient().toLowerCase()===e.toLowerCase()}getTxHash(){return BigInt("0x"+a.Buffer.from(this.btcTx.txid,"hex").reverse().toString("hex"))}getFrontingAmount(){return[this.rawAmounts[0]+this.getExecutionFee()[0],this.rawAmounts[1]]}serialize(){return{type:"STARKNET",...super.serialize()}}serializeToStruct(){let e=this.getCallerFee(),t=this.getFrontingFee(),r=this.getExecutionFee();return{recipient:this.recipient,amount:i.cairo.tuple(this.rawAmounts[0],this.rawAmounts[1]),caller_fee:i.cairo.tuple(e[0],e[1]),fronting_fee:i.cairo.tuple(t[0],t[1]),execution_handler_fee_amount_0:r[0],execution_hash:(0,s.toBigInt)(this.executionHash)??0n,execution_expiry:BigInt(this.executionExpiry)}}serializeToFelts(){let e=this.getCallerFee(),t=this.getFrontingFee(),r=this.getExecutionFee();return[this.recipient,this.rawAmounts[0],this.rawAmounts[1],e[0],e[1],t[0],t[1],r[0],(0,s.toBigInt)(this.executionHash)??0n,BigInt(this.executionExpiry)]}}r.StarknetSpvWithdrawalData=l,n.SpvWithdrawalTransactionData.deserializers.STARKNET=l},863012,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetSpvVaultData=void 0;let n=e.r(154585),a=e.r(717065),i=e.r(500874),s=e.r(605996);class o extends n.SpvVaultData{constructor(e,t,r,n){if(super(),"string"==typeof e){this.owner=e,this.vaultId=t,this.relayContract=(0,a.toHex)(r.relay_contract),this.token0={token:(0,a.toHex)(r.token_0),multiplier:(0,a.toBigInt)(r.token_0_multiplier),rawAmount:(0,a.toBigInt)(r.token_0_amount)},this.token1={token:(0,a.toHex)(r.token_1),multiplier:(0,a.toBigInt)(r.token_1_multiplier),rawAmount:(0,a.toBigInt)(r.token_1_amount)};let s=i.Buffer.from((0,a.toBigInt)(r.utxo["0"]).toString(16).padStart(64,"0"),"hex"),o=(0,a.toBigInt)(r.utxo["1"]);this.utxo=s.reverse().toString("hex")+":"+o.toString(10),this.confirmations=Number((0,a.toBigInt)(r.confirmations)),this.withdrawCount=Number((0,a.toBigInt)(r.withdraw_count)),this.depositCount=Number((0,a.toBigInt)(r.deposit_count)),this.initialUtxo=n}else this.owner=e.owner,this.vaultId=BigInt(e.vaultId),this.relayContract=e.relayContract,this.token0={token:e.token0.token,multiplier:BigInt(e.token0.multiplier),rawAmount:BigInt(e.token0.rawAmount)},this.token1={token:e.token1.token,multiplier:BigInt(e.token1.multiplier),rawAmount:BigInt(e.token1.rawAmount)},this.utxo=e.utxo,this.confirmations=e.confirmations,this.withdrawCount=e.withdrawCount,this.depositCount=e.depositCount,this.initialUtxo=e.initialUtxo}getBalances(){return[{...this.token0,scaledAmount:this.token0.rawAmount*this.token0.multiplier},{...this.token1,scaledAmount:this.token1.rawAmount*this.token1.multiplier}]}getConfirmations(){return this.confirmations}getOwner(){return this.owner}getTokenData(){return[this.token0,this.token1]}getUtxo(){return this.isOpened()?this.utxo:this.initialUtxo}getVaultId(){return this.vaultId}getWithdrawalCount(){return this.withdrawCount}isOpened(){return"0000000000000000000000000000000000000000000000000000000000000000:0"!==this.utxo}serialize(){return{type:"STARKNET",owner:this.owner,vaultId:this.vaultId.toString(10),relayContract:this.relayContract,token0:{token:this.token0.token,multiplier:this.token0.multiplier.toString(10),rawAmount:this.token0.rawAmount.toString(10)},token1:{token:this.token1.token,multiplier:this.token1.multiplier.toString(10),rawAmount:this.token1.rawAmount.toString(10)},utxo:this.utxo,confirmations:this.confirmations,withdrawCount:this.withdrawCount,depositCount:this.depositCount,initialUtxo:this.initialUtxo}}updateState(e){if(e instanceof n.SpvVaultClaimEvent){if(e.withdrawCount<=this.withdrawCount)return;this.token0.rawAmount-=e.amounts[0],this.token1.rawAmount-=e.amounts[1],this.withdrawCount=e.withdrawCount,this.utxo=e.btcTxId+":0"}if(e instanceof n.SpvVaultCloseEvent&&(this.token0.rawAmount=0n,this.token1.rawAmount=0n,this.utxo="0000000000000000000000000000000000000000000000000000000000000000:0"),e instanceof n.SpvVaultOpenEvent){if(this.isOpened())return;this.utxo=e.btcTxId+":"+e.vout}if(e instanceof n.SpvVaultDepositEvent){if(e.depositCount<=this.depositCount)return;this.token0.rawAmount+=e.amounts[0],this.token1.rawAmount+=e.amounts[1],this.depositCount=e.depositCount}if(e instanceof s.StarknetSpvWithdrawalData){if(e.getSpentVaultUtxo()!==this.utxo)return;let t=e.getTotalOutput();this.token0.rawAmount-=t[0],this.token1.rawAmount-=t[1],this.withdrawCount++,this.utxo=e.btcTx.txid+":0"}}getDepositCount(){return this.depositCount}}r.StarknetSpvVaultData=o,n.SpvVaultData.deserializers.STARKNET=o},828121,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetSpvVaultContract=void 0;let n=e.r(154585),a=e.r(500874),i=e.r(406524),s=e.r(993048),o=e.r(84642),l=e.r(613820),c=e.r(57417),u=e.r(863012),d=e.r(605996),h=e.r(717065),f=e.r(59480),p=e.r(201962),g={[o.constants.StarknetChainId.SN_SEPOLIA]:"0x02d581ea838cd5ca46ba08660eddd064d50a0392f618e95310432147928d572e",[o.constants.StarknetChainId.SN_MAIN]:"0x01932042992647771f3d0aa6ee526e65359c891fe05a285faaf4d3ffa373e132"},m=2n**251n+17n*2n**192n+1n;class y extends i.StarknetContractBase{constructor(e,t,r,n=g[e.starknetChainId]){super(e,n,c.SpvVaultContractAbi),this.chainId="STARKNET",this.claimTimeout=180,this.maxClaimsPerTx=10,this.logger=(0,h.getLogger)("StarknetSpvVaultContract: "),this.btcRelay=t,this.bitcoinRpc=r}Open(e,t){let{txHash:r,vout:n}=function(e){let[t,r]=e.split(":");return{txHash:BigInt("0x"+a.Buffer.from(t,"hex").reverse().toString("hex")),vout:BigInt(r)}}(t.getUtxo()),i=t.getTokenData();if(2!==i.length)throw Error("Must specify exactly 2 tokens for vault!");return new l.StarknetAction(e,this.Chain,this.contract.populateTransaction.open(t.getVaultId(),this.btcRelay.contract.address,o.cairo.tuple(o.cairo.uint256(r),n),t.getConfirmations(),i[0].token,i[1].token,i[0].multiplier,i[1].multiplier),y.GasCosts.OPEN)}Deposit(e,t,r){return new l.StarknetAction(e,this.Chain,this.contract.populateTransaction.deposit(t.getOwner(),t.getVaultId(),r[0],r[1]??0n),y.GasCosts.DEPOSIT)}Front(e,t,r,n){return new l.StarknetAction(e,this.Chain,this.contract.populateTransaction.front(t.getOwner(),t.getVaultId(),BigInt(n),r.getTxHash(),r.serializeToStruct()),y.GasCosts.FRONT)}Claim(e,t,r,n,i,s){return new l.StarknetAction(e,this.Chain,{contractAddress:this.contract.address,entrypoint:"claim",calldata:[t.getOwner(),t.getVaultId(),...(0,h.bufferToByteArray)(a.Buffer.from(r.btcTx.hex,"hex")),...n.serialize(),i.length,...i.map(h.bufferToU32Array).flat(),s].map(e=>(0,h.toHex)(e,0))},y.GasCosts.CLAIM)}async checkWithdrawalTx(e){if(null==await this.Chain.provider.callContract({contractAddress:this.contract.address,entrypoint:"parse_bitcoin_tx",calldata:(0,h.bufferToByteArray)(a.Buffer.from(e.btcTx.hex,"hex"))}))throw Error("Failed to parse transaction!")}createVaultData(e,t,r,n,a){if(2!==a.length)throw Error("Must specify 2 tokens in tokenData!");return Promise.resolve(new u.StarknetSpvVaultData(e,t,{relay_contract:this.btcRelay.contract.address,token_0:a[0].token,token_1:a[1].token,token_0_multiplier:a[0].multiplier,token_1_multiplier:a[1].multiplier,utxo:o.cairo.tuple(o.cairo.uint256(0),0),confirmations:n,withdraw_count:0,deposit_count:0,token_0_amount:0n,token_1_amount:0n},r))}async getVaultData(e,t){let r=await this.contract.get_vault(e,t);return(0,h.toHex)(r.relay_contract)!==(0,h.toHex)(this.btcRelay.contract.address)?null:new u.StarknetSpvVaultData(e,t,r)}async getAllVaults(e){let t=new Set;await this.Events.findInContractEventsForward(["spv_swap_vault::events::Opened","spv_swap_vault::events::Closed"],null==e?null:[null,e],e=>{let r=(0,h.toHex)(e.params.owner)+":"+(0,h.toBigInt)(e.params.vault_id).toString(10);return"spv_swap_vault::events::Opened"===e.name?t.add(r):t.delete(r),null});let r=[];for(let e of t.keys()){let[t,n]=e.split(":"),a=await this.getVaultData(t,BigInt(n));null!=a&&r.push(a)}return r}async getWithdrawalState(e){let t=a.Buffer.from(e,"hex").reverse(),r=o.cairo.uint256("0x"+t.toString("hex")),i={type:n.SpvWithdrawalStateType.NOT_FOUND};return await this.Events.findInContractEventsForward(["spv_swap_vault::events::Fronted","spv_swap_vault::events::Claimed","spv_swap_vault::events::Closed"],[(0,h.toHex)(r.low),(0,h.toHex)(r.high)],async e=>{switch(e.name){case"spv_swap_vault::events::Fronted":i={type:n.SpvWithdrawalStateType.FRONTED,txId:e.txHash,owner:(0,h.toHex)(e.params.owner),vaultId:(0,h.toBigInt)(e.params.vault_id),recipient:(0,h.toHex)(e.params.recipient),fronter:(0,h.toHex)(e.params.fronting_address)};break;case"spv_swap_vault::events::Claimed":i={type:n.SpvWithdrawalStateType.CLAIMED,txId:e.txHash,owner:(0,h.toHex)(e.params.owner),vaultId:(0,h.toBigInt)(e.params.vault_id),recipient:(0,h.toHex)(e.params.recipient),claimer:(0,h.toHex)(e.params.caller),fronter:(0,h.toHex)(e.params.fronting_address)};break;case"spv_swap_vault::events::Closed":i={type:n.SpvWithdrawalStateType.CLOSED,txId:e.txHash,owner:(0,h.toHex)(e.params.owner),vaultId:(0,h.toBigInt)(e.params.vault_id),error:(0,h.bigNumberishToBuffer)(e.params.error).toString()}}}),i}getWithdrawalData(e){return Promise.resolve(new d.StarknetSpvWithdrawalData(e))}fromOpReturnData(e){return y.fromOpReturnData(e)}static fromOpReturnData(e){let t=0n,r=0n,n=null;if(40===e.length)t=e.readBigInt64LE(32).valueOf();else if(48===e.length)t=e.readBigInt64LE(32).valueOf(),r=e.readBigInt64LE(40).valueOf();else if(72===e.length)t=e.readBigInt64LE(32).valueOf(),n=e.slice(40,72).toString("hex");else if(80===e.length)t=e.readBigInt64LE(32).valueOf(),r=e.readBigInt64LE(40).valueOf(),n=e.slice(48,80).toString("hex");else throw Error("Invalid OP_RETURN data length!");if(null!=n&&BigInt("0x"+n)>=m)throw Error("Execution hash not in range of starknet prime");let a="0x"+e.slice(0,32).toString("hex");if(!f.StarknetAddresses.isValidAddress(a))throw Error("Invalid recipient specified");return{executionHash:n,rawAmounts:[t,r],recipient:a}}toOpReturnData(e,t,r){return y.toOpReturnData(e,t,r)}static toOpReturnData(e,t,r){if(!f.StarknetAddresses.isValidAddress(e))throw Error("Invalid recipient specified");if(t.length<1)throw Error("At least 1 amount needs to be specified");if(t.length>2)throw Error("At most 2 amounts need to be specified");if(t.forEach(e=>{if(e<0n)throw Error("Negative raw amount specified");if(e>=2n**64n)throw Error("Raw amount overflow")}),null!=r){let e=(0,h.toBigInt)(r);if(e<0n)throw Error("Execution hash negative");if(e>=m)throw Error("Execution hash not in range of starknet prime")}let n=a.Buffer.from(e.substring(2).padStart(64,"0"),"hex"),i=a.Buffer.from(t[0].toString(16).padStart(16,"0"),"hex"),s=null==t[1]||0n===t[1]?a.Buffer.alloc(0):a.Buffer.from(t[1].toString(16).padStart(16,"0"),"hex"),o=null==r?a.Buffer.alloc(0):a.Buffer.from(r.substring(2).padStart(64,"0"),"hex");return a.Buffer.concat([n,i.reverse(),s.reverse(),o])}async claim(e,t,r,n,a,i){let s=await this.txsClaim(e.getAddress(),t,r,n,a,i?.feeRate),[o]=await this.Chain.sendAndConfirm(e,s,i?.waitForConfirmation,i?.abortSignal);return o}async deposit(e,t,r,n){let a=await this.txsDeposit(e.getAddress(),t,r,n?.feeRate),[i]=await this.Chain.sendAndConfirm(e,a,n?.waitForConfirmation,n?.abortSignal);return i}async frontLiquidity(e,t,r,n,a){let i=await this.txsFrontLiquidity(e.getAddress(),t,r,n,a?.feeRate),[s]=await this.Chain.sendAndConfirm(e,i,a?.waitForConfirmation,a?.abortSignal);return s}async open(e,t,r){let n=await this.txsOpen(e.getAddress(),t,r?.feeRate),[a]=await this.Chain.sendAndConfirm(e,n,r?.waitForConfirmation,r?.abortSignal);return a}async txsClaim(e,t,r,n,a,i){if(!t.isOpened())throw Error("Cannot claim from a closed vault!");i??(i=await this.Chain.Fees.getFeeRate());let o=[];for(let e of r){let t=await this.bitcoinRpc.getMerkleProof(e.tx.btcTx.txid,e.tx.btcTx.blockhash);this.logger.debug("txsClaim(): merkle proof computed: ",t),o.push({...t,...e})}let c=[],u=await s.StarknetBtcRelay.getCommitedHeadersAndSynchronize(e,this.btcRelay,o.filter(e=>null==e.storedHeader).map(e=>({blockhash:e.tx.btcTx.blockhash,blockheight:e.blockheight,requiredConfirmations:t.getConfirmations()})),c,n,i);if(null==u)throw Error("Cannot fetch committed header!");let d=o.map(r=>this.Claim(e,t,r.tx,r.storedHeader??u[r.tx.btcTx.blockhash],r.merkle,r.pos)),h=new l.StarknetAction(e,this.Chain);for(let t of d)h.add(t),h.ixsLength()>=this.maxClaimsPerTx&&(await h.addToTxs(c,i),h=new l.StarknetAction(e,this.Chain));return h.ixsLength()>0&&await h.addToTxs(c,i),this.logger.debug("txsClaim(): "+c.length+" claim TXs created claiming "+r.length+" txs, owner: "+t.getOwner()+" vaultId: "+t.getVaultId().toString(10)),c}async txsDeposit(e,t,r,n){if(!t.isOpened())throw Error("Cannot deposit to a closed vault!");let a=t.getTokenData(),i=new l.StarknetAction(e,this.Chain),s=0n,o=0n;return null!=r[0]&&0n!==r[0]&&(s=r[0]*a[0].multiplier,i.add(this.Chain.Tokens.Approve(e,this.contract.address,a[0].token,s))),null!=r[1]&&0n!==r[1]&&(o=r[1]*a[1].multiplier,i.add(this.Chain.Tokens.Approve(e,this.contract.address,a[1].token,o))),i.add(this.Deposit(e,t,r)),n??(n=await this.Chain.Fees.getFeeRate()),this.logger.debug("txsDeposit(): deposit TX created, token0: "+a[0].token+" rawAmount0: "+r[0].toString(10)+" amount0: "+s.toString(10)+" token1: "+a[1].token+" rawAmount1: "+(r[1]??0n).toString(10)+" amount1: "+o.toString(10)),[await i.tx(n)]}async txsFrontLiquidity(e,t,r,n,a){if(!t.isOpened())throw Error("Cannot front on a closed vault!");let i=t.getTokenData(),s=new l.StarknetAction(e,this.Chain),o=r.getFrontingAmount(),c=0n,u=0n;return null!=o[0]&&0n!==o[0]&&(c=o[0]*i[0].multiplier,s.add(this.Chain.Tokens.Approve(e,this.contract.address,i[0].token,c))),null!=o[1]&&0n!==o[1]&&(u=o[1]*i[1].multiplier,s.add(this.Chain.Tokens.Approve(e,this.contract.address,i[1].token,u))),s.add(this.Front(e,t,r,n)),a??(a=await this.Chain.Fees.getFeeRate()),this.logger.debug("txsFrontLiquidity(): front TX created, token0: "+i[0].token+" rawAmount0: "+o[0].toString(10)+" amount0: "+c.toString(10)+" token1: "+i[1].token+" rawAmount1: "+(o[1]??0n).toString(10)+" amount1: "+u.toString(10)),[await s.tx(a)]}async txsOpen(e,t,r){if(t.isOpened())throw Error("Cannot open an already opened vault!");let n=this.Open(e,t);return r??(r=await this.Chain.Fees.getFeeRate()),this.logger.debug("txsOpen(): open TX created, owner: "+t.getOwner()+" vaultId: "+t.getVaultId().toString(10)),[await n.tx(r)]}async getClaimFee(e,t,r){return r??(r=await this.Chain.Fees.getFeeRate()),p.StarknetFees.getGasFee(null==t?y.GasCosts.CLAIM_OPTIMISTIC_ESTIMATE:y.GasCosts.CLAIM,r)}async getFrontFee(e,t,r){return r??(r=await this.Chain.Fees.getFeeRate()),p.StarknetFees.getGasFee(y.GasCosts.FRONT,r)}}r.StarknetSpvVaultContract=y,y.GasCosts={DEPOSIT:{l1DataGas:400,l2Gas:4e6,l1Gas:0},OPEN:{l1DataGas:1200,l2Gas:32e5,l1Gas:0},FRONT:{l1DataGas:800,l2Gas:12e6,l1Gas:0},CLAIM:{l1DataGas:1e3,l2Gas:4e8,l1Gas:0},CLAIM_OPTIMISTIC_ESTIMATE:{l1DataGas:1e3,l2Gas:8e7,l1Gas:0}}},969127,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.RpcProviderWithRetries=r.RpcChannelWithRetries=void 0;let n=e.r(84642),a=e.r(717065);class i extends n.RpcChannel{constructor(e,t){super(e),this.retryPolicy=t}fetchEndpoint(e,t){return(0,a.tryWithRetries)(()=>super.fetchEndpoint(e,t),this.retryPolicy,e=>{if(!e.message.startsWith("RPC: "))return!1;let t=e.message.split("\n"),r=parseInt(t[t.length-1]);return!isNaN(r)&&!(r<0)})}}r.RpcChannelWithRetries=i;class s extends n.RpcProvider{constructor(e,t){super(e),this.channel=new i({...e,waitMode:!1},t)}}r.RpcProviderWithRetries=s},468859,(e,t,r)=>{"use strict";Object.defineProperty(r,"__esModule",{value:!0}),r.StarknetInitializer=r.initializeStarknet=r.StarknetAssets=void 0;let n=e.r(84642),a=e.r(201962),i=e.r(583767),s=e.r(993048),o=e.r(885745),l=e.r(706276),c=e.r(154585),u=e.r(987902),d=e.r(828121),h=e.r(863012),f=e.r(605996),p=e.r(969127);function g(e,t,r){let g="string"==typeof e.rpcUrl?new p.RpcProviderWithRetries({nodeUrl:e.rpcUrl}):e.rpcUrl,m=e.fees??new a.StarknetFees(g),y=e.chainId??(r===c.BitcoinNetwork.MAINNET?n.constants.StarknetChainId.SN_MAIN:n.constants.StarknetChainId.SN_SEPOLIA),b=new i.StarknetChainInterface(y,g,e.retryPolicy,m),_=new s.StarknetBtcRelay(b,t,r,e.btcRelayContract),w=new o.StarknetSwapContract(b,_,e.swapContract,e.handlerContracts),E=new d.StarknetSpvVaultContract(b,_,t,e.spvVaultContract),v=new l.StarknetChainEventsBrowser(b,w,E);return{chainId:"STARKNET",btcRelay:_,chainInterface:b,swapContract:w,chainEvents:v,swapDataConstructor:u.StarknetSwapData,spvVaultContract:E,spvVaultDataConstructor:h.StarknetSpvVaultData,spvVaultWithdrawalDataConstructor:f.StarknetSpvWithdrawalData}}r.StarknetAssets={ETH:{address:"0x049d36570d4e46f48e99674bd3fcc84644ddd6b96f7c741b1562b82f9e004dc7",decimals:18,displayDecimals:9},STRK:{address:"0x04718f5a0fc34cc1af16a1cdee98ffb20c31f5cd61d6ab07201858f4287c938d",decimals:18,displayDecimals:9},WBTC:{address:"0x03fe2b97c1fd336e750087d68b9b867997fd64a2661ff3ca5a7c771641e8e7ac",decimals:8},TBTC:{address:"0x04daa17763b286d1e59b97c283C0b8C949994C361e426A28F743c67bDfE9a32f",decimals:18,displayDecimals:8},_TESTNET_WBTC_VESU:{address:"0x04861ba938aed21f2cd7740acd3765ac4d2974783a3218367233de0153490cb6",decimals:8}},r.initializeStarknet=g,r.StarknetInitializer={chainId:"STARKNET",chainType:null,initializer:g,tokens:r.StarknetAssets,options:null}},849707,(e,t,r)=>{"use strict";var n=e.e&&e.e.__createBinding||(Object.create?function(e,t,r,n){void 0===n&&(n=r);var a=Object.getOwnPropertyDescriptor(t,r);(!a||("get"in a?!t.__esModule:a.writable||a.configurable))&&(a={enumerable:!0,get:function(){return t[r]}}),Object.defineProperty(e,n,a)}:function(e,t,r,n){void 0===n&&(n=r),e[n]=t[r]}),a=e.e&&e.e.__exportStar||function(e,t){for(var r in e)"default"===r||Object.prototype.hasOwnProperty.call(t,r)||n(t,e,r)};Object.defineProperty(r,"__esModule",{value:!0}),a(e.r(613820),r),a(e.r(583767),r),a(e.r(525232),r),a(e.r(201962),r),a(e.r(587510),r),a(e.r(228904),r),a(e.r(59480),r),a(e.r(183930),r),a(e.r(223981),r),a(e.r(124455),r),a(e.r(617988),r),a(e.r(993048),r),a(e.r(801947),r),a(e.r(406524),r),a(e.r(885745),r),a(e.r(987902),r),a(e.r(568784),r),a(e.r(891628),r),a(e.r(715157),r),a(e.r(304276),r),a(e.r(831396),r),a(e.r(601224),r),a(e.r(800524),r),a(e.r(722560),r),a(e.r(455672),r),a(e.r(496279),r),a(e.r(221340),r),a(e.r(476575),r),a(e.r(428020),r),a(e.r(706276),r),a(e.r(110284),r),a(e.r(981676),r),a(e.r(168871),r),a(e.r(468859),r),a(e.r(828121),r),a(e.r(863012),r),a(e.r(605996),r),a(e.r(969127),r)},675962,538156,e=>{"use strict";let t,r,n,a,i;e.s(["getSharedSwapAccount",()=>hI,"getSharedSwapAccountRaw",()=>hB,"getSharedSwapAddress",()=>hN,"getSharedSwapProvider",()=>hC,"transferStrkFromShared",()=>hP,"validateSharedSwapSigner",()=>hO],675962),e.s(["Account",()=>ha,"CallData",()=>cN,"Contract",()=>hE,"RpcProvider",()=>dH,"cairo",()=>lR,"ec",()=>cD,"hash",()=>cP,"num",()=>oQ,"uint256",()=>dj],538156),e.s(["API",()=>A,"EBlockTag",()=>m,"EDAMode",()=>b,"EDataAvailabilityMode",()=>y,"ESimulationFlag",()=>h,"ETransactionExecutionStatus",()=>g,"ETransactionFinalityStatus",()=>p,"ETransactionStatus",()=>f,"ETransactionType",()=>d,"ETransactionVersion",()=>_,"ETransactionVersion2",()=>w,"ETransactionVersion3",()=>E,"Errors",()=>c,"Permission",()=>S,"SPEC",()=>u,"TypedDataRevision",()=>x,"WALLET_API",()=>k],535147),e.s([],675518),e.s(["EBlockTag",()=>m,"EDAMode",()=>b,"EDataAvailabilityMode",()=>y,"ESimulationFlag",()=>h,"ETransactionExecutionStatus",()=>g,"ETransactionFinalityStatus",()=>p,"ETransactionStatus",()=>f,"ETransactionType",()=>d,"ETransactionVersion",()=>_,"ETransactionVersion2",()=>w,"ETransactionVersion3",()=>E,"Errors",()=>c,"SPEC",()=>u],590868),e.s([],658345),e.s([],284126);var s,o=e.i(284126);e.s([],115260);var l=e.i(115260);e.i(658345),e.s([],364117),e.i(364117);var c=o,u=l;e.s(["EBlockTag",()=>m,"EDAMode",()=>b,"EDataAvailabilityMode",()=>y,"ESimulationFlag",()=>h,"ETransactionExecutionStatus",()=>g,"ETransactionFinalityStatus",()=>p,"ETransactionStatus",()=>f,"ETransactionType",()=>d,"ETransactionVersion",()=>_,"ETransactionVersion2",()=>w,"ETransactionVersion3",()=>E],329364);let d={DECLARE:"DECLARE",DEPLOY:"DEPLOY",DEPLOY_ACCOUNT:"DEPLOY_ACCOUNT",INVOKE:"INVOKE",L1_HANDLER:"L1_HANDLER"},h={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},f={RECEIVED:"RECEIVED",REJECTED:"REJECTED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},p={ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},g={SUCCEEDED:"SUCCEEDED",REVERTED:"REVERTED"},m={LATEST:"latest",PENDING:"pending"},y={L1:"L1",L2:"L2"},b={L1:0,L2:1},_={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},w={V0:"0x0",V1:"0x1",V2:"0x2",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002"},E={V3:"0x3",F3:"0x100000000000000000000000000000003"};e.i(329364);var v=e.i(590868);e.s(["Permission",()=>S,"TypedDataRevision",()=>x],37051),e.s([],596810),e.i(596810),e.s(["Permission",()=>S],440079);let S={ACCOUNTS:"accounts"};e.i(440079),e.s(["TypedDataRevision",()=>x],857616);let x={ACTIVE:"1",LEGACY:"0"};e.i(857616),e.s([],303902),e.i(303902),e.s([],495091),e.i(495091),e.s([],751688),e.i(751688),e.s([],763135),e.i(763135),e.s([],351243),e.i(351243);var T=e.i(37051);e.i(675518);var A=v,k=T,I=e.i(535147);e.s(["ABI_TYPE_CONSTRUCTOR",()=>G,"ABI_TYPE_ENUM",()=>K,"ABI_TYPE_FUNCTION",()=>W,"ABI_TYPE_L1_HANDLER",()=>q,"API",()=>ey,"CALL_TYPE",()=>ee,"CONTRACT",()=>B,"EBlockTag",()=>es,"EDAMode",()=>el,"EDataAvailabilityMode",()=>eo,"ESimulationFlag",()=>er,"ETransactionExecutionStatus",()=>ei,"ETransactionFinalityStatus",()=>ea,"ETransactionStatus",()=>en,"ETransactionType",()=>et,"ETransactionVersion",()=>ec,"ETransactionVersion2",()=>eu,"ETransactionVersion3",()=>ed,"EVENT_ABI_TYPE",()=>z,"L1_DA_MODE",()=>Q,"PAYMASTER_API",()=>e_,"PRICE_UNIT_FRI",()=>J,"PRICE_UNIT_WEI",()=>X,"Permission",()=>ef,"STATE_MUTABILITY_EXTERNAL",()=>Z,"STATE_MUTABILITY_VIEW",()=>Y,"STATUS_ACCEPTED_ON_L1",()=>N,"STATUS_ACCEPTED_ON_L2",()=>O,"STATUS_PENDING",()=>R,"STATUS_RECEIVED",()=>U,"STATUS_REJECTED",()=>L,"STATUS_REVERTED",()=>D,"STATUS_SUCCEEDED",()=>P,"STRUCT_ABI_TYPE",()=>j,"TXN_TYPE_DECLARE",()=>V,"TXN_TYPE_DEPLOY",()=>F,"TXN_TYPE_DEPLOY_ACCOUNT",()=>H,"TXN_TYPE_INVOKE",()=>M,"TXN_TYPE_L1_HANDLER",()=>$,"TypedDataRevision",()=>ep,"WALLET_API",()=>eb],636307),e.s([],713238),e.s(["ABI_TYPE_CONSTRUCTOR",()=>G,"ABI_TYPE_ENUM",()=>K,"ABI_TYPE_FUNCTION",()=>W,"ABI_TYPE_L1_HANDLER",()=>q,"CALL_TYPE",()=>ee,"CONTRACT",()=>B,"EBlockTag",()=>es,"EDAMode",()=>el,"EDataAvailabilityMode",()=>eo,"ESimulationFlag",()=>er,"ETransactionExecutionStatus",()=>ei,"ETransactionFinalityStatus",()=>ea,"ETransactionStatus",()=>en,"ETransactionType",()=>et,"ETransactionVersion",()=>ec,"ETransactionVersion2",()=>eu,"ETransactionVersion3",()=>ed,"EVENT_ABI_TYPE",()=>z,"L1_DA_MODE",()=>Q,"PRICE_UNIT_FRI",()=>J,"PRICE_UNIT_WEI",()=>X,"STATE_MUTABILITY_EXTERNAL",()=>Z,"STATE_MUTABILITY_VIEW",()=>Y,"STATUS_ACCEPTED_ON_L1",()=>N,"STATUS_ACCEPTED_ON_L2",()=>O,"STATUS_PENDING",()=>R,"STATUS_RECEIVED",()=>U,"STATUS_REJECTED",()=>L,"STATUS_REVERTED",()=>D,"STATUS_SUCCEEDED",()=>P,"STRUCT_ABI_TYPE",()=>j,"TXN_TYPE_DECLARE",()=>V,"TXN_TYPE_DEPLOY",()=>F,"TXN_TYPE_DEPLOY_ACCOUNT",()=>H,"TXN_TYPE_INVOKE",()=>M,"TXN_TYPE_L1_HANDLER",()=>$],568847),e.s([],702430),e.s([],489179);var C=e.i(489179);e.i(702430),e.s([],434520),e.i(434520);var B=C;e.s([],216143),e.i(216143),e.s([],358509),e.i(358509),e.s([],575276),e.i(575276),e.s(["ABI_TYPE_CONSTRUCTOR",()=>G,"ABI_TYPE_ENUM",()=>K,"ABI_TYPE_FUNCTION",()=>W,"ABI_TYPE_L1_HANDLER",()=>q,"CALL_TYPE",()=>ee,"EBlockTag",()=>es,"EDAMode",()=>el,"EDataAvailabilityMode",()=>eo,"ESimulationFlag",()=>er,"ETransactionExecutionStatus",()=>ei,"ETransactionFinalityStatus",()=>ea,"ETransactionStatus",()=>en,"ETransactionType",()=>et,"ETransactionVersion",()=>ec,"ETransactionVersion2",()=>eu,"ETransactionVersion3",()=>ed,"EVENT_ABI_TYPE",()=>z,"L1_DA_MODE",()=>Q,"PRICE_UNIT_FRI",()=>J,"PRICE_UNIT_WEI",()=>X,"STATE_MUTABILITY_EXTERNAL",()=>Z,"STATE_MUTABILITY_VIEW",()=>Y,"STATUS_ACCEPTED_ON_L1",()=>N,"STATUS_ACCEPTED_ON_L2",()=>O,"STATUS_PENDING",()=>R,"STATUS_RECEIVED",()=>U,"STATUS_REJECTED",()=>L,"STATUS_REVERTED",()=>D,"STATUS_SUCCEEDED",()=>P,"STRUCT_ABI_TYPE",()=>j,"TXN_TYPE_DECLARE",()=>V,"TXN_TYPE_DEPLOY",()=>F,"TXN_TYPE_DEPLOY_ACCOUNT",()=>H,"TXN_TYPE_INVOKE",()=>M,"TXN_TYPE_L1_HANDLER",()=>$],775926);let O="ACCEPTED_ON_L2",N="ACCEPTED_ON_L1",P="SUCCEEDED",D="REVERTED",R="PENDING",L="REJECTED",U="RECEIVED",V="DECLARE",F="DEPLOY",H="DEPLOY_ACCOUNT",M="INVOKE",$="L1_HANDLER",j="struct",z="event",W="function",G="constructor",q="l1_handler",K="enum",Y="view",Z="external",X="WEI",J="FRI",Q={BLOB:"BLOB",CALLDATA:"CALLDATA"},ee={DELEGATE:"DELEGATE",LIBRARY_CALL:"LIBRARY_CALL",CALL:"CALL"},et={DECLARE:V,DEPLOY:F,DEPLOY_ACCOUNT:H,INVOKE:M,L1_HANDLER:$},er={SKIP_VALIDATE:"SKIP_VALIDATE",SKIP_FEE_CHARGE:"SKIP_FEE_CHARGE"},en={RECEIVED:U,REJECTED:L,ACCEPTED_ON_L2:O,ACCEPTED_ON_L1:N},ea={ACCEPTED_ON_L2:O,ACCEPTED_ON_L1:N},ei={SUCCEEDED:P,REVERTED:D},es={LATEST:"latest",PENDING:"pending"},eo={L1:"L1",L2:"L2"},el={L1:0,L2:1},ec={V0:"0x0",V1:"0x1",V2:"0x2",V3:"0x3",F0:"0x100000000000000000000000000000000",F1:"0x100000000000000000000000000000001",F2:"0x100000000000000000000000000000002",F3:"0x100000000000000000000000000000003"},eu={V0:ec.V0,V1:ec.V1,V2:ec.V2,F0:ec.F0,F1:ec.F1,F2:ec.F2},ed={V3:ec.V3,F3:ec.F3};e.i(775926),e.s([],300269),e.i(300269),e.s([],979618),e.i(979618);var eh=e.i(568847);e.s(["Permission",()=>ef,"TypedDataRevision",()=>ep],225520),e.s([],694003),e.i(694003),e.s(["Permission",()=>ef],644758);let ef={ACCOUNTS:"accounts"};e.i(644758),e.s(["TypedDataRevision",()=>ep],691426);let ep={ACTIVE:"1",LEGACY:"0"};e.i(691426),e.s([],250101),e.i(250101),e.s([],903555),e.i(903555),e.s([],458361),e.i(458361),e.s([],590549),e.i(590549),e.s([],67226),e.i(67226);var eg=e.i(225520);e.s([],286313),e.s([],883750),e.i(883750),e.s([],991199),e.i(991199),e.s([],731341),e.i(731341),e.s([],878134),e.i(878134),e.s([],767833),e.i(767833);var em=e.i(286313);e.i(713238);var ey=eh,eb=eg,e_=em,ew=e.i(636307);function eE(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function ev(e,t){return!!Array.isArray(t)&&(0===t.length||(e?t.every(e=>"string"==typeof e):t.every(e=>Number.isSafeInteger(e))))}function eS(e,t){if("string"!=typeof t)throw Error(`${e}: string expected`);return!0}function ex(e){if(!Number.isSafeInteger(e))throw Error(`invalid integer: ${e}`)}function eT(e){if(!Array.isArray(e))throw Error("array expected")}function eA(e,t){if(!ev(!0,t))throw Error(`${e}: array of strings expected`)}function ek(e,t){if(!ev(!1,t))throw Error(`${e}: array of numbers expected`)}function eI(...e){let t=e=>e,r=(e,t)=>r=>e(t(r));return{encode:e.map(e=>e.encode).reduceRight(r,t),decode:e.map(e=>e.decode).reduce(r,t)}}function eC(e){let t="string"==typeof e?e.split(""):e,r=t.length;eA("alphabet",t);let n=new Map(t.map((e,t)=>[e,t]));return{encode:n=>(eT(n),n.map(n=>{if(!Number.isSafeInteger(n)||n<0||n>=r)throw Error(`alphabet.encode: digit index outside alphabet "${n}". Allowed: ${e}`);return t[n]})),decode:t=>(eT(t),t.map(t=>{eS("alphabet.decode",t);let r=n.get(t);if(void 0===r)throw Error(`Unknown letter: "${t}". Allowed: ${e}`);return r}))}}function eB(e=""){return eS("join",e),{encode:t=>(eA("join.decode",t),t.join(e)),decode:t=>(eS("join.decode",t),t.split(e))}}function eO(e,t,r){if(t<2)throw Error(`convertRadix: invalid from=${t}, base cannot be less than 2`);if(r<2)throw Error(`convertRadix: invalid to=${r}, base cannot be less than 2`);if(eT(e),!e.length)return[];let n=0,a=[],i=Array.from(e,e=>{if(ex(e),e<0||e>=t)throw Error(`invalid integer: ${e}`);return e}),s=i.length;for(;;){let e=0,o=!0;for(let a=n;a<s;a++){let s=i[a],l=t*e,c=l+s;if(!Number.isSafeInteger(c)||l/t!==e||c-s!==l)throw Error("convertRadix: carry overflow");let u=c/r;e=c%r;let d=Math.floor(u);if(i[a]=d,!Number.isSafeInteger(d)||d*r+e!==c)throw Error("convertRadix: carry overflow");o&&(d?o=!1:n=a)}if(a.push(e),o)break}for(let t=0;t<e.length-1&&0===e[t];t++)a.push(0);return a.reverse()}let eN=(e,t)=>0===t?e:eN(t,e%t),eP=(e,t)=>e+(t-eN(e,t)),eD=(()=>{let e=[];for(let t=0;t<40;t++)e.push(2**t);return e})();function eR(e,t,r,n){if(eT(e),t<=0||t>32)throw Error(`convertRadix2: wrong from=${t}`);if(r<=0||r>32)throw Error(`convertRadix2: wrong to=${r}`);if(eP(t,r)>32)throw Error(`convertRadix2: carry overflow from=${t} to=${r} carryBits=${eP(t,r)}`);let a=0,i=0,s=eD[t],o=eD[r]-1,l=[];for(let n of e){if(ex(n),n>=s)throw Error(`convertRadix2: invalid data word=${n} from=${t}`);if(a=a<<t|n,i+t>32)throw Error(`convertRadix2: carry overflow pos=${i} from=${t}`);for(i+=t;i>=r;i-=r)l.push((a>>i-r&o)>>>0);let e=eD[i];if(void 0===e)throw Error("invalid carry");a&=e-1}if(a=a<<r-i&o,!n&&i>=t)throw Error("Excess padding");if(!n&&a>0)throw Error(`Non-zero padding: ${a}`);return n&&i>0&&l.push(a>>>0),l}let eL=eI(function(e,t=!1){if(ex(6),e<=0||e>32)throw Error("radix2: bits should be in (0..32]");if(eP(8,e)>32||eP(e,8)>32)throw Error("radix2: carry overflow");return{encode:r=>{if(!eE(r))throw Error("radix2.encode input should be Uint8Array");return eR(Array.from(r),8,e,!t)},decode:r=>(ek("radix2.decode",r),Uint8Array.from(eR(r,e,8,t)))}}(6),eC("ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/"),function(e,t="="){return ex(6),eS("padding",t),{encode(r){for(eA("padding.encode",r);r.length*e%8;)r.push(t);return r},decode(r){eA("padding.decode",r);let n=r.length;if(n*e%8)throw Error("padding: invalid, string should have whole number of bytes");for(;n>0&&r[n-1]===t;n--)if((n-1)*e%8==0)throw Error("padding: invalid, string has too much padding");return r.slice(0,n)}}}(6),eB("")),eU=((s=58,ex(58)),eI(eC("qpzry9x8gf2tvdw0s3jn54khce6mua7l"),eB("")));function eV(e){throw Error("config is deprecated, support for circularRefs is removed from the library. If you encounter circular references in your data structures, please rethink your datastructures: better prevent circular references in the first place.")}function eF(e){return eH.test(e)}e=>{if("string"!=typeof e||e.length%2!=0)throw TypeError(`hex.decode: expected string, got ${typeof e} with length ${e.length}`);return e.toLowerCase()},e.s([],332619);let eH=/^-?[0-9]+$/;function eM(e){return e$.test(e)}let e$=/^-?(?:0|[1-9]\d*)(?:\.\d+)?(?:[eE][+-]?\d+)?$/;function ej(e,t){if(eF(e))return Number.isSafeInteger(Number.parseInt(e,10));let r=String(Number.parseFloat(e));if(e===r)return!0;let n=eY(e),a=eY(r);return!!(n===a||t?.approx===!0&&!eF(e)&&a.length>=14&&n.startsWith(a.substring(0,14)))||!1}let ez=function(e){return e.underflow="underflow",e.overflow="overflow",e.truncate_integer="truncate_integer",e.truncate_float="truncate_float",e}({});function eW(e){if(ej(e,{approx:!1}))return;if(eF(e))return ez.truncate_integer;let t=Number.parseFloat(e);return Number.isFinite(t)?0===t?ez.underflow:ez.truncate_float:ez.overflow}function eG(e,t){let r=Number.parseFloat(e),n=eW(e);if(t?.approx===!0?n&&n!==ez.truncate_float:n){let t=n?.replace(/_\w+$/,"");throw Error(`Cannot safely convert to number: the value '${e}' would ${t} and become ${r}`)}return r}function eq(e){let t=e.match(/^(-?)(\d+\.?\d*)([eE]([+-]?\d+))?$/);if(!t)throw SyntaxError(`Invalid number: ${e}`);let r=t[1],n=t[2],a=void 0!==t[4]?Number.parseInt(t[4],10):0,i=n.indexOf(".");a+=-1!==i?i-1:n.length-1;let s=n.replace(".","").replace(/^0*/,e=>(a-=e.length,"")).replace(/0*$/,"");return s.length>0?{sign:r,digits:s,exponent:a}:{sign:r,digits:"0",exponent:a+1}}function eK(e,t){if(e===t)return 0;let r=eq(e),n=eq(t),a="-"===r.sign?-1:1;return r.sign!==n.sign?"0"===r.digits&&"0"===n.digits?0:a:r.exponent!==n.exponent?r.exponent>n.exponent?a:r.exponent<n.exponent?-a:0:r.digits>n.digits?a:r.digits<n.digits?-a:0}function eY(e){let{start:t,end:r}=eZ(e),n=e.substring(t,r),a=n.indexOf(".");return -1===a?n:n.substring(0,a)+n.substring(a+1)}function eZ(e){let t=0;for("-"===e[0]&&t++;"0"===e[t]||"."===e[t];)t++;let r=e.lastIndexOf("e");for(-1===r&&(r=e.lastIndexOf("E")),-1===r&&(r=e.length);("0"===e[r-1]||"."===e[r-1])&&r>t;)r--;return{start:t,end:r}}class eX{isLosslessNumber=!0;constructor(e){if(!eM(e))throw Error(`Invalid number (value: "${e}")`);this.value=e}valueOf(){let e=eW(this.value);if(void 0===e||e===ez.truncate_float)return Number.parseFloat(this.value);if(eF(this.value))return BigInt(this.value);throw Error(`Cannot safely convert to number: the value '${this.value}' would ${e} and become ${Number.parseFloat(this.value)}`)}toString(){return this.value}}function eJ(e){return e&&"object"==typeof e&&e.isLosslessNumber||!1}function eQ(e){if(function(e){let{start:t,end:r}=eZ(e),n=e.indexOf(".");return -1===n||n<t||n>r?r-t:r-t-1}(String(e))>15)throw Error(`Invalid number: contains more than 15 digits and is most likely truncated and unsafe by itself (value: ${e})`);if(Number.isNaN(e))throw Error("Invalid number: NaN");if(!Number.isFinite(e))throw Error(`Invalid number: ${e}`);return new eX(String(e))}function e0(e,t){return eK(e.value,t.value)}function e1(e){return new eX(e)}function e2(e){return eF(e)?BigInt(e):Number.parseFloat(e)}function e5(e,t,r){let n="function"==typeof r?{parseNumber:r}:r,a=n?.parseNumber??e1,i=n?.onDuplicateKey??function(e){let{key:t,position:r}=e;throw SyntaxError(`Duplicate key '${t}' encountered at position ${r}`)},s=0,o=function t(){c();let r=u()??function(){let t=s;if(e.charCodeAt(s)===tc&&(s++,h(t)),e.charCodeAt(s)===tu)s++;else{var r;if((r=e.charCodeAt(s))>=td&&r<=th)for(s++;e3(e.charCodeAt(s));)s++}if(e.charCodeAt(s)===tp)for(s++,h(t);e3(e.charCodeAt(s));)s++;if(e.charCodeAt(s)===t_||e.charCodeAt(s)===tb)for(s++,(e.charCodeAt(s)===tc||e.charCodeAt(s)===tl)&&s++,h(t);e3(e.charCodeAt(s));)s++;if(s>t)return a(e.slice(t,s))}()??function(){if(e.charCodeAt(s)===e9){s++,c();let r={},n=!0;for(;s<e.length&&e.charCodeAt(s)!==te;){n?n=!1:(d(),c());let a=s,o=u();if(void 0===o)return void function(){throw SyntaxError(`Quoted object key expected ${p()}`)}();c(),function(){if(e.charCodeAt(s)!==tg)throw SyntaxError(`Colon ':' expected after property name ${p()}`);s++}();let l=t();if(void 0===l)return void function(){throw SyntaxError(`Object value expected after ':' ${f()}`)}();if(Object.prototype.hasOwnProperty.call(r,o)&&!function e(t,r){return t===r||(Array.isArray(t)&&Array.isArray(r)?t.length===r.length&&t.every((t,n)=>e(t,r[n])):!!(e8(t)&&e8(r))&&[...new Set([...Object.keys(t),...Object.keys(r)])].every(n=>e(t[n],r[n])))}(l,r[o])){let e=i({key:o,position:a+1,oldValue:r[o],newValue:l});void 0!==e&&(r[o]=e)}else r[o]=l}return e.charCodeAt(s)!==te&&function(){throw SyntaxError(`Quoted object key or end of object '}' expected ${p()}`)}(),s++,r}}()??function(){if(e.charCodeAt(s)===tt){s++,c();let r=[],n=!0;for(;s<e.length&&e.charCodeAt(s)!==tr;){n?n=!1:d();let e=t();(function(e){if(void 0===e)throw SyntaxError(`Array item expected ${p()}`)})(e),r.push(e)}return e.charCodeAt(s)!==tr&&function(){throw SyntaxError(`Array item or end of array ']' expected ${p()}`)}(),s++,r}}()??l("true",!0)??l("false",!1)??l("null",null);return c(),r}();return function(e){if(void 0===e)throw SyntaxError(`JSON value expected ${p()}`)}(o),function(){if(s<e.length)throw SyntaxError(`Expected end of input ${p()}`)}(),t?function e(t,r,n,a){return Array.isArray(n)?a.call(t,r,function(t,r){for(let n=0;n<t.length;n++)t[n]=e(t,String(n),t[n],r);return t}(n,a)):n&&"object"==typeof n&&!eJ(n)?a.call(t,r,function(t,r){for(let n of Object.keys(t)){let a=e(t,n,t[n],r);void 0!==a?t[n]=a:delete t[n]}return t}(n,a)):a.call(t,r,n)}({"":o},"",o,t):o;function l(t,r){if(e.slice(s,s+t.length)===t)return s+=t.length,r}function c(){for(var t;(t=e.charCodeAt(s))===tn||t===ta||t===ti||t===ts;)s++}function u(){if(e.charCodeAt(s)===to){s++;let r="";for(;s<e.length&&e.charCodeAt(s)!==to;){if(e.charCodeAt(s)===e7){let t=e[s+1],n=e4[t];void 0!==n?(r+=n,s++):"u"===t?e6(e.charCodeAt(s+2))&&e6(e.charCodeAt(s+3))&&e6(e.charCodeAt(s+4))&&e6(e.charCodeAt(s+5))?(r+=String.fromCharCode(Number.parseInt(e.slice(s+2,s+6),16)),s+=5):function(t){let r=e.slice(t,t+6);throw SyntaxError(`Invalid unicode character '${r}' ${f()}`)}(s):function(t){let r=e.slice(t,t+2);throw SyntaxError(`Invalid escape character '${r}' ${f()}`)}(s)}else{var t;(t=e.charCodeAt(s))>=32&&t<=1114111?r+=e[s]:function(e){throw SyntaxError(`Invalid character '${e}' ${f()}`)}(e[s])}s++}return function(){if(e.charCodeAt(s)!==to)throw SyntaxError(`End of string '"' expected ${p()}`)}(),s++,r}}function d(){if(e.charCodeAt(s)!==tf)throw SyntaxError(`Comma ',' expected after value ${p()}`);s++}function h(t){if(!e3(e.charCodeAt(s))){let r=e.slice(t,s);throw SyntaxError(`Invalid number '${r}', expecting a digit ${p()}`)}}function f(){return`at position ${s}`}function p(){return`${s<e.length?`but got '${e[s]}'`:"but reached end of input"} ${f()}`}}function e6(e){return e>=tu&&e<=th||e>=tm&&e<=tw||e>=ty&&e<=tE}function e3(e){return e>=tu&&e<=th}function e8(e){return"object"==typeof e&&null!==e}let e4={'"':'"',"\\":"\\","/":"/",b:"\b",f:"\f",n:"\n",r:"\r",t:"	"},e7=92,e9=123,te=125,tt=91,tr=93,tn=32,ta=10,ti=9,ts=13,to=34,tl=43,tc=45,tu=48,td=49,th=57,tf=44,tp=46,tg=58,tm=65,ty=97,tb=69,t_=101,tw=70,tE=102;function tv(e,t){return"string"==typeof t&&tS.test(t)?new Date(t):t}let tS=/^\d{4}-\d{2}-\d{2}T\d{2}:\d{2}:\d{2}\.\d{3}Z$/;function tx(e,t,r,n){var a;let i="number"==typeof(a=r)?" ".repeat(a):"string"==typeof a&&""!==a?a:void 0;return function e(a,s){if(Array.isArray(n)){let e=n.find(e=>e.test(a));if(e){let t=e.stringify(a);if("string"!=typeof t||!eM(t))throw Error(`Invalid JSON number: output of a number stringifier must be a string containing a JSON number (output: ${t})`);return t}}return"boolean"==typeof a||"number"==typeof a||"string"==typeof a||null===a||a instanceof Date||a instanceof Boolean||a instanceof Number||a instanceof String?JSON.stringify(a):a?.isLosslessNumber||"bigint"==typeof a?a.toString():Array.isArray(a)?function(r,n){if(0===r.length)return"[]";let a=i?n+i:void 0,s=i?"[\n":"[";for(let n=0;n<r.length;n++){let o="function"==typeof t?t.call(r,String(n),r[n]):r[n];i&&(s+=a),void 0!==o&&"function"!=typeof o?s+=e(o,a):s+="null",n<r.length-1&&(s+=i?",\n":",")}return s+(i?`
${n}]`:"]")}(a,s):a&&"object"==typeof a?function(n,a){if("function"==typeof n.toJSON)return tx(n.toJSON(),t,r,void 0);let s=Array.isArray(t)?t.map(String):Object.keys(n);if(0===s.length)return"{}";let o=i?a+i:void 0,l=!0,c=i?"{\n":"{";for(let r of s){var u;let a="function"==typeof t?t.call(n,r,n[r]):n[r];if(void 0!==(u=a)&&"function"!=typeof u&&"symbol"!=typeof u){l?l=!1:c+=i?",\n":",";let t=JSON.stringify(r);c+=i?`${o+t}: `:`${t}:`,c+=e(a,o)}}return c+(i?`
${a}}`:"}")}(a,s):void 0}("function"==typeof t?t.call({"":e},"",e):e,"")}e.s([],509208),e.s(["LosslessNumber",()=>eX,"UnsafeNumberReason",()=>ez,"compareLosslessNumber",()=>e0,"compareNumber",()=>eK,"config",()=>eV,"getUnsafeNumberReason",()=>eW,"isInteger",()=>eF,"isLosslessNumber",()=>eJ,"isNumber",()=>eM,"isSafeNumber",()=>ej,"parse",()=>e5,"parseLosslessNumber",()=>e1,"parseNumberAndBigInt",()=>e2,"reviveDate",()=>tv,"splitNumber",()=>eq,"stringify",()=>tx,"toLosslessNumber",()=>eQ,"toSafeNumberOrThrow",()=>eG],798282),e.i(332619),e.i(509208),e.i(798282),e.s(["aInRange",()=>tY,"abool",()=>tB,"abytes",()=>tC,"bitGet",()=>tX,"bitLen",()=>tZ,"bitMask",()=>tQ,"bitSet",()=>tJ,"bytesToHex",()=>tN,"bytesToNumberBE",()=>tV,"bytesToNumberLE",()=>tF,"concatBytes",()=>tz,"createHmacDrbg",()=>t2,"ensureBytes",()=>tj,"equalBytes",()=>tW,"hexToBytes",()=>tU,"hexToNumber",()=>tD,"inRange",()=>tK,"isBytes",()=>tI,"memoized",()=>t8,"notImplemented",()=>t3,"numberToBytesBE",()=>tH,"numberToBytesLE",()=>tM,"numberToHexUnpadded",()=>tP,"numberToVarBytesBE",()=>t$,"utf8ToBytes",()=>tG,"validateObject",()=>t6],405132);let tT=BigInt(0),tA=BigInt(1),tk=BigInt(2);function tI(e){return e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name}function tC(e){if(!tI(e))throw Error("Uint8Array expected")}function tB(e,t){if("boolean"!=typeof t)throw Error(e+" boolean expected, got "+t)}let tO=Array.from({length:256},(e,t)=>t.toString(16).padStart(2,"0"));function tN(e){tC(e);let t="";for(let r=0;r<e.length;r++)t+=tO[e[r]];return t}function tP(e){let t=e.toString(16);return 1&t.length?"0"+t:t}function tD(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);return""===e?tT:BigInt("0x"+e)}let tR={_0:48,_9:57,A:65,F:70,a:97,f:102};function tL(e){return e>=tR._0&&e<=tR._9?e-tR._0:e>=tR.A&&e<=tR.F?e-(tR.A-10):e>=tR.a&&e<=tR.f?e-(tR.a-10):void 0}function tU(e){if("string"!=typeof e)throw Error("hex string expected, got "+typeof e);let t=e.length,r=t/2;if(t%2)throw Error("hex string expected, got unpadded hex of length "+t);let n=new Uint8Array(r);for(let t=0,a=0;t<r;t++,a+=2){let r=tL(e.charCodeAt(a)),i=tL(e.charCodeAt(a+1));if(void 0===r||void 0===i)throw Error('hex string expected, got non-hex character "'+(e[a]+e[a+1])+'" at index '+a);n[t]=16*r+i}return n}function tV(e){return tD(tN(e))}function tF(e){return tC(e),tD(tN(Uint8Array.from(e).reverse()))}function tH(e,t){return tU(e.toString(16).padStart(2*t,"0"))}function tM(e,t){return tH(e,t).reverse()}function t$(e){return tU(tP(e))}function tj(e,t,r){let n;if("string"==typeof t)try{n=tU(t)}catch(t){throw Error(e+" must be hex string or Uint8Array, cause: "+t)}else if(tI(t))n=Uint8Array.from(t);else throw Error(e+" must be hex string or Uint8Array");let a=n.length;if("number"==typeof r&&a!==r)throw Error(e+" of length "+r+" expected, got "+a);return n}function tz(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];tC(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let a=e[t];r.set(a,n),n+=a.length}return r}function tW(e,t){if(e.length!==t.length)return!1;let r=0;for(let n=0;n<e.length;n++)r|=e[n]^t[n];return 0===r}function tG(e){if("string"!=typeof e)throw Error("string expected");return new Uint8Array(new TextEncoder().encode(e))}let tq=e=>"bigint"==typeof e&&tT<=e;function tK(e,t,r){return tq(e)&&tq(t)&&tq(r)&&t<=e&&e<r}function tY(e,t,r,n){if(!tK(t,r,n))throw Error("expected valid "+e+": "+r+" <= n < "+n+", got "+t)}function tZ(e){let t;for(t=0;e>tT;e>>=tA,t+=1);return t}function tX(e,t){return e>>BigInt(t)&tA}function tJ(e,t,r){return e|(r?tA:tT)<<BigInt(t)}let tQ=e=>(tk<<BigInt(e-1))-tA,t0=e=>new Uint8Array(e),t1=e=>Uint8Array.from(e);function t2(e,t,r){if("number"!=typeof e||e<2)throw Error("hashLen must be a number");if("number"!=typeof t||t<2)throw Error("qByteLen must be a number");if("function"!=typeof r)throw Error("hmacFn must be a function");let n=t0(e),a=t0(e),i=0,s=()=>{n.fill(1),a.fill(0),i=0},o=(...e)=>r(a,n,...e),l=(e=t0())=>{a=o(t1([0]),e),n=o(),0!==e.length&&(a=o(t1([1]),e),n=o())},c=()=>{if(i++>=1e3)throw Error("drbg: tried 1000 values");let e=0,r=[];for(;e<t;){let t=(n=o()).slice();r.push(t),e+=n.length}return tz(...r)};return(e,t)=>{let r;for(s(),l(e);!(r=t(c()));)l();return s(),r}}let t5={bigint:e=>"bigint"==typeof e,function:e=>"function"==typeof e,boolean:e=>"boolean"==typeof e,string:e=>"string"==typeof e,stringOrUint8Array:e=>"string"==typeof e||tI(e),isSafeInteger:e=>Number.isSafeInteger(e),array:e=>Array.isArray(e),field:(e,t)=>t.Fp.isValid(e),hash:e=>"function"==typeof e&&Number.isSafeInteger(e.outputLen)};function t6(e,t,r={}){let n=(t,r,n)=>{let a=t5[r];if("function"!=typeof a)throw Error("invalid validator function");let i=e[t];if((!n||void 0!==i)&&!a(i,e))throw Error("param "+String(t)+" is invalid. Expected "+r+", got "+i)};for(let[e,r]of Object.entries(t))n(e,r,!1);for(let[e,t]of Object.entries(r))n(e,t,!0);return e}let t3=()=>{throw Error("not implemented")};function t8(e){let t=new WeakMap;return(r,...n)=>{let a=t.get(r);if(void 0!==a)return a;let i=e(r,...n);return t.set(r,i),i}}function t4(e){if(!Number.isSafeInteger(e)||e<0)throw Error("positive integer expected, got "+e)}function t7(e,...t){if(!(e instanceof Uint8Array||ArrayBuffer.isView(e)&&"Uint8Array"===e.constructor.name))throw Error("Uint8Array expected");if(t.length>0&&!t.includes(e.length))throw Error("Uint8Array expected of length "+t+", got length="+e.length)}function t9(e,t=!0){if(e.destroyed)throw Error("Hash instance has been destroyed");if(t&&e.finished)throw Error("Hash#digest() has already been called")}function re(e,t){t7(e);let r=t.outputLen;if(e.length<r)throw Error("digestInto() expects output buffer of length at least "+r)}var rt=e.i(666680);let rr=rt&&"object"==typeof rt&&"webcrypto"in rt?rt.webcrypto:rt&&"object"==typeof rt&&"randomBytes"in rt?rt:void 0,rn=e=>new DataView(e.buffer,e.byteOffset,e.byteLength),ra=(e,t)=>e<<32-t|e>>>t,ri=68===new Uint8Array(new Uint32Array([0x11223344]).buffer)[0],rs=e=>e<<24&0xff000000|e<<8&0xff0000|e>>>8&65280|e>>>24&255;function ro(e){for(let t=0;t<e.length;t++)e[t]=rs(e[t])}function rl(e){if("string"!=typeof e)throw Error("utf8ToBytes expected string, got "+typeof e);return new Uint8Array(new TextEncoder().encode(e))}function rc(e){return"string"==typeof e&&(e=rl(e)),t7(e),e}class ru{clone(){return this._cloneInto()}}function rd(e){let t=t=>e().update(rc(t)).digest(),r=e();return t.outputLen=r.outputLen,t.blockLen=r.blockLen,t.create=()=>e(),t}function rh(e=32){if(rr&&"function"==typeof rr.getRandomValues)return rr.getRandomValues(new Uint8Array(e));if(rr&&"function"==typeof rr.randomBytes)return rr.randomBytes(e);throw Error("crypto.getRandomValues must be defined")}let rf=(e,t,r)=>e&t^~e&r,rp=(e,t,r)=>e&t^e&r^t&r;class rg extends ru{constructor(e,t,r,n){super(),this.blockLen=e,this.outputLen=t,this.padOffset=r,this.isLE=n,this.finished=!1,this.length=0,this.pos=0,this.destroyed=!1,this.buffer=new Uint8Array(e),this.view=rn(this.buffer)}update(e){t9(this);let{view:t,buffer:r,blockLen:n}=this,a=(e=rc(e)).length;for(let i=0;i<a;){let s=Math.min(n-this.pos,a-i);if(s===n){let t=rn(e);for(;n<=a-i;i+=n)this.process(t,i);continue}r.set(e.subarray(i,i+s),this.pos),this.pos+=s,i+=s,this.pos===n&&(this.process(t,0),this.pos=0)}return this.length+=e.length,this.roundClean(),this}digestInto(e){t9(this),re(e,this),this.finished=!0;let{buffer:t,view:r,blockLen:n,isLE:a}=this,{pos:i}=this;t[i++]=128,this.buffer.subarray(i).fill(0),this.padOffset>n-i&&(this.process(r,0),i=0);for(let e=i;e<n;e++)t[e]=0;!function(e,t,r,n){if("function"==typeof e.setBigUint64)return e.setBigUint64(t,r,n);let a=BigInt(32),i=BigInt(0xffffffff),s=Number(r>>a&i),o=Number(r&i),l=4*!!n,c=4*!n;e.setUint32(t+l,s,n),e.setUint32(t+c,o,n)}(r,n-8,BigInt(8*this.length),a),this.process(r,0);let s=rn(e),o=this.outputLen;if(o%4)throw Error("_sha2: outputLen should be aligned to 32bit");let l=o/4,c=this.get();if(l>c.length)throw Error("_sha2: outputLen bigger than state");for(let e=0;e<l;e++)s.setUint32(4*e,c[e],a)}digest(){let{buffer:e,outputLen:t}=this;this.digestInto(e);let r=e.slice(0,t);return this.destroy(),r}_cloneInto(e){e||(e=new this.constructor),e.set(...this.get());let{blockLen:t,buffer:r,length:n,finished:a,destroyed:i,pos:s}=this;return e.length=n,e.pos=s,e.finished=a,e.destroyed=i,n%t&&e.buffer.set(r),e}}let rm=new Uint32Array([0x428a2f98,0x71374491,0xb5c0fbcf,0xe9b5dba5,0x3956c25b,0x59f111f1,0x923f82a4,0xab1c5ed5,0xd807aa98,0x12835b01,0x243185be,0x550c7dc3,0x72be5d74,0x80deb1fe,0x9bdc06a7,0xc19bf174,0xe49b69c1,0xefbe4786,0xfc19dc6,0x240ca1cc,0x2de92c6f,0x4a7484aa,0x5cb0a9dc,0x76f988da,0x983e5152,0xa831c66d,0xb00327c8,0xbf597fc7,0xc6e00bf3,0xd5a79147,0x6ca6351,0x14292967,0x27b70a85,0x2e1b2138,0x4d2c6dfc,0x53380d13,0x650a7354,0x766a0abb,0x81c2c92e,0x92722c85,0xa2bfe8a1,0xa81a664b,0xc24b8b70,0xc76c51a3,0xd192e819,0xd6990624,0xf40e3585,0x106aa070,0x19a4c116,0x1e376c08,0x2748774c,0x34b0bcb5,0x391c0cb3,0x4ed8aa4a,0x5b9cca4f,0x682e6ff3,0x748f82ee,0x78a5636f,0x84c87814,0x8cc70208,0x90befffa,0xa4506ceb,0xbef9a3f7,0xc67178f2]),ry=new Uint32Array([0x6a09e667,0xbb67ae85,0x3c6ef372,0xa54ff53a,0x510e527f,0x9b05688c,0x1f83d9ab,0x5be0cd19]),rb=new Uint32Array(64);class r_ extends rg{constructor(){super(64,32,8,!1),this.A=0|ry[0],this.B=0|ry[1],this.C=0|ry[2],this.D=0|ry[3],this.E=0|ry[4],this.F=0|ry[5],this.G=0|ry[6],this.H=0|ry[7]}get(){let{A:e,B:t,C:r,D:n,E:a,F:i,G:s,H:o}=this;return[e,t,r,n,a,i,s,o]}set(e,t,r,n,a,i,s,o){this.A=0|e,this.B=0|t,this.C=0|r,this.D=0|n,this.E=0|a,this.F=0|i,this.G=0|s,this.H=0|o}process(e,t){for(let r=0;r<16;r++,t+=4)rb[r]=e.getUint32(t,!1);for(let e=16;e<64;e++){let t=rb[e-15],r=rb[e-2],n=ra(t,7)^ra(t,18)^t>>>3,a=ra(r,17)^ra(r,19)^r>>>10;rb[e]=a+rb[e-7]+n+rb[e-16]|0}let{A:r,B:n,C:a,D:i,E:s,F:o,G:l,H:c}=this;for(let e=0;e<64;e++){let t=c+(ra(s,6)^ra(s,11)^ra(s,25))+rf(s,o,l)+rm[e]+rb[e]|0,u=(ra(r,2)^ra(r,13)^ra(r,22))+rp(r,n,a)|0;c=l,l=o,o=s,s=i+t|0,i=a,a=n,n=r,r=t+u|0}r=r+this.A|0,n=n+this.B|0,a=a+this.C|0,i=i+this.D|0,s=s+this.E|0,o=o+this.F|0,l=l+this.G|0,c=c+this.H|0,this.set(r,n,a,i,s,o,l,c)}roundClean(){rb.fill(0)}destroy(){this.set(0,0,0,0,0,0,0,0),this.buffer.fill(0)}}let rw=rd(()=>new r_);e.s(["CURVE",()=>nD,"Fp251",()=>n2,"MAX_VALUE",()=>nE,"ProjectivePoint",()=>nR,"Signature",()=>nL,"_poseidonMDS",()=>n6,"_starkCurve",()=>nT,"computeHashOnElements",()=>nJ,"ethSigToPrivate",()=>n$,"getAccountPath",()=>nW,"getPublicKey",()=>nI,"getSharedSecret",()=>nC,"getStarkKey",()=>nM,"grindKey",()=>nH,"keccak",()=>n0,"normalizePrivateKey",()=>nk,"pedersen",()=>nX,"poseidonBasic",()=>n3,"poseidonCreate",()=>n8,"poseidonHash",()=>n7,"poseidonHashFunc",()=>n9,"poseidonHashMany",()=>at,"poseidonHashSingle",()=>ae,"poseidonSmall",()=>n4,"sign",()=>nN,"utils",()=>nU,"verify",()=>nP],976656);let rE=BigInt(0x100000000-1),rv=BigInt(32),rS=[],rx=[],rT=[],rA=BigInt(0),rk=BigInt(1),rI=BigInt(2),rC=BigInt(7),rB=BigInt(256),rO=BigInt(113);for(let e=0,t=rk,r=1,n=0;e<24;e++){[r,n]=[n,(2*r+3*n)%5],rS.push(2*(5*n+r)),rx.push((e+1)*(e+2)/2%64);let a=rA;for(let e=0;e<7;e++)(t=(t<<rk^(t>>rC)*rO)%rB)&rI&&(a^=rk<<(rk<<BigInt(e))-rk);rT.push(a)}let[rN,rP]=function(e,t=!1){let r=new Uint32Array(e.length),n=new Uint32Array(e.length);for(let a=0;a<e.length;a++){let{h:i,l:s}=function(e,t=!1){return t?{h:Number(e&rE),l:Number(e>>rv&rE)}:{h:0|Number(e>>rv&rE),l:0|Number(e&rE)}}(e[a],t);[r[a],n[a]]=[i,s]}return[r,n]}(rT,!0),rD=(e,t,r)=>r>32?((e,t,r)=>t<<r-32|e>>>64-r)(e,t,r):((e,t,r)=>e<<r|t>>>32-r)(e,t,r),rR=(e,t,r)=>r>32?((e,t,r)=>e<<r-32|t>>>64-r)(e,t,r):((e,t,r)=>t<<r|e>>>32-r)(e,t,r);class rL extends ru{constructor(e,t,r,n=!1,a=24){if(super(),this.blockLen=e,this.suffix=t,this.outputLen=r,this.enableXOF=n,this.rounds=a,this.pos=0,this.posOut=0,this.finished=!1,this.destroyed=!1,t4(r),0>=this.blockLen||this.blockLen>=200)throw Error("Sha3 supports only keccak-f1600 function");this.state=new Uint8Array(200),this.state32=(e=>new Uint32Array(e.buffer,e.byteOffset,Math.floor(e.byteLength/4)))(this.state)}keccak(){ri||ro(this.state32),function(e,t=24){let r=new Uint32Array(10);for(let n=24-t;n<24;n++){for(let t=0;t<10;t++)r[t]=e[t]^e[t+10]^e[t+20]^e[t+30]^e[t+40];for(let t=0;t<10;t+=2){let n=(t+8)%10,a=(t+2)%10,i=r[a],s=r[a+1],o=rD(i,s,1)^r[n],l=rR(i,s,1)^r[n+1];for(let r=0;r<50;r+=10)e[t+r]^=o,e[t+r+1]^=l}let t=e[2],a=e[3];for(let r=0;r<24;r++){let n=rx[r],i=rD(t,a,n),s=rR(t,a,n),o=rS[r];t=e[o],a=e[o+1],e[o]=i,e[o+1]=s}for(let t=0;t<50;t+=10){for(let n=0;n<10;n++)r[n]=e[t+n];for(let n=0;n<10;n++)e[t+n]^=~r[(n+2)%10]&r[(n+4)%10]}e[0]^=rN[n],e[1]^=rP[n]}r.fill(0)}(this.state32,this.rounds),ri||ro(this.state32),this.posOut=0,this.pos=0}update(e){t9(this);let{blockLen:t,state:r}=this,n=(e=rc(e)).length;for(let a=0;a<n;){let i=Math.min(t-this.pos,n-a);for(let t=0;t<i;t++)r[this.pos++]^=e[a++];this.pos===t&&this.keccak()}return this}finish(){if(this.finished)return;this.finished=!0;let{state:e,suffix:t,pos:r,blockLen:n}=this;e[r]^=t,(128&t)!=0&&r===n-1&&this.keccak(),e[n-1]^=128,this.keccak()}writeInto(e){t9(this,!1),t7(e),this.finish();let t=this.state,{blockLen:r}=this;for(let n=0,a=e.length;n<a;){this.posOut>=r&&this.keccak();let i=Math.min(r-this.posOut,a-n);e.set(t.subarray(this.posOut,this.posOut+i),n),this.posOut+=i,n+=i}return e}xofInto(e){if(!this.enableXOF)throw Error("XOF is not possible for this instance");return this.writeInto(e)}xof(e){return t4(e),this.xofInto(new Uint8Array(e))}digestInto(e){if(re(e,this),this.finished)throw Error("digest() was already called");return this.writeInto(e),this.destroy(),e}digest(){return this.digestInto(new Uint8Array(this.outputLen))}destroy(){this.destroyed=!0,this.state.fill(0)}_cloneInto(e){let{blockLen:t,suffix:r,outputLen:n,rounds:a,enableXOF:i}=this;return e||(e=new rL(t,r,n,i,a)),e.state32.set(this.state32),e.pos=this.pos,e.posOut=this.posOut,e.finished=this.finished,e.rounds=a,e.suffix=r,e.outputLen=n,e.enableXOF=i,e.destroyed=this.destroyed,e}}let rU=rd(()=>new rL(136,1,32)),rV=BigInt(0),rF=BigInt(1),rH=BigInt(2),rM=BigInt(3),r$=BigInt(4),rj=BigInt(5),rz=BigInt(8);function rW(e,t){let r=e%t;return r>=rV?r:t+r}function rG(e,t,r){let n=e;for(;t-- >rV;)n*=n,n%=r;return n}function rq(e,t){if(e===rV)throw Error("invert: expected non-zero number");if(t<=rV)throw Error("invert: expected positive modulus, got "+t);let r=rW(e,t),n=t,a=rV,i=rF,s=rF,o=rV;for(;r!==rV;){let e=n/r,t=n%r,l=a-s*e,c=i-o*e;n=r,r=t,a=s,i=o,s=l,o=c}if(n!==rF)throw Error("invert: does not exist");return rW(a,t)}let rK=["create","isValid","is0","neg","inv","sqrt","sqr","eql","add","sub","mul","pow","div","addN","subN","mulN","sqrN"];function rY(e){return t6(e,rK.reduce((e,t)=>(e[t]="function",e),{ORDER:"bigint",MASK:"bigint",BYTES:"isSafeInteger",BITS:"isSafeInteger"}))}function rZ(e,t,r){if(r<rV)throw Error("invalid exponent, negatives unsupported");if(r===rV)return e.ONE;if(r===rF)return t;let n=e.ONE,a=t;for(;r>rV;)r&rF&&(n=e.mul(n,a)),a=e.sqr(a),r>>=rF;return n}function rX(e,t){let r=void 0!==t?t:e.toString(2).length,n=Math.ceil(r/8);return{nBitLength:r,nByteLength:n}}function rJ(e,t,r=!1,n={}){let a;if(e<=rV)throw Error("invalid field: expected ORDER > 0, got "+e);let{nBitLength:i,nByteLength:s}=rX(e,t);if(s>2048)throw Error("invalid field: expected ORDER of <= 2048 bytes");let o=Object.freeze({ORDER:e,BITS:i,BYTES:s,MASK:tQ(i),ZERO:rV,ONE:rF,create:t=>rW(t,e),isValid:t=>{if("bigint"!=typeof t)throw Error("invalid field element: expected bigint, got "+typeof t);return rV<=t&&t<e},is0:e=>e===rV,isOdd:e=>(e&rF)===rF,neg:t=>rW(-t,e),eql:(e,t)=>e===t,sqr:t=>rW(t*t,e),add:(t,r)=>rW(t+r,e),sub:(t,r)=>rW(t-r,e),mul:(t,r)=>rW(t*r,e),pow:(e,t)=>rZ(o,e,t),div:(t,r)=>rW(t*rq(r,e),e),sqrN:e=>e*e,addN:(e,t)=>e+t,subN:(e,t)=>e-t,mulN:(e,t)=>e*t,inv:t=>rq(t,e),sqrt:n.sqrt||(t=>(a||(a=function(e){if(e%r$===rM){let t=(e+rF)/r$;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}if(e%rz===rj){let t=(e-rj)/rz;return function(e,r){let n=e.mul(r,rH),a=e.pow(n,t),i=e.mul(r,a),s=e.mul(e.mul(i,rH),a),o=e.mul(i,e.sub(s,e.ONE));if(!e.eql(e.sqr(o),r))throw Error("Cannot find square root");return o}}return function(e){let t,r,n,a=(e-rF)/rH;for(t=e-rF,r=0;t%rH===rV;t/=rH,r++);for(n=rH;n<e&&function(e,t,r){if(t<rV)throw Error("invalid exponent, negatives unsupported");if(r<=rV)throw Error("invalid modulus");if(r===rF)return rV;let n=rF;for(;t>rV;)t&rF&&(n=n*e%r),e=e*e%r,t>>=rF;return n}(n,a,e)!==e-rF;n++)if(n>1e3)throw Error("Cannot find square root: likely non-prime P");if(1===r){let t=(e+rF)/r$;return function(e,r){let n=e.pow(r,t);if(!e.eql(e.sqr(n),r))throw Error("Cannot find square root");return n}}let i=(t+rF)/rH;return function(e,s){if(e.pow(s,a)===e.neg(e.ONE))throw Error("Cannot find square root");let o=r,l=e.pow(e.mul(e.ONE,n),t),c=e.pow(s,i),u=e.pow(s,t);for(;!e.eql(u,e.ONE);){if(e.eql(u,e.ZERO))return e.ZERO;let t=1;for(let r=e.sqr(u);t<o&&!e.eql(r,e.ONE);t++)r=e.sqr(r);let r=e.pow(l,rF<<BigInt(o-t-1));l=e.sqr(r),c=e.mul(c,r),u=e.mul(u,l),o=t}return c}}(e)}(e)),a(o,t))),invertBatch:e=>(function(e,t){let r=Array(t.length),n=t.reduce((t,n,a)=>e.is0(n)?t:(r[a]=t,e.mul(t,n)),e.ONE),a=e.inv(n);return t.reduceRight((t,n,a)=>e.is0(n)?t:(r[a]=e.mul(t,r[a]),e.mul(t,n)),a),r})(o,e),cmov:(e,t,r)=>r?t:e,toBytes:e=>r?tM(e,s):tH(e,s),fromBytes:e=>{if(e.length!==s)throw Error("Field.fromBytes: expected "+s+" bytes, got "+e.length);return r?tF(e):tV(e)}});return Object.freeze(o)}function rQ(e){if("bigint"!=typeof e)throw Error("field order must be bigint");return Math.ceil(e.toString(2).length/8)}function r0(e){let t=rQ(e);return t+Math.ceil(t/2)}function r1(e){let{Fp:t,mds:r,reversePartialPowIdx:n,roundConstants:a}=e,{roundsFull:i,roundsPartial:s,sboxPower:o,t:l}=e;for(let r of(rY(t),["t","roundsFull","roundsPartial"]))if("number"!=typeof e[r]||!Number.isSafeInteger(e[r]))throw Error("invalid number "+r);if(!Array.isArray(r)||r.length!==l)throw Error("Poseidon: invalid MDS matrix");let c=r.map(e=>{if(!Array.isArray(e)||e.length!==l)throw Error("invalid MDS matrix row: "+e);return e.map(e=>{if("bigint"!=typeof e)throw Error("invalid MDS matrix bigint: "+e);return t.create(e)})});if(void 0!==n&&"boolean"!=typeof n)throw Error("invalid param reversePartialPowIdx="+n);if(1&i)throw Error("roundsFull is not even"+i);let u=i+s;if(!Array.isArray(a)||a.length!==u)throw Error("Poseidon: invalid round constants");let d=a.map(e=>{if(!Array.isArray(e)||e.length!==l)throw Error("invalid round constants");return e.map(e=>{if("bigint"!=typeof e||!t.isValid(e))throw Error("invalid round constant");return t.create(e)})});if(!o||![3,5,7].includes(o))throw Error("invalid sboxPower");let h=BigInt(o),f=e=>rZ(t,e,h);return 3===o?f=e=>t.mul(t.sqrN(e),e):5===o&&(f=e=>t.mul(t.sqrN(t.sqrN(e)),e)),Object.freeze({...e,rounds:u,sboxFn:f,roundConstants:d,mds:c})}function r2(e,t){if("number"!=typeof t)throw Error("poseidonSplitConstants: invalid t");if(!Array.isArray(e)||e.length%t)throw Error("poseidonSplitConstants: invalid rc");let r=[],n=[];for(let a=0;a<e.length;a++)n.push(e[a]),n.length===t&&(r.push(n),n=[]);return r}function r5(e){let t=r1(e),{Fp:r,mds:n,roundConstants:a,rounds:i,roundsPartial:s,sboxFn:o,t:l}=t,c=t.roundsFull/2,u=t.reversePartialPowIdx?l-1:0,d=(e,t,i)=>(e=e.map((e,t)=>r.add(e,a[i][t])),t?e=e.map(e=>o(e)):e[u]=o(e[u]),e=n.map(t=>t.reduce((t,n,a)=>r.add(t,r.mulN(n,e[a])),r.ZERO))),h=function(e){if(!Array.isArray(e)||e.length!==l)throw Error("invalid values, expected array of bigints with length "+l);e=e.map(e=>{if("bigint"!=typeof e)throw Error("invalid bigint="+e);return r.create(e)});let t=0;for(let r=0;r<c;r++)e=d(e,!0,t++);for(let r=0;r<s;r++)e=d(e,!1,t++);for(let r=0;r<c;r++)e=d(e,!0,t++);if(t!==i)throw Error("invalid number of rounds");return e};return h.roundConstants=a,h}e.s(["poseidon",()=>r5,"splitConstants",()=>r2,"validateOpts",()=>r1],935360),e.s(["DER",()=>no,"SWUFpSqrtRatio",()=>ng,"mapToCurveSimpleSWU",()=>nm,"weierstrass",()=>np,"weierstrassPoints",()=>nf],274772);let r6=BigInt(0),r3=BigInt(1);function r8(e,t){let r=t.negate();return e?r:t}function r4(e,t){if(!Number.isSafeInteger(e)||e<=0||e>t)throw Error("invalid window size, expected [1.."+t+"], got W="+e)}function r7(e,t){return r4(e,t),{windows:Math.ceil(t/e)+1,windowSize:2**(e-1)}}let r9=new WeakMap,ne=new WeakMap;function nt(e){return ne.get(e)||1}function nr(e){return rY(e.Fp),t6(e,{n:"bigint",h:"bigint",Gx:"field",Gy:"field"},{nBitLength:"isSafeInteger",nByteLength:"isSafeInteger"}),Object.freeze({...rX(e.n,e.nBitLength),...e,...{p:e.Fp.ORDER}})}var nn=e.i(405132);function na(e){void 0!==e.lowS&&tB("lowS",e.lowS),void 0!==e.prehash&&tB("prehash",e.prehash)}let{bytesToNumberBE:ni,hexToBytes:ns}=nn,no={Err:class extends Error{constructor(e=""){super(e)}},_tlv:{encode:(e,t)=>{let{Err:r}=no;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(1&t.length)throw new r("tlv.encode: unpadded data");let n=t.length/2,a=nn.numberToHexUnpadded(n);if(a.length/2&128)throw new r("tlv.encode: long form length too big");let i=n>127?nn.numberToHexUnpadded(a.length/2|128):"";return nn.numberToHexUnpadded(e)+i+a+t},decode(e,t){let{Err:r}=no,n=0;if(e<0||e>256)throw new r("tlv.encode: wrong tag");if(t.length<2||t[n++]!==e)throw new r("tlv.decode: wrong tlv");let a=t[n++],i=0;if(128&a){let e=127&a;if(!e)throw new r("tlv.decode(long): indefinite length not supported");if(e>4)throw new r("tlv.decode(long): byte length is too big");let s=t.subarray(n,n+e);if(s.length!==e)throw new r("tlv.decode: length bytes not complete");if(0===s[0])throw new r("tlv.decode(long): zero leftmost byte");for(let e of s)i=i<<8|e;if(n+=e,i<128)throw new r("tlv.decode(long): not minimal encoding")}else i=a;let s=t.subarray(n,n+i);if(s.length!==i)throw new r("tlv.decode: wrong value length");return{v:s,l:t.subarray(n+i)}}},_int:{encode(e){let{Err:t}=no;if(e<nl)throw new t("integer: negative integers are not allowed");let r=nn.numberToHexUnpadded(e);if(8&Number.parseInt(r[0],16)&&(r="00"+r),1&r.length)throw new t("unexpected DER parsing assertion: unpadded hex");return r},decode(e){let{Err:t}=no;if(128&e[0])throw new t("invalid signature integer: negative");if(0===e[0]&&!(128&e[1]))throw new t("invalid signature integer: unnecessary leading zero");return ni(e)}},toSig(e){let{Err:t,_int:r,_tlv:n}=no,a="string"==typeof e?ns(e):e;nn.abytes(a);let{v:i,l:s}=n.decode(48,a);if(s.length)throw new t("invalid signature: left bytes after parsing");let{v:o,l:l}=n.decode(2,i),{v:c,l:u}=n.decode(2,l);if(u.length)throw new t("invalid signature: left bytes after parsing");return{r:r.decode(o),s:r.decode(c)}},hexFromSig(e){let{_tlv:t,_int:r}=no,n=t.encode(2,r.encode(e.r)),a=t.encode(2,r.encode(e.s));return t.encode(48,n+a)}},nl=BigInt(0),nc=BigInt(1),nu=BigInt(2),nd=BigInt(3),nh=BigInt(4);function nf(e){var t;let r=function(e){let t=nr(e);nn.validateObject(t,{a:"field",b:"field"},{allowedPrivateKeyLengths:"array",wrapPrivateKey:"boolean",isTorsionFree:"function",clearCofactor:"function",allowInfinityPoint:"boolean",fromBytes:"function",toBytes:"function"});let{endo:r,Fp:n,a}=t;if(r){if(!n.eql(a,n.ZERO))throw Error("invalid endomorphism, can only be defined for Koblitz curves that have a=0");if("object"!=typeof r||"bigint"!=typeof r.beta||"function"!=typeof r.splitScalar)throw Error("invalid endomorphism, expected beta: bigint and splitScalar: function")}return Object.freeze({...t})}(e),{Fp:n}=r,a=rJ(r.n,r.nBitLength),i=r.toBytes||((e,t,r)=>{let a=t.toAffine();return nn.concatBytes(Uint8Array.from([4]),n.toBytes(a.x),n.toBytes(a.y))}),s=r.fromBytes||(e=>{let t=e.subarray(1);return{x:n.fromBytes(t.subarray(0,n.BYTES)),y:n.fromBytes(t.subarray(n.BYTES,2*n.BYTES))}});function o(e){let{a:t,b:a}=r,i=n.sqr(e),s=n.mul(i,e);return n.add(n.add(s,n.mul(e,t)),a)}if(!n.eql(n.sqr(r.Gy),o(r.Gx)))throw Error("bad generator point: equation left != right");function l(e){let t,{allowedPrivateKeyLengths:n,nByteLength:a,wrapPrivateKey:i,n:s}=r;if(n&&"bigint"!=typeof e){if(nn.isBytes(e)&&(e=nn.bytesToHex(e)),"string"!=typeof e||!n.includes(e.length))throw Error("invalid private key");e=e.padStart(2*a,"0")}try{t="bigint"==typeof e?e:nn.bytesToNumberBE(tj("private key",e,a))}catch(t){throw Error("invalid private key, expected hex or "+a+" bytes, got "+typeof e)}return i&&(t=rW(t,s)),nn.aInRange("private key",t,nc,s),t}function c(e){if(!(e instanceof h))throw Error("ProjectivePoint expected")}let u=t8((e,t)=>{let{px:r,py:a,pz:i}=e;if(n.eql(i,n.ONE))return{x:r,y:a};let s=e.is0();null==t&&(t=s?n.ONE:n.inv(i));let o=n.mul(r,t),l=n.mul(a,t),c=n.mul(i,t);if(s)return{x:n.ZERO,y:n.ZERO};if(!n.eql(c,n.ONE))throw Error("invZ was invalid");return{x:o,y:l}}),d=t8(e=>{if(e.is0()){if(r.allowInfinityPoint&&!n.is0(e.py))return;throw Error("bad point: ZERO")}let{x:t,y:a}=e.toAffine();if(!n.isValid(t)||!n.isValid(a))throw Error("bad point: x or y not FE");let i=n.sqr(a),s=o(t);if(!n.eql(i,s))throw Error("bad point: equation left != right");if(!e.isTorsionFree())throw Error("bad point: not in prime-order subgroup");return!0});class h{constructor(e,t,r){if(this.px=e,this.py=t,this.pz=r,null==e||!n.isValid(e))throw Error("x required");if(null==t||!n.isValid(t))throw Error("y required");if(null==r||!n.isValid(r))throw Error("z required");Object.freeze(this)}static fromAffine(e){let{x:t,y:r}=e||{};if(!e||!n.isValid(t)||!n.isValid(r))throw Error("invalid affine point");if(e instanceof h)throw Error("projective point not allowed");let a=e=>n.eql(e,n.ZERO);return a(t)&&a(r)?h.ZERO:new h(t,r,n.ONE)}get x(){return this.toAffine().x}get y(){return this.toAffine().y}static normalizeZ(e){let t=n.invertBatch(e.map(e=>e.pz));return e.map((e,r)=>e.toAffine(t[r])).map(h.fromAffine)}static fromHex(e){let t=h.fromAffine(s(tj("pointHex",e)));return t.assertValidity(),t}static fromPrivateKey(e){return h.BASE.multiply(l(e))}static msm(e,t){return function(e,t,r,n){if(!Array.isArray(r))throw Error("array expected");r.forEach((t,r)=>{if(!(t instanceof e))throw Error("invalid point at index "+r)});if(!Array.isArray(n))throw Error("array of scalars expected");if(n.forEach((e,r)=>{if(!t.isValid(e))throw Error("invalid scalar at index "+r)}),r.length!==n.length)throw Error("arrays of points and scalars must have equal length");let a=e.ZERO,i=tZ(BigInt(r.length)),s=i>12?i-3:i>4?i-2:i?2:1,o=(1<<s)-1,l=Array(o+1).fill(a),c=Math.floor((t.BITS-1)/s)*s,u=a;for(let e=c;e>=0;e-=s){l.fill(a);for(let t=0;t<n.length;t++){let a=Number(n[t]>>BigInt(e)&BigInt(o));l[a]=l[a].add(r[t])}let t=a;for(let e=l.length-1,r=a;e>0;e--)r=r.add(l[e]),t=t.add(r);if(u=u.add(t),0!==e)for(let e=0;e<s;e++)u=u.double()}return u}(h,a,e,t)}_setWindowSize(e){p.setWindowSize(this,e)}assertValidity(){d(this)}hasEvenY(){let{y:e}=this.toAffine();if(n.isOdd)return!n.isOdd(e);throw Error("Field doesn't support isOdd")}equals(e){c(e);let{px:t,py:r,pz:a}=this,{px:i,py:s,pz:o}=e,l=n.eql(n.mul(t,o),n.mul(i,a)),u=n.eql(n.mul(r,o),n.mul(s,a));return l&&u}negate(){return new h(this.px,n.neg(this.py),this.pz)}double(){let{a:e,b:t}=r,a=n.mul(t,nd),{px:i,py:s,pz:o}=this,l=n.ZERO,c=n.ZERO,u=n.ZERO,d=n.mul(i,i),f=n.mul(s,s),p=n.mul(o,o),g=n.mul(i,s);return g=n.add(g,g),u=n.mul(i,o),u=n.add(u,u),l=n.mul(e,u),c=n.mul(a,p),c=n.add(l,c),l=n.sub(f,c),c=n.add(f,c),c=n.mul(l,c),l=n.mul(g,l),u=n.mul(a,u),p=n.mul(e,p),g=n.sub(d,p),g=n.mul(e,g),g=n.add(g,u),u=n.add(d,d),d=n.add(u,d),d=n.add(d,p),d=n.mul(d,g),c=n.add(c,d),p=n.mul(s,o),p=n.add(p,p),d=n.mul(p,g),l=n.sub(l,d),u=n.mul(p,f),u=n.add(u,u),new h(l,c,u=n.add(u,u))}add(e){c(e);let{px:t,py:a,pz:i}=this,{px:s,py:o,pz:l}=e,u=n.ZERO,d=n.ZERO,f=n.ZERO,p=r.a,g=n.mul(r.b,nd),m=n.mul(t,s),y=n.mul(a,o),b=n.mul(i,l),_=n.add(t,a),w=n.add(s,o);_=n.mul(_,w),w=n.add(m,y),_=n.sub(_,w),w=n.add(t,i);let E=n.add(s,l);return w=n.mul(w,E),E=n.add(m,b),w=n.sub(w,E),E=n.add(a,i),u=n.add(o,l),E=n.mul(E,u),u=n.add(y,b),E=n.sub(E,u),f=n.mul(p,w),u=n.mul(g,b),f=n.add(u,f),u=n.sub(y,f),f=n.add(y,f),d=n.mul(u,f),y=n.add(m,m),y=n.add(y,m),b=n.mul(p,b),w=n.mul(g,w),y=n.add(y,b),b=n.sub(m,b),b=n.mul(p,b),w=n.add(w,b),m=n.mul(y,w),d=n.add(d,m),m=n.mul(E,w),u=n.mul(_,u),u=n.sub(u,m),m=n.mul(_,y),f=n.mul(E,f),new h(u,d,f=n.add(f,m))}subtract(e){return this.add(e.negate())}is0(){return this.equals(h.ZERO)}wNAF(e){return p.wNAFCached(this,e,h.normalizeZ)}multiplyUnsafe(e){let{endo:t,n:a}=r;nn.aInRange("scalar",e,nl,a);let i=h.ZERO;if(e===nl)return i;if(this.is0()||e===nc)return this;if(!t||p.hasPrecomputes(this))return p.wNAFCachedUnsafe(this,e,h.normalizeZ);let{k1neg:s,k1:o,k2neg:l,k2:c}=t.splitScalar(e),u=i,d=i,f=this;for(;o>nl||c>nl;)o&nc&&(u=u.add(f)),c&nc&&(d=d.add(f)),f=f.double(),o>>=nc,c>>=nc;return s&&(u=u.negate()),l&&(d=d.negate()),d=new h(n.mul(d.px,t.beta),d.py,d.pz),u.add(d)}multiply(e){let t,a,{endo:i,n:s}=r;if(nn.aInRange("scalar",e,nc,s),i){let{k1neg:r,k1:s,k2neg:o,k2:l}=i.splitScalar(e),{p:c,f:u}=this.wNAF(s),{p:d,f:f}=this.wNAF(l);c=p.constTimeNegate(r,c),d=p.constTimeNegate(o,d),d=new h(n.mul(d.px,i.beta),d.py,d.pz),t=c.add(d),a=u.add(f)}else{let{p:r,f:n}=this.wNAF(e);t=r,a=n}return h.normalizeZ([t,a])[0]}multiplyAndAddUnsafe(e,t,r){let n=h.BASE,a=(e,t)=>t!==nl&&t!==nc&&e.equals(n)?e.multiply(t):e.multiplyUnsafe(t),i=a(this,t).add(a(e,r));return i.is0()?void 0:i}toAffine(e){return u(this,e)}isTorsionFree(){let{h:e,isTorsionFree:t}=r;if(e===nc)return!0;if(t)return t(h,this);throw Error("isTorsionFree() has not been declared for the elliptic curve")}clearCofactor(){let{h:e,clearCofactor:t}=r;return e===nc?this:t?t(h,this):this.multiplyUnsafe(r.h)}toRawBytes(e=!0){return tB("isCompressed",e),this.assertValidity(),i(h,this,e)}toHex(e=!0){return tB("isCompressed",e),nn.bytesToHex(this.toRawBytes(e))}}h.BASE=new h(r.Gx,r.Gy,n.ONE),h.ZERO=new h(n.ZERO,n.ONE,n.ZERO);let f=r.nBitLength,p=(t=r.endo?Math.ceil(f/2):f,{constTimeNegate:r8,hasPrecomputes:e=>1!==nt(e),unsafeLadder(e,t,r=h.ZERO){let n=e;for(;t>r6;)t&r3&&(r=r.add(n)),n=n.double(),t>>=r3;return r},precomputeWindow(e,r){let{windows:n,windowSize:a}=r7(r,t),i=[],s=e,o=s;for(let e=0;e<n;e++){o=s,i.push(o);for(let e=1;e<a;e++)o=o.add(s),i.push(o);s=o.double()}return i},wNAF(e,r,n){let{windows:a,windowSize:i}=r7(e,t),s=h.ZERO,o=h.BASE,l=BigInt(2**e-1),c=2**e,u=BigInt(e);for(let e=0;e<a;e++){let t=e*i,a=Number(n&l);n>>=u,a>i&&(a-=c,n+=r3);let d=t+Math.abs(a)-1,h=e%2!=0,f=a<0;0===a?o=o.add(r8(h,r[t])):s=s.add(r8(f,r[d]))}return{p:s,f:o}},wNAFUnsafe(e,r,n,a=h.ZERO){let{windows:i,windowSize:s}=r7(e,t),o=BigInt(2**e-1),l=2**e,c=BigInt(e);for(let e=0;e<i;e++){let t=e*s;if(n===r6)break;let i=Number(n&o);if(n>>=c,i>s&&(i-=l,n+=r3),0===i)continue;let u=r[t+Math.abs(i)-1];i<0&&(u=u.negate()),a=a.add(u)}return a},getPrecomputes(e,t,r){let n=r9.get(t);return n||(n=this.precomputeWindow(t,e),1!==e&&r9.set(t,r(n))),n},wNAFCached(e,t,r){let n=nt(e);return this.wNAF(n,this.getPrecomputes(n,e,r),t)},wNAFCachedUnsafe(e,t,r,n){let a=nt(e);return 1===a?this.unsafeLadder(e,t,n):this.wNAFUnsafe(a,this.getPrecomputes(a,e,r),t,n)},setWindowSize(e,r){r4(r,t),ne.set(e,r),r9.delete(e)}});return{CURVE:r,ProjectivePoint:h,normPrivateKeyToScalar:l,weierstrassEquation:o,isWithinCurveOrder:function(e){return nn.inRange(e,nc,r.n)}}}function np(e){let t=function(e){let t=nr(e);return nn.validateObject(t,{hash:"hash",hmac:"function",randomBytes:"function"},{bits2int:"function",bits2int_modN:"function",lowS:"boolean"}),Object.freeze({lowS:!0,...t})}(e),{Fp:r,n:n}=t,a=r.BYTES+1,i=2*r.BYTES+1;function s(e){return rW(e,n)}let{ProjectivePoint:o,normPrivateKeyToScalar:l,weierstrassEquation:c,isWithinCurveOrder:u}=nf({...t,toBytes(e,t,n){let a=t.toAffine(),i=r.toBytes(a.x),s=nn.concatBytes;return(tB("isCompressed",n),n)?s(Uint8Array.from([t.hasEvenY()?2:3]),i):s(Uint8Array.from([4]),i,r.toBytes(a.y))},fromBytes(e){let t=e.length,n=e[0],s=e.subarray(1);if(t===a&&(2===n||3===n)){let e,t=nn.bytesToNumberBE(s);if(!nn.inRange(t,nc,r.ORDER))throw Error("Point is not on curve");let a=c(t);try{e=r.sqrt(a)}catch(e){throw Error("Point is not on curve"+(e instanceof Error?": "+e.message:""))}return(1&n)==1!=((e&nc)===nc)&&(e=r.neg(e)),{x:t,y:e}}if(t===i&&4===n)return{x:r.fromBytes(s.subarray(0,r.BYTES)),y:r.fromBytes(s.subarray(r.BYTES,2*r.BYTES))};throw Error("invalid Point, expected length of "+a+", or uncompressed "+i+", got "+t)}}),d=e=>nn.bytesToHex(nn.numberToBytesBE(e,t.nByteLength)),h=(e,t,r)=>nn.bytesToNumberBE(e.slice(t,r));class f{constructor(e,t,r){this.r=e,this.s=t,this.recovery=r,this.assertValidity()}static fromCompact(e){let r=t.nByteLength;return new f(h(e=tj("compactSignature",e,2*r),0,r),h(e,r,2*r))}static fromDER(e){let{r:t,s:r}=no.toSig(tj("DER",e));return new f(t,r)}assertValidity(){nn.aInRange("r",this.r,nc,n),nn.aInRange("s",this.s,nc,n)}addRecoveryBit(e){return new f(this.r,this.s,e)}recoverPublicKey(e){let{r:a,s:i,recovery:l}=this,c=m(tj("msgHash",e));if(null==l||![0,1,2,3].includes(l))throw Error("recovery id invalid");let u=2===l||3===l?a+t.n:a;if(u>=r.ORDER)throw Error("recovery id 2 or 3 invalid");let h=(1&l)==0?"02":"03",f=o.fromHex(h+d(u)),p=rq(u,n),g=s(-c*p),y=s(i*p),b=o.BASE.multiplyAndAddUnsafe(f,g,y);if(!b)throw Error("point at infinify");return b.assertValidity(),b}hasHighS(){return this.s>n>>nc}normalizeS(){return this.hasHighS()?new f(this.r,s(-this.s),this.recovery):this}toDERRawBytes(){return nn.hexToBytes(this.toDERHex())}toDERHex(){return no.hexFromSig({r:this.r,s:this.s})}toCompactRawBytes(){return nn.hexToBytes(this.toCompactHex())}toCompactHex(){return d(this.r)+d(this.s)}}function p(e){let t=nn.isBytes(e),r="string"==typeof e,n=(t||r)&&e.length;return t?n===a||n===i:r?n===2*a||n===2*i:e instanceof o}let g=t.bits2int||function(e){if(e.length>8192)throw Error("input is too large");let r=nn.bytesToNumberBE(e),n=8*e.length-t.nBitLength;return n>0?r>>BigInt(n):r},m=t.bits2int_modN||function(e){return s(g(e))},y=nn.bitMask(t.nBitLength);function b(e){return nn.aInRange("num < 2^"+t.nBitLength,e,nl,y),nn.numberToBytesBE(e,t.nByteLength)}let _={lowS:t.lowS,prehash:!1},w={lowS:t.lowS,prehash:!1};return o.BASE._setWindowSize(8),{CURVE:t,getPublicKey:function(e,t=!0){return o.fromPrivateKey(e).toRawBytes(t)},getSharedSecret:function(e,t,r=!0){if(p(e))throw Error("first arg must be private key");if(!p(t))throw Error("second arg must be public key");return o.fromHex(t).multiply(l(e)).toRawBytes(r)},sign:function(e,a,i=_){let{seed:c,k2sig:d}=function(e,a,i=_){if(["recovered","canonical"].some(e=>e in i))throw Error("sign() legacy options not supported");let{hash:c,randomBytes:d}=t,{lowS:h,prehash:p,extraEntropy:y}=i;null==h&&(h=!0),e=tj("msgHash",e),na(i),p&&(e=tj("prehashed msgHash",c(e)));let w=m(e),E=l(a),v=[b(E),b(w)];if(null!=y&&!1!==y){let e=!0===y?d(r.BYTES):y;v.push(tj("extraEntropy",e))}return{seed:nn.concatBytes(...v),k2sig:function(e){var t;let r=g(e);if(!u(r))return;let a=rq(r,n),i=o.BASE.multiply(r).toAffine(),l=s(i.x);if(l===nl)return;let c=s(a*s(w+l*E));if(c===nl)return;let d=2*(i.x!==l)|Number(i.y&nc),p=c;return h&&c>n>>nc&&(p=(t=c)>n>>nc?s(-t):t,d^=1),new f(l,p,d)}}}(e,a,i);return nn.createHmacDrbg(t.hash.outputLen,t.nByteLength,t.hmac)(c,d)},verify:function(e,r,a,i=w){let l,c;r=tj("msgHash",r),a=tj("publicKey",a);let{lowS:u,prehash:d,format:h}=i;if(na(i),"strict"in i)throw Error("options.strict was renamed to lowS");if(void 0!==h&&"compact"!==h&&"der"!==h)throw Error("format must be compact or der");let p="string"==typeof e||nn.isBytes(e),g=!p&&!h&&"object"==typeof e&&null!==e&&"bigint"==typeof e.r&&"bigint"==typeof e.s;if(!p&&!g)throw Error("invalid signature, expected Uint8Array, hex string or Signature instance");try{if(g&&(c=new f(e.r,e.s)),p){try{"compact"!==h&&(c=f.fromDER(e))}catch(e){if(!(e instanceof no.Err))throw e}c||"der"===h||(c=f.fromCompact(e))}l=o.fromHex(a)}catch(e){return!1}if(!c||u&&c.hasHighS())return!1;d&&(r=t.hash(r));let{r:y,s:b}=c,_=m(r),E=rq(b,n),v=s(_*E),S=s(y*E),x=o.BASE.multiplyAndAddUnsafe(l,v,S)?.toAffine();return!!x&&s(x.x)===y},ProjectivePoint:o,Signature:f,utils:{isValidPrivateKey(e){try{return l(e),!0}catch(e){return!1}},normPrivateKeyToScalar:l,randomPrivateKey:()=>{let e=r0(t.n);return function(e,t,r=!1){let n=e.length,a=rQ(t),i=r0(t);if(n<16||n<i||n>1024)throw Error("expected "+i+"-1024 bytes of input, got "+n);let s=rW(r?tV(e):tF(e),t-rF)+rF;return r?tM(s,a):tH(s,a)}(t.randomBytes(e),t.n)},precompute:(e=8,t=o.BASE)=>(t._setWindowSize(e),t.multiply(BigInt(3)),t)}}}function ng(e,t){let r=e.ORDER,n=nl;for(let e=r-nc;e%nu===nl;e/=nu)n+=nc;let a=n,i=nu<<a-nc-nc,s=i*nu,o=(r-nc)/s,l=(o-nc)/nu,c=s-nc,u=e.pow(t,o),d=e.pow(t,(o+nc)/nu),h=(t,r)=>{let n=u,s=e.pow(r,c),o=e.sqr(s);o=e.mul(o,r);let h=e.mul(t,o);h=e.pow(h,l),h=e.mul(h,s),s=e.mul(h,r),o=e.mul(h,t);let f=e.mul(o,s);h=e.pow(f,i);let p=e.eql(h,e.ONE);s=e.mul(o,d),h=e.mul(f,n),o=e.cmov(s,o,p),f=e.cmov(h,f,p);for(let t=a;t>nc;t--){let r=t-nu;r=nu<<r-nc;let a=e.pow(f,r),i=e.eql(a,e.ONE);s=e.mul(o,n),n=e.mul(n,n),a=e.mul(f,n),o=e.cmov(s,o,i),f=e.cmov(a,f,i)}return{isValid:p,value:o}};if(e.ORDER%nh===nd){let r=(e.ORDER-nd)/nh,n=e.sqrt(e.neg(t));h=(t,a)=>{let i=e.sqr(a),s=e.mul(t,a);i=e.mul(i,s);let o=e.pow(i,r);o=e.mul(o,s);let l=e.mul(o,n),c=e.mul(e.sqr(o),a),u=e.eql(c,t),d=e.cmov(l,o,u);return{isValid:u,value:d}}}return h}function nm(e,t){if(rY(e),!e.isValid(t.A)||!e.isValid(t.B)||!e.isValid(t.Z))throw Error("mapToCurveSimpleSWU: invalid opts");let r=ng(e,t.Z);if(!e.isOdd)throw Error("Fp.isOdd is not implemented!");return n=>{let a,i,s,o,l,c,u,d;a=e.sqr(n),a=e.mul(a,t.Z),i=e.sqr(a),i=e.add(i,a),s=e.add(i,e.ONE),s=e.mul(s,t.B),o=e.cmov(t.Z,e.neg(i),!e.eql(i,e.ZERO)),o=e.mul(o,t.A),i=e.sqr(s),c=e.sqr(o),l=e.mul(c,t.A),i=e.add(i,l),i=e.mul(i,s),c=e.mul(c,o),l=e.mul(c,t.B),i=e.add(i,l),u=e.mul(a,s);let{isValid:h,value:f}=r(i,c);d=e.mul(a,n),d=e.mul(d,f),u=e.cmov(u,s,h),d=e.cmov(d,f,h);let p=e.isOdd(n)===e.isOdd(d);return d=e.cmov(e.neg(d),d,p),{x:u=e.div(u,o),y:d}}}class ny extends ru{constructor(e,t){super(),this.finished=!1,this.destroyed=!1,function(e){if("function"!=typeof e||"function"!=typeof e.create)throw Error("Hash should be wrapped by utils.wrapConstructor");t4(e.outputLen),t4(e.blockLen)}(e);let r=rc(t);if(this.iHash=e.create(),"function"!=typeof this.iHash.update)throw Error("Expected instance of class which extends utils.Hash");this.blockLen=this.iHash.blockLen,this.outputLen=this.iHash.outputLen;let n=this.blockLen,a=new Uint8Array(n);a.set(r.length>n?e.create().update(r).digest():r);for(let e=0;e<a.length;e++)a[e]^=54;this.iHash.update(a),this.oHash=e.create();for(let e=0;e<a.length;e++)a[e]^=106;this.oHash.update(a),a.fill(0)}update(e){return t9(this),this.iHash.update(e),this}digestInto(e){t9(this),t7(e,this.outputLen),this.finished=!0,this.iHash.digestInto(e),this.oHash.update(e),this.oHash.digestInto(e),this.destroy()}digest(){let e=new Uint8Array(this.oHash.outputLen);return this.digestInto(e),e}_cloneInto(e){e||(e=Object.create(Object.getPrototypeOf(this),{}));let{oHash:t,iHash:r,finished:n,destroyed:a,blockLen:i,outputLen:s}=this;return e.finished=n,e.destroyed=a,e.blockLen=i,e.outputLen=s,e.oHash=t._cloneInto(e.oHash),e.iHash=r._cloneInto(e.iHash),e}destroy(){this.destroyed=!0,this.oHash.destroy(),this.iHash.destroy()}}let nb=(e,t,r)=>new ny(e,t).update(r).digest();function n_(e){return{hash:e,hmac:(t,...r)=>nb(e,t,function(...e){let t=0;for(let r=0;r<e.length;r++){let n=e[r];t7(n),t+=n.length}let r=new Uint8Array(t);for(let t=0,n=0;t<e.length;t++){let a=e[t];r.set(a,n),n+=a.length}return r}(...r)),randomBytes:rh}}nb.create=(e,t)=>new ny(e,t);let nw=BigInt("3618502788666131213697322783095070105526743751716087489154079457884512865583"),nE=BigInt("0x800000000000000000000000000000000000000000000000000000000000000");function nv(e){for(;0===e[0];)e=e.subarray(1);let t=8*e.length-252,r=tV(e);return t>0?r>>BigInt(t):r}function nS(e){return"string"==typeof e&&1&(e=nF(e)).length&&(e="0"+e),tU(e)}let nx=np({a:BigInt(1),b:BigInt("3141592653589793238462643383279502884197169399375105820974944592307816406665"),Fp:rJ(BigInt("0x800000000000011000000000000000000000000000000000000000000000001")),n:nw,nBitLength:252,Gx:BigInt("874739451078007766457464989774322083649278607533249481151382481072868806602"),Gy:BigInt("152666792071518830868575557812948353041420400780739481342941381225525861407"),h:BigInt(1),lowS:!1,...n_(rw),bits2int:nv,bits2int_modN:e=>{let t=tV(e).toString(16);return 63===t.length&&(e=nS(t+"0")),rW(nv(e),nw)}}),nT=nx;function nA(e){return tj("","string"==typeof e?nS(e):e)}function nk(e){return tN(nA(e)).padStart(64,"0")}function nI(e,t=!1){return nx.getPublicKey(nk(e),t)}function nC(e,t){return nx.getSharedSecret(nk(e),t)}function nB(e){let{r:t,s:r}=e;if(t<0n||t>=nE)throw Error(`Signature.r should be [1, ${nE})`);let n=rq(r,nw);if(n<0n||n>=nE)throw Error(`inv(Signature.s) should be [1, ${nE})`)}function nO(e){let t=nA(e);if(tV(t)>=nE)throw Error(`msgHash should be [0, ${nE})`);return t}function nN(e,t,r){let n=nx.sign(nO(e),nk(t),r);return nB(n),n}function nP(e,t,r){if(!(e instanceof nL)){let t=nA(e);try{e=nL.fromDER(t)}catch(r){if(!(r instanceof no.Err))throw r;e=nL.fromCompact(t)}}return nB(e),nx.verify(e,nO(t),nA(r))}let{CURVE:nD,ProjectivePoint:nR,Signature:nL,utils:nU}=nx;function nV(e){let t=tN(e.subarray(1)).replace(/^0+/gm,"");return`0x${t}`}function nF(e){return e.replace(/^0x/i,"")}function nH(e){let t=nA(e),r=2n**256n,n=r-rW(r,nw);for(let e=0;;e++){let r=n1(tz(t,t$(BigInt(e))));if(r<n)return rW(r,nw).toString(16);if(1e5===e)throw Error("grindKey is broken: tried 100k vals")}}function nM(e){return nV(nI(e,!0))}function n$(e){if(130!==(e=nF(e)).length)throw Error("Wrong ethereum signature");return nH(e.substring(0,64))}let nj=2n**31n-1n,nz=e=>Number(e&nj);function nW(e,t,r,n){let a=nz(n1(e)),i=nz(n1(t)),s=tD(nF(r));return`m/2645'/${a}'/${i}'/${nz(s)}'/${nz(s>>31n)}'/${n}`}let nG=[new nR(0x49ee3eba8c1600700ee1b87eb599f16716b0b1022947733551fde4050ca6804n,0x3ca0cfe4b3bc6ddf346d49d06ea0ed34e621062c0e056c1d0405d266e10268an,1n),new nR(0x234287dcbaffe7f969c748655fca9e58fa8120b6d56eb0c1080d17957ebe47bn,0x3b056f100f96fb21e889527d41f4e39940135dd7a6c94cc6ed0268ee89e5615n,1n),new nR(0x4fa56f376c83db33f9dab2656558f3399099ec1de5e3018b7a6932dba8aa378n,0x3fa0984c931c9e38113e0c0e47e4401562761f92a7a23b45168f4e80ff5b54dn,1n),new nR(0x4ba4cc166be8dec764910f75b45f74b40c690c74709e90f3aa372f0bd2d6997n,0x40301cf5c1751f4b971e46c4ede85fcac5c59a5ce5ae7c48151f27b24b219cn,1n),new nR(0x54302dcb0e6cc1c6e44cca8f61a63bb2ca65048d53fb325d36ff12c49a58202n,0x1b77b3e37d13504b348046268d8ae25ce98ad783c25561a879dcc77e99c2426n,1n)];function nq(e,t){let r=[],n=e;for(let e=0;e<248;e++)r.push(n),n=n.double();n=t;for(let e=0;e<4;e++)r.push(n),n=n.double();return r}let nK=nq(nG[1],nG[2]),nY=nq(nG[3],nG[4]);function nZ(e,t,r){let n=function(e){let t;if("bigint"==typeof e)t=e;else if("number"==typeof e){if(!Number.isSafeInteger(e))throw Error(`Invalid pedersenArg: ${e}`);t=BigInt(e)}else t=tV(nA(e));if(!(0n<=t&&t<nx.CURVE.Fp.ORDER))throw Error(`PedersenArg should be 0 <= value < CURVE.P: ${t}`);return t}(t);for(let t=0;t<252;t++){let a=r[t];if(!a)throw Error("invalid constant index");if(a.equals(e))throw Error("Same point");(1n&n)!==0n&&(e=e.add(a)),n>>=1n}return e}function nX(e,t){let r=nG[0];return r=nZ(r,e,nK),nV((r=nZ(r,t,nY)).toRawBytes(!0))}let nJ=(e,t=nX)=>[0,...e,e.length].reduce((e,r)=>t(e,r)),nQ=tQ(250),n0=e=>tV(rU(e))&nQ,n1=e=>tV(rw(e)),n2=rJ(BigInt("3618502788666131213697322783095070105623107215331596699973092056135872020481"));function n5(e,t,r){let n=e.fromBytes(rw(rl(`${t}${r}`)));return e.create(n)}function n6(e,t,r,n=0){let a=[],i=[];for(let s=0;s<r;s++)a.push(n5(e,`${t}x`,n*r+s)),i.push(n5(e,`${t}y`,n*r+s));if(new Set([...a,...i]).size!==2*r)throw Error("X and Y values are not distinct");return a.map(t=>i.map(r=>e.inv(e.sub(t,r))))}function n3(e,t){if(rY(e.Fp),!Number.isSafeInteger(e.rate)||!Number.isSafeInteger(e.capacity))throw Error(`Wrong poseidon opts: ${e}`);let r=e.rate+e.capacity,n=e.roundsFull+e.roundsPartial,a=[];for(let t=0;t<n;t++){let n=[];for(let a=0;a<r;a++)n.push(n5(e.Fp,"Hades",r*t+a));a.push(n)}let i=r5({...e,t:r,sboxPower:3,reversePartialPowIdx:!0,mds:t,roundConstants:a});return i.m=r,i.rate=e.rate,i.capacity=e.capacity,i}function n8(e,t=0){let r=e.rate+e.capacity;if(!Number.isSafeInteger(t))throw Error(`Wrong mdsAttempt=${t}`);return n3(e,n6(e.Fp,"HadesMDS",r,t))}let n4=n3({Fp:n2,rate:2,capacity:1,roundsFull:8,roundsPartial:83},[[3,1,1],[1,-1,1],[1,1,-2]].map(e=>e.map(BigInt)));function n7(e,t,r=n4){return r([e,t,2n])[0]}function n9(e,t,r=n4){return t$(n7(tV(e),tV(t),r))}function ae(e,t=n4){return t([e,0n,1n])[0]}function at(e,t=n4){let{m:r,rate:n}=t;if(!Array.isArray(e))throw Error("bigint array expected in values");let a=Array.from(e);for(a.push(1n);a.length%n!=0;)a.push(0n);let i=Array(r).fill(0n);for(let e=0;e<a.length;e+=n){for(let t=0;t<n;t++){let r=a[e+t];if(void 0===r)throw Error("invalid index");if(void 0===i[t])throw Error("state[j] is undefined");i[t]=i[t]+r}i=t(i)}return i[0]}var ar=e.i(935360),an=e.i(976656),aa=e.i(274772);function ai(e){let t=e.length;for(;--t>=0;)e[t]=0}let as=573,ao=new Uint8Array([0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0]),al=new Uint8Array([0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13]),ac=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7]),au=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]),ad=Array(576);ai(ad);let ah=Array(60);ai(ah);let af=Array(512);ai(af);let ap=Array(256);ai(ap);let ag=Array(29);ai(ag);let am=Array(30);function ay(e,t,r,n,a){this.static_tree=e,this.extra_bits=t,this.extra_base=r,this.elems=n,this.max_length=a,this.has_stree=e&&e.length}function ab(e,t){this.dyn_tree=e,this.max_code=0,this.stat_desc=t}ai(am);let a_=e=>e<256?af[e]:af[256+(e>>>7)],aw=(e,t)=>{e.pending_buf[e.pending++]=255&t,e.pending_buf[e.pending++]=t>>>8&255},aE=(e,t,r)=>{e.bi_valid>16-r?(e.bi_buf|=t<<e.bi_valid&65535,aw(e,e.bi_buf),e.bi_buf=t>>16-e.bi_valid,e.bi_valid+=r-16):(e.bi_buf|=t<<e.bi_valid&65535,e.bi_valid+=r)},av=(e,t,r)=>{aE(e,r[2*t],r[2*t+1])},aS=(e,t)=>{let r=0;do r|=1&e,e>>>=1,r<<=1;while(--t>0)return r>>>1},ax=(e,t,r)=>{let n,a,i=Array(16),s=0;for(n=1;n<=15;n++)s=s+r[n-1]<<1,i[n]=s;for(a=0;a<=t;a++){let t=e[2*a+1];0!==t&&(e[2*a]=aS(i[t]++,t))}},aT=e=>{let t;for(t=0;t<286;t++)e.dyn_ltree[2*t]=0;for(t=0;t<30;t++)e.dyn_dtree[2*t]=0;for(t=0;t<19;t++)e.bl_tree[2*t]=0;e.dyn_ltree[512]=1,e.opt_len=e.static_len=0,e.sym_next=e.matches=0},aA=e=>{e.bi_valid>8?aw(e,e.bi_buf):e.bi_valid>0&&(e.pending_buf[e.pending++]=e.bi_buf),e.bi_buf=0,e.bi_valid=0},ak=(e,t,r,n)=>{let a=2*t,i=2*r;return e[a]<e[i]||e[a]===e[i]&&n[t]<=n[r]},aI=(e,t,r)=>{let n=e.heap[r],a=r<<1;for(;a<=e.heap_len&&(a<e.heap_len&&ak(t,e.heap[a+1],e.heap[a],e.depth)&&a++,!ak(t,n,e.heap[a],e.depth));)e.heap[r]=e.heap[a],r=a,a<<=1;e.heap[r]=n},aC=(e,t,r)=>{let n,a,i,s,o=0;if(0!==e.sym_next)do n=(255&e.pending_buf[e.sym_buf+o++])+((255&e.pending_buf[e.sym_buf+o++])<<8),a=e.pending_buf[e.sym_buf+o++],0===n?av(e,a,t):(av(e,(i=ap[a])+256+1,t),0!==(s=ao[i])&&aE(e,a-=ag[i],s),av(e,i=a_(--n),r),0!==(s=al[i])&&aE(e,n-=am[i],s));while(o<e.sym_next)av(e,256,t)},aB=(e,t)=>{let r,n,a,i=t.dyn_tree,s=t.stat_desc.static_tree,o=t.stat_desc.has_stree,l=t.stat_desc.elems,c=-1;for(r=0,e.heap_len=0,e.heap_max=as;r<l;r++)0!==i[2*r]?(e.heap[++e.heap_len]=c=r,e.depth[r]=0):i[2*r+1]=0;for(;e.heap_len<2;)i[2*(a=e.heap[++e.heap_len]=c<2?++c:0)]=1,e.depth[a]=0,e.opt_len--,o&&(e.static_len-=s[2*a+1]);for(t.max_code=c,r=e.heap_len>>1;r>=1;r--)aI(e,i,r);a=l;do r=e.heap[1],e.heap[1]=e.heap[e.heap_len--],aI(e,i,1),n=e.heap[1],e.heap[--e.heap_max]=r,e.heap[--e.heap_max]=n,i[2*a]=i[2*r]+i[2*n],e.depth[a]=(e.depth[r]>=e.depth[n]?e.depth[r]:e.depth[n])+1,i[2*r+1]=i[2*n+1]=a,e.heap[1]=a++,aI(e,i,1);while(e.heap_len>=2)e.heap[--e.heap_max]=e.heap[1],((e,t)=>{let r,n,a,i,s,o,l=t.dyn_tree,c=t.max_code,u=t.stat_desc.static_tree,d=t.stat_desc.has_stree,h=t.stat_desc.extra_bits,f=t.stat_desc.extra_base,p=t.stat_desc.max_length,g=0;for(i=0;i<=15;i++)e.bl_count[i]=0;for(l[2*e.heap[e.heap_max]+1]=0,r=e.heap_max+1;r<as;r++)(i=l[2*l[2*(n=e.heap[r])+1]+1]+1)>p&&(i=p,g++),l[2*n+1]=i,!(n>c)&&(e.bl_count[i]++,s=0,n>=f&&(s=h[n-f]),o=l[2*n],e.opt_len+=o*(i+s),d&&(e.static_len+=o*(u[2*n+1]+s)));if(0!==g){do{for(i=p-1;0===e.bl_count[i];)i--;e.bl_count[i]--,e.bl_count[i+1]+=2,e.bl_count[p]--,g-=2}while(g>0)for(i=p;0!==i;i--)for(n=e.bl_count[i];0!==n;)!((a=e.heap[--r])>c)&&(l[2*a+1]!==i&&(e.opt_len+=(i-l[2*a+1])*l[2*a],l[2*a+1]=i),n--)}})(e,t),ax(i,c,e.bl_count)},aO=(e,t,r)=>{let n,a,i=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),t[(r+1)*2+1]=65535,n=0;n<=r;n++)a=s,s=t[(n+1)*2+1],++o<l&&a===s||(o<c?e.bl_tree[2*a]+=o:0!==a?(a!==i&&e.bl_tree[2*a]++,e.bl_tree[32]++):o<=10?e.bl_tree[34]++:e.bl_tree[36]++,o=0,i=a,0===s?(l=138,c=3):a===s?(l=6,c=3):(l=7,c=4))},aN=(e,t,r)=>{let n,a,i=-1,s=t[1],o=0,l=7,c=4;for(0===s&&(l=138,c=3),n=0;n<=r;n++)if(a=s,s=t[(n+1)*2+1],!(++o<l)||a!==s){if(o<c)do av(e,a,e.bl_tree);while(0!=--o)else 0!==a?(a!==i&&(av(e,a,e.bl_tree),o--),av(e,16,e.bl_tree),aE(e,o-3,2)):o<=10?(av(e,17,e.bl_tree),aE(e,o-3,3)):(av(e,18,e.bl_tree),aE(e,o-11,7));o=0,i=a,0===s?(l=138,c=3):a===s?(l=6,c=3):(l=7,c=4)}},aP=!1,aD=(e,t,r,n)=>{aE(e,0+ +!!n,3),aA(e),aw(e,r),aw(e,~r),r&&e.pending_buf.set(e.window.subarray(t,t+r),e.pending),e.pending+=r};var aR={_tr_init:e=>{aP||((()=>{let e,a,i,s,o,l=Array(16);for(s=0,i=0;s<28;s++)for(e=0,ag[s]=i;e<1<<ao[s];e++)ap[i++]=s;for(ap[i-1]=s,o=0,s=0;s<16;s++)for(e=0,am[s]=o;e<1<<al[s];e++)af[o++]=s;for(o>>=7;s<30;s++)for(e=0,am[s]=o<<7;e<1<<al[s]-7;e++)af[256+o++]=s;for(a=0;a<=15;a++)l[a]=0;for(e=0;e<=143;)ad[2*e+1]=8,e++,l[8]++;for(;e<=255;)ad[2*e+1]=9,e++,l[9]++;for(;e<=279;)ad[2*e+1]=7,e++,l[7]++;for(;e<=287;)ad[2*e+1]=8,e++,l[8]++;for(ax(ad,287,l),e=0;e<30;e++)ah[2*e+1]=5,ah[2*e]=aS(e,5);t=new ay(ad,ao,257,286,15),r=new ay(ah,al,0,30,15),n=new ay([],ac,0,19,7)})(),aP=!0),e.l_desc=new ab(e.dyn_ltree,t),e.d_desc=new ab(e.dyn_dtree,r),e.bl_desc=new ab(e.bl_tree,n),e.bi_buf=0,e.bi_valid=0,aT(e)},_tr_stored_block:aD,_tr_flush_block:(e,t,r,n)=>{let a,i,s=0;e.level>0?(2===e.strm.data_type&&(e.strm.data_type=(e=>{let t,r=0xf3ffc07f;for(t=0;t<=31;t++,r>>>=1)if(1&r&&0!==e.dyn_ltree[2*t])return 0;if(0!==e.dyn_ltree[18]||0!==e.dyn_ltree[20]||0!==e.dyn_ltree[26])return 1;for(t=32;t<256;t++)if(0!==e.dyn_ltree[2*t])return 1;return 0})(e)),aB(e,e.l_desc),aB(e,e.d_desc),s=(e=>{let t;for(aO(e,e.dyn_ltree,e.l_desc.max_code),aO(e,e.dyn_dtree,e.d_desc.max_code),aB(e,e.bl_desc),t=18;t>=3&&0===e.bl_tree[2*au[t]+1];t--);return e.opt_len+=3*(t+1)+5+5+4,t})(e),a=e.opt_len+3+7>>>3,(i=e.static_len+3+7>>>3)<=a&&(a=i)):a=i=r+5,r+4<=a&&-1!==t?aD(e,t,r,n):4===e.strategy||i===a?(aE(e,2+ +!!n,3),aC(e,ad,ah)):(aE(e,4+ +!!n,3),((e,t,r,n)=>{let a;for(aE(e,t-257,5),aE(e,r-1,5),aE(e,n-4,4),a=0;a<n;a++)aE(e,e.bl_tree[2*au[a]+1],3);aN(e,e.dyn_ltree,t-1),aN(e,e.dyn_dtree,r-1)})(e,e.l_desc.max_code+1,e.d_desc.max_code+1,s+1),aC(e,e.dyn_ltree,e.dyn_dtree)),aT(e),n&&aA(e)},_tr_tally:(e,t,r)=>(e.pending_buf[e.sym_buf+e.sym_next++]=t,e.pending_buf[e.sym_buf+e.sym_next++]=t>>8,e.pending_buf[e.sym_buf+e.sym_next++]=r,0===t?e.dyn_ltree[2*r]++:(e.matches++,t--,e.dyn_ltree[(ap[r]+256+1)*2]++,e.dyn_dtree[2*a_(t)]++),e.sym_next===e.sym_end),_tr_align:e=>{aE(e,2,3),av(e,256,ad),(e=>{16===e.bi_valid?(aw(e,e.bi_buf),e.bi_buf=0,e.bi_valid=0):e.bi_valid>=8&&(e.pending_buf[e.pending++]=255&e.bi_buf,e.bi_buf>>=8,e.bi_valid-=8)})(e)}},aL=(e,t,r,n)=>{let a=65535&e,i=e>>>16&65535,s=0;for(;0!==r;){s=r>2e3?2e3:r,r-=s;do i=i+(a=a+t[n++]|0)|0;while(--s)a%=65521,i%=65521}return a|i<<16};let aU=new Uint32Array((()=>{let e,t=[];for(var r=0;r<256;r++){e=r;for(var n=0;n<8;n++)e=1&e?0xedb88320^e>>>1:e>>>1;t[r]=e}return t})());var aV=(e,t,r,n)=>{let a=n+r;e^=-1;for(let r=n;r<a;r++)e=e>>>8^aU[(e^t[r])&255];return -1^e},aF={2:"need dictionary",1:"stream end",0:"","-1":"file error","-2":"stream error","-3":"data error","-4":"insufficient memory","-5":"buffer error","-6":"incompatible version"},aH={Z_NO_FLUSH:0,Z_PARTIAL_FLUSH:1,Z_SYNC_FLUSH:2,Z_FULL_FLUSH:3,Z_FINISH:4,Z_BLOCK:5,Z_TREES:6,Z_OK:0,Z_STREAM_END:1,Z_NEED_DICT:2,Z_ERRNO:-1,Z_STREAM_ERROR:-2,Z_DATA_ERROR:-3,Z_MEM_ERROR:-4,Z_BUF_ERROR:-5,Z_NO_COMPRESSION:0,Z_BEST_SPEED:1,Z_BEST_COMPRESSION:9,Z_DEFAULT_COMPRESSION:-1,Z_FILTERED:1,Z_HUFFMAN_ONLY:2,Z_RLE:3,Z_FIXED:4,Z_DEFAULT_STRATEGY:0,Z_BINARY:0,Z_TEXT:1,Z_UNKNOWN:2,Z_DEFLATED:8};let{_tr_init:aM,_tr_stored_block:a$,_tr_flush_block:aj,_tr_tally:az,_tr_align:aW}=aR,{Z_NO_FLUSH:aG,Z_PARTIAL_FLUSH:aq,Z_FULL_FLUSH:aK,Z_FINISH:aY,Z_BLOCK:aZ,Z_OK:aX,Z_STREAM_END:aJ,Z_STREAM_ERROR:aQ,Z_DATA_ERROR:a0,Z_BUF_ERROR:a1,Z_DEFAULT_COMPRESSION:a2,Z_FILTERED:a5,Z_HUFFMAN_ONLY:a6,Z_RLE:a3,Z_FIXED:a8,Z_DEFAULT_STRATEGY:a4,Z_UNKNOWN:a7,Z_DEFLATED:a9}=aH,ie=573,it=(e,t)=>(e.msg=aF[t],t),ir=e=>2*e-9*(e>4),ia=e=>{let t=e.length;for(;--t>=0;)e[t]=0},ii=e=>{let t,r,n,a=e.w_size;n=t=e.hash_size;do r=e.head[--n],e.head[n]=r>=a?r-a:0;while(--t)n=t=a;do r=e.prev[--n],e.prev[n]=r>=a?r-a:0;while(--t)},is=(e,t,r)=>(t<<e.hash_shift^r)&e.hash_mask,io=e=>{let t=e.state,r=t.pending;r>e.avail_out&&(r=e.avail_out),0!==r&&(e.output.set(t.pending_buf.subarray(t.pending_out,t.pending_out+r),e.next_out),e.next_out+=r,t.pending_out+=r,e.total_out+=r,e.avail_out-=r,t.pending-=r,0===t.pending&&(t.pending_out=0))},il=(e,t)=>{aj(e,e.block_start>=0?e.block_start:-1,e.strstart-e.block_start,t),e.block_start=e.strstart,io(e.strm)},ic=(e,t)=>{e.pending_buf[e.pending++]=t},iu=(e,t)=>{e.pending_buf[e.pending++]=t>>>8&255,e.pending_buf[e.pending++]=255&t},id=(e,t,r,n)=>{let a=e.avail_in;return(a>n&&(a=n),0===a)?0:(e.avail_in-=a,t.set(e.input.subarray(e.next_in,e.next_in+a),r),1===e.state.wrap?e.adler=aL(e.adler,t,a,r):2===e.state.wrap&&(e.adler=aV(e.adler,t,a,r)),e.next_in+=a,e.total_in+=a,a)},ih=(e,t)=>{let r,n,a=e.max_chain_length,i=e.strstart,s=e.prev_length,o=e.nice_match,l=e.strstart>e.w_size-262?e.strstart-(e.w_size-262):0,c=e.window,u=e.w_mask,d=e.prev,h=e.strstart+258,f=c[i+s-1],p=c[i+s];e.prev_length>=e.good_match&&(a>>=2),o>e.lookahead&&(o=e.lookahead);do{if(c[(r=t)+s]!==p||c[r+s-1]!==f||c[r]!==c[i]||c[++r]!==c[i+1])continue;i+=2,r++;do;while(c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&c[++i]===c[++r]&&i<h)if(n=258-(h-i),i=h-258,n>s){if(e.match_start=t,s=n,n>=o)break;f=c[i+s-1],p=c[i+s]}}while((t=d[t&u])>l&&0!=--a)return s<=e.lookahead?s:e.lookahead},ip=e=>{let t,r,n,a=e.w_size;do{if(r=e.window_size-e.lookahead-e.strstart,e.strstart>=a+(a-262)&&(e.window.set(e.window.subarray(a,a+a-r),0),e.match_start-=a,e.strstart-=a,e.block_start-=a,e.insert>e.strstart&&(e.insert=e.strstart),ii(e),r+=a),0===e.strm.avail_in)break;if(t=id(e.strm,e.window,e.strstart+e.lookahead,r),e.lookahead+=t,e.lookahead+e.insert>=3)for(n=e.strstart-e.insert,e.ins_h=e.window[n],e.ins_h=is(e,e.ins_h,e.window[n+1]);e.insert&&(e.ins_h=is(e,e.ins_h,e.window[n+3-1]),e.prev[n&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=n,n++,e.insert--,!(e.lookahead+e.insert<3)););}while(e.lookahead<262&&0!==e.strm.avail_in)},ig=(e,t)=>{let r=e.pending_buf_size-5>e.w_size?e.w_size:e.pending_buf_size-5,n,a,i,s=0,o=e.strm.avail_in;do{if(n=65535,i=e.bi_valid+42>>3,e.strm.avail_out<i||(i=e.strm.avail_out-i,n>(a=e.strstart-e.block_start)+e.strm.avail_in&&(n=a+e.strm.avail_in),n>i&&(n=i),n<r&&(0===n&&t!==aY||t===aG||n!==a+e.strm.avail_in)))break;s=+(t===aY&&n===a+e.strm.avail_in),a$(e,0,0,s),e.pending_buf[e.pending-4]=n,e.pending_buf[e.pending-3]=n>>8,e.pending_buf[e.pending-2]=~n,e.pending_buf[e.pending-1]=~n>>8,io(e.strm),a&&(a>n&&(a=n),e.strm.output.set(e.window.subarray(e.block_start,e.block_start+a),e.strm.next_out),e.strm.next_out+=a,e.strm.avail_out-=a,e.strm.total_out+=a,e.block_start+=a,n-=a),n&&(id(e.strm,e.strm.output,e.strm.next_out,n),e.strm.next_out+=n,e.strm.avail_out-=n,e.strm.total_out+=n)}while(0===s)return((o-=e.strm.avail_in)&&(o>=e.w_size?(e.matches=2,e.window.set(e.strm.input.subarray(e.strm.next_in-e.w_size,e.strm.next_in),0),e.strstart=e.w_size,e.insert=e.strstart):(e.window_size-e.strstart<=o&&(e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,e.insert>e.strstart&&(e.insert=e.strstart)),e.window.set(e.strm.input.subarray(e.strm.next_in-o,e.strm.next_in),e.strstart),e.strstart+=o,e.insert+=o>e.w_size-e.insert?e.w_size-e.insert:o),e.block_start=e.strstart),e.high_water<e.strstart&&(e.high_water=e.strstart),s)?4:t!==aG&&t!==aY&&0===e.strm.avail_in&&e.strstart===e.block_start?2:(i=e.window_size-e.strstart,e.strm.avail_in>i&&e.block_start>=e.w_size&&(e.block_start-=e.w_size,e.strstart-=e.w_size,e.window.set(e.window.subarray(e.w_size,e.w_size+e.strstart),0),e.matches<2&&e.matches++,i+=e.w_size,e.insert>e.strstart&&(e.insert=e.strstart)),i>e.strm.avail_in&&(i=e.strm.avail_in),i&&(id(e.strm,e.window,e.strstart,i),e.strstart+=i,e.insert+=i>e.w_size-e.insert?e.w_size-e.insert:i),e.high_water<e.strstart&&(e.high_water=e.strstart),i=e.bi_valid+42>>3,r=(i=e.pending_buf_size-i>65535?65535:e.pending_buf_size-i)>e.w_size?e.w_size:i,((a=e.strstart-e.block_start)>=r||(a||t===aY)&&t!==aG&&0===e.strm.avail_in&&a<=i)&&(n=a>i?i:a,s=+(t===aY&&0===e.strm.avail_in&&n===a),a$(e,e.block_start,n,s),e.block_start+=n,io(e.strm)),s?3:1)},im=(e,t)=>{let r,n;for(;;){if(e.lookahead<262){if(ip(e),e.lookahead<262&&t===aG)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=is(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),0!==r&&e.strstart-r<=e.w_size-262&&(e.match_length=ih(e,r)),e.match_length>=3)if(n=az(e,e.strstart-e.match_start,e.match_length-3),e.lookahead-=e.match_length,e.match_length<=e.max_lazy_match&&e.lookahead>=3){e.match_length--;do e.strstart++,e.ins_h=is(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart;while(0!=--e.match_length)e.strstart++}else e.strstart+=e.match_length,e.match_length=0,e.ins_h=e.window[e.strstart],e.ins_h=is(e,e.ins_h,e.window[e.strstart+1]);else n=az(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++;if(n&&(il(e,!1),0===e.strm.avail_out))return 1}return(e.insert=e.strstart<2?e.strstart:2,t===aY)?(il(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(il(e,!1),0===e.strm.avail_out)?1:2},iy=(e,t)=>{let r,n,a;for(;;){if(e.lookahead<262){if(ip(e),e.lookahead<262&&t===aG)return 1;if(0===e.lookahead)break}if(r=0,e.lookahead>=3&&(e.ins_h=is(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart),e.prev_length=e.match_length,e.prev_match=e.match_start,e.match_length=2,0!==r&&e.prev_length<e.max_lazy_match&&e.strstart-r<=e.w_size-262&&(e.match_length=ih(e,r),e.match_length<=5&&(e.strategy===a5||3===e.match_length&&e.strstart-e.match_start>4096)&&(e.match_length=2)),e.prev_length>=3&&e.match_length<=e.prev_length){a=e.strstart+e.lookahead-3,n=az(e,e.strstart-1-e.prev_match,e.prev_length-3),e.lookahead-=e.prev_length-1,e.prev_length-=2;do++e.strstart<=a&&(e.ins_h=is(e,e.ins_h,e.window[e.strstart+3-1]),r=e.prev[e.strstart&e.w_mask]=e.head[e.ins_h],e.head[e.ins_h]=e.strstart);while(0!=--e.prev_length)if(e.match_available=0,e.match_length=2,e.strstart++,n&&(il(e,!1),0===e.strm.avail_out))return 1}else if(e.match_available){if((n=az(e,0,e.window[e.strstart-1]))&&il(e,!1),e.strstart++,e.lookahead--,0===e.strm.avail_out)return 1}else e.match_available=1,e.strstart++,e.lookahead--}return(e.match_available&&(n=az(e,0,e.window[e.strstart-1]),e.match_available=0),e.insert=e.strstart<2?e.strstart:2,t===aY)?(il(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(il(e,!1),0===e.strm.avail_out)?1:2};function ib(e,t,r,n,a){this.good_length=e,this.max_lazy=t,this.nice_length=r,this.max_chain=n,this.func=a}let i_=[new ib(0,0,0,0,ig),new ib(4,4,8,4,im),new ib(4,5,16,8,im),new ib(4,6,32,32,im),new ib(4,4,16,16,iy),new ib(8,16,32,32,iy),new ib(8,16,128,128,iy),new ib(8,32,128,256,iy),new ib(32,128,258,1024,iy),new ib(32,258,258,4096,iy)];function iw(){this.strm=null,this.status=0,this.pending_buf=null,this.pending_buf_size=0,this.pending_out=0,this.pending=0,this.wrap=0,this.gzhead=null,this.gzindex=0,this.method=a9,this.last_flush=-1,this.w_size=0,this.w_bits=0,this.w_mask=0,this.window=null,this.window_size=0,this.prev=null,this.head=null,this.ins_h=0,this.hash_size=0,this.hash_bits=0,this.hash_mask=0,this.hash_shift=0,this.block_start=0,this.match_length=0,this.prev_match=0,this.match_available=0,this.strstart=0,this.match_start=0,this.lookahead=0,this.prev_length=0,this.max_chain_length=0,this.max_lazy_match=0,this.level=0,this.strategy=0,this.good_match=0,this.nice_match=0,this.dyn_ltree=new Uint16Array(2*ie),this.dyn_dtree=new Uint16Array(122),this.bl_tree=new Uint16Array(78),ia(this.dyn_ltree),ia(this.dyn_dtree),ia(this.bl_tree),this.l_desc=null,this.d_desc=null,this.bl_desc=null,this.bl_count=new Uint16Array(16),this.heap=new Uint16Array(573),ia(this.heap),this.heap_len=0,this.heap_max=0,this.depth=new Uint16Array(573),ia(this.depth),this.sym_buf=0,this.lit_bufsize=0,this.sym_next=0,this.sym_end=0,this.opt_len=0,this.static_len=0,this.matches=0,this.insert=0,this.bi_buf=0,this.bi_valid=0}let iE=e=>{if(!e)return 1;let t=e.state;return t&&t.strm===e&&(42===t.status||57===t.status||69===t.status||73===t.status||91===t.status||103===t.status||113===t.status||666===t.status)?0:1};var iv={deflateInit2:(e,t,r,n,a,i)=>{if(!e)return aQ;let s=1;if(t===a2&&(t=6),n<0?(s=0,n=-n):n>15&&(s=2,n-=16),a<1||a>9||r!==a9||n<8||n>15||t<0||t>9||i<0||i>a8||8===n&&1!==s)return it(e,aQ);8===n&&(n=9);let o=new iw;return e.state=o,o.strm=e,o.status=42,o.wrap=s,o.gzhead=null,o.w_bits=n,o.w_size=1<<o.w_bits,o.w_mask=o.w_size-1,o.hash_bits=a+7,o.hash_size=1<<o.hash_bits,o.hash_mask=o.hash_size-1,o.hash_shift=~~((o.hash_bits+3-1)/3),o.window=new Uint8Array(2*o.w_size),o.head=new Uint16Array(o.hash_size),o.prev=new Uint16Array(o.w_size),o.lit_bufsize=1<<a+6,o.pending_buf_size=4*o.lit_bufsize,o.pending_buf=new Uint8Array(o.pending_buf_size),o.sym_buf=o.lit_bufsize,o.sym_end=(o.lit_bufsize-1)*3,o.level=t,o.strategy=i,o.method=r,(e=>{let t=(e=>{if(iE(e))return it(e,aQ);e.total_in=e.total_out=0,e.data_type=a7;let t=e.state;return t.pending=0,t.pending_out=0,t.wrap<0&&(t.wrap=-t.wrap),t.status=2===t.wrap?57:t.wrap?42:113,e.adler=+(2!==t.wrap),t.last_flush=-2,aM(t),aX})(e);return t===aX&&(e=>{e.window_size=2*e.w_size,ia(e.head),e.max_lazy_match=i_[e.level].max_lazy,e.good_match=i_[e.level].good_length,e.nice_match=i_[e.level].nice_length,e.max_chain_length=i_[e.level].max_chain,e.strstart=0,e.block_start=0,e.lookahead=0,e.insert=0,e.match_length=e.prev_length=2,e.match_available=0,e.ins_h=0})(e.state),t})(e)},deflateSetHeader:(e,t)=>iE(e)||2!==e.state.wrap?aQ:(e.state.gzhead=t,aX),deflate:(e,t)=>{if(iE(e)||t>aZ||t<0)return e?it(e,aQ):aQ;let r=e.state;if(!e.output||0!==e.avail_in&&!e.input||666===r.status&&t!==aY)return it(e,0===e.avail_out?a1:aQ);let n=r.last_flush;if(r.last_flush=t,0!==r.pending){if(io(e),0===e.avail_out)return r.last_flush=-1,aX}else if(0===e.avail_in&&ir(t)<=ir(n)&&t!==aY)return it(e,a1);if(666===r.status&&0!==e.avail_in)return it(e,a1);if(42===r.status&&0===r.wrap&&(r.status=113),42===r.status){let t=a9+(r.w_bits-8<<4)<<8;if(t|=(r.strategy>=a6||r.level<2?0:r.level<6?1:6===r.level?2:3)<<6,0!==r.strstart&&(t|=32),iu(r,t+=31-t%31),0!==r.strstart&&(iu(r,e.adler>>>16),iu(r,65535&e.adler)),e.adler=1,r.status=113,io(e),0!==r.pending)return r.last_flush=-1,aX}if(57===r.status){if(e.adler=0,ic(r,31),ic(r,139),ic(r,8),r.gzhead)ic(r,+!!r.gzhead.text+2*!!r.gzhead.hcrc+4*!!r.gzhead.extra+8*!!r.gzhead.name+16*!!r.gzhead.comment),ic(r,255&r.gzhead.time),ic(r,r.gzhead.time>>8&255),ic(r,r.gzhead.time>>16&255),ic(r,r.gzhead.time>>24&255),ic(r,9===r.level?2:4*(r.strategy>=a6||r.level<2)),ic(r,255&r.gzhead.os),r.gzhead.extra&&r.gzhead.extra.length&&(ic(r,255&r.gzhead.extra.length),ic(r,r.gzhead.extra.length>>8&255)),r.gzhead.hcrc&&(e.adler=aV(e.adler,r.pending_buf,r.pending,0)),r.gzindex=0,r.status=69;else if(ic(r,0),ic(r,0),ic(r,0),ic(r,0),ic(r,0),ic(r,9===r.level?2:4*(r.strategy>=a6||r.level<2)),ic(r,3),r.status=113,io(e),0!==r.pending)return r.last_flush=-1,aX}if(69===r.status){if(r.gzhead.extra){let t=r.pending,n=(65535&r.gzhead.extra.length)-r.gzindex;for(;r.pending+n>r.pending_buf_size;){let a=r.pending_buf_size-r.pending;if(r.pending_buf.set(r.gzhead.extra.subarray(r.gzindex,r.gzindex+a),r.pending),r.pending=r.pending_buf_size,r.gzhead.hcrc&&r.pending>t&&(e.adler=aV(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex+=a,io(e),0!==r.pending)return r.last_flush=-1,aX;t=0,n-=a}let a=new Uint8Array(r.gzhead.extra);r.pending_buf.set(a.subarray(r.gzindex,r.gzindex+n),r.pending),r.pending+=n,r.gzhead.hcrc&&r.pending>t&&(e.adler=aV(e.adler,r.pending_buf,r.pending-t,t)),r.gzindex=0}r.status=73}if(73===r.status){if(r.gzhead.name){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=aV(e.adler,r.pending_buf,r.pending-n,n)),io(e),0!==r.pending)return r.last_flush=-1,aX;n=0}t=r.gzindex<r.gzhead.name.length?255&r.gzhead.name.charCodeAt(r.gzindex++):0,ic(r,t)}while(0!==t)r.gzhead.hcrc&&r.pending>n&&(e.adler=aV(e.adler,r.pending_buf,r.pending-n,n)),r.gzindex=0}r.status=91}if(91===r.status){if(r.gzhead.comment){let t,n=r.pending;do{if(r.pending===r.pending_buf_size){if(r.gzhead.hcrc&&r.pending>n&&(e.adler=aV(e.adler,r.pending_buf,r.pending-n,n)),io(e),0!==r.pending)return r.last_flush=-1,aX;n=0}t=r.gzindex<r.gzhead.comment.length?255&r.gzhead.comment.charCodeAt(r.gzindex++):0,ic(r,t)}while(0!==t)r.gzhead.hcrc&&r.pending>n&&(e.adler=aV(e.adler,r.pending_buf,r.pending-n,n))}r.status=103}if(103===r.status){if(r.gzhead.hcrc){if(r.pending+2>r.pending_buf_size&&(io(e),0!==r.pending))return r.last_flush=-1,aX;ic(r,255&e.adler),ic(r,e.adler>>8&255),e.adler=0}if(r.status=113,io(e),0!==r.pending)return r.last_flush=-1,aX}if(0!==e.avail_in||0!==r.lookahead||t!==aG&&666!==r.status){let n=0===r.level?ig(r,t):r.strategy===a6?((e,t)=>{let r;for(;;){if(0===e.lookahead&&(ip(e),0===e.lookahead)){if(t===aG)return 1;break}if(e.match_length=0,r=az(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++,r&&(il(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===aY)?(il(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(il(e,!1),0===e.strm.avail_out)?1:2})(r,t):r.strategy===a3?((e,t)=>{let r,n,a,i,s=e.window;for(;;){if(e.lookahead<=258){if(ip(e),e.lookahead<=258&&t===aG)return 1;if(0===e.lookahead)break}if(e.match_length=0,e.lookahead>=3&&e.strstart>0&&(n=s[a=e.strstart-1])===s[++a]&&n===s[++a]&&n===s[++a]){i=e.strstart+258;do;while(n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&n===s[++a]&&a<i)e.match_length=258-(i-a),e.match_length>e.lookahead&&(e.match_length=e.lookahead)}if(e.match_length>=3?(r=az(e,1,e.match_length-3),e.lookahead-=e.match_length,e.strstart+=e.match_length,e.match_length=0):(r=az(e,0,e.window[e.strstart]),e.lookahead--,e.strstart++),r&&(il(e,!1),0===e.strm.avail_out))return 1}return(e.insert=0,t===aY)?(il(e,!0),0===e.strm.avail_out)?3:4:e.sym_next&&(il(e,!1),0===e.strm.avail_out)?1:2})(r,t):i_[r.level].func(r,t);if((3===n||4===n)&&(r.status=666),1===n||3===n)return 0===e.avail_out&&(r.last_flush=-1),aX;if(2===n&&(t===aq?aW(r):t!==aZ&&(a$(r,0,0,!1),t===aK&&(ia(r.head),0===r.lookahead&&(r.strstart=0,r.block_start=0,r.insert=0))),io(e),0===e.avail_out))return r.last_flush=-1,aX}return t!==aY?aX:r.wrap<=0?aJ:(2===r.wrap?(ic(r,255&e.adler),ic(r,e.adler>>8&255),ic(r,e.adler>>16&255),ic(r,e.adler>>24&255),ic(r,255&e.total_in),ic(r,e.total_in>>8&255),ic(r,e.total_in>>16&255),ic(r,e.total_in>>24&255)):(iu(r,e.adler>>>16),iu(r,65535&e.adler)),io(e),r.wrap>0&&(r.wrap=-r.wrap),0!==r.pending?aX:aJ)},deflateEnd:e=>{if(iE(e))return aQ;let t=e.state.status;return e.state=null,113===t?it(e,a0):aX},deflateSetDictionary:(e,t)=>{let r=t.length;if(iE(e))return aQ;let n=e.state,a=n.wrap;if(2===a||1===a&&42!==n.status||n.lookahead)return aQ;if(1===a&&(e.adler=aL(e.adler,t,r,0)),n.wrap=0,r>=n.w_size){0===a&&(ia(n.head),n.strstart=0,n.block_start=0,n.insert=0);let e=new Uint8Array(n.w_size);e.set(t.subarray(r-n.w_size,r),0),t=e,r=n.w_size}let i=e.avail_in,s=e.next_in,o=e.input;for(e.avail_in=r,e.next_in=0,e.input=t,ip(n);n.lookahead>=3;){let e=n.strstart,t=n.lookahead-2;do n.ins_h=is(n,n.ins_h,n.window[e+3-1]),n.prev[e&n.w_mask]=n.head[n.ins_h],n.head[n.ins_h]=e,e++;while(--t)n.strstart=e,n.lookahead=2,ip(n)}return n.strstart+=n.lookahead,n.block_start=n.strstart,n.insert=n.lookahead,n.lookahead=0,n.match_length=n.prev_length=2,n.match_available=0,e.next_in=s,e.input=o,e.avail_in=i,n.wrap=a,aX}};let iS=(e,t)=>Object.prototype.hasOwnProperty.call(e,t);var ix={assign:function(e){let t=Array.prototype.slice.call(arguments,1);for(;t.length;){let r=t.shift();if(r){if("object"!=typeof r)throw TypeError(r+"must be non-object");for(let t in r)iS(r,t)&&(e[t]=r[t])}}return e},flattenChunks:e=>{let t=0;for(let r=0,n=e.length;r<n;r++)t+=e[r].length;let r=new Uint8Array(t);for(let t=0,n=0,a=e.length;t<a;t++){let a=e[t];r.set(a,n),n+=a.length}return r}};let iT=!0;try{String.fromCharCode.apply(null,new Uint8Array(1))}catch(e){iT=!1}let iA=new Uint8Array(256);for(let e=0;e<256;e++)iA[e]=e>=252?6:e>=248?5:e>=240?4:e>=224?3:e>=192?2:1;iA[254]=iA[254]=1;var ik={string2buf:e=>{if("function"==typeof TextEncoder&&TextEncoder.prototype.encode)return new TextEncoder().encode(e);let t,r,n,a,i,s=e.length,o=0;for(a=0;a<s;a++)(64512&(r=e.charCodeAt(a)))==55296&&a+1<s&&(64512&(n=e.charCodeAt(a+1)))==56320&&(r=65536+(r-55296<<10)+(n-56320),a++),o+=r<128?1:r<2048?2:r<65536?3:4;for(i=0,t=new Uint8Array(o),a=0;i<o;a++)(64512&(r=e.charCodeAt(a)))==55296&&a+1<s&&(64512&(n=e.charCodeAt(a+1)))==56320&&(r=65536+(r-55296<<10)+(n-56320),a++),r<128?t[i++]=r:(r<2048?t[i++]=192|r>>>6:(r<65536?t[i++]=224|r>>>12:(t[i++]=240|r>>>18,t[i++]=128|r>>>12&63),t[i++]=128|r>>>6&63),t[i++]=128|63&r);return t},buf2string:(e,t)=>{let r,n,a=t||e.length;if("function"==typeof TextDecoder&&TextDecoder.prototype.decode)return new TextDecoder().decode(e.subarray(0,t));let i=Array(2*a);for(n=0,r=0;r<a;){let t=e[r++];if(t<128){i[n++]=t;continue}let s=iA[t];if(s>4){i[n++]=65533,r+=s-1;continue}for(t&=2===s?31:3===s?15:7;s>1&&r<a;)t=t<<6|63&e[r++],s--;if(s>1){i[n++]=65533;continue}t<65536?i[n++]=t:(t-=65536,i[n++]=55296|t>>10&1023,i[n++]=56320|1023&t)}return((e,t)=>{if(t<65534&&e.subarray&&iT)return String.fromCharCode.apply(null,e.length===t?e:e.subarray(0,t));let r="";for(let n=0;n<t;n++)r+=String.fromCharCode(e[n]);return r})(i,n)},utf8border:(e,t)=>{(t=t||e.length)>e.length&&(t=e.length);let r=t-1;for(;r>=0&&(192&e[r])==128;)r--;return r<0||0===r?t:r+iA[e[r]]>t?r:t}},iI=function(){this.input=null,this.next_in=0,this.avail_in=0,this.total_in=0,this.output=null,this.next_out=0,this.avail_out=0,this.total_out=0,this.msg="",this.state=null,this.data_type=2,this.adler=0};let iC=Object.prototype.toString,{Z_NO_FLUSH:iB,Z_SYNC_FLUSH:iO,Z_FULL_FLUSH:iN,Z_FINISH:iP,Z_OK:iD,Z_STREAM_END:iR,Z_DEFAULT_COMPRESSION:iL,Z_DEFAULT_STRATEGY:iU,Z_DEFLATED:iV}=aH;function iF(e){this.options=ix.assign({level:iL,method:iV,chunkSize:16384,windowBits:15,memLevel:8,strategy:iU},e||{});let t=this.options;t.raw&&t.windowBits>0?t.windowBits=-t.windowBits:t.gzip&&t.windowBits>0&&t.windowBits<16&&(t.windowBits+=16),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new iI,this.strm.avail_out=0;let r=iv.deflateInit2(this.strm,t.level,t.method,t.windowBits,t.memLevel,t.strategy);if(r!==iD)throw Error(aF[r]);if(t.header&&iv.deflateSetHeader(this.strm,t.header),t.dictionary){let e;if(e="string"==typeof t.dictionary?ik.string2buf(t.dictionary):"[object ArrayBuffer]"===iC.call(t.dictionary)?new Uint8Array(t.dictionary):t.dictionary,(r=iv.deflateSetDictionary(this.strm,e))!==iD)throw Error(aF[r]);this._dict_set=!0}}function iH(e,t){let r=new iF(t);if(r.push(e,!0),r.err)throw r.msg||aF[r.err];return r.result}iF.prototype.push=function(e,t){let r,n,a=this.strm,i=this.options.chunkSize;if(this.ended)return!1;for(n=t===~~t?t:!0===t?iP:iB,"string"==typeof e?a.input=ik.string2buf(e):"[object ArrayBuffer]"===iC.call(e)?a.input=new Uint8Array(e):a.input=e,a.next_in=0,a.avail_in=a.input.length;;){if(0===a.avail_out&&(a.output=new Uint8Array(i),a.next_out=0,a.avail_out=i),(n===iO||n===iN)&&a.avail_out<=6){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if((r=iv.deflate(a,n))===iR)return a.next_out>0&&this.onData(a.output.subarray(0,a.next_out)),r=iv.deflateEnd(this.strm),this.onEnd(r),this.ended=!0,r===iD;if(0===a.avail_out){this.onData(a.output);continue}if(n>0&&a.next_out>0){this.onData(a.output.subarray(0,a.next_out)),a.avail_out=0;continue}if(0===a.avail_in)break}return!0},iF.prototype.onData=function(e){this.chunks.push(e)},iF.prototype.onEnd=function(e){e===iD&&(this.result=ix.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};var iM=function(e,t){let r,n,a,i,s,o,l,c,u,d,h,f,p,g,m,y,b,_,w,E,v,S,x,T,A=e.state;r=e.next_in,x=e.input,n=r+(e.avail_in-5),a=e.next_out,T=e.output,i=a-(t-e.avail_out),s=a+(e.avail_out-257),o=A.dmax,l=A.wsize,c=A.whave,u=A.wnext,d=A.window,h=A.hold,f=A.bits,p=A.lencode,g=A.distcode,m=(1<<A.lenbits)-1,y=(1<<A.distbits)-1;t:do for(f<15&&(h+=x[r++]<<f,f+=8,h+=x[r++]<<f,f+=8),b=p[h&m];;){if(h>>>=_=b>>>24,f-=_,0==(_=b>>>16&255))T[a++]=65535&b;else if(16&_)for(w=65535&b,(_&=15)&&(f<_&&(h+=x[r++]<<f,f+=8),w+=h&(1<<_)-1,h>>>=_,f-=_),f<15&&(h+=x[r++]<<f,f+=8,h+=x[r++]<<f,f+=8),b=g[h&y];;){if(h>>>=_=b>>>24,f-=_,16&(_=b>>>16&255)){if(E=65535&b,f<(_&=15)&&(h+=x[r++]<<f,(f+=8)<_&&(h+=x[r++]<<f,f+=8)),(E+=h&(1<<_)-1)>o){e.msg="invalid distance too far back",A.mode=16209;break t}if(h>>>=_,f-=_,E>(_=a-i)){if((_=E-_)>c&&A.sane){e.msg="invalid distance too far back",A.mode=16209;break t}if(v=0,S=d,0===u){if(v+=l-_,_<w){w-=_;do T[a++]=d[v++];while(--_)v=a-E,S=T}}else if(u<_){if(v+=l+u-_,(_-=u)<w){w-=_;do T[a++]=d[v++];while(--_)if(v=0,u<w){w-=_=u;do T[a++]=d[v++];while(--_)v=a-E,S=T}}}else if(v+=u-_,_<w){w-=_;do T[a++]=d[v++];while(--_)v=a-E,S=T}for(;w>2;)T[a++]=S[v++],T[a++]=S[v++],T[a++]=S[v++],w-=3;w&&(T[a++]=S[v++],w>1&&(T[a++]=S[v++]))}else{v=a-E;do T[a++]=T[v++],T[a++]=T[v++],T[a++]=T[v++],w-=3;while(w>2)w&&(T[a++]=T[v++],w>1&&(T[a++]=T[v++]))}}else if((64&_)==0){b=g[(65535&b)+(h&(1<<_)-1)];continue}else{e.msg="invalid distance code",A.mode=16209;break t}break}else if((64&_)==0){b=p[(65535&b)+(h&(1<<_)-1)];continue}else if(32&_){A.mode=16191;break t}else{e.msg="invalid literal/length code",A.mode=16209;break t}break}while(r<n&&a<s)r-=w=f>>3,f-=w<<3,h&=(1<<f)-1,e.next_in=r,e.next_out=a,e.avail_in=r<n?5+(n-r):5-(r-n),e.avail_out=a<s?257+(s-a):257-(a-s),A.hold=h,A.bits=f};let i$=new Uint16Array([3,4,5,6,7,8,9,10,11,13,15,17,19,23,27,31,35,43,51,59,67,83,99,115,131,163,195,227,258,0,0]),ij=new Uint8Array([16,16,16,16,16,16,16,16,17,17,17,17,18,18,18,18,19,19,19,19,20,20,20,20,21,21,21,21,16,72,78]),iz=new Uint16Array([1,2,3,4,5,7,9,13,17,25,33,49,65,97,129,193,257,385,513,769,1025,1537,2049,3073,4097,6145,8193,12289,16385,24577,0,0]),iW=new Uint8Array([16,16,16,16,17,17,18,18,19,19,20,20,21,21,22,22,23,23,24,24,25,25,26,26,27,27,28,28,29,29,64,64]);var iG=(e,t,r,n,a,i,s,o)=>{let l,c,u,d,h,f,p,g,m,y=o.bits,b=0,_=0,w=0,E=0,v=0,S=0,x=0,T=0,A=0,k=0,I=null,C=new Uint16Array(16),B=new Uint16Array(16),O=null;for(b=0;b<=15;b++)C[b]=0;for(_=0;_<n;_++)C[t[r+_]]++;for(E=15,v=y;E>=1&&0===C[E];E--);if(v>E&&(v=E),0===E)return a[i++]=0x1400000,a[i++]=0x1400000,o.bits=1,0;for(w=1;w<E&&0===C[w];w++);for(v<w&&(v=w),T=1,b=1;b<=15;b++)if(T<<=1,(T-=C[b])<0)return -1;if(T>0&&(0===e||1!==E))return -1;for(b=1,B[1]=0;b<15;b++)B[b+1]=B[b]+C[b];for(_=0;_<n;_++)0!==t[r+_]&&(s[B[t[r+_]]++]=_);if(0===e?(I=O=s,f=20):1===e?(I=i$,O=ij,f=257):(I=iz,O=iW,f=0),k=0,_=0,b=w,h=i,S=v,x=0,u=-1,d=(A=1<<v)-1,1===e&&A>852||2===e&&A>592)return 1;for(;;){p=b-x,s[_]+1<f?(g=0,m=s[_]):s[_]>=f?(g=O[s[_]-f],m=I[s[_]-f]):(g=96,m=0),l=1<<b-x,w=c=1<<S;do a[h+(k>>x)+(c-=l)]=p<<24|g<<16|m;while(0!==c)for(l=1<<b-1;k&l;)l>>=1;if(0!==l?(k&=l-1,k+=l):k=0,_++,0==--C[b]){if(b===E)break;b=t[r+s[_]]}if(b>v&&(k&d)!==u){for(0===x&&(x=v),h+=w,T=1<<(S=b-x);S+x<E&&!((T-=C[S+x])<=0);)S++,T<<=1;if(A+=1<<S,1===e&&A>852||2===e&&A>592)return 1;a[u=k&d]=v<<24|S<<16|h-i}}return 0!==k&&(a[h+k]=b-x<<24|4194304),o.bits=v,0};let{Z_FINISH:iq,Z_BLOCK:iK,Z_TREES:iY,Z_OK:iZ,Z_STREAM_END:iX,Z_NEED_DICT:iJ,Z_STREAM_ERROR:iQ,Z_DATA_ERROR:i0,Z_MEM_ERROR:i1,Z_BUF_ERROR:i2,Z_DEFLATED:i5}=aH,i6=e=>(e>>>24&255)+(e>>>8&65280)+((65280&e)<<8)+((255&e)<<24);function i3(){this.strm=null,this.mode=0,this.last=!1,this.wrap=0,this.havedict=!1,this.flags=0,this.dmax=0,this.check=0,this.total=0,this.head=null,this.wbits=0,this.wsize=0,this.whave=0,this.wnext=0,this.window=null,this.hold=0,this.bits=0,this.length=0,this.offset=0,this.extra=0,this.lencode=null,this.distcode=null,this.lenbits=0,this.distbits=0,this.ncode=0,this.nlen=0,this.ndist=0,this.have=0,this.next=null,this.lens=new Uint16Array(320),this.work=new Uint16Array(288),this.lendyn=null,this.distdyn=null,this.sane=0,this.back=0,this.was=0}let i8=e=>{if(!e)return 1;let t=e.state;return+(!t||t.strm!==e||t.mode<16180||t.mode>16211)},i4=e=>{if(i8(e))return iQ;let t=e.state;return t.wsize=0,t.whave=0,t.wnext=0,(e=>{if(i8(e))return iQ;let t=e.state;return e.total_in=e.total_out=t.total=0,e.msg="",t.wrap&&(e.adler=1&t.wrap),t.mode=16180,t.last=0,t.havedict=0,t.flags=-1,t.dmax=32768,t.head=null,t.hold=0,t.bits=0,t.lencode=t.lendyn=new Int32Array(852),t.distcode=t.distdyn=new Int32Array(592),t.sane=1,t.back=-1,iZ})(e)},i7=!0,i9=e=>{if(i7){a=new Int32Array(512),i=new Int32Array(32);let t=0;for(;t<144;)e.lens[t++]=8;for(;t<256;)e.lens[t++]=9;for(;t<280;)e.lens[t++]=7;for(;t<288;)e.lens[t++]=8;for(iG(1,e.lens,0,288,a,0,e.work,{bits:9}),t=0;t<32;)e.lens[t++]=5;iG(2,e.lens,0,32,i,0,e.work,{bits:5}),i7=!1}e.lencode=a,e.lenbits=9,e.distcode=i,e.distbits=5},se=(e,t,r,n)=>{let a,i=e.state;return null===i.window&&(i.wsize=1<<i.wbits,i.wnext=0,i.whave=0,i.window=new Uint8Array(i.wsize)),n>=i.wsize?(i.window.set(t.subarray(r-i.wsize,r),0),i.wnext=0,i.whave=i.wsize):((a=i.wsize-i.wnext)>n&&(a=n),i.window.set(t.subarray(r-n,r-n+a),i.wnext),(n-=a)?(i.window.set(t.subarray(r-n,r),0),i.wnext=n,i.whave=i.wsize):(i.wnext+=a,i.wnext===i.wsize&&(i.wnext=0),i.whave<i.wsize&&(i.whave+=a))),0};var st={inflateReset:i4,inflateInit2:(e,t)=>{if(!e)return iQ;let r=new i3;e.state=r,r.strm=e,r.window=null,r.mode=16180;let n=((e,t)=>{let r;if(i8(e))return iQ;let n=e.state;return(t<0?(r=0,t=-t):(r=(t>>4)+5,t<48&&(t&=15)),t&&(t<8||t>15))?iQ:(null!==n.window&&n.wbits!==t&&(n.window=null),n.wrap=r,n.wbits=t,i4(e))})(e,t);return n!==iZ&&(e.state=null),n},inflate:(e,t)=>{let r,n,a,i,s,o,l,c,u,d,h,f,p,g,m,y,b,_,w,E,v,S,x,T,A=0,k=new Uint8Array(4),I=new Uint8Array([16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15]);if(i8(e)||!e.output||!e.input&&0!==e.avail_in)return iQ;16191===(r=e.state).mode&&(r.mode=16192),s=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,n=e.input,o=e.avail_in,c=r.hold,u=r.bits,d=o,h=l,S=iZ;r:for(;;)switch(r.mode){case 16180:if(0===r.wrap){r.mode=16192;break}for(;u<16;){if(0===o)break r;o--,c+=n[i++]<<u,u+=8}if(2&r.wrap&&35615===c){0===r.wbits&&(r.wbits=15),r.check=0,k[0]=255&c,k[1]=c>>>8&255,r.check=aV(r.check,k,2,0),c=0,u=0,r.mode=16181;break}if(r.head&&(r.head.done=!1),!(1&r.wrap)||(((255&c)<<8)+(c>>8))%31){e.msg="incorrect header check",r.mode=16209;break}if((15&c)!==i5){e.msg="unknown compression method",r.mode=16209;break}if(c>>>=4,u-=4,v=(15&c)+8,0===r.wbits&&(r.wbits=v),v>15||v>r.wbits){e.msg="invalid window size",r.mode=16209;break}r.dmax=1<<r.wbits,r.flags=0,e.adler=r.check=1,r.mode=512&c?16189:16191,c=0,u=0;break;case 16181:for(;u<16;){if(0===o)break r;o--,c+=n[i++]<<u,u+=8}if(r.flags=c,(255&r.flags)!==i5){e.msg="unknown compression method",r.mode=16209;break}if(57344&r.flags){e.msg="unknown header flags set",r.mode=16209;break}r.head&&(r.head.text=c>>8&1),512&r.flags&&4&r.wrap&&(k[0]=255&c,k[1]=c>>>8&255,r.check=aV(r.check,k,2,0)),c=0,u=0,r.mode=16182;case 16182:for(;u<32;){if(0===o)break r;o--,c+=n[i++]<<u,u+=8}r.head&&(r.head.time=c),512&r.flags&&4&r.wrap&&(k[0]=255&c,k[1]=c>>>8&255,k[2]=c>>>16&255,k[3]=c>>>24&255,r.check=aV(r.check,k,4,0)),c=0,u=0,r.mode=16183;case 16183:for(;u<16;){if(0===o)break r;o--,c+=n[i++]<<u,u+=8}r.head&&(r.head.xflags=255&c,r.head.os=c>>8),512&r.flags&&4&r.wrap&&(k[0]=255&c,k[1]=c>>>8&255,r.check=aV(r.check,k,2,0)),c=0,u=0,r.mode=16184;case 16184:if(1024&r.flags){for(;u<16;){if(0===o)break r;o--,c+=n[i++]<<u,u+=8}r.length=c,r.head&&(r.head.extra_len=c),512&r.flags&&4&r.wrap&&(k[0]=255&c,k[1]=c>>>8&255,r.check=aV(r.check,k,2,0)),c=0,u=0}else r.head&&(r.head.extra=null);r.mode=16185;case 16185:if(1024&r.flags&&((f=r.length)>o&&(f=o),f&&(r.head&&(v=r.head.extra_len-r.length,r.head.extra||(r.head.extra=new Uint8Array(r.head.extra_len)),r.head.extra.set(n.subarray(i,i+f),v)),512&r.flags&&4&r.wrap&&(r.check=aV(r.check,n,f,i)),o-=f,i+=f,r.length-=f),r.length))break r;r.length=0,r.mode=16186;case 16186:if(2048&r.flags){if(0===o)break r;f=0;do v=n[i+f++],r.head&&v&&r.length<65536&&(r.head.name+=String.fromCharCode(v));while(v&&f<o)if(512&r.flags&&4&r.wrap&&(r.check=aV(r.check,n,f,i)),o-=f,i+=f,v)break r}else r.head&&(r.head.name=null);r.length=0,r.mode=16187;case 16187:if(4096&r.flags){if(0===o)break r;f=0;do v=n[i+f++],r.head&&v&&r.length<65536&&(r.head.comment+=String.fromCharCode(v));while(v&&f<o)if(512&r.flags&&4&r.wrap&&(r.check=aV(r.check,n,f,i)),o-=f,i+=f,v)break r}else r.head&&(r.head.comment=null);r.mode=16188;case 16188:if(512&r.flags){for(;u<16;){if(0===o)break r;o--,c+=n[i++]<<u,u+=8}if(4&r.wrap&&c!==(65535&r.check)){e.msg="header crc mismatch",r.mode=16209;break}c=0,u=0}r.head&&(r.head.hcrc=r.flags>>9&1,r.head.done=!0),e.adler=r.check=0,r.mode=16191;break;case 16189:for(;u<32;){if(0===o)break r;o--,c+=n[i++]<<u,u+=8}e.adler=r.check=i6(c),c=0,u=0,r.mode=16190;case 16190:if(0===r.havedict)return e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,r.hold=c,r.bits=u,iJ;e.adler=r.check=1,r.mode=16191;case 16191:if(t===iK||t===iY)break r;case 16192:if(r.last){c>>>=7&u,u-=7&u,r.mode=16206;break}for(;u<3;){if(0===o)break r;o--,c+=n[i++]<<u,u+=8}switch(r.last=1&c,u-=1,3&(c>>>=1)){case 0:r.mode=16193;break;case 1:if(i9(r),r.mode=16199,t===iY){c>>>=2,u-=2;break r}break;case 2:r.mode=16196;break;case 3:e.msg="invalid block type",r.mode=16209}c>>>=2,u-=2;break;case 16193:for(c>>>=7&u,u-=7&u;u<32;){if(0===o)break r;o--,c+=n[i++]<<u,u+=8}if((65535&c)!=(c>>>16^65535)){e.msg="invalid stored block lengths",r.mode=16209;break}if(r.length=65535&c,c=0,u=0,r.mode=16194,t===iY)break r;case 16194:r.mode=16195;case 16195:if(f=r.length){if(f>o&&(f=o),f>l&&(f=l),0===f)break r;a.set(n.subarray(i,i+f),s),o-=f,i+=f,l-=f,s+=f,r.length-=f;break}r.mode=16191;break;case 16196:for(;u<14;){if(0===o)break r;o--,c+=n[i++]<<u,u+=8}if(r.nlen=(31&c)+257,u-=5,r.ndist=(31&(c>>>=5))+1,u-=5,r.ncode=(15&(c>>>=5))+4,c>>>=4,u-=4,r.nlen>286||r.ndist>30){e.msg="too many length or distance symbols",r.mode=16209;break}r.have=0,r.mode=16197;case 16197:for(;r.have<r.ncode;){for(;u<3;){if(0===o)break r;o--,c+=n[i++]<<u,u+=8}r.lens[I[r.have++]]=7&c,c>>>=3,u-=3}for(;r.have<19;)r.lens[I[r.have++]]=0;if(r.lencode=r.lendyn,r.lenbits=7,x={bits:r.lenbits},S=iG(0,r.lens,0,19,r.lencode,0,r.work,x),r.lenbits=x.bits,S){e.msg="invalid code lengths set",r.mode=16209;break}r.have=0,r.mode=16198;case 16198:for(;r.have<r.nlen+r.ndist;){for(;m=(A=r.lencode[c&(1<<r.lenbits)-1])>>>24,y=A>>>16&255,b=65535&A,!(m<=u);){if(0===o)break r;o--,c+=n[i++]<<u,u+=8}if(b<16)c>>>=m,u-=m,r.lens[r.have++]=b;else{if(16===b){for(T=m+2;u<T;){if(0===o)break r;o--,c+=n[i++]<<u,u+=8}if(c>>>=m,u-=m,0===r.have){e.msg="invalid bit length repeat",r.mode=16209;break}v=r.lens[r.have-1],f=3+(3&c),c>>>=2,u-=2}else if(17===b){for(T=m+3;u<T;){if(0===o)break r;o--,c+=n[i++]<<u,u+=8}c>>>=m,u-=m,v=0,f=3+(7&c),c>>>=3,u-=3}else{for(T=m+7;u<T;){if(0===o)break r;o--,c+=n[i++]<<u,u+=8}c>>>=m,u-=m,v=0,f=11+(127&c),c>>>=7,u-=7}if(r.have+f>r.nlen+r.ndist){e.msg="invalid bit length repeat",r.mode=16209;break}for(;f--;)r.lens[r.have++]=v}}if(16209===r.mode)break;if(0===r.lens[256]){e.msg="invalid code -- missing end-of-block",r.mode=16209;break}if(r.lenbits=9,x={bits:r.lenbits},S=iG(1,r.lens,0,r.nlen,r.lencode,0,r.work,x),r.lenbits=x.bits,S){e.msg="invalid literal/lengths set",r.mode=16209;break}if(r.distbits=6,r.distcode=r.distdyn,x={bits:r.distbits},S=iG(2,r.lens,r.nlen,r.ndist,r.distcode,0,r.work,x),r.distbits=x.bits,S){e.msg="invalid distances set",r.mode=16209;break}if(r.mode=16199,t===iY)break r;case 16199:r.mode=16200;case 16200:if(o>=6&&l>=258){e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,r.hold=c,r.bits=u,iM(e,h),s=e.next_out,a=e.output,l=e.avail_out,i=e.next_in,n=e.input,o=e.avail_in,c=r.hold,u=r.bits,16191===r.mode&&(r.back=-1);break}for(r.back=0;m=(A=r.lencode[c&(1<<r.lenbits)-1])>>>24,y=A>>>16&255,b=65535&A,!(m<=u);){if(0===o)break r;o--,c+=n[i++]<<u,u+=8}if(y&&(240&y)==0){for(_=m,w=y,E=b;m=(A=r.lencode[E+((c&(1<<_+w)-1)>>_)])>>>24,y=A>>>16&255,b=65535&A,!(_+m<=u);){if(0===o)break r;o--,c+=n[i++]<<u,u+=8}c>>>=_,u-=_,r.back+=_}if(c>>>=m,u-=m,r.back+=m,r.length=b,0===y){r.mode=16205;break}if(32&y){r.back=-1,r.mode=16191;break}if(64&y){e.msg="invalid literal/length code",r.mode=16209;break}r.extra=15&y,r.mode=16201;case 16201:if(r.extra){for(T=r.extra;u<T;){if(0===o)break r;o--,c+=n[i++]<<u,u+=8}r.length+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}r.was=r.length,r.mode=16202;case 16202:for(;m=(A=r.distcode[c&(1<<r.distbits)-1])>>>24,y=A>>>16&255,b=65535&A,!(m<=u);){if(0===o)break r;o--,c+=n[i++]<<u,u+=8}if((240&y)==0){for(_=m,w=y,E=b;m=(A=r.distcode[E+((c&(1<<_+w)-1)>>_)])>>>24,y=A>>>16&255,b=65535&A,!(_+m<=u);){if(0===o)break r;o--,c+=n[i++]<<u,u+=8}c>>>=_,u-=_,r.back+=_}if(c>>>=m,u-=m,r.back+=m,64&y){e.msg="invalid distance code",r.mode=16209;break}r.offset=b,r.extra=15&y,r.mode=16203;case 16203:if(r.extra){for(T=r.extra;u<T;){if(0===o)break r;o--,c+=n[i++]<<u,u+=8}r.offset+=c&(1<<r.extra)-1,c>>>=r.extra,u-=r.extra,r.back+=r.extra}if(r.offset>r.dmax){e.msg="invalid distance too far back",r.mode=16209;break}r.mode=16204;case 16204:if(0===l)break r;if(f=h-l,r.offset>f){if((f=r.offset-f)>r.whave&&r.sane){e.msg="invalid distance too far back",r.mode=16209;break}f>r.wnext?(f-=r.wnext,p=r.wsize-f):p=r.wnext-f,f>r.length&&(f=r.length),g=r.window}else g=a,p=s-r.offset,f=r.length;f>l&&(f=l),l-=f,r.length-=f;do a[s++]=g[p++];while(--f)0===r.length&&(r.mode=16200);break;case 16205:if(0===l)break r;a[s++]=r.length,l--,r.mode=16200;break;case 16206:if(r.wrap){for(;u<32;){if(0===o)break r;o--,c|=n[i++]<<u,u+=8}if(h-=l,e.total_out+=h,r.total+=h,4&r.wrap&&h&&(e.adler=r.check=r.flags?aV(r.check,a,h,s-h):aL(r.check,a,h,s-h)),h=l,4&r.wrap&&(r.flags?c:i6(c))!==r.check){e.msg="incorrect data check",r.mode=16209;break}c=0,u=0}r.mode=16207;case 16207:if(r.wrap&&r.flags){for(;u<32;){if(0===o)break r;o--,c+=n[i++]<<u,u+=8}if(4&r.wrap&&c!==(0|r.total)){e.msg="incorrect length check",r.mode=16209;break}c=0,u=0}r.mode=16208;case 16208:S=iX;break r;case 16209:S=i0;break r;case 16210:return i1;default:return iQ}return e.next_out=s,e.avail_out=l,e.next_in=i,e.avail_in=o,r.hold=c,r.bits=u,(r.wsize||h!==e.avail_out&&r.mode<16209&&(r.mode<16206||t!==iq))&&se(e,e.output,e.next_out,h-e.avail_out),d-=e.avail_in,h-=e.avail_out,e.total_in+=d,e.total_out+=h,r.total+=h,4&r.wrap&&h&&(e.adler=r.check=r.flags?aV(r.check,a,h,e.next_out-h):aL(r.check,a,h,e.next_out-h)),e.data_type=r.bits+64*!!r.last+128*(16191===r.mode)+256*(16199===r.mode||16194===r.mode),(0===d&&0===h||t===iq)&&S===iZ&&(S=i2),S},inflateEnd:e=>{if(i8(e))return iQ;let t=e.state;return t.window&&(t.window=null),e.state=null,iZ},inflateGetHeader:(e,t)=>{if(i8(e))return iQ;let r=e.state;return(2&r.wrap)==0?iQ:(r.head=t,t.done=!1,iZ)},inflateSetDictionary:(e,t)=>{let r,n=t.length;return i8(e)||0!==(r=e.state).wrap&&16190!==r.mode?iQ:16190===r.mode&&aL(1,t,n,0)!==r.check?i0:se(e,t,n,n)?(r.mode=16210,i1):(r.havedict=1,iZ)}},sr=function(){this.text=0,this.time=0,this.xflags=0,this.os=0,this.extra=null,this.extra_len=0,this.name="",this.comment="",this.hcrc=0,this.done=!1};let sn=Object.prototype.toString,{Z_NO_FLUSH:sa,Z_FINISH:si,Z_OK:ss,Z_STREAM_END:so,Z_NEED_DICT:sl,Z_STREAM_ERROR:sc,Z_DATA_ERROR:su,Z_MEM_ERROR:sd}=aH;function sh(e){this.options=ix.assign({chunkSize:65536,windowBits:15,to:""},e||{});let t=this.options;t.raw&&t.windowBits>=0&&t.windowBits<16&&(t.windowBits=-t.windowBits,0===t.windowBits&&(t.windowBits=-15)),t.windowBits>=0&&t.windowBits<16&&!(e&&e.windowBits)&&(t.windowBits+=32),t.windowBits>15&&t.windowBits<48&&(15&t.windowBits)==0&&(t.windowBits|=15),this.err=0,this.msg="",this.ended=!1,this.chunks=[],this.strm=new iI,this.strm.avail_out=0;let r=st.inflateInit2(this.strm,t.windowBits);if(r!==ss||(this.header=new sr,st.inflateGetHeader(this.strm,this.header),t.dictionary&&("string"==typeof t.dictionary?t.dictionary=ik.string2buf(t.dictionary):"[object ArrayBuffer]"===sn.call(t.dictionary)&&(t.dictionary=new Uint8Array(t.dictionary)),t.raw)&&(r=st.inflateSetDictionary(this.strm,t.dictionary))!==ss))throw Error(aF[r])}function sf(e,t){let r=new sh(t);if(r.push(e),r.err)throw r.msg||aF[r.err];return r.result}sh.prototype.push=function(e,t){let r,n,a,i=this.strm,s=this.options.chunkSize,o=this.options.dictionary;if(this.ended)return!1;for(n=t===~~t?t:!0===t?si:sa,"[object ArrayBuffer]"===sn.call(e)?i.input=new Uint8Array(e):i.input=e,i.next_in=0,i.avail_in=i.input.length;;){for(0===i.avail_out&&(i.output=new Uint8Array(s),i.next_out=0,i.avail_out=s),(r=st.inflate(i,n))===sl&&o&&((r=st.inflateSetDictionary(i,o))===ss?r=st.inflate(i,n):r===su&&(r=sl));i.avail_in>0&&r===so&&i.state.wrap>0&&0!==e[i.next_in];)st.inflateReset(i),r=st.inflate(i,n);switch(r){case sc:case su:case sl:case sd:return this.onEnd(r),this.ended=!0,!1}if(a=i.avail_out,i.next_out&&(0===i.avail_out||r===so))if("string"===this.options.to){let e=ik.utf8border(i.output,i.next_out),t=i.next_out-e,r=ik.buf2string(i.output,e);i.next_out=t,i.avail_out=s-t,t&&i.output.set(i.output.subarray(e,e+t),0),this.onData(r)}else this.onData(i.output.length===i.next_out?i.output:i.output.subarray(0,i.next_out));if(r!==ss||0!==a){if(r===so)return r=st.inflateEnd(this.strm),this.onEnd(r),this.ended=!0,!0;if(0===i.avail_in)break}}return!0},sh.prototype.onData=function(e){this.chunks.push(e)},sh.prototype.onEnd=function(e){e===ss&&("string"===this.options.to?this.result=this.chunks.join(""):this.result=ix.flattenChunks(this.chunks)),this.chunks=[],this.err=e,this.msg=this.strm.msg};let{Deflate:sp,deflate:sg,deflateRaw:sm,gzip:sy}={Deflate:iF,deflate:iH,deflateRaw:function(e,t){return(t=t||{}).raw=!0,iH(e,t)},gzip:function(e,t){return(t=t||{}).gzip=!0,iH(e,t)},constants:aH},{Inflate:sb,inflate:s_,inflateRaw:sw,ungzip:sE}={Inflate:sh,inflate:sf,inflateRaw:function(e,t){return(t=t||{}).raw=!0,sf(e,t)},ungzip:sf,constants:aH},sv=BigInt("0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffffc2f"),sS=BigInt("0xfffffffffffffffffffffffffffffffebaaedce6af48a03bbfd25e8cd0364141"),sx=BigInt(1),sT=BigInt(2),sA=(e,t)=>(e+t/sT)/t,sk=rJ(sv,void 0,void 0,{sqrt:function(e){let t=BigInt(3),r=BigInt(6),n=BigInt(11),a=BigInt(22),i=BigInt(23),s=BigInt(44),o=BigInt(88),l=e*e*e%sv,c=l*l*e%sv,u=rG(c,t,sv)*c%sv,d=rG(u,t,sv)*c%sv,h=rG(d,sT,sv)*l%sv,f=rG(h,n,sv)*h%sv,p=rG(f,a,sv)*f%sv,g=rG(p,s,sv)*p%sv,m=rG(g,o,sv)*g%sv,y=rG(m,s,sv)*p%sv,b=rG(y,t,sv)*c%sv,_=rG(b,i,sv)*f%sv,w=rG(_,r,sv)*l%sv,E=rG(w,sT,sv);if(!sk.eql(sk.sqr(E),e))throw Error("Cannot find square root");return E}}),sI=function(e,t){let r=t=>np({...e,...n_(t)});return Object.freeze({...r(t),create:r})}({a:BigInt(0),b:BigInt(7),Fp:sk,n:sS,Gx:BigInt("55066263022277343669578718895168534326250603453777594175500187360389116729240"),Gy:BigInt("32670510020758816978083085130507043184471273380659243275938904335757337482424"),h:BigInt(1),lowS:!0,endo:{beta:BigInt("0x7ae96a2b657c07106e64479eac3434e99cf0497512f58995c1396c28719501ee"),splitScalar:e=>{let t=BigInt("0x3086d221a7d46bcde86c90e49284eb15"),r=-sx*BigInt("0xe4437ed6010e88286f547fa90abfe4c3"),n=BigInt("0x114ca50f7a8e2f3f657c1108d9d44cfd8"),a=BigInt("0x100000000000000000000000000000000"),i=sA(t*e,sS),s=sA(-r*e,sS),o=rW(e-i*t-s*n,sS),l=rW(-i*r-s*t,sS),c=o>a,u=l>a;if(c&&(o=sS-o),u&&(l=sS-l),o>a||l>a)throw Error("splitScalar: Endomorphism failed, k="+e);return{k1neg:c,k1:o,k2neg:u,k2:l}}}},rw),sC=(BigInt(0),{});sI.ProjectivePoint;let sB=function(e,t){let r=t.map(e=>Array.from(e).reverse());return(t,n)=>{let[a,i,s,o]=r.map(r=>r.reduce((r,n)=>e.add(e.mul(r,t),n)));return t=e.div(a,i),n=e.mul(n,e.div(s,o)),{x:t,y:n}}}(sk,[["0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa8c7","0x7d3d4c80bc321d5b9f315cea7fd44c5d595d2fc0bf63b92dfff1044f17c6581","0x534c328d23f234e6e2a413deca25caece4506144037c40314ecbd0b53d9dd262","0x8e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38e38daaaaa88c"],["0xd35771193d94918a9ca34ccbb7b640dd86cd409542f8487d9fe6b745781eb49b","0xedadc6f64383dc1df7c4b2d51b54225406d36b641f5e41bbc52a56612a8c6d14","0x0000000000000000000000000000000000000000000000000000000000000001"],["0x4bda12f684bda12f684bda12f684bda12f684bda12f684bda12f684b8e38e23c","0xc75e0c32d5cb7c0fa9d0a54b12a0a6d5647ab046d686da6fdffc90fc201d71a3","0x29a6194691f91a73715209ef6512e576722830a201be2018a765e85a9ecee931","0x2f684bda12f684bda12f684bda12f684bda12f684bda12f684bda12f38e38d84"],["0xfffffffffffffffffffffffffffffffffffffffffffffffffffffffefffff93b","0x7a06534bb8bdb49fd5e9e6632722c2989467c1bfc8e8d978dfb425d2685c2573","0x6484aa716545ca2cf3a70c3fa8fe337e0a3d21162f0d6299a7bf8192bfd2a76f","0x0000000000000000000000000000000000000000000000000000000000000001"]].map(e=>e.map(e=>BigInt(e)))),sO=nm(sk,{A:BigInt("0x3f8731abdd661adca08a5558f0f5d272e953d363cb6f0e5d405447c01a444533"),B:BigInt("1771"),Z:sk.create(BigInt("-11"))});!function(e,t,r){if("function"!=typeof t)throw Error("mapToCurve() must be defined")}(sI.ProjectivePoint,e=>{let{x:t,y:r}=sO(sk.create(e[0]));return sB(t,r)},sk.ORDER);var sN=e.i(419630),sP=Object.defineProperty,sD=Object.getOwnPropertyDescriptor,sR=Object.getOwnPropertyNames,sL=Object.prototype.hasOwnProperty,sU=(e,t)=>{for(var r in t)sP(e,r,{get:t[r],enumerable:!0})},sV=(e,t,r,n)=>{if(t&&"object"==typeof t||"function"==typeof t)for(let a of sR(t))sL.call(e,a)||a===r||sP(e,a,{get:()=>t[a],enumerable:!(n=sD(t,a))||n.enumerable});return e};sU({},{ADDR_BOUND:()=>s9,API_VERSION:()=>s8,BaseUrl:()=>ou,DEFAULT_GLOBAL_CONFIG:()=>og,HARDENING_4BYTES:()=>oc,HARDENING_BYTE:()=>ol,IS_BROWSER:()=>sM,MASK_250:()=>s6,MASK_31:()=>s3,MAX_STORAGE_ITEM_SIZE:()=>s7,NetworkName:()=>od,OutsideExecutionCallerAny:()=>oi,PAYMASTER_RPC_NODES:()=>oy,PRIME:()=>s4,RANGE_FELT:()=>ot,RANGE_I128:()=>or,RANGE_U128:()=>on,RPC_DEFAULT_NODES:()=>om,SNIP9_V1_INTERFACE_ID:()=>os,SNIP9_V2_INTERFACE_ID:()=>oo,SYSTEM_MESSAGES:()=>ob,StarknetChainId:()=>oh,SupportedRpcVersion:()=>op,TEXT_TO_FELT_MAX_LEN:()=>s1,TRANSACTION_VERSION:()=>s2,TransactionHashPrefix:()=>of,UDC:()=>oa,ZERO:()=>s5});var sF={};sU(sF,{JRPC:()=>sH,PAYMASTER_API:()=>em,RPCSPEC07:()=>I,RPCSPEC08:()=>ew});var sH={};((e,t,r)=>(sV(e,t,"default"),r&&sV(r,t,"default")))(sF,ew),sU({},{IS_BROWSER:()=>sM,addHexPrefix:()=>sK,arrayBufferToString:()=>s$,atobUniversal:()=>sz,btoaUniversal:()=>sW,buf2hex:()=>sG,calcByteLength:()=>sZ,concatenateArrayBuffer:()=>s0,padLeft:()=>sY,pascalToSnake:()=>sQ,removeHexPrefix:()=>sq,sanitizeBytes:()=>sX,sanitizeHex:()=>sJ,utf8ToArray:()=>sj});var sM=!1;function s$(e){return new Uint8Array(e).reduce((e,t)=>e+String.fromCharCode(t),"")}function sj(e){return new TextEncoder().encode(e)}function sz(e){return eL.decode(e)}function sW(e){return eL.encode(new Uint8Array(e))}function sG(e){return e.reduce((e,t)=>e+t.toString(16).padStart(2,"0"),"")}function sq(e){return e.replace(/^0x/i,"")}function sK(e){return`0x${sq(e)}`}function sY(e,t,r="0"){return function(e,t,r,n="0"){let a=t-e.length,i=e;if(a>0){let t=n.repeat(a);i=r?t+e:e+t}return i}(e,t,!0,r)}function sZ(e,t=8){let{length:r}=e,n=r%t;return n?(r-n)/t*t+t:r}function sX(e,t=8,r="0"){return sY(e,sZ(e,t),r)}function sJ(e){let t=sX(sq(e),2);return t?sK(t):t}var sQ=e=>/[a-z]/.test(e)?e.split(/(?=[A-Z])/).join("_").toUpperCase():e;function s0(e){let t=new Uint8Array(e.reduce((e,t)=>e+t.byteLength,0)),r=0;return e.forEach(e=>{t.set(e,r),r+=e.byteLength}),t}var s1=31,{ETransactionVersion:s2}=ew,s5=0n,s6=2n**250n-1n,s3=2n**31n-1n,s8=s5,s4=2n**251n+17n*2n**192n+1n,s7=256n,s9=2n**251n-s7,oe=(e,t)=>({min:e,max:t}),ot=oe(s5,s4-1n),or=oe(-(2n**127n),2n**127n-1n),on=oe(s5,2n**128n-1n),oa={ADDRESS:"0x041a78e741e5af2fec34b695679bc6891742439f7afb8484ecd7766661ad02bf",ENTRYPOINT:"deployContract"},oi="0x414e595f43414c4c4552",os="0x68cfd18b92d1907b8ba3cc324900277f5a3622099431ea85dd8089255e4181",oo="0x1d1144bb2138366ff28d8e9ab57456b1d332ac42196230c3a602003c89872",ol=128,oc=2147483648n,ou={SN_MAIN:"https://alpha-mainnet.starknet.io",SN_SEPOLIA:"https://alpha-sepolia.starknet.io"},od={SN_MAIN:"SN_MAIN",SN_SEPOLIA:"SN_SEPOLIA"},oh={SN_MAIN:"0x534e5f4d41494e",SN_SEPOLIA:"0x534e5f5345504f4c4941"},of={DECLARE:"0x6465636c617265",DEPLOY:"0x6465706c6f79",DEPLOY_ACCOUNT:"0x6465706c6f795f6163636f756e74",INVOKE:"0x696e766f6b65",L1_HANDLER:"0x6c315f68616e646c6572"},op={"0.7.1":"0.7.1","0.8.1":"0.8.1",v0_7_1:"0.7.1",v0_8_1:"0.8.1"},og={legacyMode:!1,rpcVersion:"0.8.1",transactionVersion:sF.ETransactionVersion.V3,logLevel:"INFO",feeMarginPercentage:{bounds:{l1_gas:{max_amount:50,max_price_per_unit:50},l1_data_gas:{max_amount:50,max_price_per_unit:50},l2_gas:{max_amount:50,max_price_per_unit:50}},maxFee:50},fetch:void 0,websocket:void 0},om={SN_MAIN:["https://starknet-mainnet.public.blastapi.io/rpc/"],SN_SEPOLIA:["https://starknet-sepolia.public.blastapi.io/rpc/"]},oy={SN_MAIN:["https://starknet.paymaster.avnu.fi"],SN_SEPOLIA:["https://sepolia.paymaster.avnu.fi"]},ob={legacyTxWarningMessage:"You are using a deprecated transaction version (V0,V1,V2)!\nUpdate to the latest V3 transactions!",legacyTxRPC08Message:"RPC 0.8 do not support legacy transactions",SWOldV3:"RPC 0.7 V3 tx (improper resource bounds) not supported in RPC 0.8",channelVersionMismatch:"Channel specification version is not compatible with the connected node Specification Version",unsupportedSpecVersion:"The connected node specification version is not supported by this library",maxFeeInV3:"maxFee is not supported in V3 transactions, use resourceBounds instead"},o_=(class e{static instance;config;constructor(){this.initialize()}initialize(){this.config={...og}}static getInstance(){return e.instance||(e.instance=new e),e.instance}get(e,t){return this.config[e]??t}set(e,t){this.config[e]=t}update(e){this.config={...this.config,...e}}getAll(){return{...this.config}}reset(){this.initialize()}delete(e){delete this.config[e]}hasKey(e){return e in this.config}}).getInstance(),ow={DEBUG:5,INFO:4,WARN:3,ERROR:2,FATAL:1,OFF:0},oE=(class e{static instance;config;constructor(){this.config=o_}static getInstance(){return e.instance||(e.instance=new e),e.instance}getTimestamp(){return new Date().toISOString()}shouldLog(e){return e<=ow[this.config.get("logLevel","INFO")]}formatMessage(e){let{level:t,message:r,timestamp:n,data:a}=e,i=`[${n}] ${t}: ${r}`;if(a)try{i+=`
${JSON.stringify(a,null,2)}`}catch(e){i+=`
[JSON.stringify Error/Circular]: ${e}`}return i}log(e,t,r){if(!this.shouldLog(ow[e]))return;let n={level:e,message:t,timestamp:this.getTimestamp(),data:r},a=this.formatMessage(n);switch(e){case"DEBUG":console.debug(a);break;case"INFO":console.info(a);break;case"WARN":console.warn(a);break;case"ERROR":case"FATAL":console.error(a);break;case"OFF":break;default:console.log(a)}}debug(e,t){this.log("DEBUG",e,t)}info(e,t){this.log("INFO",e,t)}warn(e,t){this.log("WARN",e,t)}error(e,t){this.log("ERROR",e,t)}fatal(e,t){this.log("FATAL",e,t)}setLogLevel(e){this.config.set("logLevel",e)}getLogLevel(){return this.config.get("logLevel","INFO")}getEnabledLogLevels(){return Object.keys(ow).filter(e=>this.shouldLog(ow[e])&&"OFF"!==e)}}).getInstance(),ov={};sU(ov,{RpcChannel:()=>uQ}),sU({},{BlockStatus:()=>ok,BlockTag:()=>oI,EDAMode:()=>oP,EDataAvailabilityMode:()=>oN,ETH_ADDRESS:()=>oM,ETransactionExecutionStatus:()=>oU,ETransactionStatus:()=>oL,ETransactionVersion:()=>oC,ETransactionVersion2:()=>oB,ETransactionVersion3:()=>oO,EntryPointType:()=>oS,Literal:()=>oH,NON_ZERO_PREFIX:()=>o$,OutsideExecutionTypesV1:()=>oj,OutsideExecutionTypesV2:()=>oz,OutsideExecutionVersion:()=>oW,RPC:()=>sF,TransactionExecutionStatus:()=>oA,TransactionFinalityStatus:()=>oT,TransactionType:()=>ox,TypedDataRevision:()=>x,Uint:()=>oF,ValidateType:()=>oV,isRPC08_FeeEstimate:()=>oD,isRPC08_ResourceBounds:()=>oR});var oS={EXTERNAL:"EXTERNAL",L1_HANDLER:"L1_HANDLER",CONSTRUCTOR:"CONSTRUCTOR"},ox={DECLARE:"DECLARE",DEPLOY:"DEPLOY",DEPLOY_ACCOUNT:"DEPLOY_ACCOUNT",INVOKE:"INVOKE_FUNCTION"},oT={NOT_RECEIVED:"NOT_RECEIVED",RECEIVED:"RECEIVED",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",ACCEPTED_ON_L1:"ACCEPTED_ON_L1"},oA={REJECTED:"REJECTED",REVERTED:"REVERTED",SUCCEEDED:"SUCCEEDED"},ok={PENDING:"PENDING",ACCEPTED_ON_L1:"ACCEPTED_ON_L1",ACCEPTED_ON_L2:"ACCEPTED_ON_L2",REJECTED:"REJECTED"},oI={PENDING:"pending",LATEST:"latest"},{ETransactionVersion:oC}=ew,{ETransactionVersion2:oB}=ew,{ETransactionVersion3:oO}=ew,{EDataAvailabilityMode:oN}=ew,{EDAMode:oP}=ew;function oD(e){return"l1_data_gas_consumed"in e}function oR(e){return"l1_data_gas"in e}var{ETransactionStatus:oL}=ew,{ETransactionExecutionStatus:oU}=ew,oV={DEPLOY:"DEPLOY",CALL:"CALL",INVOKE:"INVOKE"},oF={u8:"core::integer::u8",u16:"core::integer::u16",u32:"core::integer::u32",u64:"core::integer::u64",u128:"core::integer::u128",u256:"core::integer::u256",u512:"core::integer::u512"},oH={ClassHash:"core::starknet::class_hash::ClassHash",ContractAddress:"core::starknet::contract_address::ContractAddress",Secp256k1Point:"core::starknet::secp256k1::Secp256k1Point",U96:"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"},oM="core::starknet::eth_address::EthAddress",o$="core::zeroable::NonZero::",oj={StarkNetDomain:[{name:"name",type:"felt"},{name:"version",type:"felt"},{name:"chainId",type:"felt"}],OutsideExecution:[{name:"caller",type:"felt"},{name:"nonce",type:"felt"},{name:"execute_after",type:"felt"},{name:"execute_before",type:"felt"},{name:"calls_len",type:"felt"},{name:"calls",type:"OutsideCall*"}],OutsideCall:[{name:"to",type:"felt"},{name:"selector",type:"felt"},{name:"calldata_len",type:"felt"},{name:"calldata",type:"felt*"}]},oz={StarknetDomain:[{name:"name",type:"shortstring"},{name:"version",type:"shortstring"},{name:"chainId",type:"shortstring"},{name:"revision",type:"shortstring"}],OutsideExecution:[{name:"Caller",type:"ContractAddress"},{name:"Nonce",type:"felt"},{name:"Execute After",type:"u128"},{name:"Execute Before",type:"u128"},{name:"Calls",type:"Call*"}],Call:[{name:"To",type:"ContractAddress"},{name:"Selector",type:"selector"},{name:"Calldata",type:"felt*"}]},oW={UNSUPPORTED:"0",V1:"1",V2:"2"};sU({},{parse:()=>oq,parseAlwaysAsBig:()=>oK,stringify:()=>oY});var oG=e=>{if(!eF(e))return parseFloat(e);let t=parseInt(e,10);return Number.isSafeInteger(t)?t:BigInt(e)},oq=e=>e5(String(e),void 0,oG),oK=e=>e5(String(e),void 0,e2),oY=(e,t,r,n)=>tx(e,t,r,n),oZ=class{nodeUrl;headers;interval;requestId=0;pendingRequests={};batchPromises={};delayTimer;delayPromise;delayPromiseResolve;baseFetch;constructor(e){this.nodeUrl=e.nodeUrl,this.headers=e.headers,this.interval=e.interval,this.baseFetch=e.baseFetch}async wait(){return this.delayPromise&&this.delayPromiseResolve||(this.delayPromise=new Promise(e=>{this.delayPromiseResolve=e})),this.delayTimer&&(clearTimeout(this.delayTimer),this.delayTimer=void 0),this.delayTimer=setTimeout(()=>{this.delayPromiseResolve&&(this.delayPromiseResolve(),this.delayPromise=void 0,this.delayPromiseResolve=void 0)},this.interval),this.delayPromise}addPendingRequest(e,t,r){let n={id:r??`batched_${this.requestId+=1}`,jsonrpc:"2.0",method:e,params:t??void 0};return this.pendingRequests[n.id]=n,n.id}async sendBatch(e){return(await this.baseFetch(this.nodeUrl,{method:"POST",body:oY(e),headers:this.headers})).json()}async fetch(e,t,r){let n=this.addPendingRequest(e,t,r);await this.wait();let a=this.pendingRequests;if(this.pendingRequests={},!this.batchPromises[n]){let e=this.sendBatch(Object.values(a));Object.keys(a).forEach(t=>{this.batchPromises[t]=e})}let i=await this.batchPromises[n];delete this.batchPromises[n];let s=i.find(e=>e.id===n);if(!s)throw Error(`Couldn't find the result for the request. Method: ${e}`);return s}};function oX(e,t){if(!e)throw Error(t||"Assertion failure")}function oJ(e,t){if(!e)if(0===t.length)t();else throw Error("AssertionX failure: message function should not require arguments")}var oQ={};sU(oQ,{addPercent:()=>lp,assertInRange:()=>li,bigNumberishArrayToDecimalStringArray:()=>ls,bigNumberishArrayToHexadecimalStringArray:()=>lo,cleanHex:()=>la,getDecimalString:()=>lc,getHexString:()=>lu,getHexStringArray:()=>ld,hexToBytes:()=>lf,hexToDecimalString:()=>ln,isBigNumberish:()=>lm,isHex:()=>o8,isStringWholeNumber:()=>ll,stringToSha256ToArrayBuff4:()=>lg,toBigInt:()=>o4,toCairoBool:()=>lh,toHex:()=>o9,toHex64:()=>lr,toHexString:()=>le,toStorageKey:()=>lt,tryToBigInt:()=>o7});var o0=e=>void 0===e||void 0===e;function o1(e){return"number"==typeof e}function o2(e){return"boolean"==typeof e}function o5(e){return"bigint"==typeof e}function o6(e){return"string"==typeof e}function o3(e){return!!e&&"object"==typeof e&&!Array.isArray(e)}function o8(e){return/^0x[0-9a-f]*$/i.test(e)}function o4(e){return BigInt(e)}function o7(e){return e?BigInt(e):void 0}function o9(e){return sK(o4(e).toString(16))}var le=o9;function lt(e){return sK(o4(e).toString(16).padStart(64,"0"))}function lr(e){let t=sK(o4(e).toString(16).padStart(64,"0"));if(66!==t.length)throw TypeError("number is too big for hex 0x(64) representation");return t}function ln(e){return BigInt(sK(e)).toString(10)}function la(e){return e.toLowerCase().replace(/^(0x)0+/,"$1")}function li(e,t,r,n=""){let a=""===n?"invalid length":`invalid ${n} length`,i=BigInt(e),s=BigInt(t),o=BigInt(r);oX(i>=s&&i<=o,`Message not signable, ${a}.`)}function ls(e){return e.map(e=>o4(e).toString(10))}function lo(e){return e.map(e=>o9(e))}function ll(e){return/^\d+$/.test(e)}function lc(e){if(o8(e))return ln(e);if(ll(e))return e;throw Error(`${e} needs to be a hex-string or whole-number-string`)}function lu(e){if(o8(e))return e;if(ll(e))return le(e);throw Error(`${e} needs to be a hex-string or whole-number-string`)}function ld(e){return e.map(lu)}function lh(e){return(+e).toString()}function lf(e){if(!o8(e))throw Error(`${e} needs to be a hex-string`);let t=sq(e);return t.length%2!=0&&(t=`0${t}`),tU(t)}function lp(e,t){let r=BigInt(e);return r+r*BigInt(t)/100n}function lg(e){return lf(o9(Number(BigInt(sK(sG(rw(e))))&s3)))}function lm(e){return o1(e)||o5(e)||o6(e)&&(o8(e)||ll(e))}function ly(e){let t=sq(o9(BigInt(e)));return sK(n0(lf(sK(t.length%2==0?t:`0${t}`))).toString(16))}function lb(e){return BigInt(sK(n0(sj(e)).toString(16)))&s6}function l_(e){return o9(lb(e))}function lw(e){return o1(e)||o5(e)?o9(e):o8(e)?e:ll(e)?o9(e):l_(e)}function lE(e){let t=sK(e.reduce((e,t)=>e+sq(o9(t)).padStart(64,"0"),""));return sK(tN(rU(lf(t))))}function lv(e,t,r,n,a){return lE([e,t,a,r,n.length,...n])}function lS(e,t,r){return lE([e,t,r.length,...r])}function lx(e){return/^[\x00-\x7F]*$/.test(e)}function lT(e){return e.length<=s1}function lA(e){return/^[0-9]*$/i.test(e)}function lk(e){return o6(e)&&!o8(e)&&!ll(e)}sU({},{getL1MessageHash:()=>lS,getL2MessageHash:()=>lv,getSelector:()=>lw,getSelectorFromName:()=>l_,keccakBn:()=>ly,solidityUint256PackedKeccak256:()=>lE,starknetKeccak:()=>lb}),sU({},{decodeShortString:()=>lN,encodeShortString:()=>lO,isASCII:()=>lx,isDecimalString:()=>lA,isLongText:()=>lC,isShortString:()=>lT,isShortText:()=>lI,isText:()=>lk,splitLongString:()=>lB});var lI=e=>lk(e)&&lT(e),lC=e=>lk(e)&&!lT(e);function lB(e){let t=RegExp(`[^]{1,${s1}}`,"g");return e.match(t)||[]}function lO(e){if(!lx(e))throw Error(`${e} is not an ASCII string`);if(!lT(e))throw Error(`${e} is too long`);return sK(e.replace(/./g,e=>e.charCodeAt(0).toString(16)))}function lN(e){if(!lx(e))throw Error(`${e} is not an ASCII string`);if(o8(e))return sq(e).replace(/.{2}/g,e=>String.fromCharCode(parseInt(e,16)));if(lA(e))return lN("0X".concat(BigInt(e).toString(16)));throw Error(`${e} is not Hex or decimal`)}function lP(e){let t=0n===BigInt(e.pending_word)?"":lN(o9(e.pending_word));return e.data.reduce((e,t)=>e+(0n===BigInt(t)?"":lN(o9(t))),"")+t}function lD(e){let t=lB(e),r=t[t.length-1],n=t.map(lO),[a,i]=void 0===r||31===r.length?["0x00",0]:[n.pop(),r.length];return{data:0===n.length?[]:n,pending_word:a,pending_word_len:i}}sU({},{byteArrayFromString:()=>lD,stringFromByteArray:()=>lP});var lR={};function lL(e){if(o5(e)||Number.isInteger(e))return e.toString();if(o6(e)){if(o8(e))return BigInt(e).toString();if(lk(e)){if(!lT(e))throw Error(`${e} is a long string > 31 chars. Please split it into an array of short strings.`);return BigInt(lO(e)).toString()}if(ll(e))return e}if(o2(e))return`${+e}`;throw Error(`${e} can't be computed by felt()`)}sU(lR,{felt:()=>ci,getAbiContractVersion:()=>ct,getArrayType:()=>l7,isCairo1Abi:()=>l9,isCairo1Type:()=>l4,isLen:()=>l$,isTypeArray:()=>lz,isTypeBool:()=>l0,isTypeByteArray:()=>l6,isTypeBytes31:()=>l5,isTypeContractAddress:()=>l1,isTypeEnum:()=>lK,isTypeEthAddress:()=>l2,isTypeFelt:()=>lj,isTypeLiteral:()=>lQ,isTypeNamedTuple:()=>lG,isTypeNonZero:()=>ce,isTypeOption:()=>lY,isTypeResult:()=>lZ,isTypeSecp256k1Point:()=>l8,isTypeStruct:()=>lq,isTypeTuple:()=>lW,isTypeU96:()=>l3,isTypeUint:()=>lX,isTypeUint256:()=>lJ,tuple:()=>ca,uint256:()=>cr,uint512:()=>cn});var lU=(1n<<128n)-1n,lV=(1n<<256n)-1n,lF=class e{low;high;static abiSelector="core::integer::u256";constructor(...t){if("object"==typeof t[0]&&1===t.length&&"low"in t[0]&&"high"in t[0]){let r=e.validateProps(t[0].low,t[0].high);this.low=r.low,this.high=r.high}else if(1===t.length){let r=e.validate(t[0]);this.low=r&lU,this.high=r>>128n}else if(2===t.length){let r=e.validateProps(t[0],t[1]);this.low=r.low,this.high=r.high}else throw Error("Incorrect constructor parameters")}static validate(e){let t=BigInt(e);if(t<0n)throw Error("bigNumberish is smaller than UINT_256_MIN");if(t>lV)throw Error("bigNumberish is bigger than UINT_256_MAX");return t}static validateProps(e,t){let r=BigInt(e),n=BigInt(t);if(r<0n||r>0xffffffffffffffffffffffffffffffffn)throw Error("low is out of range UINT_256_LOW_MIN - UINT_256_LOW_MAX");if(n<0n||n>0xffffffffffffffffffffffffffffffffn)throw Error("high is out of range UINT_256_HIGH_MIN - UINT_256_HIGH_MAX");return{low:r,high:n}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.high<<128n)+this.low}toUint256HexString(){return{low:sK(this.low.toString(16)),high:sK(this.high.toString(16))}}toUint256DecimalString(){return{low:this.low.toString(10),high:this.high.toString(10)}}toApiRequest(){return[lL(this.low),lL(this.high)]}},lH=(1n<<512n)-1n,lM=class e{limb0;limb1;limb2;limb3;static abiSelector="core::integer::u512";constructor(...t){if("object"==typeof t[0]&&1===t.length&&"limb0"in t[0]&&"limb1"in t[0]&&"limb2"in t[0]&&"limb3"in t[0]){let r=e.validateProps(t[0].limb0,t[0].limb1,t[0].limb2,t[0].limb3);this.limb0=r.limb0,this.limb1=r.limb1,this.limb2=r.limb2,this.limb3=r.limb3}else if(1===t.length){let r=e.validate(t[0]);this.limb0=r&lU,this.limb1=(r&lU<<128n)>>128n,this.limb2=(r&lU<<256n)>>256n,this.limb3=r>>384n}else if(4===t.length){let r=e.validateProps(t[0],t[1],t[2],t[3]);this.limb0=r.limb0,this.limb1=r.limb1,this.limb2=r.limb2,this.limb3=r.limb3}else throw Error("Incorrect Uint512 constructor parameters")}static validate(e){let t=BigInt(e);if(t<0n)throw Error("bigNumberish is smaller than UINT_512_MIN.");if(t>lH)throw Error("bigNumberish is bigger than UINT_512_MAX.");return t}static validateProps(e,t,r,n){let a=BigInt(e),i=BigInt(t),s=BigInt(r),o=BigInt(n);return[a,i,s,o].forEach((e,t)=>{if(e<0n||e>lU)throw Error(`limb${t} is not in the range of a u128 number`)}),{limb0:a,limb1:i,limb2:s,limb3:o}}static is(t){try{e.validate(t)}catch(e){return!1}return!0}static isAbiType(t){return t===e.abiSelector}toBigInt(){return(this.limb3<<384n)+(this.limb2<<256n)+(this.limb1<<128n)+this.limb0}toUint512HexString(){return{limb0:sK(this.limb0.toString(16)),limb1:sK(this.limb1.toString(16)),limb2:sK(this.limb2.toString(16)),limb3:sK(this.limb3.toString(16))}}toUint512DecimalString(){return{limb0:this.limb0.toString(10),limb1:this.limb1.toString(10),limb2:this.limb2.toString(10),limb3:this.limb3.toString(10)}}toApiRequest(){return[lL(this.limb0),lL(this.limb1),lL(this.limb2),lL(this.limb3)]}},l$=e=>/_len$/.test(e),lj=e=>"felt"===e||"core::felt252"===e,lz=e=>/\*/.test(e)||e.startsWith("core::array::Array::")||e.startsWith("core::array::Span::"),lW=e=>/^\(.*\)$/i.test(e),lG=e=>/\(.*\)/i.test(e)&&e.includes(":"),lq=(e,t)=>e in t,lK=(e,t)=>e in t,lY=e=>e.startsWith("core::option::Option::"),lZ=e=>e.startsWith("core::result::Result::"),lX=e=>Object.values(oF).includes(e),lJ=e=>lF.isAbiType(e),lQ=e=>Object.values(oH).includes(e),l0=e=>"core::bool"===e,l1=e=>e===oH.ContractAddress,l2=e=>e===oM,l5=e=>"core::bytes_31::bytes31"===e,l6=e=>"core::byte_array::ByteArray"===e,l3=e=>"core::internal::bounded_int::BoundedInt::<0, 79228162514264337593543950335>"===e,l8=e=>e===oH.Secp256k1Point,l4=e=>e.includes("::"),l7=e=>l4(e)?e.substring(e.indexOf("<")+1,e.lastIndexOf(">")):e.replace("*","");function l9(e){let{cairo:t}=ct(e);if(void 0===t)throw Error("Unable to determine Cairo version");return"1"===t}function ce(e){return e.startsWith(o$)}function ct(e){if(e.find(e=>"interface"===e.type))return{cairo:"1",compiler:"2"};let t=e.find(e=>("function"===e.type||"constructor"===e.type)&&(e.inputs.length||e.outputs.length));return t?l4((t.inputs.length?t.inputs:t.outputs)[0].type)?{cairo:"1",compiler:"1"}:{cairo:"0",compiler:"0"}:{cairo:void 0,compiler:void 0}}var cr=e=>new lF(e).toUint256DecimalString(),cn=e=>new lM(e).toUint512DecimalString(),ca=(...e)=>({...e});function ci(e){return lL(e)}var cs=class{variant;constructor(e){let t=Object.values(e);if(0===t.length)throw Error("This Enum must have at least 1 variant");if(1!==t.filter(e=>!o0(e)).length)throw Error("This Enum must have exactly one active variant");this.variant=e}unwrap(){return Object.values(this.variant).find(e=>!o0(e))}activeVariant(){let e=Object.entries(this.variant).find(e=>!o0(e[1]));return o0(e)?"":e[0]}},co={Some:0,None:1},cl=class{Some;None;constructor(e,t){if(!(e in Object.values(co)))throw Error("Wrong variant! It should be CairoOptionVariant.Some or .None.");if(e===co.Some){if(o0(t))throw Error('The creation of a Cairo Option with "Some" variant needs a content as input.');this.Some=t,this.None=void 0}else this.Some=void 0,this.None=!0}unwrap(){return this.None?void 0:this.Some}isSome(){return!o0(this.Some)}isNone(){return!0===this.None}},cc={Ok:0,Err:1},cu=class{Ok;Err;constructor(e,t){if(!(e in Object.values(cc)))throw Error("Wrong variant! It should be CairoResultVariant.Ok or .Err.");e===cc.Ok?(this.Ok=t,this.Err=void 0):(this.Ok=void 0,this.Err=t)}unwrap(){if(!o0(this.Ok))return this.Ok;if(!o0(this.Err))return this.Err;throw Error("Both Result.Ok and .Err are undefined. Not authorized.")}isOk(){return!o0(this.Ok)}isErr(){return!o0(this.Err)}},cd={isBN:(e,t,r)=>{if(!o5(e[r]))throw Error(`Data and formatter mismatch on ${r}:${t[r]}, expected response data ${r}:${e[r]} to be BN instead it is ${typeof e[r]}`)},unknown:(e,t,r)=>{throw Error(`Unhandled formatter type on ${r}:${t[r]} for data ${r}:${e[r]}`)}},ch=class{abi;constructor(e){this.abi=e}methodInputsLength(e){return e.inputs.reduce((e,t)=>l$(t.name)?e:e+1,0)}getMethod(e){return this.abi.find(t=>t.name===e)}getLegacyFormat(){return this.abi}},cf=class{abi;constructor(e){this.abi=e}methodInputsLength(e){return e.inputs.length}getMethod(e){let t=this.abi.find(e=>"interface"===e.type);return t?.items?.find(t=>t.name===e)}getLegacyFormat(){return this.abi.flatMap(e=>"interface"===e.type?e.items:e)}};function cp(e){var t;let r=(t=e).find(e=>"interface"===e.type)?2:+!!l9(t);if(0===r||1===r)return new ch(e);if(2===r)return new cf(e);throw Error(`Unsupported ABI version ${r}`)}function cg(e,t,r){return"constructor"===e&&!r&&!t.length}function cm(e,t,r){for(let n=0,a=0;n<e.length;n++)if(e[n]===t)a++;else if(e[n]===r&&0==--a)return n;return 1/0}function cy(e){return l4(e)?function(e){let t,r=e.slice(1,-1),n=[],a=0;for(;a<r.length;){switch(!0){case"("===r[a]:t=a+cm(r.slice(a),"(",")")+1;break;case r.startsWith("core::result::Result::<",a)||r.startsWith("core::array::Array::<",a)||r.startsWith("core::option::Option::<",a):t=a+cm(r.slice(a),"<",">")+1;break;default:{let e=r.indexOf(",",a);t=-1!==e?e:1/0}}n.push(r.slice(a,t)),a=t+2}return n}(e):function(e){let{subTuple:t,result:r}=function(e){if(!e.includes("("))return{subTuple:[],result:e};let t=[],r="",n=0;for(;n<e.length;){if("("===e[n]){let a=1,i=n;for(n++;a;)")"===e[n]&&a--,"("===e[n]&&a++,n++;t.push(e.substring(i,n)),r+=" ",n--}else r+=e[n];n++}return{subTuple:t,result:r}}(e.replace(/\s/g,"").slice(1,-1)),n=r.split(",").map(e=>t.length?e.replace(" ",t.shift()):e);return lG(e)&&(n=n.reduce((e,t)=>e.concat(function(e){let t=e.substring(0,e.indexOf(":")),r=e.substring(t.length+1);return{name:t,type:r}}(t)),[])),n}(e)}var cb=class e{content;arrayType;constructor(t,r){oX(e.isTypeFixedArray(r),`The type ${r} is not a Cairo fixed array. Needs [type; length].`);try{e.getFixedArrayType(r)}catch{throw Error(`The type ${r} do not includes any content type. Needs [type; length].`)}try{e.getFixedArraySize(r)}catch{throw Error(`The type ${r} type do not includes any length. Needs [type; length].`)}oX(e.getFixedArraySize(r)===t.length,`The ABI type ${r} is expecting ${e.getFixedArraySize(r)} items. ${t.length} items provided.`),this.content=t,this.arrayType=r}static getFixedArraySize(e){let t=e.match(/(?<=; )\d+(?=\])/);if(null===t)throw Error(`ABI type ${e} do not includes a valid number after ';' character.`);return Number(t[0])}getFixedArraySize(){return e.getFixedArraySize(this.arrayType)}static getFixedArrayType=e=>{let t=e.match(/(?<=\[).+(?=;)/);if(null===t)throw Error(`ABI type ${e} do not includes a valid type of data.`);return t[0]};getFixedArrayType(){return e.getFixedArrayType(this.arrayType)}static compile(e){return e.reduce((e,t,r)=>(e[r]=t,e),{})}compile(){return e.compile(this.content)}static isTypeFixedArray(e){return/^\[.*;\s.*\]$/.test(e)&&/(?<=\[).+(?=;)/.test(e)&&/(?<=; )\d+(?=\])/.test(e)}};function c_(e,t){switch(!0){case lF.isAbiType(e):return new lF(t).toApiRequest();case lM.isAbiType(e):return new lM(t).toApiRequest();case l5(e):return lO(t.toString());case l8(e):{let e=sq(o9(t)).padStart(128,"0"),r=cr(sK(e.slice(-64))),n=cr(sK(e.slice(0,-64)));return[lL(n.low),lL(n.high),lL(r.low),lL(r.high)]}default:return lL(t)}}function cw(e,t,r,n){if(void 0===e)throw Error(`Missing parameter for type ${t}`);if(cb.isTypeFixedArray(t)){let a=cb.getFixedArrayType(t),i=[];if(Array.isArray(e))i=new cb(e,t).content;else if("object"==typeof e)oX((i=Object.values(e)).length===cb.getFixedArraySize(t),`ABI type ${t}: object provided do not includes  ${cb.getFixedArraySize(t)} items. ${i.length} items provided.`);else throw Error(`ABI type ${t}: not an Array representing a cairo.fixedArray() provided.`);return i.reduce((e,t)=>e.concat(cw(t,a,r,n)),[])}if(Array.isArray(e)){let a=[];a.push(lL(e.length));let i=l7(t);return e.reduce((e,t)=>e.concat(cw(t,i,r,n)),a)}if(r[t]&&r[t].members.length){if(lF.isAbiType(t))return new lF(e).toApiRequest();if(lM.isAbiType(t))return new lM(e).toApiRequest();if(l2(t))return c_(t,e);if(l6(t)){let t=lD(e);return[t.data.length.toString(),...t.data.map(e=>e.toString()),t.pending_word.toString(),t.pending_word_len.toString()]}let{members:a}=r[t];return a.reduce((t,a)=>t.concat(cw(e[a.name],a.type,r,n)),[])}if(lW(t))return(function(e,t){let r=cy(t),n=Object.values(e);if(n.length!==r.length)throw Error(`ParseTuple: provided and expected abi tuple size do not match.
      provided: ${n}
      expected: ${r}`);return r.map((e,t)=>({element:n[t],type:e.type??e}))})(e,t).reduce((e,t)=>{let a=cw(t.element,t.type,r,n);return e.concat(a)},[]);if(lF.isAbiType(t))return new lF(e).toApiRequest();if(lM.isAbiType(t))return new lM(e).toApiRequest();if(lK(t,n)){let{variants:a}=n[t];if(lY(t)){if(e.isSome()){let t=a.find(e=>"Some"===e.name);if(o0(t))throw Error("Error in abi : Option has no 'Some' variant.");let i=t.type;if("()"===i)return co.Some.toString();let s=cw(e.unwrap(),i,r,n);return Array.isArray(s)?[co.Some.toString(),...s]:[co.Some.toString(),s]}return co.None.toString()}if(lZ(t)){if(e.isOk()){let t=a.find(e=>"Ok"===e.name);if(o0(t))throw Error("Error in abi : Result has no 'Ok' variant.");let i=t.type;if("()"===i)return cc.Ok.toString();let s=cw(e.unwrap(),i,r,n);return Array.isArray(s)?[cc.Ok.toString(),...s]:[cc.Ok.toString(),s]}let t=a.find(e=>"Err"===e.name);if(o0(t))throw Error("Error in abi : Result has no 'Err' variant.");let i=t.type;if("()"===i)return cc.Err.toString();let s=cw(e.unwrap(),i,r,n);return Array.isArray(s)?[cc.Err.toString(),...s]:[cc.Err.toString(),s]}let i=e.activeVariant(),s=a.find(e=>e.name===i);if(o0(s))throw Error(`Not find in abi : Enum has no '${i}' variant.`);let o=s.type,l=a.findIndex(e=>e.name===i);if("()"===o)return l.toString();let c=cw(e.unwrap(),o,r,n);return Array.isArray(c)?[l.toString(),...c]:[l.toString(),c]}if(ce(t))return c_(l7(t),e);if("object"==typeof e)throw Error(`Parameter ${e} do not align with abi parameter ${t}`);return c_(t,e)}function cE(e,t){switch(!0){case l0(e):return!!BigInt(t.next().value);case lF.isAbiType(e):return new lF(t.next().value,t.next().value).toBigInt();case lM.isAbiType(e):let r=t.next().value,n=t.next().value;return new lM(r,n,t.next().value,t.next().value).toBigInt();case l2(e):return BigInt(t.next().value);case l5(e):return lN(t.next().value);case l8(e):let a=sq(t.next().value).padStart(32,"0"),i=sq(t.next().value).padStart(32,"0"),s=sq(t.next().value).padStart(32,"0");return BigInt(sK(i+a+sq(t.next().value).padStart(32,"0")+s));default:return BigInt(t.next().value)}}function cv(e,t,r,n){if("()"===t.type)return{};if(lF.isAbiType(t.type))return new lF(e.next().value,e.next().value).toBigInt();if(lM.isAbiType(t.type)){let t=e.next().value,r=e.next().value;return new lM(t,r,e.next().value,e.next().value).toBigInt()}if(l6(t.type)){let t=[],r=BigInt(e.next().value);for(;t.length<r;)t.push(o9(e.next().value));let n=o9(e.next().value);return lP({data:t,pending_word:n,pending_word_len:BigInt(e.next().value)})}if(cb.isTypeFixedArray(t.type)){let a=[],i={name:"",type:cb.getFixedArrayType(t.type)},s=cb.getFixedArraySize(t.type);for(;a.length<s;)a.push(cv(e,i,r,n));return a}if(lz(t.type)){let a=[],i={name:"",type:l7(t.type)},s=BigInt(e.next().value);for(;a.length<s;)a.push(cv(e,i,r,n));return a}if(ce(t.type))return cv(e,{name:"",type:l7(t.type)},r,n);if(r&&t.type in r&&r[t.type])return l2(t.type)?cE(t.type,e):r[t.type].members.reduce((t,a)=>(t[a.name]=cv(e,a,r,n),t),{});if(n&&t.type in n&&n[t.type]){let a=Number(e.next().value),i=n[t.type].variants.reduce((t,i,s)=>(s===a?t[i.name]=cv(e,{name:"",type:i.type},r,n):t[i.name]=void 0,t),{});if(t.type.startsWith("core::option::Option")){let e=a===co.Some?i.Some:void 0;return new cl(a,e)}if(t.type.startsWith("core::result::Result")){let e;return e=a===cc.Ok?i.Ok:i.Err,new cu(a,e)}return new cs(i)}if(lW(t.type))return cy(t.type).reduce((t,a,i)=>{let s=a?.name?a.name:i,o=a?.type?a.type:a;return t[s]=cv(e,{name:s,type:o},r,n),t},{});if(lz(t.type)){let a=[],i={name:"",type:l7(t.type)},s=BigInt(e.next().value);for(;a.length<s;)a.push(cv(e,i,r,n));return a}return cE(t.type,e)}function cS(e,t,r,n,a){let{name:i,type:s}=t;switch(!0){case l$(i):return BigInt(e.next().value);case r&&s in r||lW(s):case n&&lK(s,n):case cb.isTypeFixedArray(s):return cv(e,t,r,n);case lz(s):if(l4(s))return cv(e,t,r,n);let o=[];if(a&&a[`${i}_len`]){let s=a[`${i}_len`];for(;o.length<s;)o.push(cv(e,{name:i,type:t.type.replace("*","")},r,n))}return o;case ce(s):return cv(e,t,r,n);default:return cE(s,e)}}var cx=(e,t)=>{if(oX(o6(e)||o1(e)||o5(e),`Validate: arg ${t.name} should be a felt typed as (String, Number or BigInt)`),o6(e)&&!o8(e))return;let r=BigInt(e.toString(10));oX(r>=0n&&r<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`)},cT=(e,t)=>{let r;switch(o1(e)&&oX(e<=Number.MAX_SAFE_INTEGER,"Validation: Parameter is too large to be typed as Number use (BigInt or String)"),oX(o6(e)||o1(e)||o5(e)||o3(e)&&"low"in e&&"high"in e||o3(e)&&["limb0","limb1","limb2","limb3"].every(t=>t in e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (String, Number or BigInt), but is ${typeof e} ${e}.`),t.type){case oF.u256:r=new lF(e).toBigInt();break;case oF.u512:r=new lM(e).toBigInt();break;default:r=o4(e)}switch(t.type){case oF.u8:oX(r>=0n&&r<=255n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0 - 255]`);break;case oF.u16:oX(r>=0n&&r<=65535n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 65535]`);break;case oF.u32:oX(r>=0n&&r<=4294967295n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 4294967295]`);break;case oF.u64:oX(r>=0n&&r<=2n**64n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^64-1]`);break;case oF.u128:oX(r>=0n&&r<=2n**128n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^128-1]`);break;case oF.u256:oX(r>=0n&&r<=2n**256n-1n,`Validate: arg ${t.name} is ${t.type} should be in range 0 - 2^256-1`);break;case oF.u512:oX(lM.is(r),`Validate: arg ${t.name} is ${t.type} should be in range 0 - 2^512-1`);break;case oH.ClassHash:case oH.ContractAddress:oX(r>=0n&&r<=2n**252n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^252-1]`);break;case oH.Secp256k1Point:oX(r>=0n&&r<=2n**512n-1n,`Validate: arg ${t.name} must be ${t.type} : a 512 bits number.`);break;case oH.U96:oX(r>=0n&&r<=2n**96n-1n,`Validate: arg ${t.name} must be ${t.type} : a 96 bits number.`)}},cA=(e,t)=>{oX(o2(e),`Validate: arg ${t.name} of cairo type ${t.type} should be type (Boolean)`)},ck=(e,t,r)=>{if(t.type===oF.u256||t.type===oF.u512)return void cT(e,t);if(l2(t.type)){oX(!o3(e),`EthAddress type is waiting a BigNumberish. Got "${e}"`);let r=BigInt(e.toString(10));oX(r>=0n&&r<=2n**160n-1n,`Validate: arg ${t.name} cairo typed ${t.type} should be in range [0, 2^160-1]`);return}oX(o3(e),`Validate: arg ${t.name} is cairo type struct (${t.type}), and should be defined as a js object (not array)`),r[t.type].members.forEach(({name:r})=>{oX(Object.keys(e).includes(r),`Validate: arg ${t.name} should have a property ${r}`)})},cI=(e,t)=>{oX(o3(e),`Validate: arg ${t.name} is cairo type Enum (${t.type}), and should be defined as a js object (not array)`);let r=Object.getOwnPropertyNames(Object.getPrototypeOf(e)),n=[...Object.getOwnPropertyNames(e),...r];if(!(lY(t.type)&&n.includes("isSome")&&n.includes("isNone")||lZ(t.type)&&n.includes("isOk")&&n.includes("isErr"))&&!(n.includes("variant")&&n.includes("activeVariant")))throw Error(`Validate Enum: argument ${t.name}, type ${t.type}, value received "${e}", is not an Enum.`)},cC=(e,t)=>{oX(o3(e),`Validate: arg ${t.name} should be a tuple (defined as object)`)},cB=(e,t,r,n)=>{let a=lz(t.type),i=a?l7(t.type):cb.getFixedArrayType(t.type);if(a&&lj(i)&&lC(e))return;let s=[];if(a)oX(Array.isArray(e),`Validate: arg ${t.name} should be an Array`),s=e;else switch(!0){case Array.isArray(e):s=e;break;case"object"==typeof e:s=Object.values(e);break;default:throw Error(`Validate: arg ${t.name} should be an Array or an object.`)}switch(!0){case lj(i):s.forEach(e=>cx(e,t));break;case lW(i):s.forEach(e=>cC(e,{name:t.name,type:i}));break;case lz(i):s.forEach(e=>cB(e,{name:"",type:i},r,n));break;case lq(i,r):s.forEach(e=>ck(e,{name:t.name,type:i},r));break;case lK(i,n):s.forEach(e=>cI(e,{name:t.name,type:i}));break;case lX(i)||lQ(i):s.forEach(e=>cT(e,{name:"",type:i}));break;case l0(i):s.forEach(e=>cA(e,t));break;default:throw Error(`Validate Unhandled: argument ${t.name}, type ${t.type}, value ${s}`)}};function cO(e,t,r,n){e.inputs.reduce((e,a)=>{let i=t[e];switch(!0){case l$(a.name):return e;case lj(a.type):cx(i,a);break;case l5(a.type):oX(o6(i),`Validate: arg ${a.name} should be a string.`),oX(i.length<32,`Validate: arg ${a.name} cairo typed ${a.type} should be a string of less than 32 characters.`);break;case lX(a.type)||lQ(a.type):cT(i,a);break;case l0(a.type):cA(i,a);break;case l6(a.type):oX(o6(i),`Validate: arg ${a.name} should be a string.`);break;case lz(a.type)||cb.isTypeFixedArray(a.type):cB(i,a,r,n);break;case lq(a.type,r):ck(i,a,r);break;case lK(a.type,n):cI(i,a);break;case lW(a.type):cC(i,a);break;case ce(a.type):let s=l7(a.type);switch(oX(lX(s)&&s!==lM.abiSelector||lj(s),`Validate: ${a.name} type is not authorized for NonZero type.`),!0){case lj(s):cx(i,a),oX(BigInt(i.toString(10))>0,"Validate: value 0 is not authorized in NonZero felt252 type.");break;case lX(s):cT(i,{name:"",type:s}),s===oF.u256?oX(new lF(i).toBigInt()>0,"Validate: value 0 is not authorized in NonZero uint256 type."):oX(o4(i)>0,"Validate: value 0 is not authorized in NonZero uint type.");break;default:throw Error(`Validate Unhandled: argument ${a.name}, type ${a.type}, value "${i}"`)}break;default:throw Error(`Validate Unhandled: argument ${a.name}, type ${a.type}, value ${i}`)}return e+1},0)}var cN=class e{abi;parser;structs;enums;constructor(t){this.structs=e.getAbiStruct(t),this.enums=e.getAbiEnum(t),this.parser=cp(t),this.abi=this.parser.getLegacyFormat()}validate(e,t,r=[]){e!==oV.DEPLOY&&oX(this.abi.filter(t=>{if("function"!==t.type)return!1;let r="view"===t.stateMutability||"view"===t.state_mutability;return e===oV.INVOKE?!r:r}).map(e=>e.name).includes(t),`${e===oV.INVOKE?"invocable":"viewable"} method not found in abi`);let n=this.abi.find(r=>e===oV.DEPLOY?r.name===t&&"constructor"===r.type:r.name===t&&"function"===r.type);if(cg(t,r,n))return;let a=this.parser.methodInputsLength(n);if(r.length!==a)throw Error(`Invalid number of arguments, expected ${a} arguments, but got ${r.length}`);cO(n,r,this.structs,this.enums)}compile(e,t){let r,n=this.abi.find(t=>t.name===e);if(cg(e,t,n))return[];Array.isArray(t)?r=t:(r=Object.values(function(e,t,r,n){let a=(e,t)=>{if(cb.isTypeFixedArray(t)){var o,l=e,c=t;let r=cb.getFixedArrayType(c),n=cb.getFixedArraySize(c);if(Array.isArray(l)){if(n!==l.length)throw Error(`ABI type ${c}: array provided do not includes  ${n} items. ${l.length} items provided.`);return l.map(e=>a(e,r))}if(n!==Object.keys(l).length)throw Error(`ABI type ${c}: object provided do not includes  ${n} properties. ${Object.keys(l).length} items provided.`);return a(l,r)}if(lz(t)){var u=e,d=t;let r=l7(d);return o6(u)?u:u.map(e=>a(e,r))}if(lK(t,n))return s(e,n[t]);if(lW(t)){return o=e,cy(t).reduce((e,t,r)=>{let n,i=Object.keys(o),s=t?.type?t.type:t;return n=a(o[i[r]],s),Object.defineProperty(e,r.toString(),{enumerable:!0,value:n??o[i[r]]}),e},{})}if(l2(t)||ce(t)||l6(t)||l3(t)||l8(t))return e;if(lF.isAbiType(t)){if("object"!=typeof e)return e;if(!("low"in e&&"high"in e))throw Error(`Your object includes the property : ${t}, containing an Uint256 object without the 'low' and 'high' keys.`);return{low:e.low,high:e.high}}if(lM.isAbiType(t)){if("object"!=typeof e)return e;if(!["limb0","limb1","limb2","limb3"].every(t=>t in e))throw Error(`Your object includes the property : ${t}, containing an Uint512 object without the 'limb0' to 'limb3' keys.`);return{limb0:e.limb0,limb1:e.limb1,limb2:e.limb2,limb3:e.limb3}}return lq(t,r)?i(e,r[t].members):e},i=(e,t)=>t.reduce((t,r)=>{let n;if("undefined"===e[r.name]&&(l4(r.type)||!l$(r.name)))throw Error(`Your object needs a property with key : ${r.name} .`);return n=a(e[r.name],r.type),Object.defineProperty(t,r.name,{enumerable:!0,value:n??e[r.name]}),t},{}),s=(e,t)=>{if(lZ(t.name)){let r=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(",")),n=t.name.substring(t.name.indexOf(",")+1,t.name.lastIndexOf(">"));return e.isOk()?new cu(cc.Ok,a(e.unwrap(),r)):new cu(cc.Err,a(e.unwrap(),n))}if(lY(t.name)){let r=t.name.substring(t.name.indexOf("<")+1,t.name.lastIndexOf(">"));return e.isSome()?new cl(co.Some,a(e.unwrap(),r)):new cl(co.None,{})}return new cs(Object.fromEntries(Object.entries(e.variant).map(r=>{if(o0(r[1]))return r;let n=t.type.substring(t.type.lastIndexOf("<")+1,t.type.lastIndexOf(">"));return"()"===n?r:[r[0],a(e.unwrap(),n)]})))};return t.reduce((t,r)=>{let n;return l$(r.name)&&!l4(r.type)?t:(n=a(e[r.name],r.type),Object.defineProperty(t,r.name,{enumerable:!0,value:n}),t)},{})}(t,n.inputs,this.structs,this.enums)),cO(n,r,this.structs,this.enums));let a=r[Symbol.iterator](),i=n.inputs.reduce((e,t)=>l$(t.name)&&!l4(t.type)?e:e.concat(function(e,t,r,n){let{name:a,type:i}=t,{value:s}=e.next();switch(!0){case cb.isTypeFixedArray(i):if(!Array.isArray(s)&&"object"!=typeof s)throw Error(`ABI expected parameter ${a} to be an array or an object, got ${s}`);return cw(s,t.type,r,n);case lz(i):if(!Array.isArray(s)&&!lk(s))throw Error(`ABI expected parameter ${a} to be array or long string, got ${s}`);return o6(s)&&(s=lB(s)),cw(s,t.type,r,n);case ce(i):return c_(l7(i),s);case l2(i):return c_(i,s);case lq(i,r)||lW(i)||lF.isAbiType(i):case lK(i,n):return cw(s,i,r,n);default:return c_(i,s)}}(a,t,this.structs,this.enums)),[]);return Object.defineProperty(i,"__compiled__",{enumerable:!1,writable:!1,value:!0}),i}static compile(e){let t,r=e=>{let t=(e,r=".")=>{let n=Array.isArray(e)?[e.length.toString(),...e]:e;return Object.entries(n).flatMap(([e,a])=>{let i=a;"entrypoint"===e?i=l_(i):lC(i)&&(i=lD(i));let s=Array.isArray(n)&&"0"===e?"$$len":e;if(o5(i))return[[`${r}${s}`,lL(i)]];if(Object(i)===i){let e=Object.getOwnPropertyNames(Object.getPrototypeOf(i)),n=[...Object.getOwnPropertyNames(i),...e];if(n.includes("isSome")&&n.includes("isNone")){let e=i,n=e.isSome()?co.Some:co.None;return e.isSome()?t({0:n,1:e.unwrap()},`${r}${s}.`):[[`${r}${s}`,lL(n)]]}if(n.includes("isOk")&&n.includes("isErr")){let e=i;return t({0:e.isOk()?cc.Ok:cc.Err,1:e.unwrap()},`${r}${s}.`)}if(n.includes("variant")&&n.includes("activeVariant")){let e=i,n=e.activeVariant(),a=Object.keys(e.variant).findIndex(e=>e===n);return"object"==typeof e.unwrap()&&0===Object.keys(e.unwrap()).length?[[`${r}${s}`,lL(a)]]:t({0:a,1:e.unwrap()},`${r}${s}.`)}return t(i,`${r}${s}.`)}return[[`${r}${s}`,lL(i)]]})};return Object.fromEntries(t(e))};return Object.defineProperty(t=Array.isArray(e)?Object.values(r({...e})):Object.values(r(e)),"__compiled__",{enumerable:!1,writable:!1,value:!0}),t}parse(e,t){let{outputs:r}=this.abi.find(t=>t.name===e),n=t.flat()[Symbol.iterator](),a=r.flat().reduce((e,t,r)=>{let a=t.name??r;return e[a]=cS(n,t,this.structs,this.enums,e),e[a]&&e[`${a}_len`]&&delete e[`${a}_len`],e},{});return 1===Object.keys(a).length&&0 in a?a[0]:a}format(e,t,r){return function e(t,r,n){return Object.entries(t).reduce((a,[i,s])=>{let o=n??r[i];if(!(i in r)&&!n)return a[i]=s,a;if("string"===o){if(Array.isArray(t[i])){let r=e(t[i],t[i].map(e=>o));return a[i]=Object.values(r).join(""),a}return cd.isBN(t,r,i),a[i]=lN(s),a}if("number"===o)return cd.isBN(t,r,i),a[i]=Number(s),a;if("function"==typeof o)return a[i]=o(s),a;if(Array.isArray(o)){let r=e(t[i],o,o[0]);return a[i]=Object.values(r),a}return o3(o)?a[i]=e(t[i],o):cd.unknown(t,r,i),a},{})}(this.parse(e,t),r)}static getAbiStruct(e){return e.filter(e=>"struct"===e.type).reduce((e,t)=>({...e,[t.name]:t}),{})}static getAbiEnum(e){let t=e.filter(e=>"enum"===e.type).reduce((e,t)=>({...e,[t.name]:t}),{});return delete t["core::bool"],t}static toCalldata(t=[]){return e.compile(t)}static toHex(t=[]){return e.compile(t).map(e=>o9(e))}decodeParameters(e,t){let r=Array.isArray(e)?e:[e],n=t.flat()[Symbol.iterator](),a=r.map(e=>cS(n,{name:"",type:e},this.structs,this.enums));return 1===a.length?a[0]:a}},cP={};sU(cP,{calculateContractAddressFromHash:()=>ue,calculateDeclareTransactionHash:()=>c5,calculateDeployAccountTransactionHash:()=>c6,calculateInvokeTransactionHash:()=>c2,calculateL2MessageTxHash:()=>cH,computeCompiledClassHash:()=>uo,computeContractClassHash:()=>uu,computeHashOnElements:()=>c4,computeHintedClassHash:()=>un,computeLegacyContractClassHash:()=>ua,computePedersenHash:()=>c3,computePedersenHashOnElements:()=>c7,computePoseidonHash:()=>c8,computePoseidonHashOnElements:()=>c9,computeSierraContractClassHash:()=>uc,formatSpaces:()=>ur,getL1MessageHash:()=>lS,getL2MessageHash:()=>lv,getSelector:()=>lw,getSelectorFromName:()=>l_,hashByteCodeSegments:()=>us,keccakBn:()=>ly,poseidon:()=>ar,solidityUint256PackedKeccak256:()=>lE,starknetKeccak:()=>lb}),sU({},{calculateDeclareTransactionHash:()=>cU,calculateDeployAccountTransactionHash:()=>cV,calculateL2MessageTxHash:()=>cH,calculateTransactionHash:()=>cF,calculateTransactionHashCommon:()=>cL,computeHashOnElements:()=>cR});var cD={};function cR(e){return[...e,e.length].reduce((e,t)=>an.pedersen(o4(e),o4(t)),0).toString()}function cL(e,t,r,n,a,i,s,o=[]){let l=[e,t,r,n,cR(a),i,s,...o];return cR(l)}function cU(e,t,r,n,a,i,s){return cL(of.DECLARE,r,t,0,[e],n,a,[i,...s?[s]:[]])}function cV(e,t,r,n,a,i,s,o){let l=[t,n,...r];return cL(of.DEPLOY_ACCOUNT,a,e,0,l,i,s,[o])}function cF(e,t,r,n,a,i){return cL(of.INVOKE,t,e,0,r,n,a,[i])}function cH(e,t,r,n,a,i){let s=[e,...n];return cL(of.L1_HANDLER,0,t,lw(r),s,0,a,[i])}sU(cD,{starkCurve:()=>an,weierstrass:()=>aa}),sU({},{calculateDeclareTransactionHash:()=>c0,calculateDeployAccountTransactionHash:()=>cQ,calculateInvokeTransactionHash:()=>c1,calculateTransactionHashCommon:()=>cJ,encodeDataResourceBoundsL1:()=>cY,encodeResourceBoundsL1:()=>cq,encodeResourceBoundsL2:()=>cK,hashDAMode:()=>cG,hashFeeField:()=>cZ,hashFeeFieldV3B3:()=>cX});var cM=e=>e.map(e=>BigInt(e)),c$=64n+128n,cj=BigInt(lO("L1_GAS")),cz=BigInt(lO("L2_GAS")),cW=BigInt(lO("L1_DATA"));function cG(e,t){return(BigInt(e)<<32n)+BigInt(t)}function cq(e){return(cj<<c$)+(BigInt(e.l1_gas.max_amount)<<128n)+BigInt(e.l1_gas.max_price_per_unit)}function cK(e){return(cz<<c$)+(BigInt(e.l2_gas.max_amount)<<128n)+BigInt(e.l2_gas.max_price_per_unit)}function cY(e){return(cW<<c$)+(BigInt(e.l1_data_gas.max_amount)<<128n)+BigInt(e.l1_data_gas.max_price_per_unit)}function cZ(e,t){let r=cq(t),n=cK(t);return at([BigInt(e),r,n])}function cX(e,t){let r=cq(t),n=cK(t),a=cY(t);return at([BigInt(e),r,n,a])}function cJ(e,t,r,n,a,i,s,o,l,c,u=[]){let d=oR(c)?cX(i,c):cZ(i,c),h=cG(o,l),f=cM([e,t,r,d,at(cM(s)),n,a,h,...cM(u)]);return o9(at(f))}function cQ(e,t,r,n,a,i,s,o,l,c,u,d){return cJ(of.DEPLOY_ACCOUNT,a,e,i,s,u,d,o,l,c,[at(cM(r)),t,n])}function c0(e,t,r,n,a,i,s,o,l,c,u,d){return cJ(of.DECLARE,n,r,a,i,u,cM(d),o,l,c,[at(cM(s)),e,t])}function c1(e,t,r,n,a,i,s,o,l,c,u){return cJ(of.INVOKE,t,e,n,a,c,u,s,o,l,[at(cM(i)),at(cM(r))])}function c2(e){return[sF.ETransactionVersion.V3,sF.ETransactionVersion.F3].includes(e.version)?c1(e.senderAddress,e.version,e.compiledCalldata,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):cF(e.senderAddress,e.version,e.compiledCalldata,e.maxFee,e.chainId,e.nonce)}function c5(e){return[sF.ETransactionVersion.V3,sF.ETransactionVersion.F3].includes(e.version)?c0(e.classHash,e.compiledClassHash,e.senderAddress,e.version,e.chainId,e.nonce,e.accountDeploymentData,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):cU(e.classHash,e.senderAddress,e.version,e.maxFee,e.chainId,e.nonce,e.compiledClassHash)}function c6(e){return[sF.ETransactionVersion.V3,sF.ETransactionVersion.F3].includes(e.version)?cQ(e.contractAddress,e.classHash,e.compiledConstructorCalldata,e.salt,e.version,e.chainId,e.nonce,e.nonceDataAvailabilityMode,e.feeDataAvailabilityMode,e.resourceBounds,e.tip,e.paymasterData):cV(e.contractAddress,e.classHash,e.constructorCalldata,e.salt,e.version,e.maxFee,e.chainId,e.nonce)}function c3(e,t){return an.pedersen(BigInt(e),BigInt(t))}function c8(e,t){return o9(an.poseidonHash(BigInt(e),BigInt(t)))}function c4(e){return[...e,e.length].reduce((e,t)=>an.pedersen(BigInt(e),BigInt(t)),0).toString()}var c7=c4;function c9(e){return o9(at(e.map(e=>BigInt(e))))}function ue(e,t,r,n){let a=c4(cN.compile(r));return o9(BigInt(c4([lL("0x535441524b4e45545f434f4e54524143545f41444452455353"),n,e,t,a]))%s9)}function ut(e,t){return"attributes"===e||"accessible_scopes"===e?Array.isArray(t)&&0===t.length?void 0:t:"debug_info"===e?null:null===t?void 0:t}function ur(e){let t=!1,r=[];for(let n of e)'"'===n&&!1==(r.length>0&&"\\"===r.slice(-1)[0])&&(t=!t),t?r.push(n):r.push(":"===n?": ":","===n?", ":n);return r.join("")}function un(e){let{abi:t,program:r}=e,n=ur(oY({abi:t,program:r},ut));return sK(an.keccak(sj(n)).toString(16))}function ua(e){let t=o6(e)?oq(e):e,r=o9(s8),n=c4(t.entry_points_by_type.EXTERNAL.flatMap(e=>[e.selector,e.offset])),a=c4(t.entry_points_by_type.L1_HANDLER.flatMap(e=>[e.selector,e.offset])),i=c4(t.entry_points_by_type.CONSTRUCTOR.flatMap(e=>[e.selector,e.offset])),s=c4(t.program.builtins.map(e=>lO(e))),o=un(t),l=c4(t.program.data);return c4([r,n,a,i,s,o,l])}function ui(e){let t=e.flatMap(e=>[BigInt(e.selector),BigInt(e.offset),at(e.builtins.flatMap(e=>BigInt(lO(e))))]);return at(t)}function us(e){let t=e.bytecode.map(e=>BigInt(e)),r=e.bytecode_segment_lengths??[],n=0,a=r.flatMap(e=>{let r=t.slice(n,n+=e);return[BigInt(e),at(r)]});return 1n+at(a)}function uo(e){let t=BigInt(lO("COMPILED_CLASS_V1")),r=ui(e.entry_points_by_type.EXTERNAL),n=ui(e.entry_points_by_type.L1_HANDLER),a=ui(e.entry_points_by_type.CONSTRUCTOR),i=e.bytecode_segment_lengths?us(e):at(e.bytecode.map(e=>BigInt(e)));return o9(at([t,r,n,a,i]))}function ul(e){return at(e.flatMap(e=>[BigInt(e.selector),BigInt(e.function_idx)]))}function uc(e){let t=BigInt(lO("CONTRACT_CLASS_V0.1.0")),r=ul(e.entry_points_by_type.EXTERNAL),n=ul(e.entry_points_by_type.L1_HANDLER),a=ul(e.entry_points_by_type.CONSTRUCTOR),i=function(e){let t=ur(oY(e.abi,null));return BigInt(sK(an.keccak(sj(t)).toString(16)))}(e),s=at(e.sierra_program.map(e=>BigInt(e)));return o9(at([t,r,n,a,i,s]))}function uu(e){let t=o6(e)?oq(e):e;return"sierra_program"in t?uc(t):ua(t)}function ud(e){let t=e.version?o9(e.version):oC.V3;return t===oC.V3||t===oC.F3}function uh(e,t){let r=e.split("."),n=t.split(".");return r.every((e,t)=>"*"===e||e===n[t])}function uf(e,t={allowAnyPatchVersion:!1}){return Object.values(op).some(r=>uh(t.allowAnyPatchVersion?function(e){let t=e.split(".");return t.length<3?e:`${t[0]}.${t[1]}.*`}(r):r,e))}function up(e){return sW(sy(o6(e)?e:oY(e)))}function ug(e){return Array.isArray(e)?e:oq(s$(sE(sz(e))))}function um(){return nM(nU.randomPrivateKey())}function uy(e){if(!e)throw Error("formatSignature: provided signature is undefined");if(Array.isArray(e))return e.map(e=>o9(e));try{let{r:t,s:r}=e;return[o9(t),o9(r)]}catch(e){throw Error("Signature need to be weierstrass.SignatureType or an array for custom")}}function ub(e){return ls(uy(e))}function u_(e){return lo(uy(e))}function uw(e,t=o_.get("feeMarginPercentage").maxFee){return lp(e,t)}function uE(e,t=o_.get("feeMarginPercentage").bounds,r){if(o5(e))return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},...r&&uh("0.8",r)&&{l1_data_gas:{max_amount:"0x0",max_price_per_unit:"0x0"}}};if(oD(e))return{l2_gas:{max_amount:o9(lp(e.l2_gas_consumed,t.l2_gas.max_amount)),max_price_per_unit:o9(lp(e.l2_gas_price,t.l2_gas.max_price_per_unit))},l1_gas:{max_amount:o9(lp(e.l1_gas_consumed,t.l1_gas.max_amount)),max_price_per_unit:o9(lp(e.l1_gas_price,t.l1_gas.max_price_per_unit))},l1_data_gas:{max_amount:o9(lp(e.l1_data_gas_consumed,t.l1_data_gas.max_amount)),max_price_per_unit:o9(lp(e.l1_data_gas_price,t.l1_data_gas.max_price_per_unit))}};return{l2_gas:{max_amount:"0x0",max_price_per_unit:"0x0"},l1_gas:{max_amount:void 0!==e.data_gas_consumed&&void 0!==e.data_gas_price?o9(lp(BigInt(e.overall_fee)/BigInt(e.gas_price),t.l1_gas.max_amount)):o9(lp(e.gas_consumed,t.l1_gas.max_amount)),max_price_per_unit:o9(lp(e.gas_price,t.l1_gas.max_price_per_unit))}}}function uv(e){return{l1_gas_consumed:0n,l1_gas_price:0n,l1_data_gas_consumed:0n,l1_data_gas_price:0n,l2_gas_consumed:0n,l2_gas_price:0n,overall_fee:s5,unit:"FRI",suggestedMaxFee:s5,resourceBounds:uE(s5,void 0,e)}}function uS(e){if(e===oN.L1)return oP.L1;if(e===oN.L2)return oP.L2;throw Error("EDAM conversion")}function ux(e,t){let r=t?o9(t):void 0,n=o9(e);if(t&&!Object.values(oC).includes(r))throw Error(`providedVersion ${t} is not ETransactionVersion`);if(!Object.values(oC).includes(n))throw Error(`defaultVersion ${e} is not ETransactionVersion`);return t?r:n}function uT(e){if(!e)return;let t=o9(e);if(t===oC.V0)return oC.F0;if(t===oC.V1)return oC.F1;if(t===oC.V2)return oC.F2;if(t===oC.V3)return oC.F3;throw Error(`toFeeVersion: ${t} is not supported`)}function uA(e,t){return{tip:e.tip||0,paymasterData:e.paymasterData||[],accountDeploymentData:e.accountDeploymentData||[],nonceDataAvailabilityMode:e.nonceDataAvailabilityMode||oN.L1,feeDataAvailabilityMode:e.feeDataAvailabilityMode||oN.L1,resourceBounds:e.resourceBounds??uE(s5,void 0,t)}}function uk(e){return e===oC.F2?oC.F1:e===oC.V2?oC.V1:e}function uI(e){return sK(sG(nI(o9(e),!1)))}function uC(e){return"sierra_program"in(o6(e)?oq(e):e)}function uB(e){let t={...e};if(uC(e.contract)&&(!e.compiledClassHash&&e.casm&&(t.compiledClassHash=uo(e.casm)),!t.compiledClassHash))throw Error("Extract compiledClassHash failed, provide (CairoAssembly).casm file or compiledClassHash");if(t.classHash=e.classHash??uu(e.contract),!t.classHash)throw Error("Extract classHash failed, provide (CompiledContract).json file or classHash");return t}sU({},{ZEROFee:()=>uv,compressProgram:()=>up,decompressProgram:()=>ug,estimateFeeToBounds:()=>uE,estimatedFeeToMaxFee:()=>uw,formatSignature:()=>uy,getFullPublicKey:()=>uI,intDAM:()=>uS,randomAddress:()=>um,reduceV2:()=>uk,signatureToDecimalArray:()=>ub,signatureToHexArray:()=>u_,toFeeVersion:()=>uT,toTransactionVersion:()=>ux,v3Details:()=>uA});var uO={FAILED_TO_RECEIVE_TXN:1,NO_TRACE_AVAILABLE:10,CONTRACT_NOT_FOUND:20,ENTRYPOINT_NOT_FOUND:21,BLOCK_NOT_FOUND:24,INVALID_TXN_INDEX:27,CLASS_HASH_NOT_FOUND:28,TXN_HASH_NOT_FOUND:29,PAGE_SIZE_TOO_BIG:31,NO_BLOCKS:32,INVALID_CONTINUATION_TOKEN:33,TOO_MANY_KEYS_IN_FILTER:34,CONTRACT_ERROR:40,TRANSACTION_EXECUTION_ERROR:41,STORAGE_PROOF_NOT_SUPPORTED:42,CLASS_ALREADY_DECLARED:51,INVALID_TRANSACTION_NONCE:52,INSUFFICIENT_RESOURCES_FOR_VALIDATE:53,INSUFFICIENT_ACCOUNT_BALANCE:54,VALIDATION_FAILURE:55,COMPILATION_FAILED:56,CONTRACT_CLASS_SIZE_IS_TOO_LARGE:57,NON_ACCOUNT:58,DUPLICATE_TX:59,COMPILED_CLASS_HASH_MISMATCH:60,UNSUPPORTED_TX_VERSION:61,UNSUPPORTED_CONTRACT_CLASS_VERSION:62,UNEXPECTED_ERROR:63,INVALID_SUBSCRIPTION_ID:66,TOO_MANY_ADDRESSES_IN_FILTER:67,TOO_MANY_BLOCKS_BACK:68,COMPILATION_ERROR:100,INVALID_ADDRESS:150,TOKEN_NOT_SUPPORTED:151,INVALID_SIGNATURE:153,MAX_AMOUNT_TOO_LOW:154,CLASS_HASH_NOT_SUPPORTED:155,PAYMASTER_TRANSACTION_EXECUTION_ERROR:156,INVALID_TIME_BOUNDS:157,INVALID_DEPLOYMENT_DATA:158,INVALID_CLASS_HASH:159,INVALID_ID:160,UNKNOWN_ERROR:163},uN=class extends Error{name;constructor(e){super(e),Object.defineProperty(this,"name",{value:new.target.name,enumerable:!1,configurable:!0}),function(e,t){let{setPrototypeOf:r}=Object;r?r(e,t):e.__proto__=t}(this,new.target.prototype),function(e,t=e.constructor){let{captureStackTrace:r}=Error;r&&r(e,t)}(this)}},uP=class extends uN{},uD=class extends uP{constructor(e,t,r){super(`RPC: ${t} with params ${oY(r,null,2)}

      ${e.code}: ${e.message}: ${oY(e.data)}`),this.baseError=e,this.request={method:t,params:r}}request;get code(){return this.baseError.code}isType(e){return uO[e]===this.code}};function uR(){return sJ(sG(sI.utils.randomPrivateKey()))}function uL(e){li(e,s5,2n**160n-1n,"Ethereum Address ");let t=sK(sq(o9(e)).padStart(40,"0"));return oX(!!t.match(/^(0x)?[0-9a-f]{40}$/),"Invalid Ethereum Address Format"),t}sU({},{ethRandomPrivateKey:()=>uR,validateAndParseEthAddress:()=>uL});var uU="undefined"!=typeof globalThis&&globalThis.fetch.bind(globalThis)||e.g.fetch.bind(e.g)||(()=>{throw new uP("'fetch()' not detected, use the 'baseFetch' constructor parameter to set it")});function uV(e){return new Promise(t=>{setTimeout(t,e)})}function uF(e){let t={...e};return delete t.sierra_program_debug_info,t.abi=ur(oY(e.abi)),t.sierra_program=ur(oY(e.sierra_program)),t.sierra_program=up(t.sierra_program),t}function uH(e){let t=o6(e)?oq(e):e;return uC(e)?uF(t):{...t,..."program"in t&&{program:up(t.program)}}}sU({},{Block:()=>uW,createSierraContractClass:()=>uF,getDefaultNodeUrl:()=>uM,getDefaultNodes:()=>u$,getSupportedRpcVersions:()=>uj,parseContract:()=>uH,validBlockTags:()=>uz,wait:()=>uV});var uM=(e,t=!1,r)=>{t||oE.info("Using default public node url, please provide nodeUrl in provider options!");let n=u$(r??o_.get("rpcVersion"))[e??od.SN_SEPOLIA],a=Math.floor(Math.random()*n.length);return n[a]};function u$(e){let t={...om};return Object.keys(t).forEach(function(r,n){t[r]=t[r].map(t=>`${t}${function(e){let[t,r]=e.replace(/^v/,"").split(".");return`v${t}_${r}`}(e)}`)}),t}function uj(){return[...new Set(Object.values(op))]}var uz=Object.values(oI),uW=class{hash=null;number=null;tag=null;setIdentifier(e){if(o6(e))if(lA(e))this.number=parseInt(e,10);else if(o8(e))this.hash=e;else if(uz.includes(e))this.tag=e;else throw TypeError(`Block identifier unmanaged: ${e}`);else o5(e)?this.hash=o9(e):o1(e)?this.number=e:this.tag=oI.PENDING;if(o1(this.number)&&this.number<0)throw TypeError(`Block number (${this.number}) can't be negative`)}constructor(e){this.setIdentifier(e)}get queryIdentifier(){return null!==this.number?`blockNumber=${this.number}`:null!==this.hash?`blockHash=${this.hash}`:`blockNumber=${this.tag}`}get identifier(){return null!==this.number?{block_number:this.number}:null!==this.hash?{block_hash:this.hash}:this.tag}set identifier(e){this.setIdentifier(e)}valueOf=()=>this.number;toString=()=>this.hash};sU({},{buildUDCCall:()=>uZ,fromCallsToExecuteCalldata:()=>uq,fromCallsToExecuteCalldata_cairo1:()=>uK,getExecuteCalldata:()=>uY,getVersionsByType:()=>uX,transformCallsToMulticallArrays:()=>uG});var uG=e=>{let t=[],r=[];return e.forEach(e=>{let n=cN.compile(e.calldata||[]);t.push({to:o4(e.contractAddress).toString(10),selector:o4(l_(e.entrypoint)).toString(10),data_offset:r.length.toString(),data_len:n.length.toString()}),r.push(...n)}),{callArray:t,calldata:cN.compile({calldata:r})}},uq=e=>{let{callArray:t,calldata:r}=uG(e);return[...cN.compile({callArray:t}),...r]},uK=e=>{let t=e.map(e=>({contractAddress:e.contractAddress,entrypoint:e.entrypoint,calldata:Array.isArray(e.calldata)&&"__compiled__"in e.calldata?e.calldata:cN.compile(e.calldata)}));return cN.compile({orderCalls:t})},uY=(e,t="0")=>"1"===t?uK(e):uq(e);function uZ(e,t){let r=[].concat(e).map(e=>{let{classHash:r,salt:n,unique:a=!0,constructorCalldata:i=[]}=e,s=cN.compile(i),o=n??um();return{call:{contractAddress:oa.ADDRESS,entrypoint:oa.ENTRYPOINT,calldata:[r,o,lh(a),s.length,...s]},address:ue(a?an.pedersen(t,o):o,r,s,a?oa.ADDRESS:0)}});return{calls:r.map(e=>e.call),addresses:r.map(e=>e.address)}}function uX(e){return"fee"===e?{v1:oC.F1,v2:oC.F2,v3:oC.F3}:{v1:oC.V1,v2:oC.V2,v3:oC.V3}}var uJ={headers:{"Content-Type":"application/json"},blockIdentifier:oI.PENDING,retries:200},uQ=class{id="RPC071";channelSpecVersion=op.v0_7_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(e){let{baseFetch:t,batch:r,blockIdentifier:n,chainId:a,headers:i,nodeUrl:s,retries:o,specVersion:l,transactionRetryIntervalFallback:c,waitMode:u}=e||{};Object.values(od).includes(s)?this.nodeUrl=uM(s,e?.default,this.channelSpecVersion):s?this.nodeUrl=s:this.nodeUrl=uM(void 0,e?.default,this.channelSpecVersion),this.baseFetch=t||o_.get("fetch")||uU,this.blockIdentifier=n??uJ.blockIdentifier,this.chainId=a,this.headers={...uJ.headers,...i},this.retries=o??uJ.retries,this.specVersion=l,this.transactionRetryIntervalFallback=c,this.waitMode=u??!1,this.requestId=0,"number"==typeof r&&(this.batchClient=new oZ({nodeUrl:this.nodeUrl,headers:this.headers,interval:r,baseFetch:this.baseFetch})),oE.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,r=0){let n={id:r,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:oY(n),headers:this.headers})}errorHandler(e,t,r,n){if(r)throw new uD(r,e,t);if(n instanceof uP)throw n;if(n)throw Error(n.message)}async fetchEndpoint(e,t){try{if(this.batchClient){let{error:r,result:n}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,r),n}let r=await this.fetch(e,t,this.requestId+=1),{error:n,result:a}=await r.json();return this.errorHandler(e,t,n),a}catch(r){throw this.errorHandler(e,t,r?.response?.data,r),r}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){let e=await this.fetchEndpoint("starknet_specVersion");if(uh(this.channelSpecVersion,e)||oE.error(ob.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!uf(e))throw new uP(`${ob.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=e}return this.specVersion}getNonceForAddress(e,t=this.blockIdentifier){let r=o9(e),n=new uW(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){let t=new uW(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){let t=new uW(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){let t=new uW(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){let t=new uW(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){let t=new uW(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){let t=new uW(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){let t=o9(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){let r=new uW(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:t})}getTransactionReceipt(e){let t=o9(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){let t=o9(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){let t=o9(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){let{blockIdentifier:r=this.blockIdentifier,skipValidate:n=!0,skipFeeCharge:a=!0}=t,i=new uW(r).identifier,s=[];return n&&s.push(I.ESimulationFlag.SKIP_VALIDATE),a&&s.push(I.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map(e=>this.buildTransaction(e)),simulation_flags:s})}async waitForTransaction(e,t){let r,n=o9(e),{retries:a}=this,i=!1,s=!1,o=t?.retryInterval??this.transactionRetryIntervalDefault,l=t?.errorStates??[I.ETransactionStatus.REJECTED],c=t?.successStates??[I.ETransactionExecutionStatus.SUCCEEDED,I.ETransactionStatus.ACCEPTED_ON_L2,I.ETransactionStatus.ACCEPTED_ON_L1];for(;!i;){await uV(o);try{let e=(r=await this.getTransactionStatus(n)).execution_status,t=r.finality_status;if(!t)throw Error("waiting for transaction status");if(l.includes(e)||l.includes(t)){let n=`${e}: ${t}`,a=Error(n);throw a.response=r,s=!0,a}(c.includes(e)||c.includes(t))&&(i=!0)}catch(e){if(e instanceof Error&&s)throw e;if(a<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}a-=1}let u=null;for(;null===u;){try{u=await this.getTransactionReceipt(n)}catch(e){if(a<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}a-=1,await uV(o)}return u}getStorageAt(e,t,r=this.blockIdentifier){let n=o9(e),a=lt(t),i=new uW(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:a,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){let r=o9(e),n=new uW(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}getClass(e,t=this.blockIdentifier){let r=o9(e),n=new uW(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n})}getClassAt(e,t=this.blockIdentifier){let r=o9(e),n=new uW(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:r=!0}){let n=new uW(t).identifier,a={simulation_flags:r?[I.ESimulationFlag.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:e.map(e=>this.buildTransaction(e,"fee")),block_id:n,...a})}async invoke(e,t){let r;return ud(t)?(r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:I.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:cN.toHex(e.calldata),version:I.ETransactionVersion.V3,signature:u_(e.signature),nonce:o9(t.nonce),resource_bounds:t.resourceBounds,tip:o9(t.tip),paymaster_data:t.paymasterData.map(e=>o9(e)),account_deployment_data:t.accountDeploymentData.map(e=>o9(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}}),oJ(!t.maxFee,()=>{oE.warn(ob.maxFeeInV3,{type:I.ETransactionType.INVOKE})})):(r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{sender_address:e.contractAddress,calldata:cN.toHex(e.calldata),type:I.ETransactionType.INVOKE,max_fee:o9(t.maxFee||0),version:I.ETransactionVersion.V1,signature:u_(e.signature),nonce:o9(t.nonce)}}),oE.warn(ob.legacyTxWarningMessage,{version:I.ETransactionVersion.V1,type:I.ETransactionType.INVOKE})),this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare({contract:e,signature:t,senderAddress:r,compiledClassHash:n},a){let i;if(uC(e)||ud(a))if(uC(e)&&!ud(a))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:I.ETransactionType.DECLARE,contract_class:{sierra_program:ug(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},compiled_class_hash:n||"",version:I.ETransactionVersion.V2,max_fee:o9(a.maxFee||0),signature:u_(t),sender_address:r,nonce:o9(a.nonce)}}),oE.warn(ob.legacyTxWarningMessage,{version:I.ETransactionVersion.V2,type:I.ETransactionType.DECLARE});else if(uC(e)&&ud(a))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:I.ETransactionType.DECLARE,sender_address:r,compiled_class_hash:n||"",version:I.ETransactionVersion.V3,signature:u_(t),nonce:o9(a.nonce),contract_class:{sierra_program:ug(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:a.resourceBounds,tip:o9(a.tip),paymaster_data:a.paymasterData.map(e=>o9(e)),account_deployment_data:a.accountDeploymentData.map(e=>o9(e)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}}),oJ(!a.maxFee,()=>{oE.warn(ob.maxFeeInV3,{type:I.ETransactionType.DECLARE})});else throw Error("declare unspotted parameters");else i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:I.ETransactionType.DECLARE,contract_class:{program:e.program,entry_points_by_type:e.entry_points_by_type,abi:e.abi},version:I.ETransactionVersion.V1,max_fee:o9(a.maxFee||0),signature:u_(t),sender_address:r,nonce:o9(a.nonce)}}),oE.warn(ob.legacyTxWarningMessage,{version:I.ETransactionVersion.V1,type:I.ETransactionType.DECLARE});return this.waitMode?this.waitForTransaction((await i).transaction_hash):i}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:r,signature:n},a){let i;return ud(a)?(i=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:I.ETransactionType.DEPLOY_ACCOUNT,version:I.ETransactionVersion.V3,signature:u_(n),nonce:o9(a.nonce),contract_address_salt:o9(r||0),constructor_calldata:cN.toHex(t||[]),class_hash:o9(e),resource_bounds:a.resourceBounds,tip:o9(a.tip),paymaster_data:a.paymasterData.map(e=>o9(e)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}}),oJ(!a.maxFee,()=>{oE.warn(ob.maxFeeInV3,{type:I.ETransactionType.DEPLOY_ACCOUNT})})):(i=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{constructor_calldata:cN.toHex(t||[]),class_hash:o9(e),contract_address_salt:o9(r||0),type:I.ETransactionType.DEPLOY_ACCOUNT,max_fee:o9(a.maxFee||0),version:I.ETransactionVersion.V1,signature:u_(n),nonce:o9(a.nonce)}}),oE.warn(ob.legacyTxWarningMessage,{version:I.ETransactionVersion.V1,type:I.ETransactionType.DEPLOY_ACCOUNT})),this.waitMode?this.waitForTransaction((await i).transaction_hash):i}callContract(e,t=this.blockIdentifier){let r=new uW(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:l_(e.entrypoint),calldata:cN.toHex(e.calldata)},block_id:r})}estimateMessageFee(e,t=this.blockIdentifier){let{from_address:r,to_address:n,entry_point_selector:a,payload:i}=e,s={from_address:uL(r),to_address:o9(n),entry_point_selector:lw(a),payload:ld(i)},o=new uW(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){let r,n=uX(t);if(ud(e)?(r={signature:u_(e.signature),nonce:o9(e.nonce),resource_bounds:e.resourceBounds,tip:o9(e.tip),paymaster_data:e.paymasterData.map(e=>o9(e)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(e=>o9(e))},oJ(!e.maxFee,()=>{oE.warn(ob.maxFeeInV3,{type:e.type,versionType:t})})):(r={signature:u_(e.signature),nonce:o9(e.nonce),max_fee:o9(e.maxFee||0)},oE.warn(ob.legacyTxWarningMessage,{version:e.version,type:e.type})),e.type===ox.INVOKE)return{type:I.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:cN.toHex(e.calldata),version:o9(e.version||n.v3),...r};if(e.type===ox.DECLARE)return uC(e.contract)?{type:e.type,contract_class:{...e.contract,sierra_program:ug(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:o9(e.version||n.v3),...r}:{type:e.type,contract_class:e.contract,sender_address:e.senderAddress,version:o9(e.version||n.v1),...r};if(e.type===ox.DEPLOY_ACCOUNT){let{account_deployment_data:t,...a}=r;return{type:e.type,constructor_calldata:cN.toHex(e.constructorCalldata||[]),class_hash:o9(e.classHash),contract_address_salt:o9(e.addressSalt||0),version:o9(e.version||n.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}},u0={};sU(u0,{RpcChannel:()=>u2});var u1={headers:{"Content-Type":"application/json"},blockIdentifier:oI.PENDING,retries:200},u2=class{id="RPC081";channelSpecVersion=op.v0_8_1;nodeUrl;headers;requestId;blockIdentifier;retries;waitMode;chainId;specVersion;transactionRetryIntervalFallback;batchClient;baseFetch;constructor(e){let{baseFetch:t,batch:r,blockIdentifier:n,chainId:a,headers:i,nodeUrl:s,retries:o,specVersion:l,transactionRetryIntervalFallback:c,waitMode:u}=e||{};Object.values(od).includes(s)?this.nodeUrl=uM(s,e?.default,this.channelSpecVersion):s?this.nodeUrl=s:this.nodeUrl=uM(void 0,e?.default,this.channelSpecVersion),this.baseFetch=t||o_.get("fetch")||uU,this.blockIdentifier=n??u1.blockIdentifier,this.chainId=a,this.headers={...u1.headers,...i},this.retries=o??u1.retries,this.specVersion=l,this.transactionRetryIntervalFallback=c,this.waitMode=u??!1,this.requestId=0,"number"==typeof r&&(this.batchClient=new oZ({nodeUrl:this.nodeUrl,headers:this.headers,interval:r,baseFetch:this.baseFetch})),oE.debug("Using Channel",this.id)}readSpecVersion(){return this.specVersion}get transactionRetryIntervalDefault(){return this.transactionRetryIntervalFallback??5e3}setChainId(e){this.chainId=e}fetch(e,t,r=0){let n={id:r,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:oY(n),headers:this.headers})}errorHandler(e,t,r,n){if(r)throw new uD(r,e,t);if(n instanceof uP)throw n;if(n)throw Error(n.message)}async fetchEndpoint(e,t){try{if(this.batchClient){let{error:r,result:n}=await this.batchClient.fetch(e,t,this.requestId+=1);return this.errorHandler(e,t,r),n}let r=await this.fetch(e,t,this.requestId+=1),{error:n,result:a}=await r.json();return this.errorHandler(e,t,n),a}catch(r){throw this.errorHandler(e,t,r?.response?.data,r),r}}async getChainId(){return this.chainId??=await this.fetchEndpoint("starknet_chainId"),this.chainId}getSpecVersion(){return this.fetchEndpoint("starknet_specVersion")}async setUpSpecVersion(){if(!this.specVersion){let e=await this.fetchEndpoint("starknet_specVersion");if(uh(this.channelSpecVersion,e)||oE.error(ob.channelVersionMismatch,{channelId:this.id,channelSpecVersion:this.channelSpecVersion,nodeSpecVersion:this.specVersion}),!uf(e))throw new uP(`${ob.unsupportedSpecVersion}, channelId: ${this.id}`);this.specVersion=e}return this.specVersion}getMessagesStatus(e){let t=o9(e);return this.fetchEndpoint("starknet_getMessagesStatus",{transaction_hash:t})}getStorageProof(e=[],t=[],r=[],n=this.blockIdentifier){let a=new uW(n).identifier,i=lo(e),s=lo(t);return this.fetchEndpoint("starknet_getStorageProof",{block_id:a,class_hashes:i,contract_addresses:s,contracts_storage_keys:r})}getCompiledCasm(e){let t=o9(e);return this.fetchEndpoint("starknet_getCompiledCasm",{class_hash:t})}getNonceForAddress(e,t=this.blockIdentifier){let r=o9(e),n=new uW(t).identifier;return this.fetchEndpoint("starknet_getNonce",{contract_address:r,block_id:n})}getBlockLatestAccepted(){return this.fetchEndpoint("starknet_blockHashAndNumber")}getBlockNumber(){return this.fetchEndpoint("starknet_blockNumber")}getBlockWithTxHashes(e=this.blockIdentifier){let t=new uW(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxHashes",{block_id:t})}getBlockWithTxs(e=this.blockIdentifier){let t=new uW(e).identifier;return this.fetchEndpoint("starknet_getBlockWithTxs",{block_id:t})}getBlockWithReceipts(e=this.blockIdentifier){let t=new uW(e).identifier;return this.fetchEndpoint("starknet_getBlockWithReceipts",{block_id:t})}getBlockStateUpdate(e=this.blockIdentifier){let t=new uW(e).identifier;return this.fetchEndpoint("starknet_getStateUpdate",{block_id:t})}getBlockTransactionsTraces(e=this.blockIdentifier){let t=new uW(e).identifier;return this.fetchEndpoint("starknet_traceBlockTransactions",{block_id:t})}getBlockTransactionCount(e=this.blockIdentifier){let t=new uW(e).identifier;return this.fetchEndpoint("starknet_getBlockTransactionCount",{block_id:t})}getTransactionByHash(e){let t=o9(e);return this.fetchEndpoint("starknet_getTransactionByHash",{transaction_hash:t})}getTransactionByBlockIdAndIndex(e,t){let r=new uW(e).identifier;return this.fetchEndpoint("starknet_getTransactionByBlockIdAndIndex",{block_id:r,index:t})}getTransactionReceipt(e){let t=o9(e);return this.fetchEndpoint("starknet_getTransactionReceipt",{transaction_hash:t})}getTransactionTrace(e){let t=o9(e);return this.fetchEndpoint("starknet_traceTransaction",{transaction_hash:t})}getTransactionStatus(e){let t=o9(e);return this.fetchEndpoint("starknet_getTransactionStatus",{transaction_hash:t})}simulateTransaction(e,t={}){let{blockIdentifier:r=this.blockIdentifier,skipValidate:n=!0,skipFeeCharge:a=!0}=t,i=new uW(r).identifier,s=[];return n&&s.push(ew.ESimulationFlag.SKIP_VALIDATE),a&&s.push(ew.ESimulationFlag.SKIP_FEE_CHARGE),this.fetchEndpoint("starknet_simulateTransactions",{block_id:i,transactions:e.map(e=>this.buildTransaction(e)),simulation_flags:s})}async waitForTransaction(e,t){let r,n=o9(e),{retries:a}=this,i=!1,s=!1,o=t?.retryInterval??this.transactionRetryIntervalDefault,l=t?.errorStates??[ew.ETransactionStatus.REJECTED],c=t?.successStates??[ew.ETransactionExecutionStatus.SUCCEEDED,ew.ETransactionStatus.ACCEPTED_ON_L2,ew.ETransactionStatus.ACCEPTED_ON_L1];for(;!i;){await uV(o);try{let e=(r=await this.getTransactionStatus(n)).execution_status,t=r.finality_status;if(!t)throw Error("waiting for transaction status");if(l.includes(e)||l.includes(t)){let n=`${e}: ${t}`,a=Error(n);throw a.response=r,s=!0,a}(c.includes(e)||c.includes(t))&&(i=!0)}catch(e){if(e instanceof Error&&s)throw e;if(a<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}a-=1}let u=null;for(;null===u;){try{u=await this.getTransactionReceipt(n)}catch(e){if(a<=0)throw Error(`waitForTransaction timed-out with retries ${this.retries}`)}a-=1,await uV(o)}return u}getStorageAt(e,t,r=this.blockIdentifier){let n=o9(e),a=lt(t),i=new uW(r).identifier;return this.fetchEndpoint("starknet_getStorageAt",{contract_address:n,key:a,block_id:i})}getClassHashAt(e,t=this.blockIdentifier){let r=o9(e),n=new uW(t).identifier;return this.fetchEndpoint("starknet_getClassHashAt",{block_id:n,contract_address:r})}getClass(e,t=this.blockIdentifier){let r=o9(e),n=new uW(t).identifier;return this.fetchEndpoint("starknet_getClass",{class_hash:r,block_id:n})}getClassAt(e,t=this.blockIdentifier){let r=o9(e),n=new uW(t).identifier;return this.fetchEndpoint("starknet_getClassAt",{block_id:n,contract_address:r})}async getEstimateFee(e,{blockIdentifier:t=this.blockIdentifier,skipValidate:r=!0}){let n=new uW(t).identifier,a={simulation_flags:r?[ew.ESimulationFlag.SKIP_VALIDATE]:[]};return this.fetchEndpoint("starknet_estimateFee",{request:e.map(e=>this.buildTransaction(e,"fee")),block_id:n,...a})}async invoke(e,t){let r;if(ud(t))if(oR(t.resourceBounds))r=this.fetchEndpoint("starknet_addInvokeTransaction",{invoke_transaction:{type:ew.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:cN.toHex(e.calldata),version:ew.ETransactionVersion.V3,signature:u_(e.signature),nonce:o9(t.nonce),resource_bounds:t.resourceBounds,tip:o9(t.tip),paymaster_data:t.paymasterData.map(e=>o9(e)),account_deployment_data:t.accountDeploymentData.map(e=>o9(e)),nonce_data_availability_mode:t.nonceDataAvailabilityMode,fee_data_availability_mode:t.feeDataAvailabilityMode}});else throw Error(ob.SWOldV3);else throw Error(ob.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await r).transaction_hash):r}async declare({contract:e,signature:t,senderAddress:r,compiledClassHash:n},a){let i;if(uC(e)&&ud(a))if(oR(a.resourceBounds))i=this.fetchEndpoint("starknet_addDeclareTransaction",{declare_transaction:{type:ew.ETransactionType.DECLARE,sender_address:r,compiled_class_hash:n||"",version:ew.ETransactionVersion.V3,signature:u_(t),nonce:o9(a.nonce),contract_class:{sierra_program:ug(e.sierra_program),contract_class_version:e.contract_class_version,entry_points_by_type:e.entry_points_by_type,abi:e.abi},resource_bounds:a.resourceBounds,tip:o9(a.tip),paymaster_data:a.paymasterData.map(e=>o9(e)),account_deployment_data:a.accountDeploymentData.map(e=>o9(e)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}});else throw Error(ob.SWOldV3);else throw Error(ob.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await i).transaction_hash):i}async deployAccount({classHash:e,constructorCalldata:t,addressSalt:r,signature:n},a){let i;if(ud(a))if(oR(a.resourceBounds))i=this.fetchEndpoint("starknet_addDeployAccountTransaction",{deploy_account_transaction:{type:ew.ETransactionType.DEPLOY_ACCOUNT,version:ew.ETransactionVersion.V3,signature:u_(n),nonce:o9(a.nonce),contract_address_salt:o9(r||0),constructor_calldata:cN.toHex(t||[]),class_hash:o9(e),resource_bounds:a.resourceBounds,tip:o9(a.tip),paymaster_data:a.paymasterData.map(e=>o9(e)),nonce_data_availability_mode:a.nonceDataAvailabilityMode,fee_data_availability_mode:a.feeDataAvailabilityMode}});else throw Error(ob.SWOldV3);else throw Error(ob.legacyTxRPC08Message);return this.waitMode?this.waitForTransaction((await i).transaction_hash):i}callContract(e,t=this.blockIdentifier){let r=new uW(t).identifier;return this.fetchEndpoint("starknet_call",{request:{contract_address:e.contractAddress,entry_point_selector:l_(e.entrypoint),calldata:cN.toHex(e.calldata)},block_id:r})}estimateMessageFee(e,t=this.blockIdentifier){let{from_address:r,to_address:n,entry_point_selector:a,payload:i}=e,s={from_address:uL(r),to_address:o9(n),entry_point_selector:lw(a),payload:ld(i)},o=new uW(t).identifier;return this.fetchEndpoint("starknet_estimateMessageFee",{message:s,block_id:o})}getSyncingStats(){return this.fetchEndpoint("starknet_syncing")}getEvents(e){return this.fetchEndpoint("starknet_getEvents",{filter:e})}buildTransaction(e,t){let r,n=uX(t);if(ud(e))r={signature:u_(e.signature),nonce:o9(e.nonce),resource_bounds:e.resourceBounds,tip:o9(e.tip),paymaster_data:e.paymasterData.map(e=>o9(e)),nonce_data_availability_mode:e.nonceDataAvailabilityMode,fee_data_availability_mode:e.feeDataAvailabilityMode,account_deployment_data:e.accountDeploymentData.map(e=>o9(e))};else throw Error("v0,v1,v2 tx are not supported on RPC 0.8");if(e.type===ox.INVOKE)return{type:ew.ETransactionType.INVOKE,sender_address:e.contractAddress,calldata:cN.toHex(e.calldata),version:o9(e.version||n.v3),...r};if(e.type===ox.DECLARE){if(!uC(e.contract))throw oE.error("Cairo 0 -  non Sierra v1 tx are not supported"),Error("Declaring non Sierra contract using RPC 0.8");return{type:e.type,contract_class:{...e.contract,sierra_program:ug(e.contract.sierra_program)},compiled_class_hash:e.compiledClassHash||"",sender_address:e.senderAddress,version:o9(e.version||n.v3),...r}}if(e.type===ox.DEPLOY_ACCOUNT){let{account_deployment_data:t,...a}=r;return{type:e.type,constructor_calldata:cN.toHex(e.constructorCalldata||[]),class_hash:o9(e.classHash),contract_address_salt:o9(e.addressSalt||0),version:o9(e.version||n.v3),...a}}throw Error("RPC buildTransaction received unknown TransactionType")}},u5=("undefined"!=typeof WebSocket&&WebSocket||"undefined"!=typeof globalThis&&globalThis.WebSocket||e.g.WebSocket,class{margin;constructor(e){this.margin=e}estimatedFeeToMaxFee(e){return uw(e,this.margin?.maxFee)}estimateFeeToBounds(e){return uE(e,this.margin?.bounds)}parseGetBlockResponse(e){return e}parseTransactionReceipt(e){return e}parseFeeEstimateResponse(e){let t=e[0];return{overall_fee:o4(t.overall_fee),unit:t.unit,l1_gas_consumed:o7(t.l1_gas_consumed)??o7(t.gas_consumed)??0n,l1_gas_price:o7(t.l1_gas_price)??o7(t.gas_price)??0n,l2_gas_consumed:o7(t.l2_gas_consumed)??void 0,l2_gas_price:o7(t.l2_gas_price)??void 0,l1_data_gas_consumed:o7(t.l1_data_gas_consumed)??o7(t.data_gas_consumed)??0n,l1_data_gas_price:o7(t.l1_data_gas_price)??o7(t.gas_price)??0n,suggestedMaxFee:this.estimatedFeeToMaxFee(t.overall_fee),resourceBounds:this.estimateFeeToBounds(t)}}parseFeeEstimateBulkResponse(e){return e.map(e=>({overall_fee:o4(e.overall_fee),unit:e.unit,l1_gas_consumed:o7(e.l1_gas_consumed)??o7(e.gas_consumed)??0n,l1_gas_price:o7(e.l1_gas_price)??o7(e.gas_price)??0n,l2_gas_consumed:o7(e.l2_gas_consumed)??void 0,l2_gas_price:o7(e.l2_gas_price)??void 0,l1_data_gas_consumed:o7(e.l1_data_gas_consumed)??o7(e.data_gas_consumed)??0n,l1_data_gas_price:o7(e.l1_data_gas_price)??o7(e.gas_price)??0n,suggestedMaxFee:this.estimatedFeeToMaxFee(e.overall_fee),resourceBounds:this.estimateFeeToBounds(e)}))}parseSimulateTransactionResponse(e){return e.map(e=>({...e,suggestedMaxFee:this.estimatedFeeToMaxFee(e.fee_estimation.overall_fee),resourceBounds:this.estimateFeeToBounds(e.fee_estimation)}))}parseContractClassResponse(e){return{...e,abi:o6(e.abi)?JSON.parse(e.abi):e.abi}}parseL1GasPriceResponse(e){return e.l1_gas_price.price_in_wei}}),u6=class e{statusReceipt;value;constructor(t){for(let[r]of([this.statusReceipt,this.value]=e.isSuccess(t)?["success",t]:e.isReverted(t)?["reverted",t]:["error",Error("Unknown response type")],Object.entries(this)))Object.defineProperty(this,r,{enumerable:!1});for(let[e,r]of Object.entries(t))Object.defineProperty(this,e,{enumerable:!0,writable:!1,value:r})}match(e){return this.statusReceipt in e?e[this.statusReceipt](this.value):e._()}isSuccess(){return"success"===this.statusReceipt}isReverted(){return"reverted"===this.statusReceipt}isError(){return"error"===this.statusReceipt}static isSuccess(e){return e.execution_status===oA.SUCCEEDED}static isReverted(e){return e.execution_status===oA.REVERTED}};sU({},{encodeData:()=>dc,encodeType:()=>di,encodeValue:()=>dl,getDependencies:()=>da,getMessageHash:()=>dd,getStructHash:()=>du,getTypeHash:()=>ds,isMerkleTreeType:()=>dn,prepareSelector:()=>dr,validateTypedData:()=>dt,verifyMessage:()=>dh}),sU({},{MerkleTree:()=>u3,proofMerklePath:()=>function e(t,r,n,a=c3){if(0===n.length)return t===r;let[i,...s]=n;return e(t,u3.hash(r,i,a),s,a)}});var u3=class e{leaves;branches=[];root;hashMethod;constructor(e,t=c3){this.hashMethod=t,this.leaves=e,this.root=this.build(e)}build(t){if(1===t.length)return t[0];t.length!==this.leaves.length&&this.branches.push(t);let r=[];for(let n=0;n<t.length;n+=2)n+1===t.length?r.push(e.hash(t[n],"0x0",this.hashMethod)):r.push(e.hash(t[n],t[n+1],this.hashMethod));return this.build(r)}static hash(e,t,r=c3){let[n,a]=[BigInt(e),BigInt(t)].sort((e,t)=>e>=t?1:-1);return r(n,a)}getProof(t,r=this.leaves,n=[]){let a=r.indexOf(t);if(-1===a)throw Error("leaf not found");if(1===r.length)return n;let i=a%2==0,s=(i?r[a+1]:r[a-1])??"0x0",o=[...n,s],l=this.leaves.length===r.length?-1:this.branches.findIndex(e=>e.length===r.length),c=this.branches[l+1]??[this.root];return this.getProof(e.hash(i?t:s,i?s:t,this.hashMethod),c,o)}},u8={u256:JSON.parse('[{ "name": "low", "type": "u128" }, { "name": "high", "type": "u128" }]'),TokenAmount:JSON.parse('[{ "name": "token_address", "type": "ContractAddress" }, { "name": "amount", "type": "u256" }]'),NftId:JSON.parse('[{ "name": "collection_address", "type": "ContractAddress" }, { "name": "token_id", "type": "u256" }]')},u4={[x.ACTIVE]:{domain:"StarknetDomain",hashMethod:c9,hashMerkleMethod:c8,escapeTypeString:e=>`"${e}"`,presetTypes:u8},[x.LEGACY]:{domain:"StarkNetDomain",hashMethod:c7,hashMerkleMethod:c3,escapeTypeString:e=>e,presetTypes:{}}};function u7(e,t,{min:r,max:n}){let a=BigInt(e);oX(a>=r&&a<=n,`${a} (${t}) is out of bounds [${r}, ${n}]`)}function u9({types:e,domain:t}){return u4[x.ACTIVE].domain in e&&t.revision?.toString()===x.ACTIVE?x.ACTIVE:u4[x.LEGACY].domain in e&&(t.revision??x.LEGACY)===x.LEGACY?x.LEGACY:void 0}function de(e){try{return o9(e)}catch(t){if(o6(e))return o9(lO(e));throw Error(`Invalid BigNumberish: ${e}`)}}function dt(e){return!!(e.message&&e.primaryType&&e.types&&u9(e))}function dr(e){return o8(e)?e:l_(e)}function dn(e){return"merkletree"===e.type}function da(e,t,r=[],n="",a=x.LEGACY){let i=[t];return"*"===t[t.length-1]?i=[t.slice(0,-1)]:a===x.ACTIVE&&("enum"===t?i=[n]:t.match(/^\(.*\)$/)&&(i=t.slice(1,-1).split(",").map(e=>"*"===e[e.length-1]?e.slice(0,-1):e))),i.filter(t=>!r.includes(t)&&e[t]).reduce((t,r)=>[...t,...[r,...e[r].reduce((t,r)=>[...t,...da(e,r.type,t,r.contains,a).filter(e=>!t.includes(e))],[])].filter(e=>!t.includes(e))],[])}function di(e,t,r=x.LEGACY){let n=r===x.ACTIVE?{...e,...u4[r].presetTypes}:e,[a,...i]=da(n,t,void 0,void 0,r),s=a?[a,...i.sort()]:[],o=u4[r].escapeTypeString;return s.map(e=>{let t=n[e].map(e=>{let t="enum"===e.type&&r===x.ACTIVE?e.contains:e.type,n=t.match(/^\(.*\)$/)?`(${t.slice(1,-1).split(",").map(e=>e?o(e):e).join(",")})`:o(t);return`${o(e.name)}:${n}`});return`${o(e)}(${t})`}).join("")}function ds(e,t,r=x.LEGACY){return l_(di(e,t,r))}function dl(e,t,r,n={},a=x.LEGACY){if(e[t])return[t,du(e,t,r,a)];if(u4[a].presetTypes[t])return[t,du(u4[a].presetTypes,t,r,a)];if(t.endsWith("*")){let n=r.map(r=>dl(e,t.slice(0,-1),r,void 0,a)[1]);return[t,u4[a].hashMethod(n)]}switch(t){case"enum":if(a===x.ACTIVE){let[i,s]=Object.entries(r)[0],o=e[n.parent].find(e=>e.name===n.key),l=e[o.contains],c=l.find(e=>e.name===i),u=l.indexOf(c),d=c.type.slice(1,-1).split(",").map((t,r)=>t?dl(e,t,s[r],void 0,a)[1]:t);return[t,u4[a].hashMethod([u,...d])]}return[t,de(r)];case"merkletree":{let t=function(e,t){if(t.parent&&t.key){let r=e[t.parent].find(e=>e.name===t.key);if(!dn(r))throw Error(`${t.key} is not a merkle tree`);if(r.contains.endsWith("*"))throw Error(`Merkle tree contain property must not be an array but was given ${t.key}`);return r.contains}return"raw"}(e,n),{root:i}=new u3(r.map(r=>dl(e,t,r,void 0,a)[1]),u4[a].hashMerkleMethod);return["felt",i]}case"selector":return["felt",dr(r)];case"string":if(a===x.ACTIVE){let e=lD(r),n=[e.data.length,...e.data,e.pending_word,e.pending_word_len];return[t,u4[a].hashMethod(n)]}return[t,de(r)];case"i128":if(a===x.ACTIVE){let e=BigInt(r);return u7(e,t,or),[t,de(e<0n?s4+e:e)]}return[t,de(r)];case"timestamp":case"u128":return a===x.ACTIVE&&u7(r,t,on),[t,de(r)];case"felt":case"shortstring":return a===x.ACTIVE&&u7(de(r),t,ot),[t,de(r)];case"ClassHash":case"ContractAddress":return a===x.ACTIVE&&u7(r,t,ot),[t,de(r)];case"bool":return a===x.ACTIVE&&oX(o2(r),`Type mismatch for ${t} ${r}`),[t,de(r)];default:if(a===x.ACTIVE)throw Error(`Unsupported type: ${t}`);return[t,de(r)]}}function dc(e,t,r,n=x.LEGACY){let[a,i]=(e[t]??u4[n].presetTypes[t]).reduce(([a,i],s)=>{if(void 0===r[s.name]||null===r[s.name]&&"enum"!==s.type)throw Error(`Cannot encode data: missing data for '${s.name}'`);let o=r[s.name],l={parent:t,key:s.name},[c,u]=dl(e,s.type,o,l,n);return[[...a,c],[...i,u]]},[["felt"],[ds(e,t,n)]]);return[a,i]}function du(e,t,r,n=x.LEGACY){return u4[n].hashMethod(dc(e,t,r,n)[1])}function dd(e,t){if(!dt(e))throw Error("Typed data does not match JSON schema");let r=u9(e),{domain:n,hashMethod:a}=u4[r];return a([lO("StarkNet Message"),du(e.types,n,e.domain,r),t,du(e.types,e.primaryType,e.message,r)])}function dh(e,t,r,n){let a=dt(e);if(!lm(e)&&!a)throw Error("message has a wrong format.");if(a&&void 0===n)throw Error("When providing a TypedData in message parameter, the accountAddress parameter has to be provided.");if(a&&!lm(n))throw Error("accountAddress shall be a BigNumberish");let i=a?dd(e,n):o9(e),s=Array.isArray(t)?new an.Signature(BigInt(t[0]),BigInt(t[1])):t,o=o9(r);return an.verify(s,i,o)}var df=class{responseParser;channel;constructor(e){if(e&&"channel"in e)this.channel=e.channel,this.responseParser="responseParser"in e?e.responseParser:new u5;else{if(e&&e.specVersion)if(uh("0.8",e.specVersion))this.channel=new u0.RpcChannel({...e,waitMode:!1});else if(uh("0.7",e.specVersion))this.channel=new ov.RpcChannel({...e,waitMode:!1});else throw Error(`unsupported channel for spec version: ${e.specVersion}`);else if(uh("0.8",o_.get("rpcVersion")))this.channel=new u0.RpcChannel({...e,waitMode:!1});else if(uh("0.7",o_.get("rpcVersion")))this.channel=new ov.RpcChannel({...e,waitMode:!1});else throw Error("unable to define spec version for channel");this.responseParser=new u5(e?.feeMarginPercentage)}}static async create(e){let t=new ov.RpcChannel({...e}),r=await t.getSpecVersion();if(uf(r)||oE.warn(`Using incompatible node spec version ${r}`),uh("0.7",r))return new this({...e,specVersion:op.v0_7_1});if(uh("0.8",r))return new this({...e,specVersion:op.v0_8_1});throw new uP(`Provided RPC node specification version ${r} is not compatible with the SDK. SDK supported RPC versions ${Object.keys(op).toString()}`)}fetch(e,t,r=0){return this.channel.fetch(e,t,r)}async getChainId(){return this.channel.getChainId()}readSpecVersion(){return this.channel.readSpecVersion()}async getSpecVersion(){return this.channel.getSpecVersion()}setUpSpecVersion(){return this.channel.setUpSpecVersion()}async getNonceForAddress(e,t){return this.channel.getNonceForAddress(e,t)}async getBlock(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseGetBlockResponse)}async getBlockLatestAccepted(){return this.channel.getBlockLatestAccepted()}async getBlockNumber(){return this.channel.getBlockNumber()}async getBlockWithTxHashes(e){return this.channel.getBlockWithTxHashes(e)}async getBlockWithTxs(e){return this.channel.getBlockWithTxs(e)}async waitForBlock(e="pending",t=5e3){if(e===oI.LATEST)return;let r=await this.getBlockNumber(),n=e===oI.PENDING?r+1:Number(o9(e));if(n<=r)return;let{retries:a}=this.channel,i=a,s=!1;for(;!s;)if(await this.getBlockNumber()===n?s=!0:await uV(t),(i-=1)<=0)throw Error(`waitForBlock() timed-out after ${a} tries.`)}async getL1GasPrice(e){return this.channel.getBlockWithTxHashes(e).then(this.responseParser.parseL1GasPriceResponse)}async getL1MessageHash(e){let t=await this.channel.getTransactionByHash(e);oX("L1_HANDLER"===t.type,"This L2 transaction is not a L1 message.");let{calldata:r,contract_address:n,entry_point_selector:a,nonce:i}=t;return lE([r[0],n,i,a,r.length-1,...r.slice(1)])}async getBlockWithReceipts(e){return this.channel.getBlockWithReceipts(e)}getStateUpdate=this.getBlockStateUpdate;async getBlockStateUpdate(e){return this.channel.getBlockStateUpdate(e)}async getBlockTransactionsTraces(e){return this.channel.getBlockTransactionsTraces(e)}async getBlockTransactionCount(e){return this.channel.getBlockTransactionCount(e)}async getTransaction(e){return this.channel.getTransactionByHash(e)}async getTransactionByHash(e){return this.channel.getTransactionByHash(e)}async getTransactionByBlockIdAndIndex(e,t){return this.channel.getTransactionByBlockIdAndIndex(e,t)}async getTransactionReceipt(e){let t=await this.channel.getTransactionReceipt(e);return new u6(this.responseParser.parseTransactionReceipt(t))}async getTransactionTrace(e){return this.channel.getTransactionTrace(e)}async getTransactionStatus(e){return this.channel.getTransactionStatus(e)}async getSimulateTransaction(e,t){return this.channel.simulateTransaction(e,t).then(e=>this.responseParser.parseSimulateTransactionResponse(e))}async waitForTransaction(e,t){return new u6(await this.channel.waitForTransaction(e,t))}async getStorageAt(e,t,r){return this.channel.getStorageAt(e,t,r)}async getClassHashAt(e,t){return this.channel.getClassHashAt(e,t)}async getClassByHash(e){return this.getClass(e)}async getClass(e,t){return this.channel.getClass(e,t).then(this.responseParser.parseContractClassResponse)}async getClassAt(e,t){return this.channel.getClassAt(e,t).then(this.responseParser.parseContractClassResponse)}async getContractVersion(e,t,{blockIdentifier:r=this.channel.blockIdentifier,compiler:n=!0}={}){let a;if(e)a=await this.getClassAt(e,r);else if(t)a=await this.getClass(t,r);else throw Error("getContractVersion require contractAddress or classHash");return uC(a)?n?{cairo:"1",compiler:ct(a.abi).compiler}:{cairo:"1",compiler:void 0}:{cairo:"0",compiler:"0"}}async getInvokeEstimateFee(e,t,r,n){return this.channel.getEstimateFee([{type:ox.INVOKE,...e,...t}],{blockIdentifier:r,skipValidate:n}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getDeclareEstimateFee(e,t,r,n){return this.channel.getEstimateFee([{type:ox.DECLARE,...e,...t}],{blockIdentifier:r,skipValidate:n}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getDeployAccountEstimateFee(e,t,r,n){return this.channel.getEstimateFee([{type:ox.DEPLOY_ACCOUNT,...e,...t}],{blockIdentifier:r,skipValidate:n}).then(e=>this.responseParser.parseFeeEstimateResponse(e))}async getEstimateFeeBulk(e,t){return this.channel.getEstimateFee(e,t).then(e=>this.responseParser.parseFeeEstimateBulkResponse(e))}async invokeFunction(e,t){return this.channel.invoke(e,t)}async declareContract(e,t){return this.channel.declare(e,t)}async deployAccountContract(e,t){return this.channel.deployAccount(e,t)}async callContract(e,t){return this.channel.callContract(e,t)}async estimateMessageFee(e,t){return this.channel.estimateMessageFee(e,t)}async getSyncingStats(){return this.channel.getSyncingStats()}async getEvents(e){return this.channel.getEvents(e)}async verifyMessageInStarknet(e,t,r,n,a){let i,s=dt(e);if(!lm(e)&&!s)throw Error("message has a wrong format.");if(!lm(r))throw Error("accountAddress shall be a BigNumberish");let o=s?dd(e,r):o9(e),l=a||{okResponse:[],nokResponse:["0x0","0x00"],error:["argent/invalid-signature","0x617267656e742f696e76616c69642d7369676e6174757265","is invalid, with respect to the public key","0x697320696e76616c6964","INVALID_SIG","0x494e56414c49445f534947"]};for(let e of n?[n]:["isValidSignature","is_valid_signature"])try{let n=await this.callContract({contractAddress:o9(r),entrypoint:e,calldata:cN.compile({hash:o4(o).toString(),signature:uy(t)})});if(l.nokResponse.includes(n[0].toString()))return!1;if(0===l.okResponse.length||l.okResponse.includes(n[0].toString()))return!0;throw Error("signatureVerificationResponse Error: response is not part of known responses")}catch(e){if(l.error.some(t=>e.message.includes(t)))return!1;i=e}throw Error(`Signature verification Error: ${i}`)}async isClassDeclared(e,t){let r;if(!e.classHash&&"contract"in e)r=uB(e).classHash;else if(e.classHash)r=e.classHash;else throw Error("contractClassIdentifier type not satisfied");try{return await this.getClass(r,t) instanceof Object}catch(e){if(e instanceof uP)return!1;throw e}}async prepareInvocations(e){let t=[];for(let r of e)r.type===ox.DECLARE?await this.isClassDeclared("payload"in r?r.payload:r)||t.unshift(r):t.push(r);return t}async getL1MessagesStatus(e){if(this.channel instanceof u0.RpcChannel)return this.channel.getMessagesStatus(e);throw new uP("Unsupported method for RPC version")}async getStorageProof(e,t,r,n){if(this.channel instanceof u0.RpcChannel)return this.channel.getStorageProof(e,t,r,n);throw new uP("Unsupported method for RPC version")}async getCompiledCasm(e){if(this.channel instanceof u0.RpcChannel)return this.channel.getCompiledCasm(e);throw new uP("Unsupported method for RPC version")}};sU({},{StarknetIdContract:()=>dS,StarknetIdIdentityContract:()=>dT,StarknetIdMulticallContract:()=>dk,StarknetIdPfpContract:()=>dO,StarknetIdPopContract:()=>dP,StarknetIdVerifierContract:()=>dC,dynamicCallData:()=>dU,dynamicFelt:()=>dL,execution:()=>dR,getStarknetIdContract:()=>dx,getStarknetIdIdentityContract:()=>dA,getStarknetIdMulticallContract:()=>dI,getStarknetIdPfpContract:()=>dN,getStarknetIdPopContract:()=>dD,getStarknetIdVerifierContract:()=>dB,isStarkDomain:()=>dV,useDecoded:()=>dE,useEncoded:()=>dv});var dp="abcdefghijklmnopqrstuvwxyz0123456789-",dg=BigInt(dp.length+1),dm="",dy=BigInt(dp.length),db=BigInt(dm.length),d_=BigInt(dm.length+1);function dw(e){let t=0;for(;e.endsWith(dm[dm.length-1]);)e=e.substring(0,e.length-1),t+=1;return[e,t]}function dE(e){let t="";return(e.forEach(e=>{for(;e!==s5;){let r=e%dg;if(e/=dg,r===BigInt(dp.length)){let r=e/d_;if(r===s5){let n=e%d_;e=r,n===s5?t+=dp[0]:t+=dm[Number(n)-1]}else t+=dm[Number(e%db)],e/=db}else t+=dp[Number(r)]}let[r,n]=dw(t);n&&(t=r+(n%2==0?dm[dm.length-1].repeat(n/2-1)+dm[0]+dp[1]:dm[dm.length-1].repeat((n-1)/2+1))),t+="."}),t)?t.concat("stark"):t}function dv(e){let t=BigInt(0),r=BigInt(1);if(e.endsWith(dm[0]+dp[1])){let[t,r]=dw(e.substring(0,e.length-2));e=t+dm[dm.length-1].repeat(2*(r+1))}else{let[t,r]=dw(e);r&&(e=t+dm[dm.length-1].repeat(1+2*(r-1)))}for(let n=0;n<e.length;n+=1){let a=e[n],i=dp.indexOf(a),s=BigInt(dp.indexOf(a));-1!==i?n===e.length-1&&e[n]===dp[0]?(t+=r*dy,r*=dg*dg):(t+=r*s,r*=dg):-1!==dm.indexOf(a)&&(t+=r*dy,r*=dg,t+=r*BigInt(+(n===e.length-1)+dm.indexOf(a)),r*=db)}return t}var dS={MAINNET:"0x6ac597f8116f886fa1c97a23fa4e08299975ecaf6b598873ca6792b9bbfb678",TESTNET_SEPOLIA:"0x154bc2e1af9260b9e66af0e9c46fc757ff893b3ff6a85718a810baf1474"};function dx(e){switch(e){case oh.SN_MAIN:return dS.MAINNET;case oh.SN_SEPOLIA:return dS.TESTNET_SEPOLIA;default:throw Error("Starknet.id is not yet deployed on this network")}}var dT={MAINNET:"0x05dbdedc203e92749e2e746e2d40a768d966bd243df04a6b712e222bc040a9af",TESTNET_SEPOLIA:"0x3697660a0981d734780731949ecb2b4a38d6a58fc41629ed611e8defda"};function dA(e){switch(e){case oh.SN_MAIN:return dT.MAINNET;case oh.SN_SEPOLIA:return dT.TESTNET_SEPOLIA;default:throw Error("Starknet.id verifier contract is not yet deployed on this network")}}var dk="0x034ffb8f4452df7a613a0210824d6414dbadcddce6c6e19bf4ddc9e22ce5f970";function dI(e){switch(e){case oh.SN_MAIN:case oh.SN_SEPOLIA:return dk;default:throw Error("Starknet.id multicall contract is not yet deployed on this network")}}var dC={MAINNET:"0x07d14dfd8ee95b41fce179170d88ba1f0d5a512e13aeb232f19cfeec0a88f8bf",TESTNET_SEPOLIA:"0x60B94fEDe525f815AE5E8377A463e121C787cCCf3a36358Aa9B18c12c4D566"};function dB(e){switch(e){case oh.SN_MAIN:return dC.MAINNET;case oh.SN_SEPOLIA:return dC.TESTNET_SEPOLIA;default:throw Error("Starknet.id verifier contract is not yet deployed on this network")}}var dO={MAINNET:"0x070aaa20ec4a46da57c932d9fd89ca5e6bb9ca3188d3df361a32306aff7d59c7",TESTNET_SEPOLIA:"0x9e7bdb8dabd02ea8cfc23b1d1c5278e46490f193f87516ed5ff2dfec02"};function dN(e){switch(e){case oh.SN_MAIN:return dO.MAINNET;case oh.SN_SEPOLIA:return dO.TESTNET_SEPOLIA;default:throw Error("Starknet.id profile picture verifier contract is not yet deployed on this network")}}var dP={MAINNET:"0x0293eb2ba9862f762bd3036586d5755a782bd22e6f5028320f1d0405fd47bff4",TESTNET_SEPOLIA:"0x15ae88ae054caa74090b89025c1595683f12edf7a4ed2ad0274de3e1d4a"};function dD(e){switch(e){case oh.SN_MAIN:return dP.MAINNET;case oh.SN_SEPOLIA:return dP.TESTNET_SEPOLIA;default:throw Error("Starknet.id proof of personhood verifier contract is not yet deployed on this network")}}function dR(e,t,r){return new cs({Static:e,IfEqual:t?ca(t[0],t[1],t[2]):void 0,IfNotEqual:r?ca(r[0],r[1],r[2]):void 0})}function dL(e,t){return new cs({Hardcoded:e,Reference:t?ca(t[0],t[1]):void 0})}function dU(e,t,r){return new cs({Hardcoded:e,Reference:t?ca(t[0],t[1]):void 0,ArrayReference:r?ca(r[0],r[1]):void 0})}function dV(e){return/^(?:[a-z0-9-]{1,48}(?:[a-z0-9-]{1,48}[a-z0-9-])?\.)*[a-z0-9-]{1,48}\.stark$/.test(e)}var dF=class e{async getStarkName(t,r){return e.getStarkName(this,t,r)}async getAddressFromStarkName(t,r){return e.getAddressFromStarkName(this,t,r)}async getStarkProfile(t,r,n,a,i,s,o){return e.getStarkProfile(this,t,r,n,a,i,s,o)}static async getStarkName(e,t,r){let n=await e.getChainId(),a=r??dx(n);try{let r=(await e.callContract({contractAddress:a,entrypoint:"address_to_domain",calldata:cN.compile({address:t,hint:[]})})).map(e=>BigInt(e)).slice(1),n=dE(r);if(!n)throw Error("Starkname not found");return n}catch(e){if(e instanceof Error&&"Starkname not found"===e.message)throw e;throw Error("Could not get stark name")}}static async getAddressFromStarkName(e,t,r){let n=t.endsWith(".stark")?t:`${t}.stark`;if(!dV(n))throw Error("Invalid domain, must be a valid .stark domain");let a=await e.getChainId(),i=r??dx(a);try{let t=n.replace(".stark","").split(".").map(e=>dv(e).toString(10));return(await e.callContract({contractAddress:i,entrypoint:"domain_to_address",calldata:cN.compile({domain:t,hint:[]})}))[0]}catch{throw Error("Could not get address from stark name")}}static async getStarkProfile(e,t,r,n,a,i,s,o){let l=await e.getChainId(),c=r??dx(l),u=n??dA(l),d=a??dB(l),h=i??dN(l),f=s??dD(l),p=o??dI(l);try{let r=[{execution:dR({}),to:dU(c),selector:dU(l_("address_to_domain")),calldata:[dU(t),dU("0")]},{execution:dR({}),to:dL(c),selector:dL(l_("domain_to_id")),calldata:[dU(void 0,void 0,[0,0])]},{execution:dR({}),to:dL(u),selector:dL(l_("get_verifier_data")),calldata:[dU(void 0,[1,0]),dU(lO("twitter")),dU(d),dU("0")]},{execution:dR({}),to:dL(u),selector:dL(l_("get_verifier_data")),calldata:[dU(void 0,[1,0]),dU(lO("github")),dU(d),dU("0")]},{execution:dR({}),to:dL(u),selector:dL(l_("get_verifier_data")),calldata:[dU(void 0,[1,0]),dU(lO("discord")),dU(d),dU("0")]},{execution:dR({}),to:dL(u),selector:dL(l_("get_verifier_data")),calldata:[dU(void 0,[1,0]),dU(lO("proof_of_personhood")),dU(f),dU("0")]},{execution:dR({}),to:dL(u),selector:dL(l_("get_verifier_data")),calldata:[dU(void 0,[1,0]),dU(lO("nft_pp_contract")),dU(h),dU("0")]},{execution:dR({}),to:dL(u),selector:dL(l_("get_extended_verifier_data")),calldata:[dU(void 0,[1,0]),dU(lO("nft_pp_id")),dU("2"),dU(h),dU("0")]},{execution:dR(void 0,void 0,[6,0,0]),to:dL(void 0,[6,0]),selector:dL(l_("tokenURI")),calldata:[dU(void 0,[7,1]),dU(void 0,[7,2])]}],n=await e.callContract({contractAddress:p,entrypoint:"aggregate",calldata:cN.compile({calls:r})});if(Array.isArray(n)){let e=parseInt(n[0],16),t=[],r=1;for(let a=0;a<e;a+=1)if(r<n.length){let e=parseInt(n[r],16);r+=1;let a=n.slice(r,r+e);t.push(a),r+=e}else break;let a=dE(t[0].slice(1).map(e=>BigInt(e))),i="0x0"!==t[2][0]?BigInt(t[2][0]).toString():void 0,s="0x0"!==t[3][0]?BigInt(t[3][0]).toString():void 0,o="0x0"!==t[4][0]?BigInt(t[4][0]).toString():void 0,l="0x1"===t[5][0],c=("0x9"===n[0]?t[8].slice(1).map(e=>lN(e)).join(""):void 0)||`https://starknet.id/api/identicons/${BigInt(t[1][0]).toString()}`;return{name:a,twitter:i,github:s,discord:o,proofOfPersonhood:l,profilePicture:c}}throw Error("Error while calling aggregate function")}catch(e){if(e instanceof Error)throw e;throw Error("Could not get user stark profile data from address")}}},dH=class extends(0,sN.Mixin)(df,dF){},dM=new df({default:!0}),d$=class{pk;constructor(e=an.utils.randomPrivateKey()){this.pk=e instanceof Uint8Array?sG(e):o9(e)}async getPubKey(){return an.getStarkKey(this.pk)}async signMessage(e,t){let r=dd(e,t);return this.signRaw(r)}async signTransaction(e,t){let r,n=uY(e,t.cairoVersion);if(Object.values(sF.ETransactionVersion2).includes(t.version))r=c2({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version});else if(Object.values(sF.ETransactionVersion3).includes(t.version))r=c2({...t,senderAddress:t.walletAddress,compiledCalldata:n,version:t.version,nonceDataAvailabilityMode:uS(t.nonceDataAvailabilityMode),feeDataAvailabilityMode:uS(t.feeDataAvailabilityMode)});else throw Error("unsupported signTransaction version");return this.signRaw(r)}async signDeployAccountTransaction(e){let t,r=cN.compile(e.constructorCalldata);if(Object.values(sF.ETransactionVersion2).includes(e.version))t=c6({...e,salt:e.addressSalt,constructorCalldata:r,version:e.version});else if(Object.values(sF.ETransactionVersion3).includes(e.version))t=c6({...e,salt:e.addressSalt,compiledConstructorCalldata:r,version:e.version,nonceDataAvailabilityMode:uS(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:uS(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeployAccountTransaction version");return this.signRaw(t)}async signDeclareTransaction(e){let t;if(Object.values(sF.ETransactionVersion2).includes(e.version))t=c5({...e,version:e.version});else if(Object.values(sF.ETransactionVersion3).includes(e.version))t=c5({...e,version:e.version,nonceDataAvailabilityMode:uS(e.nonceDataAvailabilityMode),feeDataAvailabilityMode:uS(e.feeDataAvailabilityMode)});else throw Error("unsupported signDeclareTransaction version");return this.signRaw(t)}async signRaw(e){return an.sign(e,this.pk)}},dj={};function dz(e){return new lF(e).toBigInt()}function dW(e){return lF.is(e)}function dG(e){return new lF(e).toUint256HexString()}function dq(e){return"event"===e.type}function dK(e){return l9(e)?function(e){let t=e.filter(e=>dq(e)&&"struct"===e.kind),r=e.filter(e=>dq(e)&&"enum"===e.kind);return t.reduce((e,t)=>{let n=[],{name:a}=t,i=!1,s=e=>e.type===a;for(;;){let e=r.find(e=>e.variants.some(s));if(o0(e))break;let t=e.variants.find(s);n.unshift(t.name),"flat"===t.kind&&(i=!0),a=e.name}if(0===n.length)throw Error("inconsistency in ABI events definition.");i&&(n=[n[n.length-1]]);let o=n.pop(),l={[sK(an.keccak(sj(o)).toString(16))]:t};for(;n.length>0;)l={[sK(an.keccak(sj(n.pop())).toString(16))]:l};return function e(t,r){let n={...t};return o3(t)&&o3(r)&&Object.keys(r).forEach(a=>{o3(r[a])&&a in t?n[a]=e(t[a],r[a]):Object.assign(n,{[a]:r[a]})}),n}(e,l={...l})},{})}(e):e.filter(e=>"event"===e.type).reduce((e,t)=>{let r=t.name,n={...t};return n.name=r,{...e,[sK(an.keccak(sj(r)).toString(16))]:n}},{})}function dY(e,t,r,n){return e.flat().reduce((e,a)=>{let i=JSON.parse(JSON.stringify(a)),s=t[i.keys.shift()??0];if(!s)return e;for(;!s.name;){let e=i.keys.shift();oX(!!e,'Not enough data in "keys" property of this event.'),s=s[e]}let o={};o[s.name]={};let l=i.keys[Symbol.iterator](),c=i.data[Symbol.iterator](),u=s.members?.filter(e=>"key"===e.kind)||s.keys,d=s.members?.filter(e=>"data"===e.kind)||s.data;return u.forEach(e=>{o[s.name][e.name]=cS(l,e,r,n,o[s.name])}),d.forEach(e=>{o[s.name][e.name]=cS(c,e,r,n,o[s.name])}),"block_hash"in i&&(o.block_hash=i.block_hash),"block_number"in i&&(o.block_number=i.block_number),"transaction_hash"in i&&(o.transaction_hash=i.transaction_hash),e.push(o),e},[])}function dZ(e){if(!e.events?.length)throw Error("UDC emitted event is empty");let t=e.events.find(e=>la(e.from_address)===la(oa.ADDRESS))||{data:[]};return{transaction_hash:e.transaction_hash,contract_address:t.data[0],address:t.data[0],deployer:t.data[1],unique:t.data[2],classHash:t.data[3],calldata_len:t.data[4],calldata:t.data.slice(5,5+parseInt(t.data[4],16)),salt:t.data[t.data.length-1]}}function dX(e){return"calldata_len"in e?{To:e.to,Selector:e.selector,Calldata:e.calldata}:e}function dJ(e){let t=e.calldata??[],r=Array.isArray(t)?t:cN.compile(t);return{to:e.contractAddress,selector:l_(e.entrypoint),calldata:r}}function dQ(e,t){let r=dJ(e);return"1"===t?{...r,calldata_len:r.calldata.length,calldata:r.calldata}:{To:r.to,Selector:r.selector,Calldata:r.calldata}}function d0(e,t){return{name:"Account.execute_from_outside",version:t,chainId:e,..."2"===t?{revision:"1"}:{}}}function d1(e,t,r,n,a){return"1"===a?{types:oj,primaryType:"OutsideExecution",domain:d0(e,a),message:{...t,nonce:r,calls_len:n.length,calls:n.map(e=>dQ(e,a))}}:{types:oz,primaryType:"OutsideExecution",domain:d0(e,a),message:{Caller:t.caller,Nonce:r,"Execute After":t.execute_after,"Execute Before":t.execute_before,Calls:n.map(e=>dQ(e,a))}}}function d2(e){let t=e.outsideExecution,r=uy(e.signature);return cN.compile({outside_execution:t,signature:r})}function d5(e){return(Array.isArray(e)?e:[e]).map(e=>{let t;if(e.version===oW.V1)t="execute_from_outside";else if(e.version===oW.V2)t="execute_from_outside_v2";else throw Error("Unsupported OutsideExecution version");return{contractAddress:o9(e.signerAddress),entrypoint:t,calldata:d2(e)}})}async function d6(e,t,r){let n={contractAddress:o9(t),entrypoint:"supports_interface",calldata:[o9(r)]};try{let t=await e.callContract(n);return 0n!==BigInt(t[0])}catch{return!1}}sU(dj,{bnToUint256:()=>dG,isUint256:()=>dW,uint256ToBN:()=>dz}),sU({},{getAbiEvents:()=>dK,isAbiEvent:()=>dq,parseEvents:()=>dY,parseUDCEvent:()=>dZ}),sU({},{buildExecuteFromOutsideCall:()=>d5,buildExecuteFromOutsideCallData:()=>d2,getOutsideCall:()=>dJ,getTypedData:()=>d1,toOutsideCallV2:()=>dX}),sU({},{supportsInterface:()=>d6}),sU({},{assertCallsAreStrictlyEqual:()=>d8,assertPaymasterTransactionSafety:()=>d4,getDefaultPaymasterNodeUrl:()=>d3});var d3=(e,t=!1)=>{t||oE.info("Using default public node url, please provide nodeUrl in provider options!");let r=oy[e??od.SN_SEPOLIA],n=Math.floor(Math.random()*r.length);return r[n]};function d8(e,t){let r="Provided calls are not strictly equal to the returned calls";oX(t.length-1===e.length,`${r}: Expected ${e.length+1} calls, got ${t.length}`);for(let n=0;n<e.length;n+=1){let a=e[n],i=dX(t[n]),s=e=>o4(e).toString(16).toLowerCase();oX(s(a.contractAddress)===s(i.To),`${r}: Contract address mismatch at call ${n}. Expected: ${a.contractAddress}, Got: ${i.To}`),oX(l_(a.entrypoint)===i.Selector,`${r}: Entrypoint mismatch at call ${n}. Expected: ${a.entrypoint}, Got: ${i.Selector}`);let o=cN.toCalldata(a.calldata),l=cN.toCalldata(i.Calldata);oX(o.length===l.length,`${r}: Calldata length mismatch at call ${n}. Expected length: ${o.length}, Got length: ${l.length}`);for(let e=0;e<o.length;e+=1)oX(BigInt(o[e])===BigInt(l[e]),`${r}: Calldata value mismatch at call ${n}, parameter ${e}. Expected: ${o[e]}, Got: ${l[e]}`)}}var d4=(e,t,r,n)=>{if("sponsored"!==r.feeMode.mode&&("invoke"===e.type||"deploy_and_invoke"===e.type)){let a="calls"in e.typed_data.message?e.typed_data.message.calls:e.typed_data.message.Calls;d8(t,a),((e,t)=>{oX(BigInt(dX(e[e.length-1]).To)===BigInt(t),"Gas token address is not equal to the provided gas token")})(a,r.feeMode.gasToken),n&&(oX(e.fee.suggested_max_fee_in_gas_token<=n,"Gas token price is too high"),((e,t)=>{let r=dX(e[e.length-1]);oX(BigInt(cN.toCalldata(r.Calldata)[1])===BigInt(t),"Gas token value is not equal to the provided gas fees")})(a,e.fee.suggested_max_fee_in_gas_token))}},d7=e=>"sponsored"===e.mode?{mode:"sponsored"}:{mode:"default",gas_token:e.gasToken},d9=e=>e?{execute_after:e.executeAfter||1,execute_before:e.executeBefore}:void 0,he=e=>({version:e.version,feeMode:(e=>"sponsored"===e.mode?{mode:"sponsored"}:{mode:"default",gasToken:e.gas_token})(e.fee_mode),timeBounds:(e=>e?{executeAfter:e.execute_after,executeBefore:e.execute_before}:void 0)(e.time_bounds)}),ht={headers:{"Content-Type":"application/json"}},hr=class e{nodeUrl;headers;baseFetch;requestId;constructor(t){if(t instanceof e){this.nodeUrl=t.nodeUrl,this.headers={...ht.headers,...t.headers},this.baseFetch=t.baseFetch,this.requestId=t.requestId;return}if(t&&"nodeUrl"in t&&"headers"in t&&"baseFetch"in t){this.nodeUrl=t.nodeUrl??d3(void 0),this.headers={...ht.headers,...t.headers},this.baseFetch=t.baseFetch??uU,this.requestId=0;return}let{nodeUrl:r,headers:n,baseFetch:a}=t||{};r&&Object.values(od).includes(r)?this.nodeUrl=d3(r,t?.default):r?this.nodeUrl=r:this.nodeUrl=d3(void 0,t?.default),this.baseFetch=a??uU,this.headers={...ht.headers,...n},this.requestId=0}fetch(e,t,r=0){let n={id:r,jsonrpc:"2.0",method:e,...t&&{params:t}};return this.baseFetch(this.nodeUrl,{method:"POST",body:oY(n),headers:this.headers})}errorHandler(e,t,r,n){if(r)throw new uD(r,e,t);if(n instanceof uP)throw n;if(n)throw Error(n.message)}async fetchEndpoint(e,t){try{this.requestId+=1;let r=await this.fetch(e,t,this.requestId),{error:n,result:a}=await r.json();return this.errorHandler(e,t,n),a}catch(r){throw this.errorHandler(e,t,r?.response?.data,r),r}}async isAvailable(){return this.fetchEndpoint("paymaster_isAvailable")}async buildTransaction(e,t){let r;switch(e.type){case"invoke":case"deploy_and_invoke":r={...e,invoke:{user_address:e.invoke.userAddress,calls:e.invoke.calls.map(e=>({to:e.contractAddress,selector:l_(e.entrypoint),calldata:cN.toHex(e.calldata)}))}};break;default:r=e}let n={version:t.version,fee_mode:d7(t.feeMode),time_bounds:d9(t.timeBounds)},a=await this.fetchEndpoint("paymaster_buildTransaction",{transaction:r,parameters:n}),i={gas_token_price_in_strk:BigInt(a.fee.gas_token_price_in_strk),estimated_fee_in_strk:BigInt(a.fee.estimated_fee_in_strk),estimated_fee_in_gas_token:BigInt(a.fee.estimated_fee_in_gas_token),suggested_max_fee_in_strk:BigInt(a.fee.suggested_max_fee_in_strk),suggested_max_fee_in_gas_token:BigInt(a.fee.suggested_max_fee_in_gas_token)};switch(a.type){case"invoke":return{type:"invoke",typed_data:a.typed_data,parameters:he(a.parameters),fee:i};case"deploy_and_invoke":return{type:"deploy_and_invoke",deployment:a.deployment,typed_data:a.typed_data,parameters:he(a.parameters),fee:i};default:return{type:"deploy",deployment:a.deployment,parameters:he(a.parameters),fee:i}}}async executeTransaction(e,t){let r;switch(e.type){case"invoke":case"deploy_and_invoke":r={...e,invoke:{user_address:e.invoke.userAddress,typed_data:e.invoke.typedData,signature:u_(e.invoke.signature)}};break;default:r=e}let n={version:t.version,fee_mode:d7(t.feeMode),time_bounds:d9(t.timeBounds)};return this.fetchEndpoint("paymaster_executeTransaction",{transaction:r,parameters:n})}async getSupportedTokens(){return this.fetchEndpoint("paymaster_getSupportedTokens").then(e=>e.map(e=>({token_address:e.token_address,decimals:e.decimals,priceInStrk:BigInt(e.price_in_strk)})))}},hn=new hr({default:!0}),ha=class extends dH{signer;address;cairoVersion;transactionVersion;paymaster;constructor(e,t,r,n,a=o_.get("transactionVersion"),i){super(e),this.address=t.toLowerCase(),this.signer=o6(r)||r instanceof Uint8Array?new d$(r):r,n&&(this.cairoVersion=n.toString()),this.transactionVersion=a,this.paymaster=i?new hr(i):hn,oE.debug("Account setup",{transactionVersion:this.transactionVersion,cairoVersion:this.cairoVersion,channel:this.channel.id})}static async create(){throw new uP("Not supported")}getPreferredVersion(e,t){return this.transactionVersion===oC.V3?t:this.transactionVersion===oC.V2?e:oC.V3}async getNonce(e){return super.getNonceForAddress(this.address,e)}async getNonceSafe(e){try{return o4(e??await this.getNonce())}catch(e){return 0n}}async getCairoVersion(e){if(!this.cairoVersion){let{cairo:t}=e?await super.getContractVersion(void 0,e):await super.getContractVersion(this.address);this.cairoVersion=t}return this.cairoVersion}async estimateFee(e,t={}){return this.estimateInvokeFee(e,t)}async estimateInvokeFee(e,t={}){let{nonce:r,blockIdentifier:n,version:a,skipValidate:i=!0}=t,s=Array.isArray(e)?e:[e],o=o4(r??await this.getNonce()),l=ux(this.getPreferredVersion(oC.F1,oC.F3),uT(a)),c=await this.getChainId(),u={...uA(t,await this.channel.setUpSpecVersion()),walletAddress:this.address,nonce:o,maxFee:s5,version:l,chainId:c,cairoVersion:await this.getCairoVersion(),skipValidate:i},d=await this.buildInvocation(s,u);return super.getInvokeEstimateFee({...d},{...uA(t,await this.channel.setUpSpecVersion()),version:l,nonce:o},n,t.skipValidate)}async estimateDeclareFee(e,t={}){let{blockIdentifier:r,nonce:n,version:a,skipValidate:i=!0}=t,s=o4(n??await this.getNonce()),o=ux(uC(e.contract)?this.getPreferredVersion(oC.F2,oC.F3):oC.F1,uT(a)),l=await this.getChainId(),c=await this.buildDeclarePayload(e,{...uA(t,await this.channel.setUpSpecVersion()),nonce:s,chainId:l,version:o,walletAddress:this.address,maxFee:s5,cairoVersion:void 0,skipValidate:i});return super.getDeclareEstimateFee(c,{...uA(t,await this.channel.setUpSpecVersion()),version:o,nonce:s},r,t.skipValidate)}async estimateAccountDeployFee({classHash:e,addressSalt:t=0,constructorCalldata:r=[],contractAddress:n},a={}){let{blockIdentifier:i,version:s,skipValidate:o=!0}=a,l=ux(this.getPreferredVersion(oC.F1,oC.F3),uT(s)),c=await this.getChainId(),u=await this.buildAccountDeployPayload({classHash:e,addressSalt:t,constructorCalldata:r,contractAddress:n},{...uA(a,await this.channel.setUpSpecVersion()),nonce:s5,chainId:c,version:l,walletAddress:this.address,maxFee:s5,cairoVersion:void 0,skipValidate:o});return super.getDeployAccountEstimateFee({...u},{...uA(a,await this.channel.setUpSpecVersion()),version:l,nonce:s5},i,a.skipValidate)}async estimateDeployFee(e,t={}){let r=this.buildUDCContractPayload(e);return this.estimateInvokeFee(r,t)}async estimateFeeBulk(e,t={}){if(!e.length)throw TypeError("Invocations should be non-empty array");let{nonce:r,blockIdentifier:n,version:a,skipValidate:i}=t,s=await this.accountInvocationsFactory(e,{...uA(t,await this.channel.setUpSpecVersion()),versions:[oC.F1,ux(this.getPreferredVersion(oC.F2,oC.F3),a)],nonce:r,blockIdentifier:n,skipValidate:i});return super.getEstimateFeeBulk(s,{blockIdentifier:n,skipValidate:i})}async simulateTransaction(e,t={}){if(!e.length)throw TypeError("Invocations should be non-empty array");let{nonce:r,blockIdentifier:n,skipValidate:a=!0,skipExecute:i,version:s}=t,o=await this.accountInvocationsFactory(e,{...uA(t,await this.channel.setUpSpecVersion()),versions:[oC.V1,ux(this.getPreferredVersion(oC.V2,oC.V3),s)],nonce:r,blockIdentifier:n,skipValidate:a});return super.getSimulateTransaction(o,{blockIdentifier:n,skipValidate:a,skipExecute:i})}async execute(e,t={}){let r=Array.isArray(e)?e:[e],n=o4(t.nonce??await this.getNonce()),a=ux(this.getPreferredVersion(oC.V1,oC.V3),t.version),i=await this.getUniversalSuggestedFee(a,{type:ox.INVOKE,payload:e},{...t,version:a}),s=await this.getChainId(),o={...uA(t,await this.channel.setUpSpecVersion()),resourceBounds:i.resourceBounds,walletAddress:this.address,nonce:n,maxFee:i.maxFee,version:a,chainId:s,cairoVersion:await this.getCairoVersion()},l=await this.signer.signTransaction(r,o),c=uY(r,await this.getCairoVersion());return this.invokeFunction({contractAddress:this.address,calldata:c,signature:l},{...uA(t,await this.channel.setUpSpecVersion()),resourceBounds:i.resourceBounds,nonce:n,maxFee:i.maxFee,version:a})}async buildPaymasterTransaction(e,t){let r;if(!t.deploymentData&&await this.getSnip9Version()===oW.UNSUPPORTED)throw Error("Account is not compatible with SNIP-9");let n={version:"0x1",feeMode:t.feeMode,timeBounds:t.timeBounds};return r=t.deploymentData?e.length>0?{type:"deploy_and_invoke",invoke:{userAddress:this.address,calls:e},deployment:t.deploymentData}:{type:"deploy",deployment:t.deploymentData}:{type:"invoke",invoke:{userAddress:this.address,calls:e}},this.paymaster.buildTransaction(r,n)}async estimatePaymasterTransactionFee(e,t){return(await this.buildPaymasterTransaction(e,t)).fee}async preparePaymasterTransaction(e){let t;switch(e.type){case"deploy_and_invoke":{let r=await this.signMessage(e.typed_data);t={type:"deploy_and_invoke",invoke:{userAddress:this.address,typedData:e.typed_data,signature:u_(r)},deployment:e.deployment};break}case"invoke":{let r=await this.signMessage(e.typed_data);t={type:"invoke",invoke:{userAddress:this.address,typedData:e.typed_data,signature:u_(r)}};break}case"deploy":t={type:"deploy",deployment:e.deployment};break;default:throw Error("Invalid transaction type")}return t}async executePaymasterTransaction(e,t,r){let n=await this.buildPaymasterTransaction(e,t);d4(n,e,t,r);let a=await this.preparePaymasterTransaction(n);return this.paymaster.executeTransaction(a,n.parameters).then(e=>({transaction_hash:e.transaction_hash}))}async declareIfNot(e,t={}){let r=uB(e);try{await this.getClassByHash(r.classHash)}catch(r){return this.declare(e,t)}return{transaction_hash:"",class_hash:r.classHash}}async declare(e,t={}){let r=uB(e),{nonce:n,version:a}=t,i=ux(uC(e.contract)?this.getPreferredVersion(oC.V2,oC.V3):oC.V1,a),s=await this.getUniversalSuggestedFee(i,{type:ox.DECLARE,payload:r},{...t,version:i}),o={...uA(t,await this.channel.setUpSpecVersion()),resourceBounds:s.resourceBounds,maxFee:s.maxFee,nonce:o4(n??await this.getNonce()),version:i,chainId:await this.getChainId(),walletAddress:this.address,cairoVersion:void 0},l=await this.buildDeclarePayload(r,o);return this.declareContract(l,o)}async deploy(e,t={}){let{calls:r,addresses:n}=uZ(e,this.address);return{...await this.execute(r,t),contract_address:n}}async deployContract(e,t={}){let r=await this.deploy(e,t);return dZ(await this.waitForTransaction(r.transaction_hash))}async declareAndDeploy(e,t={}){let{constructorCalldata:r,salt:n,unique:a}=e,i=await this.declareIfNot(e,t);if(""!==i.transaction_hash){let e=await this.waitForTransaction(i.transaction_hash);i={...i,...e}}let s=await this.deployContract({classHash:i.class_hash,salt:n,unique:a,constructorCalldata:r},t);return{declare:{...i},deploy:s}}deploySelf=this.deployAccount;async deployAccount({classHash:e,constructorCalldata:t=[],addressSalt:r=0,contractAddress:n},a={}){let i=ux(this.getPreferredVersion(oC.V1,oC.V3),a.version),s=await this.getChainId(),o=cN.compile(t),l=n??ue(r,e,o,0),c=await this.getUniversalSuggestedFee(i,{type:ox.DEPLOY_ACCOUNT,payload:{classHash:e,constructorCalldata:o,addressSalt:r,contractAddress:l}},a),u=await this.signer.signDeployAccountTransaction({...uA(a,await this.channel.setUpSpecVersion()),classHash:e,constructorCalldata:o,contractAddress:l,addressSalt:r,chainId:s,resourceBounds:c.resourceBounds,maxFee:c.maxFee,version:i,nonce:s5});return this.deployAccountContract({classHash:e,addressSalt:r,constructorCalldata:t,signature:u},{...uA(a,await this.channel.setUpSpecVersion()),nonce:s5,resourceBounds:c.resourceBounds,maxFee:c.maxFee,version:i})}async signMessage(e){return this.signer.signMessage(e,this.address)}async hashMessage(e){return dd(e,this.address)}async getSnip9Version(){return await d6(this,this.address,oo)?oW.V2:await d6(this,this.address,os)?oW.V1:oW.UNSUPPORTED}async isValidSnip9Nonce(e){try{let t={contractAddress:this.address,entrypoint:"is_valid_outside_execution_nonce",calldata:[o9(e)]},r=await this.callContract(t);return 0n!==BigInt(r[0])}catch(e){throw Error(`Failed to check if nonce is valid: ${e}`)}}async getSnip9Nonce(){let e=um();return await this.isValidSnip9Nonce(e)?e:this.getSnip9Nonce()}async getOutsideTransaction(e,t,r,n){if(!o8(e.caller)&&"ANY_CALLER"!==e.caller)throw Error(`The caller ${e.caller} is not valid.`);let a=o8(e.caller)?e.caller:oi,i=Array.isArray(t)?t:[t],s=r??await this.getSnip9Version();if(!s)throw Error("This account is not handling outside transactions.");let o=n?o9(n):await this.getSnip9Nonce(),l=d1(await this.getChainId(),{caller:a,execute_after:e.execute_after,execute_before:e.execute_before},o,i,s),c=await this.signMessage(l);return{outsideExecution:{caller:a,nonce:o,execute_after:e.execute_after,execute_before:e.execute_before,calls:i.map(dJ)},signature:c,signerAddress:this.address,version:s}}async executeFromOutside(e,t){let r=d5(e);return this.execute(r,t)}async getUniversalSuggestedFee(e,{type:t,payload:r},n){let a=0,i=uE(s5,void 0,await this.channel.setUpSpecVersion());return e===oC.V3?i=n.resourceBounds??(await this.getSuggestedFee({type:t,payload:r},n)).resourceBounds:a=n.maxFee??(await this.getSuggestedFee({type:t,payload:r},n)).suggestedMaxFee,{maxFee:a,resourceBounds:i}}async getSuggestedFee({type:e,payload:t},r){switch(e){case ox.INVOKE:return this.estimateInvokeFee(t,r);case ox.DECLARE:return this.estimateDeclareFee(t,r);case ox.DEPLOY_ACCOUNT:return this.estimateAccountDeployFee(t,r);case ox.DEPLOY:return this.estimateDeployFee(t,r);default:return uv(await this.channel.setUpSpecVersion())}}async buildInvocation(e,t){let r=uY(e,await this.getCairoVersion()),n=t.skipValidate?[]:await this.signer.signTransaction(e,t);return{...uA(t,await this.channel.setUpSpecVersion()),contractAddress:this.address,calldata:r,signature:n}}async buildDeclarePayload(e,t){let{classHash:r,contract:n,compiledClassHash:a}=uB(e),i=uH(n);if(o0(a)&&(t.version===oO.F3||t.version===oO.V3))throw Error("V3 Transaction work with Cairo1 Contracts and require compiledClassHash");let s=t.skipValidate?[]:await this.signer.signDeclareTransaction({...t,...uA(t,await this.channel.setUpSpecVersion()),classHash:r,compiledClassHash:a,senderAddress:t.walletAddress});return{senderAddress:t.walletAddress,signature:s,contract:i,compiledClassHash:a}}async buildAccountDeployPayload({classHash:e,addressSalt:t=0,constructorCalldata:r=[],contractAddress:n},a){let i=cN.compile(r),s=n??ue(t,e,i,0),o=a.skipValidate?[]:await this.signer.signDeployAccountTransaction({...a,...uA(a,await this.channel.setUpSpecVersion()),classHash:e,contractAddress:s,addressSalt:t,constructorCalldata:i});return{...uA(a,await this.channel.setUpSpecVersion()),classHash:e,addressSalt:t,constructorCalldata:i,signature:o}}buildUDCContractPayload(e){return[].concat(e).map(e=>{let{classHash:t,salt:r="0",unique:n=!0,constructorCalldata:a=[]}=e,i=cN.compile(a);return{contractAddress:oa.ADDRESS,entrypoint:oa.ENTRYPOINT,calldata:[t,r,lh(n),i.length,...i]}})}async accountInvocationsFactory(e,t){let{nonce:r,blockIdentifier:n,skipValidate:a=!0}=t,i=await this.getNonceSafe(r),s=await this.getChainId(),o=t.versions.map(e=>ux(e)),l="payload"in e[0]?e[0].payload:e[0],c=e[0].type===ox.DEPLOY_ACCOUNT?await this.getCairoVersion(l.classHash):await this.getCairoVersion();return Promise.all([].concat(e).map(async(e,r)=>{let l="payload"in e?e.payload:e,u={...uA(t,await this.channel.setUpSpecVersion()),walletAddress:this.address,nonce:o4(Number(i)+r),maxFee:s5,chainId:s,cairoVersion:c,version:"",skipValidate:a},d={type:e.type,nonce:o4(Number(i)+r),blockIdentifier:n,version:""};if(e.type===ox.INVOKE){let e=uk(o[1]);u.version=e,d.version=e;let t=await this.buildInvocation([].concat(l),u);return{...d,...t,...u}}if(e.type===ox.DEPLOY){let e=uk(o[1]);u.version=e,d.version=e;let t=this.buildUDCContractPayload(l),r=await this.buildInvocation(t,u);return{...d,...r,...u,type:ox.INVOKE}}if(e.type===ox.DECLARE){let e=uC(l.contract)?o[1]:o[0];u.version=e,d.version=e;let t=await this.buildDeclarePayload(l,u);return{...d,...t,...u}}if(e.type===ox.DEPLOY_ACCOUNT){let e=uk(o[1]);u.version=e,d.version=e;let t=await this.buildAccountDeployPayload(l,u);return{...d,...t,...u}}throw Error(`accountInvocationsFactory: unsupported transaction type: ${e}`)}))}async getStarkName(e=this.address,t){return super.getStarkName(e,t)}};function hi(e,t=!1){return e.request({type:"wallet_requestAccounts",params:{silent_mode:t}})}function hs(e){return e.request({type:"wallet_getPermissions"})}function ho(e,t){return e.request({type:"wallet_watchAsset",params:t})}function hl(e,t){return e.request({type:"wallet_addStarknetChain",params:t})}function hc(e,t){return e.request({type:"wallet_switchStarknetChain",params:{chainId:t}})}function hu(e){return e.request({type:"wallet_requestChainId"})}function hd(e){return e.request({type:"wallet_deploymentData"})}function hh(e,t){return e.request({type:"wallet_addInvokeTransaction",params:t})}function hf(e,t){return e.request({type:"wallet_addDeclareTransaction",params:t})}function hp(e,t){return e.request({type:"wallet_signTypedData",params:t})}function hg(e){return e.request({type:"wallet_supportedSpecs"})}function hm(e,t){e.on("accountsChanged",t)}function hy(e,t){e.on("networkChanged",t)}function hb(e,t){return async function(...r){let n={...e.contractOptions};return e.contractOptions=void 0,e.call(t.name,r,{parseRequest:!0,parseResponse:!0,...n})}}function h_(e,t){return"view"===t.stateMutability||"view"===t.state_mutability?hb(e,t):async function(...r){let n={...e.contractOptions};return e.contractOptions=void 0,e.invoke(t.name,r,{parseRequest:!0,...n})}}function hw(e,t){return Array.isArray(e)&&"__compiled__"in e?e:Array.isArray(e)&&Array.isArray(e[0])&&"__compiled__"in e[0]?e[0]:t()}sU({},{addDeclareTransaction:()=>hf,addInvokeTransaction:()=>hh,addStarknetChain:()=>hl,deploymentData:()=>hd,getPermissions:()=>hs,onAccountChange:()=>hm,onNetworkChanged:()=>hy,requestAccounts:()=>hi,requestChainId:()=>hu,signMessage:()=>hp,supportedSpecs:()=>hg,switchStarknetChain:()=>hc,watchAsset:()=>ho});var hE=class{abi;address;providerOrAccount;deployTransactionHash;structs;events;functions;callStatic;populateTransaction;estimateFee;callData;contractOptions;constructor(e,t,r=dM){this.address=t&&t.toLowerCase(),this.providerOrAccount=r,this.callData=new cN(e),this.structs=cN.getAbiStruct(e),this.events=dK(e);let n=cp(e);this.abi=n.getLegacyFormat();let a={enumerable:!0,value:{},writable:!1};Object.defineProperties(this,{functions:{enumerable:!0,value:{},writable:!1},callStatic:{enumerable:!0,value:{},writable:!1},populateTransaction:{enumerable:!0,value:{},writable:!1},estimateFee:{enumerable:!0,value:{},writable:!1}}),this.abi.forEach(e=>{var t,r;if("function"!==e.type)return;let n=e.name;this[n]||Object.defineProperty(this,n,{...a,value:h_(this,e)}),this.functions[n]||Object.defineProperty(this.functions,n,{...a,value:h_(this,e)}),this.callStatic[n]||Object.defineProperty(this.callStatic,n,{...a,value:hb(this,e)}),this.populateTransaction[n]||Object.defineProperty(this.populateTransaction,n,{...a,value:(t=this,function(...r){return t.populate(e.name,r)})}),this.estimateFee[n]||Object.defineProperty(this.estimateFee,n,{...a,value:(r=this,function(...t){return r.estimate(e.name,t)})})})}withOptions(e){return this.contractOptions=e,this}attach(e){this.address=e}connect(e){this.providerOrAccount=e}async deployed(){return this.deployTransactionHash&&(await this.providerOrAccount.waitForTransaction(this.deployTransactionHash),this.deployTransactionHash=void 0),this}async call(e,t=[],{parseRequest:r=!0,parseResponse:n=!0,formatResponse:a,blockIdentifier:i}={}){oX(null!==this.address,"contract is not connected to an address");let s=hw(t,()=>r?(this.callData.validate(oV.CALL,e,t),this.callData.compile(e,t)):(oE.warn("Call skipped parsing but provided rawArgs, possible malfunction request"),t));return this.providerOrAccount.callContract({contractAddress:this.address,calldata:s,entrypoint:e},i).then(t=>n?a?this.callData.format(e,t,a):this.callData.parse(e,t):t)}invoke(e,t=[],{parseRequest:r=!0,signature:n,...a}={}){oX(null!==this.address,"contract is not connected to an address");let i=hw(t,()=>r?(this.callData.validate(oV.INVOKE,e,t),this.callData.compile(e,t)):(oE.warn("Invoke skipped parsing but provided rawArgs, possible malfunction request"),t)),s={contractAddress:this.address,calldata:i,entrypoint:e};if("execute"in this.providerOrAccount)return this.providerOrAccount.execute(s,{...a});if(!a.nonce)throw Error("Nonce is required when invoking a function without an account");return oE.warn(`Invoking ${e} without an account. This will not work on a public node.`),this.providerOrAccount.invokeFunction({...s,signature:n},{...a,nonce:a.nonce})}async estimate(e,t=[]){oX(null!==this.address,"contract is not connected to an address"),hw(t,()=>!1)||this.callData.validate(oV.INVOKE,e,t);let r=this.populate(e,t);if("estimateInvokeFee"in this.providerOrAccount)return this.providerOrAccount.estimateInvokeFee(r);throw Error("Contract must be connected to the account contract to estimate")}populate(e,t=[]){let r=hw(t,()=>this.callData.compile(e,t));return{contractAddress:this.address,entrypoint:e,calldata:r}}parseEvents(e){let t;return e.match({success:e=>{t=dY(e.events?.map(t=>({block_hash:e.block_hash,block_number:e.block_number,transaction_hash:e.transaction_hash,...t})).filter(e=>la(e.from_address)===la(this.address),[])||[],this.events,this.structs,cN.getAbiEnum(this.abi))},_:()=>{throw Error("This transaction was not successful.")}}),t}isCairo1(){return lR.isCairo1Abi(this.abi)}async getVersion(){return this.providerOrAccount.getContractVersion(this.address)}typedv2(e){return this}},hv=e.i(849707),hS=e.i(873525),hx=e.i(919822);let hT=null,hA=null,hk=null;function hI(){if(hA)return hA;if(!hx.ENV.SHARED_SWAP_ACCOUNT_PRIVATE_KEY)return null;let e=(hx.ENV.SHARED_SWAP_ACCOUNT_ADDRESS||hS.SHARED_SWAP_ACCOUNT_ADDRESS).toLowerCase(),t=new dH({nodeUrl:(0,hx.getStarknetRpc)()});hk=t;try{let r=hx.ENV.SHARED_SWAP_ACCOUNT_PRIVATE_KEY.startsWith("0x")?hx.ENV.SHARED_SWAP_ACCOUNT_PRIVATE_KEY:"0x"+hx.ENV.SHARED_SWAP_ACCOUNT_PRIVATE_KEY;/^0x[0-9a-fA-F]{64}$/.test(r)||console.warn("Shared swap account private key format unexpected");try{let e=cD.starkCurve.getStarkKey(r);console.log(" Shared swap account loaded (pubkey prefix):",e.slice(0,10)+"...")}catch(e){console.warn("Could not derive public key for shared swap account:",e)}return hT=new ha(t,e,r),hA=new hv.StarknetSigner(hT)}catch(e){return console.error("Failed to instantiate shared swap account:",e),null}}function hC(){return hk}function hB(){return hA||hI(),hT}async function hO(){try{let e=hI(),t=hB(),r=hk;if(!e||!t||!r)return{ok:!1,reason:"Shared swap signer not configured (missing env or provider)"};try{let e=await t.getNonce();return console.log(" Shared swap account validation OK",{address:t.address,nonce:e?.toString?.()||String(e)}),{ok:!0,address:t.address}}catch(e){return console.warn(" Shared swap account nonce check failed",{address:t.address,error:e instanceof Error?e.message:String(e)}),{ok:!1,reason:"Account nonce fetch failed (address may be wrong or not deployed)",address:t.address}}}catch(e){return{ok:!1,reason:e instanceof Error?e.message:String(e)}}}function hN(){return hA||hI(),hT?.address||null}async function hP(e,t){let r=hB();if(!r)throw Error("Shared swap account not configured");let n={contractAddress:hS.PRIVACY_MIXER.STRK_TOKEN,entrypoint:"transfer",calldata:cN.compile([e,lR.uint256(t)])},a=await r.execute([n]),i=a.transaction_hash||a.hash||"unknown_tx";return console.log(" Shared STRK forward transfer submitted:",{to:e,amountWei:t.toString(),txHash:i}),i}}];

//# sourceMappingURL=_850da186._.js.map