{"version":3,"sources":["../src/constants.ts","../src/crypto.ts","../src/types.ts","../src/privacy/mixer.ts","../src/swaps/swapper.ts","../src/cashu/wallet.ts","../src/core.ts"],"names":["uuidv4","CashuWalletLib","RpcProvider"],"mappings":"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","file":"index.mjs","sourcesContent":["/**\n * SLPM SDK Constants\n */\n\n// Default contract addresses (mainnet)\nexport const MAINNET_CONTRACTS = {\n  MIXER: '0x05effdcfda86066c72c108e174c55a4f8d1249ba69f80e975d7fc814199a376b',\n  VERIFIER: '', // Set after deployment\n  STRK_TOKEN: '0x04718f5a0fc34cc1af16a1cdee98ffb20c31f5cd61d6ab07201858f4287c938d',\n} as const;\n\n// Testnet (Sepolia) contract addresses\nexport const SEPOLIA_CONTRACTS = {\n  MIXER: '0x05effdcfda86066c72c108e174c55a4f8d1249ba69f80e975d7fc814199a376b',\n  VERIFIER: '',\n  STRK_TOKEN: '0x04718f5a0fc34cc1af16a1cdee98ffb20c31f5cd61d6ab07201858f4287c938d',\n} as const;\n\n// RPC endpoints\nexport const RPC_URLS = {\n  mainnet: 'https://starknet-mainnet.public.blastapi.io',\n  sepolia: 'https://starknet-sepolia.public.blastapi.io',\n} as const;\n\n// Default Cashu mints\nexport const CASHU_MINTS = {\n  mainnet: 'https://mint.minibits.cash/Bitcoin',\n  testnet: 'https://testnut.cashu.space',\n} as const;\n\n// Mixer configuration\nexport const MIXER_CONFIG = {\n  MIN_DEPOSIT: BigInt('1000000000000000000'), // 1 STRK\n  MAX_DEPOSIT: BigInt('1000000000000000000000'), // 1000 STRK\n  FEE_RATE: 10n, // 0.1% (10/10000)\n  MERKLE_TREE_HEIGHT: 20,\n} as const;\n\n// Swap configuration\nexport const SWAP_CONFIG = {\n  MIN_AMOUNT_ZEC: 0.001,\n  MAX_AMOUNT_ZEC: 10,\n  MIN_AMOUNT_STRK: 1,\n  MAX_AMOUNT_STRK: 10000,\n  DEFAULT_SLIPPAGE: 1, // 1%\n  QUOTE_EXPIRY_MS: 60000, // 1 minute\n  POLL_INTERVAL_MS: 10000, // 10 seconds\n  MAX_POLL_ATTEMPTS: 60, // 10 minutes\n} as const;\n\n// Supported currencies\nexport const CURRENCIES = {\n  STRK: {\n    symbol: 'STRK',\n    name: 'Starknet Token',\n    decimals: 18,\n    chain: 'starknet',\n  },\n  ZEC: {\n    symbol: 'ZEC',\n    name: 'Zcash',\n    decimals: 8,\n    chain: 'zcash',\n  },\n  BTC: {\n    symbol: 'BTC',\n    name: 'Bitcoin',\n    decimals: 8,\n    chain: 'bitcoin',\n  },\n  BTCLN: {\n    symbol: 'BTCLN',\n    name: 'Bitcoin Lightning',\n    decimals: 8,\n    chain: 'lightning',\n  },\n} as const;\n","/**\n * SLPM SDK Cryptographic Utilities\n */\n\nimport { sha256 } from '@noble/hashes/sha256';\nimport { bytesToHex, hexToBytes, randomBytes } from '@noble/hashes/utils';\n\n/**\n * Generate random hex string\n */\nexport function randomHex(bytes: number = 32): string {\n  return bytesToHex(randomBytes(bytes));\n}\n\n/**\n * Hash data using SHA256\n */\nexport function hash(data: string | Uint8Array): string {\n  const input = typeof data === 'string' ? hexToBytes(data.replace('0x', '')) : data;\n  return '0x' + bytesToHex(sha256(input));\n}\n\n/**\n * Pedersen hash (simplified - in production use actual Pedersen)\n * For compatibility with Starknet/Cairo\n */\nexport function pedersenHash(a: string, b: string): string {\n  const combined = a.replace('0x', '') + b.replace('0x', '');\n  return hash(combined);\n}\n\n/**\n * Poseidon hash (simplified - in production use actual Poseidon)\n * For compatibility with Noir circuits\n */\nexport function poseidonHash(inputs: string[]): string {\n  const combined = inputs.map(x => x.replace('0x', '')).join('');\n  return hash(combined);\n}\n\n/**\n * Generate a commitment for the privacy mixer\n */\nexport function generateCommitment(amount: bigint): {\n  commitment: string;\n  secret: string;\n  nullifier: string;\n  nullifierHash: string;\n} {\n  // Generate random secret and nullifier\n  const secret = '0x' + randomHex(32);\n  const nullifier = '0x' + randomHex(32);\n  \n  // Compute nullifier hash\n  const nullifierHash = poseidonHash([nullifier]);\n  \n  // Compute commitment = hash(secret, nullifier, amount)\n  const amountHex = '0x' + amount.toString(16).padStart(64, '0');\n  const commitment = poseidonHash([secret, nullifier, amountHex]);\n  \n  return {\n    commitment,\n    secret,\n    nullifier,\n    nullifierHash,\n  };\n}\n\n/**\n * Verify a commitment\n */\nexport function verifyCommitment(\n  secret: string,\n  nullifier: string,\n  amount: bigint,\n  expectedCommitment: string\n): boolean {\n  const amountHex = '0x' + amount.toString(16).padStart(64, '0');\n  const computed = poseidonHash([secret, nullifier, amountHex]);\n  return computed.toLowerCase() === expectedCommitment.toLowerCase();\n}\n\n/**\n * Compute Merkle root from leaves\n */\nexport function computeMerkleRoot(leaves: string[]): string {\n  if (leaves.length === 0) return '0x' + '0'.repeat(64);\n  if (leaves.length === 1) return leaves[0];\n  \n  const nextLevel: string[] = [];\n  for (let i = 0; i < leaves.length; i += 2) {\n    const left = leaves[i];\n    const right = leaves[i + 1] || left; // Duplicate if odd\n    nextLevel.push(pedersenHash(left, right));\n  }\n  \n  return computeMerkleRoot(nextLevel);\n}\n\n/**\n * Generate Merkle proof for a leaf\n */\nexport function generateMerkleProof(\n  leaves: string[],\n  leafIndex: number\n): {\n  pathElements: string[];\n  pathIndices: number[];\n  root: string;\n} {\n  const pathElements: string[] = [];\n  const pathIndices: number[] = [];\n  \n  let currentLevel = [...leaves];\n  let currentIndex = leafIndex;\n  \n  while (currentLevel.length > 1) {\n    const siblingIndex = currentIndex % 2 === 0 ? currentIndex + 1 : currentIndex - 1;\n    const sibling = currentLevel[siblingIndex] || currentLevel[currentIndex];\n    \n    pathElements.push(sibling);\n    pathIndices.push(currentIndex % 2);\n    \n    // Move to next level\n    const nextLevel: string[] = [];\n    for (let i = 0; i < currentLevel.length; i += 2) {\n      const left = currentLevel[i];\n      const right = currentLevel[i + 1] || left;\n      nextLevel.push(pedersenHash(left, right));\n    }\n    \n    currentLevel = nextLevel;\n    currentIndex = Math.floor(currentIndex / 2);\n  }\n  \n  return {\n    pathElements,\n    pathIndices,\n    root: currentLevel[0],\n  };\n}\n\n/**\n * Verify a Merkle proof\n */\nexport function verifyMerkleProof(\n  leaf: string,\n  pathElements: string[],\n  pathIndices: number[],\n  root: string\n): boolean {\n  let current = leaf;\n  \n  for (let i = 0; i < pathElements.length; i++) {\n    const sibling = pathElements[i];\n    const isLeft = pathIndices[i] === 0;\n    \n    current = isLeft\n      ? pedersenHash(current, sibling)\n      : pedersenHash(sibling, current);\n  }\n  \n  return current.toLowerCase() === root.toLowerCase();\n}\n\n/**\n * Format amount for display\n */\nexport function formatAmount(amount: bigint, decimals: number = 18): string {\n  const str = amount.toString().padStart(decimals + 1, '0');\n  const intPart = str.slice(0, -decimals) || '0';\n  const decPart = str.slice(-decimals).replace(/0+$/, '');\n  return decPart ? `${intPart}.${decPart}` : intPart;\n}\n\n/**\n * Parse amount from string\n */\nexport function parseAmount(amount: string, decimals: number = 18): bigint {\n  const [intPart, decPart = ''] = amount.split('.');\n  const paddedDec = decPart.padEnd(decimals, '0').slice(0, decimals);\n  return BigInt(intPart + paddedDec);\n}\n","/**\n * SLPM SDK Type Definitions\n * \n * Core types for the Starknet Lightning Privacy Mixer SDK\n */\n\nimport type { Account, Provider, RpcProvider } from 'starknet';\n\n// ============================================================================\n// Configuration Types\n// ============================================================================\n\nexport interface SLPMConfig {\n  /** Starknet RPC URL */\n  rpcUrl: string;\n  /** Network: mainnet or sepolia testnet */\n  network: 'mainnet' | 'sepolia';\n  /** Privacy mixer contract address (optional, uses default) */\n  mixerContractAddress?: string;\n  /** Verifier contract address (optional, uses default) */\n  verifierContractAddress?: string;\n  /** Cashu mint URL (optional, uses default) */\n  cashuMintUrl?: string;\n  /** FixedFloat API credentials (required for cross-chain swaps) */\n  fixedFloat?: {\n    apiKey: string;\n    apiSecret: string;\n  };\n  /** Enable debug logging */\n  debug?: boolean;\n}\n\nexport interface WalletConnection {\n  /** Connected Starknet account */\n  account: Account;\n  /** RPC provider */\n  provider: RpcProvider;\n  /** Wallet address */\n  address: string;\n}\n\n// ============================================================================\n// Privacy Mixer Types\n// ============================================================================\n\n/**\n * Commitment data - MUST be stored securely by the user\n * This is required to withdraw funds from the mixer\n */\nexport interface Commitment {\n  /** The commitment hash (stored on-chain) */\n  commitment: string;\n  /** Secret value - KEEP PRIVATE */\n  secret: string;\n  /** Nullifier - derived from secret */\n  nullifier: string;\n  /** Hash of nullifier (used to prevent double-spend) */\n  nullifierHash: string;\n  /** Amount deposited (in wei) */\n  amount: bigint;\n  /** Leaf index in Merkle tree (set after deposit) */\n  leafIndex?: number;\n  /** Deposit transaction hash */\n  depositTxHash?: string;\n  /** Timestamp of creation */\n  createdAt: number;\n}\n\nexport interface MerkleProof {\n  /** Path elements (sibling hashes) */\n  pathElements: string[];\n  /** Path indices (0=left, 1=right) */\n  pathIndices: number[];\n  /** Merkle root */\n  root: string;\n}\n\nexport interface DepositParams {\n  /** Amount to deposit in wei (e.g., 1e18 for 1 STRK) */\n  amount: bigint;\n  /** Token address (default: STRK) */\n  tokenAddress?: string;\n}\n\nexport interface DepositResult {\n  /** Transaction hash */\n  txHash: string;\n  /** Commitment data - SAVE THIS */\n  commitment: Commitment;\n  /** Leaf index in Merkle tree */\n  leafIndex: number;\n  /** Block number */\n  blockNumber: number;\n}\n\nexport interface WithdrawParams {\n  /** Commitment from deposit */\n  commitment: Commitment;\n  /** Recipient address */\n  recipient: string;\n  /** Amount to withdraw */\n  amount: bigint;\n  /** Optional relayer for enhanced privacy */\n  relayer?: string;\n  /** Relayer fee */\n  relayerFee?: bigint;\n}\n\nexport interface WithdrawResult {\n  /** Transaction hash */\n  txHash: string;\n  /** Amount withdrawn */\n  amount: bigint;\n  /** Recipient address */\n  recipient: string;\n  /** Nullifier hash (now spent) */\n  nullifierHash: string;\n}\n\nexport interface ZKProof {\n  /** Proof data */\n  proof: string[];\n  /** Public inputs */\n  publicInputs: string[];\n}\n\nexport interface MixerStats {\n  /** Total deposited amount */\n  totalDeposits: bigint;\n  /** Total withdrawn amount */\n  totalWithdrawals: bigint;\n  /** Current anonymity set size */\n  anonymitySetSize: number;\n  /** Number of active commitments */\n  activeCommitments: number;\n}\n\n// ============================================================================\n// Cross-Chain Swap Types\n// ============================================================================\n\nexport type SwapDirection = \n  | 'strk-to-zec' \n  | 'zec-to-strk' \n  | 'strk-to-btc' \n  | 'btc-to-strk';\n\nexport interface SwapQuote {\n  /** Unique quote ID */\n  id: string;\n  /** Input amount */\n  inputAmount: string;\n  /** Input currency */\n  inputCurrency: string;\n  /** Expected output amount */\n  outputAmount: string;\n  /** Output currency */\n  outputCurrency: string;\n  /** Exchange rate */\n  rate: number;\n  /** Fee percentage */\n  feePercent: number;\n  /** Quote expiry timestamp */\n  expiresAt: number;\n  /** Minimum acceptable output */\n  minOutput: string;\n}\n\nexport interface SwapParams {\n  /** Swap direction */\n  direction: SwapDirection;\n  /** Amount to swap */\n  amount: string;\n  /** Destination address (ZEC or STRK address) */\n  destinationAddress: string;\n  /** Enable privacy mixer pre/post processing */\n  usePrivacyMixer?: boolean;\n  /** Enable Cashu ecash layer */\n  useCashuFlow?: boolean;\n  /** Slippage tolerance (0-100) */\n  slippageTolerance?: number;\n}\n\nexport interface SwapResult {\n  /** Unique swap ID */\n  id: string;\n  /** Swap direction */\n  direction: SwapDirection;\n  /** Input amount */\n  inputAmount: string;\n  /** Output amount */\n  outputAmount: string;\n  /** Current status */\n  status: SwapStatus;\n  /** Steps completed */\n  steps: SwapStep[];\n  /** Current step index */\n  currentStepIndex: number;\n  /** Timestamps */\n  timestamps: {\n    created: number;\n    updated: number;\n    completed?: number;\n  };\n  /** Transaction hashes */\n  txHashes: {\n    deposit?: string;\n    mixerDeposit?: string;\n    mixerWithdraw?: string;\n    swap?: string;\n  };\n  /** Error message if failed */\n  error?: string;\n}\n\nexport type SwapStatus = \n  | 'pending'\n  | 'awaiting-deposit'\n  | 'depositing'\n  | 'mixing'\n  | 'swapping'\n  | 'delivering'\n  | 'completed'\n  | 'failed'\n  | 'expired';\n\nexport interface SwapStep {\n  /** Step ID */\n  id: number;\n  /** Step name */\n  name: string;\n  /** Description */\n  description: string;\n  /** Status */\n  status: 'pending' | 'in-progress' | 'completed' | 'failed';\n  /** Extra data */\n  data?: Record<string, unknown>;\n}\n\n// ============================================================================\n// Cashu Ecash Types\n// ============================================================================\n\nexport interface CashuToken {\n  /** Encoded token string */\n  token: string;\n  /** Amount in sats */\n  amount: number;\n  /** Mint URL */\n  mint: string;\n}\n\nexport interface CashuProof {\n  /** Keyset ID */\n  id: string;\n  /** Amount */\n  amount: number;\n  /** Secret */\n  secret: string;\n  /** Signature (C) */\n  C: string;\n}\n\nexport interface MintQuoteResult {\n  /** Quote ID */\n  quoteId: string;\n  /** Lightning invoice to pay */\n  invoice: string;\n  /** Amount in sats */\n  amount: number;\n  /** Expiry timestamp */\n  expiresAt: number;\n}\n\nexport interface MeltQuoteResult {\n  /** Quote ID */\n  quoteId: string;\n  /** Amount to melt */\n  amount: number;\n  /** Fee reserve */\n  feeReserve: number;\n  /** Expiry timestamp */\n  expiresAt: number;\n}\n\n// ============================================================================\n// Event Types\n// ============================================================================\n\nexport type SLPMEventType =\n  | 'initialized'\n  | 'connected'\n  | 'disconnected'\n  | 'deposit:started'\n  | 'deposit:confirmed'\n  | 'deposit:failed'\n  | 'withdraw:started'\n  | 'withdraw:proof-generating'\n  | 'withdraw:proof-generated'\n  | 'withdraw:completed'\n  | 'withdraw:failed'\n  | 'swap:initiated'\n  | 'swap:step-changed'\n  | 'swap:completed'\n  | 'swap:failed'\n  | 'cashu:minting'\n  | 'cashu:minted'\n  | 'cashu:melting'\n  | 'cashu:melted'\n  | 'error';\n\nexport interface SLPMEvent<T = unknown> {\n  /** Event type */\n  type: SLPMEventType;\n  /** Timestamp */\n  timestamp: number;\n  /** Event data */\n  data: T;\n}\n\nexport type SLPMEventCallback<T = unknown> = (event: SLPMEvent<T>) => void;\n\n// ============================================================================\n// Error Types\n// ============================================================================\n\nexport class SLPMError extends Error {\n  public readonly code: string;\n  public readonly details?: Record<string, unknown>;\n\n  constructor(message: string, code: string, details?: Record<string, unknown>) {\n    super(message);\n    this.name = 'SLPMError';\n    this.code = code;\n    this.details = details;\n  }\n}\n\nexport class ConfigError extends SLPMError {\n  constructor(message: string, details?: Record<string, unknown>) {\n    super(message, 'CONFIG_ERROR', details);\n    this.name = 'ConfigError';\n  }\n}\n\nexport class ConnectionError extends SLPMError {\n  constructor(message: string, details?: Record<string, unknown>) {\n    super(message, 'CONNECTION_ERROR', details);\n    this.name = 'ConnectionError';\n  }\n}\n\nexport class PrivacyError extends SLPMError {\n  constructor(message: string, details?: Record<string, unknown>) {\n    super(message, 'PRIVACY_ERROR', details);\n    this.name = 'PrivacyError';\n  }\n}\n\nexport class SwapError extends SLPMError {\n  constructor(message: string, details?: Record<string, unknown>) {\n    super(message, 'SWAP_ERROR', details);\n    this.name = 'SwapError';\n  }\n}\n\nexport class ProofError extends SLPMError {\n  constructor(message: string, details?: Record<string, unknown>) {\n    super(message, 'PROOF_ERROR', details);\n    this.name = 'ProofError';\n  }\n}\n\nexport class CashuError extends SLPMError {\n  constructor(message: string, details?: Record<string, unknown>) {\n    super(message, 'CASHU_ERROR', details);\n    this.name = 'CashuError';\n  }\n}\n","/**\n * SLPM SDK - Privacy Mixer Module\n * \n * Provides ZK-based private deposits and withdrawals on Starknet\n */\n\nimport { Account, Contract, RpcProvider, CallData, cairo } from 'starknet';\nimport { v4 as uuidv4 } from 'uuid';\nimport {\n  SLPMConfig,\n  WalletConnection,\n  Commitment,\n  DepositParams,\n  DepositResult,\n  WithdrawParams,\n  WithdrawResult,\n  MerkleProof,\n  ZKProof,\n  MixerStats,\n  SLPMEvent,\n  SLPMEventCallback,\n  PrivacyError,\n  ProofError,\n} from '../types';\nimport {\n  generateCommitment,\n  generateMerkleProof,\n  verifyMerkleProof,\n  formatAmount,\n} from '../crypto';\nimport {\n  MAINNET_CONTRACTS,\n  SEPOLIA_CONTRACTS,\n  MIXER_CONFIG,\n} from '../constants';\n\n// Mixer ABI (simplified - use actual ABI in production)\nconst MIXER_ABI = [\n  {\n    name: 'deposit',\n    type: 'function',\n    inputs: [\n      { name: 'commitment', type: 'felt252' },\n      { name: 'amount', type: 'u256' },\n    ],\n    outputs: [],\n  },\n  {\n    name: 'withdraw',\n    type: 'function',\n    inputs: [\n      { name: 'nullifier_hash', type: 'felt252' },\n      { name: 'recipient', type: 'ContractAddress' },\n      { name: 'amount', type: 'u256' },\n      { name: 'proof', type: 'Array<felt252>' },\n    ],\n    outputs: [],\n  },\n  {\n    name: 'get_merkle_root',\n    type: 'function',\n    inputs: [],\n    outputs: [{ type: 'felt252' }],\n    state_mutability: 'view',\n  },\n  {\n    name: 'get_anonymity_set_size',\n    type: 'function',\n    inputs: [],\n    outputs: [{ type: 'u64' }],\n    state_mutability: 'view',\n  },\n  {\n    name: 'is_nullifier_used',\n    type: 'function',\n    inputs: [{ name: 'nullifier_hash', type: 'felt252' }],\n    outputs: [{ type: 'bool' }],\n    state_mutability: 'view',\n  },\n  {\n    name: 'get_commitment_at_index',\n    type: 'function',\n    inputs: [{ name: 'index', type: 'u64' }],\n    outputs: [{ type: 'felt252' }],\n    state_mutability: 'view',\n  },\n];\n\n/**\n * Privacy Mixer - ZK-based private deposits and withdrawals\n * \n * @example\n * ```typescript\n * const mixer = new PrivacyMixer(config, wallet);\n * \n * // Deposit\n * const deposit = await mixer.deposit({ amount: parseAmount('10') });\n * console.log('Save this commitment:', deposit.commitment);\n * \n * // Later, withdraw to a different address\n * const withdraw = await mixer.withdraw({\n *   commitment: deposit.commitment,\n *   recipient: '0x...',\n *   amount: parseAmount('10'),\n * });\n * ```\n */\nexport class PrivacyMixer {\n  private config: SLPMConfig;\n  private wallet: WalletConnection;\n  private contract: Contract;\n  private eventCallback?: SLPMEventCallback;\n  private commitments: Map<string, Commitment> = new Map();\n  \n  constructor(\n    config: SLPMConfig,\n    wallet: WalletConnection,\n    eventCallback?: SLPMEventCallback\n  ) {\n    this.config = config;\n    this.wallet = wallet;\n    this.eventCallback = eventCallback;\n    \n    // Get contract address\n    const contracts = config.network === 'mainnet' ? MAINNET_CONTRACTS : SEPOLIA_CONTRACTS;\n    const contractAddress = config.mixerContractAddress || contracts.MIXER;\n    \n    // Initialize contract\n    this.contract = new Contract(MIXER_ABI, contractAddress, wallet.provider);\n    this.contract.connect(wallet.account);\n  }\n\n  // ============================================================================\n  // Core Operations\n  // ============================================================================\n\n  /**\n   * Deposit funds into the privacy mixer\n   * \n   * @param params - Deposit parameters\n   * @returns Deposit result including commitment (SAVE THIS!)\n   */\n  async deposit(params: DepositParams): Promise<DepositResult> {\n    const { amount, tokenAddress } = params;\n    \n    // Validate amount\n    if (amount < MIXER_CONFIG.MIN_DEPOSIT) {\n      throw new PrivacyError(\n        `Minimum deposit is ${formatAmount(MIXER_CONFIG.MIN_DEPOSIT)} STRK`,\n        { minDeposit: MIXER_CONFIG.MIN_DEPOSIT.toString() }\n      );\n    }\n    \n    if (amount > MIXER_CONFIG.MAX_DEPOSIT) {\n      throw new PrivacyError(\n        `Maximum deposit is ${formatAmount(MIXER_CONFIG.MAX_DEPOSIT)} STRK`,\n        { maxDeposit: MIXER_CONFIG.MAX_DEPOSIT.toString() }\n      );\n    }\n\n    this.emit('deposit:started', { amount: amount.toString() });\n\n    try {\n      // Generate commitment\n      const commitmentData = generateCommitment(amount);\n      \n      // Create commitment object\n      const commitment: Commitment = {\n        ...commitmentData,\n        amount,\n        createdAt: Date.now(),\n      };\n\n      // Execute deposit transaction\n      const tx = await this.contract.deposit(\n        commitmentData.commitment,\n        cairo.uint256(amount)\n      );\n\n      // Wait for confirmation\n      const receipt = await this.wallet.provider.waitForTransaction(tx.transaction_hash);\n      \n      // Get leaf index from events\n      const leafIndex = this.extractLeafIndex(receipt);\n      commitment.leafIndex = leafIndex;\n      commitment.depositTxHash = tx.transaction_hash;\n\n      // Store commitment locally\n      this.commitments.set(commitmentData.commitment, commitment);\n\n      const result: DepositResult = {\n        txHash: tx.transaction_hash,\n        commitment,\n        leafIndex,\n        blockNumber: (receipt as { block_number?: number }).block_number || 0,\n      };\n\n      this.emit('deposit:confirmed', { txHash: result.txHash, leafIndex });\n      \n      return result;\n    } catch (error) {\n      this.emit('deposit:failed', { error: String(error) });\n      throw new PrivacyError(`Deposit failed: ${error}`, { error: String(error) });\n    }\n  }\n\n  /**\n   * Withdraw funds from the privacy mixer\n   * \n   * @param params - Withdrawal parameters including the original commitment\n   * @returns Withdrawal result\n   */\n  async withdraw(params: WithdrawParams): Promise<WithdrawResult> {\n    const { commitment, recipient, amount, relayer, relayerFee } = params;\n\n    this.emit('withdraw:started', { recipient, amount: amount.toString() });\n\n    try {\n      // Check if nullifier already used\n      const isUsed = await this.isNullifierUsed(commitment.nullifierHash);\n      if (isUsed) {\n        throw new PrivacyError('This commitment has already been withdrawn');\n      }\n\n      // Generate Merkle proof\n      this.emit('withdraw:proof-generating', {});\n      const merkleProof = await this.getMerkleProof(commitment);\n      \n      // Generate ZK proof\n      const zkProof = await this.generateWithdrawProof({\n        commitment,\n        merkleProof,\n        recipient,\n      });\n      \n      this.emit('withdraw:proof-generated', {});\n\n      // Execute withdrawal\n      const tx = await this.contract.withdraw(\n        commitment.nullifierHash,\n        recipient,\n        cairo.uint256(amount),\n        zkProof.proof\n      );\n\n      // Wait for confirmation\n      await this.wallet.provider.waitForTransaction(tx.transaction_hash);\n\n      const result: WithdrawResult = {\n        txHash: tx.transaction_hash,\n        amount,\n        recipient,\n        nullifierHash: commitment.nullifierHash,\n      };\n\n      this.emit('withdraw:completed', { txHash: result.txHash, recipient });\n      \n      return result;\n    } catch (error) {\n      this.emit('withdraw:failed', { error: String(error) });\n      throw new PrivacyError(`Withdrawal failed: ${error}`, { error: String(error) });\n    }\n  }\n\n  // ============================================================================\n  // Proof Generation\n  // ============================================================================\n\n  /**\n   * Generate ZK proof for withdrawal\n   */\n  async generateWithdrawProof(params: {\n    commitment: Commitment;\n    merkleProof: MerkleProof;\n    recipient: string;\n  }): Promise<ZKProof> {\n    const { commitment, merkleProof, recipient } = params;\n\n    try {\n      // In production, this would call the Noir prover\n      // For now, return a mock proof structure\n      const proof: ZKProof = {\n        proof: [\n          commitment.nullifierHash,\n          merkleProof.root,\n          recipient,\n          // Additional proof elements would be here\n        ],\n        publicInputs: [\n          commitment.nullifierHash,\n          merkleProof.root,\n          recipient,\n          commitment.amount.toString(),\n        ],\n      };\n\n      return proof;\n    } catch (error) {\n      throw new ProofError(`Failed to generate proof: ${error}`);\n    }\n  }\n\n  /**\n   * Get Merkle proof for a commitment\n   */\n  async getMerkleProof(commitment: Commitment): Promise<MerkleProof> {\n    if (commitment.leafIndex === undefined) {\n      throw new PrivacyError('Commitment has no leaf index');\n    }\n\n    // Fetch all commitments from contract\n    const allCommitments = await this.getAllCommitments();\n    \n    // Generate proof\n    const proof = generateMerkleProof(allCommitments, commitment.leafIndex);\n    \n    return proof;\n  }\n\n  // ============================================================================\n  // View Functions\n  // ============================================================================\n\n  /**\n   * Get current Merkle root\n   */\n  async getMerkleRoot(): Promise<string> {\n    const result = await this.contract.get_merkle_root();\n    return result.toString();\n  }\n\n  /**\n   * Get anonymity set size\n   */\n  async getAnonymitySetSize(): Promise<number> {\n    const result = await this.contract.get_anonymity_set_size();\n    return Number(result);\n  }\n\n  /**\n   * Check if a nullifier has been used\n   */\n  async isNullifierUsed(nullifierHash: string): Promise<boolean> {\n    const result = await this.contract.is_nullifier_used(nullifierHash);\n    return Boolean(result);\n  }\n\n  /**\n   * Get all commitments from the contract\n   */\n  async getAllCommitments(): Promise<string[]> {\n    const size = await this.getAnonymitySetSize();\n    const commitments: string[] = [];\n    \n    for (let i = 0; i < size; i++) {\n      const commitment = await this.contract.get_commitment_at_index(i);\n      commitments.push(commitment.toString());\n    }\n    \n    return commitments;\n  }\n\n  /**\n   * Get mixer statistics\n   */\n  async getStats(): Promise<MixerStats> {\n    const anonymitySetSize = await this.getAnonymitySetSize();\n    \n    return {\n      totalDeposits: 0n, // Would need to query from events\n      totalWithdrawals: 0n,\n      anonymitySetSize,\n      activeCommitments: anonymitySetSize,\n    };\n  }\n\n  // ============================================================================\n  // Commitment Management\n  // ============================================================================\n\n  /**\n   * Store a commitment locally\n   */\n  storeCommitment(commitment: Commitment): void {\n    this.commitments.set(commitment.commitment, commitment);\n  }\n\n  /**\n   * Get stored commitment\n   */\n  getCommitment(commitmentHash: string): Commitment | undefined {\n    return this.commitments.get(commitmentHash);\n  }\n\n  /**\n   * List all stored commitments\n   */\n  listCommitments(): Commitment[] {\n    return Array.from(this.commitments.values());\n  }\n\n  /**\n   * Export commitments for backup\n   */\n  exportCommitments(): string {\n    const data = Array.from(this.commitments.values());\n    return JSON.stringify(data, (_, v) => typeof v === 'bigint' ? v.toString() : v);\n  }\n\n  /**\n   * Import commitments from backup\n   */\n  importCommitments(json: string): void {\n    const data = JSON.parse(json);\n    for (const c of data) {\n      const commitment: Commitment = {\n        ...c,\n        amount: BigInt(c.amount),\n      };\n      this.commitments.set(commitment.commitment, commitment);\n    }\n  }\n\n  // ============================================================================\n  // Private Methods\n  // ============================================================================\n\n  private extractLeafIndex(receipt: any): number {\n    // Extract leaf index from deposit event\n    const events = receipt.events || [];\n    for (const event of events) {\n      if (event.keys?.[0]?.includes('Deposit')) {\n        return Number(event.data?.[1] || 0);\n      }\n    }\n    return this.commitments.size;\n  }\n\n  private emit(type: string, data: Record<string, unknown>): void {\n    if (this.eventCallback) {\n      this.eventCallback({\n        type: type as any,\n        timestamp: Date.now(),\n        data,\n      });\n    }\n  }\n}\n\n// Export for direct import\nexport default PrivacyMixer;\n","/**\n * SLPM SDK - Cross-Chain Swaps Module\n * \n * Handles STRK  ZEC/BTC swaps via Lightning Network\n */\n\nimport { Account, RpcProvider, WalletAccount } from 'starknet';\nimport { v4 as uuidv4 } from 'uuid';\nimport {\n  SLPMConfig,\n  WalletConnection,\n  SwapDirection,\n  SwapQuote,\n  SwapParams,\n  SwapResult,\n  SwapStatus,\n  SwapStep,\n  SLPMEvent,\n  SLPMEventCallback,\n  SwapError,\n  Commitment,\n} from '../types';\nimport { SWAP_CONFIG, CURRENCIES } from '../constants';\nimport { parseAmount, formatAmount } from '../crypto';\nimport { PrivacyMixer } from '../privacy';\n\n/**\n * Cross-Chain Swapper\n * \n * Enables swaps between STRK and other currencies (ZEC, BTC)\n * via Lightning Network with optional privacy enhancements.\n * \n * @example\n * ```typescript\n * const swapper = new CrossChainSwapper(config, wallet, privacyMixer);\n * \n * // Get quote\n * const quote = await swapper.getQuote('strk-to-zec', '10');\n * \n * // Execute swap with privacy\n * const result = await swapper.swap({\n *   direction: 'strk-to-zec',\n *   amount: '10',\n *   destinationAddress: 'zs1...',\n *   usePrivacyMixer: true,\n *   useCashuFlow: true,\n * });\n * ```\n */\nexport class CrossChainSwapper {\n  private config: SLPMConfig;\n  private wallet: WalletConnection;\n  private privacyMixer?: PrivacyMixer;\n  private eventCallback?: SLPMEventCallback;\n  private activeSwaps: Map<string, SwapResult> = new Map();\n\n  constructor(\n    config: SLPMConfig,\n    wallet: WalletConnection,\n    privacyMixer?: PrivacyMixer,\n    eventCallback?: SLPMEventCallback\n  ) {\n    this.config = config;\n    this.wallet = wallet;\n    this.privacyMixer = privacyMixer;\n    this.eventCallback = eventCallback;\n  }\n\n  // ============================================================================\n  // Quotes\n  // ============================================================================\n\n  /**\n   * Get a quote for a swap\n   */\n  async getQuote(direction: SwapDirection, amount: string): Promise<SwapQuote> {\n    const [fromCurrency, toCurrency] = this.parseCurrencies(direction);\n    \n    // Validate amount\n    this.validateAmount(direction, amount);\n\n    // Get rates from FixedFloat API\n    const quote = await this.fetchQuote(fromCurrency, toCurrency, amount);\n    \n    return quote;\n  }\n\n  /**\n   * Get quotes for both directions\n   */\n  async getQuotes(amount: string): Promise<{\n    strkToZec: SwapQuote;\n    zecToStrk: SwapQuote;\n  }> {\n    const [strkToZec, zecToStrk] = await Promise.all([\n      this.getQuote('strk-to-zec', amount),\n      this.getQuote('zec-to-strk', amount),\n    ]);\n    \n    return { strkToZec, zecToStrk };\n  }\n\n  // ============================================================================\n  // Swaps\n  // ============================================================================\n\n  /**\n   * Execute a cross-chain swap\n   */\n  async swap(params: SwapParams): Promise<SwapResult> {\n    const {\n      direction,\n      amount,\n      destinationAddress,\n      usePrivacyMixer = false,\n      useCashuFlow = false,\n      slippageTolerance = SWAP_CONFIG.DEFAULT_SLIPPAGE,\n    } = params;\n\n    // Create swap result\n    const swapId = uuidv4();\n    const steps = this.buildSteps(direction, usePrivacyMixer, useCashuFlow);\n    \n    const result: SwapResult = {\n      id: swapId,\n      direction,\n      inputAmount: amount,\n      outputAmount: '0',\n      status: 'pending',\n      steps,\n      currentStepIndex: 0,\n      timestamps: {\n        created: Date.now(),\n        updated: Date.now(),\n      },\n      txHashes: {},\n    };\n\n    this.activeSwaps.set(swapId, result);\n    this.emit('swap:initiated', { swapId, direction, amount });\n\n    try {\n      // Execute based on direction\n      if (direction === 'strk-to-zec' || direction === 'strk-to-btc') {\n        await this.executeStrkToExternal(result, params);\n      } else {\n        await this.executeExternalToStrk(result, params);\n      }\n\n      return result;\n    } catch (error) {\n      result.status = 'failed';\n      result.error = String(error);\n      this.emit('swap:failed', { swapId, error: String(error) });\n      throw new SwapError(`Swap failed: ${error}`);\n    }\n  }\n\n  /**\n   * Get swap status\n   */\n  getSwap(swapId: string): SwapResult | undefined {\n    return this.activeSwaps.get(swapId);\n  }\n\n  /**\n   * List active swaps\n   */\n  listSwaps(): SwapResult[] {\n    return Array.from(this.activeSwaps.values());\n  }\n\n  /**\n   * Cancel a pending swap\n   */\n  cancelSwap(swapId: string): boolean {\n    const swap = this.activeSwaps.get(swapId);\n    if (swap && swap.status === 'pending') {\n      swap.status = 'failed';\n      swap.error = 'Cancelled by user';\n      return true;\n    }\n    return false;\n  }\n\n  // ============================================================================\n  // STRK  External (ZEC/BTC)\n  // ============================================================================\n\n  private async executeStrkToExternal(\n    result: SwapResult,\n    params: SwapParams\n  ): Promise<void> {\n    const { direction, amount, destinationAddress, usePrivacyMixer, useCashuFlow } = params;\n    let currentStep = 0;\n\n    // Step: Privacy Mixer (if enabled)\n    if (usePrivacyMixer && this.privacyMixer) {\n      this.updateStep(result, currentStep, 'in-progress', 'Depositing to privacy mixer...');\n      \n      const strkAmount = parseAmount(amount);\n      const deposit = await this.privacyMixer.deposit({ amount: strkAmount });\n      result.txHashes.mixerDeposit = deposit.txHash;\n      \n      // Simulate mixing delay\n      await this.delay(2000);\n      \n      this.updateStep(result, currentStep, 'completed', 'Mixed in privacy pool');\n      currentStep++;\n\n      // Withdraw from mixer\n      this.updateStep(result, currentStep, 'in-progress', 'Generating ZK proof...');\n      await this.delay(1500);\n      this.updateStep(result, currentStep, 'completed', 'Withdrawn with ZK proof');\n      currentStep++;\n    }\n\n    // Step: Create FixedFloat order\n    this.updateStep(result, currentStep, 'in-progress', 'Creating exchange order...');\n    \n    const quote = await this.getQuote(direction, amount);\n    const order = await this.createFixedFloatOrder(quote, destinationAddress);\n    \n    this.updateStep(result, currentStep, 'completed', 'Order created');\n    currentStep++;\n\n    // Step: Execute Atomiq swap (STRK  Lightning)\n    this.updateStep(result, currentStep, 'in-progress', 'Swapping STRK to Lightning...');\n    \n    // In production: Call Atomiq SDK to pay the invoice\n    const lightningInvoice = order.paymentAddress;\n    const swapTxHash = await this.executeAtomiqSwap(amount, lightningInvoice);\n    result.txHashes.swap = swapTxHash;\n    \n    this.updateStep(result, currentStep, 'completed', 'Lightning payment sent');\n    currentStep++;\n\n    // Step: Cashu flow (if enabled)\n    if (useCashuFlow) {\n      this.updateStep(result, currentStep, 'in-progress', 'Processing through Cashu ecash...');\n      await this.delay(1500);\n      this.updateStep(result, currentStep, 'completed', 'Ecash privacy layer applied');\n      currentStep++;\n    }\n\n    // Step: Wait for delivery\n    this.updateStep(result, currentStep, 'in-progress', 'Waiting for delivery...');\n    \n    // Poll for completion\n    await this.pollOrderStatus(order.orderId, result, currentStep);\n    \n    result.outputAmount = quote.outputAmount;\n    result.status = 'completed';\n    result.timestamps.completed = Date.now();\n    \n    this.emit('swap:completed', { swapId: result.id, outputAmount: result.outputAmount });\n  }\n\n  // ============================================================================\n  // External  STRK (ZEC/BTC  STRK)\n  // ============================================================================\n\n  private async executeExternalToStrk(\n    result: SwapResult,\n    params: SwapParams\n  ): Promise<void> {\n    const { direction, amount, destinationAddress, usePrivacyMixer, useCashuFlow } = params;\n    let currentStep = 0;\n\n    // Step: Create Atomiq swap to get BTC address\n    this.updateStep(result, currentStep, 'in-progress', 'Creating swap order...');\n    \n    const atomiqOrder = await this.createAtomiqBtcSwap(amount, destinationAddress);\n    \n    this.updateStep(result, currentStep, 'completed', 'Swap order created');\n    currentStep++;\n\n    // Step: Create FixedFloat order (ZEC  BTC)\n    this.updateStep(result, currentStep, 'in-progress', 'Creating exchange order...');\n    \n    const ffOrder = await this.createFixedFloatOrder(\n      { inputCurrency: 'ZEC', outputCurrency: 'BTC', inputAmount: amount } as any,\n      atomiqOrder.btcAddress\n    );\n    \n    result.txHashes.deposit = ffOrder.orderId;\n    \n    this.updateStep(result, currentStep, 'completed', 'Order created', {\n      depositAddress: ffOrder.depositAddress,\n      depositAmount: ffOrder.depositAmount,\n    });\n    currentStep++;\n\n    // Step: Await deposit\n    this.updateStep(result, currentStep, 'in-progress', 'Awaiting your deposit...');\n    result.status = 'awaiting-deposit';\n    \n    // In production: Poll for deposit confirmation\n    // For now, simulate\n    await this.delay(3000);\n    \n    this.updateStep(result, currentStep, 'completed', 'Deposit received');\n    currentStep++;\n\n    // Step: Wait for STRK\n    this.updateStep(result, currentStep, 'in-progress', 'Processing STRK delivery...');\n    \n    // Poll for Atomiq completion\n    await this.delay(2000);\n    \n    this.updateStep(result, currentStep, 'completed', 'STRK delivered');\n    currentStep++;\n\n    // Step: Privacy Mixer (if enabled)\n    if (usePrivacyMixer && this.privacyMixer) {\n      this.updateStep(result, currentStep, 'in-progress', 'Routing through privacy mixer...');\n      await this.delay(2000);\n      this.updateStep(result, currentStep, 'completed', 'Privacy mixer complete');\n      currentStep++;\n    }\n\n    result.status = 'completed';\n    result.timestamps.completed = Date.now();\n    \n    this.emit('swap:completed', { swapId: result.id });\n  }\n\n  // ============================================================================\n  // API Interactions\n  // ============================================================================\n\n  private async fetchQuote(\n    fromCurrency: string,\n    toCurrency: string,\n    amount: string\n  ): Promise<SwapQuote> {\n    // In production: Call FixedFloat API\n    // For now, return mock quote\n    const rate = fromCurrency === 'STRK' ? 0.0015 : 666.67;\n    const outputAmount = (parseFloat(amount) * rate).toFixed(8);\n    \n    return {\n      id: uuidv4(),\n      inputAmount: amount,\n      inputCurrency: fromCurrency,\n      outputAmount,\n      outputCurrency: toCurrency,\n      rate,\n      feePercent: 1.5,\n      expiresAt: Date.now() + SWAP_CONFIG.QUOTE_EXPIRY_MS,\n      minOutput: (parseFloat(outputAmount) * 0.99).toFixed(8),\n    };\n  }\n\n  private async createFixedFloatOrder(\n    quote: any,\n    destinationAddress: string\n  ): Promise<{\n    orderId: string;\n    paymentAddress: string;\n    depositAddress?: string;\n    depositAmount?: string;\n  }> {\n    // In production: Call FixedFloat /create API\n    return {\n      orderId: uuidv4(),\n      paymentAddress: 'lnbc1...',\n      depositAddress: quote.inputCurrency !== 'STRK' ? 't1abc...' : undefined,\n      depositAmount: quote.inputAmount,\n    };\n  }\n\n  private async executeAtomiqSwap(amount: string, invoice: string): Promise<string> {\n    // In production: Use Atomiq SDK\n    return '0x' + Math.random().toString(16).slice(2);\n  }\n\n  private async createAtomiqBtcSwap(\n    amount: string,\n    recipient: string\n  ): Promise<{ btcAddress: string; swapId: string }> {\n    // In production: Use Atomiq SDK for BTC  STRK\n    return {\n      btcAddress: 'bc1q...',\n      swapId: uuidv4(),\n    };\n  }\n\n  private async pollOrderStatus(\n    orderId: string,\n    result: SwapResult,\n    stepIndex: number\n  ): Promise<void> {\n    // In production: Poll FixedFloat API\n    let attempts = 0;\n    while (attempts < SWAP_CONFIG.MAX_POLL_ATTEMPTS) {\n      await this.delay(SWAP_CONFIG.POLL_INTERVAL_MS);\n      attempts++;\n      \n      // Simulate completion after 3 attempts\n      if (attempts >= 3) {\n        this.updateStep(result, stepIndex, 'completed', 'Delivery confirmed');\n        return;\n      }\n    }\n  }\n\n  // ============================================================================\n  // Utilities\n  // ============================================================================\n\n  private buildSteps(\n    direction: SwapDirection,\n    usePrivacyMixer: boolean,\n    useCashuFlow: boolean\n  ): SwapStep[] {\n    const steps: SwapStep[] = [];\n    let id = 1;\n\n    if (direction.startsWith('strk-to')) {\n      // STRK  External\n      if (usePrivacyMixer) {\n        steps.push({ id: id++, name: 'mixer-deposit', description: 'Deposit to privacy mixer', status: 'pending' });\n        steps.push({ id: id++, name: 'mixer-withdraw', description: 'Withdraw with ZK proof', status: 'pending' });\n      }\n      steps.push({ id: id++, name: 'create-order', description: 'Create exchange order', status: 'pending' });\n      steps.push({ id: id++, name: 'strk-to-ln', description: 'STRK  Lightning swap', status: 'pending' });\n      if (useCashuFlow) {\n        steps.push({ id: id++, name: 'cashu-flow', description: 'Cashu ecash layer', status: 'pending' });\n      }\n      steps.push({ id: id++, name: 'delivery', description: 'Wait for delivery', status: 'pending' });\n    } else {\n      // External  STRK\n      steps.push({ id: id++, name: 'create-atomiq', description: 'Create swap order', status: 'pending' });\n      steps.push({ id: id++, name: 'create-order', description: 'Create exchange order', status: 'pending' });\n      steps.push({ id: id++, name: 'await-deposit', description: 'Awaiting deposit', status: 'pending' });\n      steps.push({ id: id++, name: 'strk-delivery', description: 'STRK delivery', status: 'pending' });\n      if (usePrivacyMixer) {\n        steps.push({ id: id++, name: 'privacy-mixer', description: 'Privacy mixer processing', status: 'pending' });\n      }\n    }\n\n    return steps;\n  }\n\n  private updateStep(\n    result: SwapResult,\n    stepIndex: number,\n    status: SwapStep['status'],\n    description?: string,\n    data?: Record<string, unknown>\n  ): void {\n    if (result.steps[stepIndex]) {\n      result.steps[stepIndex].status = status;\n      if (description) result.steps[stepIndex].description = description;\n      if (data) result.steps[stepIndex].data = data;\n      result.currentStepIndex = stepIndex;\n      result.timestamps.updated = Date.now();\n    }\n    \n    this.emit('swap:step-changed', {\n      swapId: result.id,\n      stepIndex,\n      status,\n      description,\n    });\n  }\n\n  private parseCurrencies(direction: SwapDirection): [string, string] {\n    const map: Record<SwapDirection, [string, string]> = {\n      'strk-to-zec': ['STRK', 'ZEC'],\n      'zec-to-strk': ['ZEC', 'STRK'],\n      'strk-to-btc': ['STRK', 'BTC'],\n      'btc-to-strk': ['BTC', 'STRK'],\n    };\n    return map[direction];\n  }\n\n  private validateAmount(direction: SwapDirection, amount: string): void {\n    const num = parseFloat(amount);\n    \n    if (direction.startsWith('strk-to')) {\n      if (num < SWAP_CONFIG.MIN_AMOUNT_STRK || num > SWAP_CONFIG.MAX_AMOUNT_STRK) {\n        throw new SwapError(`STRK amount must be between ${SWAP_CONFIG.MIN_AMOUNT_STRK} and ${SWAP_CONFIG.MAX_AMOUNT_STRK}`);\n      }\n    } else if (direction.includes('zec')) {\n      if (num < SWAP_CONFIG.MIN_AMOUNT_ZEC || num > SWAP_CONFIG.MAX_AMOUNT_ZEC) {\n        throw new SwapError(`ZEC amount must be between ${SWAP_CONFIG.MIN_AMOUNT_ZEC} and ${SWAP_CONFIG.MAX_AMOUNT_ZEC}`);\n      }\n    }\n  }\n\n  private delay(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  private emit(type: string, data: Record<string, unknown>): void {\n    if (this.eventCallback) {\n      this.eventCallback({\n        type: type as any,\n        timestamp: Date.now(),\n        data,\n      });\n    }\n  }\n}\n\nexport default CrossChainSwapper;\n","/**\n * SLPM SDK - Cashu Ecash Wallet Integration\n * \n * Provides privacy-preserving payment capabilities using Cashu ecash protocol.\n */\n\nimport { \n  getEncodedToken, \n  Token, \n  TokenEntry,\n  Proof, \n  CashuMint, \n  CashuWallet as CashuWalletLib,\n  MeltQuoteResponse,\n  MeltTokensResponse,\n  SendResponse,\n} from '@cashu/cashu-ts';\nimport { CASHU_MINTS } from '../constants';\n\n/**\n * Configuration options for CashuWallet\n */\nexport interface CashuWalletOptions {\n  /** Mint URL to connect to */\n  mintUrl?: string;\n  /** Unit of currency (default: 'sat') */\n  unit?: string;\n  /** Enable debug logging */\n  debug?: boolean;\n}\n\n/**\n * Token balance information\n */\nexport interface TokenBalance {\n  /** Total balance in tokens */\n  total: number;\n  /** Number of proofs/tokens held */\n  proofCount: number;\n  /** Breakdown by denomination */\n  denominations: Record<number, number>;\n}\n\n/**\n * Send result containing token and change\n */\nexport interface SendResult {\n  /** Encoded token to send */\n  token: string;\n  /** Change tokens to keep */\n  change: Proof[];\n}\n\n/**\n * Mint quote result\n */\nexport interface MintQuoteResult {\n  /** Quote ID */\n  quote: string;\n  /** Lightning invoice to pay */\n  request: string;\n  /** Whether quote has been paid */\n  paid: boolean;\n  /** Expiry timestamp */\n  expiry: number;\n}\n\n/**\n * Melt quote result\n */\nexport interface MeltQuoteResult {\n  /** Quote ID */\n  quote: string;\n  /** Amount to melt */\n  amount: number;\n  /** Fee estimate */\n  fee: number;\n  /** Whether melt has been completed */\n  paid: boolean;\n  /** Expiry timestamp */\n  expiry: number;\n}\n\n/**\n * CashuWallet - Privacy-preserving ecash wallet\n * \n * Implements the Cashu protocol for private Lightning payments:\n * - Mint: Convert Lightning sats to ecash tokens\n * - Melt: Convert ecash tokens back to Lightning\n * - Send/Receive: Transfer ecash tokens peer-to-peer\n * \n * @example\n * ```typescript\n * const wallet = new CashuWallet({\n *   mintUrl: 'https://mint.minibits.cash/Bitcoin'\n * });\n * \n * // Mint tokens from Lightning\n * const quote = await wallet.getMintQuote(1000);\n * // ... pay the Lightning invoice (quote.request) ...\n * const tokens = await wallet.mintTokens(1000, quote.quote);\n * \n * // Send tokens privately\n * const { token } = await wallet.send(tokens, 500);\n * \n * // Receive tokens\n * const received = await wallet.receive(token);\n * \n * // Melt tokens to Lightning\n * const meltQuote = await wallet.getMeltQuote('lnbc...');\n * await wallet.meltTokens(meltQuote, tokens);\n * ```\n */\nexport class CashuWallet {\n  private mintUrl: string;\n  private unit: string;\n  private debug: boolean;\n  private cashuMint: CashuMint | null = null;\n  private cashuWallet: CashuWalletLib | null = null;\n  private proofs: Proof[] = [];\n  private initialized = false;\n\n  constructor(options: CashuWalletOptions = {}) {\n    this.mintUrl = options.mintUrl || CASHU_MINTS.mainnet;\n    this.unit = options.unit || 'sat';\n    this.debug = options.debug || false;\n  }\n\n  /**\n   * Initialize connection to the mint\n   */\n  async init(): Promise<void> {\n    if (this.initialized) return;\n\n    try {\n      this.cashuMint = new CashuMint(this.mintUrl);\n      this.cashuWallet = new CashuWalletLib(this.cashuMint, { unit: this.unit });\n      this.initialized = true;\n      this.log('Initialized Cashu wallet', { mintUrl: this.mintUrl });\n    } catch (error) {\n      throw new Error(`Failed to initialize Cashu wallet: ${error}`);\n    }\n  }\n\n  /**\n   * Ensure wallet is initialized\n   */\n  private async ensureInitialized(): Promise<void> {\n    if (!this.initialized) {\n      await this.init();\n    }\n  }\n\n  /**\n   * Get a mint quote (request to convert Lightning sats to ecash)\n   * \n   * @param amount - Amount in sats to mint\n   * @returns Quote with Lightning invoice to pay\n   */\n  async getMintQuote(amount: number): Promise<MintQuoteResult> {\n    await this.ensureInitialized();\n    \n    if (!this.cashuWallet) {\n      throw new Error('Wallet not initialized');\n    }\n\n    const quote = await this.cashuWallet.createMintQuote(amount);\n    this.log('Created mint quote', { amount, quote: quote.quote });\n\n    return {\n      quote: quote.quote,\n      request: quote.request,\n      paid: quote.state === 'PAID',\n      expiry: quote.expiry || Date.now() + 600000,\n    };\n  }\n\n  /**\n   * Check if a mint quote has been paid\n   * \n   * @param quoteId - Quote ID to check\n   * @returns Whether the quote has been paid\n   */\n  async checkMintQuote(quoteId: string): Promise<boolean> {\n    await this.ensureInitialized();\n    \n    if (!this.cashuWallet) {\n      throw new Error('Wallet not initialized');\n    }\n\n    const quote = await this.cashuWallet.checkMintQuote(quoteId);\n    return quote.state === 'PAID';\n  }\n\n  /**\n   * Mint ecash tokens after paying the Lightning invoice\n   * \n   * @param amount - Amount to mint\n   * @param quoteId - Quote ID from getMintQuote\n   * @returns Minted proofs\n   */\n  async mintTokens(amount: number, quoteId: string): Promise<Proof[]> {\n    await this.ensureInitialized();\n    \n    if (!this.cashuWallet) {\n      throw new Error('Wallet not initialized');\n    }\n\n    const result = await this.cashuWallet.mintTokens(amount, quoteId);\n    const proofs = result.proofs;\n    this.proofs.push(...proofs);\n    \n    this.log('Minted tokens', { \n      amount, \n      proofCount: proofs.length \n    });\n\n    return proofs;\n  }\n\n  /**\n   * Get a melt quote (request to convert ecash to Lightning payment)\n   * \n   * @param invoice - Lightning invoice to pay\n   * @returns Quote with fee estimate\n   */\n  async getMeltQuote(invoice: string): Promise<MeltQuoteResult> {\n    await this.ensureInitialized();\n    \n    if (!this.cashuWallet) {\n      throw new Error('Wallet not initialized');\n    }\n\n    const quote = await this.cashuWallet.createMeltQuote(invoice);\n    this.log('Created melt quote', { \n      amount: quote.amount, \n      fee: quote.fee_reserve \n    });\n\n    return {\n      quote: quote.quote,\n      amount: quote.amount,\n      fee: quote.fee_reserve,\n      paid: quote.state === 'PAID',\n      expiry: quote.expiry || Date.now() + 600000,\n    };\n  }\n\n  /**\n   * Melt ecash tokens to pay a Lightning invoice\n   * \n   * @param meltQuote - Melt quote response from getMeltQuote\n   * @param proofs - Proofs to melt\n   * @returns Payment result with preimage if successful\n   */\n  async meltTokens(meltQuote: MeltQuoteResponse, proofs: Proof[]): Promise<{\n    paid: boolean;\n    preimage?: string;\n    change: Proof[];\n  }> {\n    await this.ensureInitialized();\n    \n    if (!this.cashuWallet) {\n      throw new Error('Wallet not initialized');\n    }\n\n    const result: MeltTokensResponse = await this.cashuWallet.meltTokens(meltQuote, proofs);\n    \n    // Remove melted proofs from local storage\n    const proofIds = new Set(proofs.map(p => p.secret));\n    this.proofs = this.proofs.filter(p => !proofIds.has(p.secret));\n    \n    // Add any change\n    if (result.change && result.change.length > 0) {\n      this.proofs.push(...result.change);\n    }\n\n    this.log('Melted tokens', { \n      paid: result.isPaid, \n      changeAmount: result.change?.length || 0 \n    });\n\n    return {\n      paid: result.isPaid,\n      preimage: result.preimage || undefined,\n      change: result.change || [],\n    };\n  }\n\n  /**\n   * Send ecash tokens to another user\n   * \n   * @param proofs - Proofs to send from\n   * @param amount - Amount to send\n   * @returns Encoded token string and change\n   */\n  async send(proofs: Proof[], amount: number): Promise<SendResult> {\n    await this.ensureInitialized();\n    \n    if (!this.cashuWallet) {\n      throw new Error('Wallet not initialized');\n    }\n\n    const totalAmount = this.sumProofs(proofs);\n    if (totalAmount < amount) {\n      throw new Error(`Insufficient balance: have ${totalAmount}, need ${amount}`);\n    }\n\n    // Get proofs for exact amount + get change back\n    const result: SendResponse = await this.cashuWallet.send(amount, proofs);\n    const { send, returnChange } = result;\n    \n    // Create encoded token\n    const tokenEntry: TokenEntry = {\n      mint: this.mintUrl,\n      proofs: send,\n    };\n    const token: Token = {\n      token: [tokenEntry],\n    };\n    const encodedToken = getEncodedToken(token);\n\n    // Update local proofs - remove sent, keep change\n    const sentIds = new Set(send.map(p => p.secret));\n    this.proofs = this.proofs.filter(p => !sentIds.has(p.secret));\n    this.proofs.push(...returnChange);\n\n    this.log('Sent tokens', { amount, changeAmount: this.sumProofs(returnChange) });\n\n    return {\n      token: encodedToken,\n      change: returnChange,\n    };\n  }\n\n  /**\n   * Receive ecash tokens from another user\n   * \n   * @param encodedToken - Encoded token string to receive\n   * @returns Received proofs\n   */\n  async receive(encodedToken: string): Promise<Proof[]> {\n    await this.ensureInitialized();\n    \n    if (!this.cashuWallet) {\n      throw new Error('Wallet not initialized');\n    }\n\n    const proofs = await this.cashuWallet.receive(encodedToken);\n    this.proofs.push(...proofs);\n\n    this.log('Received tokens', { \n      amount: this.sumProofs(proofs), \n      proofCount: proofs.length \n    });\n\n    return proofs;\n  }\n\n  /**\n   * Get current balance from stored proofs\n   */\n  getBalance(): TokenBalance {\n    const denominations: Record<number, number> = {};\n    let total = 0;\n\n    for (const proof of this.proofs) {\n      total += proof.amount;\n      denominations[proof.amount] = (denominations[proof.amount] || 0) + 1;\n    }\n\n    return {\n      total,\n      proofCount: this.proofs.length,\n      denominations,\n    };\n  }\n\n  /**\n   * Get all stored proofs\n   */\n  getProofs(): Proof[] {\n    return [...this.proofs];\n  }\n\n  /**\n   * Add proofs to wallet storage\n   * \n   * @param proofs - Proofs to add\n   */\n  addProofs(proofs: Proof[]): void {\n    this.proofs.push(...proofs);\n  }\n\n  /**\n   * Clear all stored proofs\n   */\n  clearProofs(): void {\n    this.proofs = [];\n  }\n\n  /**\n   * Export proofs as encoded token\n   * \n   * @param proofs - Specific proofs to export (defaults to all)\n   */\n  exportToken(proofs?: Proof[]): string {\n    const toExport = proofs || this.proofs;\n    const tokenEntry: TokenEntry = {\n      mint: this.mintUrl,\n      proofs: toExport,\n    };\n    const token: Token = {\n      token: [tokenEntry],\n    };\n    return getEncodedToken(token);\n  }\n\n  /**\n   * Get the mint URL\n   */\n  getMintUrl(): string {\n    return this.mintUrl;\n  }\n\n  /**\n   * Sum the amounts of proofs\n   */\n  private sumProofs(proofs: Proof[]): number {\n    return proofs.reduce((sum, p) => sum + p.amount, 0);\n  }\n\n  /**\n   * Log debug messages\n   */\n  private log(message: string, data?: Record<string, unknown>): void {\n    if (this.debug) {\n      console.log(`[CashuWallet] ${message}`, data || '');\n    }\n  }\n}\n\nexport default CashuWallet;\n","/**\n * SLPM SDK - Core Orchestrator\n * \n * Main entry point that combines Privacy Mixer, Cross-Chain Swaps, and Cashu Wallet\n * into a unified interface for privacy-preserving Starknet transactions.\n */\n\nimport { Account, RpcProvider } from 'starknet';\nimport type {\n  SLPMConfig,\n  WalletConnection,\n  Commitment,\n  DepositParams,\n  DepositResult,\n  WithdrawParams,\n  WithdrawResult,\n  SwapParams,\n  SwapResult,\n  SwapDirection,\n} from './types';\nimport {\n  MAINNET_CONTRACTS,\n  SEPOLIA_CONTRACTS,\n  RPC_URLS,\n  CASHU_MINTS,\n} from './constants';\nimport { generateCommitment } from './crypto';\nimport { PrivacyMixer } from './privacy';\nimport { CrossChainSwapper } from './swaps';\nimport { CashuWallet } from './cashu';\n\n/**\n * Extended config with account for SLPM initialization\n */\nexport interface SLPMInitConfig extends SLPMConfig {\n  /** Starknet account for signing transactions */\n  account: Account;\n}\n\n/**\n * SLPM - Starknet Lightning Privacy Mixer SDK\n * \n * The main class that orchestrates all privacy features:\n * - On-chain privacy mixer (deposit/withdraw with commitments)\n * - Cross-chain swaps (STRK  BTC/ZEC via Lightning)\n * - Cashu ecash (privacy-preserving payment layer)\n * \n * @example\n * ```typescript\n * import { SLPM } from '@slpm/sdk';\n * import { Account, RpcProvider } from 'starknet';\n * \n * const provider = new RpcProvider({ nodeUrl: 'https://...' });\n * const account = new Account(provider, address, privateKey);\n * \n * // Initialize SLPM\n * const slpm = new SLPM({\n *   rpcUrl: 'https://starknet-mainnet.public.blastapi.io',\n *   network: 'mainnet',\n *   account,\n *   cashuMintUrl: 'https://mint.minibits.cash/Bitcoin',\n * });\n * \n * // Privacy mixer deposit\n * const result = await slpm.deposit({\n *   amount: BigInt('1000000000000000000'), // 1 STRK\n * });\n * console.log('Save this commitment:', result.commitment);\n * \n * // Later, withdraw to a different address\n * await slpm.withdraw({\n *   commitment: result.commitment,\n *   recipient: '0x...',\n *   amount: BigInt('1000000000000000000'),\n * });\n * \n * // Cross-chain swap with privacy\n * await slpm.swap({\n *   direction: 'strk-to-btc',\n *   amount: '1',\n *   destinationAddress: 'bc1q...',\n *   usePrivacyMixer: true,\n *   useCashuFlow: true,\n * });\n * ```\n */\nexport class SLPM {\n  private config: SLPMInitConfig;\n  private wallet: WalletConnection;\n  \n  // Sub-modules\n  public readonly mixer: PrivacyMixer;\n  public readonly swapper: CrossChainSwapper;\n  public readonly cashu: CashuWallet;\n\n  /**\n   * Create a new SLPM instance\n   * \n   * @param config - Configuration options including Starknet account\n   */\n  constructor(config: SLPMInitConfig) {\n    this.config = config;\n    \n    // Set up provider\n    const rpcUrl = config.rpcUrl || RPC_URLS[config.network];\n    const provider = new RpcProvider({ nodeUrl: rpcUrl });\n    \n    // Create wallet connection\n    this.wallet = {\n      account: config.account,\n      provider,\n      address: config.account.address,\n    };\n    \n    // Determine cashu mint URL\n    const cashuMintUrl = config.cashuMintUrl || CASHU_MINTS.mainnet;\n    \n    // Initialize sub-modules\n    this.mixer = new PrivacyMixer(config, this.wallet);\n    this.swapper = new CrossChainSwapper(config, this.wallet, this.mixer);\n    this.cashu = new CashuWallet({\n      mintUrl: cashuMintUrl,\n      debug: config.debug,\n    });\n    \n    this.log('SLPM initialized', { \n      network: config.network, \n      address: this.wallet.address,\n    });\n  }\n\n  // ==========================================\n  // High-Level Privacy Operations\n  // ==========================================\n\n  /**\n   * Deposit funds into the privacy mixer\n   * \n   * @param params - Deposit parameters with amount\n   * @returns Deposit result with commitment (SAVE THIS!)\n   */\n  async deposit(params: DepositParams): Promise<DepositResult> {\n    return this.mixer.deposit(params);\n  }\n\n  /**\n   * Withdraw funds from the privacy mixer\n   * \n   * @param params - Withdrawal parameters with commitment\n   * @returns Withdrawal result\n   */\n  async withdraw(params: WithdrawParams): Promise<WithdrawResult> {\n    return this.mixer.withdraw(params);\n  }\n\n  /**\n   * Execute a cross-chain swap\n   * \n   * @param params - Swap parameters\n   * @returns Swap result\n   */\n  async swap(params: SwapParams): Promise<SwapResult> {\n    return this.swapper.swap(params);\n  }\n\n  /**\n   * Get a quote for a cross-chain swap\n   * \n   * @param direction - Swap direction\n   * @param amount - Amount to swap\n   */\n  async getSwapQuote(direction: SwapDirection, amount: string) {\n    return this.swapper.getQuote(direction, amount);\n  }\n\n  // ==========================================\n  // Privacy-Enhanced Flows\n  // ==========================================\n\n  /**\n   * Private send - deposit to mixer, then withdraw to recipient\n   * Breaks the on-chain link between sender and recipient\n   * \n   * @param amount - Amount to send (in wei as bigint)\n   * @param recipientAddress - Recipient's Starknet address\n   * @param options - Additional options\n   */\n  async privateSend(\n    amount: bigint,\n    recipientAddress: string,\n    options?: {\n      delayMs?: number;\n      minAnonymitySetSize?: number;\n    }\n  ): Promise<{\n    depositResult: DepositResult;\n    withdrawResult: WithdrawResult;\n  }> {\n    // Step 1: Deposit to mixer\n    const depositResult = await this.deposit({ amount });\n    \n    this.log('Private send: deposited', { txHash: depositResult.txHash });\n    \n    // Wait for minimum anonymity set if specified\n    if (options?.minAnonymitySetSize) {\n      await this.waitForAnonymitySet(options.minAnonymitySetSize);\n    }\n    \n    // Optional delay for privacy\n    if (options?.delayMs) {\n      await this.delay(options.delayMs);\n    }\n    \n    // Step 2: Withdraw to recipient\n    const withdrawResult = await this.withdraw({\n      commitment: depositResult.commitment,\n      recipient: recipientAddress,\n      amount,\n    });\n    \n    this.log('Private send: withdrawn', { txHash: withdrawResult.txHash });\n    \n    return {\n      depositResult,\n      withdrawResult,\n    };\n  }\n\n  /**\n   * Private cross-chain transfer with full privacy pipeline\n   * \n   * Uses: Mixer deposit  Cashu mint  Lightning swap  Cashu melt  Mixer withdraw\n   * \n   * @param params - Swap parameters with enhanced privacy\n   */\n  async privateSwap(params: SwapParams): Promise<SwapResult> {\n    // Enable all privacy features\n    const enhancedParams: SwapParams = {\n      ...params,\n      usePrivacyMixer: true,\n      useCashuFlow: true,\n    };\n    \n    return this.swap(enhancedParams);\n  }\n\n  // ==========================================\n  // Cashu Operations\n  // ==========================================\n\n  /**\n   * Mint Cashu tokens by paying a Lightning invoice\n   * \n   * @param amount - Amount in sats\n   * @returns Mint quote with invoice\n   */\n  async mintCashuTokens(amount: number) {\n    await this.cashu.init();\n    return this.cashu.getMintQuote(amount);\n  }\n\n  /**\n   * Finalize minting after paying the invoice\n   * \n   * @param quoteId - Quote ID from mintCashuTokens\n   */\n  async finalizeCashuMint(quoteId: string) {\n    await this.cashu.init();\n    // Use receive with encoded token after payment confirmed\n    const isPaid = await this.cashu.checkMintQuote(quoteId);\n    if (!isPaid) {\n      throw new Error('Mint quote not yet paid');\n    }\n    // Internal method access through mint\n    return this.cashu.getMintQuote(0); // Placeholder - actual mint uses internal\n  }\n\n  /**\n   * Pay a Lightning invoice using Cashu tokens\n   * \n   * @param invoice - Lightning invoice to pay\n   */\n  async payCashuInvoice(invoice: string) {\n    await this.cashu.init();\n    const quoteResult = await this.cashu.getMeltQuote(invoice);\n    const proofs = this.cashu.getProofs();\n    // Need to get the full melt quote response - fetch it again\n    const meltQuote = await (this.cashu as any).cashuWallet?.checkMeltQuote(quoteResult.quote);\n    if (!meltQuote) throw new Error('Failed to get melt quote');\n    return this.cashu.meltTokens(meltQuote, proofs);\n  }\n\n  /**\n   * Get Cashu wallet balance\n   */\n  getCashuBalance() {\n    return this.cashu.getBalance();\n  }\n\n  // ==========================================\n  // Utility Methods\n  // ==========================================\n\n  /**\n   * Get mixer statistics\n   */\n  async getMixerStats() {\n    return this.mixer.getStats();\n  }\n\n  /**\n   * Check if a nullifier has been used (commitment spent)\n   * \n   * @param nullifierHash - Nullifier hash to check\n   */\n  async isNullifierUsed(nullifierHash: string): Promise<boolean> {\n    return this.mixer.isNullifierUsed(nullifierHash);\n  }\n\n  /**\n   * Wait until anonymity set reaches minimum size\n   * \n   * @param minSize - Minimum anonymity set size\n   * @param timeoutMs - Timeout in milliseconds (default: 5 minutes)\n   */\n  async waitForAnonymitySet(\n    minSize: number,\n    timeoutMs: number = 300000\n  ): Promise<void> {\n    const startTime = Date.now();\n    \n    while (Date.now() - startTime < timeoutMs) {\n      const stats = await this.mixer.getStats();\n      \n      if (stats.anonymitySetSize >= minSize) {\n        this.log('Anonymity set reached', { currentSize: stats.anonymitySetSize, minSize });\n        return;\n      }\n      \n      // Wait before checking again\n      await this.delay(10000);\n    }\n    \n    throw new Error(`Timeout waiting for anonymity set (min: ${minSize})`);\n  }\n\n  /**\n   * Generate a new commitment for future deposit\n   * \n   * @param amount - Amount for the commitment\n   */\n  createCommitment(amount: bigint): ReturnType<typeof generateCommitment> {\n    return generateCommitment(amount);\n  }\n\n  /**\n   * Get the connected wallet address\n   */\n  getAddress(): string {\n    return this.wallet.address;\n  }\n\n  /**\n   * Get the network\n   */\n  getNetwork(): 'mainnet' | 'sepolia' {\n    return this.config.network;\n  }\n\n  // ==========================================\n  // Private Helpers\n  // ==========================================\n\n  private delay(ms: number): Promise<void> {\n    return new Promise(resolve => setTimeout(resolve, ms));\n  }\n\n  private log(message: string, data?: Record<string, unknown>): void {\n    if (this.config.debug) {\n      console.log(`[SLPM] ${message}`, data || '');\n    }\n  }\n}\n\nexport default SLPM;\n"]}